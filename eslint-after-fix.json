[{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/admin/seo-dashboard-simplified/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/admin/seo-dashboard-simplified/seo-dashboard-simplified-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/admin/seo-dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/admin/seo-dashboard/seo-dashboard-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/articles-pdf-center/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":38,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { ArrowLeft, Download } from 'lucide-react';\nimport { Locale, locales } from '@/i18n';\nimport OptimizedMobilePDFCenter from '@/components/OptimizedMobilePDFCenter';\nimport { SITE_CONFIG } from '@/config/site.config';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'downloadsPage' });\n\n  return {\n    title: t('seo.title'),\n    description: t('seo.description'),\n    keywords: t('seo.keywords'),\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function ArticlesPDFCenterPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n  \n  const t = await getTranslations('common');\n\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100\">\n      {/* è¿”å›å¯¼èˆª */}\n      <div className=\"container mx-auto px-4 pt-8\">\n        <Link \n          href={`/${locale}/articles`}\n          className=\"inline-flex items-center gap-2 text-purple-600 hover:text-purple-700 font-medium transition-colors group mb-6\"\n        >\n          <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n          <span>{locale === 'en' ? 'Back to Articles' : 'è¿”å›æ–‡ç« '}</span>\n        </Link>\n      </div>\n\n      {/* é¡µé¢æ ‡é¢˜åŒºåŸŸ */}\n      <header className=\"container mx-auto px-4 pb-8\">\n        <div className=\"text-center\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl mb-6 shadow-lg\">\n            <Download className=\"w-8 h-8 text-white\" />\n          </div>\n          \n          <h1 className=\"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4\">\n            ğŸ“š æ–‡ç« PDFä¸‹è½½ä¸­å¿ƒ\n          </h1>\n          \n          <p className=\"text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed mb-6\">\n            {SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources}ä¸ªç²¾é€‰èµ„æºï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»ã€‚ä»ç«‹å³ç¼“è§£åˆ°é•¿æœŸç®¡ç†ï¼Œä¸ºæ‚¨çš„ç»æœŸå¥åº·æä¾›å…¨æ–¹ä½æ”¯æŒã€‚\n          </p>\n          \n          {/* å¿«é€Ÿç»Ÿè®¡ */}\n          <div className=\"grid grid-cols-3 gap-4 max-w-md mx-auto mb-8\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">{SITE_CONFIG.statistics.articles}</div>\n              <div className=\"text-sm text-gray-500\">ä¸“ä¸šæ–‡ç« </div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-pink-600\">{SITE_CONFIG.statistics.pdfResources}</div>\n              <div className=\"text-sm text-gray-500\">å®ç”¨PDF</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-indigo-600\">2</div>\n              <div className=\"text-sm text-gray-500\">è¯­è¨€ç‰ˆæœ¬</div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* ä¼˜åŒ–ç‰ˆç§»åŠ¨ç«¯PDFä¸­å¿ƒç»„ä»¶ */}\n      <OptimizedMobilePDFCenter locale={locale} />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/articles/[slug]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fs' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'path' is defined but never used.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'matter' is defined but never used.","line":7,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Article' is defined but never used.","line":24,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":18}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notFound } from 'next/navigation';\nimport { unstable_setRequestLocale } from 'next-intl/server';\nimport Link from 'next/link';\nimport type { Metadata } from 'next';\nimport fs from 'fs';\nimport path from 'path';\nimport matter from 'gray-matter';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport NSAIDInteractive from '@/components/NSAIDInteractive';\nimport NSAIDContentSimple from '@/components/NSAIDContentSimple';\nimport StructuredData from '@/components/StructuredData';\nimport ArticleInteractions from '@/components/ArticleInteractions';\nimport ReadingProgress from '@/components/ReadingProgress';\nimport { getArticleBySlug, getRelatedArticles } from '@/lib/articles';\nimport TableOfContents from '@/components/TableOfContents';\nimport MarkdownWithMermaid from '@/components/MarkdownWithMermaid';\n\n// Types\ntype Locale = 'en' | 'zh';\n\n// Article interface\ninterface Article {\n  slug: string;\n  title: string;\n  title_zh?: string;\n  date: string;\n  summary: string;\n  summary_zh?: string;\n  tags: string[];\n  tags_zh?: string[];\n  category: string;\n  category_zh?: string;\n  author: string;\n  featured_image: string;\n  reading_time: string;\n  reading_time_zh?: string;\n  content: string;\n  seo_title?: string;\n  seo_title_zh?: string;\n  seo_description?: string;\n  seo_description_zh?: string;\n  canonical_url?: string;\n  schema_type?: string;\n}\n\n// ä½¿ç”¨lib/articles.tsä¸­çš„å‡½æ•°\n\n// ç§»é™¤æœ¬åœ°å®šä¹‰ï¼Œä½¿ç”¨lib/articles.tsä¸­çš„å‡½æ•°\n\n// Generate static params for all articles\nexport async function generateStaticParams() {\n  const locales: Locale[] = ['en', 'zh'];\n  const articleSlugs = [\n    // ç°æœ‰æ–‡ç« ä¿æŒä¸å˜\n    '5-minute-period-pain-relief',\n    'anti-inflammatory-diet-period-pain',\n    'comprehensive-iud-guide',\n    'comprehensive-medical-guide-to-dysmenorrhea',\n    'essential-oils-aromatherapy-menstrual-pain-guide',\n    'global-traditional-menstrual-pain-relief',\n    'heat-therapy-complete-guide',\n    'herbal-tea-menstrual-pain-relief',\n    'hidden-culprits-of-menstrual-pain',\n    'home-natural-menstrual-pain-relief',\n    'magnesium-gut-health-comprehensive-guide',\n    'menstrual-nausea-relief-guide',\n    'menstrual-pain-accompanying-symptoms-guide',\n    'menstrual-pain-complications-management',\n    'menstrual-pain-faq-expert-answers',\n    'menstrual-pain-medical-guide',\n    'menstrual-pain-vs-other-abdominal-pain-guide',\n    'natural-physical-therapy-comprehensive-guide',\n    'nsaid-menstrual-pain-professional-guide',\n    'period-friendly-recipes',\n    'personal-menstrual-health-profile',\n    'recommended-reading-list',\n    'specific-menstrual-pain-management-guide',\n    'comprehensive-menstrual-sleep-quality-guide',\n    'menstrual-pain-research-progress-2024',\n    'menstrual-preventive-care-complete-plan',\n    'menstrual-stress-management-complete-guide',\n    'understanding-your-cycle',\n    'us-menstrual-pain-insurance-coverage-guide',\n    'when-to-see-doctor-period-pain',\n    'when-to-seek-medical-care-comprehensive-guide',\n    'womens-lifecycle-menstrual-pain-analysis',\n    'zhan-zhuang-baduanjin-for-menstrual-pain-relief',\n\n    // ğŸ”§ æ·»åŠ ç¼ºå¤±çš„æ–‡ç« slugï¼ˆä¿®å¤404é”™è¯¯ï¼‰\n    'ginger-menstrual-pain-relief-guide',                           // immediate-5\n    'comprehensive-report-non-medical-factors-menstrual-pain',      // management-1 & management-7\n    'period-pain-simulator-accuracy-analysis',                     // management-8\n    'medication-vs-natural-remedies-menstrual-pain',               // management-9\n\n    // ğŸš¨ ä¿®å¤IndexNowç´¢å¼•é—®é¢˜ - æ·»åŠ ç¼ºå¤±çš„slugæ˜ å°„\n    'pain-complications-management',                                // å¯¹åº” menstrual-pain-complications-management\n    'health-tracking-and-analysis',                                 // å¯¹åº” personal-menstrual-health-profile\n    'evidence-based-pain-guidance',                                 // å¯¹åº” menstrual-pain-medical-guide\n    'sustainable-health-management',                                // å¯¹åº” menstrual-preventive-care-complete-plan\n    'personal-health-profile',                                      // å·²å­˜åœ¨ï¼Œç¡®ä¿åŒ…å«\n    'anti-inflammatory-diet-guide',                                 // å¯¹åº” anti-inflammatory-diet-period-pain\n    'long-term-healthy-lifestyle-guide',                           // éœ€è¦åˆ›å»ºå¯¹åº”æ–‡ç« \n    'iud-comprehensive-guide'                                       // å¯¹åº” comprehensive-iud-guide\n  ];\n\n  const params = [];\n  for (const locale of locales) {\n    for (const slug of articleSlugs) {\n      params.push({ locale, slug });\n    }\n  }\n\n  return params;\n}\n\n// Generate metadata for the article\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale; slug: string }>\n}): Promise<Metadata> {\n  const { locale, slug } = await params;\n  const article = await getArticleBySlug(slug, locale);\n  \n  if (!article) {\n    return {\n      title: 'Article Not Found',\n      description: 'The requested article could not be found.'\n    };\n  }\n  \n  const title = locale === 'zh' ? (article.title_zh || article.title) : article.title;\n  const description = locale === 'zh' ? (article.summary_zh || article.summary) : article.summary;\n  const seoTitle = locale === 'zh' ? (article.seo_title_zh || title) : (article.seo_title || title);\n  const seoDescription = locale === 'zh' ? (article.seo_description_zh || description) : (article.seo_description || description);\n  const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://www.periodhub.health';\n  const canonicalUrl = article.canonical_url || `/${locale}/articles/${slug}`;\n  const articleUrl = `${baseUrl}${canonicalUrl}`;\n\n  return {\n    title: seoTitle,\n    description: seoDescription,\n    keywords: locale === 'zh' ? article.tags_zh : article.tags,\n    authors: [{ name: article.author }],\n    openGraph: {\n      title: seoTitle,\n      description: seoDescription,\n      url: articleUrl,\n      type: 'article',\n      publishedTime: article.date,\n      authors: [article.author],\n      images: article.featured_image ? [\n        {\n          url: article.featured_image,\n          width: 1200,\n          height: 630,\n          alt: title,\n        }\n      ] : undefined,\n      locale: locale === 'zh' ? 'zh_CN' : 'en_US',\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: seoTitle,\n      description: seoDescription,\n      images: article.featured_image ? [article.featured_image] : undefined,\n    },\n    alternates: {\n      canonical: articleUrl,\n      languages: {\n        'en-US': `${baseUrl}/en/articles/${slug}`,\n        'zh-CN': `${baseUrl}/zh/articles/${slug}`,\n        'x-default': `${baseUrl}/en/articles/${slug}`,\n      },\n    },\n    other: {\n      'article:published_time': article.date,\n      'article:author': article.author,\n    },\n  };\n}\n\nexport default async function ArticlePage({\n  params\n}: {\n  params: Promise<{ locale: Locale; slug: string }>\n}) {\n  const { locale, slug } = await params;\n  unstable_setRequestLocale(locale);\n\n  try {\n    console.log('ArticlePage - Processing:', { locale, slug });\n    \n    const article = await getArticleBySlug(slug, locale);\n    console.log('ArticlePage - Article found:', !!article, article?.title);\n    \n    if (!article) {\n      console.error(`Article not found: ${slug} for locale: ${locale}`);\n      notFound();\n    }\n\n    const relatedArticles = await getRelatedArticles(slug, locale, 3);\n    console.log('ArticlePage - Related articles found:', relatedArticles.length);\n\n    const title = locale === 'zh' ? article.title_zh || article.title : article.title;\n    const summary = locale === 'zh' ? article.summary_zh || article.summary : article.summary;\n    const category = locale === 'zh' ? article.category_zh || article.category : article.category;\n    const readingTime = locale === 'zh' ? article.reading_time_zh || article.reading_time : article.reading_time;\n\n  // Check if this is the NSAID article that needs interactive components\n  const isNSAIDArticle = slug === 'nsaid-menstrual-pain-professional-guide';\n\n  // Check if this article contains Mermaid charts\n  const hasMermaidCharts = article.content.includes('```mermaid');\n\n  const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://www.periodhub.health'\n  const articleUrl = `${baseUrl}/${locale}/articles/${slug}`\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      {/* SEOç»“æ„åŒ–æ•°æ® */}\n      <StructuredData\n        type=\"medicalWebPage\"\n        title={title}\n        description={summary || ''}\n        url={articleUrl}\n        image={article.featured_image}\n        author={article.author}\n        datePublished={article.date}\n        dateModified={article.date}\n      />\n\n      {/* é˜…è¯»è¿›åº¦æ¡å’Œè¿”å›é¡¶éƒ¨ */}\n      <ReadingProgress locale={locale} />\n\n      {/* Load NSAID interactive components if needed */}\n      {isNSAIDArticle && <NSAIDInteractive locale={locale} />}\n\n      <div className=\"space-y-6 sm:space-y-8\">\n        {/* Back to Articles */}\n        <div className=\"container-custom\">\n          <Link\n            href={`/${locale}/articles`}\n            className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium mobile-touch-target\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n            {locale === 'zh' ? 'è¿”å›æ–‡ç« åˆ—è¡¨' : 'Back to Articles'}\n          </Link>\n        </div>\n\n      {/* Article Header */}\n      <header className=\"bg-white border-b border-gray-100\">\n        <div className=\"container-custom py-6 sm:py-8\">\n          <div className=\"max-w-4xl mx-auto\">\n            {/* Category and Meta Info */}\n            <div className=\"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-neutral-600 mb-4\">\n              <span className=\"bg-primary-100 text-primary-700 px-2 sm:px-3 py-1 rounded-full font-medium\">\n                {category}\n              </span>\n              <time dateTime={article.date} className=\"flex items-center gap-1\">\n                <svg className=\"w-3 h-3 sm:w-4 sm:h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                {new Date(article.date).toLocaleDateString(locale === 'zh' ? 'zh-CN' : 'en-US')}\n              </time>\n              {readingTime && (\n                <span className=\"flex items-center gap-1\">\n                  <svg className=\"w-3 h-3 sm:w-4 sm:h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  {readingTime}\n                </span>\n              )}\n            </div>\n\n            {/* Title */}\n            <h1 className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-neutral-800 mb-3 sm:mb-4 leading-tight\">\n              {title}\n            </h1>\n\n            {/* Summary */}\n            {summary && (\n              <div className=\"bg-blue-50 border-l-4 border-blue-400 p-4 sm:p-6 mb-6 rounded-r-lg\">\n                <h2 className=\"text-sm sm:text-base font-semibold text-blue-800 mb-2\">\n                  {locale === 'zh' ? 'æ–‡ç« æ‘˜è¦' : 'Article Summary'}\n                </h2>\n                <p className=\"text-sm sm:text-base text-blue-700 leading-relaxed\">\n                  {summary}\n                </p>\n              </div>\n            )}\n\n            {/* Author and Article Stats */}\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-primary-100 rounded-full flex items-center justify-center\">\n                  <span className=\"text-primary-600 font-semibold text-sm sm:text-base\">\n                    {article.author?.charAt(0) || 'P'}\n                  </span>\n                </div>\n                <div>\n                  <p className=\"font-medium text-sm sm:text-base text-neutral-800\">\n                    {article.author || 'Period Health Team'}\n                  </p>\n                  <p className=\"text-xs sm:text-sm text-neutral-600\">\n                    {locale === 'zh' ? 'å¥åº·ä¸“å®¶' : 'Health Expert'}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Article Content with Sidebar */}\n      <main className=\"container-custom\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"lg:grid lg:grid-cols-4 lg:gap-8\">\n            {/* Main Content */}\n            <div className=\"lg:col-span-3\">\n              {/* Table of Contents - Mobile */}\n              <div className=\"lg:hidden mb-6\">\n                <TableOfContents locale={locale} />\n              </div>\n\n              {/* Article Body */}\n              <div className=\"bg-white rounded-lg shadow-sm p-4 sm:p-6 lg:p-8 mb-6\">\n                <div className=\"prose prose-sm sm:prose-base lg:prose-lg max-w-none prose-primary prose-headings:text-neutral-800 prose-p:text-neutral-700 prose-li:text-neutral-700\">\n                  {isNSAIDArticle ? (\n                    // For NSAID article, use custom client component\n                    <NSAIDContentSimple content={article.content} />\n                  ) : hasMermaidCharts ? (\n                    // For articles with Mermaid charts, use enhanced Markdown component\n                    <MarkdownWithMermaid\n                      content={article.content}\n                      className=\"prose prose-sm sm:prose-base lg:prose-lg max-w-none prose-primary prose-headings:text-neutral-800 prose-p:text-neutral-700 prose-li:text-neutral-700\"\n                    />\n                  ) : (\n                    <ReactMarkdown\n                      remarkPlugins={[remarkGfm]}\n                      rehypePlugins={[rehypeRaw]}\n                      components={{\n                      table: ({ children }) => (\n                        <div className=\"overflow-x-auto my-6\">\n                          <table className=\"min-w-full border-collapse border border-gray-300 bg-white rounded-lg shadow-sm\">\n                            {children}\n                          </table>\n                        </div>\n                      ),\n                      thead: ({ children }) => (\n                        <thead className=\"bg-primary-50\">\n                          {children}\n                        </thead>\n                      ),\n                      th: ({ children }) => (\n                        <th className=\"border border-gray-300 px-3 sm:px-4 py-2 sm:py-3 bg-primary-100 font-semibold text-left text-primary-800 text-sm sm:text-base\">\n                          {children}\n                        </th>\n                      ),\n                      td: ({ children }) => (\n                        <td className=\"border border-gray-300 px-3 sm:px-4 py-2 sm:py-3 text-neutral-700 text-sm sm:text-base\">\n                          {children}\n                        </td>\n                      ),\n                      tr: ({ children }) => (\n                        <tr className=\"even:bg-gray-50 hover:bg-primary-25\">\n                          {children}\n                        </tr>\n                      ),\n                    }}\n                  >\n                    {article.content}\n                  </ReactMarkdown>\n                  )}\n                </div>\n              </div>\n\n              {/* Article Interactions */}\n              <ArticleInteractions\n                articleId={slug}\n                articleTitle={title}\n                locale={locale}\n                className=\"mb-6\"\n              />\n            </div>\n\n            {/* Sidebar - Desktop */}\n            <div className=\"hidden lg:block lg:col-span-1\">\n              <div className=\"sticky top-6 space-y-6\">\n                {/* Table of Contents - Desktop */}\n                <TableOfContents locale={locale} />\n\n                {/* Quick Actions */}\n                <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                  <h3 className=\"font-semibold text-gray-800 mb-3 text-sm\">\n                    {locale === 'zh' ? 'å¿«é€Ÿæ“ä½œ' : 'Quick Actions'}\n                  </h3>\n                  <div className=\"space-y-2\">\n                    <Link\n                      href={`/${locale}/articles`}\n                      className=\"w-full text-left px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded flex items-center gap-2\"\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                      </svg>\n                      {locale === 'zh' ? 'æ›´å¤šæ–‡ç« ' : 'More Articles'}\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* Medical Disclaimer */}\n      <section className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"w-5 h-5 sm:w-6 sm:h-6 text-red-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                </svg>\n              </div>\n              <div>\n                <h4 className=\"font-bold text-red-800 mb-2 text-sm sm:text-base\">\n                  {locale === 'zh' ? 'âš ï¸ åŒ»ç–—å…è´£å£°æ˜' : 'âš ï¸ Medical Disclaimer'}\n                </h4>\n                <p className=\"text-xs sm:text-sm text-red-700 leading-relaxed\">\n                  {locale === 'zh'\n                    ? 'æœ¬æ–‡å†…å®¹ä»…ä¾›æ•™è‚²å’Œä¿¡æ¯ç›®çš„ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€è¯Šæ–­æˆ–æ²»ç–—ã€‚å¦‚æœ‰ä»»ä½•å¥åº·é—®é¢˜æˆ–ç–‘è™‘ï¼Œè¯·å’¨è¯¢åˆæ ¼çš„åŒ»ç–—ä¸“ä¸šäººå‘˜ã€‚åœ¨åšå‡ºä»»ä½•å¥åº·ç›¸å…³å†³å®šä¹‹å‰ï¼Œè¯·åŠ¡å¿…å¯»æ±‚åŒ»ç”Ÿçš„å»ºè®®ã€‚'\n                    : 'This content is for educational and informational purposes only and should not replace professional medical advice, diagnosis, or treatment. If you have any health concerns or questions, please consult with a qualified healthcare professional. Always seek medical advice before making any health-related decisions.'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Related Articles */}\n      <section className=\"bg-gradient-to-br from-gray-50 to-gray-100 py-8 sm:py-12\">\n        <div className=\"container-custom\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-6 sm:mb-8\">\n              <h2 className=\"text-xl sm:text-2xl font-bold text-neutral-800 mb-2\">\n                {locale === 'zh' ? 'ğŸ“š ç›¸å…³æ–‡ç« æ¨è' : 'ğŸ“š Related Articles'}\n              </h2>\n              <p className=\"text-sm sm:text-base text-neutral-600\">\n                {locale === 'zh'\n                  ? 'ç»§ç»­æ¢ç´¢æ›´å¤šä¸“ä¸šå¥åº·å†…å®¹'\n                  : 'Continue exploring more professional health content'\n                }\n              </p>\n            </div>\n\n            {relatedArticles.length > 0 ? (\n              <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                {relatedArticles.map((relatedArticle) => {\n                  const relatedTitle = locale === 'zh' ? relatedArticle.title_zh || relatedArticle.title : relatedArticle.title;\n                  const relatedSummary = locale === 'zh' ? relatedArticle.summary_zh || relatedArticle.summary : relatedArticle.summary;\n                  const relatedCategory = locale === 'zh' ? relatedArticle.category_zh || relatedArticle.category : relatedArticle.category;\n\n                  return (\n                    <Link\n                      key={relatedArticle.slug}\n                      href={`/${locale}/articles/${relatedArticle.slug}`}\n                      className=\"group block bg-white p-4 sm:p-6 rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 border border-gray-100 hover:border-primary-200\"\n                    >\n                      <div className=\"flex items-center mb-3\">\n                        <span className=\"bg-primary-100 text-primary-700 px-2 py-1 rounded-full text-xs font-medium\">\n                          {relatedCategory}\n                        </span>\n                      </div>\n                      <h3 className=\"text-base sm:text-lg font-semibold text-neutral-800 mb-2 group-hover:text-primary-600 transition-colors line-clamp-2\">\n                        {relatedTitle}\n                      </h3>\n                      <p className=\"text-neutral-600 text-sm line-clamp-3 leading-relaxed mb-3\">\n                        {relatedSummary}\n                      </p>\n                      <div className=\"flex items-center text-primary-600 text-sm font-medium\">\n                        <span>{locale === 'zh' ? 'é˜…è¯»å…¨æ–‡' : 'Read More'}</span>\n                        <svg className=\"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                        </svg>\n                      </div>\n                    </Link>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-gray-100 text-center\">\n                <div className=\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-semibold text-primary-600 mb-2\">\n                  {locale === 'zh' ? 'æ›´å¤šæ–‡ç« å³å°†å‘å¸ƒ' : 'More Articles Coming Soon'}\n                </h3>\n                <p className=\"text-neutral-600 text-sm sm:text-base\">\n                  {locale === 'zh'\n                    ? 'æˆ‘ä»¬æ­£åœ¨å‡†å¤‡æ›´å¤šé«˜è´¨é‡çš„å¥åº·å†…å®¹ï¼Œæ•¬è¯·æœŸå¾…ã€‚'\n                    : 'We are preparing more high-quality health content. Stay tuned.'\n                  }\n                </p>\n                <Link\n                  href={`/${locale}/articles`}\n                  className=\"inline-flex items-center mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors text-sm font-medium\"\n                >\n                  {locale === 'zh' ? 'æµè§ˆæ‰€æœ‰æ–‡ç« ' : 'Browse All Articles'}\n                  <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                  </svg>\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n      </section>\n      </div>\n    </div>\n  );\n  } catch (error) {\n    console.error('Error in ArticlePage:', error);\n    notFound();\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/articles/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/articles/pain-management/medication-guide/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/articles/pain-management/understanding-dysmenorrhea/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BookOpen' is defined but never used.","line":4,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { setRequestLocale  } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { ArrowLeft, Clock, User, BookOpen, AlertCircle, CheckCircle, Info } from 'lucide-react';\n\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  return {\n    title: locale === 'zh' ? 'æ·±åº¦è§£æï¼šç—›ç»çš„ç”Ÿç†æœºåˆ¶ä¸ç±»å‹ - ç—›ç»ç®¡ç†ä¸“é¢˜' : 'In-depth Analysis: Physiological Mechanisms and Types of Dysmenorrhea - Dysmenorrhea Management Topics',\n    description: locale === 'zh' \n      ? 'ä»åŒ»å­¦è§’åº¦æ·±å…¥è§£æç—›ç»çš„ç”Ÿç†æœºåˆ¶ï¼Œäº†è§£åŸå‘æ€§å’Œç»§å‘æ€§ç—›ç»çš„åŒºåˆ«ï¼Œä¸ºç§‘å­¦ç¼“è§£ç–¼ç—›æä¾›ç†è®ºåŸºç¡€ã€‚'\n      : 'In-depth analysis of the physiological mechanisms of dysmenorrhea from a medical perspective, understanding the difference between primary and secondary dysmenorrhea, providing theoretical basis for scientific pain relief.',\n  };\n}\n\nexport default async function UnderstandingDysmenorrheaPage({ params }: Props) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8\" data-page=\"understanding-dysmenorrhea\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/articles`} className=\"hover:text-primary-600 transition-colors\">\n          {locale === 'zh' ? 'æ–‡ç« ä¸­å¿ƒ' : 'Articles'}\n        </Link>\n        <span>/</span>\n        <Link href={`/${locale}/articles`} className=\"hover:text-primary-600 transition-colors\">\n          {locale === 'zh' ? 'æ–‡ç« ä¸­å¿ƒ' : 'Articles'}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">\n          {locale === 'zh' ? 'ç—›ç»æœºåˆ¶è§£æ' : 'Dysmenorrhea Mechanisms'}\n        </span>\n      </nav>\n\n      {/* Article Header */}\n      <header className=\"py-8 border-b border-gray-200\">\n        <div className=\"flex items-center mb-4\">\n          <span className=\"px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full mr-4\">\n            {locale === 'zh' ? 'åŸºç¡€çŸ¥è¯†' : 'Fundamentals'}\n          </span>\n          <div className=\"flex items-center text-sm text-neutral-500\">\n            <Clock className=\"w-4 h-4 mr-1\" />\n            {locale === 'zh' ? '8åˆ†é’Ÿé˜…è¯»' : '8 min read'}\n          </div>\n        </div>\n        \n        <h1 className=\"text-3xl md:text-4xl font-bold text-neutral-900 mb-4\">\n          {locale === 'zh' ? 'æ·±åº¦è§£æï¼šç—›ç»çš„ç”Ÿç†æœºåˆ¶ä¸ç±»å‹' : 'In-depth Analysis: Physiological Mechanisms and Types of Dysmenorrhea'}\n        </h1>\n        \n        <p className=\"text-lg text-neutral-600 leading-relaxed\">\n          {locale === 'zh' \n            ? 'ä»åŒ»å­¦è§’åº¦æ·±å…¥è§£æç—›ç»çš„ç”Ÿç†æœºåˆ¶ï¼Œå¸®åŠ©æ‚¨ç§‘å­¦ç†è§£ç–¼ç—›äº§ç”Ÿçš„åŸå› ï¼Œä¸ºé€‰æ‹©åˆé€‚çš„ç¼“è§£æ–¹æ³•æä¾›ç†è®ºåŸºç¡€ã€‚'\n            : 'In-depth analysis of the physiological mechanisms of dysmenorrhea from a medical perspective, helping you scientifically understand the causes of pain and providing a theoretical basis for choosing appropriate relief methods.'\n          }\n        </p>\n\n        <div className=\"flex items-center mt-6 pt-6 border-t border-gray-100\">\n          <User className=\"w-5 h-5 text-neutral-400 mr-2\" />\n          <span className=\"text-sm text-neutral-600\">\n            {locale === 'zh' ? 'åŒ»å­¦ç¼–è¾‘å›¢é˜Ÿ' : 'Medical Editorial Team'}\n          </span>\n          <span className=\"mx-2 text-neutral-300\">â€¢</span>\n          <span className=\"text-sm text-neutral-600\">\n            {locale === 'zh' ? '2024å¹´8æœˆæ›´æ–°' : 'Updated August 2024'}\n          </span>\n        </div>\n      </header>\n\n      {/* Article Content */}\n      <article className=\"prose prose-lg max-w-none\">\n        {/* Introduction */}\n        <section className=\"mb-8\">\n          <div className=\"bg-blue-50 p-6 rounded-lg border-l-4 border-blue-400 mb-6\">\n            <div className=\"flex items-start\">\n              <Info className=\"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-lg font-semibold text-blue-900 mb-2\">\n                  {locale === 'zh' ? 'å…³é”®è¦ç‚¹' : 'Key Points'}\n                </h3>\n                <ul className=\"text-blue-800 space-y-1 text-sm\">\n                  <li>â€¢ {locale === 'zh' ? 'ç—›ç»å½±å“å…¨çƒ50-90%çš„è‚²é¾„å¥³æ€§' : 'Dysmenorrhea affects 50-90% of women of reproductive age globally'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'åˆ†ä¸ºåŸå‘æ€§å’Œç»§å‘æ€§ä¸¤å¤§ç±»å‹' : 'Divided into primary and secondary types'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å‰åˆ—è…ºç´ æ˜¯ä¸»è¦çš„ç–¼ç—›ä»‹è´¨' : 'Prostaglandins are the main pain mediators'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç†è§£æœºåˆ¶æœ‰åŠ©äºé€‰æ‹©æ­£ç¡®çš„æ²»ç–—æ–¹æ³•' : 'Understanding mechanisms helps choose correct treatment methods'}</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <p className=\"text-neutral-700 leading-relaxed mb-4\">\n            {locale === 'zh' \n              ? 'ç—›ç»ï¼ˆDysmenorrheaï¼‰æ˜¯æœ€å¸¸è§çš„å¦‡ç§‘ç—‡çŠ¶ä¹‹ä¸€ï¼Œå‡ ä¹æ¯ä½å¥³æ€§åœ¨ç”Ÿå‘½ä¸­çš„æŸä¸ªé˜¶æ®µéƒ½ä¼šç»å†ã€‚ç„¶è€Œï¼Œè®¸å¤šäººå¯¹ç—›ç»çš„ç”Ÿç†æœºåˆ¶ç¼ºä¹æ·±å…¥äº†è§£ï¼Œè¿™å¾€å¾€å¯¼è‡´æ²»ç–—æ–¹æ³•çš„é€‰æ‹©ä¸å½“æˆ–å»¶è¯¯ã€‚æœ¬æ–‡å°†ä»åŒ»å­¦è§’åº¦è¯¦ç»†è§£æç—›ç»çš„å‘ç”Ÿæœºåˆ¶ã€åˆ†ç±»æ ‡å‡†ä»¥åŠä¸åŒç±»å‹çš„ç‰¹å¾ï¼Œä¸ºæ‚¨æä¾›ç§‘å­¦çš„ç†è®ºåŸºç¡€ã€‚'\n              : 'Dysmenorrhea is one of the most common gynecological symptoms, with almost every woman experiencing it at some stage of life. However, many people lack in-depth understanding of the physiological mechanisms of dysmenorrhea, which often leads to inappropriate treatment choices or delays. This article will provide a detailed analysis of the mechanisms, classification standards, and characteristics of different types of dysmenorrhea from a medical perspective, providing you with a scientific theoretical foundation.'\n            }\n          </p>\n        </section>\n\n        {/* Primary vs Secondary Dysmenorrhea */}\n        <section className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-neutral-900 mb-6\">\n            {locale === 'zh' ? 'ç—›ç»çš„åˆ†ç±»ï¼šåŸå‘æ€§ä¸ç»§å‘æ€§' : 'Classification of Dysmenorrhea: Primary vs Secondary'}\n          </h2>\n\n          <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n            <div className=\"bg-green-50 p-6 rounded-lg border border-green-200\">\n              <div className=\"flex items-center mb-4\">\n                <CheckCircle className=\"w-6 h-6 text-green-600 mr-3\" />\n                <h3 className=\"text-lg font-semibold text-green-900\">\n                  {locale === 'zh' ? 'åŸå‘æ€§ç—›ç»' : 'Primary Dysmenorrhea'}\n                </h3>\n              </div>\n              <ul className=\"text-green-800 space-y-2 text-sm\">\n                <li>â€¢ {locale === 'zh' ? 'å ç—›ç»ç—…ä¾‹çš„90-95%' : 'Accounts for 90-95% of dysmenorrhea cases'}</li>\n                <li>â€¢ {locale === 'zh' ? 'é€šå¸¸åœ¨åˆæ½®å1-2å¹´å¼€å§‹' : 'Usually begins 1-2 years after menarche'}</li>\n                <li>â€¢ {locale === 'zh' ? 'æ— å™¨è´¨æ€§ç—…å˜' : 'No organic pathology'}</li>\n                <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›æŒç»­24-72å°æ—¶' : 'Pain lasts 24-72 hours'}</li>\n                <li>â€¢ {locale === 'zh' ? 'éšå¹´é¾„å¢é•¿å¯èƒ½å‡è½»' : 'May decrease with age'}</li>\n              </ul>\n            </div>\n\n            <div className=\"bg-orange-50 p-6 rounded-lg border border-orange-200\">\n              <div className=\"flex items-center mb-4\">\n                <AlertCircle className=\"w-6 h-6 text-orange-600 mr-3\" />\n                <h3 className=\"text-lg font-semibold text-orange-900\">\n                  {locale === 'zh' ? 'ç»§å‘æ€§ç—›ç»' : 'Secondary Dysmenorrhea'}\n                </h3>\n              </div>\n              <ul className=\"text-orange-800 space-y-2 text-sm\">\n                <li>â€¢ {locale === 'zh' ? 'ç”±å™¨è´¨æ€§ç–¾ç—…å¼•èµ·' : 'Caused by organic diseases'}</li>\n                <li>â€¢ {locale === 'zh' ? 'å¸¸è§äº25å²ä»¥å' : 'Common after age 25'}</li>\n                <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›å¯èƒ½é€æ¸åŠ é‡' : 'Pain may gradually worsen'}</li>\n                <li>â€¢ {locale === 'zh' ? 'éœ€è¦é’ˆå¯¹ç—…å› æ²»ç–—' : 'Requires treatment targeting the cause'}</li>\n                <li>â€¢ {locale === 'zh' ? 'å¯èƒ½ä¼´éšå…¶ä»–ç—‡çŠ¶' : 'May be accompanied by other symptoms'}</li>\n              </ul>\n            </div>\n          </div>\n        </section>\n\n        {/* Physiological Mechanisms */}\n        <section className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-neutral-900 mb-6\">\n            {locale === 'zh' ? 'åŸå‘æ€§ç—›ç»çš„ç”Ÿç†æœºåˆ¶' : 'Physiological Mechanisms of Primary Dysmenorrhea'}\n          </h2>\n\n          <div className=\"bg-neutral-50 p-6 rounded-lg mb-6\">\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n              {locale === 'zh' ? 'å‰åˆ—è…ºç´ çš„ä½œç”¨æœºåˆ¶' : 'Prostaglandin Action Mechanism'}\n            </h3>\n            <div className=\"space-y-4 text-neutral-700\">\n              <div className=\"flex items-start\">\n                <span className=\"bg-primary-100 text-primary-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5 flex-shrink-0\">1</span>\n                <p>\n                  {locale === 'zh' \n                    ? 'æœˆç»æœŸé—´ï¼Œå­å®«å†…è†œç»†èƒé‡Šæ”¾å¤§é‡å‰åˆ—è…ºç´ F2Î±ï¼ˆPGF2Î±ï¼‰å’Œå‰åˆ—è…ºç´ E2ï¼ˆPGE2ï¼‰ã€‚'\n                    : 'During menstruation, endometrial cells release large amounts of prostaglandin F2Î± (PGF2Î±) and prostaglandin E2 (PGE2).'\n                  }\n                </p>\n              </div>\n              <div className=\"flex items-start\">\n                <span className=\"bg-primary-100 text-primary-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5 flex-shrink-0\">2</span>\n                <p>\n                  {locale === 'zh' \n                    ? 'PGF2Î±å¯¼è‡´å­å®«è‚Œè‚‰å¼ºçƒˆæ”¶ç¼©ï¼Œå‹è¿«è¡€ç®¡ï¼Œé€ æˆå­å®«ç¼ºè¡€ç¼ºæ°§ã€‚'\n                    : 'PGF2Î± causes strong uterine muscle contractions, compressing blood vessels and causing uterine ischemia and hypoxia.'\n                  }\n                </p>\n              </div>\n              <div className=\"flex items-start\">\n                <span className=\"bg-primary-100 text-primary-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5 flex-shrink-0\">3</span>\n                <p>\n                  {locale === 'zh' \n                    ? 'ç¼ºè¡€ç¼ºæ°§æ¿€æ´»ç–¼ç—›æ„Ÿå—å™¨ï¼Œäº§ç”Ÿç—‰æŒ›æ€§ç–¼ç—›ã€‚'\n                    : 'Ischemia and hypoxia activate pain receptors, producing spasmodic pain.'\n                  }\n                </p>\n              </div>\n              <div className=\"flex items-start\">\n                <span className=\"bg-primary-100 text-primary-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5 flex-shrink-0\">4</span>\n                <p>\n                  {locale === 'zh' \n                    ? 'å‰åˆ—è…ºç´ è¿˜ä¼šå¢åŠ ç–¼ç—›æ„Ÿå—å™¨çš„æ•æ„Ÿæ€§ï¼Œæ”¾å¤§ç–¼ç—›ä¿¡å·ã€‚'\n                    : 'Prostaglandins also increase the sensitivity of pain receptors, amplifying pain signals.'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-400\">\n            <h4 className=\"font-semibold text-yellow-900 mb-2\">\n              {locale === 'zh' ? 'ä¸ºä»€ä¹ˆæœ‰äº›å¥³æ€§ç—›ç»æ›´ä¸¥é‡ï¼Ÿ' : 'Why do some women experience more severe dysmenorrhea?'}\n            </h4>\n            <p className=\"text-yellow-800 text-sm\">\n              {locale === 'zh' \n                ? 'ç ”ç©¶è¡¨æ˜ï¼Œç—›ç»ä¸¥é‡çš„å¥³æ€§æœˆç»è¡€ä¸­å‰åˆ—è…ºç´ æµ“åº¦æ¯”æ— ç—›ç»å¥³æ€§é«˜2-7å€ã€‚æ­¤å¤–ï¼Œä¸ªä½“å¯¹å‰åˆ—è…ºç´ çš„æ•æ„Ÿæ€§ã€å­å®«æ”¶ç¼©åŠ›ã€ç–¼ç—›é˜ˆå€¼ç­‰å› ç´ éƒ½ä¼šå½±å“ç—›ç»çš„ä¸¥é‡ç¨‹åº¦ã€‚'\n                : 'Studies show that women with severe dysmenorrhea have 2-7 times higher prostaglandin concentrations in menstrual blood than women without dysmenorrhea. Additionally, individual sensitivity to prostaglandins, uterine contractility, and pain threshold all affect the severity of dysmenorrhea.'\n              }\n            </p>\n          </div>\n        </section>\n\n        {/* Secondary Dysmenorrhea Causes */}\n        <section className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-neutral-900 mb-6\">\n            {locale === 'zh' ? 'ç»§å‘æ€§ç—›ç»çš„å¸¸è§ç—…å› ' : 'Common Causes of Secondary Dysmenorrhea'}\n          </h2>\n\n          <div className=\"grid md:grid-cols-2 gap-4 mb-6\">\n            {[\n              {\n                condition: locale === 'zh' ? 'å­å®«å†…è†œå¼‚ä½ç—‡' : 'Endometriosis',\n                description: locale === 'zh' ? 'å­å®«å†…è†œç»„ç»‡åœ¨å­å®«å¤–ç”Ÿé•¿' : 'Endometrial tissue grows outside the uterus',\n                prevalence: '10-15%'\n              },\n              {\n                condition: locale === 'zh' ? 'å­å®«è‚Œç˜¤' : 'Uterine Fibroids',\n                description: locale === 'zh' ? 'å­å®«è‚Œè‚‰å±‚çš„è‰¯æ€§è‚¿ç˜¤' : 'Benign tumors in the uterine muscle layer',\n                prevalence: '20-40%'\n              },\n              {\n                condition: locale === 'zh' ? 'å­å®«è…ºè‚Œç—‡' : 'Adenomyosis',\n                description: locale === 'zh' ? 'å­å®«å†…è†œä¾µå…¥å­å®«è‚Œå±‚' : 'Endometrium invades the uterine muscle layer',\n                prevalence: '5-70%'\n              },\n              {\n                condition: locale === 'zh' ? 'ç›†è…”ç‚æ€§ç–¾ç—…' : 'Pelvic Inflammatory Disease',\n                description: locale === 'zh' ? 'ç›†è…”å™¨å®˜çš„æ„ŸæŸ“æ€§ç–¾ç—…' : 'Infectious disease of pelvic organs',\n                prevalence: '10-15%'\n              }\n            ].map((item, index) => (\n              <div key={index} className=\"bg-white p-4 rounded-lg border border-gray-200\">\n                <h4 className=\"font-semibold text-neutral-800 mb-2\">{item.condition}</h4>\n                <p className=\"text-sm text-neutral-600 mb-2\">{item.description}</p>\n                <span className=\"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded\">\n                  {locale === 'zh' ? 'æ‚£ç—…ç‡' : 'Prevalence'}: {item.prevalence}\n                </span>\n              </div>\n            ))}\n          </div>\n        </section>\n\n        {/* Clinical Implications */}\n        <section className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-neutral-900 mb-6\">\n            {locale === 'zh' ? 'ä¸´åºŠæ„ä¹‰ä¸æ²»ç–—æŒ‡å¯¼' : 'Clinical Significance and Treatment Guidance'}\n          </h2>\n\n          <div className=\"bg-blue-50 p-6 rounded-lg mb-6\">\n            <h3 className=\"text-lg font-semibold text-blue-900 mb-4\">\n              {locale === 'zh' ? 'åŸºäºæœºåˆ¶çš„æ²»ç–—ç­–ç•¥' : 'Mechanism-based Treatment Strategies'}\n            </h3>\n            <div className=\"space-y-3 text-blue-800\">\n              <div className=\"flex items-start\">\n                <CheckCircle className=\"w-4 h-4 text-blue-600 mr-2 mt-1 flex-shrink-0\" />\n                <p className=\"text-sm\">\n                  <strong>{locale === 'zh' ? 'æŠ‘åˆ¶å‰åˆ—è…ºç´ åˆæˆï¼š' : 'Inhibit prostaglandin synthesis: '}</strong>\n                  {locale === 'zh' ? 'éç”¾ä½“æŠ—ç‚è¯ï¼ˆNSAIDsï¼‰å¦‚å¸ƒæ´›èŠ¬ã€è˜æ™®ç”Ÿç­‰' : 'NSAIDs such as ibuprofen, naproxen, etc.'}\n                </p>\n              </div>\n              <div className=\"flex items-start\">\n                <CheckCircle className=\"w-4 h-4 text-blue-600 mr-2 mt-1 flex-shrink-0\" />\n                <p className=\"text-sm\">\n                  <strong>{locale === 'zh' ? 'å‡å°‘å­å®«æ”¶ç¼©ï¼š' : 'Reduce uterine contractions: '}</strong>\n                  {locale === 'zh' ? 'çƒ­æ•·ã€æŒ‰æ‘©ã€é’™ç¦»å­é€šé“é˜»æ»å‰‚ç­‰' : 'Heat therapy, massage, calcium channel blockers, etc.'}\n                </p>\n              </div>\n              <div className=\"flex items-start\">\n                <CheckCircle className=\"w-4 h-4 text-blue-600 mr-2 mt-1 flex-shrink-0\" />\n                <p className=\"text-sm\">\n                  <strong>{locale === 'zh' ? 'è°ƒèŠ‚æ¿€ç´ æ°´å¹³ï¼š' : 'Regulate hormone levels: '}</strong>\n                  {locale === 'zh' ? 'å£æœé¿å­•è¯ã€å­•æ¿€ç´ ç­‰' : 'Oral contraceptives, progestins, etc.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/* When to Seek Medical Help */}\n        <section className=\"mb-8\">\n          <div className=\"bg-red-50 p-6 rounded-lg border-l-4 border-red-400\">\n            <div className=\"flex items-start\">\n              <AlertCircle className=\"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-lg font-semibold text-red-900 mb-3\">\n                  {locale === 'zh' ? 'ä½•æ—¶éœ€è¦å°±åŒ»ï¼Ÿ' : 'When to Seek Medical Care?'}\n                </h3>\n                <ul className=\"text-red-800 space-y-2 text-sm\">\n                  <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›ä¸¥é‡å½±å“æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œ' : 'Pain severely affects daily life and work'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›ç¨‹åº¦é€æ¸åŠ é‡' : 'Pain intensity gradually worsens'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ä¼´éšå¼‚å¸¸å‡ºè¡€ã€å‘çƒ­ç­‰ç—‡çŠ¶' : 'Accompanied by abnormal bleeding, fever, or other symptoms'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å¸¸è§„æ­¢ç—›è¯ç‰©æ— æ•ˆ' : 'Regular pain medications are ineffective'}</li>\n                  <li>â€¢ {locale === 'zh' ? '25å²åé¦–æ¬¡å‡ºç°ä¸¥é‡ç—›ç»' : 'First occurrence of severe dysmenorrhea after age 25'}</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/* Conclusion */}\n        <section className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-neutral-900 mb-4\">\n            {locale === 'zh' ? 'æ€»ç»“' : 'Conclusion'}\n          </h2>\n          <p className=\"text-neutral-700 leading-relaxed\">\n            {locale === 'zh' \n              ? 'ç†è§£ç—›ç»çš„ç”Ÿç†æœºåˆ¶æ˜¯ç§‘å­¦ç®¡ç†ç–¼ç—›çš„ç¬¬ä¸€æ­¥ã€‚é€šè¿‡åŒºåˆ†åŸå‘æ€§å’Œç»§å‘æ€§ç—›ç»ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ›´æœ‰é’ˆå¯¹æ€§çš„æ²»ç–—æ–¹æ³•ã€‚å¯¹äºåŸå‘æ€§ç—›ç»ï¼Œé‡ç‚¹åœ¨äºæŠ‘åˆ¶å‰åˆ—è…ºç´ çš„äº§ç”Ÿå’Œä½œç”¨ï¼›å¯¹äºç»§å‘æ€§ç—›ç»ï¼Œåˆ™éœ€è¦æ²»ç–—æ½œåœ¨çš„ç–¾ç—…ã€‚è®°ä½ï¼Œä¸¥é‡çš„ç—›ç»ä¸æ˜¯æ­£å¸¸ç°è±¡ï¼ŒåŠæ—¶å°±åŒ»å¯ä»¥è·å¾—æ›´å¥½çš„æ²»ç–—æ•ˆæœã€‚'\n              : 'Understanding the physiological mechanisms of dysmenorrhea is the first step in scientific pain management. By distinguishing between primary and secondary dysmenorrhea, we can choose more targeted treatment methods. For primary dysmenorrhea, the focus is on inhibiting prostaglandin production and action; for secondary dysmenorrhea, underlying diseases need to be treated. Remember, severe dysmenorrhea is not normal, and timely medical consultation can achieve better treatment outcomes.'\n            }\n          </p>\n        </section>\n      </article>\n\n      {/* Related Articles */}\n      <section className=\"bg-neutral-50 p-6 rounded-xl\">\n        <h3 className=\"text-xl font-semibold text-neutral-800 mb-4\">\n          {locale === 'zh' ? 'ç›¸å…³æ–‡ç« æ¨è' : 'Related Articles'}\n        </h3>\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <Link\n            href={`/${locale}/immediate-relief`}\n            className=\"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow\"\n          >\n            <h4 className=\"font-medium text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'å³æ—¶ç¼“è§£æ–¹æ¡ˆ' : 'Immediate Relief Solutions'}\n            </h4>\n            <p className=\"text-sm text-neutral-600\">\n              {locale === 'zh' ? 'åŸºäºå‰åˆ—è…ºç´ æœºåˆ¶çš„å¿«é€Ÿç¼“è§£æ–¹æ³•' : 'Quick relief methods based on prostaglandin mechanisms'}\n            </p>\n          </Link>\n          \n          <Link\n            href={`/${locale}/natural-therapies`}\n            className=\"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow\"\n          >\n            <h4 className=\"font-medium text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•æŒ‡å—' : 'Natural Therapy Guide'}\n            </h4>\n            <p className=\"text-sm text-neutral-600\">\n              {locale === 'zh' ? 'å¤©ç„¶æ–¹æ³•è°ƒèŠ‚å‰åˆ—è…ºç´ æ°´å¹³' : 'Natural methods to regulate prostaglandin levels'}\n            </p>\n          </Link>\n        </div>\n      </section>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between items-center pt-8 border-t border-gray-200\">\n        <Link \n          href={`/${locale}/articles`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›ç—›ç»ç®¡ç†ä¸“é¢˜' : 'Back to Dysmenorrhea Management Topics'}\n        </Link>\n        \n        <div className=\"text-sm text-neutral-500\">\n          {locale === 'zh' ? '1 / 6 ç¯‡æ–‡ç« ' : '1 of 6 articles'}\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/assessment/assessment-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1123,1126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1123,1126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'painTiming' is assigned a value but never used.","line":323,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'painDuration' is assigned a value but never used.","line":323,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'painCharacteristics' is assigned a value but never used.","line":323,"column":67,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ageGroup' is assigned a value but never used.","line":323,"column":88,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":96},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cycleRegularity' is assigned a value but never used.","line":323,"column":98,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":113}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { useLocale } from 'next-intl';\n\ninterface AssessmentData {\n  painIntensity: number;\n  dailyImpact: string;\n  painTiming: string;\n  painDuration: string;\n  painCharacteristics: string[];\n  painLocation: string[];\n  ageGroup: string;\n  cycleRegularity: string;\n}\n\nexport default function AssessmentClient() {\n  const locale = useLocale();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [assessmentData, setAssessmentData] = useState<AssessmentData>({\n    painIntensity: 5,\n    dailyImpact: '',\n    painTiming: '',\n    painDuration: '',\n    painCharacteristics: [],\n    painLocation: [],\n    ageGroup: '',\n    cycleRegularity: ''\n  });\n  const [showResults, setShowResults] = useState(false);\n\n  const totalSteps = 6;\n\n  const handleNext = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep(currentStep + 1);\n    } else {\n      setShowResults(true);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const updateAssessmentData = (field: keyof AssessmentData, value: any) => {\n    setAssessmentData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const resetAssessment = () => {\n    setCurrentStep(1);\n    setAssessmentData({\n      painIntensity: 5,\n      dailyImpact: '',\n      painTiming: '',\n      painDuration: '',\n      painCharacteristics: [],\n      painLocation: [],\n      ageGroup: '',\n      cycleRegularity: ''\n    });\n    setShowResults(false);\n  };\n\n  const getStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n              {locale === 'zh' ? 'ç–¼ç—›å¼ºåº¦è¯„ä¼°' : 'Pain Intensity Assessment'}\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              {locale === 'zh' \n                ? 'è¯·æ ¹æ®æ‚¨æœ€è¿‘ä¸€æ¬¡ç»æœŸçš„ç–¼ç—›ç¨‹åº¦ï¼Œé€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹ï¼š'\n                : 'Please select the option that best describes your pain level during your last period:'\n              }\n            </p>\n            <div className=\"space-y-4\">\n              {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(level => (\n                <label key={level} className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"painIntensity\"\n                    value={level}\n                    checked={assessmentData.painIntensity === level}\n                    onChange={(e) => updateAssessmentData('painIntensity', parseInt(e.target.value))}\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-lg\">\n                    {level} - {locale === 'zh' \n                      ? level <= 3 ? 'è½»å¾®ç–¼ç—›' : level <= 6 ? 'ä¸­åº¦ç–¼ç—›' : level <= 8 ? 'ä¸¥é‡ç–¼ç—›' : 'æåº¦ç–¼ç—›'\n                      : level <= 3 ? 'Mild' : level <= 6 ? 'Moderate' : level <= 8 ? 'Severe' : 'Extreme'\n                    }\n                  </span>\n                </label>\n              ))}\n            </div>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n              {locale === 'zh' ? 'æ—¥å¸¸å½±å“è¯„ä¼°' : 'Daily Impact Assessment'}\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              {locale === 'zh' \n                ? 'ç»æœŸç–¼ç—›å¯¹æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»æœ‰å¤šå¤§å½±å“ï¼Ÿ'\n                : 'How much does menstrual pain affect your daily life?'\n              }\n            </p>\n            <div className=\"space-y-4\">\n              {[\n                { value: 'none', label: locale === 'zh' ? 'æ²¡æœ‰å½±å“' : 'No impact' },\n                { value: 'mild', label: locale === 'zh' ? 'è½»å¾®å½±å“' : 'Mild impact' },\n                { value: 'moderate', label: locale === 'zh' ? 'ä¸­åº¦å½±å“' : 'Moderate impact' },\n                { value: 'severe', label: locale === 'zh' ? 'ä¸¥é‡å½±å“' : 'Severe impact' },\n                { value: 'extreme', label: locale === 'zh' ? 'æåº¦å½±å“' : 'Extreme impact' }\n              ].map(option => (\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"dailyImpact\"\n                    value={option.value}\n                    checked={assessmentData.dailyImpact === option.value}\n                    onChange={(e) => updateAssessmentData('dailyImpact', e.target.value)}\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-lg\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        );\n\n      case 3:\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n              {locale === 'zh' ? 'ç–¼ç—›æ—¶é—´æ¨¡å¼' : 'Pain Timing Pattern'}\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              {locale === 'zh' \n                ? 'ç–¼ç—›é€šå¸¸åœ¨ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Ÿ'\n                : 'When does the pain typically start?'\n              }\n            </p>\n            <div className=\"space-y-4\">\n              {[\n                { value: 'before', label: locale === 'zh' ? 'ç»æœŸå‰1-2å¤©' : '1-2 days before period' },\n                { value: 'start', label: locale === 'zh' ? 'ç»æœŸå¼€å§‹æ—¶' : 'At the start of period' },\n                { value: 'during', label: locale === 'zh' ? 'ç»æœŸæœŸé—´' : 'During period' },\n                { value: 'after', label: locale === 'zh' ? 'ç»æœŸç»“æŸå' : 'After period ends' },\n                { value: 'irregular', label: locale === 'zh' ? 'ä¸è§„å¾‹' : 'Irregular pattern' }\n              ].map(option => (\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"painTiming\"\n                    value={option.value}\n                    checked={assessmentData.painTiming === option.value}\n                    onChange={(e) => updateAssessmentData('painTiming', e.target.value)}\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-lg\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        );\n\n      case 4:\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n              {locale === 'zh' ? 'ç–¼ç—›æŒç»­æ—¶é—´' : 'Pain Duration'}\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              {locale === 'zh' \n                ? 'ç–¼ç—›é€šå¸¸æŒç»­å¤šé•¿æ—¶é—´ï¼Ÿ'\n                : 'How long does the pain typically last?'\n              }\n            </p>\n            <div className=\"space-y-4\">\n              {[\n                { value: 'few-hours', label: locale === 'zh' ? 'å‡ å°æ—¶' : 'A few hours' },\n                { value: '1-day', label: locale === 'zh' ? '1å¤©' : '1 day' },\n                { value: '2-3-days', label: locale === 'zh' ? '2-3å¤©' : '2-3 days' },\n                { value: '4-5-days', label: locale === 'zh' ? '4-5å¤©' : '4-5 days' },\n                { value: 'longer', label: locale === 'zh' ? 'æ›´é•¿' : 'Longer' }\n              ].map(option => (\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"painDuration\"\n                    value={option.value}\n                    checked={assessmentData.painDuration === option.value}\n                    onChange={(e) => updateAssessmentData('painDuration', e.target.value)}\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-lg\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        );\n\n      case 5:\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n              {locale === 'zh' ? 'ç–¼ç—›ç‰¹å¾' : 'Pain Characteristics'}\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              {locale === 'zh' \n                ? 'è¯·é€‰æ‹©æ‰€æœ‰ç¬¦åˆæ‚¨ç–¼ç—›ç‰¹å¾çš„é€‰é¡¹ï¼š'\n                : 'Please select all options that describe your pain:'\n              }\n            </p>\n            <div className=\"space-y-4\">\n              {[\n                { value: 'cramping', label: locale === 'zh' ? 'ç—‰æŒ›æ€§ç–¼ç—›' : 'Cramping' },\n                { value: 'sharp', label: locale === 'zh' ? 'å°–é”ç–¼ç—›' : 'Sharp pain' },\n                { value: 'dull', label: locale === 'zh' ? 'é’ç—›' : 'Dull ache' },\n                { value: 'throbbing', label: locale === 'zh' ? 'æåŠ¨æ€§ç–¼ç—›' : 'Throbbing' },\n                { value: 'burning', label: locale === 'zh' ? 'çƒ§ç¼æ„Ÿ' : 'Burning sensation' },\n                { value: 'pressure', label: locale === 'zh' ? 'å‹è¿«æ„Ÿ' : 'Pressure' }\n              ].map(option => (\n                <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={assessmentData.painCharacteristics.includes(option.value)}\n                    onChange={(e) => {\n                      const newCharacteristics = e.target.checked\n                        ? [...assessmentData.painCharacteristics, option.value]\n                        : assessmentData.painCharacteristics.filter(c => c !== option.value);\n                      updateAssessmentData('painCharacteristics', newCharacteristics);\n                    }}\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-lg\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        );\n\n      case 6:\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n              {locale === 'zh' ? 'ä¸ªäººä¿¡æ¯' : 'Personal Information'}\n            </h2>\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-lg font-medium text-gray-700 mb-3\">\n                  {locale === 'zh' ? 'å¹´é¾„ç»„' : 'Age Group'}\n                </label>\n                <div className=\"space-y-3\">\n                  {[\n                    { value: 'teen', label: locale === 'zh' ? 'é’å°‘å¹´ (13-19å²)' : 'Teen (13-19)' },\n                    { value: 'young-adult', label: locale === 'zh' ? 'é’å¹´ (20-29å²)' : 'Young Adult (20-29)' },\n                    { value: 'adult', label: locale === 'zh' ? 'æˆå¹´ (30-39å²)' : 'Adult (30-39)' },\n                    { value: 'mature', label: locale === 'zh' ? 'æˆç†ŸæœŸ (40+å²)' : 'Mature (40+)' }\n                  ].map(option => (\n                    <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"ageGroup\"\n                        value={option.value}\n                        checked={assessmentData.ageGroup === option.value}\n                        onChange={(e) => updateAssessmentData('ageGroup', e.target.value)}\n                        className=\"w-4 h-4 text-blue-600\"\n                      />\n                      <span className=\"text-lg\">{option.label}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-lg font-medium text-gray-700 mb-3\">\n                  {locale === 'zh' ? 'æœˆç»å‘¨æœŸè§„å¾‹æ€§' : 'Menstrual Cycle Regularity'}\n                </label>\n                <div className=\"space-y-3\">\n                  {[\n                    { value: 'regular', label: locale === 'zh' ? 'éå¸¸è§„å¾‹' : 'Very regular' },\n                    { value: 'mostly-regular', label: locale === 'zh' ? 'åŸºæœ¬è§„å¾‹' : 'Mostly regular' },\n                    { value: 'irregular', label: locale === 'zh' ? 'ä¸è§„å¾‹' : 'Irregular' },\n                    { value: 'very-irregular', label: locale === 'zh' ? 'éå¸¸ä¸è§„å¾‹' : 'Very irregular' }\n                  ].map(option => (\n                    <label key={option.value} className=\"flex items-center space-x-3 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"cycleRegularity\"\n                        value={option.value}\n                        checked={assessmentData.cycleRegularity === option.value}\n                        onChange={(e) => updateAssessmentData('cycleRegularity', e.target.value)}\n                        className=\"w-4 h-4 text-blue-600\"\n                      />\n                      <span className=\"text-lg\">{option.label}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  const getResults = () => {\n    const { painIntensity, dailyImpact, painTiming, painDuration, painCharacteristics, ageGroup, cycleRegularity } = assessmentData;\n    \n    let riskLevel = 'low';\n    let recommendations: string[] = [];\n    \n    if (painIntensity >= 8 || dailyImpact === 'extreme') {\n      riskLevel = 'high';\n      recommendations = locale === 'zh' \n        ? ['å»ºè®®ç«‹å³å’¨è¯¢å¦‡ç§‘åŒ»ç”Ÿ', 'è€ƒè™‘è¿›è¡Œè¯¦ç»†æ£€æŸ¥', 'è®°å½•è¯¦ç»†ç—‡çŠ¶æ—¥è®°']\n        : ['Consider immediate consultation with a gynecologist', 'Consider detailed medical examination', 'Keep detailed symptom diary'];\n    } else if (painIntensity >= 6 || dailyImpact === 'severe') {\n      riskLevel = 'moderate';\n      recommendations = locale === 'zh'\n        ? ['å»ºè®®å’¨è¯¢åŒ»ç”Ÿ', 'å°è¯•çƒ­æ•·å’Œè½»åº¦è¿åŠ¨', 'è€ƒè™‘éå¤„æ–¹æ­¢ç—›è¯']\n        : ['Consider consulting a doctor', 'Try heat therapy and light exercise', 'Consider over-the-counter pain relief'];\n    } else {\n      riskLevel = 'low';\n      recommendations = locale === 'zh'\n        ? ['ä¿æŒè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯', 'å°è¯•æ”¾æ¾æŠ€å·§', 'è®°å½•ç—‡çŠ¶å˜åŒ–']\n        : ['Maintain good lifestyle habits', 'Try relaxation techniques', 'Monitor symptom changes'];\n    }\n\n    return { riskLevel, recommendations };\n  };\n\n  if (showResults) {\n    const { riskLevel, recommendations } = getResults();\n    \n    return (\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\n          <h2 className=\"text-3xl font-bold text-center text-gray-800 mb-8\">\n            {locale === 'zh' ? 'è¯„ä¼°ç»“æœ' : 'Assessment Results'}\n          </h2>\n          \n          <div className=\"text-center mb-8\">\n            <div className={`inline-flex items-center px-6 py-3 rounded-full text-lg font-semibold ${\n              riskLevel === 'high' ? 'bg-red-100 text-red-800' :\n              riskLevel === 'moderate' ? 'bg-yellow-100 text-yellow-800' :\n              'bg-green-100 text-green-800'\n            }`}>\n              {riskLevel === 'high' ? (locale === 'zh' ? 'é«˜é£é™©' : 'High Risk') :\n               riskLevel === 'moderate' ? (locale === 'zh' ? 'ä¸­ç­‰é£é™©' : 'Moderate Risk') :\n               (locale === 'zh' ? 'ä½é£é™©' : 'Low Risk')}\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                {locale === 'zh' ? 'å»ºè®®æªæ–½' : 'Recommendations'}\n              </h3>\n              <ul className=\"space-y-2\">\n                {recommendations.map((rec, index) => (\n                  <li key={index} className=\"flex items-start space-x-3\">\n                    <span className=\"text-blue-600 mt-1\">â€¢</span>\n                    <span className=\"text-gray-700\">{rec}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div className=\"bg-gray-50 p-6 rounded-lg\">\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">\n                {locale === 'zh' ? 'é‡è¦æé†’' : 'Important Note'}\n              </h3>\n              <p className=\"text-gray-600\">\n                {locale === 'zh' \n                  ? 'æ­¤è¯„ä¼°ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€‚å¦‚æœ‰ä¸¥é‡ç—‡çŠ¶ï¼Œè¯·åŠæ—¶å°±åŒ»ã€‚'\n                  : 'This assessment is for reference only and does not replace professional medical advice. Please consult a healthcare provider for serious symptoms.'\n                }\n              </p>\n            </div>\n          </div>\n\n          <div className=\"mt-8 flex justify-center space-x-4\">\n            <button\n              onClick={resetAssessment}\n              className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              {locale === 'zh' ? 'é‡æ–°è¯„ä¼°' : 'Retake Assessment'}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-8\">\n      <div className=\"bg-white rounded-lg shadow-lg p-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-center text-gray-800 mb-4\">\n            {locale === 'zh' ? 'ç»æœŸå¥åº·è¯„ä¼°' : 'Menstrual Health Assessment'}\n          </h1>\n          <p className=\"text-center text-gray-600 mb-6\">\n            {locale === 'zh' \n              ? 'é€šè¿‡ç§‘å­¦è¯„ä¼°äº†è§£æ‚¨çš„ç»æœŸå¥åº·çŠ¶å†µï¼Œè·å–ä¸ªæ€§åŒ–å»ºè®®'\n              : 'Understand your menstrual health through scientific assessment and get personalized recommendations'\n            }\n          </p>\n          \n          <div className=\"w-full bg-gray-200 rounded-full h-2 mb-6\">\n            <div \n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${(currentStep / totalSteps) * 100}%` }}\n            ></div>\n          </div>\n          \n          <p className=\"text-center text-sm text-gray-500\">\n            {locale === 'zh' \n              ? `æ­¥éª¤ ${currentStep} / ${totalSteps}`\n              : `Step ${currentStep} / ${totalSteps}`\n            }\n          </p>\n        </div>\n\n        <div className=\"min-h-[400px]\">\n          {getStepContent()}\n        </div>\n\n        <div className=\"flex justify-between mt-8\">\n          <button\n            onClick={handlePrevious}\n            disabled={currentStep === 1}\n            className={`px-6 py-3 rounded-lg transition-colors ${\n              currentStep === 1\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                : 'bg-gray-600 text-white hover:bg-gray-700'\n            }`}\n          >\n            {locale === 'zh' ? 'ä¸Šä¸€æ­¥' : 'Previous'}\n          </button>\n          \n          <button\n            onClick={handleNext}\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            {currentStep === totalSteps \n              ? (locale === 'zh' ? 'æŸ¥çœ‹ç»“æœ' : 'View Results')\n              : (locale === 'zh' ? 'ä¸‹ä¸€æ­¥' : 'Next')\n            }\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/assessment/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/cultural-charms/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/data-dashboard/data-dashboard-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/data-dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/download-center/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/downloads-new/page-optimized.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/downloads-new/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is assigned a value but never used.","line":15,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { ArrowLeft, Download } from 'lucide-react';\nimport { Locale, locales } from '@/i18n';\nimport OptimizedMobilePDFCenter from '@/components/OptimizedMobilePDFCenter';\nimport StructuredData from '@/components/StructuredData';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  return {\n    title: `æ–‡ç« PDFä¸‹è½½ä¸­å¿ƒ - Period Hub ç»æœŸå¥åº·ä¸“ä¸šèµ„æº`,\n    description: `Period Hubæ–‡ç« PDFä¸‹è½½ä¸­å¿ƒï¼Œ38ä¸ªç²¾é€‰ç»æœŸå¥åº·èµ„æºï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»ï¼Œæ”¯æŒä¸­è‹±åŒè¯­ä¸‹è½½`,\n    keywords: 'ç»æœŸå¥åº·,PDFä¸‹è½½,ç—›ç»ç¼“è§£,æ–‡ç« èµ„æº,Period Hub',\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function DownloadsNewPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n\n  const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://www.periodhub.health';\n  const pageUrl = `${baseUrl}/${locale}/downloads-new`;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100\">\n      {/* SEOç»“æ„åŒ–æ•°æ® */}\n      <StructuredData\n        type=\"healthTopicPage\"\n        title={locale === 'zh' ? 'æ–‡ç« PDFä¸‹è½½ä¸­å¿ƒ - Period Hub ç»æœŸå¥åº·ä¸“ä¸šèµ„æº' : 'Article PDF Download Center - Period Hub Menstrual Health Resources'}\n        description={locale === 'zh' \n          ? 'Period Hubæ–‡ç« PDFä¸‹è½½ä¸­å¿ƒï¼Œ38ä¸ªç²¾é€‰ç»æœŸå¥åº·èµ„æºï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»ï¼Œæ”¯æŒä¸­è‹±åŒè¯­ä¸‹è½½'\n          : 'Period Hub article PDF download center, 38 curated menstrual health resources, intelligently categorized by urgency, bilingual support'}\n        url={pageUrl}\n      />\n      {/* æ–°ç‰ˆæœ¬æ ‡è¯†æ¨ªå¹… */}\n      <div className=\"bg-gradient-to-r from-green-400 to-blue-500 text-white p-3 text-center text-sm font-medium\">\n        ğŸ‰ å…¨æ–°PDFä¸‹è½½ä¸­å¿ƒ - 38ä¸ªç²¾é€‰èµ„æºï¼Œç§»åŠ¨ç«¯ä¼˜åŒ–ä½“éªŒï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»\n      </div>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* è¿”å›å¯¼èˆª */}\n        <div className=\"mb-8\">\n          <Link \n            href={`/${locale}/articles`}\n            className=\"inline-flex items-center gap-2 text-purple-600 hover:text-purple-700 font-medium transition-colors group\"\n          >\n            <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n            <span>è¿”å›æ–‡ç« </span>\n          </Link>\n        </div>\n\n        {/* é¡µé¢æ ‡é¢˜åŒºåŸŸ */}\n        <header className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl mb-6 shadow-lg\">\n            <Download className=\"w-8 h-8 text-white\" />\n          </div>\n          \n          <h1 className=\"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4\">\n            ğŸ“š æ–‡ç« PDFä¸‹è½½ä¸­å¿ƒ\n          </h1>\n          \n          <p className=\"text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed mb-6\">\n            38ä¸ªç²¾é€‰èµ„æºï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»ã€‚ä»ç«‹å³ç¼“è§£åˆ°é•¿æœŸç®¡ç†ï¼Œä¸ºæ‚¨çš„ç»æœŸå¥åº·æä¾›å…¨æ–¹ä½æ”¯æŒã€‚\n          </p>\n          \n          {/* å¿«é€Ÿç»Ÿè®¡ */}\n          <div className=\"grid grid-cols-3 gap-4 max-w-md mx-auto mb-8\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">42</div>\n              <div className=\"text-sm text-gray-500\">ä¸“ä¸šæ–‡ç« </div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-pink-600\">24</div>\n              <div className=\"text-sm text-gray-500\">å®ç”¨PDF</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-indigo-600\">2</div>\n              <div className=\"text-sm text-gray-500\">è¯­è¨€ç‰ˆæœ¬</div>\n            </div>\n          </div>\n        </header>\n\n        {/* ä¼˜åŒ–ç‰ˆç§»åŠ¨ç«¯PDFä¸­å¿ƒç»„ä»¶ */}\n        <OptimizedMobilePDFCenter locale={locale} />\n\n        {/* ç”¨æˆ·åé¦ˆç»„ä»¶ */}\n        <div className=\"fixed bottom-4 right-4 z-50 max-w-xs\">\n          <div className=\"bg-blue-600 text-white p-4 rounded-xl shadow-lg border border-blue-500\">\n            <div className=\"text-sm font-bold mb-2\">ğŸ’¡ ä½“éªŒæ–°ç‰ˆä¸‹è½½ä¸­å¿ƒ</div>\n            <div className=\"text-xs mb-3 opacity-90\">\n              ç§»åŠ¨ç«¯ä¼˜åŒ– â€¢ æ™ºèƒ½æœç´¢ â€¢ ç´§æ€¥æ¨¡å¼ â€¢ 38ä¸ªç²¾é€‰èµ„æº\n            </div>\n            <button className=\"bg-white text-blue-600 px-3 py-2 rounded-lg text-xs w-full font-medium hover:bg-gray-50 transition-colors\">\n              åé¦ˆä½“éªŒæ•ˆæœ\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/downloads/medication-guide/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/downloads/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport { Download } from 'lucide-react';\nimport { Locale, locales } from '@/i18n';\nimport OptimizedMobilePDFCenter from '@/components/OptimizedMobilePDFCenter';\nimport { SITE_CONFIG } from '@/config/site.config';\nimport { pdfResources } from '@/config/pdfResources';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n\n  return {\n    title: locale === 'zh' \n      ? 'PDFèµ„æºä¸‹è½½ä¸­å¿ƒ - Period Hub' \n      : 'PDF Resources Download Center - Period Hub',\n    description: locale === 'zh'\n      ? `Period Hubæ–‡ç« PDFä¸‹è½½ä¸­å¿ƒï¼Œ${SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources}ä¸ªç²¾é€‰ç»æœŸå¥åº·èµ„æºï¼ŒåŒ…æ‹¬${SITE_CONFIG.statistics.articles}ç¯‡ä¸“ä¸šæ–‡ç« å’Œ${SITE_CONFIG.statistics.pdfResources}ä¸ªPDFèµ„æºï¼Œæ”¯æŒä¸­è‹±åŒè¯­ï¼Œç§»åŠ¨ç«¯ä¼˜åŒ–ä½“éªŒã€‚`\n      : `Period Hub Articles PDF Download Center, ${SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources} curated menstrual health resources including ${SITE_CONFIG.statistics.articles} expert articles and ${SITE_CONFIG.statistics.pdfResources} PDF resources, bilingual support, mobile-optimized experience.`,\n    keywords: locale === 'zh'\n      ? ['ç»æœŸå¥åº·', 'PDFä¸‹è½½', 'å¥åº·èµ„æº', 'æœˆç»ç®¡ç†', 'å¥³æ€§å¥åº·', 'ä¸­è‹±åŒè¯­', 'ç§»åŠ¨ä¼˜åŒ–']\n      : ['menstrual health', 'PDF download', 'health resources', 'period management', 'women health', 'bilingual', 'mobile optimized'],\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}/downloads`,\n    },\n    openGraph: {\n      title: locale === 'zh' \n        ? 'PDFèµ„æºä¸‹è½½ä¸­å¿ƒ - Period Hub' \n        : 'PDF Resources Download Center - Period Hub',\n      description: locale === 'zh'\n        ? `Period Hubæ–‡ç« PDFä¸‹è½½ä¸­å¿ƒï¼Œ${SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources}ä¸ªç²¾é€‰ç»æœŸå¥åº·èµ„æºï¼ŒåŒ…æ‹¬${SITE_CONFIG.statistics.articles}ç¯‡ä¸“ä¸šæ–‡ç« å’Œ${SITE_CONFIG.statistics.pdfResources}ä¸ªPDFèµ„æºï¼Œæ”¯æŒä¸­è‹±åŒè¯­ï¼Œç§»åŠ¨ç«¯ä¼˜åŒ–ä½“éªŒã€‚`\n        : `Period Hub Articles PDF Download Center, ${SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources} curated menstrual health resources including ${SITE_CONFIG.statistics.articles} expert articles and ${SITE_CONFIG.statistics.pdfResources} PDF resources, bilingual support, mobile-optimized experience.`,\n      images: ['/images/downloads-og.jpg'],\n    },\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function DownloadsPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const totalResources = SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources;\n  const bannerText = locale === 'zh'\n    ? `ğŸ‰ å…¨æ–°PDFä¸‹è½½ä¸­å¿ƒ - ${totalResources}ä¸ªç²¾é€‰èµ„æºï¼Œç§»åŠ¨ç«¯ä¼˜åŒ–ä½“éªŒï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»`\n    : `ğŸ‰ New PDF Download Center - ${totalResources} curated resources, mobile-optimized experience, urgency-based smart categorization`;\n\n  // ç”Ÿæˆç»“æ„åŒ–æ•°æ®\n  const structuredData = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"WebPage\",\n    \"name\": locale === 'zh' ? \"PDFèµ„æºä¸‹è½½ä¸­å¿ƒ\" : \"PDF Resources Download Center\",\n    \"description\": locale === 'zh' \n      ? `Period Hubæ–‡ç« PDFä¸‹è½½ä¸­å¿ƒï¼Œ${totalResources}ä¸ªç²¾é€‰ç»æœŸå¥åº·èµ„æº`\n      : `Period Hub Articles PDF Download Center, ${totalResources} curated menstrual health resources`,\n    \"url\": `https://www.periodhub.health/${locale}/downloads`,\n    \"mainEntity\": {\n      \"@type\": \"ItemList\",\n      \"numberOfItems\": pdfResources.length,\n      \"itemListElement\": pdfResources.map((resource, index) => ({\n        \"@type\": \"ListItem\",\n        \"position\": index + 1,\n        \"item\": {\n          \"@type\": \"DigitalDocument\",\n          \"name\": resource.title,\n          \"description\": resource.description,\n          \"fileSize\": `${resource.fileSize}KB`,\n          \"url\": `https://www.periodhub.health${resource.downloadUrl}`,\n          \"encodingFormat\": \"application/pdf\"\n        }\n      }))\n    },\n    \"breadcrumb\": {\n      \"@type\": \"BreadcrumbList\",\n      \"itemListElement\": [\n        {\n          \"@type\": \"ListItem\",\n          \"position\": 1,\n          \"name\": locale === 'zh' ? \"é¦–é¡µ\" : \"Home\",\n          \"item\": `https://www.periodhub.health/${locale}`\n        },\n        {\n          \"@type\": \"ListItem\",\n          \"position\": 2,\n          \"name\": locale === 'zh' ? \"PDFä¸‹è½½ä¸­å¿ƒ\" : \"PDF Download Center\",\n          \"item\": `https://www.periodhub.health/${locale}/downloads`\n        }\n      ]\n    }\n  };\n\n  return (\n    <>\n      {/* ç»“æ„åŒ–æ•°æ® */}\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }}\n      />\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100\">\n      {/* ğŸ‰ æ–°ç‰ˆæœ¬æ ‡è¯†æ¨ªå¹… */}\n      <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 mb-6 rounded-xl animate-pulse-slow\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n            </svg>\n            <span className=\"text-sm font-bold\">\n              {bannerText}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-8\">\n\n\n        {/* é¡µé¢æ ‡é¢˜åŒºåŸŸ */}\n        <header className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl mb-6 shadow-lg\">\n            <Download className=\"w-8 h-8 text-white\" />\n          </div>\n          \n          <h1 className=\"text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent\">\n            {locale === 'zh' ? 'ğŸ“š æ–‡ç« PDFä¸‹è½½ä¸­å¿ƒ' : 'ğŸ“š Articles PDF Download Center'}\n          </h1>\n\n          <p className=\"text-base md:text-lg text-gray-600 mb-6 leading-relaxed\">\n            {locale === 'zh'\n              ? `${totalResources}ä¸ªç²¾é€‰èµ„æºï¼ŒåŸºäºç´§æ€¥ç¨‹åº¦æ™ºèƒ½åˆ†ç±»ï¼Œè®©æ‚¨åœ¨éœ€è¦æ—¶å¿«é€Ÿæ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ¡ˆ`\n              : `${totalResources} curated resources, intelligently categorized by urgency to help you find the right solution when you need it`\n            }\n          </p>\n          \n          {/* å¿«é€Ÿç»Ÿè®¡ */}\n          <div className=\"grid grid-cols-3 gap-4 max-w-md mx-auto mb-8\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">{SITE_CONFIG.statistics.articles}</div>\n              <div className=\"text-sm text-gray-500\">{locale === 'zh' ? 'ä¸“ä¸šæ–‡ç« ' : 'Expert Articles'}</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-pink-600\">{SITE_CONFIG.statistics.pdfResources}</div>\n              <div className=\"text-sm text-gray-500\">{locale === 'zh' ? 'PDFèµ„æº' : 'PDF Resources'}</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-indigo-600\">2</div>\n              <div className=\"text-sm text-gray-500\">{locale === 'zh' ? 'è¯­è¨€ç‰ˆæœ¬' : 'Languages'}</div>\n            </div>\n          </div>\n        </header>\n\n        {/* ğŸš€ ä¼˜åŒ–ç‰ˆç§»åŠ¨ç«¯PDFä¸­å¿ƒç»„ä»¶ - å®ç°\"æˆ‘ç°åœ¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ\"ç•Œé¢ */}\n        <OptimizedMobilePDFCenter locale={locale} />\n\n        {/* ğŸ’¡ ç”¨æˆ·åé¦ˆç»„ä»¶ */}\n        <div className=\"fixed bottom-4 right-4 z-50 max-w-xs\">\n          <div className=\"bg-blue-600 text-white p-4 rounded-xl shadow-lg border border-blue-500\">\n            <div className=\"text-sm font-bold mb-2\">\n              {locale === 'zh' ? 'ğŸ’¡ ä½“éªŒæ–°ç‰ˆä¸‹è½½ä¸­å¿ƒ' : 'ğŸ’¡ Try New Download Center'}\n            </div>\n            <div className=\"text-xs mb-3 opacity-90\">\n              {locale === 'zh'\n                ? `ç§»åŠ¨ç«¯ä¼˜åŒ– â€¢ æ™ºèƒ½æœç´¢ â€¢ ç´§æ€¥æ¨¡å¼ â€¢ ${totalResources}ä¸ªç²¾é€‰èµ„æº`\n                : `Mobile Optimized â€¢ Smart Search â€¢ Emergency Mode â€¢ ${totalResources} Curated Resources`\n              }\n            </div>\n            <button className=\"bg-white text-blue-600 px-3 py-2 rounded-lg text-xs w-full font-medium hover:bg-gray-50 transition-colors\">\n              {locale === 'zh' ? 'åé¦ˆä½“éªŒæ•ˆæœ' : 'Share Feedback'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/downloads/preview/[id]/PDFPreviewPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'getFileName' and 'resourceId'. Either include them or remove the dependency array.","line":191,"column":6,"nodeType":"ArrayExpression","endLine":191,"endColumn":52,"suggestions":[{"desc":"Update the dependencies array to be: [resource, previewContent, newPdfInfo, locale, resourceId, getFileName]","fix":{"range":[6452,6498],"text":"[resource, previewContent, newPdfInfo, locale, resourceId, getFileName]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { ArrowLeft, Download, Share2, FileText, Printer } from 'lucide-react';\nimport { useTranslations } from 'next-intl';\nimport { Locale } from '@/i18n';\nimport { getPDFResourceById } from '@/config/pdfResources';\nimport { getPreviewContentById } from '@/config/previewContent';\n\ninterface PDFPreviewPageProps {\n  locale: Locale;\n  resourceId: string;\n}\n\n// æ–°å¢PDFèµ„æºçš„åŸºæœ¬ä¿¡æ¯æ˜ å°„ï¼ˆä¸page.tsxä¿æŒä¸€è‡´ï¼‰\nconst NEW_PDF_INFO: Record<string, { title: { zh: string; en: string }; filename: string }> = {\n  'emergency-pain-relief-card': {\n    title: { zh: 'ç´§æ€¥ç–¼ç—›ç¼“è§£å¡ç‰‡', en: 'Emergency Pain Relief Card' },\n    filename: 'emergency-pain-relief-card.pdf'\n  },\n  '5-minute-relief-checklist': {\n    title: { zh: '5åˆ†é’Ÿå¿«é€Ÿç¼“è§£æ£€æŸ¥æ¸…å•', en: '5-Minute Quick Relief Checklist' },\n    filename: '5-minute-relief-checklist.pdf'\n  },\n  'heat-therapy-guide-pdf': {\n    title: { zh: 'çƒ­ç–—å®Œæ•´æŒ‡å—PDFç‰ˆ', en: 'Complete Heat Therapy Guide PDF' },\n    filename: 'heat-therapy-guide-pdf.pdf'\n  },\n  'workplace-relief-toolkit': {\n    title: { zh: 'èŒåœºç–¼ç—›ç¼“è§£å·¥å…·åŒ…', en: 'Workplace Pain Relief Toolkit' },\n    filename: 'workplace-relief-toolkit.pdf'\n  },\n  'monthly-preparation-planner': {\n    title: { zh: 'æœˆåº¦å‡†å¤‡è®¡åˆ’è¡¨', en: 'Monthly Preparation Planner' },\n    filename: 'monthly-preparation-planner.pdf'\n  },\n  'stress-management-workbook': {\n    title: { zh: 'å‹åŠ›ç®¡ç†å·¥ä½œå†Œ', en: 'Stress Management Workbook' },\n    filename: 'stress-management-workbook.pdf'\n  },\n  'sleep-quality-improvement-guide': {\n    title: { zh: 'ç¡çœ è´¨é‡æ”¹å–„æŒ‡å—', en: 'Sleep Quality Improvement Guide' },\n    filename: 'sleep-quality-improvement-guide.pdf'\n  },\n  'menstrual-cycle-education-guide': {\n    title: { zh: 'æœˆç»å‘¨æœŸæ•™è‚²æŒ‡å—', en: 'Menstrual Cycle Education Guide' },\n    filename: 'menstrual-cycle-education-guide.pdf'\n  },\n  'pain-research-summary-2024': {\n    title: { zh: '2024ç—›ç»ç ”ç©¶æ‘˜è¦', en: '2024 Pain Research Summary' },\n    filename: 'pain-research-summary-2024.pdf'\n  },\n  'medical-consultation-preparation': {\n    title: { zh: 'å°±åŒ»å’¨è¯¢å‡†å¤‡æŒ‡å—', en: 'Medical Consultation Preparation Guide' },\n    filename: 'medical-consultation-preparation.pdf'\n  },\n  'global-health-perspectives': {\n    title: { zh: 'å…¨çƒå¥åº·è§†è§’æŠ¥å‘Š', en: 'Global Health Perspectives Report' },\n    filename: 'global-health-perspectives.pdf'\n  },\n  'long-term-health-planner': {\n    title: { zh: 'é•¿æœŸå¥åº·è§„åˆ’å¸ˆ', en: 'Long-term Health Planner' },\n    filename: 'long-term-health-planner.pdf'\n  },\n  'personal-health-journal': {\n    title: { zh: 'ä¸ªäººå¥åº·æ—¥è®°æ¨¡æ¿', en: 'Personal Health Journal Template' },\n    filename: 'personal-health-journal.pdf'\n  },\n  'nutrition-meal-planning-kit': {\n    title: { zh: 'è¥å…»è†³é£Ÿè§„åˆ’å·¥å…·åŒ…', en: 'Nutrition Meal Planning Kit' },\n    filename: 'nutrition-meal-planning-kit.pdf'\n  },\n  'exercise-routine-builder': {\n    title: { zh: 'è¿åŠ¨è®¡åˆ’æ„å»ºå™¨', en: 'Exercise Routine Builder' },\n    filename: 'exercise-routine-builder.pdf'\n  },\n  'lifestyle-assessment-toolkit': {\n    title: { zh: 'ç”Ÿæ´»æ–¹å¼è¯„ä¼°å·¥å…·åŒ…', en: 'Lifestyle Assessment Toolkit' },\n    filename: 'lifestyle-assessment-toolkit.pdf'\n  },\n  'sustainable-health-strategies': {\n    title: { zh: 'å¯æŒç»­å¥åº·ç­–ç•¥æŒ‡å—', en: 'Sustainable Health Strategies Guide' },\n    filename: 'sustainable-health-strategies.pdf'\n  }\n};\n\nexport default function PDFPreviewPage({ locale, resourceId }: PDFPreviewPageProps) {\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string>('');\n\n  const resource = getPDFResourceById(resourceId);\n  const previewContent = getPreviewContentById(resourceId);\n  const newPdfInfo = NEW_PDF_INFO[resourceId];\n  const t = useTranslations('downloadsPage.resources');\n\n  // è·å–èµ„æºæ ‡é¢˜\n  const getResourceTitle = () => {\n    if (resource) {\n      return t(resource.titleKey);\n    } else if (newPdfInfo) {\n      return locale === 'zh' ? newPdfInfo.title.zh : newPdfInfo.title.en;\n    }\n    return resourceId;\n  };\n\n  // è·å–æ–‡ä»¶å\n  const getFileName = () => {\n    if (resource) {\n      return resource.filename;\n    } else if (newPdfInfo) {\n      return newPdfInfo.filename;\n    }\n    return `${resourceId}.pdf`;\n  };\n\n  useEffect(() => {\n    console.log('=== PDFPreviewPage useEffect å¼€å§‹ ===');\n    console.log('resourceId:', resourceId);\n    console.log('locale:', locale);\n    console.log('resource:', resource);\n    console.log('previewContent:', previewContent);\n    console.log('newPdfInfo:', newPdfInfo);\n    \n    // æ£€æŸ¥æ˜¯å¦æœ‰é¢„è§ˆå†…å®¹é…ç½®\n    if (previewContent) {\n      console.log('âœ… ä½¿ç”¨é¢„è§ˆå†…å®¹é…ç½®');\n      setLoading(false);\n      return;\n    }\n    \n    // å¦‚æœæ²¡æœ‰é¢„è§ˆå†…å®¹é…ç½®ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰HTMLæ–‡ä»¶\n    if (!resource && !newPdfInfo) {\n      console.log('âŒ èµ„æºæœªæ‰¾åˆ°');\n      setError('Resource not found');\n      setLoading(false);\n      return;\n    }\n\n    // æ„å»ºHTMLæ–‡ä»¶è·¯å¾„\n    const filename = getFileName();\n    let htmlFilename = filename.replace('.pdf', '.html');\n    console.log('åˆå§‹ htmlFilename:', htmlFilename);\n    \n    if (locale === 'en' && !htmlFilename.includes('-en')) {\n      htmlFilename = htmlFilename.replace('.html', '-en.html');\n      console.log('è‹±æ–‡ç‰ˆ htmlFilename:', htmlFilename);\n    }\n    \n    console.log('æœ€ç»ˆ htmlFilename:', htmlFilename);\n    const fetchUrl = `/pdf-files/${htmlFilename}`;\n    console.log('fetch URL:', fetchUrl);\n\n    // åŠ è½½HTMLå†…å®¹\n    console.log('ğŸš€ å¼€å§‹ fetch è¯·æ±‚...');\n    fetch(fetchUrl)\n      .then(response => {\n        console.log('âœ… fetch å“åº”æ”¶åˆ°');\n        console.log('response.ok:', response.ok);\n        console.log('response.status:', response.status);\n        console.log('response.statusText:', response.statusText);\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText} - File not found: ${htmlFilename}`);\n        }\n        return response.text();\n      })\n      .then(html => {\n        console.log('âœ… HTML å†…å®¹åŠ è½½æˆåŠŸ');\n        console.log('HTML é•¿åº¦:', html.length);\n        console.log('HTML å¼€å¤´:', html.substring(0, 100));\n        \n        // setHtmlContent(html); // ä¸å†éœ€è¦ï¼Œä½¿ç”¨é¢„è§ˆå†…å®¹é…ç½®\n        setLoading(false);\n        console.log('âœ… çŠ¶æ€æ›´æ–°å®Œæˆï¼Œloading = false');\n      })\n      .catch(err => {\n        console.error('âŒ fetch å¤±è´¥:', err);\n        console.error('é”™è¯¯è¯¦æƒ…:', {\n          message: err.message,\n          stack: err.stack,\n          fetchUrl: fetchUrl,\n          htmlFilename: htmlFilename,\n          resourceId: resourceId,\n          locale: locale\n        });\n        setError(`Failed to load preview content: ${err.message}`);\n        setLoading(false);\n      });\n  }, [resource, previewContent, newPdfInfo, locale]);\n\n  const handleDownload = () => {\n    if (!resource && !newPdfInfo && !previewContent) return;\n\n    // è·å–æ–‡ä»¶åå¹¶è½¬æ¢ä¸ºHTMLæ ¼å¼\n    const filename = getFileName();\n    let htmlFilename = filename.replace('.pdf', '.html');\n    \n    // æ ¹æ®è¯­è¨€æ·»åŠ è¯­è¨€åç¼€\n    if (locale === 'en' && !htmlFilename.includes('-en')) {\n      htmlFilename = htmlFilename.replace('.html', '-en.html');\n    }\n    \n    // æ„å»ºHTMLæ–‡ä»¶ä¸‹è½½URL\n    const downloadUrl = `/downloads/${htmlFilename}`;\n\n    // åˆ›å»ºä¸´æ—¶é“¾æ¥è¿›è¡Œä¸‹è½½\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = htmlFilename;\n    link.target = '_blank';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    console.log(`ä¸‹è½½HTMLæ–‡ä»¶: ${htmlFilename} from ${downloadUrl}`);\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  const handleShare = async () => {\n    const resourceTitle = getResourceTitle();\n    const shareData = {\n      title: `Period Hub - ${resourceTitle}`,\n      text: locale === 'zh' ? 'æ¨èè¿™ä¸ªæœ‰ç”¨çš„ç»æœŸå¥åº·èµ„æº' : 'Recommended period health resource',\n      url: window.location.href\n    };\n\n    try {\n      if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n        await navigator.share(shareData);\n      } else {\n        await navigator.clipboard.writeText(window.location.href);\n        alert(locale === 'zh' ? 'é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼' : 'Link copied to clipboard!');\n      }\n    } catch (error) {\n      console.error('Share failed:', error);\n    }\n  };\n\n  const handleBack = () => {\n    router.push(`/${locale}/downloads`);\n  };\n\n  if (!resource && !newPdfInfo && !previewContent) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n            {locale === 'zh' ? 'èµ„æºæœªæ‰¾åˆ°' : 'Resource Not Found'}\n          </h1>\n          <p className=\"text-gray-600 mb-6\">\n            {locale === 'zh'\n              ? 'æŠ±æ­‰ï¼Œæ‚¨è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚'\n              : 'Sorry, the requested resource does not exist.'}\n          </p>\n          <button\n            onClick={handleBack}\n            className=\"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors\"\n          >\n            {locale === 'zh' ? 'è¿”å›ä¸‹è½½ä¸­å¿ƒ' : 'Back to Downloads'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">\n            {locale === 'zh' ? 'æ­£åœ¨åŠ è½½é¢„è§ˆå†…å®¹...' : 'Loading preview content...'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n            {locale === 'zh' ? 'é¢„è§ˆä¸å¯ç”¨' : 'Preview Unavailable'}\n          </h2>\n          <p className=\"text-gray-600 mb-6\">\n            {locale === 'zh'\n              ? 'æŠ±æ­‰ï¼Œæ­¤èµ„æºæš‚ä¸æ”¯æŒåœ¨çº¿é¢„è§ˆï¼Œè¯·ç›´æ¥ä¸‹è½½PDFæ–‡ä»¶ã€‚'\n              : 'Sorry, online preview is not available for this resource. Please download the PDF directly.'}\n          </p>\n          <div className=\"flex gap-4 justify-center\">\n            <button\n              onClick={handleBack}\n              className=\"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors\"\n            >\n              {locale === 'zh' ? 'è¿”å›åˆ—è¡¨' : 'Back to List'}\n            </button>\n            <button\n              onClick={handleDownload}\n              className=\"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors flex items-center\"\n            >\n              <Download className=\"w-5 h-5 mr-2\" />\n              {locale === 'zh' ? 'ä¸‹è½½PDF' : 'Download PDF'}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // å¦‚æœæœ‰é¢„è§ˆå†…å®¹é…ç½®ï¼Œæ˜¾ç¤ºé¢„è§ˆå†…å®¹\n  if (previewContent) {\n    const currentLocale = locale === 'zh' ? 'zh' : 'en';\n    const title = previewContent.title[currentLocale];\n    const keyPoints = previewContent.keyPoints[currentLocale];\n    const useCase = previewContent.useCase[currentLocale];\n    const estimatedTime = previewContent.estimatedTime[currentLocale];\n    const previewSections = previewContent.previewSections[currentLocale];\n    const fullVersionIncludes = previewContent.fullVersionIncludes[currentLocale];\n\n    return (\n      <div className=\"min-h-screen bg-white\">\n        {/* å›ºå®šé¡¶éƒ¨å·¥å…·æ  */}\n        <div className=\"fixed top-0 left-0 right-0 bg-white shadow-sm border-b border-gray-200 z-50\">\n          <div className=\"container mx-auto px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <button\n                onClick={handleBack}\n                className=\"flex items-center text-gray-600 hover:text-purple-600 transition-colors\"\n              >\n                <ArrowLeft className=\"w-5 h-5 mr-2\" />\n                <span className=\"text-sm font-medium\">\n                  {locale === 'zh' ? 'è¿”å›åˆ—è¡¨' : 'Back to List'}\n                </span>\n              </button>\n\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={handlePrint}\n                  className=\"flex items-center px-3 py-2 text-gray-600 hover:text-purple-600 transition-colors\"\n                  title={locale === 'zh' ? 'æ‰“å°æˆ–ä¿å­˜ä¸ºPDF' : 'Print or Save as PDF'}\n                >\n                  <Printer className=\"w-5 h-5 mr-1\" />\n                  <span className=\"text-sm hidden sm:inline\">\n                    {locale === 'zh' ? 'æ‰“å°' : 'Print'}\n                  </span>\n                </button>\n\n                <button\n                  onClick={handleShare}\n                  className=\"flex items-center px-3 py-2 text-gray-600 hover:text-purple-600 transition-colors\"\n                  title={locale === 'zh' ? 'åˆ†äº«' : 'Share'}\n                >\n                  <Share2 className=\"w-5 h-5 mr-1\" />\n                  <span className=\"text-sm hidden sm:inline\">\n                    {locale === 'zh' ? 'åˆ†äº«' : 'Share'}\n                  </span>\n                </button>\n\n                <button\n                  onClick={handleDownload}\n                  className=\"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n                >\n                  <Download className=\"w-5 h-5 mr-2\" />\n                  <span className=\"text-sm font-medium\">\n                    {locale === 'zh' ? 'ä¸‹è½½PDF' : 'Download PDF'}\n                  </span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* é¢„è§ˆå†…å®¹å±•ç¤ºåŒºåŸŸ */}\n        <div className=\"pt-16\">\n          <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n            {/* æ ‡é¢˜å’ŒåŸºæœ¬ä¿¡æ¯ */}\n            <div className=\"mb-8\">\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">{title}</h1>\n              <div className=\"flex flex-wrap gap-4 text-sm text-gray-600\">\n                <span className=\"flex items-center\">\n                  <FileText className=\"w-4 h-4 mr-1\" />\n                  {locale === 'zh' ? 'é¢„è®¡ä½¿ç”¨æ—¶é—´' : 'Estimated Time'}: {estimatedTime}\n                </span>\n                <span className=\"flex items-center\">\n                  <span className=\"w-2 h-2 bg-purple-500 rounded-full mr-2\"></span>\n                  {locale === 'zh' ? 'é€‚ç”¨åœºæ™¯' : 'Use Case'}: {useCase}\n                </span>\n              </div>\n            </div>\n\n            {/* æ ¸å¿ƒè¦ç‚¹ */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n                {locale === 'zh' ? 'æ ¸å¿ƒè¦ç‚¹' : 'Key Points'}\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                {keyPoints.map((point, index) => (\n                  <div key={index} className=\"flex items-start\">\n                    <span className=\"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                    <span className=\"text-gray-700\">{point}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* é¢„è§ˆç« èŠ‚ */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n                {locale === 'zh' ? 'é¢„è§ˆå†…å®¹' : 'Preview Content'}\n              </h2>\n              <div className=\"space-y-6\">\n                {previewSections.map((section, index) => (\n                  <div key={index} className={`p-6 rounded-lg ${section.isHighlight ? 'bg-purple-50 border-l-4 border-purple-500' : 'bg-gray-50'}`}>\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{section.title}</h3>\n                    <ul className=\"space-y-2\">\n                      {section.content.map((item, itemIndex) => (\n                        <li key={itemIndex} className=\"flex items-start\">\n                          <span className=\"w-1.5 h-1.5 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                          <span className=\"text-gray-700\">{item}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* å®Œæ•´ç‰ˆåŒ…å«å†…å®¹ */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n                {locale === 'zh' ? 'å®Œæ•´ç‰ˆåŒ…å«' : 'Full Version Includes'}\n              </h2>\n              <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg\">\n                <ul className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                  {fullVersionIncludes.map((item, index) => (\n                    <li key={index} className=\"flex items-start\">\n                      <span className=\"w-1.5 h-1.5 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      <span className=\"text-gray-700\">{item}</span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n\n            {/* ä¸‹è½½æç¤º */}\n            <div className=\"text-center py-8 border-t border-gray-200\">\n              <p className=\"text-gray-600 mb-4\">\n                {locale === 'zh' \n                  ? 'è¿™æ˜¯é¢„è§ˆå†…å®¹ï¼Œå®Œæ•´ç‰ˆæœ¬åŒ…å«æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä¸‹è½½å®Œæ•´PDFæ–‡ä»¶ã€‚'\n                  : 'This is preview content. The full version contains more detailed information. Click the button above to download the complete PDF file.'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* æ‰“å°æ ·å¼ */}\n        <style jsx global>{`\n          @media print {\n            .fixed {\n              display: none !important;\n            }\n            .preview-content {\n              padding-top: 0 !important;\n            }\n            body {\n              background: white !important;\n            }\n          }\n        `}</style>\n      </div>\n    );\n  }\n\n  // å¦‚æœæ²¡æœ‰é¢„è§ˆå†…å®¹é…ç½®ï¼Œä½¿ç”¨HTMLå†…å®¹ï¼ˆå‘åå…¼å®¹ï¼‰\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* å›ºå®šé¡¶éƒ¨å·¥å…·æ  */}\n      <div className=\"fixed top-0 left-0 right-0 bg-white shadow-sm border-b border-gray-200 z-50\">\n        <div className=\"container mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <button\n              onClick={handleBack}\n              className=\"flex items-center text-gray-600 hover:text-purple-600 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5 mr-2\" />\n              <span className=\"text-sm font-medium\">\n                {locale === 'zh' ? 'è¿”å›åˆ—è¡¨' : 'Back to List'}\n              </span>\n            </button>\n\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={handlePrint}\n                className=\"flex items-center px-3 py-2 text-gray-600 hover:text-purple-600 transition-colors\"\n                title={locale === 'zh' ? 'æ‰“å°æˆ–ä¿å­˜ä¸ºPDF' : 'Print or Save as PDF'}\n              >\n                <Printer className=\"w-5 h-5 mr-1\" />\n                <span className=\"text-sm hidden sm:inline\">\n                  {locale === 'zh' ? 'æ‰“å°' : 'Print'}\n                </span>\n              </button>\n\n              <button\n                onClick={handleShare}\n                className=\"flex items-center px-3 py-2 text-gray-600 hover:text-purple-600 transition-colors\"\n                title={locale === 'zh' ? 'åˆ†äº«' : 'Share'}\n              >\n                <Share2 className=\"w-5 h-5 mr-1\" />\n                <span className=\"text-sm hidden sm:inline\">\n                  {locale === 'zh' ? 'åˆ†äº«' : 'Share'}\n                </span>\n              </button>\n\n              <button\n                onClick={handleDownload}\n                className=\"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n              >\n                <Download className=\"w-5 h-5 mr-2\" />\n                <span className=\"text-sm font-medium\">\n                  {locale === 'zh' ? 'ä¸‹è½½PDF' : 'Download PDF'}\n                </span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* HTMLå†…å®¹å±•ç¤ºåŒºåŸŸ */}\n      <div className=\"pt-16\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <p className=\"text-center text-gray-600\">\n            {locale === 'zh' ? 'HTMLå†…å®¹åŠ è½½ä¸­...' : 'Loading HTML content...'}\n          </p>\n        </div>\n      </div>\n\n      {/* æ‰“å°æ ·å¼ */}\n      <style jsx global>{`\n        @media print {\n          .fixed {\n            display: none !important;\n          }\n          .preview-content {\n            padding-top: 0 !important;\n          }\n          body {\n            background: white !important;\n          }\n        }\n\n        .preview-content {\n          max-width: none;\n        }\n\n        .preview-content body {\n          margin: 0;\n          padding: 0;\n        }\n      `}</style>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/downloads/preview/[id]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasPDFMapping' is defined but never used.","line":7,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport { notFound } from 'next/navigation';\nimport { Locale, locales } from '@/i18n';\nimport { getPDFResourceById } from '@/config/pdfResources';\nimport { getPreviewContentById } from '@/config/previewContent';\nimport { mapPDFId, hasPDFMapping, getAllMappedIds } from '@/components/pdf-id-mapping';\nimport PDFPreviewPage from './PDFPreviewPage';\n\ninterface PreviewPageProps {\n  params: Promise<{ \n    locale: Locale;\n    id: string;\n  }>;\n}\n\n// æ–°å¢PDFèµ„æºçš„åŸºæœ¬ä¿¡æ¯æ˜ å°„\nconst NEW_PDF_INFO: Record<string, { title: { zh: string; en: string }; description: { zh: string; en: string } }> = {\n  'emergency-pain-relief-card': {\n    title: { zh: 'ç´§æ€¥ç–¼ç—›ç¼“è§£å¡ç‰‡', en: 'Emergency Pain Relief Card' },\n    description: { zh: 'ä¾¿æºå¼ç´§æ€¥ç–¼ç—›ç¼“è§£æ–¹æ³•é€ŸæŸ¥å¡', en: 'Portable quick reference card for emergency pain relief methods' }\n  },\n  '5-minute-relief-checklist': {\n    title: { zh: '5åˆ†é’Ÿå¿«é€Ÿç¼“è§£æ£€æŸ¥æ¸…å•', en: '5-Minute Quick Relief Checklist' },\n    description: { zh: 'å³æ—¶å¯ç”¨çš„5åˆ†é’Ÿå¿«é€Ÿç¼“è§£æ­¥éª¤æ¸…å•', en: 'Instant-use 5-minute quick relief step checklist' }\n  },\n  'heat-therapy-guide-pdf': {\n    title: { zh: 'çƒ­ç–—å®Œæ•´æŒ‡å—PDFç‰ˆ', en: 'Complete Heat Therapy Guide PDF' },\n    description: { zh: 'è¯¦ç»†çš„çƒ­ç–—ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹æŒ‡å—', en: 'Detailed guide on heat therapy methods and precautions' }\n  },\n  'workplace-relief-toolkit': {\n    title: { zh: 'èŒåœºç–¼ç—›ç¼“è§£å·¥å…·åŒ…', en: 'Workplace Pain Relief Toolkit' },\n    description: { zh: 'åŠå…¬ç¯å¢ƒä¸‹çš„ç–¼ç—›ç®¡ç†å’Œç¼“è§£æ–¹æ¡ˆ', en: 'Pain management and relief solutions for office environments' }\n  },\n  'monthly-preparation-planner': {\n    title: { zh: 'æœˆåº¦å‡†å¤‡è®¡åˆ’è¡¨', en: 'Monthly Preparation Planner' },\n    description: { zh: 'æå‰è§„åˆ’ç»æœŸå¥åº·ç®¡ç†çš„æœˆåº¦è®¡åˆ’å·¥å…·', en: 'Monthly planning tool for advance menstrual health management' }\n  },\n  'stress-management-workbook': {\n    title: { zh: 'å‹åŠ›ç®¡ç†å·¥ä½œå†Œ', en: 'Stress Management Workbook' },\n    description: { zh: 'ç»æœŸå‹åŠ›ç®¡ç†çš„å®ç”¨ç»ƒä¹ å†Œå’ŒæŒ‡å¯¼æ‰‹å†Œ', en: 'Practical workbook and guide for menstrual stress management' }\n  },\n  'sleep-quality-improvement-guide': {\n    title: { zh: 'ç¡çœ è´¨é‡æ”¹å–„æŒ‡å—', en: 'Sleep Quality Improvement Guide' },\n    description: { zh: 'ç»æœŸç¡çœ ä¼˜åŒ–çš„è¯¦ç»†æŒ‡å¯¼å’Œå®ç”¨æŠ€å·§', en: 'Detailed guidance and practical tips for menstrual sleep optimization' }\n  },\n  'menstrual-cycle-education-guide': {\n    title: { zh: 'æœˆç»å‘¨æœŸæ•™è‚²æŒ‡å—', en: 'Menstrual Cycle Education Guide' },\n    description: { zh: 'å…¨é¢çš„æœˆç»å‘¨æœŸç§‘å­¦æ•™è‚²å’Œå¥åº·çŸ¥è¯†ææ–™', en: 'Comprehensive scientific education material about menstrual cycle and health' }\n  },\n  'pain-research-summary-2024': {\n    title: { zh: '2024ç—›ç»ç ”ç©¶æ‘˜è¦', en: '2024 Pain Research Summary' },\n    description: { zh: '2024å¹´æœ€æ–°ç—›ç»ç ”ç©¶æˆæœå’Œç§‘å­¦è¿›å±•æ±‡æ€»', en: '2024 latest menstrual pain research findings and scientific progress summary' }\n  },\n  'medical-consultation-preparation': {\n    title: { zh: 'å°±åŒ»å’¨è¯¢å‡†å¤‡æŒ‡å—', en: 'Medical Consultation Preparation Guide' },\n    description: { zh: 'å°±åŒ»å‰çš„å‡†å¤‡å·¥ä½œå’Œé—®é¢˜æ¸…å•æŒ‡å¯¼', en: 'Guidance for preparation and question checklist before medical appointments' }\n  },\n  'global-health-perspectives': {\n    title: { zh: 'å…¨çƒå¥åº·è§†è§’æŠ¥å‘Š', en: 'Global Health Perspectives Report' },\n    description: { zh: 'ä¸åŒæ–‡åŒ–èƒŒæ™¯ä¸‹ç»æœŸå¥åº·ç®¡ç†æ–¹æ³•çš„æ¯”è¾ƒç ”ç©¶', en: 'Comparative study of menstrual health management across different cultural backgrounds' }\n  },\n  'long-term-health-planner': {\n    title: { zh: 'é•¿æœŸå¥åº·è§„åˆ’å¸ˆ', en: 'Long-term Health Planner' },\n    description: { zh: 'å¹´åº¦å¥åº·ç®¡ç†å’Œç›®æ ‡è®¾å®šçš„ä¸“ä¸šå·¥å…·', en: 'Professional tool for annual health management and goal setting' }\n  },\n  'personal-health-journal': {\n    title: { zh: 'ä¸ªäººå¥åº·æ—¥è®°æ¨¡æ¿', en: 'Personal Health Journal Template' },\n    description: { zh: 'é•¿æœŸå¥åº·è¿½è¸ªå’Œè®°å½•çš„æ—¥è®°æ¨¡æ¿å·¥å…·', en: 'Journal template tool for long-term health tracking and recording' }\n  },\n  'nutrition-meal-planning-kit': {\n    title: { zh: 'è¥å…»è†³é£Ÿè§„åˆ’å·¥å…·åŒ…', en: 'Nutrition Meal Planning Kit' },\n    description: { zh: 'é•¿æœŸè¥å…»ç®¡ç†å’Œè†³é£Ÿè§„åˆ’çš„å®ç”¨å·¥å…·åŒ…', en: 'Practical toolkit for long-term nutrition management and meal planning' }\n  },\n  'exercise-routine-builder': {\n    title: { zh: 'è¿åŠ¨è®¡åˆ’æ„å»ºå™¨', en: 'Exercise Routine Builder' },\n    description: { zh: 'ä¸ªæ€§åŒ–è¿åŠ¨è®¡åˆ’åˆ¶å®šå’Œæ‰§è¡Œçš„æŒ‡å¯¼å·¥å…·', en: 'Guidance tool for creating and implementing personalized exercise routines' }\n  },\n  'lifestyle-assessment-toolkit': {\n    title: { zh: 'ç”Ÿæ´»æ–¹å¼è¯„ä¼°å·¥å…·åŒ…', en: 'Lifestyle Assessment Toolkit' },\n    description: { zh: 'å…¨é¢çš„ç”Ÿæ´»æ–¹å¼å¥åº·è¯„ä¼°å’Œä¼˜åŒ–å·¥å…·', en: 'Comprehensive lifestyle health assessment and optimization tool' }\n  },\n  'sustainable-health-strategies': {\n    title: { zh: 'å¯æŒç»­å¥åº·ç­–ç•¥æŒ‡å—', en: 'Sustainable Health Strategies Guide' },\n    description: { zh: 'é•¿æœŸå¯æŒç»­å¥åº·ç®¡ç†ç­–ç•¥çš„æŒ‡å¯¼æ‰‹å†Œ', en: 'Guidance manual for long-term sustainable health management strategies' }\n  }\n};\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: PreviewPageProps): Promise<Metadata> {\n  const { locale, id } = await params;\n  // ğŸš€ å¿«é€Ÿä¿®å¤ï¼šæ˜ å°„SimplePDFCenterçš„IDåˆ°çœŸå®èµ„æºID\n  const realId = mapPDFId(id);\n  const resource = getPDFResourceById(realId);\n  const previewContent = getPreviewContentById(realId);\n  \n  // å¦‚æœæ‰¾ä¸åˆ°é…ç½®ï¼Œä½¿ç”¨æ–°PDFä¿¡æ¯\n  const pdfInfo = NEW_PDF_INFO[realId];\n  \n  if (!resource && !previewContent && !pdfInfo) {\n    return {\n      title: 'Resource Not Found - Period Hub',\n      description: 'The requested PDF resource could not be found.'\n    };\n  }\n\n  const title = pdfInfo \n    ? (locale === 'zh' ? pdfInfo.title.zh : pdfInfo.title.en)\n    : previewContent \n    ? (locale === 'zh' ? previewContent.title.zh : previewContent.title.en)\n    : (locale === 'zh' ? `${realId} PDFèµ„æº` : `${realId} PDF Resource`);\n    \n  const description = pdfInfo\n    ? (locale === 'zh' ? pdfInfo.description.zh : pdfInfo.description.en)\n    : locale === 'zh' \n    ? `é¢„è§ˆ ${title} - Period Hub ç»æœŸå¥åº·ä¸“ä¸šèµ„æº`\n    : `Preview ${title} - Period Hub Professional Health Resources`;\n\n  return {\n    title: `${title} é¢„è§ˆ - Period Hub`,\n    description,\n    keywords: locale === 'zh' \n      ? `${title},PDFé¢„è§ˆ,ç»æœŸå¥åº·,Period Hub`\n      : `${title},PDF preview,menstrual health,Period Hub`,\n  };\n}\n\n// Generate static params for all supported locales and preview-enabled resources\nexport async function generateStaticParams() {\n  // ğŸš€ å¿«é€Ÿä¿®å¤ï¼šåŒ…å«åŸæœ‰çš„çœŸå®IDå’ŒSimplePDFCenteræ˜ å°„çš„ID\n  const realIds = [\n    'pain-tracking-form',\n    'campus-emergency-checklist',\n    'menstrual-cycle-nutrition-plan',\n    'healthy-habits-checklist',\n    'natural-therapy-assessment',\n    'parent-communication-guide',\n    'teacher-health-manual',\n    'teacher-collaboration-handbook',\n    'specific-menstrual-pain-management-guide',\n    'menstrual-pain-complications-management',\n    'magnesium-gut-health-guide',\n    'zhan-zhuang-baduanjin-illustrated-guide'\n  ];\n  \n  // æ·»åŠ SimplePDFCenterä¸­ä½¿ç”¨çš„æ˜ å°„IDå’Œæ–°å¢PDFçš„ID\n  const mappedIds = getAllMappedIds();\n  const newPdfIds = Object.keys(NEW_PDF_INFO);\n  const allPreviewableIds = [...realIds, ...mappedIds, ...newPdfIds];\n\n  const params = [];\n  for (const locale of locales) {\n    for (const id of allPreviewableIds) {\n      params.push({ locale, id });\n    }\n  }\n\n  return params;\n}\n\nexport default async function PreviewPage({\n  params\n}: PreviewPageProps) {\n  const { locale, id } = await params;\n  setRequestLocale(locale);\n\n  // ğŸš€ å¿«é€Ÿä¿®å¤ï¼šæ˜ å°„SimplePDFCenterçš„IDåˆ°çœŸå®èµ„æºID\n  const realId = mapPDFId(id);\n  \n  // Validate resource exists using the real ID\n  const resource = getPDFResourceById(realId);\n  const previewContent = getPreviewContentById(realId);\n  const pdfInfo = NEW_PDF_INFO[realId];\n  \n  // å¦‚æœæ—¢ä¸åœ¨åŸæœ‰é…ç½®ä¸­ï¼Œä¹Ÿä¸åœ¨æ–°PDFä¿¡æ¯ä¸­ï¼Œè¿”å›404\n  if (!resource && !previewContent && !pdfInfo) {\n    notFound();\n  }\n\n  // ä½¿ç”¨çœŸå®IDè¿›è¡Œé¢„è§ˆ\n  return <PDFPreviewPage locale={locale} resourceId={realId} />;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/error.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":8}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nexport default function LocaleError({\n  error,\n  reset\n}: {\n  error: Error & { digest?: string };\n  reset: () => void;\n}) {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center flex-col gap-4 p-6\">\n      <h1 className=\"text-2xl font-bold\">æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯</h1>\n      <p className=\"text-neutral-600\">è¯·é‡è¯•æˆ–è¿”å›é¦–é¡µã€‚</p>\n      <div className=\"flex gap-3\">\n        <button onClick={reset} className=\"px-4 py-2 rounded-lg text-white\" style={{ background: '#111827' }}>\n          é‡è¯•\n        </button>\n        <a href=\"/zh\" className=\"px-4 py-2 rounded-lg text-white\" style={{ background: '#7c3aed' }}>\n          è¿”å›é¦–é¡µ\n        </a>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/framework-demo/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/global-perspectives/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTranslations } from 'next-intl';\nimport { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { Locale, locales } from '@/i18n';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'å…¨çƒè§†è§’ - ç—›ç»å¥åº·æŒ‡å—' : 'Global Perspectives - Health Guide';\n  const description = locale === 'zh' \n    ? 'æ¢ç´¢ä¸–ç•Œå„åœ°çš„ä¼ ç»Ÿç–—æ³•å’Œæ–‡åŒ–è§‚ç‚¹ï¼Œäº†è§£ä¸åŒæ–‡åŒ–å¦‚ä½•å¤„ç†ç»æœŸå¥åº·ã€‚'\n    : 'Explore traditional therapies and cultural perspectives from around the world, understand how different cultures approach menstrual health.';\n  \n  return {\n    title,\n    description,\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function GlobalPerspectivesPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  // Enable static rendering\n  unstable_setRequestLocale(locale);\n\n  const globalPractices = [\n    {\n      region: locale === 'zh' ? 'ä¸­å›½ä¼ ç»ŸåŒ»å­¦' : 'Traditional Chinese Medicine',\n      flag: 'ğŸ‡¨ğŸ‡³',\n      practices: [\n        {\n          name: locale === 'zh' ? 'ä¸­è¯è°ƒç†' : 'Herbal Medicine',\n          description: locale === 'zh' ? 'ä½¿ç”¨å½“å½’ã€å·èŠã€ç™½èŠç­‰ä¸­è¯æè°ƒç†æ°”è¡€' : 'Using herbs like Angelica, Ligusticum, and Paeonia to regulate qi and blood'\n        },\n        {\n          name: locale === 'zh' ? 'é’ˆç¸æ²»ç–—' : 'Acupuncture',\n          description: locale === 'zh' ? 'é€šè¿‡åˆºæ¿€ç‰¹å®šç©´ä½æ¥ç¼“è§£ç–¼ç—›' : 'Relieving pain by stimulating specific acupoints'\n        },\n        {\n          name: locale === 'zh' ? 'å…«æ®µé”¦' : 'Baduanjin Qigong',\n          description: locale === 'zh' ? 'ä¼ ç»Ÿæ°”åŠŸç»ƒä¹ ï¼Œæ”¹å–„è¡€æ¶²å¾ªç¯' : 'Traditional qigong practice to improve blood circulation'\n        }\n      ]\n    },\n    {\n      region: locale === 'zh' ? 'å°åº¦é˜¿è‚²å é™€' : 'Indian Ayurveda',\n      flag: 'ğŸ‡®ğŸ‡³',\n      practices: [\n        {\n          name: locale === 'zh' ? 'è‰è¯ç–—æ³•' : 'Herbal Remedies',\n          description: locale === 'zh' ? 'ä½¿ç”¨å§œé»„ã€èŠ¦èŸã€é˜¿è‚²å é™€è‰è¯' : 'Using turmeric, aloe vera, and Ayurvedic herbs'\n        },\n        {\n          name: locale === 'zh' ? 'ç‘œä¼½ç»ƒä¹ ' : 'Yoga Practice',\n          description: locale === 'zh' ? 'ç‰¹å®šçš„ç‘œä¼½ä½“å¼ç¼“è§£ç»æœŸä¸é€‚' : 'Specific yoga poses to relieve menstrual discomfort'\n        },\n        {\n          name: locale === 'zh' ? 'æ²¹æŒ‰æ‘©' : 'Oil Massage',\n          description: locale === 'zh' ? 'ä½¿ç”¨æ¸©çƒ­çš„è‰è¯æ²¹è¿›è¡Œè…¹éƒ¨æŒ‰æ‘©' : 'Abdominal massage with warm herbal oils'\n        }\n      ]\n    },\n    {\n      region: locale === 'zh' ? 'æ¬§æ´²ä¼ ç»Ÿ' : 'European Traditions',\n      flag: 'ğŸ‡ªğŸ‡º',\n      practices: [\n        {\n          name: locale === 'zh' ? 'è‰è¯èŒ¶' : 'Herbal Teas',\n          description: locale === 'zh' ? 'æ´‹ç”˜èŠã€è–„è·ã€è¦†ç›†å­å¶èŒ¶' : 'Chamomile, peppermint, and raspberry leaf teas'\n        },\n        {\n          name: locale === 'zh' ? 'æ¸©æ³‰ç–—æ³•' : 'Spa Therapy',\n          description: locale === 'zh' ? 'æ¸©æ³‰æµ´å’Œæ³¥æµ´ç¼“è§£ç–¼ç—›' : 'Hot spring baths and mud baths for pain relief'\n        },\n        {\n          name: locale === 'zh' ? 'èŠ³é¦™ç–—æ³•' : 'Aromatherapy',\n          description: locale === 'zh' ? 'è–°è¡£è‰ã€ç«ç‘°ç­‰ç²¾æ²¹çš„ä½¿ç”¨' : 'Use of lavender, rose, and other essential oils'\n        }\n      ]\n    },\n    {\n      region: locale === 'zh' ? 'éæ´²ä¼ ç»Ÿ' : 'African Traditions',\n      flag: 'ğŸŒ',\n      practices: [\n        {\n          name: locale === 'zh' ? 'ä¼ ç»Ÿè‰è¯' : 'Traditional Herbs',\n          description: locale === 'zh' ? 'å½“åœ°æ¤ç‰©å¦‚èŠ¦èŸã€ç”Ÿå§œçš„åº”ç”¨' : 'Local plants like aloe vera and ginger applications'\n        },\n        {\n          name: locale === 'zh' ? 'çƒ­æ•·ç–—æ³•' : 'Heat Therapy',\n          description: locale === 'zh' ? 'ä½¿ç”¨åŠ çƒ­çš„çŸ³å¤´æˆ–å¸ƒæ–™çƒ­æ•·' : 'Using heated stones or cloths for heat application'\n        },\n        {\n          name: locale === 'zh' ? 'ç¤¾åŒºæ”¯æŒ' : 'Community Support',\n          description: locale === 'zh' ? 'å¥³æ€§ç¾¤ä½“çš„ç›¸äº’æ”¯æŒå’ŒçŸ¥è¯†åˆ†äº«' : 'Mutual support and knowledge sharing among women'\n        }\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Breadcrumb */}\n          <nav className=\"text-sm text-neutral-600\">\n            <Link href={`/${locale}`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'é¦–é¡µ' : 'Home'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <Link href={`/${locale}/health-guide`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'ç—›ç»å¥åº·æŒ‡å—' : 'Health Guide'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <span className=\"text-neutral-800\">\n              {locale === 'zh' ? 'å…¨çƒè§†è§’' : 'Global Perspectives'}\n            </span>\n          </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {locale === 'zh' ? 'å…¨çƒè§†è§’ï¼šä¼ ç»Ÿç–—æ³•ä¸æ–‡åŒ–æ™ºæ…§' : 'Global Perspectives: Traditional Therapies & Cultural Wisdom'}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'æ¢ç´¢ä¸–ç•Œå„åœ°çš„ä¼ ç»Ÿç–—æ³•å’Œæ–‡åŒ–è§‚ç‚¹ï¼Œäº†è§£ä¸åŒæ–‡åŒ–å¦‚ä½•å¤„ç†ç»æœŸå¥åº·ï¼Œä»ä¸­æ±²å–æ™ºæ…§ã€‚'\n            : 'Explore traditional therapies and cultural perspectives from around the world, understand how different cultures approach menstrual health, and draw wisdom from them.'\n          }\n        </p>\n      </header>\n\n      {/* Introduction */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n          {locale === 'zh' ? 'ä¼ ç»Ÿæ™ºæ…§çš„ä»·å€¼' : 'Value of Traditional Wisdom'}\n        </h2>\n        <p className=\"text-neutral-700 leading-relaxed mb-4\">\n          {locale === 'zh'\n            ? 'å‡ åƒå¹´æ¥ï¼Œä¸–ç•Œå„åœ°çš„æ–‡åŒ–éƒ½å‘å±•å‡ºäº†ç‹¬ç‰¹çš„æ–¹æ³•æ¥å¤„ç†ç»æœŸå¥åº·ã€‚è™½ç„¶ç°ä»£åŒ»å­¦æä¾›äº†ç§‘å­¦çš„è§£é‡Šå’Œæ²»ç–—æ–¹æ³•ï¼Œä½†ä¼ ç»Ÿç–—æ³•ä¸­çš„è®¸å¤šåšæ³•å·²ç»å¾—åˆ°äº†ç°ä»£ç ”ç©¶çš„éªŒè¯ã€‚'\n            : 'For thousands of years, cultures around the world have developed unique approaches to menstrual health. While modern medicine provides scientific explanations and treatments, many practices from traditional therapies have been validated by modern research.'\n          }\n        </p>\n        <div className=\"bg-white p-4 rounded-lg\">\n          <h3 className=\"font-semibold text-neutral-800 mb-2\">\n            {locale === 'zh' ? 'æ•´åˆçš„å¥½å¤„ï¼š' : 'Benefits of Integration:'}\n          </h3>\n          <ul className=\"grid md:grid-cols-2 gap-2 text-neutral-600 text-sm\">\n            <li className=\"flex items-start\">\n              <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'æ›´å¤šæ²»ç–—é€‰æ‹©' : 'More treatment options'}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'æ•´ä½“å¥åº·æ–¹æ³•' : 'Holistic health approach'}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'æ–‡åŒ–æ•æ„Ÿæ€§' : 'Cultural sensitivity'}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'ä¸ªæ€§åŒ–æ²»ç–—' : 'Personalized treatment'}\n            </li>\n          </ul>\n        </div>\n      </section>\n\n      {/* Global Practices */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-8 text-center\">\n          {locale === 'zh' ? 'ä¸–ç•Œå„åœ°çš„ä¼ ç»Ÿåšæ³•' : 'Traditional Practices Around the World'}\n        </h2>\n        \n        <div className=\"space-y-8\">\n          {globalPractices.map((region, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"flex items-center mb-6\">\n                <span className=\"text-4xl mr-4\">{region.flag}</span>\n                <h3 className=\"text-2xl font-semibold text-neutral-800\">\n                  {region.region}\n                </h3>\n              </div>\n              \n              <div className=\"grid md:grid-cols-3 gap-6\">\n                {region.practices.map((practice, practiceIndex) => (\n                  <div key={practiceIndex} className=\"bg-neutral-50 p-4 rounded-lg\">\n                    <h4 className=\"font-semibold text-primary-600 mb-2\">\n                      {practice.name}\n                    </h4>\n                    <p className=\"text-neutral-600 text-sm\">\n                      {practice.description}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Scientific Validation */}\n      <section className=\"bg-gradient-to-br from-green-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ç§‘å­¦éªŒè¯çš„ä¼ ç»Ÿæ–¹æ³•' : 'Scientifically Validated Traditional Methods'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-green-600 mb-4\">\n              {locale === 'zh' ? 'å·²éªŒè¯çš„æ–¹æ³•' : 'Validated Methods'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"border-l-4 border-green-400 pl-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'çƒ­æ•·ç–—æ³•' : 'Heat Therapy'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'ç ”ç©¶è¯å®çƒ­æ•·å¯ä»¥æœ‰æ•ˆç¼“è§£å­å®«ç—‰æŒ›' : 'Research confirms heat therapy effectively relieves uterine cramps'}\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-green-400 pl-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'ç‘œä¼½å’Œå†¥æƒ³' : 'Yoga and Meditation'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'å¤šé¡¹ç ”ç©¶æ˜¾ç¤ºç‘œä¼½å¯ä»¥å‡è½»ç—›ç»ç—‡çŠ¶' : 'Multiple studies show yoga can reduce dysmenorrhea symptoms'}\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-green-400 pl-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'è‰è¯ç–—æ³•' : 'Herbal Medicine'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'æŸäº›è‰è¯çš„æŠ—ç‚å’Œé•‡ç—›æ•ˆæœå¾—åˆ°ç§‘å­¦è¯å®' : 'Anti-inflammatory and analgesic effects of certain herbs scientifically proven'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-orange-600 mb-4\">\n              {locale === 'zh' ? 'éœ€è¦è°¨æ…çš„æ–¹æ³•' : 'Methods Requiring Caution'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"border-l-4 border-orange-400 pl-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'æœªç»éªŒè¯çš„è‰è¯' : 'Unvalidated Herbs'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'æŸäº›ä¼ ç»Ÿè‰è¯å¯èƒ½ä¸ç°ä»£è¯ç‰©ç›¸äº’ä½œç”¨' : 'Some traditional herbs may interact with modern medications'}\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-orange-400 pl-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'æç«¯é¥®é£Ÿé™åˆ¶' : 'Extreme Dietary Restrictions'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'è¿‡åº¦çš„é¥®é£Ÿé™åˆ¶å¯èƒ½å¯¼è‡´è¥å…»ä¸è‰¯' : 'Excessive dietary restrictions may lead to malnutrition'}\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-orange-400 pl-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'è¿·ä¿¡åšæ³•' : 'Superstitious Practices'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'é¿å…åŸºäºè¿·ä¿¡è€Œéç§‘å­¦çš„åšæ³•' : 'Avoid practices based on superstition rather than science'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Modern Integration */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ç°ä»£æ•´åˆåŒ»å­¦æ–¹æ³•' : 'Modern Integrative Medicine Approach'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-8 h-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'å¾ªè¯æ•´åˆ' : 'Evidence-Based Integration'}\n            </h3>\n            <p className=\"text-neutral-600 text-sm\">\n              {locale === 'zh'\n                ? 'ç»“åˆä¼ ç»Ÿæ™ºæ…§å’Œç°ä»£ç§‘å­¦ï¼Œé€‰æ‹©æœ‰è¯æ®æ”¯æŒçš„æ–¹æ³•ã€‚'\n                : 'Combine traditional wisdom with modern science, choosing evidence-supported methods.'\n              }\n            </p>\n          </div>\n\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-8 h-8 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'ä¸ªæ€§åŒ–æ²»ç–—' : 'Personalized Treatment'}\n            </h3>\n            <p className=\"text-neutral-600 text-sm\">\n              {locale === 'zh'\n                ? 'æ ¹æ®ä¸ªäººæ–‡åŒ–èƒŒæ™¯å’Œåå¥½ï¼Œå®šåˆ¶æœ€é€‚åˆçš„æ²»ç–—æ–¹æ¡ˆã€‚'\n                : 'Customize the most suitable treatment plan based on personal cultural background and preferences.'\n              }\n            </p>\n          </div>\n\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'æŒç»­å­¦ä¹ ' : 'Continuous Learning'}\n            </h3>\n            <p className=\"text-neutral-600 text-sm\">\n              {locale === 'zh'\n                ? 'ä¿æŒå¼€æ”¾å¿ƒæ€ï¼Œä¸æ–­å­¦ä¹ æ–°çš„ç ”ç©¶å’Œä¼ ç»ŸçŸ¥è¯†ã€‚'\n                : 'Maintain an open mind, continuously learning new research and traditional knowledge.'\n              }\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Practical Application */}\n      <section className=\"bg-accent-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'å®é™…åº”ç”¨å»ºè®®' : 'Practical Application Recommendations'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-accent-600 mb-4\">\n              {locale === 'zh' ? 'å¦‚ä½•å®‰å…¨å°è¯•' : 'How to Try Safely'}\n            </h3>\n            <ol className=\"space-y-2 text-neutral-600 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">1.</span>\n                {locale === 'zh' ? 'ç ”ç©¶æ–¹æ³•çš„ç§‘å­¦ä¾æ®' : 'Research the scientific basis of methods'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">2.</span>\n                {locale === 'zh' ? 'å’¨è¯¢åŒ»ç–—ä¸“ä¸šäººå£«' : 'Consult healthcare professionals'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">3.</span>\n                {locale === 'zh' ? 'ä»æ¸©å’Œçš„æ–¹æ³•å¼€å§‹' : 'Start with gentle methods'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">4.</span>\n                {locale === 'zh' ? 'ç›‘æµ‹èº«ä½“ååº”' : 'Monitor body responses'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">5.</span>\n                {locale === 'zh' ? 'è®°å½•æ•ˆæœå’Œå‰¯ä½œç”¨' : 'Record effects and side effects'}\n              </li>\n            </ol>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-primary-600 mb-4\">\n              {locale === 'zh' ? 'æ¨èçš„èµ·å§‹æ–¹æ³•' : 'Recommended Starting Methods'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ¸©å’Œçš„ç‘œä¼½ç»ƒä¹ ' : 'Gentle yoga practice'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'è‰è¯èŒ¶ï¼ˆæ´‹ç”˜èŠã€ç”Ÿå§œï¼‰' : 'Herbal teas (chamomile, ginger)'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ¸©çƒ­æ•·æ–™' : 'Warm compresses'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ·±å‘¼å¸å’Œå†¥æƒ³' : 'Deep breathing and meditation'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ¸©æ°´æµ´' : 'Warm baths'}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Cultural Sensitivity Note */}\n      <section className=\"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg\">\n        <h3 className=\"font-semibold text-blue-800 mb-3\">\n          {locale === 'zh' ? 'æ–‡åŒ–æ•æ„Ÿæ€§æé†’' : 'Cultural Sensitivity Reminder'}\n        </h3>\n        <p className=\"text-blue-700 text-sm mb-3\">\n          {locale === 'zh'\n            ? 'åœ¨æ¢ç´¢ä¸åŒæ–‡åŒ–çš„ä¼ ç»Ÿç–—æ³•æ—¶ï¼Œé‡è¦çš„æ˜¯è¦ä»¥å°Šé‡å’Œå¼€æ”¾çš„æ€åº¦å¯¹å¾…è¿™äº›çŸ¥è¯†ã€‚é¿å…æ–‡åŒ–æŒªç”¨ï¼Œè€Œæ˜¯è¦ç†è§£å’Œæ¬£èµè¿™äº›ä¼ ç»Ÿçš„æ·±å±‚å«ä¹‰ã€‚'\n            : 'When exploring traditional therapies from different cultures, it\\'s important to approach this knowledge with respect and openness. Avoid cultural appropriation and instead understand and appreciate the deeper meanings of these traditions.'\n          }\n        </p>\n        <ul className=\"space-y-1 text-blue-700 text-sm\">\n          <li>â€¢ {locale === 'zh' ? 'å°Šé‡ä¼ ç»ŸçŸ¥è¯†çš„æ¥æº' : 'Respect the sources of traditional knowledge'}</li>\n          <li>â€¢ {locale === 'zh' ? 'ç†è§£æ–‡åŒ–èƒŒæ™¯å’Œå«ä¹‰' : 'Understand cultural context and meanings'}</li>\n          <li>â€¢ {locale === 'zh' ? 'é¿å…ç®€åŒ–å¤æ‚çš„ä¼ ç»Ÿä½“ç³»' : 'Avoid oversimplifying complex traditional systems'}</li>\n        </ul>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-neutral-200\">\n        <Link \n          href={`/${locale}/health-guide/myths-facts`}\n          className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n        >\n          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          {locale === 'zh' ? 'ä¸Šä¸€ç« ï¼šè¯¯åŒºä¸äº‹å®' : 'Previous: Myths vs Facts'}\n        </Link>\n        \n          <Link\n            href={`/${locale}/health-guide`}\n            className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n          >\n            {locale === 'zh' ? 'è¿”å›æŒ‡å—é¦–é¡µ' : 'Back to Guide Home'}\n            <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n            </svg>\n          </Link>\n        </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/lifestyle/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTranslations } from 'next-intl';\nimport { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { Locale, locales } from '@/i18n';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼ç®¡ç† - ç—›ç»å¥åº·æŒ‡å—' : 'Lifestyle Management - Health Guide';\n  const description = locale === 'zh' \n    ? 'é€šè¿‡é¥®é£Ÿã€è¿åŠ¨å’Œæ—¥å¸¸ä¹ æƒ¯æ”¹å–„ç»æœŸå¥åº·ï¼Œå»ºç«‹é•¿æœŸæœ‰æ•ˆçš„ç—›ç»ç®¡ç†ç­–ç•¥ã€‚'\n    : 'Improve menstrual health through diet, exercise, and daily habits, establishing long-term effective menstrual pain management strategies.';\n  \n  return {\n    title,\n    description,\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function LifestylePage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  // Enable static rendering\n  unstable_setRequestLocale(locale);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Breadcrumb */}\n          <nav className=\"text-sm text-neutral-600\">\n            <Link href={`/${locale}`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'é¦–é¡µ' : 'Home'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <Link href={`/${locale}/health-guide`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'ç—›ç»å¥åº·æŒ‡å—' : 'Health Guide'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <span className=\"text-neutral-800\">\n              {locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼ç®¡ç†' : 'Lifestyle Management'}\n            </span>\n          </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼ç®¡ç†' : 'Lifestyle Management'}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'é€šè¿‡ç§‘å­¦çš„é¥®é£Ÿã€è¿åŠ¨å’Œæ—¥å¸¸ä¹ æƒ¯æ”¹å–„ç»æœŸå¥åº·ï¼Œå»ºç«‹é•¿æœŸæœ‰æ•ˆçš„ç—›ç»ç®¡ç†ç­–ç•¥ã€‚'\n            : 'Improve menstrual health through scientific diet, exercise, and daily habits, establishing long-term effective menstrual pain management strategies.'\n          }\n        </p>\n      </header>\n\n      {/* Nutrition Section */}\n      <section className=\"bg-gradient-to-br from-green-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'è¥å…»ä¸é¥®é£Ÿ' : 'Nutrition and Diet'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-green-600 mb-4\">\n              {locale === 'zh' ? 'æ¨èé£Ÿç‰©' : 'Recommended Foods'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'æŠ—ç‚é£Ÿç‰©' : 'Anti-inflammatory Foods'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'æ·±æµ·é±¼ç±»ã€åšæœã€æ©„æ¦„æ²¹ã€ç»¿å¶è”¬èœ' : 'Deep-sea fish, nuts, olive oil, leafy greens'}\n                </p>\n              </div>\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'å¯Œå«é•çš„é£Ÿç‰©' : 'Magnesium-rich Foods'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'é»‘å·§å…‹åŠ›ã€é¦™è•‰ã€è èœã€æä»' : 'Dark chocolate, bananas, spinach, almonds'}\n                </p>\n              </div>\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'å¯Œå«é“çš„é£Ÿç‰©' : 'Iron-rich Foods'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'ç˜¦è‚‰ã€è±†ç±»ã€æ·±ç»¿è‰²è”¬èœ' : 'Lean meat, legumes, dark green vegetables'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-red-600 mb-4\">\n              {locale === 'zh' ? 'é¿å…é£Ÿç‰©' : 'Foods to Avoid'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'é«˜ç³–é£Ÿç‰©' : 'High-sugar Foods'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'ç³–æœã€ç”œé¥®æ–™ã€ç²¾åˆ¶ç³–' : 'Candy, sweet drinks, refined sugar'}\n                </p>\n              </div>\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'é«˜ç›é£Ÿç‰©' : 'High-sodium Foods'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'åŠ å·¥é£Ÿå“ã€è…Œåˆ¶é£Ÿå“' : 'Processed foods, pickled foods'}\n                </p>\n              </div>\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-1\">\n                  {locale === 'zh' ? 'å’–å•¡å› ' : 'Caffeine'}\n                </h4>\n                <p className=\"text-sm text-neutral-600\">\n                  {locale === 'zh' ? 'è¿‡é‡å’–å•¡ã€æµ“èŒ¶' : 'Excessive coffee, strong tea'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Exercise Section */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'è¿åŠ¨ä¸é”»ç‚¼' : 'Exercise and Physical Activity'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'æœ‰æ°§è¿åŠ¨' : 'Aerobic Exercise'}\n            </h3>\n            <p className=\"text-neutral-600 mb-4 text-sm\">\n              {locale === 'zh'\n                ? 'ä¿ƒè¿›è¡€æ¶²å¾ªç¯ï¼Œé‡Šæ”¾å†…å•¡è‚½ï¼Œè‡ªç„¶ç¼“è§£ç–¼ç—›ã€‚'\n                : 'Promotes blood circulation, releases endorphins, naturally relieves pain.'\n              }\n            </p>\n            <ul className=\"text-sm text-neutral-600 space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'å¿«èµ° 20-30åˆ†é’Ÿ' : 'Brisk walking 20-30 minutes'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ¸¸æ³³' : 'Swimming'}</li>\n              <li>â€¢ {locale === 'zh' ? 'éª‘è‡ªè¡Œè½¦' : 'Cycling'}</li>\n              <li>â€¢ {locale === 'zh' ? 'èˆè¹ˆ' : 'Dancing'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'ç‘œä¼½ä¸ä¼¸å±•' : 'Yoga and Stretching'}\n            </h3>\n            <p className=\"text-neutral-600 mb-4 text-sm\">\n              {locale === 'zh'\n                ? 'æ”¾æ¾è‚Œè‚‰ï¼Œå‡è½»å‹åŠ›ï¼Œæ”¹å–„æŸ”éŸ§æ€§ã€‚'\n                : 'Relaxes muscles, reduces stress, improves flexibility.'\n              }\n            </p>\n            <ul className=\"text-sm text-neutral-600 space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'çŒ«ç‰›å¼' : 'Cat-Cow pose'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å„¿ç«¥å¼' : 'Child\\'s pose'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ‰­è½¬å¼' : 'Twisting poses'}</li>\n              <li>â€¢ {locale === 'zh' ? 'è…¿éƒ¨ä¼¸å±•' : 'Leg stretches'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'æ­£å¿µç»ƒä¹ ' : 'Mindfulness Practice'}\n            </h3>\n            <p className=\"text-neutral-600 mb-4 text-sm\">\n              {locale === 'zh'\n                ? 'å‡è½»å‹åŠ›ï¼Œæ”¹å–„ç–¼ç—›æ„ŸçŸ¥ï¼Œæé«˜æ•´ä½“å¥åº·ã€‚'\n                : 'Reduces stress, improves pain perception, enhances overall well-being.'\n              }\n            </p>\n            <ul className=\"text-sm text-neutral-600 space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'å†¥æƒ³ 10-15åˆ†é’Ÿ' : 'Meditation 10-15 minutes'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ·±å‘¼å¸ç»ƒä¹ ' : 'Deep breathing exercises'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ¸è¿›æ€§è‚Œè‚‰æ”¾æ¾' : 'Progressive muscle relaxation'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ­£å¿µè¡Œèµ°' : 'Mindful walking'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Sleep and Stress Management */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ç¡çœ ä¸å‹åŠ›ç®¡ç†' : 'Sleep and Stress Management'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-blue-600 mb-4\">\n              {locale === 'zh' ? 'ä¼˜è´¨ç¡çœ ' : 'Quality Sleep'}\n            </h3>\n            <ul className=\"space-y-2 text-sm text-neutral-600\">\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'ä¿æŒè§„å¾‹çš„ç¡çœ æ—¶é—´ï¼ˆ7-9å°æ—¶ï¼‰' : 'Maintain regular sleep schedule (7-9 hours)'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'åˆ›é€ èˆ’é€‚çš„ç¡çœ ç¯å¢ƒ' : 'Create comfortable sleep environment'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'ç¡å‰é¿å…ç”µå­è®¾å¤‡' : 'Avoid electronic devices before bed'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'å»ºç«‹ç¡å‰æ”¾æ¾ä»ªå¼' : 'Establish bedtime relaxation routine'}\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-purple-600 mb-4\">\n              {locale === 'zh' ? 'å‹åŠ›ç®¡ç†' : 'Stress Management'}\n            </h3>\n            <ul className=\"space-y-2 text-sm text-neutral-600\">\n              <li className=\"flex items-start\">\n                <span className=\"text-purple-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'è¯†åˆ«å’Œé¿å…å‹åŠ›æº' : 'Identify and avoid stress triggers'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-purple-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'å­¦ä¹ æ”¾æ¾æŠ€å·§' : 'Learn relaxation techniques'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-purple-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'ä¿æŒç¤¾äº¤è”ç³»' : 'Maintain social connections'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-purple-500 mr-2\">â€¢</span>\n                {locale === 'zh' ? 'å¯»æ±‚ä¸“ä¸šå¸®åŠ©ï¼ˆå¦‚éœ€è¦ï¼‰' : 'Seek professional help (if needed)'}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Daily Habits */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'æ—¥å¸¸ä¹ æƒ¯å»ºè®®' : 'Daily Habit Recommendations'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <svg className=\"w-8 h-8 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"font-semibold text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'æ™¨é—´ä¾‹è¡Œ' : 'Morning Routine'}\n            </h3>\n            <p className=\"text-sm text-neutral-600\">\n              {locale === 'zh' ? 'æ¸©æ°´ã€è½»åº¦ä¼¸å±•ã€è¥å…»æ—©é¤' : 'Warm water, light stretching, nutritious breakfast'}\n            </p>\n          </div>\n\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <svg className=\"w-8 h-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\" />\n              </svg>\n            </div>\n            <h3 className=\"font-semibold text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'æ°´åˆ†è¡¥å……' : 'Hydration'}\n            </h3>\n            <p className=\"text-sm text-neutral-600\">\n              {locale === 'zh' ? 'æ¯å¤©8-10æ¯æ°´ï¼Œè‰è¯èŒ¶' : '8-10 glasses of water daily, herbal teas'}\n            </p>\n          </div>\n\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"font-semibold text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'è§„å¾‹ä½œæ¯' : 'Regular Schedule'}\n            </h3>\n            <p className=\"text-sm text-neutral-600\">\n              {locale === 'zh' ? 'å›ºå®šç”¨é¤ã€è¿åŠ¨ã€ç¡çœ æ—¶é—´' : 'Fixed meal, exercise, and sleep times'}\n            </p>\n          </div>\n\n          <div className=\"card text-center\">\n            <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <svg className=\"w-8 h-8 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z\" />\n              </svg>\n            </div>\n            <h3 className=\"font-semibold text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'è‡ªæˆ‘å…³çˆ±' : 'Self-care'}\n            </h3>\n            <p className=\"text-sm text-neutral-600\">\n              {locale === 'zh' ? 'è®°å½•ç—‡çŠ¶ã€å¥–åŠ±è¿›æ­¥' : 'Track symptoms, reward progress'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Implementation Tips */}\n      <section className=\"bg-accent-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n          {locale === 'zh' ? 'å®æ–½å»ºè®®' : 'Implementation Tips'}\n        </h2>\n        <div className=\"bg-white p-6 rounded-lg\">\n          <h3 className=\"font-semibold text-neutral-800 mb-3\">\n            {locale === 'zh' ? 'å¾ªåºæ¸è¿›çš„æ”¹å˜' : 'Gradual Changes'}\n          </h3>\n          <p className=\"text-neutral-700 mb-4\">\n            {locale === 'zh'\n              ? 'ä¸è¦è¯•å›¾ä¸€æ¬¡æ€§æ”¹å˜æ‰€æœ‰ä¹ æƒ¯ã€‚é€‰æ‹©1-2ä¸ªæœ€å®¹æ˜“å®æ–½çš„æ”¹å˜å¼€å§‹ï¼Œå»ºç«‹ä¿¡å¿ƒåå†é€æ­¥æ·»åŠ å…¶ä»–ä¹ æƒ¯ã€‚'\n              : 'Don\\'t try to change all habits at once. Start with 1-2 easiest changes to implement, build confidence, then gradually add other habits.'\n            }\n          </p>\n          <div className=\"grid md:grid-cols-3 gap-4 text-sm\">\n            <div className=\"text-center\">\n              <div className=\"font-semibold text-primary-600 mb-1\">\n                {locale === 'zh' ? 'ç¬¬1-2å‘¨' : 'Week 1-2'}\n              </div>\n              <p className=\"text-neutral-600\">\n                {locale === 'zh' ? 'å»ºç«‹ä¸€ä¸ªæ–°ä¹ æƒ¯' : 'Establish one new habit'}\n              </p>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"font-semibold text-secondary-600 mb-1\">\n                {locale === 'zh' ? 'ç¬¬3-4å‘¨' : 'Week 3-4'}\n              </div>\n              <p className=\"text-neutral-600\">\n                {locale === 'zh' ? 'å·©å›ºå¹¶æ·»åŠ ç¬¬äºŒä¸ª' : 'Consolidate and add second'}\n              </p>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"font-semibold text-accent-600 mb-1\">\n                {locale === 'zh' ? 'ç¬¬5å‘¨+' : 'Week 5+'}\n              </div>\n              <p className=\"text-neutral-600\">\n                {locale === 'zh' ? 'ç»§ç»­æ‰©å±•' : 'Continue expanding'}\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-neutral-200\">\n        <Link \n          href={`/${locale}/health-guide/relief-methods`}\n          className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n        >\n          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          {locale === 'zh' ? 'ä¸Šä¸€ç« ï¼šA-Zç¼“è§£æ–¹æ³•' : 'Previous: A-Z Relief Methods'}\n        </Link>\n        \n          <Link\n            href={`/${locale}/health-guide/medical-care`}\n            className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n          >\n            {locale === 'zh' ? 'ä¸‹ä¸€ç« ï¼šä½•æ—¶å¯»æ±‚å¸®åŠ©' : 'Next: When to Seek Help'}\n            <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </Link>\n        </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/medical-care/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTranslations } from 'next-intl';\nimport { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { Locale, locales } from '@/i18n';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'ä½•æ—¶å¯»æ±‚å¸®åŠ© - ç—›ç»å¥åº·æŒ‡å—' : 'When to Seek Help - Health Guide';\n  const description = locale === 'zh' \n    ? 'è¯†åˆ«éœ€è¦åŒ»ç–—å…³æ³¨çš„ç—‡çŠ¶å’Œæƒ…å†µï¼Œäº†è§£ä½•æ—¶åº”è¯¥å¯»æ±‚ä¸“ä¸šåŒ»ç–—å¸®åŠ©ã€‚'\n    : 'Recognize symptoms and situations that require medical attention, understand when to seek professional medical help.';\n  \n  return {\n    title,\n    description,\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function MedicalCarePage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  // Enable static rendering\n  unstable_setRequestLocale(locale);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Breadcrumb */}\n          <nav className=\"text-sm text-neutral-600\">\n            <Link href={`/${locale}`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'é¦–é¡µ' : 'Home'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <Link href={`/${locale}/health-guide`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'ç—›ç»å¥åº·æŒ‡å—' : 'Health Guide'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <span className=\"text-neutral-800\">\n              {locale === 'zh' ? 'ä½•æ—¶å¯»æ±‚å¸®åŠ©' : 'When to Seek Help'}\n            </span>\n          </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {locale === 'zh' ? 'ä½•æ—¶å¯»æ±‚åŒ»ç–—å¸®åŠ©' : 'When to Seek Medical Help'}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'è¯†åˆ«éœ€è¦åŒ»ç–—å…³æ³¨çš„ç—‡çŠ¶å’Œæƒ…å†µï¼Œäº†è§£ä½•æ—¶åº”è¯¥å¯»æ±‚ä¸“ä¸šåŒ»ç–—å¸®åŠ©ï¼Œç¡®ä¿æ‚¨çš„å¥åº·å®‰å…¨ã€‚'\n            : 'Recognize symptoms and situations that require medical attention, understand when to seek professional medical help to ensure your health and safety.'\n          }\n        </p>\n      </header>\n\n      {/* Emergency Signs */}\n      <section className=\"bg-red-50 border-l-4 border-red-500 p-6 md:p-8 rounded-r-xl\">\n        <h2 className=\"text-2xl font-semibold text-red-800 mb-6\">\n          {locale === 'zh' ? 'ç´§æ€¥è­¦å‘Šä¿¡å·' : 'Emergency Warning Signs'}\n        </h2>\n        <p className=\"text-red-700 mb-6\">\n          {locale === 'zh'\n            ? 'å¦‚æœæ‚¨å‡ºç°ä»¥ä¸‹ä»»ä½•ç—‡çŠ¶ï¼Œè¯·ç«‹å³å¯»æ±‚ç´§æ€¥åŒ»ç–—å¸®åŠ©ï¼š'\n            : 'If you experience any of the following symptoms, seek emergency medical help immediately:'\n          }\n        </p>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-red-800 mb-3\">\n              {locale === 'zh' ? 'ä¸¥é‡ç–¼ç—›ç—‡çŠ¶' : 'Severe Pain Symptoms'}\n            </h3>\n            <ul className=\"space-y-2 text-red-700 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-red-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'çªç„¶å‡ºç°çš„å‰§çƒˆè…¹ç—›' : 'Sudden severe abdominal pain'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-red-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'ç–¼ç—›ä¼´éšé«˜çƒ­ï¼ˆ38.5Â°Cä»¥ä¸Šï¼‰' : 'Pain with high fever (above 38.5Â°C)'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-red-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ— æ³•å¿å—çš„ç–¼ç—›ï¼Œå½±å“å‘¼å¸' : 'Unbearable pain affecting breathing'}\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-red-800 mb-3\">\n              {locale === 'zh' ? 'å…¶ä»–ç´§æ€¥ç—‡çŠ¶' : 'Other Emergency Symptoms'}\n            </h3>\n            <ul className=\"space-y-2 text-red-700 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-red-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'å¤§é‡å‡ºè¡€ï¼ˆæ¯å°æ—¶æ›´æ¢è¶…è¿‡1ç‰‡å«ç”Ÿå·¾ï¼‰' : 'Heavy bleeding (changing more than 1 pad per hour)'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-red-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æŒç»­å‘•åï¼Œæ— æ³•è¿›é£Ÿ' : 'Persistent vomiting, unable to eat'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-red-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ™•å¥æˆ–æ„è¯†æ¨¡ç³Š' : 'Fainting or confusion'}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* When to See a Doctor */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ä½•æ—¶é¢„çº¦åŒ»ç”Ÿ' : 'When to Schedule a Doctor Visit'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'ç–¼ç—›æ¨¡å¼æ”¹å˜' : 'Pain Pattern Changes'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›çªç„¶åŠ é‡' : 'Pain suddenly worsens'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›æŒç»­æ—¶é—´å»¶é•¿' : 'Pain duration increases'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›æ€§è´¨å‘ç”Ÿå˜åŒ–' : 'Pain character changes'}</li>\n              <li>â€¢ {locale === 'zh' ? 'éæœˆç»æœŸä¹Ÿå‡ºç°ç–¼ç—›' : 'Pain occurs outside menstruation'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'æ²»ç–—æ— æ•ˆ' : 'Treatment Ineffective'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li>â€¢ {locale === 'zh' ? 'éå¤„æ–¹è¯ç‰©æ— æ³•ç¼“è§£' : 'OTC medications don\\'t help'}</li>\n              <li>â€¢ {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•æ•ˆæœä¸ä½³' : 'Natural therapies ineffective'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›å½±å“æ—¥å¸¸ç”Ÿæ´»' : 'Pain affects daily life'}</li>\n              <li>â€¢ {locale === 'zh' ? 'éœ€è¦é¢‘ç¹è¯·å‡' : 'Frequent absences needed'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'ä¼´éšç—‡çŠ¶' : 'Accompanying Symptoms'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li>â€¢ {locale === 'zh' ? 'å¼‚å¸¸é˜´é“åˆ†æ³Œç‰©' : 'Abnormal vaginal discharge'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æœˆç»å‘¨æœŸä¸è§„å¾‹' : 'Irregular menstrual cycles'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ€§äº¤ç–¼ç—›' : 'Pain during intercourse'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ’å°¿æˆ–æ’ä¾¿ç–¼ç—›' : 'Pain during urination/defecation'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Preparing for Your Visit */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'å°±è¯Šå‡†å¤‡' : 'Preparing for Your Visit'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-blue-600 mb-4\">\n              {locale === 'zh' ? 'è®°å½•ç—‡çŠ¶' : 'Track Your Symptoms'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'ç–¼ç—›å¼ºåº¦ï¼ˆ1-10åˆ†ï¼‰' : 'Pain intensity (1-10 scale)'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'ç–¼ç—›ä½ç½®å’Œæ€§è´¨' : 'Pain location and character'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æŒç»­æ—¶é—´å’Œé¢‘ç‡' : 'Duration and frequency'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'è§¦å‘å› ç´ å’Œç¼“è§£å› ç´ ' : 'Triggers and relief factors'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æœˆç»å‘¨æœŸè¯¦æƒ…' : 'Menstrual cycle details'}\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-green-600 mb-4\">\n              {locale === 'zh' ? 'å‡†å¤‡é—®é¢˜' : 'Prepare Questions'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æˆ‘çš„ç—‡çŠ¶å¯èƒ½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ' : 'What could be causing my symptoms?'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'éœ€è¦åšå“ªäº›æ£€æŸ¥ï¼Ÿ' : 'What tests do I need?'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æœ‰å“ªäº›æ²»ç–—é€‰æ‹©ï¼Ÿ' : 'What treatment options are available?'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼æ”¹å˜èƒ½å¸®åŠ©å—ï¼Ÿ' : 'Can lifestyle changes help?'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'ä½•æ—¶éœ€è¦å¤è¯Šï¼Ÿ' : 'When should I follow up?'}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Types of Healthcare Providers */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'åŒ»ç–—ä¸“ä¸šäººå£«ç±»å‹' : 'Types of Healthcare Providers'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-primary-600 mb-3\">\n              {locale === 'zh' ? 'å…¨ç§‘åŒ»ç”Ÿ' : 'General Practitioner'}\n            </h3>\n            <p className=\"text-neutral-600 mb-3 text-sm\">\n              {locale === 'zh'\n                ? 'åˆæ­¥è¯„ä¼°å’ŒåŸºç¡€æ²»ç–—ï¼Œé€‚åˆè½»åº¦åˆ°ä¸­åº¦ç—‡çŠ¶ã€‚'\n                : 'Initial assessment and basic treatment, suitable for mild to moderate symptoms.'\n              }\n            </p>\n            <div className=\"text-xs text-neutral-500\">\n              {locale === 'zh' ? 'é€‚ç”¨äºï¼šå¸¸è§„æ£€æŸ¥ã€åˆæ­¥è¯Šæ–­' : 'Good for: Routine check-ups, initial diagnosis'}\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-secondary-600 mb-3\">\n              {locale === 'zh' ? 'å¦‡ç§‘åŒ»ç”Ÿ' : 'Gynecologist'}\n            </h3>\n            <p className=\"text-neutral-600 mb-3 text-sm\">\n              {locale === 'zh'\n                ? 'ä¸“é—¨å¤„ç†å¥³æ€§ç”Ÿæ®–å¥åº·é—®é¢˜ï¼Œé€‚åˆå¤æ‚æˆ–ä¸¥é‡ç—‡çŠ¶ã€‚'\n                : 'Specializes in women\\'s reproductive health, suitable for complex or severe symptoms.'\n              }\n            </p>\n            <div className=\"text-xs text-neutral-500\">\n              {locale === 'zh' ? 'é€‚ç”¨äºï¼šä¸“ä¸šè¯Šæ–­ã€æ‰‹æœ¯æ²»ç–—' : 'Good for: Specialized diagnosis, surgical treatment'}\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-accent-600 mb-3\">\n              {locale === 'zh' ? 'ç–¼ç—›ä¸“ç§‘åŒ»ç”Ÿ' : 'Pain Specialist'}\n            </h3>\n            <p className=\"text-neutral-600 mb-3 text-sm\">\n              {locale === 'zh'\n                ? 'ä¸“é—¨æ²»ç–—æ…¢æ€§ç–¼ç—›ï¼Œé€‚åˆéš¾æ²»æ€§ç—›ç»ã€‚'\n                : 'Specializes in chronic pain treatment, suitable for refractory dysmenorrhea.'\n              }\n            </p>\n            <div className=\"text-xs text-neutral-500\">\n              {locale === 'zh' ? 'é€‚ç”¨äºï¼šæ…¢æ€§ç–¼ç—›ç®¡ç†' : 'Good for: Chronic pain management'}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* What to Expect */}\n      <section className=\"bg-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'å°±è¯Šæ—¶çš„æœŸæœ›' : 'What to Expect During Your Visit'}\n        </h2>\n        \n        <div className=\"space-y-6\">\n          <div className=\"flex items-start\">\n            <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-4 mt-1\">\n              <span className=\"text-primary-600 font-semibold text-sm\">1</span>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-neutral-800 mb-2\">\n                {locale === 'zh' ? 'ç—…å²è¯¢é—®' : 'Medical History'}\n              </h3>\n              <p className=\"text-neutral-600 text-sm\">\n                {locale === 'zh'\n                  ? 'åŒ»ç”Ÿä¼šè¯¦ç»†è¯¢é—®æ‚¨çš„ç—‡çŠ¶ã€æœˆç»å²ã€å®¶æ—å²å’Œæ—¢å¾€æ²»ç–—æƒ…å†µã€‚'\n                  : 'The doctor will ask detailed questions about your symptoms, menstrual history, family history, and previous treatments.'\n                }\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex items-start\">\n            <div className=\"w-8 h-8 bg-secondary-100 rounded-full flex items-center justify-center mr-4 mt-1\">\n              <span className=\"text-secondary-600 font-semibold text-sm\">2</span>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-neutral-800 mb-2\">\n                {locale === 'zh' ? 'ä½“æ ¼æ£€æŸ¥' : 'Physical Examination'}\n              </h3>\n              <p className=\"text-neutral-600 text-sm\">\n                {locale === 'zh'\n                  ? 'å¯èƒ½åŒ…æ‹¬è…¹éƒ¨æ£€æŸ¥å’Œç›†è…”æ£€æŸ¥ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚'\n                  : 'May include abdominal examination and pelvic examination (if necessary).'\n                }\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex items-start\">\n            <div className=\"w-8 h-8 bg-accent-100 rounded-full flex items-center justify-center mr-4 mt-1\">\n              <span className=\"text-accent-600 font-semibold text-sm\">3</span>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-neutral-800 mb-2\">\n                {locale === 'zh' ? 'è¯Šæ–­å’Œæ²»ç–—è®¡åˆ’' : 'Diagnosis and Treatment Plan'}\n              </h3>\n              <p className=\"text-neutral-600 text-sm\">\n                {locale === 'zh'\n                  ? 'åŒ»ç”Ÿä¼šè§£é‡Šå¯èƒ½çš„è¯Šæ–­ï¼Œè®¨è®ºæ²»ç–—é€‰æ‹©ï¼Œå¹¶åˆ¶å®šä¸ªæ€§åŒ–æ²»ç–—è®¡åˆ’ã€‚'\n                  : 'The doctor will explain possible diagnoses, discuss treatment options, and develop a personalized treatment plan.'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Red Flags */}\n      <section className=\"bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-r-lg\">\n        <h3 className=\"font-semibold text-yellow-800 mb-3\">\n          {locale === 'zh' ? 'é‡è¦æé†’' : 'Important Reminders'}\n        </h3>\n        <ul className=\"space-y-2 text-yellow-700 text-sm\">\n          <li className=\"flex items-start\">\n            <span className=\"text-yellow-500 mr-2 mt-1\">â€¢</span>\n            {locale === 'zh' ? 'ä¸è¦å› ä¸º\"è¿™æ˜¯æ­£å¸¸çš„\"è€Œå¿½è§†ä¸¥é‡ç–¼ç—›' : 'Don\\'t ignore severe pain because \"it\\'s normal\"'}\n          </li>\n          <li className=\"flex items-start\">\n            <span className=\"text-yellow-500 mr-2 mt-1\">â€¢</span>\n            {locale === 'zh' ? 'ç›¸ä¿¡è‡ªå·±çš„èº«ä½“æ„Ÿå—' : 'Trust your body\\'s signals'}\n          </li>\n          <li className=\"flex items-start\">\n            <span className=\"text-yellow-500 mr-2 mt-1\">â€¢</span>\n            {locale === 'zh' ? 'å¦‚æœç¬¬ä¸€ä½åŒ»ç”Ÿæ²¡æœ‰è®¤çœŸå¯¹å¾…æ‚¨çš„ç—‡çŠ¶ï¼Œå¯»æ±‚ç¬¬äºŒæ„è§' : 'If the first doctor doesn\\'t take your symptoms seriously, seek a second opinion'}\n          </li>\n          <li className=\"flex items-start\">\n            <span className=\"text-yellow-500 mr-2 mt-1\">â€¢</span>\n            {locale === 'zh' ? 'æ—©æœŸè¯Šæ–­å’Œæ²»ç–—é€šå¸¸æ•ˆæœæ›´å¥½' : 'Early diagnosis and treatment usually work better'}\n          </li>\n        </ul>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-neutral-200\">\n        <Link \n          href={`/${locale}/health-guide/lifestyle`}\n          className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n        >\n          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          {locale === 'zh' ? 'ä¸Šä¸€ç« ï¼šç”Ÿæ´»æ–¹å¼ç®¡ç†' : 'Previous: Lifestyle Management'}\n        </Link>\n        \n          <Link\n            href={`/${locale}/health-guide/myths-facts`}\n            className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n          >\n            {locale === 'zh' ? 'ä¸‹ä¸€ç« ï¼šè¯¯åŒºä¸äº‹å®' : 'Next: Myths vs Facts'}\n            <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </Link>\n        </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/myths-facts/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTranslations } from 'next-intl';\nimport { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { Locale, locales } from '@/i18n';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'è¯¯åŒºä¸äº‹å® - ç—›ç»å¥åº·æŒ‡å—' : 'Myths vs Facts - Health Guide';\n  const description = locale === 'zh' \n    ? 'æ¾„æ¸…å…³äºç»æœŸå¥åº·çš„å¸¸è§è¯¯è§£ï¼Œç”¨ç§‘å­¦äº‹å®æ›¿ä»£é”™è¯¯è§‚å¿µã€‚'\n    : 'Clarify common misconceptions about menstrual health, replace false beliefs with scientific facts.';\n  \n  return {\n    title,\n    description,\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function MythsFactsPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  // Enable static rendering\n  unstable_setRequestLocale(locale);\n\n  const mythsFacts = [\n    {\n      myth: locale === 'zh' \n        ? 'ç—›ç»æ˜¯æ­£å¸¸çš„ï¼Œå¥³æ€§å¿…é¡»å¿å—'\n        : 'Period pain is normal and women must endure it',\n      fact: locale === 'zh'\n        ? 'è™½ç„¶è½»å¾®çš„ä¸é€‚æ˜¯å¸¸è§çš„ï¼Œä½†ä¸¥é‡çš„ç—›ç»ä¸æ˜¯æ­£å¸¸çš„ï¼Œæœ‰å¾ˆå¤šæœ‰æ•ˆçš„æ²»ç–—æ–¹æ³•å¯ä»¥ç¼“è§£ç–¼ç—›ã€‚'\n        : 'While mild discomfort is common, severe period pain is not normal, and there are many effective treatments available to relieve pain.',\n      category: locale === 'zh' ? 'ç–¼ç—›è®¤çŸ¥' : 'Pain Perception'\n    },\n    {\n      myth: locale === 'zh'\n        ? 'è¿åŠ¨ä¼šåŠ é‡ç—›ç»'\n        : 'Exercise makes period pain worse',\n      fact: locale === 'zh'\n        ? 'é€‚åº¦çš„è¿åŠ¨å®é™…ä¸Šå¯ä»¥ç¼“è§£ç—›ç»ï¼Œå› ä¸ºå®ƒä¿ƒè¿›è¡€æ¶²å¾ªç¯å¹¶é‡Šæ”¾å¤©ç„¶çš„æ­¢ç—›ç‰©è´¨å†…å•¡è‚½ã€‚'\n        : 'Moderate exercise can actually relieve period pain by promoting blood circulation and releasing natural pain-relieving endorphins.',\n      category: locale === 'zh' ? 'è¿åŠ¨ä¸å¥åº·' : 'Exercise & Health'\n    },\n    {\n      myth: locale === 'zh'\n        ? 'çƒ­æ•·æ²¡æœ‰ç§‘å­¦ä¾æ®'\n        : 'Heat therapy has no scientific basis',\n      fact: locale === 'zh'\n        ? 'ç ”ç©¶è¡¨æ˜ï¼Œçƒ­æ•·å¯ä»¥æ”¾æ¾å­å®«è‚Œè‚‰ï¼Œå‡å°‘ç—‰æŒ›ï¼Œå…¶æ•ˆæœä¸æŸäº›æ­¢ç—›è¯ç›¸å½“ã€‚'\n        : 'Studies show that heat therapy can relax uterine muscles and reduce cramping, with effects comparable to some pain medications.',\n      category: locale === 'zh' ? 'æ²»ç–—æ–¹æ³•' : 'Treatment Methods'\n    },\n    {\n      myth: locale === 'zh'\n        ? 'ç—›ç»ä¼šéšç€å¹´é¾„è‡ªç„¶æ¶ˆå¤±'\n        : 'Period pain naturally disappears with age',\n      fact: locale === 'zh'\n        ? 'è™½ç„¶æœ‰äº›å¥³æ€§çš„ç—›ç»å¯èƒ½ä¼šéšå¹´é¾„å‡è½»ï¼Œä½†è¿™å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰äººã€‚ç»§å‘æ€§ç—›ç»å¯èƒ½éšå¹´é¾„åŠ é‡ã€‚'\n        : 'While some women may experience less pain with age, this doesn\\'t apply to everyone. Secondary dysmenorrhea may worsen with age.',\n      category: locale === 'zh' ? 'å¹´é¾„å› ç´ ' : 'Age Factors'\n    },\n    {\n      myth: locale === 'zh'\n        ? 'åªæœ‰è¯ç‰©æ‰èƒ½æœ‰æ•ˆç¼“è§£ç—›ç»'\n        : 'Only medications can effectively relieve period pain',\n      fact: locale === 'zh'\n        ? 'è®¸å¤šéè¯ç‰©æ–¹æ³•å¦‚ç‘œä¼½ã€æŒ‰æ‘©ã€é¥®é£Ÿè°ƒæ•´ã€è‰è¯èŒ¶ç­‰éƒ½æœ‰ç§‘å­¦è¯æ®æ”¯æŒå…¶ç¼“è§£ç—›ç»çš„æ•ˆæœã€‚'\n        : 'Many non-medication approaches like yoga, massage, dietary changes, and herbal teas have scientific evidence supporting their effectiveness in relieving period pain.',\n      category: locale === 'zh' ? 'æ²»ç–—é€‰æ‹©' : 'Treatment Options'\n    },\n    {\n      myth: locale === 'zh'\n        ? 'ç—›ç»æ˜¯å¿ƒç†ä½œç”¨'\n        : 'Period pain is psychological',\n      fact: locale === 'zh'\n        ? 'ç—›ç»æœ‰æ˜ç¡®çš„ç”Ÿç†åŸºç¡€ï¼Œä¸»è¦ç”±å‰åˆ—è…ºç´ å¼•èµ·çš„å­å®«æ”¶ç¼©å¯¼è‡´ã€‚è¿™æ˜¯çœŸå®çš„ç”Ÿç†ç–¼ç—›ã€‚'\n        : 'Period pain has a clear physiological basis, mainly caused by uterine contractions triggered by prostaglandins. This is real physical pain.',\n      category: locale === 'zh' ? 'ç–¼ç—›æœ¬è´¨' : 'Nature of Pain'\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Breadcrumb */}\n          <nav className=\"text-sm text-neutral-600\">\n            <Link href={`/${locale}`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'é¦–é¡µ' : 'Home'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <Link href={`/${locale}/health-guide`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'ç—›ç»å¥åº·æŒ‡å—' : 'Health Guide'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <span className=\"text-neutral-800\">\n              {locale === 'zh' ? 'è¯¯åŒºä¸äº‹å®' : 'Myths vs Facts'}\n            </span>\n          </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {locale === 'zh' ? 'è¯¯åŒºä¸äº‹å®' : 'Myths vs Facts'}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'æ¾„æ¸…å…³äºç»æœŸå¥åº·çš„å¸¸è§è¯¯è§£ï¼Œç”¨ç§‘å­¦äº‹å®æ›¿ä»£é”™è¯¯è§‚å¿µï¼Œå¸®åŠ©æ‚¨åšå‡ºæ˜æ™ºçš„å¥åº·å†³ç­–ã€‚'\n            : 'Clarify common misconceptions about menstrual health, replace false beliefs with scientific facts to help you make informed health decisions.'\n          }\n        </p>\n      </header>\n\n      {/* Introduction */}\n      <section className=\"bg-gradient-to-br from-primary-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n          {locale === 'zh' ? 'ä¸ºä»€ä¹ˆæ¾„æ¸…è¯¯åŒºå¾ˆé‡è¦ï¼Ÿ' : 'Why Clarifying Myths Matters'}\n        </h2>\n        <p className=\"text-neutral-700 leading-relaxed mb-4\">\n          {locale === 'zh'\n            ? 'å…³äºç»æœŸå¥åº·çš„é”™è¯¯ä¿¡æ¯å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„ç—›è‹¦ã€å»¶è¯¯æ²»ç–—ï¼Œç”šè‡³å½±å“å¥³æ€§çš„ç”Ÿæ´»è´¨é‡ã€‚é€šè¿‡äº†è§£ç§‘å­¦äº‹å®ï¼Œæ‚¨å¯ä»¥ï¼š'\n            : 'Misinformation about menstrual health can lead to unnecessary suffering, delayed treatment, and even impact women\\'s quality of life. By understanding scientific facts, you can:'\n          }\n        </p>\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <ul className=\"space-y-2 text-neutral-700\">\n            <li className=\"flex items-start\">\n              <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'åšå‡ºæ›´å¥½çš„å¥åº·å†³ç­–' : 'Make better health decisions'}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'åŠæ—¶å¯»æ±‚é€‚å½“çš„æ²»ç–—' : 'Seek appropriate treatment promptly'}\n            </li>\n          </ul>\n          <ul className=\"space-y-2 text-neutral-700\">\n            <li className=\"flex items-start\">\n              <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'é¿å…æ— æ•ˆæˆ–æœ‰å®³çš„åšæ³•' : 'Avoid ineffective or harmful practices'}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n              {locale === 'zh' ? 'æé«˜æ•´ä½“ç”Ÿæ´»è´¨é‡' : 'Improve overall quality of life'}\n            </li>\n          </ul>\n        </div>\n      </section>\n\n      {/* Myths vs Facts */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-8 text-center\">\n          {locale === 'zh' ? 'å¸¸è§è¯¯åŒºæ¾„æ¸…' : 'Common Myth Clarifications'}\n        </h2>\n        \n        <div className=\"space-y-6\">\n          {mythsFacts.map((item, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"mb-4\">\n                <span className=\"inline-block px-3 py-1 bg-secondary-100 text-secondary-700 rounded-full text-xs font-medium\">\n                  {item.category}\n                </span>\n              </div>\n              \n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div className=\"bg-red-50 p-4 rounded-lg border-l-4 border-red-400\">\n                  <div className=\"flex items-center mb-2\">\n                    <svg className=\"w-5 h-5 text-red-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                    <h3 className=\"font-semibold text-red-800\">\n                      {locale === 'zh' ? 'è¯¯åŒº' : 'Myth'}\n                    </h3>\n                  </div>\n                  <p className=\"text-red-700 text-sm\">\n                    {item.myth}\n                  </p>\n                </div>\n\n                <div className=\"bg-green-50 p-4 rounded-lg border-l-4 border-green-400\">\n                  <div className=\"flex items-center mb-2\">\n                    <svg className=\"w-5 h-5 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                    </svg>\n                    <h3 className=\"font-semibold text-green-800\">\n                      {locale === 'zh' ? 'äº‹å®' : 'Fact'}\n                    </h3>\n                  </div>\n                  <p className=\"text-green-700 text-sm\">\n                    {item.fact}\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Cultural Myths */}\n      <section className=\"bg-gradient-to-br from-purple-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'æ–‡åŒ–ç›¸å…³çš„è¯¯åŒº' : 'Culture-Related Myths'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-purple-600 mb-4\">\n              {locale === 'zh' ? 'ä¼ ç»Ÿè§‚å¿µ' : 'Traditional Beliefs'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"border-l-4 border-red-300 pl-4\">\n                <p className=\"text-sm text-neutral-600 mb-1\">\n                  <strong>{locale === 'zh' ? 'è¯¯åŒºï¼š' : 'Myth:'}</strong>\n                  {locale === 'zh' ? 'ç»æœŸä¸èƒ½æ´—å¤´ã€æ´—æ¾¡' : 'Cannot wash hair or bathe during menstruation'}\n                </p>\n                <p className=\"text-xs text-neutral-500\">\n                  {locale === 'zh' ? 'äº‹å®ï¼šä¿æŒæ¸…æ´æœ‰åŠ©äºå¥åº·å’Œèˆ’é€‚' : 'Fact: Maintaining cleanliness helps health and comfort'}\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-red-300 pl-4\">\n                <p className=\"text-sm text-neutral-600 mb-1\">\n                  <strong>{locale === 'zh' ? 'è¯¯åŒºï¼š' : 'Myth:'}</strong>\n                  {locale === 'zh' ? 'ç»æœŸä¸èƒ½è¿åŠ¨' : 'Cannot exercise during menstruation'}\n                </p>\n                <p className=\"text-xs text-neutral-500\">\n                  {locale === 'zh' ? 'äº‹å®ï¼šé€‚åº¦è¿åŠ¨æœ‰åŠ©äºç¼“è§£ç—‡çŠ¶' : 'Fact: Moderate exercise helps relieve symptoms'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-blue-600 mb-4\">\n              {locale === 'zh' ? 'ç°ä»£è¯¯è§£' : 'Modern Misconceptions'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"border-l-4 border-red-300 pl-4\">\n                <p className=\"text-sm text-neutral-600 mb-1\">\n                  <strong>{locale === 'zh' ? 'è¯¯åŒºï¼š' : 'Myth:'}</strong>\n                  {locale === 'zh' ? 'æ­¢ç—›è¯ä¼šæˆç˜¾' : 'Pain medications are addictive'}\n                </p>\n                <p className=\"text-xs text-neutral-500\">\n                  {locale === 'zh' ? 'äº‹å®ï¼šæŒ‰åŒ»å˜±ä½¿ç”¨éå¤„æ–¹æ­¢ç—›è¯æ˜¯å®‰å…¨çš„' : 'Fact: Using OTC pain medications as directed is safe'}\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-red-300 pl-4\">\n                <p className=\"text-sm text-neutral-600 mb-1\">\n                  <strong>{locale === 'zh' ? 'è¯¯åŒºï¼š' : 'Myth:'}</strong>\n                  {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•æ²¡æœ‰å‰¯ä½œç”¨' : 'Natural remedies have no side effects'}\n                </p>\n                <p className=\"text-xs text-neutral-500\">\n                  {locale === 'zh' ? 'äº‹å®ï¼šä»»ä½•æ²»ç–—éƒ½å¯èƒ½æœ‰å‰¯ä½œç”¨ï¼Œéœ€è¦è°¨æ…ä½¿ç”¨' : 'Fact: Any treatment can have side effects, use with caution'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Evidence-Based Information */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'å¦‚ä½•è¯†åˆ«å¯é ä¿¡æ¯' : 'How to Identify Reliable Information'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'å¯é æ¥æº' : 'Reliable Sources'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li>â€¢ {locale === 'zh' ? 'åŒè¡Œè¯„è®®çš„åŒ»å­¦æœŸåˆŠ' : 'Peer-reviewed medical journals'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æƒå¨åŒ»ç–—æœºæ„' : 'Authoritative medical institutions'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ä¸“ä¸šåŒ»ç–—ç½‘ç«™' : 'Professional medical websites'}</li>\n              <li>â€¢ {locale === 'zh' ? 'åˆæ ¼çš„åŒ»ç–—ä¸“ä¸šäººå£«' : 'Qualified healthcare professionals'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'è­¦æƒ•ä¿¡å·' : 'Warning Signs'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li>â€¢ {locale === 'zh' ? 'å£°ç§°\"å¥‡è¿¹æ²»æ„ˆ\"' : 'Claims of \"miracle cures\"'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ç¼ºä¹ç§‘å­¦è¯æ®' : 'Lack of scientific evidence'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ä¸ªäººè½¶äº‹ä½œä¸ºè¯æ®' : 'Personal anecdotes as evidence'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ¨é”€ç‰¹å®šäº§å“' : 'Promoting specific products'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'éªŒè¯æ–¹æ³•' : 'Verification Methods'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li>â€¢ {locale === 'zh' ? 'æŸ¥çœ‹å¤šä¸ªæ¥æº' : 'Check multiple sources'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å¯»æ‰¾ç§‘å­¦ç ”ç©¶æ”¯æŒ' : 'Look for scientific research support'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å’¨è¯¢åŒ»ç–—ä¸“ä¸šäººå£«' : 'Consult healthcare professionals'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ä¿æŒæ‰¹åˆ¤æ€§æ€ç»´' : 'Maintain critical thinking'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Action Steps */}\n      <section className=\"bg-accent-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'è¡ŒåŠ¨å»ºè®®' : 'Action Steps'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-accent-600 mb-4\">\n              {locale === 'zh' ? 'ä¸ªäººè¡ŒåŠ¨' : 'Personal Actions'}\n            </h3>\n            <ol className=\"space-y-2 text-neutral-600 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">1.</span>\n                {locale === 'zh' ? 'è´¨ç–‘æ‚¨å¬åˆ°çš„å…³äºç»æœŸçš„\"å¸¸è¯†\"' : 'Question \"common knowledge\" about periods you hear'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">2.</span>\n                {locale === 'zh' ? 'å¯»æ‰¾å¯é çš„åŒ»å­¦ä¿¡æ¯æ¥æº' : 'Seek reliable medical information sources'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">3.</span>\n                {locale === 'zh' ? 'ä¸åŒ»ç–—ä¸“ä¸šäººå£«è®¨è®ºæ‚¨çš„ç–‘è™‘' : 'Discuss your concerns with healthcare professionals'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-accent-500 mr-2 mt-1 font-semibold\">4.</span>\n                {locale === 'zh' ? 'åˆ†äº«å‡†ç¡®ä¿¡æ¯ï¼Œå¸®åŠ©ä»–äºº' : 'Share accurate information to help others'}\n              </li>\n            </ol>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-primary-600 mb-4\">\n              {locale === 'zh' ? 'æ•™è‚²ä»–äºº' : 'Educating Others'}\n            </h3>\n            <ul className=\"space-y-2 text-neutral-600 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'ä¸æœ‹å‹å’Œå®¶äººåˆ†äº«ç§‘å­¦äº‹å®' : 'Share scientific facts with friends and family'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'çº æ­£ç¤¾äº¤åª’ä½“ä¸Šçš„é”™è¯¯ä¿¡æ¯' : 'Correct misinformation on social media'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'æ”¯æŒç»æœŸå¥åº·æ•™è‚²' : 'Support menstrual health education'}\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-primary-500 mr-2 mt-1\">â€¢</span>\n                {locale === 'zh' ? 'é¼“åŠ±å¼€æ”¾è®¨è®º' : 'Encourage open discussions'}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-neutral-200\">\n        <Link \n          href={`/${locale}/health-guide/medical-care`}\n          className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n        >\n          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          {locale === 'zh' ? 'ä¸Šä¸€ç« ï¼šä½•æ—¶å¯»æ±‚å¸®åŠ©' : 'Previous: When to Seek Help'}\n        </Link>\n        \n          <Link\n            href={`/${locale}/health-guide/global-perspectives`}\n            className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n          >\n            {locale === 'zh' ? 'ä¸‹ä¸€ç« ï¼šå…¨çƒè§†è§’' : 'Next: Global Perspectives'}\n            <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </Link>\n        </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":53,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport StructuredData from '@/components/StructuredData';\nimport { Locale, locales } from '@/i18n';\nimport BottomRecommendations from '@/components/BottomRecommendations';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'healthGuidePage' });\n\n  return {\n    title: t('title'),\n    description: t('description'),\n        keywords: t('keywords'),\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}/health-guide`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh/health-guide',\n        'en-US': 'https://www.periodhub.health/en/health-guide',\n        'x-default': 'https://www.periodhub.health/zh/health-guide',\n      },\n    },\n    openGraph: {\n      title: t('title'),\n      description: t('description'),\n      type: 'website',\n      locale: locale,\n    },\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function HealthGuidePage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  // Enable static rendering\n  unstable_setRequestLocale(locale);\n\n  const t = await getTranslations({ locale, namespace: 'healthGuidePage' });\n  const commonT = await getTranslations({ locale, namespace: 'common' });\n\n  const guideChapters = [\n    {\n      id: 'understanding-pain',\n      title: t('sections.understandingPain.title'),\n      description: t('sections.understandingPain.description'),\n      href: `/${locale}/health-guide/understanding-pain`,\n      icon: 'ğŸ§ ',\n      cta: t('sections.understandingPain.cta')\n    },\n    {\n      id: 'relief-methods-az',\n      title: t('sections.reliefMethods.title'),\n      description: t('sections.reliefMethods.description'),\n      href: `/${locale}/health-guide/relief-methods`,\n      icon: 'ğŸ“š',\n      cta: t('sections.reliefMethods.cta')\n    },\n    {\n      id: 'lifestyle-management',\n      title: t('sections.lifestyleManagement.title'),\n      description: t('sections.lifestyleManagement.description'),\n      href: `/${locale}/health-guide/lifestyle`,\n      icon: 'ğŸŒ±',\n      cta: t('sections.lifestyleManagement.cta')\n    },\n    {\n      id: 'when-seek-help',\n      title: t('sections.whenSeekHelp.title'),\n      description: t('sections.whenSeekHelp.description'),\n      href: `/${locale}/health-guide/medical-care`,\n      icon: 'ğŸ¥',\n      cta: t('sections.whenSeekHelp.cta')\n    },\n    {\n      id: 'myths-facts',\n      title: t('sections.mythsFacts.title'),\n      description: t('sections.mythsFacts.description'),\n      href: `/${locale}/health-guide/myths-facts`,\n      icon: 'ğŸ’¡',\n      cta: t('sections.mythsFacts.cta')\n    },\n    {\n      id: 'global-perspectives',\n      title: t('sections.globalPerspective.title'),\n      description: t('sections.globalPerspective.description'),\n      href: `/${locale}/health-guide/global-perspectives`,\n      icon: 'ğŸŒ',\n      cta: t('sections.globalPerspective.cta')\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      {/* SEOç»“æ„åŒ–æ•°æ® */}\n      <StructuredData\n        type=\"healthTopicPage\"\n        title={t('title')}\n        description={t('description')}\n        url={`https://www.periodhub.health/${locale}/health-guide`}\n      />\n      \n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Page Header */}\n          <header className=\"text-center\">\n            <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n              {t('hero.title')}\n            </h1>\n            <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n              {t('hero.description')}\n            </p>\n          </header>\n\n      {/* Introduction Section */}\n      <section className=\"bg-gradient-to-br from-primary-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n            {t('whyGuide.title')}\n          </h2>\n          <p className=\"text-neutral-700 leading-relaxed mb-4\">\n            {t('whyGuide.description')}\n          </p>\n          <p className=\"text-neutral-700 leading-relaxed mb-6\">\n            {t('hero.description')}\n          </p>\n          \n          {/* å¿«é€Ÿè®¿é—®ç›¸å…³å·¥å…· */}\n          <div className=\"bg-white rounded-lg p-4 border border-primary-200\">\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n              {t('tools.title')}\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <Link href={`/${locale}/interactive-tools/symptom-assessment`} className=\"flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors group\">\n                <div className=\"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3\">\n                  <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <div className=\"font-medium text-blue-700 group-hover:text-blue-800\">\n                    {t('tools.painAssessment.title')}\n                  </div>\n                  <div className=\"text-xs text-blue-600\">\n                    {t('tools.painAssessment.description')}\n                  </div>\n                </div>\n              </Link>\n              \n              <Link href={`/${locale}/interactive-tools/pain-tracker`} className=\"flex items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors group\">\n                <div className=\"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center mr-3\">\n                  <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                  </svg>\n                </div>\n                <div>\n                  <div className=\"font-medium text-green-700 group-hover:text-green-800\">\n                    {t('tools.painTracker.title')}\n                  </div>\n                  <div className=\"text-xs text-green-600\">\n                    {t('tools.painTracker.description')}\n                  </div>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Medical Principles Section */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"max-w-6xl mx-auto\">\n          <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6 text-center\">\n            {t('medicalPrinciples.title')}\n          </h2>\n          <p className=\"text-neutral-700 text-center mb-8 max-w-4xl mx-auto\">\n            {t('medicalPrinciples.description')}\n          </p>\n\n          {/* Anatomy Overview */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\n            <div className=\"grid lg:grid-cols-2 gap-8 items-center\">\n              <div>\n                <picture>\n                  <source media=\"(min-width: 768px)\" srcSet=\"/images/medical/female_reproductive_system_anatomy_800x800.webp\" type=\"image/webp\" />\n                  <source media=\"(min-width: 768px)\" srcSet=\"/images/medical/female_reproductive_system_anatomy_800x800.png\" type=\"image/png\" />\n                  <source media=\"(max-width: 767px)\" srcSet=\"/images/medical/female_reproductive_system_anatomy_400x400.webp\" type=\"image/webp\" />\n                  <source media=\"(max-width: 767px)\" srcSet=\"/images/medical/female_reproductive_system_anatomy_400x400.png\" type=\"image/png\" />\n                  <img \n                    src=\"/images/medical/female_reproductive_system_anatomy_800x800.png\" \n                    alt={t('medicalPrinciples.anatomy.imageAlt')}\n                    className=\"w-full h-auto rounded-lg shadow-md\"\n                    loading=\"lazy\"\n                  />\n                </picture>\n              </div>\n              \n              <div>\n                <h3 className=\"text-xl font-bold mb-4 text-indigo-700\">\n                  {t('medicalPrinciples.anatomy.title')}\n                </h3>\n                \n                <div className=\"space-y-3\">\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                    <h4 className=\"font-semibold text-red-700 mb-1\">\n                      {t('medicalPrinciples.anatomy.uterus.title')}\n                    </h4>\n                    <p className=\"text-sm text-red-600\">\n                      {t('medicalPrinciples.anatomy.uterus.description')}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-3\">\n                    <h4 className=\"font-semibold text-purple-700 mb-1\">\n                      {t('medicalPrinciples.anatomy.endometrium.title')}\n                    </h4>\n                    <p className=\"text-sm text-purple-600\">\n                      {t('medicalPrinciples.anatomy.endometrium.description')}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                    <h4 className=\"font-semibold text-blue-700 mb-1\">\n                      {t('medicalPrinciples.anatomy.ovaries.title')}\n                    </h4>\n                    <p className=\"text-sm text-blue-600\">\n                      {t('medicalPrinciples.anatomy.ovaries.description')}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Pathophysiology */}\n          <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n            {/* Prostaglandin Mechanism */}\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\n              <h3 className=\"text-lg font-bold mb-4 text-red-700\">\n                {t('medicalPrinciples.prostaglandinMechanism.title')}\n              </h3>\n              \n              <div className=\"space-y-3 text-sm\">\n                <div className=\"flex items-start\">\n                  <span className=\"bg-red-500 text-white w-5 h-5 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">1</span>\n                  <div>\n                    <strong>{t('medicalPrinciples.prostaglandinMechanism.molecularEffects.enzymeActivation.title')}</strong>\n                    {t('medicalPrinciples.prostaglandinMechanism.molecularEffects.enzymeActivation.description')}\n                  </div>\n                </div>\n                <div className=\"flex items-start\">\n                  <span className=\"bg-red-500 text-white w-5 h-5 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">2</span>\n                  <div>\n                    <strong>{t('medicalPrinciples.prostaglandinMechanism.molecularEffects.synthesisPathway.title')}</strong>\n                    {t('medicalPrinciples.prostaglandinMechanism.molecularEffects.synthesisPathway.description')}\n                  </div>\n                </div>\n                <div className=\"flex items-start\">\n                  <span className=\"bg-red-500 text-white w-5 h-5 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">3</span>\n                  <div>\n                    <strong>{t('medicalPrinciples.prostaglandinMechanism.molecularEffects.mainProducts.title')}</strong>\n                    {t('medicalPrinciples.prostaglandinMechanism.molecularEffects.mainProducts.description')}\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"mt-4 space-y-3\">\n                <div className=\"p-3 bg-red-50 rounded\">\n                  <p className=\"text-xs text-red-600\">\n                    <strong>{t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.title')}</strong>\n                  </p>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <div className=\"bg-red-50 border border-red-200 rounded p-3\">\n                    <strong className=\"text-red-700 text-xs\">{t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.uterineContraction.title')}</strong>\n                    <p className=\"text-xs text-red-600 mt-1\">\n                      {t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.uterineContraction.description')}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-orange-50 border border-orange-200 rounded p-3\">\n                    <strong className=\"text-orange-700 text-xs\">{t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.vasoconstriction.title')}</strong>\n                    <p className=\"text-xs text-orange-600 mt-1\">\n                      {t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.vasoconstriction.description')}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded p-3\">\n                    <strong className=\"text-yellow-700 text-xs\">{t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.neuralSensitization.title')}</strong>\n                    <p className=\"text-xs text-yellow-600 mt-1\">\n                      {t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.neuralSensitization.description')}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-green-50 border border-green-200 rounded p-3\">\n                    <strong className=\"text-green-700 text-xs\">{t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.inflammatoryResponse.title')}</strong>\n                    <p className=\"text-xs text-green-600 mt-1\">\n                      {t('medicalPrinciples.prostaglandinMechanism.physiologicalEffects.inflammatoryResponse.description')}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Hormonal Control */}\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\n              <h3 className=\"text-lg font-bold mb-4 text-purple-700\">\n                {t('medicalPrinciples.hormonalControl.title')}\n              </h3>\n              \n              <div className=\"space-y-4\">\n                <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-3\">\n                  <h4 className=\"font-semibold text-purple-700 mb-2 text-sm\">\n                    {t('medicalPrinciples.hormonalControl.estrogen.title')}\n                  </h4>\n                  <ul className=\"text-xs space-y-1 text-purple-600\">\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.estrogen.promotesThickening')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.estrogen.increasesSensitivity')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.estrogen.peaksBeforeOvulation')}</li>\n                  </ul>\n                </div>\n                \n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                  <h4 className=\"font-semibold text-blue-700 mb-2 text-sm\">\n                    {t('medicalPrinciples.hormonalControl.progesterone.title')}\n                  </h4>\n                  <ul className=\"text-xs space-y-1 text-blue-600\">\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.progesterone.inhibitsContraction')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.progesterone.stabilizesEndometrium')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.progesterone.declinesBeforeMenstruation')}</li>\n                  </ul>\n                </div>\n                \n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n                  <h4 className=\"font-semibold text-green-700 mb-2 text-sm\">\n                    {t('medicalPrinciples.hormonalControl.feedbackRegulation.title')}\n                  </h4>\n                  <ul className=\"text-xs space-y-1 text-green-600\">\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.feedbackRegulation.hypothalamicPituitaryOvarian')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.feedbackRegulation.gnrhPulsatileSecretion')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.feedbackRegulation.fshLhCyclicalChanges')}</li>\n                    <li>â€¢ {t('medicalPrinciples.hormonalControl.feedbackRegulation.negativeFeedbackMechanism')}</li>\n                  </ul>\n                  <div className=\"mt-2 p-2 bg-green-100 rounded\">\n                    <p className=\"text-xs text-green-600\">\n                      <strong>{t('medicalPrinciples.hormonalControl.feedbackRegulation.balancePoint')}</strong>\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Neural Pathways */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\n            <h3 className=\"text-xl font-bold mb-6 text-center text-blue-700\">\n              {t('medicalPrinciples.neuralConduction.title')}\n            </h3>\n            \n            <div className=\"grid md:grid-cols-2 gap-8\">\n              <div>\n                <h4 className=\"text-lg font-semibold mb-4 text-blue-700\">\n                  {t('medicalPrinciples.neuralConduction.painPathway.title')}\n                </h4>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center p-3 bg-blue-50 rounded border\">\n                    <span className=\"bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3\">1</span>\n                    <div>\n                      <strong className=\"text-blue-700\">{t('medicalPrinciples.neuralConduction.painPathway.receptors.title')}</strong>\n                      <span className=\"text-sm text-blue-600 ml-1\">\n                        {t('medicalPrinciples.neuralConduction.painPathway.receptors.description')}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center p-3 bg-blue-50 rounded border\">\n                    <span className=\"bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3\">2</span>\n                    <div>\n                      <strong className=\"text-blue-700\">{t('medicalPrinciples.neuralConduction.painPathway.afferentNerves.title')}</strong>\n                      <span className=\"text-sm text-blue-600 ml-1\">\n                        {t('medicalPrinciples.neuralConduction.painPathway.afferentNerves.description')}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center p-3 bg-blue-50 rounded border\">\n                    <span className=\"bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3\">3</span>\n                    <div>\n                      <strong className=\"text-blue-700\">{t('medicalPrinciples.neuralConduction.painPathway.spinalProcessing.title')}</strong>\n                      <span className=\"text-sm text-blue-600 ml-1\">\n                        {t('medicalPrinciples.neuralConduction.painPathway.spinalProcessing.description')}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center p-3 bg-blue-50 rounded border\">\n                    <span className=\"bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3\">4</span>\n                    <div>\n                      <strong className=\"text-blue-700\">{t('medicalPrinciples.neuralConduction.painPathway.centralPerception.title')}</strong>\n                      <span className=\"text-sm text-blue-600 ml-1\">\n                        {t('medicalPrinciples.neuralConduction.painPathway.centralPerception.description')}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <div>\n                <h4 className=\"text-lg font-semibold mb-4 text-blue-700\">\n                  {t('medicalPrinciples.neuralConduction.painControl.title')}\n                </h4>\n                <div className=\"space-y-4\">\n                  <div className=\"bg-green-50 border border-green-200 rounded p-4\">\n                    <h5 className=\"font-semibold text-green-700 mb-2 text-sm\">\n                      {t('medicalPrinciples.neuralConduction.painControl.gateControlTheory.title')}\n                    </h5>\n                    <p className=\"text-xs text-green-600\">\n                      {t('medicalPrinciples.neuralConduction.painControl.gateControlTheory.description')}\n                    </p>\n                  </div>\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded p-4\">\n                    <h5 className=\"font-semibold text-yellow-700 mb-2 text-sm\">\n                      {t('medicalPrinciples.neuralConduction.painControl.endogenousAnalgesia.title')}\n                    </h5>\n                    <p className=\"text-xs text-yellow-600\">\n                      {t('medicalPrinciples.neuralConduction.painControl.endogenousAnalgesia.description')}\n                    </p>\n                  </div>\n                  <div className=\"bg-purple-50 border border-purple-200 rounded p-4\">\n                    <h5 className=\"font-semibold text-purple-700 mb-2 text-sm\">\n                      {t('medicalPrinciples.neuralConduction.painControl.descendingControl.title')}\n                    </h5>\n                    <p className=\"text-xs text-purple-600\">\n                      {t('medicalPrinciples.neuralConduction.painControl.descendingControl.description')}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Treatment Mechanisms */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h3 className=\"text-xl font-bold mb-6 text-center text-indigo-700\">\n              {t('medicalPrinciples.treatmentMechanisms.title')}\n            </h3>\n            \n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              {/* NSAIDs */}\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <div className=\"text-center mb-3\">\n                  <div className=\"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <svg className=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1h-6l-1-1z\"></path>\n                    </svg>\n                  </div>\n                  <h4 className=\"font-bold text-red-700 text-sm\">NSAIDs</h4>\n                </div>\n                \n                <div className=\"text-xs space-y-1\">\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.nsaids.mechanism')}</strong> {t('medicalPrinciples.treatmentMechanisms.nsaids.mechanismDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.nsaids.effect')}</strong> {t('medicalPrinciples.treatmentMechanisms.nsaids.effectDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.nsaids.representativeDrugs')}</strong> {t('medicalPrinciples.treatmentMechanisms.nsaids.representativeDrugsDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.nsaids.bestTiming')}</strong> {t('medicalPrinciples.treatmentMechanisms.nsaids.bestTimingDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.nsaids.efficacy')}</strong> {t('medicalPrinciples.treatmentMechanisms.nsaids.efficacyDescription')}</p>\n                </div>\n              </div>\n\n              {/* Heat Therapy */}\n              <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n                <div className=\"text-center mb-3\">\n                  <div className=\"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <svg className=\"w-6 h-6 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z\"></path>\n                    </svg>\n                  </div>\n                  <h4 className=\"font-bold text-orange-700 text-sm\">\n                    {t('medicalPrinciples.treatmentMechanisms.heatTherapy.title')}\n                  </h4>\n                </div>\n                \n                <div className=\"text-xs space-y-1\">\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.heatTherapy.mechanism')}</strong> {t('medicalPrinciples.treatmentMechanisms.heatTherapy.mechanismDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.heatTherapy.effect')}</strong> {t('medicalPrinciples.treatmentMechanisms.heatTherapy.effectDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.heatTherapy.temperature')}</strong> {t('medicalPrinciples.treatmentMechanisms.heatTherapy.temperatureDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.heatTherapy.duration')}</strong> {t('medicalPrinciples.treatmentMechanisms.heatTherapy.durationDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.heatTherapy.synergy')}</strong> {t('medicalPrinciples.treatmentMechanisms.heatTherapy.synergyDescription')}</p>\n                </div>\n              </div>\n\n              {/* Hormonal Therapy */}\n              <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                <div className=\"text-center mb-3\">\n                  <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                  </div>\n                  <h4 className=\"font-bold text-purple-700 text-sm\">\n                    {t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.title')}\n                  </h4>\n                </div>\n                \n                <div className=\"text-xs space-y-1\">\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.mechanism')}</strong> {t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.mechanismDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.effect')}</strong> {t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.effectDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.type')}</strong> {t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.typeDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.applicable')}</strong> {t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.applicableDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.efficacy')}</strong> {t('medicalPrinciples.treatmentMechanisms.hormonalTherapy.efficacyDescription')}</p>\n                </div>\n              </div>\n\n              {/* Exercise Therapy */}\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                <div className=\"text-center mb-3\">\n                  <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"></path>\n                    </svg>\n                  </div>\n                  <h4 className=\"font-bold text-green-700 text-sm\">\n                    {t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.title')}\n                  </h4>\n                </div>\n                \n                <div className=\"text-xs space-y-1\">\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.mechanism')}</strong> {t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.mechanismDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.effect')}</strong> {t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.effectDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.type')}</strong> {t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.typeDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.intensity')}</strong> {t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.intensityDescription')}</p>\n                  <p><strong>{t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.longTerm')}</strong> {t('medicalPrinciples.treatmentMechanisms.exerciseTherapy.longTermDescription')}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Research Progress */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mt-6\">\n            <h3 className=\"text-xl font-bold mb-6 text-center text-indigo-700\">\n              {t('medicalPrinciples.researchProgress.title')}\n            </h3>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"font-semibold mb-3 text-blue-700\">\n                  {t('medicalPrinciples.researchProgress.molecularTargets.title')}\n                </h4>\n                <p className=\"text-sm text-gray-700 mb-2\">\n                  {t('medicalPrinciples.researchProgress.molecularTargets.description')}\n                </p>\n              </div>\n              \n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                <h4 className=\"font-semibold mb-3 text-green-700\">\n                  {t('medicalPrinciples.researchProgress.aiApplications.title')}\n                </h4>\n                <p className=\"text-sm text-gray-700 mb-2\">\n                  {t('medicalPrinciples.researchProgress.aiApplications.description')}\n                </p>\n              </div>\n            </div>\n            \n            {/* Gene Therapy Research */}\n            <div className=\"mt-6\">\n              <h3 className=\"text-lg font-bold mb-4 text-center text-purple-700\">\n                {t('medicalPrinciples.geneTherapy.title')}\n              </h3>\n              \n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                  <h4 className=\"font-semibold mb-3 text-purple-700\">\n                    {t('medicalPrinciples.geneTherapy.genePolymorphism.title')}\n                  </h4>\n                  <p className=\"text-sm text-gray-700\">\n                    {t('medicalPrinciples.geneTherapy.genePolymorphism.description')}\n                  </p>\n                </div>\n                \n                <div className=\"bg-indigo-50 border border-indigo-200 rounded-lg p-4\">\n                  <h4 className=\"font-semibold mb-3 text-indigo-700\">\n                    {t('medicalPrinciples.geneTherapy.epigeneticMechanisms.title')}\n                  </h4>\n                  <p className=\"text-sm text-gray-700\">\n                    {t('medicalPrinciples.geneTherapy.epigeneticMechanisms.description')}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Clinical Evidence */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mt-6\">\n            <h3 className=\"text-xl font-bold mb-6 text-center text-blue-700\">\n              {t('medicalPrinciples.clinicalEvidence.title')}\n            </h3>\n            \n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n              <h4 className=\"text-lg font-bold mb-4 text-blue-700\">\n                {t('medicalPrinciples.clinicalEvidence.importantStudies.title')}\n              </h4>\n              \n              <div className=\"space-y-6\">\n                <div className=\"bg-white rounded p-4\">\n                  <h5 className=\"font-semibold mb-2 text-gray-800\">\n                    {t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.title')}\n                  </h5>\n                  <div className=\"space-y-2 text-sm\">\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.studyContent')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.studyContentDescription')}\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.sampleSize')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.sampleSizeDescription')}\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.conclusion')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.cochrane2020.conclusionDescription')}\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"bg-white rounded p-4\">\n                  <h5 className=\"font-semibold mb-2 text-gray-800\">\n                    {t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.title')}\n                  </h5>\n                  <div className=\"space-y-2 text-sm\">\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.studyContent')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.studyContentDescription')}\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.method')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.methodDescription')}\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.conclusion')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.bmj2019.conclusionDescription')}\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"bg-white rounded p-4\">\n                  <h5 className=\"font-semibold mb-2 text-gray-800\">\n                    {t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.title')}\n                  </h5>\n                  <div className=\"space-y-2 text-sm\">\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.studyContent')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.studyContentDescription')}\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.design')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.designDescription')}\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <strong>{t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.conclusion')}</strong>\n                      {t('medicalPrinciples.clinicalEvidence.importantStudies.jcm2021.conclusionDescription')}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"mt-6 p-4 bg-yellow-100 border border-yellow-300 rounded\">\n                <p className=\"text-sm text-yellow-700\">\n                  <strong>{t('medicalPrinciples.clinicalEvidence.evidenceLevel.title')}</strong>\n                  {t('medicalPrinciples.clinicalEvidence.evidenceLevel.description')}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Guide Chapters */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-8 text-center\">\n          {t('sections.title')}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {guideChapters.map((chapter) => (\n            <Link \n              key={chapter.id}\n              href={chapter.href}\n              className=\"card group hover:shadow-lg transition-all duration-300 block\"\n            >\n              <div className=\"flex items-center mb-4\">\n                <span className=\"text-3xl mr-3\">{chapter.icon}</span>\n                <h3 className=\"text-xl font-semibold text-neutral-800 group-hover:text-primary-600 transition-colors\">\n                  {chapter.title}\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4 leading-relaxed\">\n                {chapter.description}\n              </p>\n              <div className=\"flex items-center text-primary-600 group-hover:text-primary-700 font-medium\">\n                {chapter.cta}\n                <svg className=\"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </section>\n\n      {/* Quick Access Section */}\n      <section className=\"bg-secondary-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {t('quickAccess.title')}\n        </h2>\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-neutral-800 mb-2\">\n              {t('quickAccess.emergencyRelief')}\n            </h3>\n            <p className=\"text-neutral-600 text-sm mb-3\">\n              {t('quickAccess.emergencyReliefDescription')}\n            </p>\n                        <Link\n              href={`/${locale}/immediate-relief`}\n              className=\"text-primary-600 hover:text-primary-700 font-medium text-sm\"\n            >\n              {t('quickAccess.methodsTechniques')} â†’\n            </Link>\n          </div>\n          \n          <div className=\"bg-white p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-neutral-800 mb-2\">\n              {t('quickAccess.personalizedAssessment')}\n            </h3>\n            <p className=\"text-neutral-600 text-sm mb-3\">\n              {t('quickAccess.personalizedAssessmentDescription')}\n            </p>\n            <Link \n              href={`/${locale}/interactive-tools`}\n              className=\"text-primary-600 hover:text-primary-700 font-medium text-sm\"\n            >\n              {t('quickAccess.startAssessment')} â†’\n            </Link>\n          </div>\n        </div>\n      </section>\n\n          {/* Medical Disclaimer */}\n          <section className=\"bg-primary-50 border-l-4 border-primary-500 p-4 rounded-r-lg\">\n            <p className=\"text-neutral-700\">\n              <strong className=\"text-primary-700\">\n                {t('quickAccess.medicalDisclaimer')}\n              </strong>\n              {t('quickAccess.medicalDisclaimerText')}\n            </p>\n          </section>\n        </div>\n      </div>\n\n      {/* åº•éƒ¨æ¨èå·¥å…· */}\n      <BottomRecommendations currentPage=\"health-guide\" />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/relief-methods/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/health-guide/understanding-pain/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":38,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { Locale, locales } from '@/i18n';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'ç†è§£ç—›ç» - ç—›ç»å¥åº·æŒ‡å—' : 'Understanding Menstrual Pain - Health Guide';\n  const description = locale === 'zh' \n    ? 'æ·±å…¥äº†è§£ç—›ç»çš„åŸå› ã€ç±»å‹å’Œç”Ÿç†æœºåˆ¶ï¼ŒæŒæ¡ç§‘å­¦çš„ç—›ç»çŸ¥è¯†åŸºç¡€ã€‚'\n    : 'Deep dive into the causes, types, and physiological mechanisms of menstrual pain, master the scientific foundation of menstrual pain knowledge.';\n  \n  return {\n    title,\n    description,\n  };\n}\n\n// Generate static params for all supported locales\nexport async function generateStaticParams() {\n  return locales.map((locale) => ({ locale }));\n}\n\nexport default async function UnderstandingPainPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  // Enable static rendering\n  unstable_setRequestLocale(locale);\n\n  const commonT = await getTranslations({ locale, namespace: 'common' });\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Breadcrumb */}\n          <nav className=\"text-sm text-neutral-600\">\n            <Link href={`/${locale}`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'é¦–é¡µ' : 'Home'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <Link href={`/${locale}/health-guide`} className=\"hover:text-primary-600\">\n              {locale === 'zh' ? 'ç—›ç»å¥åº·æŒ‡å—' : 'Health Guide'}\n            </Link>\n            <span className=\"mx-2\">â€º</span>\n            <span className=\"text-neutral-800\">\n              {locale === 'zh' ? 'ç†è§£ç—›ç»' : 'Understanding Pain'}\n            </span>\n          </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {locale === 'zh' ? 'ç†è§£ç—›ç»' : 'Understanding Menstrual Pain'}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'æ·±å…¥äº†è§£ç—›ç»çš„åŸå› ã€ç±»å‹å’Œç”Ÿç†æœºåˆ¶ï¼Œä¸ºæœ‰æ•ˆç®¡ç†å¥ å®šç§‘å­¦åŸºç¡€ã€‚'\n            : 'Deep dive into the causes, types, and physiological mechanisms of menstrual pain to lay a scientific foundation for effective management.'\n          }\n        </p>\n      </header>\n\n      {/* What is Menstrual Pain */}\n      <section className=\"bg-gradient-to-br from-primary-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n          {locale === 'zh' ? 'ä»€ä¹ˆæ˜¯ç—›ç»ï¼Ÿ' : 'What is Menstrual Pain?'}\n        </h2>\n        <p className=\"text-neutral-700 leading-relaxed mb-4\">\n          {locale === 'zh'\n            ? 'ç—›ç»ï¼ˆDysmenorrheaï¼‰æ˜¯æŒ‡åœ¨æœˆç»æœŸé—´æˆ–æœˆç»å‰åå‡ºç°çš„ä¸‹è…¹éƒ¨ç–¼ç—›ã€ç—‰æŒ›æˆ–ä¸é€‚æ„Ÿã€‚è¿™æ˜¯å¥³æ€§æœ€å¸¸è§çš„å¦‡ç§‘ç—‡çŠ¶ä¹‹ä¸€ï¼Œå½±å“ç€å…¨çƒçº¦80%çš„è‚²é¾„å¥³æ€§ã€‚'\n            : 'Dysmenorrhea refers to lower abdominal pain, cramping, or discomfort that occurs during or around menstruation. It is one of the most common gynecological symptoms, affecting approximately 80% of women of reproductive age worldwide.'\n          }\n        </p>\n        <p className=\"text-neutral-700 leading-relaxed\">\n          {locale === 'zh'\n            ? 'ç—›ç»çš„ä¸¥é‡ç¨‹åº¦å› äººè€Œå¼‚ï¼Œä»è½»å¾®çš„ä¸é€‚åˆ°ä¸¥é‡å½±å“æ—¥å¸¸ç”Ÿæ´»çš„å‰§çƒˆç–¼ç—›éƒ½æœ‰å¯èƒ½ã€‚äº†è§£ç—›ç»çš„æœ¬è´¨æ˜¯åˆ¶å®šæœ‰æ•ˆç®¡ç†ç­–ç•¥çš„ç¬¬ä¸€æ­¥ã€‚'\n            : 'The severity of menstrual pain varies from person to person, ranging from mild discomfort to severe pain that significantly impacts daily life. Understanding the nature of menstrual pain is the first step in developing effective management strategies.'\n          }\n        </p>\n      </section>\n\n      {/* Types of Menstrual Pain */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ç—›ç»çš„ç±»å‹' : 'Types of Menstrual Pain'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"card\">\n            <h3 className=\"text-xl font-semibold text-primary-600 mb-3\">\n              {locale === 'zh' ? 'åŸå‘æ€§ç—›ç»' : 'Primary Dysmenorrhea'}\n            </h3>\n            <p className=\"text-neutral-600 mb-4\">\n              {locale === 'zh'\n                ? 'åŸå‘æ€§ç—›ç»æ˜¯æœ€å¸¸è§çš„ç±»å‹ï¼Œé€šå¸¸åœ¨é’æ˜¥æœŸå¼€å§‹åä¸ä¹…å‡ºç°ã€‚è¿™ç§ç–¼ç—›æ˜¯ç”±å­å®«æ”¶ç¼©å¼•èµ·çš„ï¼Œæ²¡æœ‰æ½œåœ¨çš„ç—…ç†åŸå› ã€‚'\n                : 'Primary dysmenorrhea is the most common type, usually appearing shortly after the onset of puberty. This pain is caused by uterine contractions and has no underlying pathological cause.'\n              }\n            </p>\n            <ul className=\"list-disc list-inside text-neutral-600 space-y-1\">\n              <li>{locale === 'zh' ? 'é€šå¸¸åœ¨æœˆç»å¼€å§‹å‰1-2å¤©å‡ºç°' : 'Usually appears 1-2 days before menstruation begins'}</li>\n              <li>{locale === 'zh' ? 'ç–¼ç—›é›†ä¸­åœ¨ä¸‹è…¹éƒ¨å’Œè…°éƒ¨' : 'Pain concentrated in lower abdomen and lower back'}</li>\n              <li>{locale === 'zh' ? 'å¯èƒ½ä¼´æœ‰æ¶å¿ƒã€å‘•åã€è…¹æ³»' : 'May be accompanied by nausea, vomiting, diarrhea'}</li>\n              <li>{locale === 'zh' ? 'ç–¼ç—›æŒç»­1-3å¤©' : 'Pain lasts 1-3 days'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <h3 className=\"text-xl font-semibold text-secondary-600 mb-3\">\n              {locale === 'zh' ? 'ç»§å‘æ€§ç—›ç»' : 'Secondary Dysmenorrhea'}\n            </h3>\n            <p className=\"text-neutral-600 mb-4\">\n              {locale === 'zh'\n                ? 'ç»§å‘æ€§ç—›ç»æ˜¯ç”±æ½œåœ¨çš„å¦‡ç§‘ç–¾ç—…å¼•èµ·çš„ï¼Œé€šå¸¸åœ¨æˆå¹´åå‡ºç°æˆ–åŸæœ‰ç—›ç»çªç„¶åŠ é‡ã€‚éœ€è¦åŒ»ç–—è¯„ä¼°å’Œæ²»ç–—ã€‚'\n                : 'Secondary dysmenorrhea is caused by underlying gynecological conditions, usually appearing in adulthood or when existing pain suddenly worsens. Requires medical evaluation and treatment.'\n              }\n            </p>\n            <ul className=\"list-disc list-inside text-neutral-600 space-y-1\">\n              <li>{locale === 'zh' ? 'å¯èƒ½ç”±å­å®«å†…è†œå¼‚ä½ç—‡å¼•èµ·' : 'May be caused by endometriosis'}</li>\n              <li>{locale === 'zh' ? 'å­å®«è‚Œç˜¤æˆ–è…ºè‚Œç—‡' : 'Uterine fibroids or adenomyosis'}</li>\n              <li>{locale === 'zh' ? 'ç›†è…”ç‚æ€§ç–¾ç—…' : 'Pelvic inflammatory disease'}</li>\n              <li>{locale === 'zh' ? 'éœ€è¦ä¸“ä¸šåŒ»ç–—è¯Šæ–­' : 'Requires professional medical diagnosis'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Physiological Mechanisms */}\n      <section className=\"bg-secondary-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ç”Ÿç†æœºåˆ¶' : 'Physiological Mechanisms'}\n        </h2>\n\n        <div className=\"space-y-6\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'å‰åˆ—è…ºç´ çš„ä½œç”¨' : 'Role of Prostaglandins'}\n            </h3>\n            <p className=\"text-neutral-700 leading-relaxed\">\n              {locale === 'zh'\n                ? 'å‰åˆ—è…ºç´ æ˜¯å¼•èµ·ç—›ç»çš„ä¸»è¦ç”ŸåŒ–å› å­ã€‚åœ¨æœˆç»æœŸé—´ï¼Œå­å®«å†…è†œé‡Šæ”¾å¤§é‡å‰åˆ—è…ºç´ ï¼Œç‰¹åˆ«æ˜¯PGF2Î±å’ŒPGE2ï¼Œè¿™äº›ç‰©è´¨ä¼šå¯¼è‡´å­å®«è‚Œè‚‰å¼ºçƒˆæ”¶ç¼©ï¼Œå‹è¿«è¡€ç®¡ï¼Œå‡å°‘è¡€æµï¼Œä»è€Œäº§ç”Ÿç–¼ç—›ã€‚'\n                : 'Prostaglandins are the primary biochemical factors causing menstrual pain. During menstruation, the endometrium releases large amounts of prostaglandins, particularly PGF2Î± and PGE2, which cause strong uterine muscle contractions, compress blood vessels, reduce blood flow, and thus generate pain.'\n              }\n            </p>\n          </div>\n\n          <div>\n            <h3 className=\"text-lg font-semibold text-neutral-800 mb-2\">\n              {locale === 'zh' ? 'ç–¼ç—›ä¼ å¯¼è·¯å¾„' : 'Pain Transmission Pathways'}\n            </h3>\n            <p className=\"text-neutral-700 leading-relaxed\">\n              {locale === 'zh'\n                ? 'ç—›ç»çš„ç–¼ç—›ä¿¡å·é€šè¿‡äº¤æ„Ÿç¥ç»ç³»ç»Ÿä¼ å¯¼åˆ°è„Šé«“ï¼Œç„¶åä¼ é€’åˆ°å¤§è„‘ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå¤šä¸ªç¥ç»é€’è´¨å’Œå—ä½“ï¼ŒåŒ…æ‹¬å†…å•¡è‚½ã€è¡€æ¸…ç´ ç­‰ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆæŸäº›æ²»ç–—æ–¹æ³•ï¼ˆå¦‚è¿åŠ¨ã€å†¥æƒ³ï¼‰èƒ½å¤Ÿæœ‰æ•ˆç¼“è§£ç–¼ç—›ã€‚'\n                : 'Menstrual pain signals are transmitted through the sympathetic nervous system to the spinal cord and then to the brain. This process involves multiple neurotransmitters and receptors, including endorphins and serotonin, which explains why certain treatments (such as exercise and meditation) can effectively relieve pain.'\n              }\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Traditional Chinese Medicine Perspective */}\n      <section className=\"bg-gradient-to-br from-amber-50 to-orange-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ä¸­åŒ»è¯å‹åˆ†æ' : 'Traditional Chinese Medicine Analysis'}\n        </h2>\n\n        <p className=\"text-neutral-700 leading-relaxed mb-6\">\n          {locale === 'zh'\n            ? 'æ ¹æ®ç—‡çŠ¶ç‰¹ç‚¹ï¼Œä¸­åŒ»å°†ç—›ç»ç»†åˆ†ä¸ºå‡ ç§ä¸»è¦è¯å‹ï¼Œæ¯ç§è¯å‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ç—…ç†æœºåˆ¶å’Œæ²»ç–—æ–¹æ³•ï¼š'\n            : 'Based on symptom characteristics, Traditional Chinese Medicine categorizes menstrual pain into several main syndrome types, each with unique pathological mechanisms and treatment approaches:'\n          }\n        </p>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white p-4 rounded-lg border border-amber-200\">\n            <h3 className=\"text-lg font-semibold text-amber-800 mb-3 flex items-center\">\n              ğŸŒªï¸ {locale === 'zh' ? 'æ°”æ»è¡€ç˜€å‹' : 'Qi Stagnation and Blood Stasis'}\n            </h3>\n            <div className=\"space-y-2 text-sm\">\n              <p><strong>{locale === 'zh' ? 'ä¸»è¦ç—‡çŠ¶ï¼š' : 'Main Symptoms:'}</strong> {locale === 'zh' ? 'èƒ€ç—›ã€åˆºç—›ï¼Œç»è¡€è‰²æš—æœ‰å—' : 'Distending pain, stabbing pain, dark menstrual blood with clots'}</p>\n              <p><strong>{locale === 'zh' ? 'ç–¼ç—›ç‰¹ç‚¹ï¼š' : 'Pain Characteristics:'}</strong> {locale === 'zh' ? 'å›ºå®šä¸ç§»ï¼Œæ‹’æŒ‰' : 'Fixed location, worse with pressure'}</p>\n              <p><strong>{locale === 'zh' ? 'æ²»ç–—åŸåˆ™ï¼š' : 'Treatment Principle:'}</strong> {locale === 'zh' ? 'ç–è‚ç†æ°”ã€æ´»è¡€åŒ–ç˜€' : 'Soothe liver qi, activate blood circulation'}</p>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-blue-200\">\n            <h3 className=\"text-lg font-semibold text-blue-800 mb-3 flex items-center\">\n              â„ï¸ {locale === 'zh' ? 'å¯’å‡è¡€ç˜€å‹' : 'Cold Coagulation and Blood Stasis'}\n            </h3>\n            <div className=\"space-y-2 text-sm\">\n              <p><strong>{locale === 'zh' ? 'ä¸»è¦ç—‡çŠ¶ï¼š' : 'Main Symptoms:'}</strong> {locale === 'zh' ? 'å†·ç—›ã€ç»ç—›ï¼Œå¾—çƒ­åˆ™èˆ’' : 'Cold pain, cramping pain, relieved by warmth'}</p>\n              <p><strong>{locale === 'zh' ? 'ç–¼ç—›ç‰¹ç‚¹ï¼š' : 'Pain Characteristics:'}</strong> {locale === 'zh' ? 'é‡å¯’åŠ å‰§' : 'Worsened by cold'}</p>\n              <p><strong>{locale === 'zh' ? 'æ²»ç–—åŸåˆ™ï¼š' : 'Treatment Principle:'}</strong> {locale === 'zh' ? 'æ¸©ç»æ•£å¯’ã€æ´»è¡€é€šç»œ' : 'Warm meridians, dispel cold, activate blood'}</p>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-green-200\">\n            <h3 className=\"text-lg font-semibold text-green-800 mb-3 flex items-center\">\n              ğŸ’§ {locale === 'zh' ? 'æ°”è¡€è™šå¼±å‹' : 'Qi and Blood Deficiency'}\n            </h3>\n            <div className=\"space-y-2 text-sm\">\n              <p><strong>{locale === 'zh' ? 'ä¸»è¦ç—‡çŠ¶ï¼š' : 'Main Symptoms:'}</strong> {locale === 'zh' ? 'éšç—›ã€å ç—›ï¼Œå–œæŒ‰' : 'Dull pain, bearing-down pain, likes pressure'}</p>\n              <p><strong>{locale === 'zh' ? 'ç–¼ç—›ç‰¹ç‚¹ï¼š' : 'Pain Characteristics:'}</strong> {locale === 'zh' ? 'ç»µç»µä¸ä¼‘' : 'Continuous and lingering'}</p>\n              <p><strong>{locale === 'zh' ? 'æ²»ç–—åŸåˆ™ï¼š' : 'Treatment Principle:'}</strong> {locale === 'zh' ? 'ç›Šæ°”è¡¥è¡€ã€å…»è¡€æ­¢ç—›' : 'Tonify qi and blood, nourish blood to stop pain'}</p>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-purple-200\">\n            <h3 className=\"text-lg font-semibold text-purple-800 mb-3 flex items-center\">\n              ğŸŒ™ {locale === 'zh' ? 'è‚è‚¾äºè™šå‹' : 'Liver and Kidney Deficiency'}\n            </h3>\n            <div className=\"space-y-2 text-sm\">\n              <p><strong>{locale === 'zh' ? 'ä¸»è¦ç—‡çŠ¶ï¼š' : 'Main Symptoms:'}</strong> {locale === 'zh' ? 'éšç—›ï¼Œè…°è†é…¸è½¯' : 'Dull pain, soreness in lower back and knees'}</p>\n              <p><strong>{locale === 'zh' ? 'ç–¼ç—›ç‰¹ç‚¹ï¼š' : 'Pain Characteristics:'}</strong> {locale === 'zh' ? 'ä¼´ç©ºå æ„Ÿ' : 'With empty falling sensation'}</p>\n              <p><strong>{locale === 'zh' ? 'æ²»ç–—åŸåˆ™ï¼š' : 'Treatment Principle:'}</strong> {locale === 'zh' ? 'æ»‹è¡¥è‚è‚¾ã€è°ƒè¡¥å†²ä»»' : 'Nourish liver and kidney, regulate Chong and Ren meridians'}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-6 p-4 bg-amber-100 rounded-lg\">\n          <h4 className=\"font-semibold text-amber-800 mb-2\">\n            {locale === 'zh' ? 'ä¸­è¥¿åŒ»ç»“åˆçš„ä¼˜åŠ¿' : 'Advantages of Integrative Medicine'}\n          </h4>\n          <p className=\"text-amber-700 text-sm leading-relaxed\">\n            {locale === 'zh'\n              ? 'ç°ä»£åŒ»å­¦çš„å‰åˆ—è…ºç´ ç†è®ºä¸ä¸­åŒ»çš„æ°”è¡€ç†è®ºå¯ä»¥ç›¸äº’è¡¥å……ã€‚è¥¿åŒ»çš„å¿«é€Ÿæ­¢ç—›ç»“åˆä¸­åŒ»çš„æ•´ä½“è°ƒç†ï¼Œèƒ½å¤Ÿå®ç°æ ‡æœ¬å…¼æ²»ï¼Œæ—¢ç¼“è§£æ€¥æ€§ç–¼ç—›ï¼Œåˆæ”¹å–„ä½“è´¨ï¼Œå‡å°‘ç—›ç»å¤å‘ã€‚'\n              : 'Modern medicine\\'s prostaglandin theory and TCM\\'s qi-blood theory complement each other. Western medicine\\'s rapid pain relief combined with TCM\\'s holistic regulation can achieve both symptomatic and root treatment, relieving acute pain while improving constitution and reducing recurrence.'\n            }\n          </p>\n        </div>\n      </section>\n\n      {/* Medical Treatment and Professional Intervention */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'åŒ»å­¦æ²»ç–—ä¸ä¸“ä¸šå¹²é¢„' : 'Medical Treatment and Professional Intervention'}\n        </h2>\n\n        <div className=\"space-y-6\">\n          <div className=\"bg-white p-6 rounded-lg border border-blue-200\">\n            <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">\n              {locale === 'zh' ? 'è¯ç‰©æ²»ç–—é€‰æ‹©' : 'Medication Options'}\n            </h3>\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'NSAIDsï¼ˆéç”¾ä½“æŠ—ç‚è¯ï¼‰' : 'NSAIDs (Non-Steroidal Anti-Inflammatory Drugs)'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'å¸ƒæ´›èŠ¬ã€è˜æ™®ç”Ÿç­‰' : 'Ibuprofen, Naproxen, etc.'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'æŠ‘åˆ¶å‰åˆ—è…ºç´ åˆæˆ' : 'Inhibit prostaglandin synthesis'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å¿«é€Ÿç¼“è§£ç–¼ç—›å’Œç‚ç—‡' : 'Rapid pain and inflammation relief'}</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'æ¿€ç´ ç–—æ³•' : 'Hormonal Therapy'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'å£æœé¿å­•è¯' : 'Oral contraceptives'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'è°ƒèŠ‚æ¿€ç´ æ°´å¹³' : 'Regulate hormone levels'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å‡å°‘å­å®«å†…è†œåšåº¦' : 'Reduce endometrial thickness'}</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg border border-indigo-200\">\n            <h3 className=\"text-lg font-semibold text-indigo-800 mb-4\">\n              {locale === 'zh' ? 'ä½•æ—¶å¯»æ±‚åŒ»ç–—å¸®åŠ©' : 'When to Seek Medical Help'}\n            </h3>\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <h4 className=\"font-semibold text-red-600 mb-2\">\n                  {locale === 'zh' ? 'ç´§æ€¥å°±åŒ»æŒ‡å¾' : 'Emergency Medical Signs'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'çªå‘å‰§çƒˆè…¹ç—›ä¼´æ¶å¿ƒå‘•å' : 'Sudden severe abdominal pain with nausea/vomiting'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›ä¼´å‘çƒ­ï¼ˆ>38.5Â°Cï¼‰' : 'Pain with fever (>38.5Â°C)'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å¤§é‡é˜´é“å‡ºè¡€' : 'Heavy vaginal bleeding'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›ä¼´æ™•å¥æˆ–ä¼‘å…‹ç—‡çŠ¶' : 'Pain with fainting or shock symptoms'}</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-semibold text-orange-600 mb-2\">\n                  {locale === 'zh' ? 'æ‹©æœŸå°±åŒ»æŒ‡å¾' : 'Elective Medical Consultation'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'ç—›ç»æ–°è¿‘å‡ºç°æˆ–æ€§è´¨æ”¹å˜' : 'New onset or changed pattern of pain'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç–¼ç—›è¿›è¡Œæ€§åŠ é‡' : 'Progressive worsening of pain'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å¸¸è§„æ­¢ç—›è¯æ— æ•ˆ' : 'Regular painkillers ineffective'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ä¸¥é‡å½±å“æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œ' : 'Severely affecting daily life and work'}</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg border border-green-200\">\n            <h3 className=\"text-lg font-semibold text-green-800 mb-4\">\n              {locale === 'zh' ? 'ä¸“ä¸šæ£€æŸ¥é¡¹ç›®' : 'Professional Examination Items'}\n            </h3>\n            <div className=\"grid md:grid-cols-3 gap-4\">\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'åŸºç¡€æ£€æŸ¥' : 'Basic Examinations'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'è¯¦ç»†ç—…å²è¯¢é—®' : 'Detailed medical history'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å¦‡ç§‘ä½“æ£€' : 'Gynecological examination'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç›†è…”è¶…å£°æ£€æŸ¥' : 'Pelvic ultrasound'}</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'è¿›ä¸€æ­¥æ£€æŸ¥' : 'Further Examinations'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'è¡€å¸¸è§„ã€ç‚ç—‡æŒ‡æ ‡' : 'Blood tests, inflammation markers'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'è‚¿ç˜¤æ ‡å¿—ç‰©æ£€æµ‹' : 'Tumor marker testing'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'MRIç›†è…”æ£€æŸ¥' : 'Pelvic MRI examination'}</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'ç‰¹æ®Šæ£€æŸ¥' : 'Special Examinations'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'å®«è…”é•œæ£€æŸ¥' : 'Hysteroscopy'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'è…¹è…”é•œæ£€æŸ¥' : 'Laparoscopy'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ç»„ç»‡ç—…ç†æ£€æŸ¥' : 'Histopathological examination'}</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Risk Factors */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'é£é™©å› ç´ ' : 'Risk Factors'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div className=\"card\">\n            <h3 className=\"font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'ç”Ÿç†å› ç´ ' : 'Physiological Factors'}\n            </h3>\n            <ul className=\"list-disc list-inside text-neutral-600 space-y-1 text-sm\">\n              <li>{locale === 'zh' ? 'å¹´é¾„å°äº30å²' : 'Age under 30'}</li>\n              <li>{locale === 'zh' ? 'æœˆç»åˆæ½®å¹´é¾„è¾ƒæ—©' : 'Early menarche'}</li>\n              <li>{locale === 'zh' ? 'æœˆç»å‘¨æœŸè¾ƒçŸ­' : 'Shorter menstrual cycles'}</li>\n              <li>{locale === 'zh' ? 'æœˆç»é‡è¾ƒå¤š' : 'Heavy menstrual flow'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <h3 className=\"font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼å› ç´ ' : 'Lifestyle Factors'}\n            </h3>\n            <ul className=\"list-disc list-inside text-neutral-600 space-y-1 text-sm\">\n              <li>{locale === 'zh' ? 'ç¼ºä¹è¿åŠ¨' : 'Lack of exercise'}</li>\n              <li>{locale === 'zh' ? 'é«˜å‹åŠ›æ°´å¹³' : 'High stress levels'}</li>\n              <li>{locale === 'zh' ? 'ä¸è‰¯é¥®é£Ÿä¹ æƒ¯' : 'Poor dietary habits'}</li>\n              <li>{locale === 'zh' ? 'å¸çƒŸ' : 'Smoking'}</li>\n            </ul>\n          </div>\n\n          <div className=\"card\">\n            <h3 className=\"font-semibold text-neutral-800 mb-3\">\n              {locale === 'zh' ? 'é—ä¼ å› ç´ ' : 'Genetic Factors'}\n            </h3>\n            <ul className=\"list-disc list-inside text-neutral-600 space-y-1 text-sm\">\n              <li>{locale === 'zh' ? 'å®¶æ—ç—›ç»å²' : 'Family history of dysmenorrhea'}</li>\n              <li>{locale === 'zh' ? 'é—ä¼ æ˜“æ„Ÿæ€§' : 'Genetic susceptibility'}</li>\n              <li>{locale === 'zh' ? 'æ¿€ç´ æ•æ„Ÿæ€§' : 'Hormone sensitivity'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Comparison and Analysis */}\n      <section className=\"bg-gradient-to-br from-purple-50 to-pink-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {locale === 'zh' ? 'ç—›ç»å¯¹æ¯”ä¸é‰´åˆ«åˆ†æ' : 'Menstrual Pain Comparison and Differential Analysis'}\n        </h2>\n\n        <div className=\"space-y-6\">\n          <div className=\"bg-white p-6 rounded-lg border border-purple-200\">\n            <h3 className=\"text-lg font-semibold text-purple-800 mb-4\">\n              {locale === 'zh' ? 'ç—›ç» vs å…¶ä»–è…¹éƒ¨ç–¼ç—›' : 'Menstrual Pain vs Other Abdominal Pain'}\n            </h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm\">\n                <thead className=\"bg-purple-100\">\n                  <tr>\n                    <th className=\"p-3 text-left\">{locale === 'zh' ? 'ç–¼ç—›ç±»å‹' : 'Pain Type'}</th>\n                    <th className=\"p-3 text-left\">{locale === 'zh' ? 'ç–¼ç—›ç‰¹ç‚¹' : 'Pain Characteristics'}</th>\n                    <th className=\"p-3 text-left\">{locale === 'zh' ? 'å‘ç”Ÿæ—¶é—´' : 'Timing'}</th>\n                    <th className=\"p-3 text-left\">{locale === 'zh' ? 'ä¼´éšç—‡çŠ¶' : 'Associated Symptoms'}</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-purple-100\">\n                  <tr>\n                    <td className=\"p-3 font-semibold text-purple-700\">{locale === 'zh' ? 'ç—›ç»' : 'Menstrual Pain'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'å‘¨æœŸæ€§ç—‰æŒ›ç—›ï¼Œä¸‹è…¹éƒ¨ä¸ºä¸»' : 'Cyclical cramping pain, mainly lower abdomen'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'æœˆç»å‰æˆ–æœˆç»æœŸ' : 'Before or during menstruation'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'æ¶å¿ƒã€å¤´ç—›ã€ä¹åŠ›' : 'Nausea, headache, fatigue'}</td>\n                  </tr>\n                  <tr>\n                    <td className=\"p-3 font-semibold text-orange-700\">{locale === 'zh' ? 'å¦Šå¨ ç—‰æŒ›' : 'Pregnancy Cramps'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'è½»å¾®ç—‰æŒ›ï¼Œé€šå¸¸è¾ƒæ¸©å’Œ' : 'Mild cramping, usually gentle'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'å¦Šå¨ æ—©æœŸ' : 'Early pregnancy'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'æ¶å¿ƒã€ä¹³æˆ¿èƒ€ç—›ã€ç–²åŠ³' : 'Nausea, breast tenderness, fatigue'}</td>\n                  </tr>\n                  <tr>\n                    <td className=\"p-3 font-semibold text-red-700\">{locale === 'zh' ? 'åˆ†å¨©å®«ç¼©' : 'Labor Contractions'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'å¼ºçƒˆã€è§„å¾‹æ€§ç—‰æŒ›' : 'Intense, regular cramping'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'å¦Šå¨ æ™šæœŸ' : 'Late pregnancy'}</td>\n                    <td className=\"p-3\">{locale === 'zh' ? 'èƒŒç—›ã€å‹è¿«æ„Ÿã€è§çº¢' : 'Back pain, pressure, bloody show'}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg border border-pink-200\">\n            <h3 className=\"text-lg font-semibold text-pink-800 mb-4\">\n              {locale === 'zh' ? 'ä¸åŒç—›ç»ç–—æ³•å¯¹æ¯”' : 'Comparison of Different Menstrual Pain Therapies'}\n            </h3>\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-3\">\n                  {locale === 'zh' ? 'è¯ç‰©ç–—æ³•' : 'Pharmaceutical Therapy'}\n                </h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'èµ·æ•ˆé€Ÿåº¦ï¼š' : 'Onset Speed:'}</span>\n                    <span className=\"text-green-600\">{locale === 'zh' ? 'å¿«é€Ÿï¼ˆ30-60åˆ†é’Ÿï¼‰' : 'Fast (30-60 min)'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'æ•ˆæœå¼ºåº¦ï¼š' : 'Effect Intensity:'}</span>\n                    <span className=\"text-green-600\">{locale === 'zh' ? 'å¼º' : 'Strong'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'å‰¯ä½œç”¨ï¼š' : 'Side Effects:'}</span>\n                    <span className=\"text-orange-600\">{locale === 'zh' ? 'å¯èƒ½æœ‰èƒƒè‚ é“ååº”' : 'Possible GI reactions'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'é€‚ç”¨æ€§ï¼š' : 'Applicability:'}</span>\n                    <span className=\"text-blue-600\">{locale === 'zh' ? 'ä¸­é‡åº¦ç—›ç»' : 'Moderate to severe pain'}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <h4 className=\"font-semibold text-neutral-800 mb-3\">\n                  {locale === 'zh' ? 'éè¯ç‰©ç–—æ³•' : 'Non-Pharmaceutical Therapy'}\n                </h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'èµ·æ•ˆé€Ÿåº¦ï¼š' : 'Onset Speed:'}</span>\n                    <span className=\"text-orange-600\">{locale === 'zh' ? 'è¾ƒæ…¢ï¼ˆéœ€æŒç»­ç»ƒä¹ ï¼‰' : 'Slower (requires practice)'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'æ•ˆæœå¼ºåº¦ï¼š' : 'Effect Intensity:'}</span>\n                    <span className=\"text-blue-600\">{locale === 'zh' ? 'ä¸­ç­‰åˆ°å¼º' : 'Moderate to strong'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'å‰¯ä½œç”¨ï¼š' : 'Side Effects:'}</span>\n                    <span className=\"text-green-600\">{locale === 'zh' ? 'å‡ ä¹æ— ' : 'Almost none'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>{locale === 'zh' ? 'é€‚ç”¨æ€§ï¼š' : 'Applicability:'}</span>\n                    <span className=\"text-green-600\">{locale === 'zh' ? 'æ‰€æœ‰ç¨‹åº¦ç—›ç»' : 'All levels of pain'}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg border border-indigo-200\">\n            <h3 className=\"text-lg font-semibold text-indigo-800 mb-4\">\n              {locale === 'zh' ? 'ä¸œè¥¿æ–¹ç—›ç»ç¼“è§£æ™ºæ…§å¯¹æ¯”' : 'East vs West: Menstrual Pain Relief Wisdom'}\n            </h3>\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div className=\"border-l-4 border-orange-400 pl-4\">\n                <h4 className=\"font-semibold text-orange-700 mb-2\">\n                  {locale === 'zh' ? 'ä¸œæ–¹ä¼ ç»ŸåŒ»å­¦' : 'Eastern Traditional Medicine'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'æ•´ä½“è°ƒç†ï¼Œæ ‡æœ¬å…¼æ²»' : 'Holistic regulation, treating both symptoms and root causes'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'ä¸ªä½“åŒ–è¾¨è¯è®ºæ²»' : 'Individualized syndrome differentiation'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'é’ˆç¸ã€ä¸­è¯ã€é£Ÿç–—' : 'Acupuncture, herbal medicine, dietary therapy'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'é¢„é˜²ä¸ºä¸»ï¼Œè°ƒå…»ä¸ºé‡' : 'Prevention-focused, emphasizing conditioning'}</li>\n                </ul>\n              </div>\n\n              <div className=\"border-l-4 border-blue-400 pl-4\">\n                <h4 className=\"font-semibold text-blue-700 mb-2\">\n                  {locale === 'zh' ? 'è¥¿æ–¹ç°ä»£åŒ»å­¦' : 'Western Modern Medicine'}\n                </h4>\n                <ul className=\"text-sm text-neutral-700 space-y-1\">\n                  <li>â€¢ {locale === 'zh' ? 'å¾ªè¯åŒ»å­¦ï¼Œç²¾å‡†æ²»ç–—' : 'Evidence-based medicine, precision treatment'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'å¿«é€Ÿæ­¢ç—›ï¼Œæ•ˆæœæ˜ç¡®' : 'Rapid pain relief, clear effects'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'è¯ç‰©æ²»ç–—ã€ç‰©ç†ç–—æ³•' : 'Pharmaceutical and physical therapy'}</li>\n                  <li>â€¢ {locale === 'zh' ? 'æ ‡å‡†åŒ–æ²»ç–—æ–¹æ¡ˆ' : 'Standardized treatment protocols'}</li>\n                </ul>\n              </div>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-gradient-to-r from-orange-100 to-blue-100 rounded-lg\">\n              <p className=\"text-sm text-neutral-700 text-center\">\n                {locale === 'zh'\n                  ? 'ğŸ’¡ æœ€ä½³å®è·µï¼šç»“åˆä¸œè¥¿æ–¹æ™ºæ…§ï¼Œè¥¿åŒ»å¿«é€Ÿç¼“è§£æ€¥æ€§ç–¼ç—›ï¼Œä¸­åŒ»é•¿æœŸè°ƒç†æ”¹å–„ä½“è´¨ï¼Œå®ç°ä¸ªæ€§åŒ–çš„ç»¼åˆæ²»ç–—æ–¹æ¡ˆã€‚'\n                  : 'ğŸ’¡ Best Practice: Combine Eastern and Western wisdom - Western medicine for rapid acute pain relief, Traditional Chinese Medicine for long-term conditioning to improve constitution, achieving personalized comprehensive treatment plans.'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* When to Seek Help */}\n      <section className=\"bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg\">\n        <h3 className=\"font-semibold text-red-800 mb-2\">\n          {locale === 'zh' ? 'ä½•æ—¶å¯»æ±‚åŒ»ç–—å¸®åŠ©' : 'When to Seek Medical Help'}\n        </h3>\n        <p className=\"text-red-700 mb-2\">\n          {locale === 'zh'\n            ? 'å¦‚æœæ‚¨å‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œè¯·åŠæ—¶å’¨è¯¢åŒ»ç–—ä¸“ä¸šäººå£«ï¼š'\n            : 'Please consult a healthcare professional promptly if you experience:'\n          }\n        </p>\n        <ul className=\"list-disc list-inside text-red-700 space-y-1 text-sm\">\n          <li>{locale === 'zh' ? 'ç–¼ç—›ä¸¥é‡å½±å“æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œ' : 'Pain severely affects daily life and work'}</li>\n          <li>{locale === 'zh' ? 'ç–¼ç—›æ¨¡å¼çªç„¶æ”¹å˜æˆ–åŠ é‡' : 'Pain pattern suddenly changes or worsens'}</li>\n          <li>{locale === 'zh' ? 'ä¼´æœ‰å¼‚å¸¸å‡ºè¡€æˆ–åˆ†æ³Œç‰©' : 'Accompanied by abnormal bleeding or discharge'}</li>\n          <li>{locale === 'zh' ? 'éå¤„æ–¹è¯ç‰©æ— æ³•ç¼“è§£ç–¼ç—›' : 'Over-the-counter medications cannot relieve pain'}</li>\n        </ul>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-neutral-200\">\n        <Link \n          href={`/${locale}/health-guide`}\n          className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n        >\n          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          {locale === 'zh' ? 'è¿”å›æŒ‡å—é¦–é¡µ' : 'Back to Guide Home'}\n        </Link>\n        \n          <Link\n            href={`/${locale}/health-guide/relief-methods`}\n            className=\"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center\"\n          >\n            {locale === 'zh' ? 'ä¸‹ä¸€ç« ï¼šA-Zç¼“è§£æ–¹æ³•' : 'Next: A-Z Relief Methods'}\n            <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </Link>\n        </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/home-clean/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/icon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/immediate-relief/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":208,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8490,8493],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8490,8493],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9286,9289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9286,9289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":315,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14475,14478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14475,14478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":402,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":402,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19026,19029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19026,19029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\nimport { getTranslations } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Breadcrumb from '@/components/Breadcrumb';\n\n// Generate metadata for the page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: string }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'immediateReliefPage' });\n  \n  return {\n    title: t('title'),\n    description: t('description'),\n    keywords: [\n      'ç—›ç»æ€ä¹ˆç¼“è§£', 'ç—›ç»å‰§ç—›æ€¥æ•‘æŒ‡å—', 'ç—›ç»ç´§æ€¥å¤„ç†', 'ç»æœŸç–¼ç—›ç¼“è§£', 'çƒ­æ•·ç–—æ³•', 'ç©´ä½æŒ‰æ‘©',\n      'çƒ­æ•·', 'æ•·çƒ­æ°´è¢‹', 'æš–å®å®', 'æŒ‰æ‘©', 'æ‰è‚šå­', 'æ­¢ç—›è¯',\n      'period pain emergency relief', 'immediate period pain relief', 'heat therapy for cramps'\n    ],\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}/immediate-relief`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh/immediate-relief',\n        'en-US': 'https://www.periodhub.health/en/immediate-relief',\n        'x-default': 'https://www.periodhub.health/zh/immediate-relief',\n      },\n    },\n    openGraph: {\n      title: t('title'),\n      description: t('description'),\n      type: 'article',\n      publishedTime: new Date().toISOString(),\n    },\n  };\n}\n\nexport default async function ImmediateReliefPage({\n  params\n}: {\n  params: Promise<{ locale: string }>\n}) {\n  const { locale } = await params;\n  // Get translations for the immediate relief page\n  const t = await getTranslations({ locale, namespace: 'immediateReliefPage' });\n  const commonT = await getTranslations({ locale, namespace: 'common' });\n  \n  // ç»“æ„åŒ–æ•°æ®\n  const structuredData = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"MedicalWebPage\",\n    \"name\": t('title'),\n    \"description\": t('description'),\n    \"medicalAudience\": \"Patient\",\n    \"about\": {\n      \"@type\": \"MedicalCondition\",\n      \"name\": \"Dysmenorrhea\"\n    },\n    \"mainEntity\": {\n      \"@type\": \"HowTo\",\n      \"name\": \"ç—›ç»ç´§æ€¥ç¼“è§£5æ­¥æ³•\",\n      \"description\": \"åŒ»ç”Ÿè®¤è¯çš„ç—›ç»ç´§æ€¥ç¼“è§£æ–¹æ³•\",\n      \"step\": [\n        {\n          \"@type\": \"HowToStep\",\n          \"name\": \"çƒ­æ•·ç–—æ³•\",\n          \"text\": \"40-45Â°Cçƒ­æ•·ä¸‹è…¹éƒ¨15-20åˆ†é’Ÿ\"\n        },\n        {\n          \"@type\": \"HowToStep\", \n          \"name\": \"å‘¼å¸ç»ƒä¹ \",\n          \"text\": \"4-7-8å‘¼å¸æ³•ï¼Œæ¿€æ´»å‰¯äº¤æ„Ÿç¥ç»ç³»ç»Ÿ\"\n        },\n        {\n          \"@type\": \"HowToStep\",\n          \"name\": \"ç©´ä½æŒ‰æ‘©\",\n          \"text\": \"æŒ‰æ‘©å…³å…ƒç©´ã€ä¸‰é˜´äº¤ç­‰ç©´ä½\"\n        },\n        {\n          \"@type\": \"HowToStep\",\n          \"name\": \"è¯ç‰©ä½¿ç”¨\",\n          \"text\": \"æŒ‰åŒ»å˜±ä½¿ç”¨NSAIDç±»è¯ç‰©\"\n        },\n        {\n          \"@type\": \"HowToStep\",\n          \"name\": \"å°±åŒ»æŒ‡å¾\",\n          \"text\": \"ç–¼ç—›â‰¥7åˆ†æˆ–å‡ºç°å¼‚å¸¸ç—‡çŠ¶æ—¶ç«‹å³å°±åŒ»\"\n        }\n      ]\n    }\n  };\n  \n  return (\n    <>\n      {/* ç»“æ„åŒ–æ•°æ® */}\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify(structuredData)\n        }}\n      />\n      <div className=\"container space-y-10\">\n        {/* Breadcrumb */}\n        <Breadcrumb \n          items={[\n            { label: 'å³æ—¶ç¼“è§£', href: `/${locale}/immediate-relief` }\n          ]}\n        />\n        \n        {/* Page Header */}\n      <header className=\"text-center\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('description')}\n        </p>\n      </header>\n\n      {/* Introduction Section */}\n      <section className=\"bg-gradient-to-br from-primary-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n            {t('introTitle')}\n          </h2>\n          <p className=\"text-neutral-700 leading-relaxed\">\n            {t('introText')}\n          </p>\n          <p className=\"text-neutral-700 leading-relaxed mt-4\">\n            {t('introText2')}\n          </p>\n        </div>\n      </section>\n\n      {/* Types of Relief Section */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {t('typesTitle')}\n        </h2>\n        \n        <div className=\"grid grid-cols-1 gap-6\">\n          {/* Heat Therapy */}\n          <div className=\"card border-l-4 border-red-500 bg-gradient-to-r from-red-50 to-white min-h-[200px]\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-red-100 text-red-600 mr-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-red-700\">ğŸ”¥ {t('heatTherapy')}</h3>\n                <p className=\"text-red-600 font-medium\">ç§‘å­¦éªŒè¯çš„é¦–é€‰ç¼“è§£æ–¹æ³•</p>\n              </div>\n            </div>\n            <p className=\"text-neutral-600 mb-4\">\n              {t('heatTherapyDescription')}\n            </p>\n            \n            {/* ç§‘å­¦å‚æ•°æ˜¾ç¤º */}\n            <div className=\"bg-primary-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-primary-800 mb-2\">\n                {t('parameters.scientificParameters')}\n              </h4>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                <div><strong>{t('labels.temperature')}</strong>{t('parameters.heatTherapy.temperature')}</div>\n                <div><strong>{t('labels.duration')}</strong>{t('parameters.heatTherapy.duration')}</div>\n                <div><strong>{t('labels.frequency')}</strong>{t('parameters.heatTherapy.frequency')}</div>\n                <div><strong>{t('labels.timing')}</strong>{t('parameters.heatTherapy.timing')}</div>\n              </div>\n              <p className=\"text-xs text-primary-700 mt-2\">\n                <strong>{t('labels.mechanism')}</strong>{t('parameters.heatTherapy.mechanism')}\n              </p>\n            </div>\n            <div className=\"flex justify-end\">\n              <Link\n                href={`/${locale}/articles/heat-therapy-complete-guide`}\n                className=\"text-primary-600 hover:text-primary-700 font-medium\"\n              >\n                {t('actions.learnMore')}\n              </Link>\n            </div>\n          </div>\n\n          {/* Gentle Movement */}\n          <div className=\"card border-l-4 border-green-500 bg-gradient-to-r from-green-50 to-white min-h-[200px]\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-green-100 text-green-600 mr-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-green-700\">ğŸ§˜â€â™€ï¸ {t('gentleMovement')}</h3>\n                <p className=\"text-green-600 font-medium\">æ¸©å’Œæœ‰æ•ˆçš„è‡ªç„¶ç¼“è§£æ–¹æ³•</p>\n              </div>\n            </div>\n            <p className=\"text-neutral-600 mb-4\">\n              {t('gentleMovementDescription')}\n            </p>\n            \n            {/* ç‘œä¼½ä½“å¼è¯¦æƒ… */}\n            <div className=\"bg-secondary-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-secondary-800 mb-3\">{t('gentleMovementDetails.yogaPoses.title')}</h4>\n              <div className=\"space-y-3\">\n                {t.raw('gentleMovementDetails.yogaPoses.poses').map((pose: any, index: number) => (\n                  <div key={index} className=\"border-l-2 border-secondary-300 pl-3\">\n                    <h5 className=\"font-medium text-secondary-700\">{pose.name}</h5>\n                    <p className=\"text-sm text-secondary-600 mb-1\">{pose.description}</p>\n                    <p className=\"text-xs text-secondary-500\">{pose.benefits}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* å‘¼å¸ç»ƒä¹ è¯¦æƒ… */}\n            <div className=\"bg-blue-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-blue-800 mb-3\">{t('gentleMovementDetails.breathingExercises.title')}</h4>\n              <div className=\"space-y-2\">\n                {t.raw('gentleMovementDetails.breathingExercises.exercises').map((exercise: any, index: number) => (\n                  <div key={index} className=\"border-l-2 border-blue-300 pl-3\">\n                    <h5 className=\"font-medium text-blue-700\">{exercise.name}</h5>\n                    <p className=\"text-sm text-blue-600 mb-1\">{exercise.steps}</p>\n                    <p className=\"text-xs text-blue-500\">{exercise.benefits}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* ä½¿ç”¨æ—¶æœºå»ºè®® */}\n            <div className=\"bg-green-50 p-3 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-green-800 mb-2\">{t('gentleMovementDetails.timing.title')}</h4>\n              <div className=\"text-sm text-green-700 space-y-1\">\n                <p>â€¢ {t('gentleMovementDetails.timing.preventive')}</p>\n                <p>â€¢ {t('gentleMovementDetails.timing.during')}</p>\n                <p>â€¢ {t('gentleMovementDetails.timing.continuous')}</p>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end\">\n              <Link\n                href={`/${locale}/articles/5-minute-period-pain-relief`}\n                className=\"text-secondary-600 hover:text-secondary-700 font-medium\"\n              >\n                {commonT('learnMore')} â†’\n              </Link>\n            </div>\n          </div>\n\n          {/* Breathing Exercise */}\n          <div className=\"card border-l-4 border-blue-500 bg-gradient-to-r from-blue-50 to-white min-h-[200px]\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 mr-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-blue-700\">ğŸ« {t('breathingExerciseTitle')}</h3>\n                <p className=\"text-blue-600 font-medium\">ç§‘å­¦éªŒè¯çš„ç¥ç»ç³»ç»Ÿè°ƒèŠ‚æ–¹æ³•</p>\n              </div>\n            </div>\n            <p className=\"text-neutral-600 mb-4\">\n              {t('breathingExerciseDescription')}\n            </p>\n            \n            {/* å‘¼å¸ç»ƒä¹ ç§‘å­¦å‚æ•° */}\n            <div className=\"bg-blue-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-blue-800 mb-2\">\n                {t('parameters.breathing.title')}\n              </h4>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                <div><strong>{t('labels.technique')}</strong>{t('parameters.breathing.technique')}</div>\n                <div><strong>{t('labels.cycles')}</strong>{t('parameters.breathing.cycles')}</div>\n                <div><strong>{t('labels.frequency')}</strong>{t('parameters.breathing.frequency')}</div>\n                <div><strong>{t('labels.timing')}</strong>{t('parameters.breathing.timing')}</div>\n              </div>\n              <p className=\"text-xs text-blue-700 mt-2\">\n                <strong>{t('labels.mechanism')}</strong>{t('parameters.breathing.mechanism')}\n              </p>\n            </div>\n            <div className=\"flex justify-end\">\n              <Link\n                href={`/${locale}/interactive-tools#breathing-exercise`}\n                className=\"text-blue-600 hover:text-blue-700 font-medium\"\n              >\n{t('actions.startPractice')}\n              </Link>\n            </div>\n          </div>\n\n          {/* Acupressure */}\n          <div className=\"card border-l-4 border-purple-500 bg-gradient-to-r from-purple-50 to-white min-h-[200px]\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-purple-100 text-purple-600 mr-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-purple-700\">ğŸ‘ {t('acupressure')}</h3>\n                <p className=\"text-purple-600 font-medium\">ä¸­åŒ»ä¼ ç»Ÿä¸ç°ä»£åŒ»å­¦è®¤å¯çš„æ–¹æ³•</p>\n              </div>\n            </div>\n            <p className=\"text-neutral-600 mb-4\">\n              {t('acupressureDescription')}\n            </p>\n            \n            {/* ç©´ä½è¯¦æƒ… */}\n            <div className=\"bg-accent-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-accent-800 mb-3\">{t('acupressureDetails.title')}</h4>\n              <div className=\"space-y-3\">\n                {t.raw('acupressureDetails.acupoints').map((point: any, index: number) => (\n                  <div key={index} className=\"border-l-2 border-accent-300 pl-3\">\n                    <h5 className=\"font-medium text-accent-700\">{point.name}</h5>\n                    <p className=\"text-sm text-accent-600 mb-1\"><strong>ä½ç½®ï¼š</strong>{point.location}</p>\n                    <p className=\"text-sm text-accent-600 mb-1\"><strong>æ–¹æ³•ï¼š</strong>{point.method}</p>\n                    <p className=\"text-xs text-accent-500\">{point.benefits}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* æŒ‰æ‘©æ‰‹æ³•æŒ‡å¯¼ */}\n            <div className=\"bg-purple-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-purple-800 mb-3\">{t('acupressureDetails.technique.title')}</h4>\n              <div className=\"text-sm text-purple-700 space-y-1\">\n                <p>â€¢ {t('acupressureDetails.technique.pressure')}</p>\n                <p>â€¢ {t('acupressureDetails.technique.time')}</p>\n                <p>â€¢ {t('acupressureDetails.technique.frequency')}</p>\n                <p className=\"text-xs text-purple-600 mt-2\">{t('acupressureDetails.technique.precautions')}</p>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end\">\n              <Link\n                href={`/${locale}/articles/global-traditional-menstrual-pain-relief`}\n                className=\"text-accent-600 hover:text-accent-700 font-medium\"\n              >\n                {t('actions.learnMore')}\n              </Link>\n            </div>\n          </div>\n\n          {/* OTC Options */}\n          <div className=\"card border-l-4 border-orange-500 bg-gradient-to-r from-orange-50 to-white min-h-[200px]\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-orange-100 text-orange-600 mr-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-orange-700\">ğŸ’Š {t('otcOptions')}</h3>\n                <p className=\"text-orange-600 font-medium\">å®‰å…¨æœ‰æ•ˆçš„è¯ç‰©ç¼“è§£æ–¹æ¡ˆ</p>\n              </div>\n            </div>\n            <p className=\"text-neutral-600 mb-4\">\n              {t('otcOptionsDescription')}\n            </p>\n            \n            {/* NSAIDç§‘å­¦å‚æ•° */}\n            <div className=\"bg-neutral-50 p-4 rounded-lg mb-4\">\n              <h4 className=\"font-semibold text-neutral-800 mb-2\">\n                {t('parameters.nsaid.title')}\n              </h4>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                <div><strong>{t('labels.dosage')}</strong>{t('parameters.nsaid.dosage')}</div>\n                <div><strong>{t('labels.timing')}</strong>{t('parameters.nsaid.timing')}</div>\n              </div>\n              <p className=\"text-xs text-neutral-700 mt-2\">\n                <strong>{t('labels.mechanism')}</strong>{t('parameters.nsaid.mechanism')}\n              </p>\n              <p className=\"text-xs text-red-600 mt-1\">\n                <strong>{t('labels.contraindications')}</strong>{t('parameters.nsaid.contraindications')}\n              </p>\n            </div>\n            <div className=\"flex justify-end\">\n              <Link\n                href={`/${locale}/articles/when-to-seek-medical-care-comprehensive-guide`}\n                className=\"text-neutral-600 hover:text-neutral-700 font-medium\"\n              >\n                {t('actions.learnMore')}\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Combination Therapy Section */}\n      <section className=\"bg-gradient-to-r from-purple-50 to-pink-50 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n          {t('combinationTherapy.title')}\n        </h2>\n        <p className=\"text-neutral-700 mb-6\">\n          {t('combinationTherapy.subtitle')}\n        </p>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {t.raw('combinationTherapy.combinations').map((combination: any, index: number) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm border border-purple-100\">\n              <h3 className=\"text-lg font-semibold text-purple-700 mb-3\">\n                {combination.level}\n              </h3>\n              <div className=\"space-y-2 mb-4\">\n                {combination.methods.map((method: string, methodIndex: number) => (\n                  <div key={methodIndex} className=\"flex items-center text-sm text-purple-600\">\n                    <span className=\"w-2 h-2 bg-purple-400 rounded-full mr-2\"></span>\n                    {method}\n                  </div>\n                ))}\n              </div>\n              <p className=\"text-sm text-neutral-600\">\n                {combination.description}\n              </p>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Emergency Response Section */}\n      <section className=\"bg-red-50 border-l-4 border-red-500 p-6 md:p-8 rounded-r-lg\">\n        <h2 className=\"text-2xl font-semibold text-red-800 mb-4\">\n          {t('emergencyResponse.title')}\n        </h2>\n        <p className=\"text-red-700 mb-6\">\n          {t('emergencyResponse.subtitle')}\n        </p>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Immediate Actions */}\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-red-700 mb-4\">ç«‹å³è¡ŒåŠ¨æ¸…å•</h3>\n            <ul className=\"space-y-2\">\n              {t.raw('emergencyResponse.immediateActions').map((action: string, index: number) => (\n                <li key={index} className=\"flex items-start text-sm text-red-600\">\n                  <span className=\"w-2 h-2 bg-red-400 rounded-full mr-3 mt-2 flex-shrink-0\"></span>\n                  {action}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Medical Indicators */}\n          <div className=\"bg-white p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-red-700 mb-4\">{t('emergencyResponse.medicalIndicators.title')}</h3>\n            <ul className=\"space-y-2\">\n              {t.raw('emergencyResponse.medicalIndicators.indicators').map((indicator: string, index: number) => (\n                <li key={index} className=\"flex items-start text-sm text-red-600\">\n                  <span className=\"w-2 h-2 bg-red-400 rounded-full mr-3 mt-2 flex-shrink-0\"></span>\n                  {indicator}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n\n        {/* Emergency Kit */}\n        <div className=\"mt-6 bg-white p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-red-700 mb-4\">{t('emergencyResponse.emergencyKit.title')}</h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n            {t.raw('emergencyResponse.emergencyKit.items').map((item: string, index: number) => (\n              <div key={index} className=\"flex items-center text-sm text-red-600\">\n                <span className=\"w-2 h-2 bg-red-400 rounded-full mr-2\"></span>\n                {item}\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Finding What Works Section */}\n      <section className=\"bg-neutral-100 p-6 md:p-8 rounded-xl\">\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4\">\n          {t('findingWhatWorksTitle')}\n        </h2>\n        <p className=\"text-neutral-700 leading-relaxed\">\n          {t('findingWhatWorksText')}\n        </p>\n        <p className=\"text-neutral-700 leading-relaxed mt-4\">\n          {t('findingWhatWorksText2')}\n        </p>\n      </section>\n\n      {/* Related Content Section */}\n      <section>\n        <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n          {t('contentSectionTitle')}\n        </h2>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <div className=\"card group block\">\n            <Link href={`/${locale}/scenario-solutions/emergency-kit`}>\n              <div className=\"flex items-center mb-3\">\n                <span className=\"text-2xl mr-2\">ğŸ“¦</span>\n                <h3 className=\"text-xl font-semibold text-primary-600 group-hover:text-primary-700\">\n                  {t('workTipsTitle')}\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4\">\n                {t('workTipsDescription')}\n              </p>\n              <span className=\"font-medium text-primary-500 group-hover:text-primary-600 transition-colors\">\n                {commonT('readMore')} â†’\n              </span>\n            </Link>\n          </div>\n\n          <div className=\"card group block\">\n            <Link href={`/${locale}/interactive-tools/symptom-assessment`}>\n              <div className=\"flex items-center mb-3\">\n                <span className=\"text-2xl mr-2\">ğŸ“Š</span>\n                <h3 className=\"text-xl font-semibold text-primary-600 group-hover:text-primary-700\">\n                  {t('meditationTitle')}\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4\">\n                {t('meditationDescription')}\n              </p>\n              <span className=\"font-medium text-primary-500 group-hover:text-primary-600 transition-colors\">\n                {commonT('readMore')} â†’\n              </span>\n            </Link>\n          </div>\n\n          {/* æ–°å¢ï¼šNSAIDsè¯ç‰©æŒ‡å—å¡ç‰‡ */}\n          <div className=\"card group block\">\n            <Link href={`/${locale}/downloads/medication-guide`}>\n              <div className=\"flex items-center mb-3\">\n                <span className=\"text-2xl mr-2\">ğŸ§®</span>\n                <h3 className=\"text-xl font-semibold text-primary-600 group-hover:text-primary-700\">\n                  NSAIDsç—›ç»æ²»ç–—ä¸“ä¸šæŒ‡å—\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4\">\n                åŒ…å«äº’åŠ¨å¼ç”¨è¯è®¡ç®—å™¨ï¼Œå¸®æ‚¨ç²¾å‡†è®¡ç®—å®‰å…¨å‰‚é‡\n              </p>\n              <span className=\"font-medium text-primary-500 group-hover:text-primary-600 transition-colors\">\n                {commonT('readMore')} â†’\n              </span>\n            </Link>\n          </div>\n\n          {/* æ–°å¢ï¼šç”Ÿæ´»åœºæ™¯å…¨è¦†ç›–å¡ç‰‡ */}\n          <div className=\"card group block\">\n            <Link href={`/${locale}/scenario-solutions`}>\n              <div className=\"flex items-center mb-3\">\n                <span className=\"text-2xl mr-2\">ğŸ </span>\n                <h3 className=\"text-xl font-semibold text-primary-600 group-hover:text-primary-700\">\n                  ç”Ÿæ´»åœºæ™¯å…¨è¦†ç›–\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4\">\n                ä»å±…å®¶åˆ°å¤–å‡ºï¼Œå…¨æ–¹ä½ç»æœŸä¸é€‚è§£å†³æ–¹æ¡ˆ\n              </p>\n              <span className=\"font-medium text-primary-500 group-hover:text-primary-600 transition-colors\">\n                {commonT('readMore')} â†’\n              </span>\n            </Link>\n          </div>\n\n          {/* æ–°å¢ï¼šçƒ­æ•·ç–—æ³•æŒ‡å—å¡ç‰‡ */}\n          <div className=\"card group block\">\n            <Link href={`/${locale}/articles/heat-therapy-complete-guide`}>\n              <div className=\"flex items-center mb-3\">\n                <span className=\"text-2xl mr-2\">ğŸ”¥</span>\n                <h3 className=\"text-xl font-semibold text-primary-600 group-hover:text-primary-700\">\n                  çƒ­æ•·ç–—æ³•æŒ‡å—\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4\">\n                ç§‘å­¦çƒ­æ•·æ–¹æ³•ï¼Œå¿«é€Ÿç¼“è§£ç»æœŸç–¼ç—›\n              </p>\n              <span className=\"font-medium text-primary-500 group-hover:text-primary-600 transition-colors\">\n                {commonT('readMore')} â†’\n              </span>\n            </Link>\n          </div>\n\n          {/* æ–°å¢ï¼šé¥®é£Ÿè°ƒç†æ–¹æ¡ˆå¡ç‰‡ */}\n          <div className=\"card group block\">\n            <Link href={`/${locale}/articles/period-friendly-recipes`}>\n              <div className=\"flex items-center mb-3\">\n                <span className=\"text-2xl mr-2\">ğŸ¥—</span>\n                <h3 className=\"text-xl font-semibold text-primary-600 group-hover:text-primary-700\">\n                  é¥®é£Ÿè°ƒç†æ–¹æ¡ˆ\n                </h3>\n              </div>\n              <p className=\"text-neutral-600 mb-4\">\n                ç»æœŸè¥å…»æ­é…ï¼Œä»å†…è€Œå¤–ç¼“è§£ä¸é€‚\n              </p>\n              <span className=\"font-medium text-primary-500 group-hover:text-primary-600 transition-colors\">\n                {commonT('readMore')} â†’\n              </span>\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* Medical Disclaimer */}\n      <section className=\"bg-primary-50 border-l-4 border-primary-500 p-4 rounded-r-lg\">\n        <p className=\"text-neutral-700\">\n          <strong className=\"text-primary-700\">\n            {t('disclaimerTitle')}\n          </strong>\n          {t('disclaimerText')}\n        </p>\n      </section>\n      </div>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/[tool]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":482,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":482,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notFound } from 'next/navigation';\nimport { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport Link from 'next/link';\nimport type { Metadata } from 'next';\nimport { Suspense } from 'react';\n\n// Static imports for interactive tools (temporary fix)\nimport PainTrackerTool from '../components/PainTrackerTool';\nimport SymptomAssessmentTool from '../components/SymptomAssessmentTool';\nimport ConstitutionTestTool from '../components/ConstitutionTestTool';\nimport PeriodPainAssessmentTool from '../components/PeriodPainAssessmentTool';\nimport CycleTrackerTool from '../components/CycleTrackerTool';\nimport SymptomTrackerTool from '../components/SymptomTrackerTool';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Tool {\n  slug: string;\n  frontmatter: {\n    title: string;\n    description: string;\n    category: string;\n    difficulty: string;\n    estimatedTime: string;\n  };\n  content: string;\n  locale: Locale;\n}\n\n// Mock function to get tool data - replace with actual data fetching\nconst getToolBySlug = async (slug: string, locale: Locale): Promise<Tool | null> => {\n  const sampleTools: Tool[] = [\n    {\n      slug: 'symptom-assessment',\n      frontmatter: {\n        title: locale === 'zh' ? 'ç—‡çŠ¶è¯„ä¼°å·¥å…·' : 'Symptom Assessment Tool',\n        description: locale === 'zh'\n          ? 'é€šè¿‡ä¸“ä¸šé—®å·å¿«é€Ÿè¯†åˆ«ç–¼ç—›ç±»å‹ï¼Œä¸ºæ‚¨æä¾›ç²¾å‡†çš„ä¸ªæ€§åŒ–å»ºè®®ã€‚'\n          : 'Quickly identify pain types through professional questionnaires and receive precise personalized recommendations.',\n        category: locale === 'zh' ? 'è¯„ä¼°å·¥å…·' : 'Assessment',\n        difficulty: locale === 'zh' ? 'ç®€å•' : 'Easy',\n        estimatedTime: locale === 'zh' ? '5-10åˆ†é’Ÿ' : '5-10 minutes',\n      },\n      content: locale === 'zh' ? `\n        <div class=\"bg-blue-50 border-l-4 border-blue-500 p-6 mb-8\">\n          <h3 class=\"text-lg font-semibold text-blue-800 mb-2\">å¼€å§‹è¯„ä¼°å‰</h3>\n          <p class=\"text-blue-700\">è¯·ç¡®ä¿æ‚¨åœ¨ä¸€ä¸ªå®‰é™ã€ç§å¯†çš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä¸“å¿ƒå›ç­”é—®é¢˜ã€‚è¿™ä¸ªè¯„ä¼°å°†å¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£è‡ªå·±çš„ç—‡çŠ¶æ¨¡å¼ã€‚</p>\n        </div>\n        \n        <h2>ç—‡çŠ¶è¯„ä¼°é—®å·</h2>\n        <p>è¯·æ ¹æ®æ‚¨æœ€è¿‘3ä¸ªæœˆçš„ç»æœŸä½“éªŒå›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p>\n        \n        <div class=\"space-y-6 mt-6\">\n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">1. ç–¼ç—›å¼ºåº¦</h3>\n            <p class=\"text-gray-600 mb-3\">è¯·è¯„ä¼°æ‚¨ç»æœŸç–¼ç—›çš„å¹³å‡å¼ºåº¦ï¼ˆ1-10åˆ†ï¼Œ10åˆ†ä¸ºæœ€ç—›ï¼‰ï¼š</p>\n            <div class=\"grid grid-cols-5 gap-2\">\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">1-2åˆ†<br><span class=\"text-xs text-gray-500\">è½»å¾®</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">3-4åˆ†<br><span class=\"text-xs text-gray-500\">è½»åº¦</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">5-6åˆ†<br><span class=\"text-xs text-gray-500\">ä¸­åº¦</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">7-8åˆ†<br><span class=\"text-xs text-gray-500\">é‡åº¦</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">9-10åˆ†<br><span class=\"text-xs text-gray-500\">æé‡</span></button>\n            </div>\n          </div>\n          \n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">2. ç–¼ç—›ç±»å‹</h3>\n            <p class=\"text-gray-600 mb-3\">æ‚¨çš„ç–¼ç—›ä¸»è¦è¡¨ç°ä¸ºï¼š</p>\n            <div class=\"space-y-2\">\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> ç—‰æŒ›æ€§ç–¼ç—›ï¼ˆæŠ½ç­‹æ ·ï¼‰\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> èƒ€ç—›ï¼ˆè…¹éƒ¨èƒ€æ»¡ï¼‰\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> åˆºç—›ï¼ˆé’ˆæ‰æ ·ï¼‰\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> é’ç—›ï¼ˆæŒç»­æ€§éšç—›ï¼‰\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> æ”¾å°„ç—›ï¼ˆå‘è…°èƒŒéƒ¨æ‰©æ•£ï¼‰\n              </label>\n            </div>\n          </div>\n          \n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">3. ä¼´éšç—‡çŠ¶</h3>\n            <p class=\"text-gray-600 mb-3\">é™¤äº†è…¹ç—›ï¼Œæ‚¨è¿˜æœ‰ä»¥ä¸‹ç—‡çŠ¶å—ï¼Ÿ</p>\n            <div class=\"grid grid-cols-2 gap-2\">\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> å¤´ç—›\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> æ¶å¿ƒå‘•å\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> è…°ç—›\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> ä¹³æˆ¿èƒ€ç—›\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> æƒ…ç»ªæ³¢åŠ¨\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> ç–²åŠ³ä¹åŠ›\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> å¤±çœ \n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> é£Ÿæ¬²æ”¹å˜\n              </label>\n            </div>\n          </div>\n          \n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">4. ç–¼ç—›æ—¶é—´</h3>\n            <p class=\"text-gray-600 mb-3\">ç–¼ç—›é€šå¸¸åœ¨ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Ÿ</p>\n            <div class=\"space-y-2\">\n              <label class=\"flex items-center\">\n                <input type=\"radio\" name=\"pain-timing\" class=\"mr-3\"> æœˆç»å‰1-2å¤©\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"radio\" name=\"pain-timing\" class=\"mr-3\"> æœˆç»ç¬¬ä¸€å¤©\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"radio\" name=\"pain-timing\" class=\"mr-3\"> æœˆç»æœŸé—´æŒç»­\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"radio\" name=\"pain-timing\" class=\"mr-3\"> æ’åµæœŸä¹Ÿæœ‰ç–¼ç—›\n              </label>\n            </div>\n          </div>\n          \n          <div class=\"text-center\">\n            <button class=\"btn-primary px-8 py-3\">\n              æäº¤è¯„ä¼°\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"bg-yellow-50 border-l-4 border-yellow-500 p-6 mt-8\">\n          <h3 class=\"text-lg font-semibold text-yellow-800 mb-2\">é‡è¦æé†’</h3>\n          <p class=\"text-yellow-700\">æ­¤è¯„ä¼°ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—è¯Šæ–­ã€‚å¦‚æœæ‚¨çš„ç—‡çŠ¶ä¸¥é‡æˆ–æŒç»­æ¶åŒ–ï¼Œè¯·åŠæ—¶å°±åŒ»ã€‚</p>\n        </div>\n      ` : `\n        <div class=\"bg-blue-50 border-l-4 border-blue-500 p-6 mb-8\">\n          <h3 class=\"text-lg font-semibold text-blue-800 mb-2\">Before Starting</h3>\n          <p class=\"text-blue-700\">Please ensure you're in a quiet, private environment where you can focus on answering the questions. This assessment will help you better understand your symptom patterns.</p>\n        </div>\n        \n        <h2>Symptom Assessment Questionnaire</h2>\n        <p>Please answer the following questions based on your menstrual experience over the past 3 months:</p>\n        \n        <div class=\"space-y-6 mt-6\">\n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">1. Pain Intensity</h3>\n            <p class=\"text-gray-600 mb-3\">Please rate the average intensity of your menstrual pain (1-10 scale, 10 being the worst):</p>\n            <div class=\"grid grid-cols-5 gap-2\">\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">1-2<br><span class=\"text-xs text-gray-500\">Minimal</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">3-4<br><span class=\"text-xs text-gray-500\">Mild</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">5-6<br><span class=\"text-xs text-gray-500\">Moderate</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">7-8<br><span class=\"text-xs text-gray-500\">Severe</span></button>\n              <button class=\"p-3 border rounded hover:bg-primary-50 transition-colors\">9-10<br><span class=\"text-xs text-gray-500\">Extreme</span></button>\n            </div>\n          </div>\n          \n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">2. Pain Type</h3>\n            <p class=\"text-gray-600 mb-3\">Your pain is mainly characterized as:</p>\n            <div class=\"space-y-2\">\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> Cramping (spasm-like)\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> Bloating (abdominal fullness)\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> Sharp pain (stabbing)\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> Dull ache (continuous)\n              </label>\n              <label class=\"flex items-center\">\n                <input type=\"checkbox\" class=\"mr-3\"> Radiating pain (to back/legs)\n              </label>\n            </div>\n          </div>\n          \n          <div class=\"text-center\">\n            <button class=\"btn-primary px-8 py-3\">\n              Submit Assessment\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"bg-yellow-50 border-l-4 border-yellow-500 p-6 mt-8\">\n          <h3 class=\"text-lg font-semibold text-yellow-800 mb-2\">Important Notice</h3>\n          <p class=\"text-yellow-700\">This assessment is for reference only and cannot replace professional medical diagnosis. If your symptoms are severe or worsening, please seek medical attention promptly.</p>\n        </div>\n      `,\n      locale,\n    },\n    {\n      slug: 'pain-tracker',\n      frontmatter: {\n        title: locale === 'zh' ? 'ç–¼ç—›è¿½è¸ªå™¨' : 'Pain Tracker',\n        description: locale === 'zh' \n          ? 'è®°å½•ç–¼ç—›æ¨¡å¼ï¼Œåˆ†æè¶‹åŠ¿å˜åŒ–ï¼Œä¼˜åŒ–æ²»ç–—æ•ˆæœã€‚'\n          : 'Track pain patterns, analyze trends, and optimize treatment effectiveness.',\n        category: locale === 'zh' ? 'è¿½è¸ªå·¥å…·' : 'Tracking',\n        difficulty: locale === 'zh' ? 'ç®€å•' : 'Easy',\n        estimatedTime: locale === 'zh' ? 'æ¯æ—¥2-3åˆ†é’Ÿ' : '2-3 minutes daily',\n      },\n      content: locale === 'zh' ? `\n        <h2>ç–¼ç—›è¿½è¸ªå·¥å…·</h2>\n        <p>é€šè¿‡æ¯æ—¥è®°å½•ï¼Œå¸®åŠ©æ‚¨è¯†åˆ«ç–¼ç—›æ¨¡å¼ï¼Œä¸ºåŒ»ç”Ÿæä¾›å‡†ç¡®çš„ç—‡çŠ¶ä¿¡æ¯ã€‚</p>\n        \n        <div class=\"bg-green-50 border-l-4 border-green-500 p-6 mb-8\">\n          <h3 class=\"text-lg font-semibold text-green-800 mb-2\">ä½¿ç”¨å»ºè®®</h3>\n          <p class=\"text-green-700\">å»ºè®®æ¯å¤©åœ¨å›ºå®šæ—¶é—´è®°å½•ï¼ŒæŒç»­è‡³å°‘3ä¸ªæœˆç»å‘¨æœŸï¼Œä»¥è·å¾—æ›´å‡†ç¡®çš„æ¨¡å¼åˆ†æã€‚</p>\n        </div>\n        \n        <div class=\"grid md:grid-cols-2 gap-8\">\n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">ä»Šæ—¥è®°å½•</h3>\n            <div class=\"space-y-4\">\n              <div>\n                <label class=\"block text-sm font-medium mb-2\">ç–¼ç—›å¼ºåº¦ (0-10)</label>\n                <input type=\"range\" min=\"0\" max=\"10\" class=\"w-full\">\n                <div class=\"flex justify-between text-xs text-gray-500 mt-1\">\n                  <span>æ— ç—›</span>\n                  <span>æç—›</span>\n                </div>\n              </div>\n              \n              <div>\n                <label class=\"block text-sm font-medium mb-2\">æœˆç»çŠ¶æ€</label>\n                <select class=\"w-full p-2 border rounded\">\n                  <option>è¯·é€‰æ‹©</option>\n                  <option>æœˆç»æœŸ</option>\n                  <option>æœˆç»å‰æœŸ</option>\n                  <option>æœˆç»åæœŸ</option>\n                  <option>æ’åµæœŸ</option>\n                  <option>å…¶ä»–æ—¶æœŸ</option>\n                </select>\n              </div>\n              \n              <div>\n                <label class=\"block text-sm font-medium mb-2\">ä½¿ç”¨çš„ç¼“è§£æ–¹æ³•</label>\n                <div class=\"space-y-1\">\n                  <label class=\"flex items-center text-sm\">\n                    <input type=\"checkbox\" class=\"mr-2\"> çƒ­æ•·\n                  </label>\n                  <label class=\"flex items-center text-sm\">\n                    <input type=\"checkbox\" class=\"mr-2\"> è¯ç‰©\n                  </label>\n                  <label class=\"flex items-center text-sm\">\n                    <input type=\"checkbox\" class=\"mr-2\"> è¿åŠ¨\n                  </label>\n                  <label class=\"flex items-center text-sm\">\n                    <input type=\"checkbox\" class=\"mr-2\"> ä¼‘æ¯\n                  </label>\n                </div>\n              </div>\n              \n              <button class=\"w-full btn-primary\">ä¿å­˜ä»Šæ—¥è®°å½•</button>\n            </div>\n          </div>\n          \n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">è¶‹åŠ¿åˆ†æ</h3>\n            <div class=\"space-y-4\">\n              <div class=\"bg-gray-100 p-4 rounded\">\n                <h4 class=\"font-medium mb-2\">æœ¬æœˆå¹³å‡ç–¼ç—›å¼ºåº¦</h4>\n                <div class=\"text-2xl font-bold text-primary-600\">6.2/10</div>\n                <p class=\"text-sm text-gray-600\">æ¯”ä¸Šæœˆä¸‹é™ 0.8 åˆ†</p>\n              </div>\n              \n              <div class=\"bg-gray-100 p-4 rounded\">\n                <h4 class=\"font-medium mb-2\">ç–¼ç—›å¤©æ•°</h4>\n                <div class=\"text-2xl font-bold text-secondary-600\">4å¤©</div>\n                <p class=\"text-sm text-gray-600\">æœ¬å‘¨æœŸç–¼ç—›æŒç»­æ—¶é—´</p>\n              </div>\n              \n              <div class=\"bg-gray-100 p-4 rounded\">\n                <h4 class=\"font-medium mb-2\">æœ€æœ‰æ•ˆç¼“è§£æ–¹æ³•</h4>\n                <div class=\"text-lg font-semibold text-accent-600\">çƒ­æ•· + ä¼‘æ¯</div>\n                <p class=\"text-sm text-gray-600\">åŸºäºæ‚¨çš„è®°å½•åˆ†æ</p>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"mt-8 bg-purple-50 border-l-4 border-purple-500 p-6\">\n          <h3 class=\"text-lg font-semibold text-purple-800 mb-2\">æ•°æ®å¯¼å‡º</h3>\n          <p class=\"text-purple-700 mb-4\">æ‚¨å¯ä»¥å¯¼å‡ºç–¼ç—›è®°å½•ï¼Œåœ¨å°±åŒ»æ—¶æä¾›ç»™åŒ»ç”Ÿå‚è€ƒã€‚</p>\n          <button class=\"btn-outline\">å¯¼å‡ºPDFæŠ¥å‘Š</button>\n        </div>\n      ` : `\n        <h2>Pain Tracking Tool</h2>\n        <p>Track your daily pain to identify patterns and provide accurate symptom information to your healthcare provider.</p>\n        \n        <div class=\"bg-green-50 border-l-4 border-green-500 p-6 mb-8\">\n          <h3 class=\"text-lg font-semibold text-green-800 mb-2\">Usage Tips</h3>\n          <p class=\"text-green-700\">We recommend recording at the same time each day for at least 3 menstrual cycles to get more accurate pattern analysis.</p>\n        </div>\n        \n        <div class=\"grid md:grid-cols-2 gap-8\">\n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">Today's Record</h3>\n            <div class=\"space-y-4\">\n              <div>\n                <label class=\"block text-sm font-medium mb-2\">Pain Intensity (0-10)</label>\n                <input type=\"range\" min=\"0\" max=\"10\" class=\"w-full\">\n                <div class=\"flex justify-between text-xs text-gray-500 mt-1\">\n                  <span>No Pain</span>\n                  <span>Extreme</span>\n                </div>\n              </div>\n              \n              <div>\n                <label class=\"block text-sm font-medium mb-2\">Menstrual Status</label>\n                <select class=\"w-full p-2 border rounded\">\n                  <option>Please select</option>\n                  <option>Menstrual period</option>\n                  <option>Pre-menstrual</option>\n                  <option>Post-menstrual</option>\n                  <option>Ovulation</option>\n                  <option>Other</option>\n                </select>\n              </div>\n              \n              <button class=\"w-full btn-primary\">Save Today's Record</button>\n            </div>\n          </div>\n          \n          <div class=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 class=\"font-semibold mb-4\">Trend Analysis</h3>\n            <div class=\"space-y-4\">\n              <div class=\"bg-gray-100 p-4 rounded\">\n                <h4 class=\"font-medium mb-2\">Average Pain This Month</h4>\n                <div class=\"text-2xl font-bold text-primary-600\">6.2/10</div>\n                <p class=\"text-sm text-gray-600\">Decreased by 0.8 from last month</p>\n              </div>\n              \n              <div class=\"bg-gray-100 p-4 rounded\">\n                <h4 class=\"font-medium mb-2\">Pain Days</h4>\n                <div class=\"text-2xl font-bold text-secondary-600\">4 days</div>\n                <p class=\"text-sm text-gray-600\">Duration this cycle</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      `,\n      locale,\n    },\n    {\n      slug: 'constitution-test',\n      frontmatter: {\n        title: locale === 'zh' ? 'ä¸­åŒ»ä½“è´¨æµ‹è¯•' : 'TCM Constitution Test',\n        description: locale === 'zh'\n          ? 'é€šè¿‡8ä¸ªé—®é¢˜äº†è§£æ‚¨çš„ä¸­åŒ»ä½“è´¨ç±»å‹ï¼Œè·å¾—ä¸ªæ€§åŒ–çš„ç©´ä½ã€é¥®é£Ÿå’Œç”Ÿæ´»æ–¹å¼å»ºè®®ã€‚'\n          : 'Discover your TCM constitution type through 8 questions and get personalized acupoint, diet, and lifestyle recommendations.',\n        category: locale === 'zh' ? 'ä½“è´¨è¯„ä¼°' : 'Constitution Assessment',\n        difficulty: locale === 'zh' ? 'ç®€å•' : 'Easy',\n        estimatedTime: locale === 'zh' ? '5-8åˆ†é’Ÿ' : '5-8 minutes',\n      },\n      content: '', // Content will be handled by the ConstitutionTestTool component\n      locale,\n    },\n    {\n      slug: 'period-pain-assessment',\n      frontmatter: {\n        title: locale === 'zh' ? 'ç—›ç»é€Ÿæµ‹å°å·¥å…·' : 'Period Pain Assessment Tool',\n        description: locale === 'zh'\n          ? 'å›ç­”å‡ ä¸ªç®€å•é—®é¢˜ï¼Œåˆæ­¥äº†è§£ä½ çš„ç—›ç»ç±»å‹å’Œä¸¥é‡ç¨‹åº¦ï¼Œè·å¾—ä¸ªæ€§åŒ–çš„å¥åº·å»ºè®®ã€‚'\n          : 'Answer a few simple questions to understand your period pain type and severity, and get personalized health recommendations.',\n        category: locale === 'zh' ? 'å¥åº·è¯„ä¼°' : 'Health Assessment',\n        difficulty: locale === 'zh' ? 'ç®€å•' : 'Easy',\n        estimatedTime: locale === 'zh' ? '3-5åˆ†é’Ÿ' : '3-5 minutes',\n      },\n      content: '', // Content will be handled by the PeriodPainAssessmentTool component\n      locale,\n    },\n    {\n      slug: 'cycle-tracker',\n      frontmatter: {\n        title: locale === 'zh' ? 'æ™ºèƒ½å‘¨æœŸè¿½è¸ªå™¨' : 'Smart Cycle Tracker',\n        description: locale === 'zh'\n          ? 'æ™ºèƒ½è¿½è¸ªæœˆç»å‘¨æœŸï¼Œé¢„æµ‹ä¸‹æ¬¡æœˆç»æ—¶é—´ï¼Œè®°å½•ç—‡çŠ¶å˜åŒ–ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£èº«ä½“è§„å¾‹ã€‚'\n          : 'Intelligently track your menstrual cycle, predict next period, record symptom changes, and help you better understand your body patterns.',\n        category: locale === 'zh' ? 'è¿½è¸ªå·¥å…·' : 'Tracking Tool',\n        difficulty: locale === 'zh' ? 'ç®€å•' : 'Easy',\n        estimatedTime: locale === 'zh' ? 'æ¯æ—¥1-2åˆ†é’Ÿ' : '1-2 minutes daily',\n      },\n      content: '', // Content will be handled by the CycleTrackerTool component\n      locale,\n    },\n    {\n      slug: 'symptom-tracker',\n      frontmatter: {\n        title: locale === 'zh' ? 'ç—‡çŠ¶è®°å½•å™¨' : 'Symptom Tracker',\n        description: locale === 'zh'\n          ? 'è¯¦ç»†è®°å½•ç»æœŸç—‡çŠ¶ï¼ŒåŒ…æ‹¬ç–¼ç—›å¼ºåº¦ã€æƒ…ç»ªå˜åŒ–ã€èº«ä½“ååº”ç­‰ï¼Œä¸ºå¥åº·ç®¡ç†æä¾›æ•°æ®æ”¯æŒã€‚'\n          : 'Detailed recording of menstrual symptoms including pain intensity, mood changes, physical reactions, providing data support for health management.',\n        category: locale === 'zh' ? 'è®°å½•å·¥å…·' : 'Recording Tool',\n        difficulty: locale === 'zh' ? 'ç®€å•' : 'Easy',\n        estimatedTime: locale === 'zh' ? 'æ¯æ—¥3-5åˆ†é’Ÿ' : '3-5 minutes daily',\n      },\n      content: '', // Content will be handled by the SymptomTrackerTool component\n      locale,\n    }\n  ];\n\n  const tool = sampleTools.find(t => t.slug === slug && t.locale === locale);\n  return tool || null;\n};\n\n// Generate static params for all tools\nexport async function generateStaticParams() {\n  const locales: Locale[] = ['en', 'zh'];\n  const toolSlugs = [\n    'symptom-assessment',\n    'pain-tracker',\n    'constitution-test',\n    'period-pain-assessment',\n    'cycle-tracker',\n    'symptom-tracker'\n  ];\n\n  const params = [];\n  for (const locale of locales) {\n    for (const tool of toolSlugs) {\n      params.push({ locale, tool });\n    }\n  }\n\n  return params;\n}\n\n// Generate metadata for the tool\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale; tool: string }>\n}): Promise<Metadata> {\n  const { locale, tool } = await params;\n  const toolData = await getToolBySlug(tool, locale);\n\n  if (!toolData) {\n    return {\n      title: locale === 'zh' ? 'å·¥å…·æœªæ‰¾åˆ°' : 'Tool Not Found',\n      description: locale === 'zh' ? 'æŠ±æ­‰ï¼Œæˆ‘ä»¬æ‰¾ä¸åˆ°æ‚¨è¦æŸ¥æ‰¾çš„å·¥å…·ã€‚' : 'Sorry, we could not find the tool you are looking for.',\n    };\n  }\n\n  return {\n    title: `${toolData.frontmatter.title} | periodhub.health`,\n    description: toolData.frontmatter.description,\n    openGraph: {\n      title: toolData.frontmatter.title,\n      description: toolData.frontmatter.description,\n      type: 'website',\n    },\n  };\n}\n\nexport default async function ToolPage({\n  params\n}: {\n  params: Promise<{ locale: Locale; tool: string }>\n}) {\n  const { locale, tool } = await params;\n  unstable_setRequestLocale(locale);\n\n  const toolData = await getToolBySlug(tool, locale);\n  const t = await getTranslations({ locale, namespace: 'common' });\n  const tTool = await getTranslations({ locale, namespace: 'toolPage' });\n\n  if (!toolData) {\n    notFound();\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Back to Tools */}\n      <div className=\"container-custom\">\n        <Link \n          href={`/${locale}/interactive-tools`} \n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          {tTool('backToTools')}\n        </Link>\n      </div>\n\n      {/* Tool Header */}\n      <header className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          <div className=\"flex items-center justify-center space-x-4 text-sm text-neutral-600 mb-4\">\n            <span className=\"bg-secondary-100 text-secondary-700 px-3 py-1 rounded-full\">\n              {toolData.frontmatter.category}\n            </span>\n            <span>â€¢ {toolData.frontmatter.difficulty}</span>\n            <span>â€¢ {toolData.frontmatter.estimatedTime}</span>\n          </div>\n\n          <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold text-neutral-800 mb-6\">\n            {toolData.frontmatter.title}\n          </h1>\n\n          <p className=\"text-lg md:text-xl text-neutral-600 mb-8 leading-relaxed max-w-3xl mx-auto\">\n            {toolData.frontmatter.description}\n          </p>\n        </div>\n      </header>\n\n      {/* Tool Content */}\n      <main className=\"container-custom\">\n        <div className=\"max-w-6xl mx-auto\">\n          <Suspense fallback={\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n            </div>\n          }>\n            {/* Render interactive tool if available */}\n            {tool === 'pain-tracker' ? (\n              <PainTrackerTool locale={locale} />\n            ) : tool === 'symptom-assessment' ? (\n              <SymptomAssessmentTool locale={locale} />\n            ) : tool === 'constitution-test' ? (\n              <ConstitutionTestTool locale={locale} />\n            ) : tool === 'period-pain-assessment' ? (\n              <PeriodPainAssessmentTool locale={locale} />\n            ) : tool === 'cycle-tracker' ? (\n              <CycleTrackerTool locale={locale} />\n            ) : tool === 'symptom-tracker' ? (\n              <SymptomTrackerTool locale={locale} />\n            ) : (\n              <div\n                className=\"prose prose-lg max-w-none prose-primary prose-headings:text-neutral-800 prose-p:text-neutral-700\"\n                dangerouslySetInnerHTML={{ __html: toolData.content }}\n              />\n            )}\n          </Suspense>\n        </div>\n      </main>\n\n      {/* Medical Disclaimer */}\n      <section className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"bg-red-50 border-l-4 border-red-500 text-red-700 p-6 rounded-r-lg\">\n            <p className=\"font-bold mb-2\">\n              {tTool('medicalDisclaimer')}\n            </p>\n            <p className=\"text-sm\">\n              {tTool('medicalDisclaimerText')}\n            </p>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/components/ConstitutionTestTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isComplete' is assigned a value but never used.","line":55,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasNoneSelected' is assigned a value but never used.","line":108,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5333,5336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5333,5336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5394,5397],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5394,5397],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":206,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5600,5603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5600,5603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5665,5668],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5665,5668],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":552,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":552,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21197,21200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21197,21200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":567,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":567,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22001,22004],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22001,22004],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { useInteractiveToolTranslations } from '../shared/hooks/useAppTranslations';\nimport {\n  Play,\n  ArrowLeft,\n  ArrowRight,\n  CheckCircle,\n  User,\n  Heart,\n  Leaf,\n  Clock,\n  MapPin,\n  Utensils,\n  Activity,\n  AlertCircle,\n  Lightbulb,\n  BookOpen,\n  FileText,\n  MessageCircle,\n  Copy,\n  Users,\n  Package\n} from 'lucide-react';\nimport { useConstitutionTest } from '../shared/hooks/useConstitutionTest';\nimport { useNotifications } from '../shared/hooks/useNotifications';\nimport NotificationContainer from '../shared/components/NotificationContainer';\nimport LoadingSpinner from '../shared/components/LoadingSpinner';\nimport { ConstitutionAnswer, ConstitutionType } from '../shared/types/constitution';\nimport { constitutionTypeInfo } from '../shared/data/constitutionTypes';\nimport {\n  menstrualPainAcupoints,\n  menstrualPainLifestyleTips,\n  getRecommendedArticles,\n  communicationTemplates,\n  scenarioBasedAdvice,\n  emergencyKitRecommendations\n} from '../shared/data/menstrualPainRecommendations';\n\ninterface ConstitutionTestToolProps {\n  locale: string;\n}\n\nexport default function ConstitutionTestTool({ locale }: ConstitutionTestToolProps) {\n  const { t } = useInteractiveToolTranslations('constitutionTest');\n  const [selectedAnswers, setSelectedAnswers] = useState<Record<string, string | string[]>>({});\n\n  const {\n    currentSession,\n    currentQuestion,\n    currentQuestionIndex,\n    totalQuestions,\n    progress,\n    isComplete,\n    result,\n    isLoading,\n    error,\n    startTest,\n    answerQuestion,\n    goToPreviousQuestion,\n    goToNextQuestion,\n    completeTest,\n    resetTest\n  } = useConstitutionTest();\n\n  const {\n    notifications,\n    removeNotification,\n    addSuccessNotification,\n    addErrorNotification\n  } = useNotifications();\n\n  const handleStartTest = () => {\n    startTest(locale);\n    setSelectedAnswers({});\n  };\n\n  // å¤„ç†å•é€‰ç­”æ¡ˆ\n  const handleAnswerSelect = (questionId: string, value: string | number) => {\n    const stringValue = String(value);\n    setSelectedAnswers(prev => ({\n      ...prev,\n      [questionId]: stringValue\n    }));\n\n    const answer: ConstitutionAnswer = {\n      questionId,\n      selectedValues: [stringValue],\n      timestamp: new Date().toISOString()\n    };\n\n    answerQuestion(answer);\n  };\n\n  // å¤„ç†å¤šé€‰ç­”æ¡ˆ\n  const handleMultipleAnswerSelect = (questionId: string, value: string) => {\n    const currentValues = Array.isArray(selectedAnswers[questionId])\n      ? selectedAnswers[questionId] as string[]\n      : selectedAnswers[questionId]\n        ? [selectedAnswers[questionId] as string]\n        : [];\n\n    let newValues: string[];\n\n    // å¤„ç†\"ä»¥ä¸Šéƒ½æ²¡æœ‰\"é€‰é¡¹çš„é€»è¾‘\n    const isNoneOption = value === 'none';\n    const hasNoneSelected = currentValues.includes('none');\n\n    if (isNoneOption) {\n      // å¦‚æœé€‰æ‹©\"ä»¥ä¸Šéƒ½æ²¡æœ‰\"ï¼Œæ¸…é™¤å…¶ä»–æ‰€æœ‰é€‰æ‹©\n      newValues = currentValues.includes('none') ? [] : ['none'];\n    } else {\n      // å¦‚æœé€‰æ‹©å…¶ä»–é€‰é¡¹ï¼Œå…ˆç§»é™¤\"ä»¥ä¸Šéƒ½æ²¡æœ‰\"é€‰é¡¹\n      const filteredValues = currentValues.filter(v => v !== 'none');\n      newValues = filteredValues.includes(value)\n        ? filteredValues.filter(v => v !== value)\n        : [...filteredValues, value];\n    }\n\n    setSelectedAnswers(prev => ({\n      ...prev,\n      [questionId]: newValues\n    }));\n\n    const answer: ConstitutionAnswer = {\n      questionId,\n      selectedValues: newValues,\n      timestamp: new Date().toISOString()\n    };\n\n    answerQuestion(answer);\n  };\n\n  const handleNext = () => {\n    if (currentQuestionIndex >= totalQuestions - 1) {\n      // å®Œæˆæµ‹è¯•\n      const testResult = completeTest();\n      if (testResult) {\n        addSuccessNotification(\n          t('messages.testComplete'),\n          t('messages.testCompleteDesc')\n        );\n      } else {\n        addErrorNotification(\n          t('messages.testFailed'),\n          t('messages.testFailedDesc')\n        );\n      }\n    } else {\n      goToNextQuestion();\n    }\n  };\n\n  const handlePrevious = () => {\n    goToPreviousQuestion();\n  };\n\n  const getCurrentAnswer = () => {\n    return currentQuestion ? selectedAnswers[currentQuestion.id] : undefined;\n  };\n\n  // æ¸å˜æ»‘å—æ ·å¼å·¥å…·\n  const getRangeStyle = (value: number, min: number, max: number) => {\n    const safeMin = Number(min ?? 0);\n    const safeMax = Number(max ?? 10);\n    const val = Number(value ?? safeMin);\n    const percent = safeMax > safeMin ? ((val - safeMin) / (safeMax - safeMin)) * 100 : 0;\n    return {\n      backgroundImage:\n        'linear-gradient(90deg, #22c55e, #f59e0b, #ef4444), linear-gradient(90deg, #e5e7eb 0 0)',\n      backgroundSize: `${percent}% 100%, 100% 100%`,\n      backgroundRepeat: 'no-repeat'\n    } as React.CSSProperties;\n  };\n\n  const canProceed = () => {\n    if (!currentQuestion) return false;\n\n    const answer = getCurrentAnswer();\n\n    // å¯¹äºå¤šé€‰é¢˜ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰é€‰æ‹©ï¼ˆå¯ä»¥ä¸ºç©ºæ•°ç»„ï¼Œå› ä¸ºæœ‰äº›å¤šé€‰é¢˜ä¸æ˜¯å¿…å¡«çš„ï¼‰\n    if (currentQuestion.type === 'multiple') {\n      return true; // å¤šé€‰é¢˜å…è®¸ä¸é€‰æ‹©ä»»ä½•é€‰é¡¹\n    }\n\n    // å¯¹äºå•é€‰é¢˜å’Œæ»‘å—é¢˜ï¼Œå¿…é¡»æœ‰é€‰æ‹©\n    return answer !== undefined && answer !== null && answer !== '';\n  };\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰ç—›ç»ç—‡çŠ¶\n  const hasMenstrualPainSymptoms = (answers: ConstitutionAnswer[]): boolean => {\n    return answers.some(answer =>\n      answer.questionId === 'menstrual_pain_severity' &&\n      answer.selectedValues.some(value => value !== 'no_pain')\n    );\n  };\n\n  // è·å–ç—›ç»ç©´ä½å»ºè®®\n  const getMenstrualPainAcupoints = (constitutionType: ConstitutionType, locale: string): any[] => {\n    const localeData = (menstrualPainAcupoints as any)[locale] || menstrualPainAcupoints.zh;\n    return localeData[constitutionType] || [];\n  };\n\n  // è·å–ç—›ç»ç”Ÿæ´»æ–¹å¼å»ºè®®\n  const getMenstrualPainLifestyleTips = (constitutionType: ConstitutionType, locale: string): any[] => {\n    const localeData = (menstrualPainLifestyleTips as any)[locale] || menstrualPainLifestyleTips.zh;\n    return localeData[constitutionType] || [];\n  };\n\n  // å¦‚æœæ²¡æœ‰å¼€å§‹æµ‹è¯•ï¼Œæ˜¾ç¤ºä»‹ç»é¡µé¢\n  if (!currentSession) {\n    return (\n      <div className=\"max-w-4xl mx-auto\">\n        <NotificationContainer \n          notifications={notifications}\n          onRemove={removeNotification}\n        />\n        \n        {/* ä»‹ç»é¡µé¢ - ç´«è‰²ä¸»é¢˜ */}\n        <div className=\"text-center mb-8 animate-fade-in\">\n          <div className=\"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-purple-100 to-purple-200 rounded-full flex items-center justify-center shadow-lg\">\n            <User className=\"w-12 h-12 text-purple-600\" />\n          </div>\n          <h1 className=\"text-4xl font-bold bg-gradient-to-r from-purple-600 to-purple-800 bg-clip-text text-transparent mb-4\">\n            {t('title')}\n          </h1>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed\">\n            {t('subtitle')}\n          </p>\n        </div>\n\n        {/* æµ‹è¯•ç‰¹ç‚¹ - ç´«è‰²ä¸»é¢˜å¡ç‰‡ */}\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          <div className=\"text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-purple-100\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-purple-100 to-purple-200 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Clock className=\"w-6 h-6 text-purple-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-800 mb-2\">\n              {t('features.quick.title')}\n            </h3>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              {t('features.quick.description')}\n            </p>\n          </div>\n          <div className=\"text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-purple-100\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-pink-100 to-pink-200 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Heart className=\"w-6 h-6 text-pink-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-800 mb-2\">\n              {t('features.professional.title')}\n            </h3>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              {t('features.professional.description')}\n            </p>\n          </div>\n          <div className=\"text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-purple-100\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Leaf className=\"w-6 h-6 text-green-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-800 mb-2\">\n              {t('features.personalized.title')}\n            </h3>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              {t('features.personalized.description')}\n            </p>\n          </div>\n          <div className=\"text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-purple-100\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-purple-100 to-purple-200 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Activity className=\"w-6 h-6 text-purple-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-800 mb-2\">\n              {t('features.practical.title')}\n            </h3>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              {t('features.practical.description')}\n            </p>\n          </div>\n        </div>\n\n        {/* æµ‹è¯•è¯´æ˜ - ç´«è‰²ä¸»é¢˜ */}\n        <div className=\"bg-gradient-to-r from-purple-50 to-purple-100 border-l-4 border-purple-500 p-6 mb-8 rounded-r-lg shadow-sm\">\n          <h3 className=\"font-semibold text-purple-800 mb-3 flex items-center\">\n            <AlertCircle className=\"w-5 h-5 mr-2\" />\n            {t('instructions.title')}\n          </h3>\n          <ul className=\"text-purple-700 space-y-2\">\n            <li className=\"flex items-start\">\n              <span className=\"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n              {t('instructions.item1')}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n              {t('instructions.item2')}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n              {t('instructions.item3')}\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n              {t('instructions.item4')}\n            </li>\n          </ul>\n        </div>\n\n        {/* å¼€å§‹æŒ‰é’® - ç´«è‰²æ¸å˜ */}\n        <div className=\"text-center\">\n          <button\n            onClick={handleStartTest}\n            className=\"inline-flex items-center justify-center bg-gradient-to-r from-purple-600 to-purple-700 text-white text-lg px-10 py-4 rounded-xl font-semibold hover:from-purple-700 hover:to-purple-800 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl shadow-lg\"\n          >\n            <Play className=\"w-6 h-6 mr-3 flex-shrink-0\" />\n            <span>{t('navigation.startTest')}</span>\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // å¦‚æœæµ‹è¯•å®Œæˆï¼Œæ˜¾ç¤ºç»“æœ\n  if (result) {\n    const typeInfo = constitutionTypeInfo[locale]?.[result.primaryType] || constitutionTypeInfo.zh[result.primaryType];\n    \n    return (\n      <div className=\"max-w-6xl mx-auto\">\n        <NotificationContainer \n          notifications={notifications}\n          onRemove={removeNotification}\n        />\n        \n        {/* ç»“æœæ ‡é¢˜ */}\n        <div className=\"text-center mb-8\">\n          <div className=\"w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center\">\n            <CheckCircle className=\"w-10 h-10 text-green-600\" />\n          </div>\n          <h2 className=\"text-3xl font-bold text-neutral-800 mb-2\">\n            {t('result.title')}\n          </h2>\n          <p className=\"text-lg text-neutral-600\">\n            {t('result.subtitle')}\n          </p>\n        </div>\n\n        {/* ä½“è´¨ç±»å‹ç»“æœ */}\n        <div className=\"bg-gradient-to-br from-green-50 to-blue-50 p-8 rounded-xl mb-8\">\n          <div className=\"text-center mb-6\">\n            <h2 className=\"text-2xl font-bold text-green-700 mb-2\">\n              {typeInfo.name}\n            </h2>\n            <p className=\"text-lg text-neutral-700 mb-4\">\n              {typeInfo.description}\n            </p>\n            <div className=\"inline-flex items-center bg-white px-4 py-2 rounded-full\">\n              <span className=\"text-sm text-neutral-600 mr-2\">\n                {t('result.match')}\n              </span>\n              <span className=\"font-semibold text-green-600\">{result.confidence}%</span>\n            </div>\n          </div>\n\n          {/* ä½“è´¨ç‰¹å¾ */}\n          <div className=\"grid md:grid-cols-3 gap-6\">\n            <div>\n              <h3 className=\"font-semibold text-neutral-800 mb-3 flex items-center\">\n                <User className=\"w-5 h-5 mr-2 text-blue-600\" />\n                {t('result.constitutionFeatures')}\n              </h3>\n              <ul className=\"space-y-1\">\n                {typeInfo.characteristics.map((char, index) => (\n                  <li key={index} className=\"text-sm text-neutral-700\">â€¢ {char}</li>\n                ))}\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-neutral-800 mb-3 flex items-center\">\n                <AlertCircle className=\"w-5 h-5 mr-2 text-orange-600\" />\n                {t('result.commonSymptoms')}\n              </h3>\n              <ul className=\"space-y-1\">\n                {typeInfo.commonSymptoms.map((symptom, index) => (\n                  <li key={index} className=\"text-sm text-neutral-700\">â€¢ {symptom}</li>\n                ))}\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-neutral-800 mb-3 flex items-center\">\n                <Heart className=\"w-5 h-5 mr-2 text-red-600\" />\n                {t('result.menstrualFeatures')}\n              </h3>\n              <ul className=\"space-y-1\">\n                {typeInfo.menstrualFeatures.map((feature, index) => (\n                  <li key={index} className=\"text-sm text-neutral-700\">â€¢ {feature}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        {/* ä¸ªæ€§åŒ–å»ºè®® */}\n        <div className=\"grid lg:grid-cols-2 gap-8 mb-8\">\n          {/* ç©´ä½å»ºè®® */}\n          <div className=\"card\">\n            <h3 className=\"text-xl font-semibold text-neutral-800 mb-4 flex items-center\">\n              <MapPin className=\"w-6 h-6 mr-2 text-green-600\" />\n              {t('recommendations.acupoints.title')}\n            </h3>\n\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium text-neutral-700 mb-3\">\n                {t('recommendations.acupoints.primaryAcupoints')}\n              </h4>\n              <div className=\"space-y-3\">\n                {result.recommendations.acupoints.primaryPoints.map((point, index) => (\n                  <div key={index} className=\"bg-green-50 p-3 rounded-lg\">\n                    <h5 className=\"font-medium text-green-800\">{point.name}</h5>\n                    <p className=\"text-sm text-green-700 mb-1\">\n                      {t('recommendations.acupoints.location')}{point.location}\n                    </p>\n                    <p className=\"text-sm text-green-700 mb-1\">\n                      {t('recommendations.acupoints.function')}{point.function}\n                    </p>\n                    <p className=\"text-sm text-green-600\">\n                      {t('recommendations.acupoints.method')}{point.method}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"bg-neutral-50 p-4 rounded-lg\">\n              <h4 className=\"font-medium text-neutral-700 mb-2\">\n                {t('recommendations.acupoints.guidelines')}\n              </h4>\n              <p className=\"text-sm text-neutral-600 mb-1\">\n                <strong>{t('recommendations.acupoints.technique')}</strong>\n                {result.recommendations.acupoints.massageTechnique}\n              </p>\n              <p className=\"text-sm text-neutral-600 mb-1\">\n                <strong>{t('recommendations.acupoints.frequency')}</strong>\n                {result.recommendations.acupoints.frequency}\n              </p>\n              <p className=\"text-sm text-neutral-600\">\n                <strong>{t('recommendations.acupoints.duration')}</strong>\n                {result.recommendations.acupoints.duration}\n              </p>\n            </div>\n          </div>\n\n          {/* é¥®é£Ÿå»ºè®® */}\n          <div className=\"card\">\n            <h3 className=\"text-xl font-semibold text-neutral-800 mb-4 flex items-center\">\n              <Utensils className=\"w-6 h-6 mr-2 text-orange-600\" />\n              {t('recommendations.dietary.title')}\n            </h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <h4 className=\"font-medium text-green-700 mb-2\">\n                  {t('recommendations.dietary.beneficialFoods')}\n                </h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {result.recommendations.diet.beneficial.map((food, index) => (\n                    <span key={index} className=\"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm\">\n                      {food}\n                    </span>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <h4 className=\"font-medium text-red-700 mb-2\">\n                  {t('recommendations.dietary.foodsToAvoid')}\n                </h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {result.recommendations.diet.avoid.map((food, index) => (\n                    <span key={index} className=\"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm\">\n                      {food}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <h4 className=\"font-medium text-neutral-700 mb-2\">\n                  {t('recommendations.dietary.dietaryPrinciples')}\n                </h4>\n                <ul className=\"space-y-1\">\n                  {result.recommendations.diet.principles.map((principle, index) => (\n                    <li key={index} className=\"text-sm text-neutral-600\">â€¢ {principle}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* åœºæ™¯åŒ–ç”Ÿæ´»å»ºè®® */}\n        <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-xl mb-8\">\n          <h3 className=\"text-2xl font-semibold text-emerald-800 mb-6 flex items-center\">\n            <MapPin className=\"w-7 h-7 mr-3 text-green-600\" />\n            {t('recommendations.lifestyle.title')}\n          </h3>\n\n          <p className=\"text-emerald-700 mb-6\">\n            {t('recommendations.lifestyle.description')}\n          </p>\n\n          <div className=\"grid lg:grid-cols-3 gap-6\">\n            {scenarioBasedAdvice[locale]?.[result.primaryType]?.map((scenario, index) => (\n              <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm border border-green-200\">\n                <h4 className=\"font-semibold text-emerald-800 mb-4 flex items-center\">\n                  <span className=\"text-2xl mr-3\">{scenario.icon}</span>\n                  {scenario.scenario}\n                </h4>\n\n                <ul className=\"space-y-3\">\n                  {scenario.tips.map((tip, tipIndex) => (\n                    <li key={tipIndex} className=\"text-sm text-emerald-700 flex items-start\">\n                      <span className=\"w-2 h-2 bg-emerald-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      {tip}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )) || []}\n          </div>\n\n          <div className=\"mt-6 p-4 bg-green-100 rounded-lg\">\n            <p className=\"text-sm text-green-800\">\n              <strong>{t('recommendations.lifestyle.reminder')}</strong>\n              {t('recommendations.lifestyle.reminderText')}\n            </p>\n          </div>\n        </div>\n\n        {/* ç—›ç»ä¸“é¡¹å»ºè®® */}\n        {hasMenstrualPainSymptoms(currentSession?.answers || []) && (\n          <div className=\"bg-gradient-to-br from-pink-50 to-purple-50 p-8 rounded-xl mb-8\">\n            <h3 className=\"text-2xl font-semibold text-purple-800 mb-6 flex items-center\">\n              <Heart className=\"w-7 h-7 mr-3 text-pink-600\" />\n              {t('recommendations.menstrualPain.title')}\n            </h3>\n\n            <div className=\"grid lg:grid-cols-2 gap-6\">\n              {/* åŸºäºä½“è´¨çš„ç—›ç»å»ºè®® */}\n              <div className=\"bg-white p-6 rounded-lg shadow-sm\">\n                <h4 className=\"font-semibold text-purple-700 mb-4 flex items-center\">\n                  <MapPin className=\"w-5 h-5 mr-2\" />\n                  {t('recommendations.menstrualPain.acupointTherapy')}\n                </h4>\n                {getMenstrualPainAcupoints(result.primaryType, locale).map((point: any, index: number) => (\n                  <div key={index} className=\"mb-3 p-3 bg-purple-50 rounded-lg\">\n                    <h5 className=\"font-medium text-purple-800\">{point.name}</h5>\n                    <p className=\"text-sm text-purple-700\">{point.description}</p>\n                  </div>\n                ))}\n              </div>\n\n              {/* ç”Ÿæ´»æ–¹å¼å»ºè®® */}\n              <div className=\"bg-white p-6 rounded-lg shadow-sm\">\n                <h4 className=\"font-semibold text-purple-700 mb-4 flex items-center\">\n                  <Lightbulb className=\"w-5 h-5 mr-2\" />\n                  {t('recommendations.menstrualPain.lifestyleAdjustments')}\n                </h4>\n                <ul className=\"space-y-2\">\n                  {getMenstrualPainLifestyleTips(result.primaryType, locale).map((tip: any, index: number) => (\n                    <li key={index} className=\"text-sm text-purple-700 flex items-start\">\n                      <span className=\"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      {tip}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* ä¸ªæ€§åŒ–åº”æ€¥åŒ…æ¨è */}\n        {hasMenstrualPainSymptoms(currentSession?.answers || []) && (\n          <div className=\"bg-gradient-to-br from-orange-50 to-amber-50 p-8 rounded-xl mb-8\">\n            <h3 className=\"text-2xl font-semibold text-orange-800 mb-6 flex items-center\">\n              <Package className=\"w-7 h-7 mr-3 text-orange-600\" />\n              {t('emergencyKit.title')}\n            </h3>\n\n            <p className=\"text-orange-700 mb-6\">\n              {t('emergencyKit.description')}\n            </p>\n\n            <div className=\"space-y-6\">\n              {emergencyKitRecommendations[locale]?.[result.primaryType]?.map((category, categoryIndex) => (\n                <div key={categoryIndex} className=\"bg-white p-6 rounded-lg shadow-sm border border-orange-200\">\n                  <h4 className=\"font-semibold text-orange-800 mb-4 flex items-center\">\n                    <span className=\"w-3 h-3 bg-orange-500 rounded-full mr-3\"></span>\n                    {category.category}\n                  </h4>\n\n                  <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {category.items.map((item, itemIndex) => (\n                      <div key={itemIndex} className={`p-4 rounded-lg border-2 ${\n                        item.priority === 'high' ? 'border-red-200 bg-red-50' :\n                        item.priority === 'medium' ? 'border-yellow-200 bg-yellow-50' :\n                        'border-green-200 bg-green-50'\n                      }`}>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h5 className=\"font-medium text-orange-800\">{item.name}</h5>\n                          <span className={`text-xs px-2 py-1 rounded-full ${\n                            item.priority === 'high' ? 'bg-red-100 text-red-700' :\n                            item.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' :\n                            'bg-green-100 text-green-700'\n                          }`}>\n                            {item.priority === 'high' ? t('emergencyKit.priority.high') :\n                             item.priority === 'medium' ? t('emergencyKit.priority.medium') :\n                             t('emergencyKit.priority.low')}\n                          </span>\n                        </div>\n\n                        <p className=\"text-sm text-orange-600\">\n                          {item.reason}\n                        </p>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )) || []}\n            </div>\n\n            <div className=\"mt-6 p-4 bg-orange-100 rounded-lg\">\n              <p className=\"text-sm text-orange-800\">\n                <strong>{t('emergencyKit.packingTips')}</strong>\n                {t('emergencyKit.packingAdvice')}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* ç›¸å…³æ–‡ç« æ¨è */}\n        <div className=\"bg-white p-8 rounded-xl shadow-sm mb-8\">\n          <h3 className=\"text-2xl font-semibold text-neutral-800 mb-6 flex items-center\">\n            <BookOpen className=\"w-7 h-7 mr-3 text-blue-600\" />\n            {t('articles.title')}\n          </h3>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {getRecommendedArticles(result.primaryType, currentSession?.answers || [], locale).map((article, index) => (\n              <div key={index} className=\"border border-neutral-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                <div className=\"flex items-center mb-3\">\n                  <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\n                    <FileText className=\"w-5 h-5 text-blue-600\" />\n                  </div>\n                  <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">\n                    {article.category}\n                  </span>\n                </div>\n                <h4 className=\"font-semibold text-neutral-800 mb-2 line-clamp-2\">\n                  {article.title}\n                </h4>\n                <p className=\"text-sm text-neutral-600 mb-3 line-clamp-3\">\n                  {article.description}\n                </p>\n                <a\n                  href={article.link}\n                  className=\"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                >\n                  {t('articles.readMore')}\n                  <ArrowRight className=\"w-4 h-4 ml-1\" />\n                </a>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* ç¤¾äº¤æ²Ÿé€šæ¨¡æ¿ */}\n        {hasMenstrualPainSymptoms(currentSession?.answers || []) && (\n          <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-xl mb-8\">\n            <h3 className=\"text-2xl font-semibold text-indigo-800 mb-6 flex items-center\">\n              <MessageCircle className=\"w-7 h-7 mr-3 text-blue-600\" />\n              {t('communication.title')}\n            </h3>\n\n            <p className=\"text-indigo-700 mb-6\">\n              {t('communication.description')}\n            </p>\n\n            <div className=\"grid lg:grid-cols-3 gap-6\">\n              {communicationTemplates[locale]?.map((scenario, scenarioIndex) => (\n                <div key={scenarioIndex} className=\"bg-white p-6 rounded-lg shadow-sm\">\n                  <h4 className=\"font-semibold text-indigo-800 mb-4 flex items-center\">\n                    <Users className=\"w-5 h-5 mr-2\" />\n                    {scenario.scenario}\n                  </h4>\n\n                  <div className=\"space-y-4\">\n                    {scenario.templates.map((template, templateIndex) => (\n                      <div key={templateIndex} className=\"border border-indigo-200 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h5 className=\"font-medium text-indigo-700\">{template.title}</h5>\n                          <span className={`text-xs px-2 py-1 rounded-full ${\n                            template.tone === 'intimate' ? 'bg-pink-100 text-pink-700' :\n                            template.tone === 'casual' ? 'bg-green-100 text-green-700' :\n                            'bg-blue-100 text-blue-700'\n                          }`}>\n                            {template.tone === 'intimate' ? t('communication.styles.intimate') :\n                             template.tone === 'casual' ? t('communication.styles.casual') :\n                             t('communication.styles.formal')}\n                          </span>\n                        </div>\n\n                        <p className=\"text-sm text-indigo-600 mb-3 leading-relaxed\">\n                          &ldquo;{template.content}&rdquo;\n                        </p>\n\n                        <button\n                          onClick={() => {\n                            navigator.clipboard.writeText(template.content);\n                            // å¯ä»¥æ·»åŠ å¤åˆ¶æˆåŠŸçš„æç¤º\n                          }}\n                          className=\"flex items-center text-xs text-indigo-600 hover:text-indigo-800 transition-colors\"\n                        >\n                          <Copy className=\"w-3 h-3 mr-1\" />\n                          {t('communication.copyText')}\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )) || []}\n            </div>\n\n            <div className=\"mt-6 p-4 bg-blue-100 rounded-lg\">\n              <p className=\"text-sm text-blue-800\">\n                <strong>{t('communication.usageTips')}</strong>\n                {t('communication.usageAdvice')}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* é‡æ–°æµ‹è¯•æŒ‰é’® */}\n        <div className=\"text-center\">\n          <button\n            onClick={resetTest}\n            className=\"btn-secondary\"\n          >\n            {t('navigation.retakeTest')}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // æ˜¾ç¤ºé—®é¢˜\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <NotificationContainer \n        notifications={notifications}\n        onRemove={removeNotification}\n      />\n      \n      {isLoading && <LoadingSpinner />}\n      \n      {/* è¿›åº¦æ¡ - ç´«è‰²ä¸»é¢˜ */}\n      <div className=\"mb-8 bg-white p-6 rounded-xl shadow-lg border border-purple-100\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <span className=\"text-sm font-medium text-gray-700 bg-purple-50 px-3 py-1 rounded-full\">\n            {locale === 'zh'\n              ? `ç¬¬ ${currentQuestionIndex + 1} é¢˜ï¼Œå…± ${totalQuestions} é¢˜`\n              : `Question ${currentQuestionIndex + 1} of ${totalQuestions}`\n            }\n          </span>\n          <span className=\"text-sm font-medium text-purple-600 bg-purple-50 px-3 py-1 rounded-full\">\n            {Math.round(progress)}% {locale === 'zh' ? 'å®Œæˆ' : 'Complete'}\n          </span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\">\n          <div\n            className=\"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500 ease-out shadow-sm\"\n            style={{ width: `${progress}%` }}\n          />\n        </div>\n      </div>\n\n      {currentQuestion && (\n        <div className=\"bg-white rounded-xl shadow-lg border border-purple-100 p-8 animate-fade-in\">\n          {/* é—®é¢˜æ ‡é¢˜ - ç´«è‰²ä¸»é¢˜ */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-3 leading-tight\">\n              {currentQuestion.title}\n            </h2>\n            {currentQuestion.description && (\n              <p className=\"text-gray-600 text-lg leading-relaxed\">\n                {currentQuestion.description}\n              </p>\n            )}\n          </div>\n\n          {/* é€‰é¡¹ */}\n          <div className=\"mb-8\">\n            {currentQuestion.type === 'scale' ? (\n              // æ»‘å—ç±»å‹é—®é¢˜\n              <div className=\"space-y-6\">\n                <div className=\"px-4 pain-scale-container\">\n                  <input\n                    type=\"range\"\n                    min={currentQuestion.validation?.min || 0}\n                    max={currentQuestion.validation?.max || 10}\n                    value={selectedAnswers[currentQuestion.id] || 0}\n                    onChange={(e) => handleAnswerSelect(currentQuestion.id, e.target.value)}\n                    className=\"w-full pain-scale cursor-pointer outline-none rounded-lg\"\n                    style={getRangeStyle(\n                      Number(selectedAnswers[currentQuestion.id] || 0),\n                      Number(currentQuestion.validation?.min || 0),\n                      Number(currentQuestion.validation?.max || 10)\n                    )}\n                  />\n                  <div className=\"flex justify-between text-sm text-neutral-600 mt-2\">\n                    <span className=\"text-xs sm:text-sm\">{t('painScale.levels.none')}</span>\n                    <span className=\"text-xs sm:text-sm\">{t('painScale.levels.mild')}</span>\n                    <span className=\"text-xs sm:text-sm\">{t('painScale.levels.moderate')}</span>\n                    <span className=\"text-xs sm:text-sm\">{t('painScale.levels.severe')}</span>\n                    <span className=\"text-xs sm:text-sm\">{t('painScale.levels.extreme')}</span>\n                  </div>\n                </div>\n\n                {/* å½“å‰é€‰æ‹©çš„å€¼æ˜¾ç¤º - å¢å¼ºç´«è‰²ä¸»é¢˜ */}\n                <div className=\"text-center\">\n                  <div className=\"inline-flex items-center bg-gradient-to-r from-purple-100 via-purple-50 to-pink-100 px-8 py-4 rounded-2xl shadow-lg border border-purple-200\">\n                    <Heart className=\"w-6 h-6 text-purple-600 mr-3\" />\n                    <span className=\"text-xl font-bold text-purple-800\">\n                      {t('painScale.title')}\n                      <span className=\"text-3xl font-extrabold text-purple-600 mx-2\">{selectedAnswers[currentQuestion.id] || 0}</span>\n                      <span className=\"text-base font-medium text-purple-700 ml-2\">\n                        ({currentQuestion.options.find(opt => opt.value == (selectedAnswers[currentQuestion.id] || 0))?.label})\n                      </span>\n                    </span>\n                  </div>\n                </div>\n\n                {/* ç–¼ç—›ç¨‹åº¦è¯´æ˜ - ç´«è‰²ä¸»é¢˜ */}\n                <div className=\"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-xl overflow-hidden border border-purple-200 shadow-sm\">\n                  <h4 className=\"font-semibold text-purple-800 mb-4 flex items-center\">\n                    <BookOpen className=\"w-5 h-5 mr-2\" />\n                    {t('painScale.reference')}\n                  </h4>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-purple-700\">\n                    <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                      <span className=\"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      <span><strong>0-2:</strong> {t('painScale.descriptions.0-2')}</span>\n                    </div>\n                    <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                      <span className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      <span><strong>3-4:</strong> {t('painScale.descriptions.3-4')}</span>\n                    </div>\n                    <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                      <span className=\"w-2 h-2 bg-orange-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      <span><strong>5-7:</strong> {t('painScale.descriptions.5-7')}</span>\n                    </div>\n                    <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                      <span className=\"w-2 h-2 bg-red-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                      <span><strong>8-10:</strong> {t('painScale.descriptions.8-10')}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : currentQuestion.type === 'multiple' ? (\n              // å¤šé€‰é—®é¢˜ - ç´«è‰²ä¸»é¢˜\n              <div className=\"space-y-4\">\n                {currentQuestion.options.map((option) => {\n                  const currentValues = Array.isArray(selectedAnswers[currentQuestion.id])\n                    ? selectedAnswers[currentQuestion.id] as string[]\n                    : selectedAnswers[currentQuestion.id]\n                      ? [selectedAnswers[currentQuestion.id] as string]\n                      : [];\n                  const isSelected = currentValues.includes(String(option.value));\n\n                  return (\n                    <label\n                      key={option.value}\n                      className={`block p-5 border-2 rounded-xl cursor-pointer transition-all duration-300 transform hover:-translate-y-1 ${\n                        isSelected\n                          ? 'border-purple-500 bg-gradient-to-r from-purple-50 to-purple-100 shadow-lg'\n                          : 'border-gray-200 hover:border-purple-300 hover:shadow-md bg-white'\n                      }`}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={isSelected}\n                        onChange={() => handleMultipleAnswerSelect(currentQuestion.id, String(option.value))}\n                        className=\"sr-only\"\n                      />\n                      <div className=\"flex items-center\">\n                        <div className={`w-5 h-5 rounded border-2 mr-4 flex items-center justify-center ${\n                          isSelected\n                            ? 'border-purple-500 bg-purple-500'\n                            : 'border-gray-300'\n                        }`}>\n                          {isSelected && (\n                            <CheckCircle className=\"w-3 h-3 text-white\" />\n                          )}\n                        </div>\n                        <span className=\"text-gray-800 font-medium\">{option.label}</span>\n                      </div>\n                    </label>\n                  );\n                })}\n              </div>\n            ) : (\n              // æ™®é€šå•é€‰é—®é¢˜ - ç´«è‰²ä¸»é¢˜\n              <div className=\"space-y-4\">\n                {currentQuestion.options.map((option) => (\n                  <label\n                    key={option.value}\n                    className={`block p-5 border-2 rounded-xl cursor-pointer transition-all duration-300 transform hover:-translate-y-1 ${\n                      selectedAnswers[currentQuestion.id] === option.value\n                        ? 'border-purple-500 bg-gradient-to-r from-purple-50 to-purple-100 shadow-lg'\n                        : 'border-gray-200 hover:border-purple-300 hover:shadow-md bg-white'\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={currentQuestion.id}\n                      value={option.value}\n                      checked={selectedAnswers[currentQuestion.id] === option.value}\n                      onChange={() => handleAnswerSelect(currentQuestion.id, option.value)}\n                      className=\"sr-only\"\n                    />\n                    <div className=\"flex items-center\">\n                      <div className={`w-5 h-5 rounded-full border-2 mr-4 flex items-center justify-center ${\n                        selectedAnswers[currentQuestion.id] === option.value\n                          ? 'border-purple-500 bg-purple-500'\n                          : 'border-gray-300'\n                      }`}>\n                        {selectedAnswers[currentQuestion.id] === option.value && (\n                          <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n                        )}\n                      </div>\n                      <span className=\"text-gray-800 font-medium\">{option.label}</span>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* å¯¼èˆªæŒ‰é’® - ç´«è‰²ä¸»é¢˜ */}\n          <div className=\"flex justify-between items-center pt-6\">\n            <button\n              onClick={handlePrevious}\n              disabled={currentQuestionIndex === 0}\n              className=\"flex items-center px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100\"\n            >\n              <ArrowLeft className=\"w-5 h-5 mr-2\" />\n              {t('navigation.previous')}\n            </button>\n\n            <button\n              onClick={handleNext}\n              disabled={!canProceed()}\n              className=\"flex items-center px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-purple-800 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none disabled:hover:shadow-none\"\n            >\n              {currentQuestionIndex >= totalQuestions - 1\n                ? t('navigation.completeTest')\n                : t('navigation.next')\n              }\n              <ArrowRight className=\"w-5 h-5 ml-2\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n          <p className=\"text-red-700\">{error}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/components/CycleTrackerTool.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'STORAGE_KEYS.CURRENT_DATA' and 'STORAGE_KEYS.HISTORY'. Either include them or remove the dependency array.","line":82,"column":6,"nodeType":"ArrayExpression","endLine":82,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [STORAGE_KEYS.CURRENT_DATA, STORAGE_KEYS.HISTORY]","fix":{"range":[2408,2410],"text":"[STORAGE_KEYS.CURRENT_DATA, STORAGE_KEYS.HISTORY]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2524,2527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2524,2527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useTranslations } from 'next-intl';\n\ninterface CycleTrackerToolProps {\n  locale: string;\n}\n\ninterface HistoryRecord {\n  id: string;\n  date: string;\n  lastPeriodDate: string;\n  cycleLength: number;\n  prediction: {\n    nextPeriod: string;\n    ovulation: string;\n    fertilityWindow: { start: string; end: string };\n  };\n}\n\nexport default function CycleTrackerTool({ locale }: CycleTrackerToolProps) {\n  const [lastPeriodDate, setLastPeriodDate] = useState('');\n  const [cycleLength, setCycleLength] = useState(28);\n  const [prediction, setPrediction] = useState<{\n    nextPeriod: string;\n    ovulation: string;\n    fertilityWindow: { start: string; end: string };\n  } | null>(null);\n  const [historyRecords, setHistoryRecords] = useState<HistoryRecord[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved'>('idle');\n  const [showHistory, setShowHistory] = useState(false);\n\n  // ä½¿ç”¨ç¿»è¯‘é”®\n  const t = useTranslations();\n\n  // æœ¬åœ°å­˜å‚¨é”®å\n  const STORAGE_KEYS = {\n    CURRENT_DATA: 'cycle-tracker-current',\n    HISTORY: 'cycle-tracker-history'\n  };\n\n  // é¡µé¢åŠ è½½æ—¶æ¢å¤æ•°æ®\n  useEffect(() => {\n    const loadSavedData = () => {\n      try {\n        // åŠ è½½å½“å‰æ•°æ®\n        const savedCurrentData = localStorage.getItem(STORAGE_KEYS.CURRENT_DATA);\n        if (savedCurrentData) {\n          const currentData = JSON.parse(savedCurrentData);\n          if (currentData.lastPeriodDate) {\n            setLastPeriodDate(currentData.lastPeriodDate);\n          }\n          if (currentData.cycleLength) {\n            setCycleLength(currentData.cycleLength);\n          }\n          if (currentData.prediction) {\n            setPrediction(currentData.prediction);\n          }\n        }\n\n        // åŠ è½½å†å²è®°å½•\n        const savedHistory = localStorage.getItem(STORAGE_KEYS.HISTORY);\n        if (savedHistory) {\n          const history = JSON.parse(savedHistory);\n          if (Array.isArray(history)) {\n            setHistoryRecords(history.slice(0, 10)); // æœ€å¤šä¿ç•™10æ¡è®°å½•\n          }\n        }\n      } catch (error) {\n        console.error('Error loading saved data:', error);\n        // æ•°æ®æŸåæ—¶æ¸…é™¤\n        localStorage.removeItem(STORAGE_KEYS.CURRENT_DATA);\n        localStorage.removeItem(STORAGE_KEYS.HISTORY);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadSavedData();\n  }, []);\n\n  // ä¿å­˜å½“å‰æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨\n  const saveCurrentData = (data: { lastPeriodDate: string; cycleLength: number; prediction?: any }) => {\n    try {\n      setSaveStatus('saving');\n      localStorage.setItem(STORAGE_KEYS.CURRENT_DATA, JSON.stringify(data));\n      setSaveStatus('saved');\n      setTimeout(() => setSaveStatus('idle'), 2000);\n    } catch (error) {\n      console.error('Error saving data:', error);\n      setSaveStatus('idle');\n    }\n  };\n\n  // ä¿å­˜å†å²è®°å½•\n  const saveToHistory = (record: HistoryRecord) => {\n    try {\n      const updatedHistory = [record, ...historyRecords.slice(0, 9)]; // ä¿ç•™æœ€æ–°10æ¡\n      setHistoryRecords(updatedHistory);\n      localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(updatedHistory));\n    } catch (error) {\n      console.error('Error saving history:', error);\n    }\n  };\n\n  // åˆ é™¤å†å²è®°å½•\n  const deleteHistoryRecord = (id: string) => {\n    const updatedHistory = historyRecords.filter(record => record.id !== id);\n    setHistoryRecords(updatedHistory);\n    localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(updatedHistory));\n  };\n\n  // æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•\n  const clearAllHistory = () => {\n    if (confirm(t('cycleTracker.confirmClearAll'))) {\n      setHistoryRecords([]);\n      localStorage.removeItem(STORAGE_KEYS.HISTORY);\n    }\n  };\n\n  // å¯¼å‡ºæ•°æ®\n  const exportData = () => {\n    const exportData = {\n      currentData: { lastPeriodDate, cycleLength, prediction },\n      history: historyRecords,\n      exportDate: new Date().toISOString()\n    };\n\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\n    const url = URL.createObjectURL(dataBlob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `cycle-tracker-data-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  // è·å–ä»Šå¤©æ—¥æœŸ\n  const getTodayDate = () => {\n    const today = new Date();\n    const year = today.getFullYear();\n    const month = String(today.getMonth() + 1).padStart(2, '0');\n    const day = String(today.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  // æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString(locale === 'zh' ? 'zh-CN' : 'en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  // è®¡ç®—é¢„æµ‹\n  const calculatePrediction = () => {\n    if (!lastPeriodDate) return;\n\n    const lastPeriod = new Date(lastPeriodDate);\n\n    // è®¡ç®—ä¸‹æ¬¡æœˆç»æ—¥æœŸ\n    const nextPeriod = new Date(lastPeriod);\n    nextPeriod.setUTCDate(nextPeriod.getUTCDate() + cycleLength);\n\n    // è®¡ç®—æ’åµæ—¥æœŸï¼ˆé€šå¸¸åœ¨ä¸‹æ¬¡æœˆç»å‰14å¤©ï¼‰\n    const ovulation = new Date(nextPeriod);\n    ovulation.setUTCDate(ovulation.getUTCDate() - 14);\n\n    // è®¡ç®—æ˜“å­•æœŸï¼ˆæ’åµå‰5å¤©åˆ°æ’åµå1å¤©ï¼‰\n    const fertilityStart = new Date(ovulation);\n    fertilityStart.setUTCDate(fertilityStart.getUTCDate() - 5);\n    const fertilityEnd = new Date(ovulation);\n    fertilityEnd.setUTCDate(fertilityEnd.getUTCDate() + 1);\n\n    const newPrediction = {\n      nextPeriod: nextPeriod.toISOString().split('T')[0],\n      ovulation: ovulation.toISOString().split('T')[0],\n      fertilityWindow: {\n        start: fertilityStart.toISOString().split('T')[0],\n        end: fertilityEnd.toISOString().split('T')[0]\n      }\n    };\n\n    setPrediction(newPrediction);\n\n    // ä¿å­˜å½“å‰æ•°æ®\n    const currentData = { lastPeriodDate, cycleLength, prediction: newPrediction };\n    saveCurrentData(currentData);\n\n    // ä¿å­˜åˆ°å†å²è®°å½•\n    const historyRecord: HistoryRecord = {\n      id: Date.now().toString(),\n      date: new Date().toISOString(),\n      lastPeriodDate,\n      cycleLength,\n      prediction: newPrediction\n    };\n    saveToHistory(historyRecord);\n  };\n\n  // é‡ç½®\n  const resetCalculation = () => {\n    setLastPeriodDate('');\n    setCycleLength(28);\n    setPrediction(null);\n\n    // æ¸…é™¤ä¿å­˜çš„å½“å‰æ•°æ®\n    localStorage.removeItem(STORAGE_KEYS.CURRENT_DATA);\n  };\n\n  // å¤„ç†æ—¥æœŸè¾“å…¥\n  const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedDate = e.target.value;\n    const today = getTodayDate();\n\n    if (new Date(selectedDate) > new Date(today)) {\n      alert(t('cycleTracker.dateValidation'));\n      return;\n    }\n\n    setLastPeriodDate(selectedDate);\n\n    // è‡ªåŠ¨ä¿å­˜å½“å‰æ•°æ®\n    const currentData = { lastPeriodDate: selectedDate, cycleLength, prediction };\n    saveCurrentData(currentData);\n  };\n\n  // å¤„ç†å‘¨æœŸé•¿åº¦å˜åŒ–\n  const handleCycleLengthChange = (newLength: number) => {\n    setCycleLength(newLength);\n\n    // è‡ªåŠ¨ä¿å­˜å½“å‰æ•°æ®\n    const currentData = { lastPeriodDate, cycleLength: newLength, prediction };\n    saveCurrentData(currentData);\n  };\n\n  // åŠ è½½çŠ¶æ€\n  if (isLoading) {\n    return (\n      <div className=\"max-w-2xl mx-auto p-6\">\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">{t('cycleTracker.loading')}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">{t('cycleTracker.title')}</h1>\n        <p className=\"text-lg text-gray-600\">{t('cycleTracker.subtitle')}</p>\n\n        {/* ä¿å­˜çŠ¶æ€æç¤º */}\n        {saveStatus === 'saved' && (\n          <div className=\"mt-4 inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg\">\n            <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n            </svg>\n            {t('cycleTracker.saveSuccess')}\n          </div>\n        )}\n      </div>\n\n      {/* å†å²è®°å½•åˆ‡æ¢æŒ‰é’® */}\n      <div className=\"mb-6 text-center\">\n        <button\n          onClick={() => setShowHistory(!showHistory)}\n          className=\"inline-flex items-center px-4 py-2 border border-purple-300 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors\"\n        >\n          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          {showHistory ? t('cycleTracker.hideHistory') : t('cycleTracker.showHistory')}\n          {historyRecords.length > 0 && (\n            <span className=\"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full\">\n              {historyRecords.length}\n            </span>\n          )}\n        </button>\n      </div>\n\n      {/* å†å²è®°å½•éƒ¨åˆ† */}\n      {showHistory && (\n        <div className=\"mb-8 bg-purple-50 rounded-xl p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-xl font-semibold text-gray-800\">{t('cycleTracker.historyTitle')}</h3>\n            <div className=\"flex space-x-2\">\n              {historyRecords.length > 0 && (\n                <>\n                  <button\n                    onClick={exportData}\n                    className=\"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded hover:bg-purple-200 transition-colors\"\n                  >\n                    {t('cycleTracker.exportData')}\n                  </button>\n                  <button\n                    onClick={clearAllHistory}\n                    className=\"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors\"\n                  >\n                    {t('cycleTracker.clearAllHistory')}\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n\n          {historyRecords.length === 0 ? (\n            <p className=\"text-gray-500 text-center py-4\">{t('cycleTracker.noHistory')}</p>\n          ) : (\n            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n              {historyRecords.map((record) => (\n                <div key={record.id} className=\"bg-white rounded-lg p-4 border border-purple-200\">\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <div>\n                      <p className=\"text-sm text-gray-500\">\n                        {t('cycleTracker.recordedOn')} {formatDate(record.date.split('T')[0])}\n                      </p>\n                      <p className=\"font-medium text-gray-800\">\n                        {t('cycleTracker.cycleLength')}: {record.cycleLength} {t('cycleTracker.days')}\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => deleteHistoryRecord(record.id)}\n                      className=\"text-red-500 hover:text-red-700 text-sm\"\n                    >\n                      {t('cycleTracker.deleteRecord')}\n                    </button>\n                  </div>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs\">\n                    <div className=\"bg-pink-100 text-pink-800 p-2 rounded\">\n                      <div className=\"font-medium\">{t('cycleTracker.nextPeriodLabel')}</div>\n                      <div>{formatDate(record.prediction.nextPeriod)}</div>\n                    </div>\n                    <div className=\"bg-purple-100 text-purple-800 p-2 rounded\">\n                      <div className=\"font-medium\">{t('cycleTracker.ovulationLabel')}</div>\n                      <div>{formatDate(record.prediction.ovulation)}</div>\n                    </div>\n                    <div className=\"bg-green-100 text-green-800 p-2 rounded\">\n                      <div className=\"font-medium\">{t('cycleTracker.fertilityWindowLabel')}</div>\n                      <div>\n                        {formatDate(record.prediction.fertilityWindow.start)} {t('cycleTracker.to')} {formatDate(record.prediction.fertilityWindow.end)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {!prediction ? (\n        <div className=\"space-y-6\">\n          <div>\n            <label className=\"block text-lg font-semibold mb-3 text-gray-800\">\n              {t('cycleTracker.lastPeriodLabel')}\n            </label>\n            <input\n              type=\"date\"\n              value={lastPeriodDate}\n              onChange={handleDateChange}\n              max={getTodayDate()}\n              className=\"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base\"\n            />\n            <p className=\"mt-2 text-sm text-red-600\">âš ï¸ {t('cycleTracker.dateValidation')}</p>\n          </div>\n\n          <div>\n            <label className=\"block text-lg font-semibold mb-3 text-gray-800\">\n              {t('cycleTracker.cycleLengthLabel')}\n            </label>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex-1 relative\">\n                <input\n                  type=\"range\"\n                  min=\"21\"\n                  max=\"35\"\n                  value={cycleLength}\n                  onChange={(e) => handleCycleLengthChange(Number(e.target.value))}\n                  className=\"w-full h-3 bg-gradient-to-r from-purple-200 via-purple-300 to-purple-400 rounded-lg appearance-none cursor-pointer slider\"\n                  style={{\n                    background: `linear-gradient(to right,\n                      #e9d5ff 0%,\n                      #c4b5fd ${((cycleLength - 21) / 14) * 100}%,\n                      #e5e7eb ${((cycleLength - 21) / 14) * 100}%,\n                      #e5e7eb 100%)`\n                  }}\n                />\n                {/* æ»‘å—æ ·å¼ */}\n                <style>{`\n                  .slider::-webkit-slider-thumb {\n                    appearance: none;\n                    height: 20px;\n                    width: 20px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #9333ea, #ec4899);\n                    cursor: pointer;\n                    border: 2px solid white;\n                    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n                  }\n                  .slider::-moz-range-thumb {\n                    height: 20px;\n                    width: 20px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #9333ea, #ec4899);\n                    cursor: pointer;\n                    border: 2px solid white;\n                    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n                  }\n                `}</style>\n              </div>\n              <span className=\"text-2xl font-bold text-purple-600 min-w-[3rem] text-center\">\n                {cycleLength}\n              </span>\n            </div>\n            <p className=\"mt-2 text-sm text-gray-500\">{t('cycleTracker.cycleLengthRange')}</p>\n          </div>\n\n          <div className=\"flex justify-center pt-6\">\n            <button\n              onClick={calculatePrediction}\n              disabled={!lastPeriodDate}\n              className=\"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-8 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n            >\n              {t('cycleTracker.calculateButton')}\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">{t('cycleTracker.predictionTitle')}</h2>\n          </div>\n\n          <div className=\"grid gap-6\">\n            <div className=\"bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl p-6 text-white\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <span className=\"text-3xl\">ğŸ©¸</span>\n                <h3 className=\"text-xl font-semibold\">{t('cycleTracker.nextPeriodLabel')}</h3>\n              </div>\n              <p className=\"text-2xl font-bold\">{formatDate(prediction.nextPeriod)}</p>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl p-6 text-white\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <span className=\"text-3xl\">ğŸ¥š</span>\n                <h3 className=\"text-xl font-semibold\">{t('cycleTracker.ovulationLabel')}</h3>\n              </div>\n              <p className=\"text-2xl font-bold\">{formatDate(prediction.ovulation)}</p>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-green-500 to-teal-500 rounded-xl p-6 text-white\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <span className=\"text-3xl\">ğŸ’š</span>\n                <h3 className=\"text-xl font-semibold\">{t('cycleTracker.fertilityWindowLabel')}</h3>\n              </div>\n              <p className=\"text-xl font-bold\">\n                {formatDate(prediction.fertilityWindow.start)} {t('cycleTracker.to')} {formatDate(prediction.fertilityWindow.end)}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex justify-center pt-6\">\n            <button\n              onClick={resetCalculation}\n              className=\"border border-purple-600 text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-purple-50 transition-colors\"\n            >\n              {t('cycleTracker.resetButton')}\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"mt-8 text-sm text-gray-500 text-center\">\n        <p>{t('cycleTracker.disclaimer')}</p>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/components/PainTrackerTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Settings' is defined but never used.","line":5,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[707,710],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[707,710],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1369,1372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1369,1372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":61,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1967,1970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1967,1970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":89,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":89,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":115,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3289,3292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3289,3292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { Plus, List, BarChart3, Download, Settings } from 'lucide-react';\nimport { usePainTracker } from '../shared/hooks/usePainTracker';\nimport { useNotifications } from '../shared/hooks/useNotifications';\nimport PainEntryForm from '../pain-tracker/components/PainEntryForm';\nimport NotificationContainer from '../shared/components/NotificationContainer';\nimport { LoadingOverlay } from '../shared/components/LoadingSpinner';\n\ninterface PainTrackerToolProps {\n  locale: string;\n}\n\ntype ActiveTab = 'overview' | 'add' | 'entries' | 'statistics' | 'export';\n\ninterface EditingEntry {\n  id: string;\n  data: any;\n}\n\nexport default function PainTrackerTool({ locale }: PainTrackerToolProps) {\n  const t = useTranslations('painTracker');\n  const [activeTab, setActiveTab] = useState<ActiveTab>('overview');\n  const [isFormLoading, setIsFormLoading] = useState(false);\n  const [editingEntry, setEditingEntry] = useState<EditingEntry | null>(null);\n  \n  const {\n    entries,\n    statistics,\n    isLoading,\n    error,\n    addEntry,\n    updateEntry,\n    deleteEntry,\n    setError\n  } = usePainTracker();\n\n  const {\n    notifications,\n    removeNotification,\n    addSuccessNotification,\n    addErrorNotification\n  } = useNotifications();\n\n  const handleAddEntry = async (data: any) => {\n    setIsFormLoading(true);\n    try {\n      const result = await addEntry(data);\n      if (result.success) {\n        addSuccessNotification(\n          t('messages.saveSuccess'),\n          t('form.save')\n        );\n        setActiveTab('entries');\n        return { success: true };\n      } else {\n        return result;\n      }\n    } catch (error) {\n      addErrorNotification(\n        t('messages.saveError'),\n        t('messages.validationError')\n      );\n      return { success: false };\n    } finally {\n      setIsFormLoading(false);\n    }\n  };\n\n  const handleEditEntry = async (data: any) => {\n    if (!editingEntry) return { success: false };\n\n    setIsFormLoading(true);\n    try {\n      const result = await updateEntry(editingEntry.id, data);\n      if (result.success) {\n        addSuccessNotification(\n          t('messages.updateSuccess'),\n          t('form.save')\n        );\n        setEditingEntry(null);\n        setActiveTab('entries');\n        return { success: true };\n      } else {\n        return result;\n      }\n    } catch (error) {\n      addErrorNotification(\n        t('messages.updateError'),\n        t('messages.validationError')\n      );\n      return { success: false };\n    } finally {\n      setIsFormLoading(false);\n    }\n  };\n\n  const handleDeleteEntry = async (id: string) => {\n    if (window.confirm(t('messages.confirmDelete'))) {\n      try {\n        const success = await deleteEntry(id);\n        if (success) {\n          addSuccessNotification(\n            t('messages.deleteSuccess'),\n            t('entries.delete')\n          );\n        } else {\n          addErrorNotification(\n            t('messages.deleteError'),\n            t('messages.validationError')\n          );\n        }\n      } catch (error) {\n        addErrorNotification(\n          t('messages.deleteError'),\n          t('messages.validationError')\n        );\n      }\n    }\n  };\n\n  const startEditEntry = (entry: any) => {\n    setEditingEntry({ id: entry.id, data: entry });\n    setActiveTab('add');\n  };\n\n  const cancelEdit = () => {\n    setEditingEntry(null);\n    setActiveTab('entries');\n  };\n\n  const tabs = [\n    { id: 'overview' as ActiveTab, label: t('navigation.overview'), icon: BarChart3 },\n    { id: 'add' as ActiveTab, label: t('navigation.addEntry'), icon: Plus },\n    { id: 'entries' as ActiveTab, label: t('navigation.viewEntries'), icon: List },\n    { id: 'statistics' as ActiveTab, label: t('navigation.statistics'), icon: BarChart3 },\n    { id: 'export' as ActiveTab, label: t('navigation.export'), icon: Download }\n  ];\n\n  return (\n    <div className=\"bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 rounded-xl p-8\">\n      <LoadingOverlay isLoading={isLoading} message=\"Loading...\">\n        {/* Navigation Tabs */}\n        <div className=\"mb-8\">\n          <div className=\"bg-white rounded-lg shadow-sm p-1\">\n            <nav className=\"flex space-x-1\">\n              {tabs.map((tab) => {\n                const Icon = tab.icon;\n                return (\n                  <button\n                    key={tab.id}\n                    onClick={() => setActiveTab(tab.id)}\n                    className={`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                      activeTab === tab.id\n                        ? 'bg-gradient-to-r from-pink-600 to-purple-600 text-white'\n                        : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'\n                    }`}\n                  >\n                    <Icon className=\"w-4 h-4 mr-2\" />\n                    {tab.label}\n                  </button>\n                );\n              })}\n            </nav>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div>\n          {activeTab === 'overview' && (\n            <div className=\"bg-white rounded-xl shadow-lg p-8\">\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\n                {t('statistics.overview')}\n              </h2>\n              \n              {entries.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-gray-400 mb-4\">\n                    <BarChart3 className=\"w-16 h-16 mx-auto\" />\n                  </div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    {t('entries.noEntries')}\n                  </h3>\n                  <p className=\"text-gray-600 mb-6\">\n                    {t('entries.noEntriesDescription')}\n                  </p>\n                  <button\n                    onClick={() => setActiveTab('add')}\n                    className=\"bg-gradient-to-r from-pink-600 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-pink-700 hover:to-purple-700 transition-colors\"\n                  >\n                    {t('entries.addFirst')}\n                  </button>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"bg-gradient-to-r from-pink-100 to-purple-100 p-6 rounded-lg\">\n                    <h3 className=\"text-sm font-medium text-gray-600 mb-2\">\n                      {t('statistics.totalEntries')}\n                    </h3>\n                    <p className=\"text-3xl font-bold text-gray-900\">\n                      {statistics.totalEntries}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-gradient-to-r from-blue-100 to-indigo-100 p-6 rounded-lg\">\n                    <h3 className=\"text-sm font-medium text-gray-600 mb-2\">\n                      {t('statistics.averagePain')}\n                    </h3>\n                    <p className=\"text-3xl font-bold text-gray-900\">\n                      {statistics.averagePain}/10\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-gradient-to-r from-green-100 to-teal-100 p-6 rounded-lg\">\n                    <h3 className=\"text-sm font-medium text-gray-600 mb-2\">\n                      {t('statistics.trendDirection')}\n                    </h3>\n                    <p className=\"text-lg font-semibold text-gray-900\">\n                      {t(`statistics.${statistics.trendDirection}`)}\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'add' && (\n            <div className=\"bg-white rounded-xl shadow-lg p-8\">\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\n                {editingEntry ? t('form.editTitle') : t('form.title')}\n              </h2>\n              <PainEntryForm\n                onSubmit={editingEntry ? handleEditEntry : handleAddEntry}\n                onCancel={editingEntry ? cancelEdit : () => setActiveTab('overview')}\n                isLoading={isFormLoading}\n                locale={locale}\n                initialData={editingEntry?.data}\n              />\n            </div>\n          )}\n\n          {activeTab === 'entries' && (\n            <div className=\"bg-white rounded-xl shadow-lg p-8\">\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\n                {t('entries.title')}\n              </h2>\n              \n              {entries.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-gray-400 mb-4\">\n                    <List className=\"w-16 h-16 mx-auto\" />\n                  </div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    {t('entries.noEntries')}\n                  </h3>\n                  <p className=\"text-gray-600 mb-6\">\n                    {t('entries.noEntriesDescription')}\n                  </p>\n                  <button\n                    onClick={() => setActiveTab('add')}\n                    className=\"bg-gradient-to-r from-pink-600 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-pink-700 hover:to-purple-700 transition-colors\"\n                  >\n                    {t('entries.addFirst')}\n                  </button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {entries.map((entry) => (\n                    <div key={entry.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <h3 className=\"font-medium text-gray-900\">\n                            {new Date(entry.date).toLocaleDateString(locale)}\n                          </h3>\n                          <p className=\"text-sm text-gray-600\">\n                            {t('entries.painIntensity')}: {entry.painLevel}/10\n                          </p>\n                          {entry.duration && (\n                            <p className=\"text-sm text-gray-600\">\n                              {t('entries.duration')}: {entry.duration} {t('entries.minutes')}\n                            </p>\n                          )}\n                        </div>\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => startEditEntry(entry)}\n                            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium transition-colors\"\n                          >\n                            {t('entries.edit')}\n                          </button>\n                          <button\n                            onClick={() => handleDeleteEntry(entry.id)}\n                            className=\"text-red-600 hover:text-red-800 text-sm font-medium transition-colors\"\n                          >\n                            {t('entries.delete')}\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'statistics' && (\n            <div className=\"bg-white rounded-xl shadow-lg p-8\">\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\n                {t('statistics.title')}\n              </h2>\n              <p className=\"text-gray-600\">\n                {t('statistics.inDevelopment')}\n              </p>\n            </div>\n          )}\n\n          {activeTab === 'export' && (\n            <div className=\"bg-white rounded-xl shadow-lg p-8\">\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\n                {t('export.title')}\n              </h2>\n              <p className=\"text-gray-600\">\n                {t('export.inDevelopment')}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"mt-4\">\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n              <p className=\"text-red-600\">{error}</p>\n              <button\n                onClick={() => setError(null)}\n                className=\"mt-2 text-sm text-red-600 hover:text-red-800\"\n              >\n                {t('messages.close')}\n              </button>\n            </div>\n          </div>\n        )}\n      </LoadingOverlay>\n\n      {/* Notifications */}\n      <NotificationContainer\n        notifications={notifications}\n        onRemove={removeNotification}\n      />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/components/PeriodPainAssessmentTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[403,406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[403,406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\n\ninterface PeriodPainAssessmentToolProps {\n  locale: string;\n}\n\nexport default function PeriodPainAssessmentTool({ locale }: PeriodPainAssessmentToolProps) {\n  const [intensity, setIntensity] = useState('');\n  const [onset, setOnset] = useState('');\n  const [symptoms, setSymptoms] = useState<string[]>([]);\n  const [result, setResult] = useState<any>(null);\n\n  // ç¿»è¯‘æ–‡æœ¬\n  const texts = {\n    zh: {\n      title: 'ç—›ç»é€Ÿæµ‹å°å·¥å…·',\n      subtitle: 'å›ç­”å‡ ä¸ªç®€å•é—®é¢˜ï¼Œåˆæ­¥äº†è§£ä½ çš„ç—›ç»ç±»å‹å’Œä¸¥é‡ç¨‹åº¦ã€‚',\n      intensityTitle: 'ä½ çš„ç—›ç»å¼ºåº¦å¦‚ä½•ï¼Ÿ',\n      intensityOptions: {\n        mild: 'è½»å¾®ç–¼ç—›ï¼ˆå¯ä»¥æ­£å¸¸æ´»åŠ¨ï¼‰',\n        moderate: 'ä¸­ç­‰ç–¼ç—›ï¼ˆå½±å“æ—¥å¸¸æ´»åŠ¨ï¼‰',\n        severe: 'ä¸¥é‡ç–¼ç—›ï¼ˆæ— æ³•æ­£å¸¸æ´»åŠ¨ï¼‰'\n      },\n      onsetTitle: 'ç—›ç»é€šå¸¸ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Ÿ',\n      onsetOptions: {\n        recent: 'æœˆç»å‰1-2å¤©å¼€å§‹',\n        later: 'æœˆç»å¼€å§‹åæ‰ç–¼ç—›'\n      },\n      symptomsTitle: 'æ˜¯å¦ä¼´æœ‰ä»¥ä¸‹ä¸¥é‡ç—‡çŠ¶ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰',\n      symptomsOptions: {\n        fever: 'å‘çƒ­',\n        vomiting: 'ä¸¥é‡å‘•å',\n        dizziness: 'å¤´æ™•æˆ–æ˜å¥',\n        bleeding: 'å¼‚å¸¸å‡ºè¡€',\n        nonMenstrual: 'éæœˆç»æœŸä¹Ÿç–¼ç—›'\n      },\n      assessButton: 'å¼€å§‹è¯„ä¼°',\n      resetButton: 'é‡æ–°æµ‹è¯•',\n      moreInfoButton: 'äº†è§£æ›´å¤š',\n      resultTitle: 'è¯„ä¼°ç»“æœ',\n      consultAdvice: 'å»ºè®®å’¨è¯¢åŒ»ç”Ÿè·å¾—ä¸“ä¸šå»ºè®®',\n      disclaimer: 'æ­¤å·¥å…·ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€‚å¦‚æœ‰ç–‘è™‘è¯·å’¨è¯¢åŒ»ç”Ÿã€‚'\n    },\n    en: {\n      title: 'Period Pain Assessment Tool',\n      subtitle: 'Answer a few simple questions to understand your menstrual pain type and severity.',\n      intensityTitle: 'How intense is your menstrual pain?',\n      intensityOptions: {\n        mild: 'Mild pain (can continue normal activities)',\n        moderate: 'Moderate pain (affects daily activities)',\n        severe: 'Severe pain (unable to perform normal activities)'\n      },\n      onsetTitle: 'When does your menstrual pain usually start?',\n      onsetOptions: {\n        recent: 'Starts 1-2 days before menstruation',\n        later: 'Starts after menstruation begins'\n      },\n      symptomsTitle: 'Do you experience any of these severe symptoms? (Multiple choice)',\n      symptomsOptions: {\n        fever: 'Fever',\n        vomiting: 'Severe vomiting',\n        dizziness: 'Dizziness or fainting',\n        bleeding: 'Abnormal bleeding',\n        nonMenstrual: 'Pain outside menstrual period'\n      },\n      assessButton: 'Start Assessment',\n      resetButton: 'Reset Test',\n      moreInfoButton: 'Learn More',\n      resultTitle: 'Assessment Result',\n      consultAdvice: 'We recommend consulting a doctor for professional advice',\n      disclaimer: 'This tool is for reference only and cannot replace professional medical advice. Please consult a doctor if you have concerns.'\n    }\n  };\n\n  const t = texts[locale as keyof typeof texts] || texts.zh;\n\n  const handleSymptomChange = (symptom: string, checked: boolean) => {\n    if (checked) {\n      setSymptoms([...symptoms, symptom]);\n    } else {\n      setSymptoms(symptoms.filter(s => s !== symptom));\n    }\n  };\n\n  const evaluateAssessment = () => {\n    let severity = 'low';\n    let advice = '';\n    let needConsult = false;\n\n    // è¯„ä¼°é€»è¾‘\n    if (symptoms.length > 0) {\n      severity = 'high';\n      needConsult = true;\n      advice = locale === 'zh' \n        ? 'æ‚¨çš„ç—‡çŠ¶è¾ƒä¸ºä¸¥é‡ï¼Œå»ºè®®å°½å¿«å’¨è¯¢å¦‡ç§‘åŒ»ç”Ÿè¿›è¡Œè¯¦ç»†æ£€æŸ¥ã€‚'\n        : 'Your symptoms are quite severe. We recommend consulting a gynecologist for detailed examination as soon as possible.';\n    } else if (intensity === 'severe') {\n      severity = 'high';\n      needConsult = true;\n      advice = locale === 'zh'\n        ? 'ä¸¥é‡ç—›ç»å¯èƒ½å½±å“ç”Ÿæ´»è´¨é‡ï¼Œå»ºè®®å’¨è¯¢åŒ»ç”Ÿäº†è§£æ²»ç–—æ–¹æ¡ˆã€‚'\n        : 'Severe menstrual pain may affect quality of life. We recommend consulting a doctor to understand treatment options.';\n    } else if (intensity === 'moderate') {\n      severity = 'medium';\n      advice = locale === 'zh'\n        ? 'ä¸­ç­‰ç¨‹åº¦ç—›ç»è¾ƒä¸ºå¸¸è§ï¼Œå¯ä»¥å°è¯•çƒ­æ•·ã€é€‚é‡è¿åŠ¨ç­‰ç¼“è§£æ–¹æ³•ã€‚å¦‚æŒç»­å›°æ‰°å»ºè®®å°±åŒ»ã€‚'\n        : 'Moderate menstrual pain is common. You can try heat therapy, moderate exercise, and other relief methods. If it continues to bother you, consider seeing a doctor.';\n    } else {\n      severity = 'low';\n      advice = locale === 'zh'\n        ? 'æ‚¨çš„ç—›ç»ç¨‹åº¦è¾ƒè½»ï¼Œå±äºæ­£å¸¸èŒƒå›´ã€‚ä¿æŒè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯å³å¯ã€‚'\n        : 'Your menstrual pain is mild and within the normal range. Maintaining good lifestyle habits should be sufficient.';\n    }\n\n    setResult({ severity, advice, needConsult });\n  };\n\n  const resetAssessment = () => {\n    setIntensity('');\n    setOnset('');\n    setSymptoms([]);\n    setResult(null);\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">{t.title}</h1>\n        <p className=\"text-lg text-gray-600\">{t.subtitle}</p>\n      </div>\n\n      {!result ? (\n        <div className=\"space-y-8\">\n          {/* ç—›ç»å¼ºåº¦ */}\n          <div>\n            <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">{t.intensityTitle}</h3>\n            <div className=\"space-y-3\">\n              {Object.entries(t.intensityOptions).map(([value, label]) => (\n                <label key={value} className=\"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 transition-colors\">\n                  <input\n                    type=\"radio\"\n                    name=\"intensity\"\n                    value={value}\n                    checked={intensity === value}\n                    onChange={(e) => setIntensity(e.target.value)}\n                    className=\"w-4 h-4 text-purple-600\"\n                  />\n                  <span className=\"text-gray-700 text-left\">{label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* ç—›ç»å¼€å§‹æ—¶é—´ */}\n          <div>\n            <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">{t.onsetTitle}</h3>\n            <div className=\"space-y-3\">\n              {Object.entries(t.onsetOptions).map(([value, label]) => (\n                <label key={value} className=\"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 transition-colors\">\n                  <input\n                    type=\"radio\"\n                    name=\"onset\"\n                    value={value}\n                    checked={onset === value}\n                    onChange={(e) => setOnset(e.target.value)}\n                    className=\"w-4 h-4 text-purple-600\"\n                  />\n                  <span className=\"text-gray-700 text-left\">{label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* ä¸¥é‡ç—‡çŠ¶ */}\n          <div>\n            <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">{t.symptomsTitle}</h3>\n            <div className=\"space-y-3\">\n              {Object.entries(t.symptomsOptions).map(([value, label]) => (\n                <label key={value} className=\"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 transition-colors\">\n                  <input\n                    type=\"checkbox\"\n                    value={value}\n                    checked={symptoms.includes(value)}\n                    onChange={(e) => handleSymptomChange(value, e.target.checked)}\n                    className=\"w-4 h-4 text-purple-600\"\n                  />\n                  <span className=\"text-gray-700 text-left\">{label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex justify-center pt-6\">\n            <button\n              onClick={evaluateAssessment}\n              disabled={!intensity || !onset}\n              className=\"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-8 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n            >\n              {t.assessButton}\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          <div className={`p-6 rounded-lg border-l-4 ${\n            result.severity === 'high' ? 'border-red-500 bg-red-50' :\n            result.severity === 'medium' ? 'border-yellow-500 bg-yellow-50' :\n            'border-green-500 bg-green-50'\n          }`}>\n            <h3 className={`text-xl font-semibold mb-3 ${\n              result.severity === 'high' ? 'text-red-700' :\n              result.severity === 'medium' ? 'text-yellow-700' :\n              'text-green-700'\n            }`}>\n              {t.resultTitle}\n            </h3>\n            <p className=\"text-gray-700 leading-relaxed\">\n              {result.advice}\n            </p>\n          </div>\n\n          {result.needConsult && (\n            <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n              <p className=\"text-blue-700 font-medium\">\n                {t.consultAdvice}\n              </p>\n            </div>\n          )}\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <button\n              onClick={resetAssessment}\n              className=\"border border-purple-600 text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-purple-50 transition-colors\"\n            >\n              {t.resetButton}\n            </button>\n            <a\n              href={`/${locale}/teen-health`}\n              className=\"bg-gradient-to-r from-pink-500 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold text-center hover:from-pink-600 hover:to-pink-700 transition-all\"\n            >\n              {t.moreInfoButton}\n            </a>\n          </div>\n        </div>\n      )}\n\n      <div className=\"mt-8 text-sm text-gray-500 text-center\">\n        <p>{t.disclaimer}</p>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/components/SymptomAssessmentTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LoadingSpinner' is defined but never used.","line":19,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[947,950],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[947,950],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isComplete' is assigned a value but never used.","line":37,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isLoading' is assigned a value but never used.","line":39,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2742,2745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2742,2745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasNoneSelected' is assigned a value but never used.","line":485,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":485,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":495,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":495,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19001,19004],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19001,19004],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useTranslations } from 'next-intl';\nimport {\n  Play,\n  ArrowLeft,\n  ArrowRight,\n  CheckCircle,\n  AlertTriangle,\n  FileText,\n  Heart,\n  Brain,\n  Activity\n} from 'lucide-react';\nimport { useSymptomAssessment } from '../shared/hooks/useSymptomAssessment';\nimport { useNotifications } from '../shared/hooks/useNotifications';\nimport NotificationContainer from '../shared/components/NotificationContainer';\nimport LoadingSpinner from '../shared/components/LoadingSpinner';\nimport { AssessmentAnswer } from '../shared/types';\nimport { useSafeTranslations } from '@/hooks/useSafeTranslations';\n\ninterface SymptomAssessmentToolProps {\n  locale: string;\n}\n\nexport default function SymptomAssessmentTool({ locale }: SymptomAssessmentToolProps) {\n  const { t } = useSafeTranslations('painTracker.assessment');\n  const [selectedAnswers, setSelectedAnswers] = useState<Record<string, any>>({});\n\n  const {\n    currentSession,\n    currentQuestion,\n    currentQuestionIndex,\n    totalQuestions,\n    progress,\n    isComplete,\n    result,\n    isLoading,\n    error,\n    startAssessment,\n    answerQuestion,\n    goToPreviousQuestion,\n    goToNextQuestion,\n    completeAssessment,\n    resetAssessment\n  } = useSymptomAssessment();\n\n  // ç›‘å¬resultå˜åŒ–\n  useEffect(() => {\n    console.log('Result changed:', result);\n  }, [result]);\n\n  // è°ƒè¯•å½“å‰sessionå’Œé—®é¢˜\n  useEffect(() => {\n    console.log('Debug info:', {\n      locale,\n      currentSession: currentSession ? {\n        id: currentSession.id,\n        locale: currentSession.locale,\n        answersCount: currentSession.answers.length\n      } : null,\n      currentQuestion: currentQuestion ? {\n        id: currentQuestion.id,\n        title: currentQuestion.title,\n        type: currentQuestion.type\n      } : null,\n      currentQuestionIndex,\n      totalQuestions\n    });\n  }, [locale, currentSession, currentQuestion, currentQuestionIndex, totalQuestions]);\n\n  // ç¡®ä¿localeå˜åŒ–æ—¶é‡ç½®assessmentï¼Œé¿å…ä½¿ç”¨é”™è¯¯localeçš„æ—§session\n  useEffect(() => {\n    if (currentSession && currentSession.locale !== locale) {\n      console.log('Locale mismatch detected, resetting assessment:', {\n        sessionLocale: currentSession.locale,\n        currentLocale: locale\n      });\n      resetAssessment();\n    }\n  }, [locale, currentSession, resetAssessment]);\n\n  const {\n    notifications,\n    removeNotification,\n    addSuccessNotification,\n    addErrorNotification\n  } = useNotifications();\n\n  const handleStartAssessment = () => {\n    console.log('Starting assessment with locale:', locale);\n    // Clear any existing session first to ensure fresh start with correct locale\n    resetAssessment();\n    startAssessment(locale);\n  };\n\n  const handleAnswerChange = (value: any) => {\n    if (!currentQuestion) return;\n\n    setSelectedAnswers(prev => ({\n      ...prev,\n      [currentQuestion.id]: value\n    }));\n\n    const answer: AssessmentAnswer = {\n      questionId: currentQuestion.id,\n      value,\n      timestamp: new Date().toISOString()\n    };\n\n    answerQuestion(answer);\n  };\n\n  const handleNext = () => {\n    console.log('handleNext called:', {\n      currentQuestionIndex,\n      totalQuestions,\n      isLastQuestion: currentQuestionIndex >= totalQuestions - 1\n    });\n\n    if (currentQuestionIndex >= totalQuestions - 1) {\n      // å·²ç»æ˜¯æœ€åä¸€é¢˜ï¼Œå®Œæˆè¯„ä¼°\n      console.log('Completing assessment...');\n      const assessmentResult = completeAssessment(t);\n      console.log('Assessment result:', assessmentResult);\n\n      if (assessmentResult) {\n        addSuccessNotification(\n          t('messages.assessmentComplete'),\n          t('messages.assessmentCompleteDesc')\n        );\n        // å¼ºåˆ¶é‡æ–°æ¸²æŸ“ä»¥æ˜¾ç¤ºç»“æœ\n        setTimeout(() => {\n          console.log('Result should be visible now:', result);\n        }, 100);\n      } else {\n        console.error('Assessment result is null');\n        addErrorNotification(\n          t('messages.assessmentFailed'),\n          t('messages.assessmentFailedDesc')\n        );\n      }\n    } else {\n      goToNextQuestion();\n    }\n  };\n\n  const handlePrevious = () => {\n    goToPreviousQuestion();\n  };\n\n  const isCurrentQuestionAnswered = () => {\n    if (!currentQuestion) return false;\n    const answer = selectedAnswers[currentQuestion.id];\n\n    if (currentQuestion.validation?.required) {\n      if (currentQuestion.type === 'multiple') {\n        return Array.isArray(answer) && answer.length > 0;\n      }\n      return answer !== undefined && answer !== null && answer !== '';\n    }\n\n    return true;\n  };\n\n  // Start screen\n  if (!currentSession) {\n    return (\n      <div className=\"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-8\">\n        <div className=\"bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Brain className=\"w-8 h-8 text-white\" />\n            </div>\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              {t('title')}\n            </h2>\n            <p className=\"text-lg text-gray-600 mb-6\">\n              {t('subtitle')}\n            </p>\n          </div>\n\n          <div className=\"bg-blue-50 rounded-lg p-6 mb-8\">\n            <h3 className=\"text-lg font-semibold text-blue-900 mb-4\">\n              {t('start.title')}\n            </h3>\n            <p className=\"text-blue-800 mb-4\">\n              {t('start.description')}\n            </p>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n              {(() => {\n                try {\n                  // ç›´æ¥ä½¿ç”¨ç¿»è¯‘é”®è€Œä¸æ˜¯æ•°ç»„\n                  const features = [\n                    t('start.feature1'),\n                    t('start.feature2'),\n                    t('start.feature3'),\n                    t('start.feature4')\n                  ];\n\n                  return features.map((feature: string, index: number) => {\n                    const icons = [Heart, Brain, CheckCircle, Activity];\n                    const Icon = icons[index] || Heart;\n                    return (\n                      <div key={index} className=\"flex items-center space-x-3\">\n                        <Icon className=\"w-5 h-5 text-blue-600\" />\n                        <span className=\"text-blue-800\">{feature}</span>\n                      </div>\n                    );\n                  });\n                } catch (error) {\n                  console.error('Error rendering features:', error);\n                  return null;\n                }\n              })()}\n            </div>\n          </div>\n\n          <div className=\"text-center\">\n            <button\n              onClick={handleStartAssessment}\n              className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-purple-700 transition-colors inline-flex items-center space-x-2\"\n            >\n              <Play className=\"w-5 h-5\" />\n              <span>{t('start.startButton')}</span>\n            </button>\n\n            <p className=\"text-sm text-gray-500 mt-4\">\n              {t('start.disclaimer')}\n            </p>\n          </div>\n        </div>\n\n        <NotificationContainer\n          notifications={notifications}\n          onRemove={removeNotification}\n        />\n      </div>\n    );\n  }\n\n  // Results screen\n  if (result) {\n    return (\n      <div className=\"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-8\">\n        <div className=\"bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <CheckCircle className=\"w-8 h-8 text-white\" />\n            </div>\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              {t('result.title')}\n            </h2>\n          </div>\n\n          {/* Score and Severity - å¡ç‰‡åŒ–ï¼Œä¸ä½“è´¨æµ‹è¯•ç»“æœé£æ ¼ä¸€è‡´ */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n            <div className=\"card text-center\">\n              <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">\n                {t('result.yourScore')}\n              </h3>\n              <p className=\"text-3xl font-extrabold text-primary-700\">\n                {result.score}/{result.maxScore}\n              </p>\n              <p className=\"text-xs text-neutral-500 mt-1\">\n                {Math.round(result.percentage)}%\n              </p>\n            </div>\n\n            <div className=\"card text-center\">\n              <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">\n                {t('result.severity')}\n              </h3>\n              <p className=\"text-xl font-bold text-neutral-900\">\n                {t(`severity.${result.severity}`)}\n              </p>\n            </div>\n\n            <div className=\"card text-center\">\n              <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">\n                {t('result.riskLevel')}\n              </h3>\n              <p className=\"text-xl font-bold text-neutral-900\">\n                {t(`severity.${result.type}`)}\n              </p>\n            </div>\n          </div>\n\n          {/* Summary */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-xl font-semibold text-neutral-900 mb-4\">\n              {t('result.summary')}\n            </h3>\n            <div className=\"card\">\n              <p className=\"text-neutral-700 leading-relaxed\">{result.message}</p>\n            </div>\n          </div>\n\n          {/* Recommendations */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-xl font-semibold text-neutral-900 mb-4\">\n              {t('result.recommendations')}\n            </h3>\n            <div className=\"space-y-4\">\n              {result.recommendations.map((recommendation) => (\n                <div key={recommendation.id} className=\"card\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <h4 className=\"text-lg font-semibold text-neutral-900\">\n                      {recommendation.title}\n                    </h4>\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                      recommendation.priority === 'high' ? 'bg-red-100 text-red-700' :\n                      recommendation.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' :\n                      'bg-green-100 text-green-700'\n                    }`}>\n                      {t(`priority.${recommendation.priority}`)}\n                    </span>\n                  </div>\n                  <p className=\"text-neutral-700 mb-3 leading-relaxed\">{recommendation.description}</p>\n                  <p className=\"text-sm text-neutral-500 mb-3\">\n                    <strong>{t('result.timeframe')}</strong> {recommendation.timeframe}\n                  </p>\n\n                  {recommendation.actionSteps && (\n                    <div>\n                      <h5 className=\"font-medium text-neutral-900 mb-2\">{t('result.actionSteps')}</h5>\n                      <ul className=\"list-disc list-inside text-sm text-neutral-700 space-y-1\">\n                        {(() => {\n                          // Handle both array and string types for actionSteps\n                          const steps = Array.isArray(recommendation.actionSteps)\n                            ? recommendation.actionSteps\n                            : typeof recommendation.actionSteps === 'string'\n                            ? [recommendation.actionSteps]\n                            : [];\n\n                          return steps.map((step, index) => (\n                            <li key={index}>{step}</li>\n                          ));\n                        })()}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <button\n              onClick={resetAssessment}\n              className=\"px-6 py-3 border-2 border-primary-600 text-primary-600 rounded-lg font-medium hover:bg-primary-50 transition-colors\"\n            >\n              {t('result.retakeAssessment')}\n            </button>\n            <button\n              onClick={() => addSuccessNotification(\n                t('messages.resultsSaved'),\n                t('messages.resultsSavedDesc')\n              )}\n              className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-colors\"\n            >\n              {t('result.saveResults')}\n            </button>\n          </div>\n        </div>\n\n        <NotificationContainer\n          notifications={notifications}\n          onRemove={removeNotification}\n        />\n      </div>\n    );\n  }\n\n  // Question screen\n  console.log('Rendering question screen:', {\n    currentQuestionIndex,\n    totalQuestions,\n    progress,\n    currentQuestion: currentQuestion?.id\n  });\n\n  return (\n    <div className=\"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 lg:p-8 mobile-safe-area\">\n      <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 lg:p-8 max-w-3xl mx-auto\">\n        {/* Progress Bar - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        <div className=\"mb-6 sm:mb-8\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <span className=\"text-xs sm:text-sm font-medium text-gray-600\">\n              {t('progress.questionOf', {\n                current: Math.min(currentQuestionIndex + 1, totalQuestions),\n                total: totalQuestions\n              })}\n            </span>\n            <span className=\"text-xs sm:text-sm font-medium text-gray-600\">\n              {Math.round(Math.min(progress, 100))}%\n            </span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-2 sm:h-3\">\n            <div\n              className=\"bg-gradient-to-r from-blue-600 to-purple-600 h-2 sm:h-3 rounded-full transition-all duration-300\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Question - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        {currentQuestion && (\n          <div className=\"mb-6 sm:mb-8\">\n            <h2 className=\"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 mb-3 sm:mb-4 leading-tight\">\n              {currentQuestion.title}\n            </h2>\n            {currentQuestion.description && (\n              <p className=\"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 leading-relaxed\">\n                {currentQuestion.description}\n              </p>\n            )}\n\n            {/* Question Input - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n            <div className=\"space-y-2 sm:space-y-3\">\n              {currentQuestion.type === 'single' && currentQuestion.options && (\n                <div className=\"space-y-2 sm:space-y-3\">\n                  {currentQuestion.options.map((option) => (\n                    <label\n                      key={option.value}\n                      className={`flex items-center p-3 sm:p-4 border rounded-lg cursor-pointer transition-colors mobile-touch-target ${\n                        selectedAnswers[currentQuestion.id] === option.value\n                          ? 'border-blue-500 bg-blue-50'\n                          : 'border-gray-300 hover:border-gray-400 active:bg-gray-50'\n                      }`}\n                    >\n                      <input\n                        type=\"radio\"\n                        name={currentQuestion.id}\n                        value={option.value}\n                        checked={selectedAnswers[currentQuestion.id] === option.value}\n                        onChange={(e) => handleAnswerChange(e.target.value)}\n                        className=\"sr-only\"\n                      />\n                      <div className={`w-5 h-5 sm:w-4 sm:h-4 rounded-full border-2 mr-3 flex-shrink-0 ${\n                        selectedAnswers[currentQuestion.id] === option.value\n                          ? 'border-blue-500 bg-blue-500'\n                          : 'border-gray-300'\n                      }`}>\n                        {selectedAnswers[currentQuestion.id] === option.value && (\n                          <div className=\"w-2.5 h-2.5 sm:w-2 sm:h-2 bg-white rounded-full mx-auto mt-0.5\" />\n                        )}\n                      </div>\n                      {option.icon && (\n                        <span className=\"text-lg sm:text-base mr-2 sm:mr-3 flex-shrink-0\">{option.icon}</span>\n                      )}\n                      <span className=\"text-sm sm:text-base text-gray-900 leading-relaxed\">{option.label}</span>\n                    </label>\n                  ))}\n                </div>\n              )}\n\n              {currentQuestion.type === 'multiple' && currentQuestion.options && (\n                <div className=\"space-y-2 sm:space-y-3\">\n                  {currentQuestion.options.map((option) => {\n                    const isSelected = Array.isArray(selectedAnswers[currentQuestion.id]) &&\n                      selectedAnswers[currentQuestion.id].includes(option.value);\n\n                    return (\n                      <label\n                        key={option.value}\n                        className={`flex items-center p-3 sm:p-4 border rounded-lg cursor-pointer transition-colors mobile-touch-target ${\n                          isSelected\n                            ? 'border-blue-500 bg-blue-50'\n                            : 'border-gray-300 hover:border-gray-400 active:bg-gray-50'\n                        }`}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={isSelected}\n                          onChange={(e) => {\n                            const currentValues = selectedAnswers[currentQuestion.id] || [];\n                            let newValues: string[];\n\n                            // Handle \"none\" options logic\n                            const isNoneOption = option.value === 'none' || option.value === 'no_treatment';\n                            const hasNoneSelected = currentValues.includes('none') || currentValues.includes('no_treatment');\n\n                            if (isNoneOption) {\n                              // If selecting a \"none\" option, clear all other selections\n                              newValues = e.target.checked ? [String(option.value)] : [];\n                            } else {\n                              // If selecting a regular option, remove any \"none\" options first\n                              const filteredValues = currentValues.filter((v: string) => v !== 'none' && v !== 'no_treatment');\n                              newValues = e.target.checked\n                                ? [...filteredValues, option.value]\n                                : filteredValues.filter((v: any) => v !== option.value);\n                            }\n\n                            handleAnswerChange(newValues);\n                          }}\n                          className=\"sr-only\"\n                        />\n                        <div className={`w-5 h-5 sm:w-4 sm:h-4 rounded border-2 mr-3 flex items-center justify-center flex-shrink-0 ${\n                          isSelected\n                            ? 'border-blue-500 bg-blue-500'\n                            : 'border-gray-300'\n                        }`}>\n                          {isSelected && (\n                            <CheckCircle className=\"w-3.5 h-3.5 sm:w-3 sm:h-3 text-white\" />\n                          )}\n                        </div>\n                        {option.icon && (\n                          <span className=\"text-lg sm:text-base mr-2 sm:mr-3 flex-shrink-0\">{option.icon}</span>\n                        )}\n                        <span className=\"text-sm sm:text-base text-gray-900 leading-relaxed\">{option.label}</span>\n                      </label>\n                    );\n                  })}\n                </div>\n              )}\n\n              {currentQuestion.type === 'scale' && (\n                <div className=\"space-y-6\">\n                  <div className=\"px-4 pain-scale-container\">\n                    <input\n                      type=\"range\"\n                      min={currentQuestion.validation?.min || 1}\n                      max={currentQuestion.validation?.max || 10}\n                      value={selectedAnswers[currentQuestion.id] || (currentQuestion.validation?.min || 1)}\n                      onChange={(e) => handleAnswerChange(parseInt(e.target.value))}\n                      className=\"w-full pain-scale cursor-pointer\"\n                    />\n                    <div className=\"flex justify-between text-sm text-neutral-600 mt-2\">\n                      <span className=\"text-xs sm:text-sm\">{t('painScale.levels.none')}</span>\n                      <span className=\"text-xs sm:text-sm\">{t('painScale.levels.mild')}</span>\n                      <span className=\"text-xs sm:text-sm\">{t('painScale.levels.moderate')}</span>\n                      <span className=\"text-xs sm:text-sm\">{t('painScale.levels.severe')}</span>\n                      <span className=\"text-xs sm:text-sm\">{t('painScale.levels.extreme')}</span>\n                    </div>\n                  </div>\n\n                  {/* å½“å‰é€‰æ‹©çš„å€¼æ˜¾ç¤º - ä¸ä¸­åŒ»ä½“è´¨æµ‹è¯•ä¿æŒä¸€è‡´çš„æ ·å¼ */}\n                  <div className=\"text-center\">\n                    <div className=\"inline-flex items-center bg-gradient-to-r from-blue-100 via-blue-50 to-purple-100 px-8 py-4 rounded-2xl shadow-lg border border-blue-200\">\n                      <span className=\"text-xl font-bold text-blue-800\">\n                        {t('painScale.title')}\n                        <span className=\"text-3xl font-extrabold text-blue-600 mx-2\">\n                          {selectedAnswers[currentQuestion.id] || (currentQuestion.validation?.min || 1)}\n                        </span>\n                        <span className=\"text-base font-medium text-blue-700 ml-2\">\n                          ({(() => {\n                            const value = selectedAnswers[currentQuestion.id] || (currentQuestion.validation?.min || 1);\n                            if (value <= 2) return t('painScale.levels.none');\n                            if (value <= 4) return t('painScale.levels.mild');\n                            if (value <= 6) return t('painScale.levels.moderate');\n                            if (value <= 8) return t('painScale.levels.severe');\n                            return t('painScale.levels.extreme');\n                          })()})\n                        </span>\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* ç–¼ç—›ç¨‹åº¦è¯´æ˜ - ä¸ä¸­åŒ»ä½“è´¨æµ‹è¯•ä¿æŒä¸€è‡´çš„æ ·å¼ */}\n                  <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl overflow-hidden border border-blue-200 shadow-sm\">\n                    <h4 className=\"font-semibold text-blue-800 mb-4 flex items-center\">\n                      <span>ğŸ“–</span>\n                      <span className=\"ml-2\">{t('painScale.reference')}</span>\n                    </h4>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-blue-700\">\n                      <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                        <span className=\"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                        <span><strong>0-2:</strong> {t('painScale.descriptions.0-2')}</span>\n                      </div>\n                      <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                        <span className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                        <span><strong>3-4:</strong> {t('painScale.descriptions.3-4')}</span>\n                      </div>\n                      <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                        <span className=\"w-2 h-2 bg-orange-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                        <span><strong>5-7:</strong> {t('painScale.descriptions.5-7')}</span>\n                      </div>\n                      <div className=\"flex items-start break-words bg-white p-3 rounded-lg shadow-sm\">\n                        <span className=\"w-2 h-2 bg-red-400 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                        <span><strong>8-10:</strong> {t('painScale.descriptions.8-10')}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Navigation - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-0 mt-6 sm:mt-8\">\n          <button\n            onClick={handlePrevious}\n            disabled={currentQuestionIndex === 0}\n            className=\"flex items-center justify-center sm:justify-start px-4 py-3 sm:py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed mobile-touch-target order-2 sm:order-1\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            <span className=\"text-sm sm:text-base\">{t('navigation.previous')}</span>\n          </button>\n\n          <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-3 order-1 sm:order-2\">\n            {!currentQuestion?.validation?.required && (\n              <button\n                onClick={handleNext}\n                className=\"px-4 sm:px-6 py-3 sm:py-2 text-gray-600 hover:text-gray-900 mobile-touch-target text-sm sm:text-base\"\n              >\n                {t('navigation.skip')}\n              </button>\n            )}\n\n            <button\n              onClick={handleNext}\n              disabled={!isCurrentQuestionAnswered()}\n              className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 sm:py-2 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center mobile-touch-target text-sm sm:text-base\"\n            >\n              {currentQuestionIndex >= totalQuestions - 1 ? (\n                <>\n                  <CheckCircle className=\"w-4 h-4 mr-2\" />\n                  {t('navigation.finish')}\n                </>\n              ) : (\n                <>\n                  {t('navigation.next')}\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n            <div className=\"flex items-center\">\n              <AlertTriangle className=\"w-5 h-5 text-red-500 mr-2\" />\n              <p className=\"text-red-600\">{error}</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <NotificationContainer\n        notifications={notifications}\n        onRemove={removeNotification}\n      />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/components/SymptomTrackerTool.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/AccessibilityTestComponent.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'runAccessibilityTests'. Either include it or remove the dependency array.","line":210,"column":6,"nodeType":"ArrayExpression","endLine":210,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [enabled, runAccessibilityTests]","fix":{"range":[7811,7820],"text":"[enabled, runAccessibilityTests]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { useAccessibility } from '../../shared/hooks/useAccessibility';\n\ninterface AccessibilityIssue {\n  type: 'error' | 'warning' | 'info';\n  element: string;\n  message: string;\n  suggestion?: string;\n}\n\ninterface AccessibilityTestComponentProps {\n  enabled?: boolean;\n  showResults?: boolean;\n}\n\nexport default function AccessibilityTestComponent({ \n  enabled = process.env.NODE_ENV === 'development',\n  showResults = false \n}: AccessibilityTestComponentProps) {\n  const [issues, setIssues] = useState<AccessibilityIssue[]>([]);\n  const [isRunning, setIsRunning] = useState(false);\n  const { validateAriaAttributes } = useAccessibility();\n\n  const runAccessibilityTests = () => {\n    if (!enabled) return;\n    \n    setIsRunning(true);\n    const foundIssues: AccessibilityIssue[] = [];\n\n    // Test 1: Check for missing alt text on images\n    const images = document.querySelectorAll('img');\n    images.forEach((img, index) => {\n      if (!img.alt && !img.getAttribute('aria-hidden')) {\n        foundIssues.push({\n          type: 'error',\n          element: `img[${index}]`,\n          message: 'Image missing alt text',\n          suggestion: 'Add descriptive alt text or aria-hidden=\"true\" for decorative images'\n        });\n      }\n    });\n\n    // Test 2: Check for proper heading hierarchy\n    const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');\n    let previousLevel = 0;\n    headings.forEach((heading, index) => {\n      const level = parseInt(heading.tagName.charAt(1));\n      if (level > previousLevel + 1 && previousLevel !== 0) {\n        foundIssues.push({\n          type: 'warning',\n          element: `${heading.tagName.toLowerCase()}[${index}]`,\n          message: `Heading level ${level} follows h${previousLevel}, skipping levels`,\n          suggestion: `Consider using h${previousLevel + 1} instead`\n        });\n      }\n      previousLevel = level;\n    });\n\n    // Test 3: Check for buttons without accessible names\n    const buttons = document.querySelectorAll('button');\n    buttons.forEach((button, index) => {\n      const hasText = button.textContent?.trim();\n      const hasAriaLabel = button.getAttribute('aria-label');\n      const hasAriaLabelledBy = button.getAttribute('aria-labelledby');\n      \n      if (!hasText && !hasAriaLabel && !hasAriaLabelledBy) {\n        foundIssues.push({\n          type: 'error',\n          element: `button[${index}]`,\n          message: 'Button without accessible name',\n          suggestion: 'Add text content, aria-label, or aria-labelledby attribute'\n        });\n      }\n    });\n\n    // Test 4: Check for form inputs without labels\n    const inputs = document.querySelectorAll('input, select, textarea');\n    inputs.forEach((input, index) => {\n      const id = input.id;\n      const hasLabel = id && document.querySelector(`label[for=\"${id}\"]`);\n      const hasAriaLabel = input.getAttribute('aria-label');\n      const hasAriaLabelledBy = input.getAttribute('aria-labelledby');\n      \n      if (!hasLabel && !hasAriaLabel && !hasAriaLabelledBy) {\n        foundIssues.push({\n          type: 'error',\n          element: `${input.tagName.toLowerCase()}[${index}]`,\n          message: 'Form control without label',\n          suggestion: 'Add a label element, aria-label, or aria-labelledby attribute'\n        });\n      }\n    });\n\n    // Test 5: Check for proper ARIA attributes\n    const elementsWithRole = document.querySelectorAll('[role]');\n    elementsWithRole.forEach((element, index) => {\n      const warnings = validateAriaAttributes(element as HTMLElement);\n      warnings.forEach(warning => {\n        foundIssues.push({\n          type: 'warning',\n          element: `[role=\"${element.getAttribute('role')}\"][${index}]`,\n          message: warning,\n          suggestion: 'Review ARIA specification for proper usage'\n        });\n      });\n    });\n\n    // Test 6: Check for color contrast (simplified check)\n    const textElements = document.querySelectorAll('p, span, div, h1, h2, h3, h4, h5, h6, button, a');\n    textElements.forEach((element, index) => {\n      const styles = window.getComputedStyle(element);\n      const color = styles.color;\n      const backgroundColor = styles.backgroundColor;\n      \n      // Simple check for very light text on light backgrounds\n      if (color.includes('rgb(255') && backgroundColor.includes('rgb(255')) {\n        foundIssues.push({\n          type: 'warning',\n          element: `${element.tagName.toLowerCase()}[${index}]`,\n          message: 'Potential color contrast issue',\n          suggestion: 'Verify color contrast meets WCAG AA standards (4.5:1 for normal text)'\n        });\n      }\n    });\n\n    // Test 7: Check for keyboard accessibility\n    const interactiveElements = document.querySelectorAll('button, a, input, select, textarea, [tabindex]');\n    interactiveElements.forEach((element, index) => {\n      const tabIndex = element.getAttribute('tabindex');\n      if (tabIndex && parseInt(tabIndex) > 0) {\n        foundIssues.push({\n          type: 'warning',\n          element: `${element.tagName.toLowerCase()}[${index}]`,\n          message: 'Positive tabindex found',\n          suggestion: 'Avoid positive tabindex values, use 0 or -1 instead'\n        });\n      }\n    });\n\n    // Test 8: Check for focus indicators\n    const focusableElements = document.querySelectorAll('button, a, input, select, textarea');\n    focusableElements.forEach((element, index) => {\n      const styles = window.getComputedStyle(element, ':focus');\n      const outline = styles.outline;\n      const boxShadow = styles.boxShadow;\n      \n      if (outline === 'none' && boxShadow === 'none') {\n        foundIssues.push({\n          type: 'warning',\n          element: `${element.tagName.toLowerCase()}[${index}]`,\n          message: 'Element may lack visible focus indicator',\n          suggestion: 'Ensure focus indicators are visible for keyboard navigation'\n        });\n      }\n    });\n\n    // Test 9: Check for minimum touch target size on mobile\n    if (window.innerWidth <= 768) {\n      const touchTargets = document.querySelectorAll('button, a, input[type=\"button\"], input[type=\"submit\"]');\n      touchTargets.forEach((element, index) => {\n        const rect = element.getBoundingClientRect();\n        if (rect.width < 44 || rect.height < 44) {\n          foundIssues.push({\n            type: 'warning',\n            element: `${element.tagName.toLowerCase()}[${index}]`,\n            message: 'Touch target smaller than 44px',\n            suggestion: 'Ensure touch targets are at least 44x44px for mobile accessibility'\n          });\n        }\n      });\n    }\n\n    // Test 10: Check for live regions\n    const liveRegions = document.querySelectorAll('[aria-live]');\n    if (liveRegions.length === 0) {\n      foundIssues.push({\n        type: 'info',\n        element: 'document',\n        message: 'No live regions found',\n        suggestion: 'Consider adding aria-live regions for dynamic content updates'\n      });\n    }\n\n    setIssues(foundIssues);\n    setIsRunning(false);\n\n    // Log results to console in development\n    if (process.env.NODE_ENV === 'development') {\n      console.group('ğŸ” Accessibility Test Results');\n      console.log(`Found ${foundIssues.length} issues:`);\n      foundIssues.forEach(issue => {\n        const emoji = issue.type === 'error' ? 'âŒ' : issue.type === 'warning' ? 'âš ï¸' : 'â„¹ï¸';\n        console.log(`${emoji} ${issue.element}: ${issue.message}`);\n        if (issue.suggestion) {\n          console.log(`   ğŸ’¡ ${issue.suggestion}`);\n        }\n      });\n      console.groupEnd();\n    }\n  };\n\n  useEffect(() => {\n    if (enabled) {\n      // Run tests after component mount and DOM updates\n      const timer = setTimeout(runAccessibilityTests, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [enabled]);\n\n  if (!enabled || !showResults) {\n    return null;\n  }\n\n  const errorCount = issues.filter(issue => issue.type === 'error').length;\n  const warningCount = issues.filter(issue => issue.type === 'warning').length;\n  const infoCount = issues.filter(issue => issue.type === 'info').length;\n\n  return (\n    <div className=\"fixed bottom-4 right-4 z-50 max-w-md\">\n      <div className=\"bg-white border border-gray-200 rounded-lg shadow-lg p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-sm font-medium text-gray-900\">\n            Accessibility Test Results\n          </h3>\n          <button\n            onClick={runAccessibilityTests}\n            disabled={isRunning}\n            className=\"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 disabled:opacity-50\"\n          >\n            {isRunning ? 'Running...' : 'Re-run'}\n          </button>\n        </div>\n        \n        <div className=\"space-y-2 text-xs\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"flex items-center\">\n              <span className=\"w-2 h-2 bg-red-500 rounded-full mr-2\"></span>\n              Errors\n            </span>\n            <span className=\"font-medium\">{errorCount}</span>\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <span className=\"flex items-center\">\n              <span className=\"w-2 h-2 bg-yellow-500 rounded-full mr-2\"></span>\n              Warnings\n            </span>\n            <span className=\"font-medium\">{warningCount}</span>\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <span className=\"flex items-center\">\n              <span className=\"w-2 h-2 bg-blue-500 rounded-full mr-2\"></span>\n              Info\n            </span>\n            <span className=\"font-medium\">{infoCount}</span>\n          </div>\n        </div>\n\n        {issues.length > 0 && (\n          <details className=\"mt-3\">\n            <summary className=\"text-xs cursor-pointer text-gray-600 hover:text-gray-800\">\n              View Details\n            </summary>\n            <div className=\"mt-2 max-h-40 overflow-y-auto space-y-1\">\n              {issues.map((issue, index) => (\n                <div key={index} className=\"text-xs p-2 bg-gray-50 rounded\">\n                  <div className=\"flex items-start\">\n                    <span className={`w-1 h-1 rounded-full mt-1.5 mr-2 flex-shrink-0 ${\n                      issue.type === 'error' ? 'bg-red-500' : \n                      issue.type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'\n                    }`}></span>\n                    <div>\n                      <div className=\"font-medium text-gray-900\">{issue.element}</div>\n                      <div className=\"text-gray-600\">{issue.message}</div>\n                      {issue.suggestion && (\n                        <div className=\"text-gray-500 mt-1\">{issue.suggestion}</div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </details>\n        )}\n\n        <div className=\"mt-3 pt-2 border-t border-gray-200\">\n          <p className=\"text-xs text-gray-500\">\n            Development mode only. Tests run automatically.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/AnalyticsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":13,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4112,4115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4112,4115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { useTranslations } from 'next-intl';\n\ntype Locale = 'en' | 'zh';\n\ninterface AnalyticsTabProps {\n  locale: Locale;\n}\n\nexport default function AnalyticsTab({ locale }: AnalyticsTabProps) {\n  const t = useTranslations('interactiveTools');\n  const [selectedPeriod, setSelectedPeriod] = useState<'week' | 'month' | 'quarter' | 'year'>('month');\n\n  // Mock analytics data - in real implementation, this would come from analytics engine\n  const mockAnalytics = {\n    averagePainLevel: 5.2,\n    totalRecords: 24,\n    painTrend: [\n      { date: '2024-01-01', level: 4 },\n      { date: '2024-01-02', level: 6 },\n      { date: '2024-01-03', level: 5 },\n      { date: '2024-01-04', level: 7 },\n      { date: '2024-01-05', level: 3 },\n      { date: '2024-01-06', level: 4 },\n      { date: '2024-01-07', level: 5 }\n    ],\n    painDistribution: {\n      mild: 8,\n      moderate: 12,\n      severe: 4\n    },\n    commonLocations: [\n      { location: locale === 'zh' ? 'ä¸‹è…¹éƒ¨' : 'Lower Abdomen', count: 15, percentage: 62.5 },\n      { location: locale === 'zh' ? 'ä¸‹èƒŒéƒ¨' : 'Lower Back', count: 6, percentage: 25 },\n      { location: locale === 'zh' ? 'å¤§è…¿' : 'Thighs', count: 3, percentage: 12.5 }\n    ],\n    commonTypes: [\n      { type: locale === 'zh' ? 'ç—‰æŒ›æ€§ç–¼ç—›' : 'Cramping', count: 12, percentage: 50 },\n      { type: locale === 'zh' ? 'é’ç—›' : 'Dull Pain', count: 8, percentage: 33.3 },\n      { type: locale === 'zh' ? 'é”ç—›' : 'Sharp Pain', count: 4, percentage: 16.7 }\n    ],\n    insights: [\n      {\n        type: 'pattern',\n        title: locale === 'zh' ? 'ç–¼ç—›æ¨¡å¼è¯†åˆ«' : 'Pain Pattern Recognition',\n        description: locale === 'zh' \n          ? 'æ‚¨çš„ç–¼ç—›é€šå¸¸åœ¨ç»æœŸå‰2-3å¤©å¼€å§‹åŠ é‡ï¼Œå»ºè®®æå‰å‡†å¤‡ç¼“è§£æªæ–½ã€‚'\n          : 'Your pain typically intensifies 2-3 days before menstruation. Consider preparing relief measures in advance.',\n        severity: 'medium'\n      },\n      {\n        type: 'recommendation',\n        title: locale === 'zh' ? 'ä¸ªæ€§åŒ–å»ºè®®' : 'Personalized Recommendation',\n        description: locale === 'zh'\n          ? 'åŸºäºæ‚¨çš„æ•°æ®ï¼Œçƒ­æ•·å’Œè½»åº¦æ‹‰ä¼¸å¯¹ç¼“è§£ç–¼ç—›æœ€æœ‰æ•ˆã€‚'\n          : 'Based on your data, heat therapy and light stretching are most effective for pain relief.',\n        severity: 'low'\n      }\n    ]\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'high': return 'text-red-600 bg-red-100';\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\n      case 'low': return 'text-green-600 bg-green-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getSeverityLabel = (severity: string) => {\n    switch (severity) {\n      case 'high': return locale === 'zh' ? 'é«˜ä¼˜å…ˆçº§' : 'High Priority';\n      case 'medium': return locale === 'zh' ? 'ä¸­ä¼˜å…ˆçº§' : 'Medium Priority';\n      case 'low': return locale === 'zh' ? 'ä½ä¼˜å…ˆçº§' : 'Low Priority';\n      default: return '';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <header className=\"text-center mb-6 sm:mb-8\">\n        <h1 className=\"text-xl sm:text-2xl lg:text-3xl font-semibold text-gray-900 mb-2\">\n          {locale === 'zh' ? 'æ•°æ®åˆ†æ' : 'Data Analytics'}\n        </h1>\n        <p className=\"text-sm sm:text-base text-gray-600 max-w-2xl mx-auto\">\n          {locale === 'zh' ? 'æ·±å…¥äº†è§£æ‚¨çš„ç–¼ç—›æ¨¡å¼å’Œè¶‹åŠ¿' : 'Gain insights into your pain patterns and trends'}\n        </p>\n      </header>\n\n      {/* Period Selector */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-medium text-gray-900\">\n            {locale === 'zh' ? 'åˆ†æå‘¨æœŸ' : 'Analysis Period'}\n          </h3>\n          <div className=\"flex space-x-2\">\n            {[\n              { key: 'week', label: locale === 'zh' ? 'å‘¨' : 'Week' },\n              { key: 'month', label: locale === 'zh' ? 'æœˆ' : 'Month' },\n              { key: 'quarter', label: locale === 'zh' ? 'å­£åº¦' : 'Quarter' },\n              { key: 'year', label: locale === 'zh' ? 'å¹´' : 'Year' }\n            ].map((period) => (\n              <button\n                key={period.key}\n                onClick={() => setSelectedPeriod(period.key as any)}\n                className={`px-3 py-1 text-sm rounded-md transition-colors ${\n                  selectedPeriod === period.key\n                    ? 'bg-primary-600 text-white'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                {period.label}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-lg shadow-sm p-6 text-center\">\n          <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n            </svg>\n          </div>\n          <div className=\"text-2xl font-bold text-gray-900 mb-1\">\n            {mockAnalytics.averagePainLevel}\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            {locale === 'zh' ? 'å¹³å‡ç–¼ç—›ç¨‹åº¦' : 'Average Pain Level'}\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6 text-center\">\n          <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n            </svg>\n          </div>\n          <div className=\"text-2xl font-bold text-gray-900 mb-1\">\n            {mockAnalytics.totalRecords}\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            {locale === 'zh' ? 'æ€»è®°å½•æ•°' : 'Total Records'}\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6 text-center\">\n          <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n            </svg>\n          </div>\n          <div className=\"text-2xl font-bold text-gray-900 mb-1\">\n            {mockAnalytics.painTrend.length}\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            {locale === 'zh' ? 'åˆ†æå¤©æ•°' : 'Days Analyzed'}\n          </div>\n        </div>\n      </div>\n\n      {/* Pain Distribution */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ç–¼ç—›ç¨‹åº¦åˆ†å¸ƒ' : 'Pain Level Distribution'}\n        </h3>\n        \n        <div className=\"space-y-4\">\n          {Object.entries(mockAnalytics.painDistribution).map(([level, count]) => {\n            const percentage = (count / mockAnalytics.totalRecords) * 100;\n            const levelLabel = level === 'mild' \n              ? (locale === 'zh' ? 'è½»åº¦' : 'Mild')\n              : level === 'moderate'\n              ? (locale === 'zh' ? 'ä¸­åº¦' : 'Moderate')\n              : (locale === 'zh' ? 'é‡åº¦' : 'Severe');\n            \n            const levelColor = level === 'mild' \n              ? 'bg-green-500'\n              : level === 'moderate'\n              ? 'bg-yellow-500'\n              : 'bg-red-500';\n\n            return (\n              <div key={level} className=\"flex items-center space-x-4\">\n                <div className=\"w-20 text-sm font-medium text-gray-700\">\n                  {levelLabel}\n                </div>\n                <div className=\"flex-1 bg-gray-200 rounded-full h-3\">\n                  <div \n                    className={`h-3 rounded-full ${levelColor}`}\n                    style={{ width: `${percentage}%` }}\n                  />\n                </div>\n                <div className=\"w-16 text-sm text-gray-600 text-right\">\n                  {count} ({percentage.toFixed(1)}%)\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Common Locations and Types */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Common Locations */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            {locale === 'zh' ? 'å¸¸è§ç–¼ç—›ä½ç½®' : 'Common Pain Locations'}\n          </h3>\n          \n          <div className=\"space-y-3\">\n            {mockAnalytics.commonLocations.map((item, index) => (\n              <div key={index} className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\n                    <span className=\"text-xs font-medium text-primary-600\">{index + 1}</span>\n                  </div>\n                  <span className=\"text-sm font-medium text-gray-900\">{item.location}</span>\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  {item.count} ({item.percentage}%)\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Common Types */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            {locale === 'zh' ? 'å¸¸è§ç–¼ç—›ç±»å‹' : 'Common Pain Types'}\n          </h3>\n          \n          <div className=\"space-y-3\">\n            {mockAnalytics.commonTypes.map((item, index) => (\n              <div key={index} className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\n                    <span className=\"text-xs font-medium text-primary-600\">{index + 1}</span>\n                  </div>\n                  <span className=\"text-sm font-medium text-gray-900\">{item.type}</span>\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  {item.count} ({item.percentage}%)\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Insights and Recommendations */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n          {locale === 'zh' ? 'æ™ºèƒ½æ´å¯Ÿ' : 'Smart Insights'}\n        </h3>\n        \n        <div className=\"space-y-4\">\n          {mockAnalytics.insights.map((insight, index) => (\n            <div key={index} className=\"p-4 border border-gray-200 rounded-lg\">\n              <div className=\"flex items-start justify-between mb-2\">\n                <h4 className=\"text-sm font-medium text-gray-900\">{insight.title}</h4>\n                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getSeverityColor(insight.severity)}`}>\n                  {getSeverityLabel(insight.severity)}\n                </span>\n              </div>\n              <p className=\"text-sm text-gray-600\">{insight.description}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Chart Section */}\n      <section \n        className=\"bg-white rounded-lg shadow-sm p-4 sm:p-6\"\n        aria-labelledby=\"chart-heading\"\n      >\n        <h2 \n          id=\"chart-heading\"\n          className=\"text-base sm:text-lg font-medium text-gray-900 mb-4\"\n        >\n          {locale === 'zh' ? 'ç–¼ç—›è¶‹åŠ¿å›¾' : 'Pain Trend Chart'}\n        </h2>\n        \n        <div \n          className=\"h-64 sm:h-80 bg-gray-50 rounded-lg flex items-center justify-center\"\n          role=\"img\"\n          aria-labelledby=\"chart-description\"\n        >\n          <div className=\"text-center max-w-sm mx-auto p-4\">\n            <svg \n              className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n              aria-hidden=\"true\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n            </svg>\n            <h3 className=\"text-sm sm:text-base font-medium text-gray-700 mb-2\">\n              {locale === 'zh' ? 'å›¾è¡¨å°†åœ¨æ­¤å¤„æ˜¾ç¤º' : 'Chart will be displayed here'}\n            </h3>\n            <p \n              id=\"chart-description\"\n              className=\"text-xs sm:text-sm text-gray-500\"\n            >\n              {locale === 'zh' \n                ? 'å½“æ‚¨æœ‰è¶³å¤Ÿçš„ç–¼ç—›è®°å½•æ•°æ®æ—¶ï¼Œè¿™é‡Œå°†æ˜¾ç¤ºæ‚¨çš„ç–¼ç—›è¶‹åŠ¿å›¾è¡¨ï¼Œå¸®åŠ©æ‚¨äº†è§£ç–¼ç—›æ¨¡å¼çš„å˜åŒ–ã€‚'\n                : 'When you have sufficient pain record data, this area will display your pain trend charts to help you understand changes in your pain patterns.'\n              }\n            </p>\n          </div>\n        </div>\n        \n        {/* Alternative text description for screen readers */}\n        <div className=\"sr-only\">\n          {locale === 'zh' \n            ? 'ç–¼ç—›è¶‹åŠ¿å›¾è¡¨å ä½ç¬¦ã€‚å½“æœ‰è¶³å¤Ÿæ•°æ®æ—¶ï¼Œå°†æ˜¾ç¤ºæ‚¨çš„ç–¼ç—›æ°´å¹³éšæ—¶é—´å˜åŒ–çš„å›¾è¡¨ã€‚'\n            : 'Pain trend chart placeholder. When sufficient data is available, this will show a chart of your pain levels over time.'\n          }\n        </div>\n      </section>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/ExportTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Eye' is defined but never used.","line":5,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { Calendar, FileText, Download, Eye, AlertTriangle, CheckCircle, XCircle, Clock } from 'lucide-react';\nimport { PainRecord } from '../../../../../types/pain-tracker';\nimport { ExportManager } from '../../../../../lib/pain-tracker/export/ExportManager';\nimport { AnalyticsEngine } from '../../../../../lib/pain-tracker/analytics/AnalyticsEngine';\n\ntype Locale = 'en' | 'zh';\n\ninterface LocalExportOptions {\n  includeCharts: boolean;\n  includeRecommendations: boolean;\n  includeAnalytics: boolean;\n  includeRawData: boolean;\n}\n\ninterface DateRange {\n  startDate: string;\n  endDate: string;\n}\n\ninterface ExportTabProps {\n  locale: Locale;\n  records: PainRecord[];\n  onExport?: (options: {\n    dateRange: DateRange;\n    format: 'html' | 'pdf';\n    exportOptions: LocalExportOptions;\n  }) => Promise<void>;\n}\n\nexport default function ExportTab({ locale, records, onExport }: ExportTabProps) {\n  const t = useTranslations('painTracker.export');\n  const exportManager = useRef(new ExportManager());\n  const analyticsEngine = useRef(new AnalyticsEngine());\n  \n  // State management\n  const [activeStep, setActiveStep] = useState<'range' | 'format' | 'options' | 'preview' | 'export'>('range');\n  const [dateRange, setDateRange] = useState<DateRange>({\n    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 30 days ago\n    endDate: new Date().toISOString().split('T')[0] // today\n  });\n  const [exportFormat, setExportFormat] = useState<'html' | 'pdf'>('pdf');\n  const [exportOptions, setExportOptions] = useState<LocalExportOptions>({\n    includeCharts: true,\n    includeRecommendations: true,\n    includeAnalytics: true,\n    includeRawData: false\n  });\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState(0);\n  const [exportStatus, setExportStatus] = useState<'idle' | 'preparing' | 'generating' | 'success' | 'error'>('idle');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [previewContent, setPreviewContent] = useState<string>('');\n  const [filteredRecords, setFilteredRecords] = useState<PainRecord[]>([]);\n  const [recordsInRange, setRecordsInRange] = useState(0);\n  \n  const previewRef = useRef<HTMLDivElement>(null);\n\n  // Update filtered records when date range changes\n  useEffect(() => {\n    const filtered = records.filter(record => {\n      const recordDate = new Date(record.date);\n      const startDate = new Date(dateRange.startDate);\n      const endDate = new Date(dateRange.endDate);\n      return recordDate >= startDate && recordDate <= endDate;\n    });\n    setFilteredRecords(filtered);\n    setRecordsInRange(filtered.length);\n  }, [records, dateRange]);\n\n  // Quick date range presets\n  const datePresets = [\n    { label: t('dateRange.presets.last7Days'), days: 7 },\n    { label: t('dateRange.presets.last30Days'), days: 30 },\n    { label: t('dateRange.presets.last90Days'), days: 90 },\n    { label: t('dateRange.presets.last6Months'), days: 180 },\n    { label: t('dateRange.presets.lastYear'), days: 365 }\n  ];\n\n  const handleDatePreset = (days: number) => {\n    const endDate = new Date();\n    const startDate = new Date(endDate.getTime() - days * 24 * 60 * 60 * 1000);\n    setDateRange({\n      startDate: startDate.toISOString().split('T')[0],\n      endDate: endDate.toISOString().split('T')[0]\n    });\n  };\n\n  const handleNextStep = () => {\n    switch (activeStep) {\n      case 'range':\n        setActiveStep('format');\n        break;\n      case 'format':\n        setActiveStep('options');\n        break;\n      case 'options':\n        setActiveStep('preview');\n        generatePreview();\n        break;\n      case 'preview':\n        setActiveStep('export');\n        handleExport();\n        break;\n    }\n  };\n\n  const handlePreviousStep = () => {\n    switch (activeStep) {\n      case 'format':\n        setActiveStep('range');\n        break;\n      case 'options':\n        setActiveStep('format');\n        break;\n      case 'preview':\n        setActiveStep('options');\n        break;\n      case 'export':\n        setActiveStep('preview');\n        break;\n    }\n  };\n\n  const generatePreview = async () => {\n    setExportStatus('preparing');\n    setExportProgress(20);\n    \n    try {\n      if (filteredRecords.length === 0) {\n        setPreviewContent(`\n          <div class=\"medical-report-preview p-6 bg-gray-50 rounded-lg\">\n            <div class=\"text-center\">\n              <div class=\"text-gray-400 mb-4\">\n                <FileText className=\"w-16 h-16 mx-auto\" />\n              </div>\n              <h3 class=\"text-lg font-medium text-gray-900 mb-2\">\n                ${locale === 'zh' ? 'æ²¡æœ‰æ•°æ®' : 'No Data Available'}\n              </h3>\n              <p class=\"text-gray-600\">\n                ${locale === 'zh' \n                  ? 'æ‰€é€‰æ—¥æœŸèŒƒå›´å†…æ²¡æœ‰ç–¼ç—›è®°å½•ã€‚è¯·è°ƒæ•´æ—¥æœŸèŒƒå›´æˆ–æ·»åŠ æ›´å¤šè®°å½•ã€‚'\n                  : 'No pain records found in the selected date range. Please adjust the date range or add more records.'\n                }\n              </p>\n            </div>\n          </div>\n        `);\n        setExportStatus('idle');\n        setExportProgress(0);\n        return;\n      }\n\n      setExportProgress(50);\n      \n      // Generate analytics for preview\n      const analytics = analyticsEngine.current.calculateAnalytics(filteredRecords);\n      \n      setExportProgress(80);\n      \n      // Generate preview content\n      const previewHtml = `\n        <div class=\"medical-report-preview p-6 bg-white rounded-lg border\">\n          <div class=\"mb-6\">\n            <h2 class=\"text-2xl font-bold text-gray-900 mb-4\">\n              ${locale === 'zh' ? 'ç–¼ç—›è¿½è¸ªåŒ»ç–—æŠ¥å‘Š' : 'Pain Tracking Medical Report'}\n            </h2>\n            <div class=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span class=\"font-medium text-gray-700\">\n                  ${locale === 'zh' ? 'æŠ¥å‘Šæ—¥æœŸï¼š' : 'Report Date: '}\n                </span>\n                <span class=\"text-gray-600\">${new Date().toLocaleDateString()}</span>\n              </div>\n              <div>\n                <span class=\"font-medium text-gray-700\">\n                  ${locale === 'zh' ? 'æ•°æ®èŒƒå›´ï¼š' : 'Data Range: '}\n                </span>\n                <span class=\"text-gray-600\">${dateRange.startDate} - ${dateRange.endDate}</span>\n              </div>\n              <div>\n                <span class=\"font-medium text-gray-700\">\n                  ${locale === 'zh' ? 'è®°å½•æ•°é‡ï¼š' : 'Total Records: '}\n                </span>\n                <span class=\"text-gray-600\">${filteredRecords.length}</span>\n              </div>\n              <div>\n                <span class=\"font-medium text-gray-700\">\n                  ${locale === 'zh' ? 'å¯¼å‡ºæ ¼å¼ï¼š' : 'Export Format: '}\n                </span>\n                <span class=\"text-gray-600\">${exportFormat.toUpperCase()}</span>\n              </div>\n            </div>\n          </div>\n\n          ${exportOptions.includeAnalytics ? `\n            <div class=\"mb-6\">\n              <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">\n                ${locale === 'zh' ? 'æ•°æ®æ‘˜è¦' : 'Data Summary'}\n              </h3>\n              <div class=\"grid grid-cols-2 gap-4 text-sm\">\n                <div class=\"bg-blue-50 p-3 rounded\">\n                  <div class=\"font-medium text-blue-900\">\n                    ${locale === 'zh' ? 'å¹³å‡ç–¼ç—›ç­‰çº§' : 'Average Pain Level'}\n                  </div>\n                  <div class=\"text-2xl font-bold text-blue-600\">\n                    ${analytics.averagePainLevel.toFixed(1)}/10\n                  </div>\n                </div>\n                <div class=\"bg-purple-50 p-3 rounded\">\n                  <div class=\"font-medium text-purple-900\">\n                    ${locale === 'zh' ? 'æœ€å¸¸è§ç–¼ç—›ç±»å‹' : 'Most Common Pain Type'}\n                  </div>\n                  <div class=\"text-sm font-medium text-purple-600\">\n                    ${analytics.commonPainTypes.length > 0 ? \n                      analytics.commonPainTypes[0].type.replace('_', ' ') : \n                      (locale === 'zh' ? 'æ— æ•°æ®' : 'No data')\n                    }\n                  </div>\n                </div>\n              </div>\n            </div>\n          ` : ''}\n\n          ${exportOptions.includeCharts ? `\n            <div class=\"mb-6\">\n              <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">\n                ${locale === 'zh' ? 'å›¾è¡¨å’Œå¯è§†åŒ–' : 'Charts and Visualizations'}\n              </h3>\n              <div class=\"bg-gray-100 p-4 rounded text-center text-gray-600\">\n                <div class=\"text-4xl mb-2\">ğŸ“Š</div>\n                <p>${locale === 'zh' ? 'å›¾è¡¨å°†åœ¨æœ€ç»ˆæŠ¥å‘Šä¸­æ˜¾ç¤º' : 'Charts will be displayed in the final report'}</p>\n              </div>\n            </div>\n          ` : ''}\n\n          ${exportOptions.includeRecommendations ? `\n            <div class=\"mb-6\">\n              <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">\n                ${locale === 'zh' ? 'æ²»ç–—å»ºè®®' : 'Treatment Recommendations'}\n              </h3>\n              <div class=\"bg-green-50 p-4 rounded\">\n                <p class=\"text-green-800 text-sm\">\n                  ${locale === 'zh' \n                    ? 'åŸºäºæ‚¨çš„ç–¼ç—›æ•°æ®ï¼Œç³»ç»Ÿå°†ç”Ÿæˆä¸ªæ€§åŒ–çš„æ²»ç–—å»ºè®®å’Œæ¨¡å¼åˆ†æã€‚'\n                    : 'Based on your pain data, the system will generate personalized treatment recommendations and pattern analysis.'\n                  }\n                </p>\n              </div>\n            </div>\n          ` : ''}\n\n          ${exportOptions.includeRawData ? `\n            <div class=\"mb-6\">\n              <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">\n                ${locale === 'zh' ? 'è¯¦ç»†è®°å½•' : 'Detailed Records'}\n              </h3>\n              <div class=\"bg-gray-50 p-4 rounded\">\n                <p class=\"text-gray-600 text-sm mb-2\">\n                  ${locale === 'zh' ? 'æœ€è¿‘çš„è®°å½•é¢„è§ˆï¼š' : 'Recent records preview:'}\n                </p>\n                ${filteredRecords.slice(0, 3).map(record => `\n                  <div class=\"border-l-4 border-blue-500 pl-3 mb-2\">\n                    <div class=\"text-sm font-medium\">${record.date} - ${locale === 'zh' ? 'ç–¼ç—›ç­‰çº§' : 'Pain Level'}: ${record.painLevel}/10</div>\n                    <div class=\"text-xs text-gray-600\">${record.painTypes?.join(', ') || ''}</div>\n                  </div>\n                `).join('')}\n                ${filteredRecords.length > 3 ? `\n                  <p class=\"text-xs text-gray-500 mt-2\">\n                    ${locale === 'zh' ? `è¿˜æœ‰ ${filteredRecords.length - 3} æ¡è®°å½•...` : `And ${filteredRecords.length - 3} more records...`}\n                  </p>\n                ` : ''}\n              </div>\n            </div>\n          ` : ''}\n\n          <div class=\"border-t pt-4\">\n            <p class=\"text-xs text-gray-500\">\n              ${locale === 'zh' \n                ? 'æ­¤é¢„è§ˆä»…æ˜¾ç¤ºæŠ¥å‘Šçš„éƒ¨åˆ†å†…å®¹ã€‚å®Œæ•´æŠ¥å‘Šå°†åŒ…å«æ‰€æœ‰é€‰å®šçš„æ•°æ®å’Œåˆ†æã€‚'\n                : 'This preview shows only a portion of the report content. The complete report will include all selected data and analysis.'\n              }\n            </p>\n          </div>\n        </div>\n      `;\n      \n      setPreviewContent(previewHtml);\n      setExportProgress(100);\n      setExportStatus('idle');\n      \n    } catch (error) {\n      setExportStatus('error');\n      setErrorMessage(error instanceof Error ? error.message : 'Preview generation failed');\n    }\n  };\n\n  const handleExport = async () => {\n    if (filteredRecords.length === 0) {\n      setExportStatus('error');\n      setErrorMessage(locale === 'zh' ? 'æ²¡æœ‰æ•°æ®å¯å¯¼å‡º' : 'No data to export');\n      return;\n    }\n    \n    setIsExporting(true);\n    setExportStatus('generating');\n    setExportProgress(0);\n    setErrorMessage('');\n\n    try {\n      // Generate analytics\n      setExportProgress(20);\n      const analytics = analyticsEngine.current.calculateAnalytics(filteredRecords);\n      \n      // Prepare export options\n      setExportProgress(40);\n      const exportOptionsWithDateRange = {\n        format: exportFormat as 'html' | 'pdf',\n        dateRange: {\n          start: new Date(dateRange.startDate),\n          end: new Date(dateRange.endDate)\n        },\n        includeCharts: exportOptions.includeCharts,\n        includeSummary: exportOptions.includeRecommendations, // Map to includeSummary\n        includeInsights: exportOptions.includeAnalytics, // Map to includeInsights\n        includeRawData: exportOptions.includeRawData\n      };\n\n      setExportProgress(60);\n      \n      if (exportFormat === 'html') {\n        // Generate HTML export\n        const htmlContent = await exportManager.current.exportToHTML(\n          filteredRecords,\n          analytics,\n          exportOptionsWithDateRange\n        );\n        \n        setExportProgress(80);\n        \n        // Create and download HTML file\n        const blob = new Blob([htmlContent], { type: 'text/html' });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `pain-report-${dateRange.startDate}-to-${dateRange.endDate}.html`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n        \n      } else {\n        // Generate PDF export\n        const pdfBlob = await exportManager.current.exportToPDF(\n          filteredRecords,\n          analytics,\n          exportOptionsWithDateRange\n        );\n        \n        setExportProgress(80);\n        \n        // Create and download PDF file\n        const url = URL.createObjectURL(pdfBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `pain-report-${dateRange.startDate}-to-${dateRange.endDate}.pdf`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n\n      setExportProgress(100);\n      setExportStatus('success');\n      \n      // Call the onExport callback if provided\n      if (onExport) {\n        await onExport({\n          dateRange,\n          format: exportFormat,\n          exportOptions\n        });\n      }\n      \n      setTimeout(() => {\n        setIsExporting(false);\n        setExportStatus('idle');\n        setExportProgress(0);\n      }, 3000);\n\n    } catch (error) {\n      setExportStatus('error');\n      setErrorMessage(error instanceof Error ? error.message : 'Export failed');\n      setIsExporting(false);\n      console.error('Export error:', error);\n    }\n  };\n\n  const renderStepIndicator = () => (\n    <div className=\"flex items-center justify-center mb-8\">\n      <div className=\"flex items-center space-x-4\">\n        {[\n          { key: 'range', label: t('steps.dateRange') },\n          { key: 'format', label: t('steps.format') },\n          { key: 'options', label: t('steps.options') },\n          { key: 'preview', label: t('steps.preview') },\n          { key: 'export', label: t('steps.export') }\n        ].map((step, index) => (\n          <div key={step.key} className=\"flex items-center\">\n            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n              activeStep === step.key \n                ? 'bg-primary-600 text-white' \n                : ['range', 'format', 'options', 'preview', 'export'].indexOf(activeStep) > index\n                ? 'bg-green-500 text-white'\n                : 'bg-gray-200 text-gray-600'\n            }`}>\n              {index + 1}\n            </div>\n            <span className={`ml-2 text-sm ${\n              activeStep === step.key ? 'text-primary-600 font-medium' : 'text-gray-500'\n            }`}>\n              {step.label}\n            </span>\n            {index < 4 && (\n              <div className={`w-8 h-0.5 mx-4 ${\n                ['range', 'format', 'options', 'preview', 'export'].indexOf(activeStep) > index\n                  ? 'bg-green-500'\n                  : 'bg-gray-200'\n              }`} />\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderDateRangeStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n          {t('dateRange.title')}\n        </h3>\n        <p className=\"text-gray-600\">\n          {t('dateRange.description')}\n        </p>\n      </div>\n\n      {/* Quick presets */}\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3\">\n        {datePresets.map((preset) => (\n          <button\n            key={preset.days}\n            onClick={() => handleDatePreset(preset.days)}\n            className=\"px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors\"\n          >\n            {preset.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Custom date range */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            {t('dateRange.startDate')}\n          </label>\n          <input\n            type=\"date\"\n            value={dateRange.startDate}\n            onChange={(e) => setDateRange(prev => ({ ...prev, startDate: e.target.value }))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            {t('dateRange.endDate')}\n          </label>\n          <input\n            type=\"date\"\n            value={dateRange.endDate}\n            onChange={(e) => setDateRange(prev => ({ ...prev, endDate: e.target.value }))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\n          />\n        </div>\n      </div>\n\n      {/* Date range validation and info */}\n      {new Date(dateRange.startDate) > new Date(dateRange.endDate) ? (\n        <div className=\"p-3 bg-red-50 border border-red-200 rounded-md\">\n          <div className=\"flex items-center space-x-2\">\n            <XCircle className=\"w-4 h-4 text-red-500\" />\n            <p className=\"text-sm text-red-600\">\n              {locale === 'zh' ? 'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ' : 'Start date cannot be later than end date'}\n            </p>\n          </div>\n        </div>\n      ) : (\n        <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-md\">\n          <div className=\"flex items-center space-x-2\">\n            <FileText className=\"w-4 h-4 text-blue-500\" />\n            <p className=\"text-sm text-blue-600\">\n              {locale === 'zh' \n                ? `æ‰¾åˆ° ${recordsInRange} æ¡è®°å½•åœ¨æ‰€é€‰æ—¥æœŸèŒƒå›´å†…`\n                : `Found ${recordsInRange} records in the selected date range`\n              }\n            </p>\n          </div>\n          {recordsInRange === 0 && (\n            <p className=\"text-xs text-blue-500 mt-1\">\n              {locale === 'zh' \n                ? 'è¯·è°ƒæ•´æ—¥æœŸèŒƒå›´ä»¥åŒ…å«æ›´å¤šè®°å½•ï¼Œæˆ–å…ˆæ·»åŠ ä¸€äº›ç–¼ç—›è®°å½•ã€‚'\n                : 'Please adjust the date range to include more records, or add some pain records first.'\n              }\n            </p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n\n  const renderFormatStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n          {locale === 'zh' ? 'é€‰æ‹©å¯¼å‡ºæ ¼å¼' : 'Select Export Format'}\n        </h3>\n        <p className=\"text-gray-600\">\n          {locale === 'zh' ? 'é€‰æ‹©æŠ¥å‘Šçš„å¯¼å‡ºæ ¼å¼' : 'Choose the format for your report'}\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* PDF Option */}\n        <div\n          className={`p-6 border-2 rounded-lg cursor-pointer transition-all ${\n            exportFormat === 'pdf'\n              ? 'border-primary-500 bg-primary-50'\n              : 'border-gray-200 hover:border-gray-300'\n          }`}\n          onClick={() => setExportFormat('pdf')}\n        >\n          <div className=\"flex items-center mb-4\">\n            <div className={`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${\n              exportFormat === 'pdf' ? 'border-primary-500 bg-primary-500' : 'border-gray-300'\n            }`}>\n              {exportFormat === 'pdf' && (\n                <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n              )}\n            </div>\n            <h4 className=\"text-lg font-semibold text-gray-900\">PDF</h4>\n          </div>\n          <p className=\"text-gray-600 mb-4\">\n            {locale === 'zh' \n              ? 'ç”Ÿæˆä¸“ä¸šçš„PDFåŒ»ç–—æŠ¥å‘Šï¼Œé€‚åˆæ‰“å°å’Œåˆ†äº«ç»™åŒ»ç”Ÿ'\n              : 'Generate professional PDF medical reports, suitable for printing and sharing with doctors'\n            }\n          </p>\n          <ul className=\"text-sm text-gray-500 space-y-1\">\n            <li>â€¢ {locale === 'zh' ? 'é«˜è´¨é‡æ‰“å°æ ¼å¼' : 'High-quality print format'}</li>\n            <li>â€¢ {locale === 'zh' ? 'é€‚åˆåŒ»ç–—æ¡£æ¡ˆ' : 'Suitable for medical records'}</li>\n            <li>â€¢ {locale === 'zh' ? 'åŒ…å«å›¾è¡¨å’Œæ•°æ®åˆ†æ' : 'Includes charts and data analysis'}</li>\n          </ul>\n        </div>\n\n        {/* HTML Option */}\n        <div\n          className={`p-6 border-2 rounded-lg cursor-pointer transition-all ${\n            exportFormat === 'html'\n              ? 'border-primary-500 bg-primary-50'\n              : 'border-gray-200 hover:border-gray-300'\n          }`}\n          onClick={() => setExportFormat('html')}\n        >\n          <div className=\"flex items-center mb-4\">\n            <div className={`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${\n              exportFormat === 'html' ? 'border-primary-500 bg-primary-500' : 'border-gray-300'\n            }`}>\n              {exportFormat === 'html' && (\n                <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n              )}\n            </div>\n            <h4 className=\"text-lg font-semibold text-gray-900\">HTML</h4>\n          </div>\n          <p className=\"text-gray-600 mb-4\">\n            {locale === 'zh' \n              ? 'ç”Ÿæˆäº¤äº’å¼HTMLæŠ¥å‘Šï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹å’Œåˆ†äº«'\n              : 'Generate interactive HTML reports that can be viewed and shared in browsers'\n            }\n          </p>\n          <ul className=\"text-sm text-gray-500 space-y-1\">\n            <li>â€¢ {locale === 'zh' ? 'äº¤äº’å¼å›¾è¡¨' : 'Interactive charts'}</li>\n            <li>â€¢ {locale === 'zh' ? 'åœ¨çº¿æŸ¥çœ‹å’Œåˆ†äº«' : 'Online viewing and sharing'}</li>\n            <li>â€¢ {locale === 'zh' ? 'å“åº”å¼è®¾è®¡' : 'Responsive design'}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderOptionsStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n          {locale === 'zh' ? 'é…ç½®å¯¼å‡ºé€‰é¡¹' : 'Configure Export Options'}\n        </h3>\n        <p className=\"text-gray-600\">\n          {locale === 'zh' ? 'é€‰æ‹©è¦åŒ…å«åœ¨æŠ¥å‘Šä¸­çš„å†…å®¹' : 'Choose what content to include in your report'}\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        {[\n          {\n            key: 'includeCharts' as keyof LocalExportOptions,\n            title: locale === 'zh' ? 'åŒ…å«å›¾è¡¨' : 'Include Charts',\n            description: locale === 'zh' ? 'ç–¼ç—›è¶‹åŠ¿å›¾è¡¨å’Œåˆ†å¸ƒå›¾' : 'Pain trend charts and distribution graphs',\n            recommended: true\n          },\n          {\n            key: 'includeRecommendations' as keyof LocalExportOptions,\n            title: locale === 'zh' ? 'åŒ…å«æ²»ç–—å»ºè®®' : 'Include Treatment Recommendations',\n            description: locale === 'zh' ? 'åŸºäºæ•°æ®çš„ä¸ªæ€§åŒ–å»ºè®®' : 'Personalized recommendations based on data',\n            recommended: true\n          },\n          {\n            key: 'includeAnalytics' as keyof LocalExportOptions,\n            title: locale === 'zh' ? 'åŒ…å«æ•°æ®åˆ†æ' : 'Include Data Analytics',\n            description: locale === 'zh' ? 'ç»Ÿè®¡åˆ†æå’Œæ¨¡å¼è¯†åˆ«' : 'Statistical analysis and pattern recognition',\n            recommended: true\n          },\n          {\n            key: 'includeRawData' as keyof LocalExportOptions,\n            title: locale === 'zh' ? 'åŒ…å«åŸå§‹æ•°æ®' : 'Include Raw Data',\n            description: locale === 'zh' ? 'è¯¦ç»†çš„ç–¼ç—›è®°å½•æ•°æ®' : 'Detailed pain record data',\n            recommended: false\n          }\n        ].map((option) => (\n          <div key={option.key} className=\"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg\">\n            <input\n              type=\"checkbox\"\n              id={option.key}\n              checked={exportOptions[option.key]}\n              onChange={(e) => setExportOptions(prev => ({\n                ...prev,\n                [option.key]: e.target.checked\n              }))}\n              className=\"mt-1 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n            />\n            <div className=\"flex-1\">\n              <div className=\"flex items-center space-x-2\">\n                <label htmlFor={option.key} className=\"text-sm font-medium text-gray-900 cursor-pointer\">\n                  {option.title}\n                </label>\n                {option.recommended && (\n                  <span className=\"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full\">\n                    {locale === 'zh' ? 'æ¨è' : 'Recommended'}\n                  </span>\n                )}\n              </div>\n              <p className=\"text-sm text-gray-500 mt-1\">{option.description}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Privacy warning */}\n      <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n        <div className=\"flex items-start space-x-3\">\n          <AlertTriangle className=\"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0\" />\n          <div>\n            <h4 className=\"text-sm font-medium text-yellow-800\">\n              {locale === 'zh' ? 'éšç§å’Œæ•°æ®å®‰å…¨æé†’' : 'Privacy and Data Security Notice'}\n            </h4>\n            <div className=\"text-sm text-yellow-700 mt-2 space-y-2\">\n              <p>\n                {locale === 'zh' \n                  ? 'æ‚¨çš„ç–¼ç—›æ•°æ®åŒ…å«æ•æ„ŸåŒ»ç–—ä¿¡æ¯ã€‚è¯·æ³¨æ„ä»¥ä¸‹äº‹é¡¹ï¼š'\n                  : 'Your pain data contains sensitive medical information. Please note the following:'\n                }\n              </p>\n              <ul className=\"list-disc list-inside space-y-1 text-xs\">\n                <li>\n                  {locale === 'zh' \n                    ? 'å¯¼å‡ºçš„æŠ¥å‘ŠåŒ…å«ä¸ªäººå¥åº·æ•°æ®ï¼Œè¯·å¦¥å–„ä¿ç®¡'\n                    : 'Exported reports contain personal health data, please store securely'\n                  }\n                </li>\n                <li>\n                  {locale === 'zh' \n                    ? 'ä¸åŒ»ç”Ÿåˆ†äº«æ—¶ï¼Œå»ºè®®ä½¿ç”¨å®‰å…¨çš„ä¼ è¾“æ–¹å¼'\n                    : 'When sharing with doctors, use secure transmission methods'\n                  }\n                </li>\n                <li>\n                  {locale === 'zh' \n                    ? 'ä¸å»ºè®®é€šè¿‡ç”µå­é‚®ä»¶æˆ–ç¤¾äº¤åª’ä½“åˆ†äº«æŠ¥å‘Š'\n                    : 'Avoid sharing reports via email or social media'\n                  }\n                </li>\n                <li>\n                  {locale === 'zh' \n                    ? 'æ‰€æœ‰æ•°æ®å¤„ç†å‡åœ¨æœ¬åœ°è¿›è¡Œï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨'\n                    : 'All data processing is done locally, no data is uploaded to servers'\n                  }\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Data sensitivity notice */}\n      <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n        <div className=\"flex items-start space-x-3\">\n          <FileText className=\"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0\" />\n          <div>\n            <h4 className=\"text-sm font-medium text-blue-800\">\n              {locale === 'zh' ? 'åŒ»ç–—æŠ¥å‘Šç”¨é€”' : 'Medical Report Usage'}\n            </h4>\n            <p className=\"text-sm text-blue-700 mt-1\">\n              {locale === 'zh' \n                ? 'æ­¤æŠ¥å‘Šä¸“ä¸ºåŒ»ç–—å’¨è¯¢è®¾è®¡ï¼ŒåŒ…å«ä¸“ä¸šçš„æ•°æ®åˆ†æå’Œå»ºè®®ã€‚å»ºè®®åœ¨å°±åŒ»æ—¶æºå¸¦æ­¤æŠ¥å‘Šï¼Œä»¥ä¾¿åŒ»ç”Ÿæ›´å¥½åœ°äº†è§£æ‚¨çš„ç–¼ç—›æ¨¡å¼ã€‚'\n                : 'This report is designed for medical consultations and includes professional data analysis and recommendations. We recommend bringing this report to medical appointments to help doctors better understand your pain patterns.'\n              }\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderPreviewStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n          {locale === 'zh' ? 'æŠ¥å‘Šé¢„è§ˆ' : 'Report Preview'}\n        </h3>\n        <p className=\"text-gray-600\">\n          {locale === 'zh' ? 'é¢„è§ˆæ‚¨çš„æŠ¥å‘Šå†…å®¹ï¼Œç¡®è®¤æ— è¯¯åç»§ç»­å¯¼å‡º' : 'Preview your report content before proceeding with export'}\n        </p>\n      </div>\n\n      <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\n        <div className=\"bg-gray-50 px-4 py-3 border-b border-gray-200\">\n          <h4 className=\"text-sm font-medium text-gray-900\">\n            {locale === 'zh' ? 'æŠ¥å‘Šé…ç½®æ‘˜è¦' : 'Report Configuration Summary'}\n          </h4>\n        </div>\n        <div className=\"p-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n            <div>\n              <span className=\"font-medium text-gray-700\">\n                {locale === 'zh' ? 'æ—¥æœŸèŒƒå›´ï¼š' : 'Date Range: '}\n              </span>\n              <span className=\"text-gray-600\">{dateRange.startDate} - {dateRange.endDate}</span>\n            </div>\n            <div>\n              <span className=\"font-medium text-gray-700\">\n                {locale === 'zh' ? 'å¯¼å‡ºæ ¼å¼ï¼š' : 'Export Format: '}\n              </span>\n              <span className=\"text-gray-600\">{exportFormat.toUpperCase()}</span>\n            </div>\n            <div className=\"md:col-span-2\">\n              <span className=\"font-medium text-gray-700\">\n                {locale === 'zh' ? 'åŒ…å«å†…å®¹ï¼š' : 'Includes: '}\n              </span>\n              <div className=\"mt-1 flex flex-wrap gap-2\">\n                {exportOptions.includeCharts && (\n                  <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                    {locale === 'zh' ? 'å›¾è¡¨' : 'Charts'}\n                  </span>\n                )}\n                {exportOptions.includeRecommendations && (\n                  <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                    {locale === 'zh' ? 'å»ºè®®' : 'Recommendations'}\n                  </span>\n                )}\n                {exportOptions.includeAnalytics && (\n                  <span className=\"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full\">\n                    {locale === 'zh' ? 'åˆ†æ' : 'Analytics'}\n                  </span>\n                )}\n                {exportOptions.includeRawData && (\n                  <span className=\"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full\">\n                    {locale === 'zh' ? 'åŸå§‹æ•°æ®' : 'Raw Data'}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Preview content */}\n      <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\n        <div className=\"bg-gray-50 px-4 py-3 border-b border-gray-200\">\n          <h4 className=\"text-sm font-medium text-gray-900\">\n            {locale === 'zh' ? 'å†…å®¹é¢„è§ˆ' : 'Content Preview'}\n          </h4>\n        </div>\n        <div \n          ref={previewRef}\n          className=\"p-4 bg-white min-h-[300px]\"\n          dangerouslySetInnerHTML={{ __html: previewContent }}\n        />\n      </div>\n    </div>\n  );\n\n  const renderExportStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n          {locale === 'zh' ? 'æ­£åœ¨å¯¼å‡ºæŠ¥å‘Š' : 'Exporting Report'}\n        </h3>\n        <p className=\"text-gray-600\">\n          {locale === 'zh' ? 'è¯·ç¨å€™ï¼Œæ­£åœ¨ç”Ÿæˆæ‚¨çš„æŠ¥å‘Š...' : 'Please wait while we generate your report...'}\n        </p>\n      </div>\n\n      {/* Progress bar */}\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n        <div \n          className=\"bg-primary-600 h-3 rounded-full transition-all duration-300\"\n          style={{ width: `${exportProgress}%` }}\n        />\n      </div>\n\n      {/* Status messages */}\n      <div className=\"text-center\">\n        {exportStatus === 'preparing' && (\n          <p className=\"text-sm text-gray-600\">\n            {locale === 'zh' ? 'å‡†å¤‡æ•°æ®...' : 'Preparing data...'}\n          </p>\n        )}\n        {exportStatus === 'generating' && (\n          <p className=\"text-sm text-gray-600\">\n            {locale === 'zh' ? 'ç”ŸæˆæŠ¥å‘Š...' : 'Generating report...'}\n          </p>\n        )}\n        {exportStatus === 'success' && (\n          <div className=\"flex items-center justify-center space-x-2 text-green-600\">\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n            </svg>\n            <p className=\"text-sm font-medium\">\n              {locale === 'zh' ? 'å¯¼å‡ºæˆåŠŸï¼' : 'Export successful!'}\n            </p>\n          </div>\n        )}\n        {exportStatus === 'error' && (\n          <div className=\"flex items-center justify-center space-x-2 text-red-600\">\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n            </svg>\n            <p className=\"text-sm font-medium\">\n              {locale === 'zh' ? 'å¯¼å‡ºå¤±è´¥' : 'Export failed'}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Error message */}\n      {errorMessage && (\n        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n          <p className=\"text-sm text-red-600\">{errorMessage}</p>\n        </div>\n      )}\n\n      {/* Success message */}\n      {exportStatus === 'success' && (\n        <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n          <div className=\"flex items-start space-x-3\">\n            <CheckCircle className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n            <div>\n              <h4 className=\"text-sm font-medium text-green-800\">\n                {locale === 'zh' ? 'å¯¼å‡ºæˆåŠŸï¼' : 'Export Successful!'}\n              </h4>\n              <p className=\"text-sm text-green-600 mt-1\">\n                {locale === 'zh' \n                  ? `æ‚¨çš„${exportFormat.toUpperCase()}æŠ¥å‘Šå·²æˆåŠŸç”Ÿæˆå¹¶ä¸‹è½½ã€‚æ–‡ä»¶åï¼špain-report-${dateRange.startDate}-to-${dateRange.endDate}.${exportFormat}`\n                  : `Your ${exportFormat.toUpperCase()} report has been successfully generated and downloaded. Filename: pain-report-${dateRange.startDate}-to-${dateRange.endDate}.${exportFormat}`\n                }\n              </p>\n              <div className=\"mt-2 text-xs text-green-600\">\n                <p>\n                  {locale === 'zh' \n                    ? 'â€¢ è¯·æ£€æŸ¥æ‚¨çš„ä¸‹è½½æ–‡ä»¶å¤¹'\n                    : 'â€¢ Please check your downloads folder'\n                  }\n                </p>\n                <p>\n                  {locale === 'zh' \n                    ? 'â€¢ æŠ¥å‘ŠåŒ…å«æ‚¨é€‰æ‹©çš„æ‰€æœ‰æ•°æ®å’Œåˆ†æ'\n                    : 'â€¢ Report includes all selected data and analysis'\n                  }\n                </p>\n                <p>\n                  {locale === 'zh' \n                    ? 'â€¢ å¯ä»¥å®‰å…¨åœ°ä¸åŒ»ç–—ä¸“ä¸šäººå‘˜åˆ†äº«'\n                    : 'â€¢ Safe to share with healthcare professionals'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Additional export options after success */}\n      {exportStatus === 'success' && (\n        <div className=\"flex flex-col sm:flex-row gap-3 mt-4\">\n          <button\n            onClick={() => {\n              setActiveStep('range');\n              setExportStatus('idle');\n              setExportProgress(0);\n            }}\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            {locale === 'zh' ? 'å¯¼å‡ºå…¶ä»–æŠ¥å‘Š' : 'Export Another Report'}\n          </button>\n          <button\n            onClick={() => {\n              setActiveStep('preview');\n              setExportStatus('idle');\n              setExportProgress(0);\n            }}\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            {locale === 'zh' ? 'é‡æ–°é¢„è§ˆ' : 'Preview Again'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n\n  const canProceed = () => {\n    switch (activeStep) {\n      case 'range':\n        return new Date(dateRange.startDate) <= new Date(dateRange.endDate) && recordsInRange > 0;\n      case 'format':\n        return true;\n      case 'options':\n        return Object.values(exportOptions).some(Boolean);\n      case 'preview':\n        return previewContent.length > 0 && filteredRecords.length > 0;\n      case 'export':\n        return !isExporting && filteredRecords.length > 0;\n      default:\n        return false;\n    }\n  };\n\n  const getNextButtonText = () => {\n    switch (activeStep) {\n      case 'range':\n        return locale === 'zh' ? 'é€‰æ‹©æ ¼å¼' : 'Select Format';\n      case 'format':\n        return locale === 'zh' ? 'é…ç½®é€‰é¡¹' : 'Configure Options';\n      case 'options':\n        return locale === 'zh' ? 'é¢„è§ˆæŠ¥å‘Š' : 'Preview Report';\n      case 'preview':\n        return locale === 'zh' ? 'å¼€å§‹å¯¼å‡º' : 'Start Export';\n      case 'export':\n        return locale === 'zh' ? 'å®Œæˆ' : 'Complete';\n      default:\n        return locale === 'zh' ? 'ä¸‹ä¸€æ­¥' : 'Next';\n    }\n  };\n\n  // Show empty state if no records exist at all\n  if (records.length === 0) {\n    return (\n      <div className=\"w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-white rounded-lg shadow-sm p-8 text-center\">\n          <div className=\"text-gray-400 mb-6\">\n            <FileText className=\"w-24 h-24 mx-auto\" />\n          </div>\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">\n            {locale === 'zh' ? 'æ²¡æœ‰å¯å¯¼å‡ºçš„æ•°æ®' : 'No Data to Export'}\n          </h3>\n          <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n            {locale === 'zh' \n              ? 'æ‚¨è¿˜æ²¡æœ‰ä»»ä½•ç–¼ç—›è®°å½•ã€‚è¯·å…ˆæ·»åŠ ä¸€äº›ç–¼ç—›è®°å½•ï¼Œç„¶åå†è¿”å›æ­¤å¤„å¯¼å‡ºæŠ¥å‘Šã€‚'\n              : 'You don\\'t have any pain records yet. Please add some pain records first, then return here to export reports.'\n            }\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n            <button\n              onClick={() => window.location.reload()}\n              className=\"px-6 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors\"\n            >\n              {locale === 'zh' ? 'åˆ·æ–°é¡µé¢' : 'Refresh Page'}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Step indicator */}\n      {renderStepIndicator()}\n\n      {/* Main content */}\n      <div className=\"bg-white rounded-lg shadow-sm p-8\">\n        {activeStep === 'range' && renderDateRangeStep()}\n        {activeStep === 'format' && renderFormatStep()}\n        {activeStep === 'options' && renderOptionsStep()}\n        {activeStep === 'preview' && renderPreviewStep()}\n        {activeStep === 'export' && renderExportStep()}\n      </div>\n\n      {/* Navigation buttons */}\n      <div className=\"flex justify-between mt-8\">\n        <button\n          onClick={handlePreviousStep}\n          disabled={activeStep === 'range'}\n          className={`px-6 py-3 border border-gray-300 rounded-lg font-medium transition-colors ${\n            activeStep === 'range'\n              ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n              : 'bg-white text-gray-700 hover:bg-gray-50'\n          }`}\n        >\n          {locale === 'zh' ? 'ä¸Šä¸€æ­¥' : 'Previous'}\n        </button>\n\n        <button\n          onClick={handleNextStep}\n          disabled={!canProceed() || isExporting}\n          className={`px-6 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2 ${\n            !canProceed() || isExporting\n              ? 'bg-gray-400 text-white cursor-not-allowed'\n              : 'bg-primary-600 text-white hover:bg-primary-700'\n          }`}\n        >\n          {isExporting && <Clock className=\"w-4 h-4 animate-spin\" />}\n          <span>{getNextButtonText()}</span>\n          {activeStep === 'preview' && !isExporting && <Download className=\"w-4 h-4\" />}\n        </button>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/HistoryTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":15,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1440,1443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1440,1443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'getMockRecords'. Either include it or remove the dependency array.","line":107,"column":6,"nodeType":"ArrayExpression","endLine":107,"endColumn":81,"suggestions":[{"desc":"Update the dependencies array to be: [filterDateRange, filterPainLevel, getMockRecords, pagination.pageSize, performanceManager]","fix":{"range":[3309,3384],"text":"[filterDateRange, filterPainLevel, getMockRecords, pagination.pageSize, performanceManager]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadRecords'. Either include it or remove the dependency array.","line":112,"column":6,"nodeType":"ArrayExpression","endLine":112,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [filterDateRange, filterPainLevel, loadRecords]","fix":{"range":[3464,3498],"text":"[filterDateRange, filterPainLevel, loadRecords]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":269,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8314,8317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8314,8317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9579,9582],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9579,9582],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":352,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":352,"endColumn":40}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { PerformanceManager } from '../../../../../lib/pain-tracker/performance';\nimport { PainRecord, PaginationOptions, LazyLoadResult } from '../../../../../types/pain-tracker';\n\ntype Locale = 'en' | 'zh';\n\ninterface HistoryTabProps {\n  locale: Locale;\n}\n\nexport default function HistoryTab({ locale }: HistoryTabProps) {\n  const t = useTranslations('interactiveTools.history');\n  const [filterDateRange, setFilterDateRange] = useState<'all' | 'week' | 'month' | 'quarter'>('all');\n  const [filterPainLevel, setFilterPainLevel] = useState<'all' | 'low' | 'medium' | 'high'>('all');\n  \n  // Performance optimization states\n  const [records, setRecords] = useState<PainRecord[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    currentPage: 1,\n    pageSize: 20,\n    totalItems: 0,\n    totalPages: 0,\n    hasNextPage: false,\n    hasPreviousPage: false\n  });\n  \n  // Performance manager instance\n  const performanceManager = useMemo(() => new PerformanceManager(), []);\n  \n  // Load records with lazy loading and performance optimization\n  const loadRecords = useCallback(async (page: number = 1, resetData: boolean = false) => {\n    setLoading(true);\n    \n    try {\n      // Build filters based on current filter state\n      const filters: Record<string, any> = {};\n      \n      // Date range filter\n      if (filterDateRange !== 'all') {\n        const now = new Date();\n        const startDate = new Date(now);\n        \n        switch (filterDateRange) {\n          case 'week':\n            startDate.setDate(now.getDate() - 7);\n            break;\n          case 'month':\n            startDate.setDate(now.getDate() - 30);\n            break;\n          case 'quarter':\n            startDate.setDate(now.getDate() - 90);\n            break;\n        }\n        \n        filters.startDate = startDate.toISOString();\n        filters.endDate = now.toISOString();\n      }\n      \n      // Pain level filter\n      if (filterPainLevel !== 'all') {\n        switch (filterPainLevel) {\n          case 'low':\n            filters.minPainLevel = 0;\n            filters.maxPainLevel = 3;\n            break;\n          case 'medium':\n            filters.minPainLevel = 4;\n            filters.maxPainLevel = 6;\n            break;\n          case 'high':\n            filters.minPainLevel = 7;\n            filters.maxPainLevel = 10;\n            break;\n        }\n      }\n      \n      const paginationOptions: PaginationOptions = {\n        page,\n        pageSize: pagination.pageSize,\n        sortBy: 'date',\n        sortOrder: 'desc',\n        filters,\n        preload: true\n      };\n      \n      const result: LazyLoadResult<PainRecord> = await performanceManager.loadRecordsPaginated(paginationOptions);\n      \n      if (resetData || page === 1) {\n        setRecords(result.data);\n      } else {\n        // Append for infinite scroll\n        setRecords(prev => [...prev, ...result.data]);\n      }\n      \n      setPagination(result.pagination);\n    } catch (error) {\n      console.error('Failed to load records:', error);\n      // Fallback to mock data for demo\n      setRecords(getMockRecords());\n    } finally {\n      setLoading(false);\n    }\n  }, [filterDateRange, filterPainLevel, pagination.pageSize, performanceManager]);\n  \n  // Load initial data\n  useEffect(() => {\n    loadRecords(1, true);\n  }, [filterDateRange, filterPainLevel]);\n  \n  // Mock data fallback for demo\n  const getMockRecords = (): PainRecord[] => [\n    {\n      id: '1',\n      date: '2024-01-15',\n      time: '14:30',\n      painLevel: 7,\n      painTypes: ['cramping'],\n      locations: ['lower_abdomen'],\n      symptoms: ['nausea'],\n      menstrualStatus: 'day_1',\n      medications: [{ name: 'Ibuprofen', timing: 'during pain' }],\n      effectiveness: 6,\n      lifestyleFactors: [],\n      notes: locale === 'zh' ? 'ç»æœŸç¬¬ä¸€å¤©ï¼Œç–¼ç—›è¾ƒé‡' : 'First day of period, severe pain',\n      createdAt: new Date('2024-01-15'),\n      updatedAt: new Date('2024-01-15')\n    },\n    {\n      id: '2',\n      date: '2024-01-14',\n      time: '16:00',\n      painLevel: 5,\n      painTypes: ['aching'],\n      locations: ['lower_back'],\n      symptoms: ['fatigue'],\n      menstrualStatus: 'before_period',\n      medications: [{ name: 'Heat pad', timing: 'during pain' }],\n      effectiveness: 7,\n      lifestyleFactors: [],\n      notes: locale === 'zh' ? 'ç»æœŸå‰ç—‡çŠ¶' : 'Pre-menstrual symptoms',\n      createdAt: new Date('2024-01-14'),\n      updatedAt: new Date('2024-01-14')\n    },\n    {\n      id: '3',\n      date: '2024-01-13',\n      time: '10:15',\n      painLevel: 3,\n      painTypes: ['aching'],\n      locations: ['upper_thighs'],\n      symptoms: [],\n      menstrualStatus: 'before_period',\n      medications: [],\n      effectiveness: 0,\n      lifestyleFactors: [],\n      notes: undefined,\n      createdAt: new Date('2024-01-13'),\n      updatedAt: new Date('2024-01-13')\n    }\n  ];\n  \n  // Handle load more for pagination\n  const handleLoadMore = useCallback(() => {\n    if (pagination.hasNextPage && !loading) {\n      loadRecords(pagination.currentPage + 1, false);\n    }\n  }, [pagination.hasNextPage, pagination.currentPage, loading, loadRecords]);\n\n  const getPainLevelColor = (level: number) => {\n    if (level <= 3) return 'text-green-600 bg-green-100';\n    if (level <= 6) return 'text-yellow-600 bg-yellow-100';\n    return 'text-red-600 bg-red-100';\n  };\n\n  const getPainLevelLabel = (level: number) => {\n    if (level <= 3) return locale === 'zh' ? 'è½»åº¦' : 'Mild';\n    if (level <= 6) return locale === 'zh' ? 'ä¸­åº¦' : 'Moderate';\n    return locale === 'zh' ? 'é‡åº¦' : 'Severe';\n  };\n  \n  const getLocationNameZh = (location: string) => {\n    const locationMap: Record<string, string> = {\n      'lower_abdomen': 'ä¸‹è…¹éƒ¨',\n      'lower_back': 'ä¸‹èƒŒéƒ¨',\n      'upper_thighs': 'å¤§è…¿ä¸Šéƒ¨',\n      'pelvis': 'éª¨ç›†',\n      'side': 'ä¾§è…¹',\n      'whole_abdomen': 'æ•´ä¸ªè…¹éƒ¨'\n    };\n    return locationMap[location] || location;\n  };\n  \n  const getLocationNameEn = (location: string) => {\n    const locationMap: Record<string, string> = {\n      'lower_abdomen': 'Lower Abdomen',\n      'lower_back': 'Lower Back',\n      'upper_thighs': 'Upper Thighs',\n      'pelvis': 'Pelvis',\n      'side': 'Side',\n      'whole_abdomen': 'Whole Abdomen'\n    };\n    return locationMap[location] || location;\n  };\n  \n  const getPainTypeNameZh = (type: string) => {\n    const typeMap: Record<string, string> = {\n      'cramping': 'ç—‰æŒ›æ€§ç–¼ç—›',\n      'aching': 'é’ç—›',\n      'sharp': 'å°–é”ç–¼ç—›',\n      'throbbing': 'è·³åŠ¨æ€§ç–¼ç—›',\n      'burning': 'ç¼çƒ§æ„Ÿ',\n      'pressure': 'å‹è¿«æ„Ÿ'\n    };\n    return typeMap[type] || type;\n  };\n  \n  const getPainTypeNameEn = (type: string) => {\n    const typeMap: Record<string, string> = {\n      'cramping': 'Cramping',\n      'aching': 'Aching',\n      'sharp': 'Sharp',\n      'throbbing': 'Throbbing',\n      'burning': 'Burning',\n      'pressure': 'Pressure'\n    };\n    return typeMap[type] || type;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <header className=\"text-center mb-6 sm:mb-8\">\n        <h1 className=\"text-xl sm:text-2xl lg:text-3xl font-semibold text-gray-900 mb-2\">\n          {locale === 'zh' ? 'ç–¼ç—›è®°å½•å†å²' : 'Pain Record History'}\n        </h1>\n        <p className=\"text-sm sm:text-base text-gray-600 max-w-2xl mx-auto\">\n          {locale === 'zh' ? 'æŸ¥çœ‹å’Œç®¡ç†æ‚¨çš„ç–¼ç—›è®°å½•' : 'View and manage your pain records'}\n        </p>\n      </header>\n\n      {/* Filters */}\n      <section \n        className=\"bg-white rounded-lg shadow-sm p-4 sm:p-6 mb-6\"\n        aria-labelledby=\"filters-heading\"\n      >\n        <h2 \n          id=\"filters-heading\"\n          className=\"text-base sm:text-lg font-medium text-gray-900 mb-4\"\n        >\n          {locale === 'zh' ? 'ç­›é€‰æ¡ä»¶' : 'Filters'}\n        </h2>\n        \n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\n          {/* Date Range Filter */}\n          <div>\n            <label \n              htmlFor=\"date-range-filter\"\n              className=\"block text-sm font-medium text-gray-700 mb-2\"\n            >\n              {locale === 'zh' ? 'æ—¶é—´èŒƒå›´' : 'Date Range'}\n            </label>\n            <select\n              id=\"date-range-filter\"\n              value={filterDateRange}\n              onChange={(e) => setFilterDateRange(e.target.value as any)}\n              className=\"w-full px-3 py-2 sm:py-3 text-base sm:text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors\"\n              aria-describedby=\"date-range-help\"\n            >\n              <option value=\"all\">{locale === 'zh' ? 'å…¨éƒ¨' : 'All'}</option>\n              <option value=\"week\">{locale === 'zh' ? 'æœ€è¿‘7å¤©' : 'Last 7 days'}</option>\n              <option value=\"month\">{locale === 'zh' ? 'æœ€è¿‘30å¤©' : 'Last 30 days'}</option>\n              <option value=\"quarter\">{locale === 'zh' ? 'æœ€è¿‘90å¤©' : 'Last 90 days'}</option>\n            </select>\n            <p id=\"date-range-help\" className=\"text-xs text-gray-500 mt-1\">\n              {locale === 'zh' ? 'é€‰æ‹©è¦æŸ¥çœ‹çš„æ—¶é—´èŒƒå›´' : 'Select the time range to view'}\n            </p>\n          </div>\n\n          {/* Pain Level Filter */}\n          <div>\n            <label \n              htmlFor=\"pain-level-filter\"\n              className=\"block text-sm font-medium text-gray-700 mb-2\"\n            >\n              {locale === 'zh' ? 'ç–¼ç—›ç¨‹åº¦' : 'Pain Level'}\n            </label>\n            <select\n              id=\"pain-level-filter\"\n              value={filterPainLevel}\n              onChange={(e) => setFilterPainLevel(e.target.value as any)}\n              className=\"w-full px-3 py-2 sm:py-3 text-base sm:text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors\"\n              aria-describedby=\"pain-level-help\"\n            >\n              <option value=\"all\">{locale === 'zh' ? 'å…¨éƒ¨' : 'All'}</option>\n              <option value=\"low\">{locale === 'zh' ? 'è½»åº¦ (1-3)' : 'Mild (1-3)'}</option>\n              <option value=\"medium\">{locale === 'zh' ? 'ä¸­åº¦ (4-6)' : 'Moderate (4-6)'}</option>\n              <option value=\"high\">{locale === 'zh' ? 'é‡åº¦ (7-10)' : 'Severe (7-10)'}</option>\n            </select>\n            <p id=\"pain-level-help\" className=\"text-xs text-gray-500 mt-1\">\n              {locale === 'zh' ? 'æŒ‰ç–¼ç—›ç¨‹åº¦ç­›é€‰è®°å½•' : 'Filter records by pain intensity'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Records List */}\n      <section \n        className=\"bg-white rounded-lg shadow-sm\"\n        aria-labelledby=\"records-heading\"\n        aria-live=\"polite\"\n        aria-atomic=\"false\"\n      >\n        <h2 id=\"records-heading\" className=\"sr-only\">\n          {locale === 'zh' ? 'ç–¼ç—›è®°å½•åˆ—è¡¨' : 'Pain Records List'}\n        </h2>\n        \n        {records.length === 0 && !loading ? (\n          <div className=\"p-6 sm:p-8 text-center\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg \n                className=\"w-8 h-8 text-gray-400\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n                aria-hidden=\"true\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg sm:text-xl font-medium text-gray-900 mb-2\">\n              {locale === 'zh' ? 'æš‚æ— è®°å½•' : 'No Records Found'}\n            </h3>\n            <p className=\"text-sm sm:text-base text-gray-500 max-w-md mx-auto\">\n              {locale === 'zh' \n                ? 'æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆç­›é€‰æ¡ä»¶çš„ç–¼ç—›è®°å½•ã€‚è¯·å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æ·»åŠ æ–°çš„è®°å½•ã€‚'\n                : 'No pain records found matching your filters. Try adjusting your filters or add new records.'\n              }\n            </p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            <div className=\"sr-only\" aria-live=\"polite\">\n              {locale === 'zh' \n                ? `æ‰¾åˆ° ${pagination.totalItems} æ¡è®°å½•`\n                : `Found ${pagination.totalItems} records`\n              }\n            </div>\n            {records.map((record, index) => (\n              <article \n                key={record.id} \n                className=\"p-4 sm:p-6 hover:bg-gray-50 focus-within:bg-gray-50 transition-colors\"\n                aria-labelledby={`record-${record.id}-title`}\n              >\n                <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between space-y-3 sm:space-y-0\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 mb-3\">\n                      <h3 \n                        id={`record-${record.id}-title`}\n                        className=\"text-sm sm:text-base font-medium text-gray-900\"\n                      >\n                        {new Date(record.date).toLocaleDateString(locale === 'zh' ? 'zh-CN' : 'en-US', {\n                          year: 'numeric',\n                          month: 'long',\n                          day: 'numeric'\n                        })}\n                      </h3>\n                      <div className={`inline-flex px-2 py-1 rounded-full text-xs font-medium ${getPainLevelColor(record.painLevel)}`}>\n                        <span className=\"sr-only\">\n                          {locale === 'zh' ? 'ç–¼ç—›ç¨‹åº¦ï¼š' : 'Pain level: '}\n                        </span>\n                        {getPainLevelLabel(record.painLevel)} ({record.painLevel}/10)\n                      </div>\n                    </div>\n                    \n                    <dl className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-sm text-gray-600\">\n                      <div>\n                        <dt className=\"font-medium inline\">\n                          {locale === 'zh' ? 'ä½ç½®ï¼š' : 'Location: '}\n                        </dt>\n                        <dd className=\"inline\">\n                          {record.locations.map(loc => \n                            locale === 'zh' ? getLocationNameZh(loc) : getLocationNameEn(loc)\n                          ).join(', ')}\n                        </dd>\n                      </div>\n                      <div>\n                        <dt className=\"font-medium inline\">\n                          {locale === 'zh' ? 'ç±»å‹ï¼š' : 'Type: '}\n                        </dt>\n                        <dd className=\"inline\">\n                          {record.painTypes.map(type => \n                            locale === 'zh' ? getPainTypeNameZh(type) : getPainTypeNameEn(type)\n                          ).join(', ')}\n                        </dd>\n                      </div>\n                    </dl>\n                    \n                    {record.notes && (\n                      <div className=\"mt-3 text-sm text-gray-600\">\n                        <dt className=\"font-medium inline\">\n                          {locale === 'zh' ? 'å¤‡æ³¨ï¼š' : 'Notes: '}\n                        </dt>\n                        <dd className=\"inline\">{record.notes}</dd>\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 sm:ml-4 flex-shrink-0\">\n                    <button \n                      className=\"p-2 text-gray-400 hover:text-gray-600 focus:text-gray-600 transition-colors rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2\"\n                      aria-label={`${locale === 'zh' ? 'ç¼–è¾‘è®°å½•' : 'Edit record'} ${new Date(record.date).toLocaleDateString()}`}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                      </svg>\n                    </button>\n                    <button \n                      className=\"p-2 text-gray-400 hover:text-red-600 focus:text-red-600 transition-colors rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\"\n                      aria-label={`${locale === 'zh' ? 'åˆ é™¤è®°å½•' : 'Delete record'} ${new Date(record.date).toLocaleDateString()}`}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              </article>\n            ))}\n            \n            {/* Loading indicator */}\n            {loading && (\n              <div className=\"p-6 text-center\">\n                <div className=\"inline-flex items-center space-x-2\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-pink-600\"></div>\n                  <span className=\"text-sm text-gray-600\">\n                    {locale === 'zh' ? 'åŠ è½½ä¸­...' : 'Loading...'}\n                  </span>\n                </div>\n              </div>\n            )}\n            \n            {/* Load more button */}\n            {pagination.hasNextPage && !loading && (\n              <div className=\"p-6 text-center\">\n                <button\n                  onClick={handleLoadMore}\n                  className=\"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 transition-colors\"\n                >\n                  {locale === 'zh' ? 'åŠ è½½æ›´å¤š' : 'Load More'}\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </section>\n\n      {/* Summary Stats */}\n      {records.length > 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            {locale === 'zh' ? 'ç»Ÿè®¡æ‘˜è¦' : 'Summary Statistics'}\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-primary-600\">\n                {pagination.totalItems}\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {locale === 'zh' ? 'æ€»è®°å½•æ•°' : 'Total Records'}\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-primary-600\">\n                {records.length > 0 ? (records.reduce((sum, record) => sum + record.painLevel, 0) / records.length).toFixed(1) : '0'}\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {locale === 'zh' ? 'å¹³å‡ç–¼ç—›ç¨‹åº¦' : 'Average Pain Level'}\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-primary-600\">\n                {records.length > 0 ? Math.max(...records.map(r => r.painLevel)) : '0'}\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {locale === 'zh' ? 'æœ€é«˜ç–¼ç—›ç¨‹åº¦' : 'Highest Pain Level'}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/PainEntryForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getPainLevelColor' is defined but never used.","line":16,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'touched' is assigned a value but never used.","line":50,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2503,2506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2503,2506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { Calendar, Clock, MapPin, Activity, Heart, Star, FileText } from 'lucide-react';\nimport { PainEntryFormData, ValidationError } from '../../shared/types';\nimport { \n  PAIN_LOCATIONS, \n  SYMPTOMS, \n  REMEDIES, \n  MENSTRUAL_STATUS, \n  PAIN_LEVELS,\n  EFFECTIVENESS_LEVELS,\n  ERROR_MESSAGES \n} from '../../shared/constants';\nimport { formatDateShort, getPainLevelColor } from '../../shared/utils';\nimport LoadingSpinner from '../../shared/components/LoadingSpinner';\n\ninterface PainEntryFormProps {\n  initialData?: Partial<PainEntryFormData>;\n  onSubmit: (data: PainEntryFormData) => Promise<{ success: boolean; errors?: ValidationError[] }>;\n  onCancel?: () => void;\n  isLoading?: boolean;\n  locale: string;\n}\n\nconst PainEntryForm: React.FC<PainEntryFormProps> = ({\n  initialData,\n  onSubmit,\n  onCancel,\n  isLoading = false,\n  locale\n}) => {\n  const t = useTranslations('painTracker');\n  \n  const [formData, setFormData] = useState<PainEntryFormData>({\n    date: initialData?.date || formatDateShort(new Date()),\n    painLevel: initialData?.painLevel || 1,\n    duration: initialData?.duration || undefined,\n    location: initialData?.location || [],\n    menstrualStatus: initialData?.menstrualStatus || 'other',\n    symptoms: initialData?.symptoms || [],\n    remedies: initialData?.remedies || [],\n    effectiveness: initialData?.effectiveness || undefined,\n    notes: initialData?.notes || ''\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [showOverwriteConfirm, setShowOverwriteConfirm] = useState(false);\n  const [touched, setTouched] = useState<Record<string, boolean>>({});\n\n  // Get localized options\n  const painLocations = PAIN_LOCATIONS[locale as keyof typeof PAIN_LOCATIONS] || PAIN_LOCATIONS.en;\n  const symptoms = SYMPTOMS[locale as keyof typeof SYMPTOMS] || SYMPTOMS.en;\n  const remedies = REMEDIES[locale as keyof typeof REMEDIES] || REMEDIES.en;\n  const menstrualStatus = MENSTRUAL_STATUS[locale as keyof typeof MENSTRUAL_STATUS] || MENSTRUAL_STATUS.en;\n  const painLevels = PAIN_LEVELS[locale as keyof typeof PAIN_LEVELS] || PAIN_LEVELS.en;\n  const effectivenessLevels = EFFECTIVENESS_LEVELS[locale as keyof typeof EFFECTIVENESS_LEVELS] || EFFECTIVENESS_LEVELS.en;\n  const errorMessages = ERROR_MESSAGES[locale as keyof typeof ERROR_MESSAGES] || ERROR_MESSAGES.en;\n\n  const handleInputChange = (field: keyof PainEntryFormData, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    setTouched(prev => ({ ...prev, [field]: true }));\n    \n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  const handleMultiSelect = (field: 'location' | 'symptoms' | 'remedies', value: string) => {\n    const currentValues = formData[field] as string[];\n    const newValues = currentValues.includes(value)\n      ? currentValues.filter(v => v !== value)\n      : [...currentValues, value];\n    \n    handleInputChange(field, newValues);\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    // Date validation\n    if (!formData.date) {\n      newErrors.date = errorMessages.required;\n    } else {\n      const selectedDate = new Date(formData.date);\n      const today = new Date();\n      // è®¾ç½®ä»Šå¤©çš„æ—¶é—´ä¸º23:59:59ï¼Œå…è®¸é€‰æ‹©ä»Šå¤©\n      today.setHours(23, 59, 59, 999);\n      if (selectedDate > today) {\n        newErrors.date = errorMessages.futureDate;\n      }\n    }\n\n    // Pain level validation\n    if (formData.painLevel < 1 || formData.painLevel > 10) {\n      newErrors.painLevel = errorMessages.painLevelRange;\n    }\n\n    // Duration validation\n    if (formData.duration !== undefined && (formData.duration < 0 || formData.duration > 1440)) {\n      newErrors.duration = errorMessages.durationRange;\n    }\n\n    // Effectiveness validation\n    if (formData.effectiveness !== undefined && (formData.effectiveness < 1 || formData.effectiveness > 5)) {\n      newErrors.effectiveness = errorMessages.effectivenessRange;\n    }\n\n    // Notes validation\n    if (formData.notes && formData.notes.length > 500) {\n      newErrors.notes = errorMessages.notesLength;\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent, overwrite = false) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      const submitData = overwrite ? { ...formData, overwrite: true } : formData;\n      const result = await onSubmit(submitData);\n\n      if (result.success) {\n        // Reset form on success\n        setFormData({\n          date: formatDateShort(new Date()),\n          painLevel: 1,\n          duration: undefined,\n          location: [],\n          menstrualStatus: 'other',\n          symptoms: [],\n          remedies: [],\n          effectiveness: undefined,\n          notes: ''\n        });\n        setErrors({});\n        setShowOverwriteConfirm(false);\n      } else if (result.errors) {\n        const errorMap: Record<string, string> = {};\n        result.errors.forEach(error => {\n          errorMap[error.field] = error.message;\n        });\n        setErrors(errorMap);\n\n        // å¦‚æœæ˜¯é‡å¤æ—¥æœŸé”™è¯¯ï¼Œæ˜¾ç¤ºè¦†ç›–ç¡®è®¤\n        if (result.errors[0]?.code === 'DUPLICATE_DATE') {\n          setShowOverwriteConfirm(true);\n        }\n      }\n    } catch (error) {\n      console.error('Form submission error:', error);\n      setErrors({ general: errorMessages.storageError });\n    }\n  };\n\n  const handleOverwriteConfirm = (e: React.FormEvent) => {\n    handleSubmit(e, true);\n  };\n\n  const handleOverwriteCancel = () => {\n    setShowOverwriteConfirm(false);\n    setErrors({});\n  };\n\n  const currentPainLevel = painLevels.find(level => level.value === formData.painLevel);\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {/* Date Input */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n          <Calendar className=\"w-4 h-4 mr-2\" />\n          {t('form.date')}\n        </label>\n        <input\n          type=\"date\"\n          value={formData.date}\n          onChange={(e) => handleInputChange('date', e.target.value)}\n          className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${\n            errors.date ? 'border-red-500' : 'border-gray-300'\n          }`}\n          max={formatDateShort(new Date())}\n        />\n        {errors.date && (\n          <p className=\"mt-1 text-sm text-red-600\">{errors.date}</p>\n        )}\n\n        {/* è¦†ç›–ç¡®è®¤å¯¹è¯æ¡† */}\n        {showOverwriteConfirm && (\n          <div className=\"mt-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n            <div className=\"flex items-start\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"h-5 w-5 text-yellow-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div className=\"ml-3 flex-1\">\n                <h3 className=\"text-sm font-medium text-yellow-800\">\n                  {locale === 'zh' ? 'è¯¥æ—¥æœŸå·²æœ‰è®°å½•' : 'Entry exists for this date'}\n                </h3>\n                <p className=\"mt-1 text-sm text-yellow-700\">\n                  {locale === 'zh'\n                    ? 'è¯¥æ—¥æœŸå·²ç»æœ‰ç–¼ç—›è®°å½•äº†ã€‚æ‚¨æƒ³è¦è¦†ç›–ç°æœ‰è®°å½•å—ï¼Ÿ'\n                    : 'There is already a pain entry for this date. Do you want to overwrite the existing entry?'\n                  }\n                </p>\n                <div className=\"mt-3 flex space-x-3\">\n                  <button\n                    type=\"button\"\n                    onClick={handleOverwriteConfirm}\n                    className=\"bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700 transition-colors\"\n                  >\n                    {locale === 'zh' ? 'è¦†ç›–' : 'Overwrite'}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={handleOverwriteCancel}\n                    className=\"bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-400 transition-colors\"\n                  >\n                    {locale === 'zh' ? 'å–æ¶ˆ' : 'Cancel'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Pain Level Slider */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n          <Activity className=\"w-4 h-4 mr-2\" />\n          {t('form.painLevel')} ({formData.painLevel}/10)\n        </label>\n        <div className=\"space-y-4 pain-scale-container\">\n          <input\n            type=\"range\"\n            min=\"1\"\n            max=\"10\"\n            value={formData.painLevel}\n            onChange={(e) => handleInputChange('painLevel', parseInt(e.target.value))}\n            className=\"w-full pain-scale cursor-pointer\"\n          />\n          <div className=\"flex justify-between text-sm text-neutral-600 mt-2\">\n            <span className=\"text-xs sm:text-sm\">1</span>\n            <span className=\"text-xs sm:text-sm\">3</span>\n            <span className=\"text-xs sm:text-sm\">5</span>\n            <span className=\"text-xs sm:text-sm\">7</span>\n            <span className=\"text-xs sm:text-sm\">10</span>\n          </div>\n          {currentPainLevel && (\n            <div className=\"text-center\">\n              <div className=\"inline-flex items-center bg-gradient-to-r from-pink-100 via-pink-50 to-purple-100 px-6 py-3 rounded-xl shadow-lg border border-pink-200\">\n                <span className=\"text-lg font-bold text-pink-800\">\n                  ç–¼ç—›ç¨‹åº¦ï¼š\n                  <span className=\"text-2xl font-extrabold text-pink-600 mx-2\">{formData.painLevel}</span>\n                  <span className=\"text-base font-medium text-pink-700\">\n                    ({currentPainLevel.label})\n                  </span>\n                </span>\n              </div>\n              <p className=\"text-sm text-gray-600 mt-2\">{currentPainLevel.description}</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Duration Input */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n          <Clock className=\"w-4 h-4 mr-2\" />\n          {t('form.duration')} ({t('form.optional')})\n        </label>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"number\"\n            min=\"0\"\n            max=\"1440\"\n            value={formData.duration || ''}\n            onChange={(e) => handleInputChange('duration', e.target.value ? parseInt(e.target.value) : undefined)}\n            className={`flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${\n              errors.duration ? 'border-red-500' : 'border-gray-300'\n            }`}\n            placeholder=\"0\"\n          />\n          <span className=\"text-sm text-gray-500\">{t('form.minutes')}</span>\n        </div>\n        {errors.duration && (\n          <p className=\"mt-1 text-sm text-red-600\">{errors.duration}</p>\n        )}\n      </div>\n\n      {/* Pain Location */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-3\">\n          <MapPin className=\"w-4 h-4 mr-2\" />\n          {t('form.location')}\n        </label>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {painLocations.map((location) => (\n            <button\n              key={location.value}\n              type=\"button\"\n              onClick={() => handleMultiSelect('location', location.value)}\n              className={`p-3 text-left border rounded-lg transition-colors ${\n                formData.location.includes(location.value)\n                  ? 'border-pink-500 bg-pink-50 text-pink-700'\n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n            >\n              <span className=\"text-lg mr-2\">{location.icon}</span>\n              <span className=\"text-sm\">{location.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Menstrual Status */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-3\">\n          <Heart className=\"w-4 h-4 mr-2\" />\n          {t('form.menstrualStatus')}\n        </label>\n        <div className=\"grid grid-cols-1 gap-2\">\n          {menstrualStatus.map((status) => (\n            <button\n              key={status.value}\n              type=\"button\"\n              onClick={() => handleInputChange('menstrualStatus', status.value)}\n              className={`p-3 text-left border rounded-lg transition-colors ${\n                formData.menstrualStatus === status.value\n                  ? 'border-pink-500 bg-pink-50 text-pink-700'\n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n            >\n              <span className=\"text-lg mr-2\">{status.icon}</span>\n              <span className=\"text-sm\">{status.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Symptoms - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-3\">\n          <Activity className=\"w-4 h-4 mr-2\" />\n          {t('form.symptoms')} ({t('form.optional')})\n        </label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-48 overflow-y-auto\">\n          {symptoms.map((symptom) => (\n            <button\n              key={symptom.value}\n              type=\"button\"\n              onClick={() => handleMultiSelect('symptoms', symptom.value)}\n              className={`p-3 sm:p-2 text-left border rounded-lg transition-colors text-sm mobile-touch-target ${\n                formData.symptoms.includes(symptom.value)\n                  ? 'border-pink-500 bg-pink-50 text-pink-700'\n                  : 'border-gray-300 hover:border-gray-400 active:bg-gray-50'\n              }`}\n            >\n              <span className=\"text-base mr-2\">{symptom.icon}</span>\n              <span>{symptom.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Remedies - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-3\">\n          <Heart className=\"w-4 h-4 mr-2\" />\n          {t('form.remedies')} ({t('form.optional')})\n        </label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-48 overflow-y-auto\">\n          {remedies.map((remedy) => (\n            <button\n              key={remedy.value}\n              type=\"button\"\n              onClick={() => handleMultiSelect('remedies', remedy.value)}\n              className={`p-3 sm:p-2 text-left border rounded-lg transition-colors text-sm mobile-touch-target ${\n                formData.remedies.includes(remedy.value)\n                  ? 'border-pink-500 bg-pink-50 text-pink-700'\n                  : 'border-gray-300 hover:border-gray-400 active:bg-gray-50'\n              }`}\n            >\n              <span className=\"text-base mr-2\">{remedy.icon}</span>\n              <span>{remedy.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Effectiveness Rating */}\n      {formData.remedies.length > 0 && (\n        <div>\n          <label className=\"flex items-center text-sm font-medium text-gray-700 mb-3\">\n            <Star className=\"w-4 h-4 mr-2\" />\n            {t('form.effectiveness')} ({t('form.optional')})\n          </label>\n          <div className=\"grid grid-cols-5 gap-2\">\n            {effectivenessLevels.map((level) => (\n              <button\n                key={level.value}\n                type=\"button\"\n                onClick={() => handleInputChange('effectiveness', level.value)}\n                className={`p-3 text-center border rounded-lg transition-colors ${\n                  formData.effectiveness === level.value\n                    ? 'border-pink-500 bg-pink-50 text-pink-700'\n                    : 'border-gray-300 hover:border-gray-400'\n                }`}\n              >\n                <div className=\"text-lg mb-1\">{level.icon}</div>\n                <div className=\"text-xs\">{level.label}</div>\n              </button>\n            ))}\n          </div>\n          {errors.effectiveness && (\n            <p className=\"mt-1 text-sm text-red-600\">{errors.effectiveness}</p>\n          )}\n        </div>\n      )}\n\n      {/* Notes */}\n      <div>\n        <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n          <FileText className=\"w-4 h-4 mr-2\" />\n          {t('form.notes')} ({t('form.optional')})\n        </label>\n        <textarea\n          value={formData.notes}\n          onChange={(e) => handleInputChange('notes', e.target.value)}\n          rows={3}\n          maxLength={500}\n          className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 resize-none ${\n            errors.notes ? 'border-red-500' : 'border-gray-300'\n          }`}\n          placeholder={t('form.notesPlaceholder')}\n        />\n        <div className=\"flex justify-between mt-1\">\n          {errors.notes && (\n            <p className=\"text-sm text-red-600\">{errors.notes}</p>\n          )}\n          <p className=\"text-xs text-gray-500 ml-auto\">\n            {formData.notes?.length || 0}/500\n          </p>\n        </div>\n      </div>\n\n      {/* Submit and Cancel Buttons - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n      <div className=\"flex flex-col sm:flex-row gap-3 sm:space-x-3 pt-4\">\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"flex-1 bg-gradient-to-r from-pink-600 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-pink-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors mobile-touch-target order-1\"\n        >\n          {isLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <LoadingSpinner size=\"sm\" color=\"white\" className=\"mr-2\" />\n              {t('form.saving')}\n            </div>\n          ) : (\n            t('form.save')\n          )}\n        </button>\n\n        {onCancel && (\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"w-full sm:w-auto px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors mobile-touch-target order-2\"\n          >\n            {t('form.cancel')}\n          </button>\n        )}\n      </div>\n\n      {errors.general && (\n        <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <p className=\"text-sm text-red-600\">{errors.general}</p>\n        </div>\n      )}\n    </form>\n  );\n};\n\nexport default PainEntryForm;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/PainEntryModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isEditing' is assigned a value but never used.","line":23,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setIsEditing' is assigned a value but never used.","line":23,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { X, Edit, Calendar, Clock, MapPin, Activity, Heart, Star, FileText } from 'lucide-react';\nimport { PainEntry } from '../../shared/types';\nimport { PAIN_LOCATIONS, SYMPTOMS, REMEDIES, MENSTRUAL_STATUS, PAIN_LEVELS, EFFECTIVENESS_LEVELS } from '../../shared/constants';\n\ninterface PainEntryModalProps {\n  entry: PainEntry;\n  onClose: () => void;\n  onEdit: (entry: PainEntry) => void;\n  locale: string;\n}\n\nconst PainEntryModal: React.FC<PainEntryModalProps> = ({\n  entry,\n  onClose,\n  onEdit,\n  locale\n}) => {\n  const t = useTranslations('painTracker');\n  const [isEditing, setIsEditing] = useState(false);\n\n  // Get localized options\n  const painLocations = PAIN_LOCATIONS[locale as keyof typeof PAIN_LOCATIONS] || PAIN_LOCATIONS.en;\n  const symptoms = SYMPTOMS[locale as keyof typeof SYMPTOMS] || SYMPTOMS.en;\n  const remedies = REMEDIES[locale as keyof typeof REMEDIES] || REMEDIES.en;\n  const menstrualStatus = MENSTRUAL_STATUS[locale as keyof typeof MENSTRUAL_STATUS] || MENSTRUAL_STATUS.en;\n  const painLevels = PAIN_LEVELS[locale as keyof typeof PAIN_LEVELS] || PAIN_LEVELS.en;\n  const effectivenessLevels = EFFECTIVENESS_LEVELS[locale as keyof typeof EFFECTIVENESS_LEVELS] || EFFECTIVENESS_LEVELS.en;\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(locale, {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const formatTime = (dateString: string) => {\n    return new Date(dateString).toLocaleTimeString(locale, {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getPainLevelInfo = (level: number) => {\n    return painLevels.find(p => p.value === level);\n  };\n\n  const getMenstrualStatusInfo = (status: string) => {\n    return menstrualStatus.find(s => s.value === status);\n  };\n\n  const getLocationLabels = (locations: string[]) => {\n    return locations.map(loc => {\n      const location = painLocations.find(l => l.value === loc);\n      return location ? `${location.icon} ${location.label}` : loc;\n    });\n  };\n\n  const getSymptomLabels = (symptomValues: string[]) => {\n    return symptomValues.map(sym => {\n      const symptom = symptoms.find(s => s.value === sym);\n      return symptom ? `${symptom.icon} ${symptom.label}` : sym;\n    });\n  };\n\n  const getRemedyLabels = (remedyValues: string[]) => {\n    return remedyValues.map(rem => {\n      const remedy = remedies.find(r => r.value === rem);\n      return remedy ? `${remedy.icon} ${remedy.label}` : rem;\n    });\n  };\n\n  const getEffectivenessInfo = (rating: number) => {\n    return effectivenessLevels.find(e => e.value === rating);\n  };\n\n  const handleEdit = () => {\n    onEdit(entry);\n    onClose();\n  };\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const painLevelInfo = getPainLevelInfo(entry.painLevel);\n  const menstrualStatusInfo = getMenstrualStatusInfo(entry.menstrualStatus);\n  const effectivenessInfo = entry.effectiveness ? getEffectivenessInfo(entry.effectiveness) : null;\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900\">\n              {t('entries.entryDetails')}\n            </h2>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {formatDate(entry.date)}\n            </p>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={handleEdit}\n              className=\"flex items-center px-3 py-2 text-sm bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors\"\n            >\n              <Edit className=\"w-4 h-4 mr-2\" />\n              {t('entries.edit')}\n            </button>\n            <button\n              onClick={onClose}\n              className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-6\">\n          {/* Basic Information */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Date and Time */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center\">\n                <Calendar className=\"w-5 h-5 text-gray-400 mr-3\" />\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-900\">{t('form.date')}</h3>\n                  <p className=\"text-gray-600\">{formatDate(entry.date)}</p>\n                </div>\n              </div>\n\n              {entry.createdAt && (\n                <div className=\"flex items-center\">\n                  <Clock className=\"w-5 h-5 text-gray-400 mr-3\" />\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-900\">{t('entries.recordedAt')}</h3>\n                    <p className=\"text-gray-600\">{formatTime(entry.createdAt)}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Pain Level */}\n            <div className=\"flex items-center\">\n              <Activity className=\"w-5 h-5 text-gray-400 mr-3\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.painLevel')}</h3>\n                <div className=\"flex items-center mt-1\">\n                  <span className=\"text-2xl font-bold text-pink-600 mr-2\">\n                    {entry.painLevel}/10\n                  </span>\n                  {painLevelInfo && (\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-700\">\n                        {painLevelInfo.label}\n                      </span>\n                      <p className=\"text-xs text-gray-500\">\n                        {painLevelInfo.description}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Duration */}\n          {entry.duration && (\n            <div className=\"flex items-center\">\n              <Clock className=\"w-5 h-5 text-gray-400 mr-3\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.duration')}</h3>\n                <p className=\"text-gray-600\">\n                  {entry.duration} {t('form.minutes')}\n                  {entry.duration >= 60 && (\n                    <span className=\"text-gray-500 ml-2\">\n                      (~{Math.round(entry.duration / 60 * 10) / 10} {t('entries.hours')})\n                    </span>\n                  )}\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Menstrual Status */}\n          <div className=\"flex items-start\">\n            <Heart className=\"w-5 h-5 text-gray-400 mr-3 mt-0.5\" />\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-900\">{t('form.menstrualStatus')}</h3>\n              {menstrualStatusInfo && (\n                <div className=\"flex items-center mt-1\">\n                  <span className=\"text-lg mr-2\">{menstrualStatusInfo.icon}</span>\n                  <span className=\"text-gray-600\">{menstrualStatusInfo.label}</span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Pain Locations */}\n          {entry.location.length > 0 && (\n            <div className=\"flex items-start\">\n              <MapPin className=\"w-5 h-5 text-gray-400 mr-3 mt-0.5\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.location')}</h3>\n                <div className=\"flex flex-wrap gap-2 mt-2\">\n                  {getLocationLabels(entry.location).map((location, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-pink-100 text-pink-800\"\n                    >\n                      {location}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Symptoms */}\n          {entry.symptoms.length > 0 && (\n            <div className=\"flex items-start\">\n              <Activity className=\"w-5 h-5 text-gray-400 mr-3 mt-0.5\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.symptoms')}</h3>\n                <div className=\"flex flex-wrap gap-2 mt-2\">\n                  {getSymptomLabels(entry.symptoms).map((symptom, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800\"\n                    >\n                      {symptom}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Remedies */}\n          {entry.remedies.length > 0 && (\n            <div className=\"flex items-start\">\n              <Heart className=\"w-5 h-5 text-gray-400 mr-3 mt-0.5\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.remedies')}</h3>\n                <div className=\"flex flex-wrap gap-2 mt-2\">\n                  {getRemedyLabels(entry.remedies).map((remedy, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800\"\n                    >\n                      {remedy}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Effectiveness */}\n          {entry.effectiveness && effectivenessInfo && (\n            <div className=\"flex items-center\">\n              <Star className=\"w-5 h-5 text-gray-400 mr-3\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.effectiveness')}</h3>\n                <div className=\"flex items-center mt-1\">\n                  <span className=\"text-lg mr-2\">{effectivenessInfo.icon}</span>\n                  <span className=\"text-gray-600\">\n                    {effectivenessInfo.label} ({entry.effectiveness}/5)\n                  </span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Notes */}\n          {entry.notes && (\n            <div className=\"flex items-start\">\n              <FileText className=\"w-5 h-5 text-gray-400 mr-3 mt-0.5\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-gray-900\">{t('form.notes')}</h3>\n                <div className=\"mt-2 p-3 bg-gray-50 rounded-lg\">\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">{entry.notes}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Metadata */}\n          <div className=\"pt-4 border-t border-gray-200\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-500\">\n              <div>\n                <span className=\"font-medium\">{t('entries.createdAt')}:</span>\n                <br />\n                {new Date(entry.createdAt).toLocaleString(locale)}\n              </div>\n              {entry.updatedAt && entry.updatedAt !== entry.createdAt && (\n                <div>\n                  <span className=\"font-medium\">{t('entries.updatedAt')}:</span>\n                  <br />\n                  {new Date(entry.updatedAt).toLocaleString(locale)}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors\"\n          >\n            {t('form.close')}\n          </button>\n          <button\n            onClick={handleEdit}\n            className=\"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors\"\n          >\n            {t('entries.edit')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PainEntryModal;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/PainTrendChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1374,1377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1374,1377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4189,4192],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4189,4192],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4649,4652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4649,4652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5740,5743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5740,5743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":313,"column":26,"nodeType":"Identifier","endLine":313,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":313,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10754,10757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10754,10757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// PainTrendChart - Line chart component for displaying pain level trends over time\n// Shows pain levels with menstrual phase context and responsive design\n\nimport React, { useMemo, useEffect, useState, useRef, useCallback } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { TrendPoint, PainTrackerError } from '../../../../../types/pain-tracker';\nimport ChartUtils from '../../../../../lib/pain-tracker/analytics/ChartUtils';\nimport { ChartPerformanceOptimizer, MemoryManager } from '../../../../../lib/pain-tracker/performance';\n\ninterface PainTrendChartProps {\n  trendData: TrendPoint[];\n  className?: string;\n  height?: number;\n  showTitle?: boolean;\n  showMenstrualPhases?: boolean;\n  onError?: (error: Error) => void;\n}\n\nexport default function PainTrendChart({\n  trendData,\n  className = '',\n  height,\n  showTitle = true,\n  showMenstrualPhases = true,\n  onError\n}: PainTrendChartProps) {\n  const [isMobile, setIsMobile] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [optimizedData, setOptimizedData] = useState<TrendPoint[]>([]);\n  \n  // Performance optimization services\n  const chartOptimizer = useMemo(() => new ChartPerformanceOptimizer(), []);\n  const memoryManager = useMemo(() => new MemoryManager(), []);\n  const chartInstanceRef = useRef<any>(null);\n  const chartId = useMemo(() => `pain-trend-chart-${Date.now()}`, []);\n\n  // Optimize data for chart performance\n  useEffect(() => {\n    const optimizeChartData = async () => {\n      if (!trendData || trendData.length === 0) {\n        setOptimizedData([]);\n        return;\n      }\n\n      try {\n        // Use chart performance optimizer for large datasets\n        const optimized = await chartOptimizer.optimizeDataForChart(\n          trendData,\n          'line',\n          {\n            maxPoints: isMobile ? 100 : 200,\n            samplingMethod: 'adaptive',\n            preserveImportantPoints: true\n          }\n        );\n        \n        setOptimizedData(optimized);\n      } catch (err) {\n        console.warn('Failed to optimize chart data, using original:', err);\n        setOptimizedData(trendData);\n      }\n    };\n\n    optimizeChartData();\n  }, [trendData, isMobile, chartOptimizer]);\n\n  // Check for mobile device on mount and window resize\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(ChartUtils.isMobileDevice());\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    // Simulate loading delay for smooth rendering\n    const timer = setTimeout(() => setIsLoading(false), 100);\n\n    return () => {\n      window.removeEventListener('resize', checkMobile);\n      clearTimeout(timer);\n      \n      // Cleanup chart instance for memory management\n      if (chartInstanceRef.current) {\n        memoryManager.unregisterChartInstance(chartId);\n      }\n    };\n  }, [chartId, memoryManager]);\n\n  // Memoized chart data with performance optimization\n  const chartData = useMemo(() => {\n    try {\n      if (!optimizedData || optimizedData.length === 0) {\n        return ChartUtils.getEmptyChartData('line');\n      }\n\n      return ChartUtils.formatPainTrendData(optimizedData, isMobile);\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to format trend chart data',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getEmptyChartData('line');\n    }\n  }, [optimizedData, isMobile, onError]);\n\n  // Memoized chart options with performance optimization\n  const chartOptions = useMemo(() => {\n    try {\n      let options = ChartUtils.getPainTrendOptions(isMobile);\n      \n      // Apply performance optimizations based on data size\n      options = chartOptimizer.optimizeChartOptions(options, optimizedData.length);\n      \n      // Override title display if showTitle is false\n      if (!showTitle && options.plugins?.title) {\n        options.plugins.title.display = false;\n      }\n\n      // Enhanced tooltip for better context\n      if (options.plugins?.tooltip) {\n        options.plugins.tooltip.callbacks = {\n          title: function(context: any) {\n            const dataIndex = context[0].dataIndex;\n            const dataPoint = optimizedData[dataIndex];\n            if (!dataPoint) return '';\n            \n            const date = new Date(dataPoint.date);\n            return date.toLocaleDateString('en-US', { \n              weekday: 'short',\n              month: 'short', \n              day: 'numeric',\n              year: 'numeric'\n            });\n          },\n          label: function(context: any) {\n            const painLevel = context.parsed.y;\n            const dataPoint = optimizedData[context.dataIndex];\n            \n            let label = `Pain Level: ${painLevel}/10`;\n            \n            if (showMenstrualPhases && dataPoint?.menstrualPhase) {\n              const phaseMap: Record<string, string> = {\n                'before_period': 'Before Period',\n                'day_1': 'Day 1',\n                'day_2_3': 'Days 2-3',\n                'day_4_plus': 'Day 4+',\n                'after_period': 'After Period',\n                'mid_cycle': 'Mid-Cycle',\n                'irregular': 'Irregular'\n              };\n              label += `\\nPhase: ${phaseMap[dataPoint.menstrualPhase] || dataPoint.menstrualPhase}`;\n            }\n            \n            return label;\n          }\n        };\n      }\n\n      // Add trend line if we have enough data points\n      if (optimizedData.length >= 5 && chartData.datasets.length > 0) {\n        const trendLine = calculateTrendLine(optimizedData);\n        if (trendLine && trendLine.length > 0) {\n          (chartData.datasets as any[]).push({\n            label: 'Trend',\n            data: trendLine,\n            borderColor: 'rgba(156, 163, 175, 0.8)',\n            backgroundColor: 'transparent',\n            borderDash: [5, 5],\n            pointRadius: 0,\n            pointHoverRadius: 0,\n            fill: false,\n            tension: 0\n          });\n        }\n      }\n\n      return options;\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to configure trend chart options',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getResponsiveOptions(isMobile);\n    }\n  }, [isMobile, showTitle, showMenstrualPhases, optimizedData, chartData, onError, chartOptimizer]);\n\n  // Calculate container height\n  const containerHeight = useMemo(() => {\n    if (height) return height;\n    return isMobile ? 300 : 400;\n  }, [height, isMobile]);\n\n  // Calculate trend statistics using optimized data\n  const trendStats = useMemo(() => {\n    if (!optimizedData || optimizedData.length === 0) return null;\n\n    const painLevels = optimizedData.map(point => point.painLevel);\n    const average = painLevels.reduce((sum, level) => sum + level, 0) / painLevels.length;\n    const highest = Math.max(...painLevels);\n    const lowest = Math.min(...painLevels);\n    \n    // Calculate trend direction\n    const firstHalf = painLevels.slice(0, Math.floor(painLevels.length / 2));\n    const secondHalf = painLevels.slice(Math.floor(painLevels.length / 2));\n    const firstAvg = firstHalf.reduce((sum, level) => sum + level, 0) / firstHalf.length;\n    const secondAvg = secondHalf.reduce((sum, level) => sum + level, 0) / secondHalf.length;\n    \n    let trendDirection: 'improving' | 'worsening' | 'stable' = 'stable';\n    const difference = secondAvg - firstAvg;\n    if (difference < -0.5) trendDirection = 'improving';\n    else if (difference > 0.5) trendDirection = 'worsening';\n    \n    return {\n      average: Math.round(average * 10) / 10,\n      highest,\n      lowest,\n      trendDirection,\n      dataPoints: optimizedData.length,\n      originalDataPoints: trendData?.length || 0\n    };\n  }, [optimizedData, trendData]);\n\n  // Calculate simple linear trend line\n  function calculateTrendLine(data: TrendPoint[]): number[] {\n    if (data.length < 2) return [];\n    \n    const n = data.length;\n    let sumX = 0, sumY = 0, sumXY = 0, sumXX = 0;\n    \n    data.forEach((point, index) => {\n      const x = index;\n      const y = point.painLevel;\n      sumX += x;\n      sumY += y;\n      sumXY += x * y;\n      sumXX += x * x;\n    });\n    \n    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);\n    const intercept = (sumY - slope * sumX) / n;\n    \n    return data.map((_, index) => slope * index + intercept);\n  }\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"flex flex-col items-center space-y-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <p className=\"text-sm text-gray-600\">Loading trend chart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-red-50 border border-red-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-red-600 mb-2\">\n            <svg className=\"w-8 h-8 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-red-700 font-medium\">Chart Error</p>\n          <p className=\"text-xs text-red-600 mt-1\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty data state\n  if (!optimizedData || optimizedData.length === 0) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-gray-400 mb-2\">\n            <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-gray-600 font-medium\">No Trend Data</p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Track pain over time to see trend patterns\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle chart instance for memory management\n  const handleChartRef = useCallback((chartInstance: any) => {\n    if (chartInstance) {\n      chartInstanceRef.current = chartInstance;\n      memoryManager.registerChartInstance(chartId, chartInstance);\n    }\n  }, [chartId, memoryManager]);\n\n  // Render chart\n  return (\n    <div className={`relative ${className}`}>\n      <div style={{ height: containerHeight }}>\n        <Line \n          ref={handleChartRef}\n          data={chartData} \n          options={chartOptions}\n          aria-label=\"Pain level trend chart showing pain levels over time\"\n          role=\"img\"\n        />\n      </div>\n      \n      {/* Chart summary for screen readers */}\n      <div className=\"sr-only\">\n        <p>\n          Pain trend chart showing {trendStats?.dataPoints || 0} data points over time\n          {trendStats?.originalDataPoints && trendStats.originalDataPoints !== trendStats.dataPoints && \n            ` (optimized from ${trendStats.originalDataPoints} original points)`\n          }. \n          {trendStats && (\n            <>\n              Average pain level: {trendStats.average}/10.\n              Highest: {trendStats.highest}/10, Lowest: {trendStats.lowest}/10.\n              Trend direction: {trendStats.trendDirection}.\n            </>\n          )}\n        </p>\n      </div>\n\n      {/* Optional statistics summary below chart */}\n      {trendStats && !isMobile && (\n        <div className=\"mt-4 text-xs text-gray-600 bg-gray-50 p-3 rounded-lg\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div>\n              <span className=\"font-medium\">Average:</span> {trendStats.average}/10\n            </div>\n            <div>\n              <span className=\"font-medium\">Highest:</span> {trendStats.highest}/10\n            </div>\n            <div>\n              <span className=\"font-medium\">Lowest:</span> {trendStats.lowest}/10\n            </div>\n            <div>\n              <span className=\"font-medium\">Trend:</span> \n              <span className={`ml-1 ${\n                trendStats.trendDirection === 'improving' ? 'text-green-600' :\n                trendStats.trendDirection === 'worsening' ? 'text-red-600' :\n                'text-gray-600'\n              }`}>\n                {trendStats.trendDirection === 'improving' ? 'â†“ Improving' :\n                 trendStats.trendDirection === 'worsening' ? 'â†‘ Worsening' :\n                 'â†’ Stable'}\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mobile-friendly trend indicator */}\n      {isMobile && trendStats && (\n        <div className=\"mt-3 flex justify-center\">\n          <div className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${\n            trendStats.trendDirection === 'improving' ? 'bg-green-100 text-green-800' :\n            trendStats.trendDirection === 'worsening' ? 'bg-red-100 text-red-800' :\n            'bg-gray-100 text-gray-800'\n          }`}>\n            {trendStats.trendDirection === 'improving' ? 'â†“' :\n             trendStats.trendDirection === 'worsening' ? 'â†‘' : 'â†’'}\n            <span className=\"ml-1 capitalize\">{trendStats.trendDirection}</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/PatternInsights.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[918,921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[918,921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is defined but never used.","line":49,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":9},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'generateDataRecommendations', 'getGeneralRecommendations', 'getInsightTitle', and 'getPatternTitle'. Either include them or remove the dependency array.","line":134,"column":6,"nodeType":"ArrayExpression","endLine":134,"endColumn":52,"suggestions":[{"desc":"Update the dependencies array to be: [analytics, records, analyticsEngine, onError, generateDataRecommendations, getInsightTitle, getGeneralRecommendations, getPatternTitle]","fix":{"range":[3904,3950],"text":"[analytics, records, analyticsEngine, onError, generateDataRecommendations, getInsightTitle, getGeneralRecommendations, getPatternTitle]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// PatternInsights - Component for displaying automated pattern analysis and recommendations\n// Shows AI-generated insights based on pain tracking data patterns\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useTranslations } from 'next-intl';\nimport { \n  Brain, \n  TrendingUp, \n  Calendar, \n  Pill, \n  AlertTriangle, \n  CheckCircle, \n  Info,\n  ChevronDown,\n  ChevronUp,\n  Lightbulb\n} from 'lucide-react';\nimport { \n  PainRecord, \n  PainAnalytics, \n  Pattern, \n  PainTrackerError \n} from '../../../../../types/pain-tracker';\nimport { AnalyticsEngine } from '../../../../../lib/pain-tracker/analytics/AnalyticsEngine';\n\ninterface PatternInsightsProps {\n  analytics: PainAnalytics;\n  records: PainRecord[];\n  locale: string;\n  onError?: (error: Error) => void;\n}\n\ninterface InsightCard {\n  id: string;\n  type: 'success' | 'warning' | 'info' | 'danger';\n  icon: React.ComponentType<any>;\n  title: string;\n  description: string;\n  recommendations: string[];\n  confidence?: number;\n  isExpanded?: boolean;\n}\n\nexport default function PatternInsights({ \n  analytics, \n  records, \n  locale,\n  onError \n}: PatternInsightsProps) {\n  const t = useTranslations('painTracker.insights');\n  const [patterns, setPatterns] = useState<Pattern[]>([]);\n  const [insights, setInsights] = useState<InsightCard[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedCards, setExpandedCards] = useState<Set<string>>(new Set());\n\n  // Initialize analytics engine\n  const analyticsEngine = useMemo(() => new AnalyticsEngine(), []);\n\n  // Generate patterns and insights\n  useEffect(() => {\n    const generateInsights = async () => {\n      if (!records || records.length < 3) {\n        setInsights([]);\n        setPatterns([]);\n        return;\n      }\n\n      setIsLoading(true);\n\n      try {\n        // Identify patterns\n        const identifiedPatterns = analyticsEngine.identifyPatterns(records);\n        setPatterns(identifiedPatterns);\n\n        // Convert analytics insights and patterns to insight cards\n        const insightCards: InsightCard[] = [];\n\n        // Add general insights from analytics\n        analytics.insights.forEach((insight, index) => {\n          insightCards.push({\n            id: `general-${index}`,\n            type: getInsightType(insight),\n            icon: getInsightIcon(insight),\n            title: getInsightTitle(insight),\n            description: insight,\n            recommendations: getGeneralRecommendations(insight),\n            isExpanded: false\n          });\n        });\n\n        // Add pattern-based insights\n        identifiedPatterns.forEach((pattern, index) => {\n          insightCards.push({\n            id: `pattern-${index}`,\n            type: getPatternType(pattern),\n            icon: getPatternIcon(pattern.type),\n            title: getPatternTitle(pattern.type),\n            description: pattern.description,\n            recommendations: pattern.recommendations,\n            confidence: pattern.confidence,\n            isExpanded: false\n          });\n        });\n\n        // Add data-driven recommendations\n        const dataRecommendations = generateDataRecommendations(analytics, records);\n        dataRecommendations.forEach((rec, index) => {\n          insightCards.push({\n            id: `recommendation-${index}`,\n            type: 'info',\n            icon: Lightbulb,\n            title: rec.title,\n            description: rec.description,\n            recommendations: rec.actions,\n            isExpanded: false\n          });\n        });\n\n        setInsights(insightCards);\n      } catch (error) {\n        const errorMessage = error instanceof PainTrackerError \n          ? error.message \n          : 'Failed to generate insights';\n        \n        onError?.(error instanceof Error ? error : new Error(errorMessage));\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    generateInsights();\n  }, [analytics, records, analyticsEngine, onError]);\n\n  // Toggle card expansion\n  const toggleCard = (cardId: string) => {\n    const newExpanded = new Set(expandedCards);\n    if (newExpanded.has(cardId)) {\n      newExpanded.delete(cardId);\n    } else {\n      newExpanded.add(cardId);\n    }\n    setExpandedCards(newExpanded);\n  };\n\n  // Helper functions\n  function getInsightType(insight: string): 'success' | 'warning' | 'info' | 'danger' {\n    if (insight.includes('high') || insight.includes('concerning') || insight.includes('worsening')) {\n      return 'danger';\n    }\n    if (insight.includes('low') || insight.includes('improving') || insight.includes('working well')) {\n      return 'success';\n    }\n    if (insight.includes('consider') || insight.includes('may help')) {\n      return 'warning';\n    }\n    return 'info';\n  }\n\n  function getInsightIcon(insight: string) {\n    if (insight.includes('trend')) return TrendingUp;\n    if (insight.includes('treatment') || insight.includes('medication')) return Pill;\n    if (insight.includes('cycle') || insight.includes('phase')) return Calendar;\n    if (insight.includes('high') || insight.includes('concerning')) return AlertTriangle;\n    if (insight.includes('working well') || insight.includes('effective')) return CheckCircle;\n    return Info;\n  }\n\n  function getInsightTitle(insight: string): string {\n    if (insight.includes('average pain level')) return t('titles.painLevel');\n    if (insight.includes('most common pain type')) return t('titles.painType');\n    if (insight.includes('effectiveness')) return t('titles.treatment');\n    if (insight.includes('trend')) return t('titles.trend');\n    if (insight.includes('cycle') || insight.includes('phase')) return t('titles.cycle');\n    return t('titles.general');\n  }\n\n  function getPatternType(pattern: Pattern): 'success' | 'warning' | 'info' | 'danger' {\n    if (pattern.confidence > 0.8) return 'success';\n    if (pattern.confidence > 0.6) return 'info';\n    if (pattern.confidence > 0.4) return 'warning';\n    return 'danger';\n  }\n\n  function getPatternIcon(patternType: string) {\n    switch (patternType) {\n      case 'menstrual_cycle': return Calendar;\n      case 'treatment_response': return Pill;\n      case 'seasonal_pattern': return TrendingUp;\n      case 'trigger_identification': return AlertTriangle;\n      default: return Brain;\n    }\n  }\n\n  function getPatternTitle(patternType: string): string {\n    switch (patternType) {\n      case 'menstrual_cycle': return t('patterns.menstrual');\n      case 'treatment_response': return t('patterns.treatment');\n      case 'seasonal_pattern': return t('patterns.seasonal');\n      case 'trigger_identification': return t('patterns.triggers');\n      default: return t('patterns.general');\n    }\n  }\n\n  function getGeneralRecommendations(insight: string): string[] {\n    const recommendations: string[] = [];\n    \n    if (insight.includes('high')) {\n      recommendations.push(t('recommendations.consultDoctor'));\n      recommendations.push(t('recommendations.trackTriggers'));\n    }\n    if (insight.includes('effective')) {\n      recommendations.push(t('recommendations.continueApproach'));\n      recommendations.push(t('recommendations.noteEffective'));\n    }\n    if (insight.includes('trend')) {\n      recommendations.push(t('recommendations.monitorTrend'));\n      recommendations.push(t('recommendations.shareWithDoctor'));\n    }\n    \n    return recommendations.length > 0 ? recommendations : [t('recommendations.keepTracking')];\n  }\n\n  function generateDataRecommendations(analytics: PainAnalytics, records: PainRecord[]) {\n    const recommendations: Array<{\n      title: string;\n      description: string;\n      actions: string[];\n    }> = [];\n\n    // Tracking consistency recommendation\n    const daysBetweenRecords = calculateAverageGapBetweenRecords(records);\n    if (daysBetweenRecords > 7) {\n      recommendations.push({\n        title: t('dataRecommendations.consistency.title'),\n        description: t('dataRecommendations.consistency.description', { days: Math.round(daysBetweenRecords) }),\n        actions: [\n          t('dataRecommendations.consistency.actions.setReminders'),\n          t('dataRecommendations.consistency.actions.trackDaily'),\n          t('dataRecommendations.consistency.actions.useApp')\n        ]\n      });\n    }\n\n    // Treatment tracking recommendation\n    const recordsWithTreatments = records.filter(r => r.medications.length > 0);\n    if (recordsWithTreatments.length < records.length * 0.5) {\n      recommendations.push({\n        title: t('dataRecommendations.treatments.title'),\n        description: t('dataRecommendations.treatments.description'),\n        actions: [\n          t('dataRecommendations.treatments.actions.recordAll'),\n          t('dataRecommendations.treatments.actions.trackEffectiveness'),\n          t('dataRecommendations.treatments.actions.noteTimings')\n        ]\n      });\n    }\n\n    // Symptom tracking recommendation\n    const recordsWithSymptoms = records.filter(r => r.symptoms.length > 0);\n    if (recordsWithSymptoms.length < records.length * 0.7) {\n      recommendations.push({\n        title: t('dataRecommendations.symptoms.title'),\n        description: t('dataRecommendations.symptoms.description'),\n        actions: [\n          t('dataRecommendations.symptoms.actions.trackAll'),\n          t('dataRecommendations.symptoms.actions.notePatterns'),\n          t('dataRecommendations.symptoms.actions.correlateWithPain')\n        ]\n      });\n    }\n\n    return recommendations;\n  }\n\n  function calculateAverageGapBetweenRecords(records: PainRecord[]): number {\n    if (records.length < 2) return 0;\n\n    const sortedRecords = records.sort((a, b) => \n      new Date(a.date).getTime() - new Date(b.date).getTime()\n    );\n\n    let totalGap = 0;\n    for (let i = 1; i < sortedRecords.length; i++) {\n      const gap = new Date(sortedRecords[i].date).getTime() - \n                   new Date(sortedRecords[i - 1].date).getTime();\n      totalGap += gap;\n    }\n\n    return totalGap / (sortedRecords.length - 1) / (1000 * 60 * 60 * 24); // Convert to days\n  }\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        {[1, 2, 3].map((i) => (\n          <div key={i} className=\"bg-gray-100 rounded-lg p-6 animate-pulse\">\n            <div className=\"flex items-center space-x-3 mb-3\">\n              <div className=\"w-6 h-6 bg-gray-300 rounded\"></div>\n              <div className=\"w-32 h-4 bg-gray-300 rounded\"></div>\n            </div>\n            <div className=\"w-full h-4 bg-gray-300 rounded mb-2\"></div>\n            <div className=\"w-3/4 h-4 bg-gray-300 rounded\"></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  // Empty state\n  if (insights.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <Brain className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n          {t('empty.title')}\n        </h3>\n        <p className=\"text-gray-600 max-w-md mx-auto\">\n          {t('empty.description')}\n        </p>\n      </div>\n    );\n  }\n\n  // Render insights\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"text-center mb-8\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n          {t('title')}\n        </h3>\n        <p className=\"text-gray-600\">\n          {t('subtitle', { count: insights.length })}\n        </p>\n      </div>\n\n      {/* Insights Grid */}\n      <div className=\"space-y-4\">\n        {insights.map((insight) => {\n          const isExpanded = expandedCards.has(insight.id);\n          const Icon = insight.icon;\n          \n          const cardColors = {\n            success: 'bg-green-50 border-green-200 text-green-800',\n            warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\n            info: 'bg-blue-50 border-blue-200 text-blue-800',\n            danger: 'bg-red-50 border-red-200 text-red-800'\n          };\n\n          const iconColors = {\n            success: 'text-green-600',\n            warning: 'text-yellow-600',\n            info: 'text-blue-600',\n            danger: 'text-red-600'\n          };\n\n          return (\n            <div\n              key={insight.id}\n              className={`border rounded-lg p-6 transition-all duration-200 ${cardColors[insight.type]}`}\n            >\n              {/* Header */}\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <Icon className={`w-6 h-6 ${iconColors[insight.type]}`} />\n                  <div>\n                    <h4 className=\"font-medium text-gray-900\">\n                      {insight.title}\n                    </h4>\n                    {insight.confidence && (\n                      <div className=\"flex items-center mt-1\">\n                        <span className=\"text-xs text-gray-600 mr-2\">\n                          {t('confidence')}:\n                        </span>\n                        <div className=\"w-16 h-2 bg-gray-200 rounded-full\">\n                          <div\n                            className={`h-2 rounded-full ${\n                              insight.confidence > 0.8 ? 'bg-green-500' :\n                              insight.confidence > 0.6 ? 'bg-blue-500' :\n                              insight.confidence > 0.4 ? 'bg-yellow-500' :\n                              'bg-red-500'\n                            }`}\n                            style={{ width: `${insight.confidence * 100}%` }}\n                          ></div>\n                        </div>\n                        <span className=\"text-xs text-gray-600 ml-2\">\n                          {Math.round(insight.confidence * 100)}%\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                <button\n                  onClick={() => toggleCard(insight.id)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                  aria-label={isExpanded ? t('collapse') : t('expand')}\n                >\n                  {isExpanded ? (\n                    <ChevronUp className=\"w-5 h-5\" />\n                  ) : (\n                    <ChevronDown className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n\n              {/* Description */}\n              <p className=\"text-gray-700 mb-4\">\n                {insight.description}\n              </p>\n\n              {/* Recommendations (expandable) */}\n              {isExpanded && insight.recommendations.length > 0 && (\n                <div className=\"border-t border-gray-200 pt-4\">\n                  <h5 className=\"font-medium text-gray-900 mb-3\">\n                    {t('recommendationsTitle')}\n                  </h5>\n                  <ul className=\"space-y-2\">\n                    {insight.recommendations.map((rec, index) => (\n                      <li key={index} className=\"flex items-start space-x-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                        <span className=\"text-sm text-gray-700\">{rec}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {/* Quick preview of recommendations when collapsed */}\n              {!isExpanded && insight.recommendations.length > 0 && (\n                <div className=\"text-sm text-gray-600\">\n                  <span className=\"font-medium\">{t('recommendations')}:</span>\n                  <span className=\"ml-1\">\n                    {insight.recommendations.length} {t('suggestionsAvailable')}\n                  </span>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Summary Statistics */}\n      <div className=\"bg-gray-50 rounded-lg p-6 mt-8\">\n        <h4 className=\"font-medium text-gray-900 mb-4\">\n          {t('summary.title')}\n        </h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {patterns.length}\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              {t('summary.patternsFound')}\n            </div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-green-600\">\n              {insights.filter(i => i.type === 'success').length}\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              {t('summary.positiveInsights')}\n            </div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-purple-600\">\n              {insights.reduce((sum, i) => sum + i.recommendations.length, 0)}\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              {t('summary.totalRecommendations')}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/RecordTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4657,4660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4657,4660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useRef, useState } from 'react';\nimport { useTranslations } from 'next-intl';\n\ntype Locale = 'en' | 'zh';\n\ninterface RecordTabProps {\n  locale: Locale;\n}\n\nexport default function RecordTab({ locale }: RecordTabProps) {\n  const t = useTranslations('interactiveTools');\n  const [painLevel, setPainLevel] = useState(5);\n  const [painLocation, setPainLocation] = useState('');\n  const [painType, setPainType] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const [result, setResult] = useState<null | {\n    score: number;\n    severity: 'mild' | 'moderate' | 'severe' | 'emergency';\n    summary: string;\n    locationLabel: string;\n    typeLabel: string;\n    recommendations: Array<{ id: string; title: string; description: string; timeframe: string; priority: 'high' | 'medium' | 'low'; actionSteps: string[] }>\n  }>(null);\n  const resultRef = useRef<HTMLDivElement | null>(null);\n  const percent = ((painLevel - 1) / 9) * 100;\n  const gradientFill = 'linear-gradient(90deg, #22c55e, #f59e0b, #ef4444)';\n  const trackBase = 'linear-gradient(90deg, #e5e7eb 0 0)';\n\n  const handleRecordPain = async () => {\n    if (!painLocation || !painType) {\n      alert(locale === 'zh' ? 'è¯·å¡«å†™å®Œæ•´çš„ç–¼ç—›ä¿¡æ¯' : 'Please fill in complete pain information');\n      return;\n    }\n\n    setIsRecording(true);\n    \n    // æ¨¡æ‹Ÿè®°å½•è¿‡ç¨‹\n    setTimeout(() => {\n      setIsRecording(false);\n      \n      // å°†å­˜å‚¨å€¼æ˜ å°„ä¸ºå·²ç¿»è¯‘çš„æ ‡ç­¾\n      const locationLabel = locations.find(l => l.value === painLocation)?.label || painLocation;\n      const typeLabel = painTypes.find(ti => ti.value === painType)?.label || painType;\n\n      // è®¡ç®—ä¸¥é‡ç¨‹åº¦\n      const severity: 'mild' | 'moderate' | 'severe' | 'emergency' =\n        painLevel >= 9 ? 'emergency' : painLevel >= 7 ? 'severe' : painLevel >= 4 ? 'moderate' : 'mild';\n\n      const summaryZh =\n        severity === 'emergency'\n          ? 'æ‚¨çš„ç–¼ç—›è¾ƒä¸ºä¸¥é‡ï¼Œå»ºè®®å°½å¿«å°±åŒ»è¯„ä¼°å¹¶æ¥å—è§„èŒƒæ²»ç–—ã€‚'\n          : severity === 'severe'\n          ? 'æ‚¨çš„ç–¼ç—›æ¯”è¾ƒä¸¥é‡ï¼Œå»ºè®®é‡‡å–ç»¼åˆç®¡ç†ç­–ç•¥ï¼Œå¿…è¦æ—¶å’¨è¯¢åŒ»ç”Ÿã€‚'\n          : severity === 'moderate'\n          ? 'æ‚¨æœ‰ä¸­ç­‰ç¨‹åº¦çš„ç–¼ç—›ï¼Œå»ºè®®ç»“åˆçƒ­ç–—ã€æ‹‰ä¼¸ä¸æ”¾æ¾è®­ç»ƒï¼ŒæŒç»­è§‚å¯Ÿã€‚'\n          : 'æ‚¨çš„ç–¼ç—›è¾ƒè½»ï¼Œå»ºè®®ç»§ç»­è®°å½•å¹¶é€šè¿‡ç”Ÿæ´»æ–¹å¼è°ƒæ•´è¿›è¡Œç®¡ç†ã€‚';\n      const summaryEn =\n        severity === 'emergency'\n          ? 'Your pain is severe. Please seek medical evaluation promptly.'\n          : severity === 'severe'\n          ? 'Your pain is relatively severe. Consider combined management and medical consultation.'\n          : severity === 'moderate'\n          ? 'Moderate pain. Combine heat, stretching and relaxation; continue monitoring.'\n          : 'Mild pain. Keep logging and adjust lifestyle.';\n\n      const recs = (\n        severity === 'emergency'\n          ? [\n              { id: 'seek-care', title: locale === 'zh' ? 'å»ºè®®ç«‹å³å°±åŒ»' : 'Seek medical care now', description: locale === 'zh' ? 'è‹¥å‡ºç°å‘çƒ­ã€æ˜å¥ã€å¼‚å¸¸å‡ºè¡€æˆ–æŒç»­å‰§ç—›ï¼Œè¯·å°½å¿«å°±åŒ»ã€‚' : 'If fever, fainting, abnormal bleeding or persistent severe pain, seek care immediately.', timeframe: locale === 'zh' ? 'ç«‹å³' : 'Immediate', priority: 'high' as const, actionSteps: (locale === 'zh' ? ['è”ç³»å¦‡ç§‘åŒ»ç”Ÿæˆ–æ€¥è¯Š', 'å‡†å¤‡è¿‘æœŸç–¼ç—›è®°å½•', 'å¿…è¦æ—¶å‰å¾€æ€¥è¯Š'] : ['Contact OB-GYN/Urgent care', 'Prepare recent pain logs', 'Go to ER if needed']) as string[] },\n            ]\n          : severity === 'severe'\n          ? [\n              { id: 'combined', title: locale === 'zh' ? 'ç»¼åˆç®¡ç†' : 'Combined management', description: locale === 'zh' ? 'åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹ä½¿ç”¨æ­¢ç—›è¯ï¼Œé…åˆçƒ­ç–—ä¸è½»é‡è¿åŠ¨ã€‚' : 'Use analgesics as directed, plus heat therapy and light exercise.', timeframe: locale === 'zh' ? 'æœ¬å‘¨å†…å¼€å§‹' : 'Start this week', priority: 'high' as const, actionSteps: (locale === 'zh' ? ['æŒ‰è¯´æ˜ä½¿ç”¨NSAIDs', 'çƒ­æ•·20åˆ†é’Ÿ/æ¬¡', 'æ¯å¤©æ­¥è¡Œ15-20åˆ†é’Ÿ'] : ['Use NSAIDs as directed', 'Heat 20 min/session', 'Walk 15-20m daily']) as string[] },\n            ]\n          : severity === 'moderate'\n          ? [\n              { id: 'pain-mgmt', title: locale === 'zh' ? 'ç–¼ç—›ç®¡ç†' : 'Pain management', description: locale === 'zh' ? 'çƒ­æ•·+æ‹‰ä¼¸+å‘¼å¸æ”¾æ¾ï¼Œ2å‘¨åå¤è¯„ã€‚' : 'Heat + stretching + breathing; reassess in 2 weeks.', timeframe: locale === 'zh' ? '1-2å‘¨è§æ•ˆ' : '1-2 weeks', priority: 'medium' as const, actionSteps: (locale === 'zh' ? ['çƒ­æ•·è…¹éƒ¨/è…°èƒŒ', 'è½»ç‘œä¼½æˆ–æ‹‰ä¼¸15-20åˆ†é’Ÿ', '4-7-8å‘¼å¸ç»ƒä¹ '] : ['Heat abdomen/back', 'Light yoga/stretch 15-20m', '4-7-8 breathing']) as string[] },\n            ]\n          : [\n              { id: 'lifestyle', title: locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼è°ƒæ•´' : 'Lifestyle adjustments', description: locale === 'zh' ? 'è§„å¾‹ä½œæ¯ã€å‡è¡¡é¥®é£Ÿã€é€‚åº¦è¿åŠ¨ï¼Œæœ‰åŠ©äºå‡å°‘ç–¼ç—›é¢‘ç‡ã€‚' : 'Regular sleep, balanced diet, moderate exercise to reduce pain frequency.', timeframe: locale === 'zh' ? 'æŒç»­è¿›è¡Œ' : 'Ongoing', priority: 'low' as const, actionSteps: (locale === 'zh' ? ['ä¿è¯7-8å°æ—¶ç¡çœ ', 'å‡å°‘é«˜ç³–é«˜è„‚æ‘„å…¥', 'ä¿æŒæ¯å‘¨3æ¬¡è½»è¿åŠ¨'] : ['Sleep 7-8h', 'Reduce sugar/fat', '3x/week light exercise']) as string[] },\n            ]\n      ) as any[];\n\n      setResult({\n        score: painLevel,\n        severity,\n        summary: locale === 'zh' ? summaryZh : summaryEn,\n        locationLabel,\n        typeLabel,\n        recommendations: recs,\n      });\n\n      setTimeout(() => {\n        resultRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      }, 50);\n    }, 1500);\n  };\n\n  // å°†locationså’ŒpainTypesæ•°ç»„ç§»åˆ°ç»„ä»¶å†…éƒ¨ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨t()å‡½æ•°\n  const locations = [\n    { value: 'lower_abdomen', label: t('painTracker.lowerAbdomen') },\n    { value: 'lower_back', label: t('painTracker.lowerBack') },\n    { value: 'thighs', label: t('painTracker.thighs') },\n    { value: 'other', label: t('painTracker.other') }\n  ];\n\n  const painTypes = [\n    { value: 'cramping', label: t('painTracker.cramping') },\n    { value: 'dull_pain', label: t('painTracker.dullPain') },\n    { value: 'sharp_pain', label: t('painTracker.sharpPain') },\n    { value: 'other', label: t('painTracker.other') }\n  ];\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Interactive Pain Tracker UI */}\n      <div className=\"bg-white rounded-lg shadow-sm p-8\">\n        <div className=\"text-center space-y-6\">\n          <div className=\"inline-flex items-center justify-center w-20 h-20 bg-primary-100 rounded-full\">\n            <svg className=\"w-10 h-10 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n            </svg>\n          </div>\n          \n          <div>\n            <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">\n              {t('painTracker.toolTitle')}\n            </h2>\n            <p className=\"text-gray-600 max-w-lg mx-auto mb-6\">\n              {t('painTracker.toolDescription')}\n            </p>\n          </div>\n\n          {/* Interactive Pain Recording Form */}\n          <div className=\"max-w-md mx-auto space-y-4\">\n            <div className=\"text-left\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {t('painTracker.painLevel')}\n              </label>\n              <input \n                type=\"range\" \n                min=\"1\" \n                max=\"10\" \n                value={painLevel}\n                onChange={(e) => setPainLevel(parseInt(e.target.value))}\n                className=\"w-full pain-scale cursor-pointer outline-none rounded-lg\"\n                style={{\n                  backgroundImage: `${gradientFill}, ${trackBase}`,\n                  backgroundSize: `${percent}% 100%, 100% 100%`,\n                  backgroundRepeat: 'no-repeat'\n                }}\n              />\n              <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                <span>1</span>\n                <span>5</span>\n                <span>10</span>\n              </div>\n              <div className=\"text-center mt-2\">\n                <span className=\"text-lg font-semibold text-primary-600\">{painLevel}</span>\n              </div>\n            </div>\n\n            <div className=\"text-left\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {t('painTracker.painLocation')}\n              </label>\n              <select \n                value={painLocation}\n                onChange={(e) => setPainLocation(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\n              >\n                <option value=\"\">{t('painTracker.painLocationPlaceholder')}</option>\n                {locations.map((location) => (\n                  <option key={location.value} value={location.value}>\n                    {location.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"text-left\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {t('painTracker.painType')}\n              </label>\n              <select \n                value={painType}\n                onChange={(e) => setPainType(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\n              >\n                <option value=\"\">{t('painTracker.painTypePlaceholder')}</option>\n                {painTypes.map((type) => (\n                  <option key={type.value} value={type.value}>\n                    {type.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <button \n              onClick={handleRecordPain}\n              disabled={isRecording || !painLocation || !painType}\n              className={`w-full py-2 px-4 rounded-md transition-colors ${\n                isRecording || !painLocation || !painType\n                  ? 'bg-gray-400 cursor-not-allowed'\n                  : 'bg-primary-600 hover:bg-primary-700'\n              } text-white`}\n            >\n              {isRecording ? (\n                <div className=\"flex items-center justify-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  {t('painTracker.recording')}\n                </div>\n              ) : (\n                t('painTracker.recordPain')\n              )}\n            </button>\n\n            {(painLocation || painType) && (\n              <div className=\"mt-4 p-3 bg-blue-50 rounded-md\">\n                <p className=\"text-sm text-blue-800\">\n                  {locale === 'zh' \n                    ? `å·²é€‰æ‹©ï¼šç–¼ç—›ç¨‹åº¦ ${painLevel}/10${painLocation ? `ï¼Œä½ç½®ï¼š${locations.find(l => l.value === painLocation)?.label}` : ''}${painType ? `ï¼Œç±»å‹ï¼š${painTypes.find(t => t.value === painType)?.label}` : ''}`\n                    : `Selected: Pain level ${painLevel}/10${painLocation ? `, Location: ${locations.find(l => l.value === painLocation)?.label}` : ''}${painType ? `, Type: ${painTypes.find(t => t.value === painType)?.label}` : ''}`\n                  }\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {result && (\n        <div ref={resultRef} className=\"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-6 sm:p-8\">\n          <div className=\"bg-white rounded-xl shadow-lg p-6 sm:p-8 max-w-4xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <div className=\"w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-8 h-8 text-white\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/></svg>\n              </div>\n              <h2 className=\"text-3xl font-bold text-neutral-900\">{locale === 'zh' ? 'è®°å½•ç»“æœ' : 'Record Result'}</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n              <div className=\"card text-center\">\n                <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">{locale === 'zh' ? 'ä»Šå¤©çš„è¯„åˆ†' : \"Today's Score\"}</h3>\n                <p className=\"text-3xl font-extrabold text-primary-700\">{result.score}/10</p>\n              </div>\n              <div className=\"card text-center\">\n                <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">{locale === 'zh' ? 'ç–¼ç—›ä½ç½®' : 'Location'}</h3>\n                <p className=\"text-xl font-bold text-neutral-900\">{result.locationLabel}</p>\n              </div>\n              <div className=\"card text-center\">\n                <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">{locale === 'zh' ? 'ç–¼ç—›ç±»å‹' : 'Type'}</h3>\n                <p className=\"text-xl font-bold text-neutral-900\">{result.typeLabel}</p>\n              </div>\n            </div>\n\n            <div className=\"mb-8\">\n              <h3 className=\"text-xl font-semibold text-neutral-900 mb-4\">{locale === 'zh' ? 'ç»“æœæ‘˜è¦' : 'Summary'}</h3>\n              <div className=\"card\">\n                <p className=\"text-neutral-700 leading-relaxed\">{result.summary}</p>\n              </div>\n            </div>\n\n            <div className=\"mb-8\">\n              <h3 className=\"text-xl font-semibold text-neutral-900 mb-4\">{locale === 'zh' ? 'å»ºè®®æ–¹æ¡ˆ' : 'Recommendations'}</h3>\n              <div className=\"space-y-4\">\n                {result.recommendations.map((rec) => (\n                  <div key={rec.id} className=\"card\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <h4 className=\"text-lg font-semibold text-neutral-900\">{rec.title}</h4>\n                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${rec.priority === 'high' ? 'bg-red-100 text-red-700' : rec.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-700'}`}>\n                        {locale === 'zh' ? (rec.priority === 'high' ? 'é«˜ä¼˜å…ˆçº§' : rec.priority === 'medium' ? 'ä¸­ä¼˜å…ˆçº§' : 'ä½ä¼˜å…ˆçº§') : rec.priority}\n                      </span>\n                    </div>\n                    <p className=\"text-neutral-700 mb-3 leading-relaxed\">{rec.description}</p>\n                    <p className=\"text-sm text-neutral-500 mb-3\"><strong>{locale === 'zh' ? 'æ—¶é—´æ¡†æ¶ï¼š' : 'Timeframe: '}</strong>{rec.timeframe}</p>\n                    <h5 className=\"font-medium text-neutral-900 mb-2\">{locale === 'zh' ? 'è¡ŒåŠ¨æ­¥éª¤' : 'Action Steps'}</h5>\n                    <ul className=\"list-disc list-inside text-sm text-neutral-700 space-y-1\">\n                      {rec.actionSteps.map((s, i) => (<li key={i}>{s}</li>))}\n                    </ul>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <button onClick={() => setResult(null)} className=\"px-6 py-3 border-2 border-primary-600 text-primary-600 rounded-lg font-medium hover:bg-primary-50 transition-colors\">\n                {locale === 'zh' ? 'ç»§ç»­è®°å½•' : 'Record Another'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/StatisticsSummary.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[671,674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[671,674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":140,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4043,4046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4043,4046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4654,4657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4654,4657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// StatisticsSummary - Component for displaying key analytics statistics in card format\n// Shows summary cards with key metrics and visual indicators\n\nimport React from 'react';\nimport { useTranslations } from 'next-intl';\nimport { \n  Activity, \n  TrendingUp, \n  TrendingDown, \n  Minus,\n  Calendar,\n  Target,\n  Award,\n  AlertCircle\n} from 'lucide-react';\nimport { PainAnalytics } from '../../../../../types/pain-tracker';\n\ninterface StatisticsSummaryProps {\n  analytics: PainAnalytics;\n  locale: string;\n  className?: string;\n}\n\ninterface StatCard {\n  id: string;\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ComponentType<any>;\n  color: 'blue' | 'green' | 'yellow' | 'red' | 'purple' | 'indigo';\n  trend?: 'up' | 'down' | 'stable';\n  trendValue?: string;\n}\n\nexport default function StatisticsSummary({ \n  analytics, \n  locale, \n  className = '' \n}: StatisticsSummaryProps) {\n  const t = useTranslations('painTracker.statistics');\n\n  // Generate statistics cards\n  const generateStatCards = (): StatCard[] => {\n    const cards: StatCard[] = [];\n\n    // Total Records\n    cards.push({\n      id: 'total-records',\n      title: t('totalRecords'),\n      value: analytics.totalRecords,\n      subtitle: t('recordsSubtitle'),\n      icon: Calendar,\n      color: 'blue'\n    });\n\n    // Average Pain Level\n    const avgPainColor = \n      analytics.averagePainLevel >= 7 ? 'red' :\n      analytics.averagePainLevel >= 5 ? 'yellow' :\n      analytics.averagePainLevel >= 3 ? 'blue' : 'green';\n\n    cards.push({\n      id: 'average-pain',\n      title: t('averagePain'),\n      value: `${analytics.averagePainLevel.toFixed(1)}/10`,\n      subtitle: getPainLevelDescription(analytics.averagePainLevel),\n      icon: Activity,\n      color: avgPainColor,\n      trend: getPainTrend(analytics.trendData),\n      trendValue: getTrendValue(analytics.trendData)\n    });\n\n    // Most Common Pain Type\n    if (analytics.commonPainTypes.length > 0) {\n      const mostCommon = analytics.commonPainTypes[0];\n      cards.push({\n        id: 'common-pain-type',\n        title: t('commonPainType'),\n        value: formatPainType(mostCommon.type),\n        subtitle: `${mostCommon.percentage.toFixed(1)}% ${t('ofRecords')}`,\n        icon: Target,\n        color: 'purple'\n      });\n    }\n\n    // Most Effective Treatment\n    if (analytics.effectiveTreatments.length > 0) {\n      const mostEffective = analytics.effectiveTreatments[0];\n      cards.push({\n        id: 'effective-treatment',\n        title: t('effectiveTreatment'),\n        value: mostEffective.treatment,\n        subtitle: `${mostEffective.successRate.toFixed(1)}% ${t('successRate')}`,\n        icon: Award,\n        color: 'green'\n      });\n    }\n\n    // Cycle Pattern Insight\n    if (analytics.cyclePatterns.length > 0) {\n      const highestPainPhase = analytics.cyclePatterns.reduce((prev, current) => \n        prev.averagePainLevel > current.averagePainLevel ? prev : current\n      );\n      \n      cards.push({\n        id: 'cycle-pattern',\n        title: t('highestPainPhase'),\n        value: formatMenstrualStatus(highestPainPhase.phase),\n        subtitle: `${t('averagePain')}: ${highestPainPhase.averagePainLevel.toFixed(1)}/10`,\n        icon: AlertCircle,\n        color: 'red'\n      });\n    }\n\n    // Data Quality Score\n    const dataQualityScore = calculateDataQualityScore(analytics);\n    cards.push({\n      id: 'data-quality',\n      title: t('dataQuality'),\n      value: `${dataQualityScore}%`,\n      subtitle: getDataQualityDescription(dataQualityScore),\n      icon: TrendingUp,\n      color: dataQualityScore >= 80 ? 'green' : dataQualityScore >= 60 ? 'yellow' : 'red'\n    });\n\n    return cards;\n  };\n\n  // Helper functions\n  function getPainLevelDescription(level: number): string {\n    if (level >= 8) return t('painLevels.severe');\n    if (level >= 6) return t('painLevels.high');\n    if (level >= 4) return t('painLevels.moderate');\n    if (level >= 2) return t('painLevels.mild');\n    return t('painLevels.minimal');\n  }\n\n  function getPainTrend(trendData: any[]): 'up' | 'down' | 'stable' {\n    if (trendData.length < 5) return 'stable';\n    \n    const recent = trendData.slice(-5);\n    const older = trendData.slice(-10, -5);\n    \n    if (older.length === 0) return 'stable';\n    \n    const recentAvg = recent.reduce((sum, point) => sum + point.painLevel, 0) / recent.length;\n    const olderAvg = older.reduce((sum, point) => sum + point.painLevel, 0) / older.length;\n    \n    const difference = recentAvg - olderAvg;\n    \n    if (difference > 0.5) return 'up';\n    if (difference < -0.5) return 'down';\n    return 'stable';\n  }\n\n  function getTrendValue(trendData: any[]): string {\n    if (trendData.length < 5) return '';\n    \n    const recent = trendData.slice(-5);\n    const older = trendData.slice(-10, -5);\n    \n    if (older.length === 0) return '';\n    \n    const recentAvg = recent.reduce((sum, point) => sum + point.painLevel, 0) / recent.length;\n    const olderAvg = older.reduce((sum, point) => sum + point.painLevel, 0) / older.length;\n    \n    const difference = Math.abs(recentAvg - olderAvg);\n    \n    return difference > 0.1 ? `${difference.toFixed(1)}` : '';\n  }\n\n  function formatPainType(type: string): string {\n    return type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  function formatMenstrualStatus(status: string): string {\n    const statusMap: Record<string, string> = {\n      'before_period': t('menstrualPhases.beforePeriod'),\n      'day_1': t('menstrualPhases.day1'),\n      'day_2_3': t('menstrualPhases.day23'),\n      'day_4_plus': t('menstrualPhases.day4Plus'),\n      'after_period': t('menstrualPhases.afterPeriod'),\n      'mid_cycle': t('menstrualPhases.midCycle'),\n      'irregular': t('menstrualPhases.irregular')\n    };\n    return statusMap[status] || status;\n  }\n\n  function calculateDataQualityScore(analytics: PainAnalytics): number {\n    let score = 0;\n    let maxScore = 0;\n\n    // Records count (0-25 points)\n    maxScore += 25;\n    if (analytics.totalRecords >= 30) score += 25;\n    else if (analytics.totalRecords >= 20) score += 20;\n    else if (analytics.totalRecords >= 10) score += 15;\n    else if (analytics.totalRecords >= 5) score += 10;\n    else score += 5;\n\n    // Pain type diversity (0-20 points)\n    maxScore += 20;\n    const painTypeCount = analytics.commonPainTypes.length;\n    if (painTypeCount >= 4) score += 20;\n    else if (painTypeCount >= 3) score += 15;\n    else if (painTypeCount >= 2) score += 10;\n    else if (painTypeCount >= 1) score += 5;\n\n    // Treatment tracking (0-20 points)\n    maxScore += 20;\n    const treatmentCount = analytics.effectiveTreatments.length;\n    if (treatmentCount >= 3) score += 20;\n    else if (treatmentCount >= 2) score += 15;\n    else if (treatmentCount >= 1) score += 10;\n\n    // Cycle pattern data (0-20 points)\n    maxScore += 20;\n    const cyclePatternCount = analytics.cyclePatterns.length;\n    if (cyclePatternCount >= 5) score += 20;\n    else if (cyclePatternCount >= 4) score += 15;\n    else if (cyclePatternCount >= 3) score += 10;\n    else if (cyclePatternCount >= 2) score += 5;\n\n    // Trend data consistency (0-15 points)\n    maxScore += 15;\n    const trendDataCount = analytics.trendData.length;\n    if (trendDataCount >= 20) score += 15;\n    else if (trendDataCount >= 15) score += 12;\n    else if (trendDataCount >= 10) score += 8;\n    else if (trendDataCount >= 5) score += 5;\n\n    return Math.round((score / maxScore) * 100);\n  }\n\n  function getDataQualityDescription(score: number): string {\n    if (score >= 90) return t('dataQualityLevels.excellent');\n    if (score >= 80) return t('dataQualityLevels.good');\n    if (score >= 70) return t('dataQualityLevels.fair');\n    if (score >= 60) return t('dataQualityLevels.poor');\n    return t('dataQualityLevels.insufficient');\n  }\n\n  const statCards = generateStatCards();\n\n  const colorClasses = {\n    blue: {\n      bg: 'bg-gradient-to-r from-blue-100 to-blue-200',\n      icon: 'text-blue-600',\n      text: 'text-blue-900',\n      border: 'border-blue-200'\n    },\n    green: {\n      bg: 'bg-gradient-to-r from-green-100 to-green-200',\n      icon: 'text-green-600',\n      text: 'text-green-900',\n      border: 'border-green-200'\n    },\n    yellow: {\n      bg: 'bg-gradient-to-r from-yellow-100 to-yellow-200',\n      icon: 'text-yellow-600',\n      text: 'text-yellow-900',\n      border: 'border-yellow-200'\n    },\n    red: {\n      bg: 'bg-gradient-to-r from-red-100 to-red-200',\n      icon: 'text-red-600',\n      text: 'text-red-900',\n      border: 'border-red-200'\n    },\n    purple: {\n      bg: 'bg-gradient-to-r from-purple-100 to-purple-200',\n      icon: 'text-purple-600',\n      text: 'text-purple-900',\n      border: 'border-purple-200'\n    },\n    indigo: {\n      bg: 'bg-gradient-to-r from-indigo-100 to-indigo-200',\n      icon: 'text-indigo-600',\n      text: 'text-indigo-900',\n      border: 'border-indigo-200'\n    }\n  };\n\n  return (\n    <div className={`${className}`}>\n      {/* Header */}\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n          {t('summaryTitle')}\n        </h3>\n        <p className=\"text-gray-600\">\n          {t('summaryDescription')}\n        </p>\n      </div>\n\n      {/* Statistics Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\n        {statCards.map((card) => {\n          const Icon = card.icon;\n          const colors = colorClasses[card.color];\n          \n          return (\n            <div\n              key={card.id}\n              className={`${colors.bg} ${colors.border} border rounded-lg p-4 sm:p-6 transition-all duration-200 hover:shadow-md`}\n            >\n              {/* Header */}\n              <div className=\"flex items-center justify-between mb-3\">\n                <Icon className={`w-6 h-6 ${colors.icon}`} />\n                {card.trend && (\n                  <div className=\"flex items-center space-x-1\">\n                    {card.trend === 'up' && (\n                      <TrendingUp className=\"w-4 h-4 text-red-500\" />\n                    )}\n                    {card.trend === 'down' && (\n                      <TrendingDown className=\"w-4 h-4 text-green-500\" />\n                    )}\n                    {card.trend === 'stable' && (\n                      <Minus className=\"w-4 h-4 text-gray-500\" />\n                    )}\n                    {card.trendValue && (\n                      <span className=\"text-xs text-gray-600\">\n                        {card.trendValue}\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Title */}\n              <h4 className={`text-sm font-medium ${colors.text} mb-1`}>\n                {card.title}\n              </h4>\n\n              {/* Value */}\n              <p className={`text-2xl sm:text-3xl font-bold ${colors.text} mb-2`}>\n                {card.value}\n              </p>\n\n              {/* Subtitle */}\n              {card.subtitle && (\n                <p className={`text-xs ${colors.text} opacity-75`}>\n                  {card.subtitle}\n                </p>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Date Range Info */}\n      <div className=\"mt-6 bg-gray-50 rounded-lg p-4\">\n        <div className=\"flex items-center justify-between text-sm text-gray-600\">\n          <span>{t('dateRange')}:</span>\n          <span>\n            {analytics.dateRange.start.toLocaleDateString(locale)} - {' '}\n            {analytics.dateRange.end.toLocaleDateString(locale)}\n          </span>\n        </div>\n        <div className=\"flex items-center justify-between text-sm text-gray-600 mt-1\">\n          <span>{t('trackingPeriod')}:</span>\n          <span>\n            {Math.ceil(\n              (analytics.dateRange.end.getTime() - analytics.dateRange.start.getTime()) / \n              (1000 * 60 * 60 * 24)\n            )} {t('days')}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/components/TranslationTestComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/pain-tracker-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/utils/dataConverter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/pain-tracker/utils/testTranslations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/BackupRestoreSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RefreshCw' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PainTrackerError' is defined but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":134,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":300,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":300,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9732,9735],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9732,9735],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":379,"column":25,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click &quot;Download Backup\" to save the file to your device.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click &ldquo;Download Backup\" to save the file to your device.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click &#34;Download Backup\" to save the file to your device.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click &rdquo;Download Backup\" to save the file to your device.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":379,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click \"Download Backup&quot; to save the file to your device.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click \"Download Backup&ldquo; to save the file to your device.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click \"Download Backup&#34; to save the file to your device.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[12801,12902],"text":" records.\n                  Click \"Download Backup&rdquo; to save the file to your device.\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { \n  Download, \n  Upload, \n  Shield, \n  AlertTriangle, \n  CheckCircle, \n  Clock,\n  FileText,\n  Database,\n  RefreshCw\n} from 'lucide-react';\nimport { LoadingSpinner, ProgressBar } from './LoadingSystem';\nimport { useLoadingState } from './LoadingSystem';\nimport DataIntegrityService, { DataIntegrityReport } from '../../../../../lib/pain-tracker/storage/DataIntegrityService';\nimport { PainTrackerError, StoredData } from '../../../../../types/pain-tracker';\n\ninterface BackupRestoreSystemProps {\n  onBackupComplete?: (success: boolean) => void;\n  onRestoreComplete?: (success: boolean) => void;\n  onIntegrityCheck?: (report: DataIntegrityReport) => void;\n  className?: string;\n}\n\nexport function BackupRestoreSystem({\n  onBackupComplete,\n  onRestoreComplete,\n  onIntegrityCheck,\n  className = ''\n}: BackupRestoreSystemProps) {\n  const [activeTab, setActiveTab] = useState<'backup' | 'restore' | 'integrity'>('backup');\n  const [backupData, setBackupData] = useState<string | null>(null);\n  const [restoreFile, setRestoreFile] = useState<File | null>(null);\n  const [integrityReport, setIntegrityReport] = useState<DataIntegrityReport | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const dataIntegrityService = new DataIntegrityService();\n\n  const {\n    isLoading: backupLoading,\n    progress: backupProgress,\n    message: backupMessage,\n    startLoading: startBackupLoading,\n    updateProgress: updateBackupProgress,\n    finishLoading: finishBackupLoading,\n    setLoadingError: setBackupError\n  } = useLoadingState();\n\n  const {\n    isLoading: restoreLoading,\n    progress: restoreProgress,\n    message: restoreMessage,\n    startLoading: startRestoreLoading,\n    updateProgress: updateRestoreProgress,\n    finishLoading: finishRestoreLoading,\n    setLoadingError: setRestoreError\n  } = useLoadingState();\n\n  const {\n    isLoading: integrityLoading,\n    startLoading: startIntegrityLoading,\n    finishLoading: finishIntegrityLoading,\n    setLoadingError: setIntegrityError\n  } = useLoadingState();\n\n  // Create backup\n  const handleCreateBackup = async () => {\n    setError(null);\n    setSuccess(null);\n    startBackupLoading('Creating backup...');\n\n    try {\n      updateBackupProgress(20, 'Reading pain tracker data...');\n      \n      // Get all pain tracker data\n      const records = JSON.parse(localStorage.getItem('enhanced_pain_tracker_records') || '[]');\n      const preferences = JSON.parse(localStorage.getItem('enhanced_pain_tracker_preferences') || '{}');\n      const metadata = JSON.parse(localStorage.getItem('enhanced_pain_tracker_metadata') || '{}');\n\n      updateBackupProgress(50, 'Preparing backup data...');\n\n      const backupData: StoredData = {\n        records,\n        preferences,\n        schemaVersion: 1,\n        lastBackup: new Date(),\n        metadata: {\n          ...metadata,\n          backupCreated: new Date(),\n          recordCount: records.length,\n          version: '1.0.0'\n        }\n      };\n\n      updateBackupProgress(80, 'Generating backup file...');\n\n      const backupJson = JSON.stringify(backupData, null, 2);\n      setBackupData(backupJson);\n\n      updateBackupProgress(100, 'Backup created successfully!');\n      finishBackupLoading();\n\n      setSuccess('Backup created successfully! You can now download it.');\n      onBackupComplete?.(true);\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to create backup';\n      setBackupError(errorMessage);\n      setError(errorMessage);\n      onBackupComplete?.(false);\n    }\n  };\n\n  // Download backup file\n  const handleDownloadBackup = () => {\n    if (!backupData) return;\n\n    try {\n      const blob = new Blob([backupData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `pain-tracker-backup-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      setSuccess('Backup file downloaded successfully!');\n    } catch (error) {\n      setError('Failed to download backup file');\n    }\n  };\n\n  // Handle file selection for restore\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type === 'application/json' || file.name.endsWith('.json')) {\n        setRestoreFile(file);\n        setError(null);\n      } else {\n        setError('Please select a valid JSON backup file');\n        setRestoreFile(null);\n      }\n    }\n  };\n\n  // Restore from backup\n  const handleRestore = async () => {\n    if (!restoreFile) return;\n\n    setError(null);\n    setSuccess(null);\n    startRestoreLoading('Restoring from backup...');\n\n    try {\n      updateRestoreProgress(20, 'Reading backup file...');\n\n      const fileContent = await restoreFile.text();\n      const backupData: StoredData = JSON.parse(fileContent);\n\n      updateRestoreProgress(40, 'Validating backup data...');\n\n      // Validate backup structure\n      if (!backupData.records || !Array.isArray(backupData.records)) {\n        throw new Error('Invalid backup file: missing or invalid records');\n      }\n\n      updateRestoreProgress(60, 'Creating safety backup...');\n\n      // Create safety backup of current data\n      const currentRecords = localStorage.getItem('enhanced_pain_tracker_records');\n      if (currentRecords) {\n        localStorage.setItem('enhanced_pain_tracker_records_safety', currentRecords);\n      }\n\n      updateRestoreProgress(80, 'Restoring data...');\n\n      // Restore data\n      localStorage.setItem('enhanced_pain_tracker_records', JSON.stringify(backupData.records));\n      \n      if (backupData.preferences) {\n        localStorage.setItem('enhanced_pain_tracker_preferences', JSON.stringify(backupData.preferences));\n      }\n\n      if (backupData.metadata) {\n        localStorage.setItem('enhanced_pain_tracker_metadata', JSON.stringify({\n          ...backupData.metadata,\n          restoredAt: new Date(),\n          restoredFrom: restoreFile.name\n        }));\n      }\n\n      updateRestoreProgress(100, 'Restore completed successfully!');\n      finishRestoreLoading();\n\n      setSuccess(`Successfully restored ${backupData.records.length} records from backup!`);\n      setRestoreFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n\n      onRestoreComplete?.(true);\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to restore from backup';\n      setRestoreError(errorMessage);\n      setError(errorMessage);\n      onRestoreComplete?.(false);\n    }\n  };\n\n  // Check data integrity\n  const handleIntegrityCheck = async () => {\n    setError(null);\n    setSuccess(null);\n    startIntegrityLoading('Checking data integrity...');\n\n    try {\n      const report = await dataIntegrityService.checkDataIntegrity();\n      setIntegrityReport(report);\n      finishIntegrityLoading();\n\n      if (report.isValid) {\n        setSuccess('Data integrity check passed! Your data is healthy.');\n      } else {\n        setError(`Data integrity issues detected: ${report.corruptionLevel} corruption level`);\n      }\n\n      onIntegrityCheck?.(report);\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to check data integrity';\n      setIntegrityError(errorMessage);\n      setError(errorMessage);\n    }\n  };\n\n  // Execute recovery option\n  const handleRecoveryAction = async (action: () => Promise<boolean>, description: string) => {\n    setError(null);\n    setSuccess(null);\n    startIntegrityLoading(`Executing: ${description}...`);\n\n    try {\n      const success = await action();\n      finishIntegrityLoading();\n\n      if (success) {\n        setSuccess(`Recovery action completed: ${description}`);\n        // Re-check integrity after recovery\n        setTimeout(() => handleIntegrityCheck(), 1000);\n      } else {\n        setError(`Recovery action failed: ${description}`);\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Recovery action failed';\n      setIntegrityError(errorMessage);\n      setError(errorMessage);\n    }\n  };\n\n  const getCorruptionLevelColor = (level: string) => {\n    switch (level) {\n      case 'none': return 'text-green-600';\n      case 'minor': return 'text-yellow-600';\n      case 'moderate': return 'text-orange-600';\n      case 'severe': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const getCorruptionLevelIcon = (level: string) => {\n    switch (level) {\n      case 'none': return <CheckCircle className=\"h-5 w-5\" />;\n      case 'minor': return <Clock className=\"h-5 w-5\" />;\n      case 'moderate': return <AlertTriangle className=\"h-5 w-5\" />;\n      case 'severe': return <AlertTriangle className=\"h-5 w-5\" />;\n      default: return <Database className=\"h-5 w-5\" />;\n    }\n  };\n\n  return (\n    <div className={`bg-white rounded-lg border border-gray-200 ${className}`}>\n      {/* Tab Navigation */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"flex space-x-8 px-6\">\n          {[\n            { id: 'backup', label: 'Backup', icon: Download },\n            { id: 'restore', label: 'Restore', icon: Upload },\n            { id: 'integrity', label: 'Data Health', icon: Shield }\n          ].map(({ id, label, icon: Icon }) => (\n            <button\n              key={id}\n              onClick={() => setActiveTab(id as any)}\n              className={`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === id\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <Icon className=\"h-4 w-4 mr-2\" />\n              {label}\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      <div className=\"p-6\">\n        {/* Error/Success Messages */}\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-md\">\n            <div className=\"flex items-center\">\n              <AlertTriangle className=\"h-4 w-4 text-red-500 mr-2\" />\n              <span className=\"text-red-800 text-sm\">{error}</span>\n            </div>\n          </div>\n        )}\n\n        {success && (\n          <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded-md\">\n            <div className=\"flex items-center\">\n              <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n              <span className=\"text-green-800 text-sm\">{success}</span>\n            </div>\n          </div>\n        )}\n\n        {/* Backup Tab */}\n        {activeTab === 'backup' && (\n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Create Data Backup</h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Create a backup of all your pain tracking data, including records, preferences, and settings.\n              </p>\n            </div>\n\n            {backupLoading && (\n              <div className=\"space-y-2\">\n                <ProgressBar progress={backupProgress} label={backupMessage} />\n              </div>\n            )}\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={handleCreateBackup}\n                disabled={backupLoading}\n                className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                {backupLoading ? (\n                  <LoadingSpinner size=\"sm\" color=\"white\" className=\"mr-2\" />\n                ) : (\n                  <Database className=\"h-4 w-4 mr-2\" />\n                )}\n                Create Backup\n              </button>\n\n              {backupData && (\n                <button\n                  onClick={handleDownloadBackup}\n                  className=\"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors\"\n                >\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  Download Backup\n                </button>\n              )}\n            </div>\n\n            {backupData && (\n              <div className=\"mt-4 p-3 bg-gray-50 rounded-md\">\n                <p className=\"text-sm text-gray-600\">\n                  Backup created successfully! The backup contains {JSON.parse(backupData).records?.length || 0} records.\n                  Click \"Download Backup\" to save the file to your device.\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Restore Tab */}\n        {activeTab === 'restore' && (\n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Restore from Backup</h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Restore your pain tracking data from a previously created backup file.\n              </p>\n            </div>\n\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6\">\n              <div className=\"text-center\">\n                <FileText className=\"mx-auto h-12 w-12 text-gray-400\" />\n                <div className=\"mt-4\">\n                  <label htmlFor=\"backup-file\" className=\"cursor-pointer\">\n                    <span className=\"mt-2 block text-sm font-medium text-gray-900\">\n                      Select backup file\n                    </span>\n                    <span className=\"mt-1 block text-sm text-gray-600\">\n                      Choose a JSON backup file to restore\n                    </span>\n                  </label>\n                  <input\n                    ref={fileInputRef}\n                    id=\"backup-file\"\n                    type=\"file\"\n                    accept=\".json,application/json\"\n                    onChange={handleFileSelect}\n                    className=\"sr-only\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {restoreFile && (\n              <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-md\">\n                <p className=\"text-sm text-blue-800\">\n                  Selected file: {restoreFile.name} ({(restoreFile.size / 1024).toFixed(1)} KB)\n                </p>\n              </div>\n            )}\n\n            {restoreLoading && (\n              <div className=\"space-y-2\">\n                <ProgressBar progress={restoreProgress} label={restoreMessage} />\n              </div>\n            )}\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={handleRestore}\n                disabled={!restoreFile || restoreLoading}\n                className=\"flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                {restoreLoading ? (\n                  <LoadingSpinner size=\"sm\" color=\"white\" className=\"mr-2\" />\n                ) : (\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                )}\n                Restore Data\n              </button>\n            </div>\n\n            <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-md\">\n              <div className=\"flex items-start\">\n                <AlertTriangle className=\"h-4 w-4 text-yellow-500 mt-0.5 mr-2 flex-shrink-0\" />\n                <div className=\"text-sm text-yellow-800\">\n                  <strong>Warning:</strong> Restoring from backup will replace all current data. \n                  A safety backup of your current data will be created automatically.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Data Integrity Tab */}\n        {activeTab === 'integrity' && (\n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Data Health Check</h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Check your pain tracking data for corruption, missing fields, or other integrity issues.\n              </p>\n            </div>\n\n            <button\n              onClick={handleIntegrityCheck}\n              disabled={integrityLoading}\n              className=\"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {integrityLoading ? (\n                <LoadingSpinner size=\"sm\" color=\"white\" className=\"mr-2\" />\n              ) : (\n                <Shield className=\"h-4 w-4 mr-2\" />\n              )}\n              Check Data Integrity\n            </button>\n\n            {integrityReport && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <h4 className=\"font-medium text-gray-900 mb-3\">Integrity Report</h4>\n                  \n                  <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-gray-900\">{integrityReport.totalRecords}</div>\n                      <div className=\"text-sm text-gray-600\">Total Records</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-green-600\">{integrityReport.validRecords}</div>\n                      <div className=\"text-sm text-gray-600\">Valid Records</div>\n                    </div>\n                  </div>\n\n                  <div className={`flex items-center justify-center p-3 rounded-md ${\n                    integrityReport.corruptionLevel === 'none' ? 'bg-green-50' :\n                    integrityReport.corruptionLevel === 'minor' ? 'bg-yellow-50' :\n                    integrityReport.corruptionLevel === 'moderate' ? 'bg-orange-50' :\n                    'bg-red-50'\n                  }`}>\n                    <div className={getCorruptionLevelColor(integrityReport.corruptionLevel)}>\n                      {getCorruptionLevelIcon(integrityReport.corruptionLevel)}\n                    </div>\n                    <span className={`ml-2 font-medium capitalize ${getCorruptionLevelColor(integrityReport.corruptionLevel)}`}>\n                      {integrityReport.corruptionLevel} Corruption Level\n                    </span>\n                  </div>\n\n                  {integrityReport.corruptedRecords.length > 0 && (\n                    <div className=\"mt-4\">\n                      <h5 className=\"font-medium text-red-800 mb-2\">Issues Found:</h5>\n                      <ul className=\"text-sm text-red-700 space-y-1\">\n                        {integrityReport.invalidData.slice(0, 5).map((issue, index) => (\n                          <li key={index} className=\"flex items-start\">\n                            <span className=\"inline-block w-2 h-2 bg-red-400 rounded-full mt-2 mr-2 flex-shrink-0\"></span>\n                            {issue}\n                          </li>\n                        ))}\n                        {integrityReport.invalidData.length > 5 && (\n                          <li className=\"text-red-600\">\n                            ... and {integrityReport.invalidData.length - 5} more issues\n                          </li>\n                        )}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n\n                {integrityReport.recoveryOptions.length > 0 && (\n                  <div className=\"bg-blue-50 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-blue-900 mb-3\">Recovery Options</h4>\n                    <div className=\"space-y-3\">\n                      {integrityReport.recoveryOptions.map((option, index) => (\n                        <div key={index} className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                          <div className=\"flex-1\">\n                            <div className=\"font-medium text-gray-900\">{option.description}</div>\n                            <div className=\"text-sm text-gray-600 mt-1\">\n                              Risk: <span className={`font-medium ${\n                                option.riskLevel === 'low' ? 'text-green-600' :\n                                option.riskLevel === 'medium' ? 'text-yellow-600' :\n                                'text-red-600'\n                              }`}>{option.riskLevel}</span>\n                              {' â€¢ '}\n                              Recovery: {option.estimatedRecovery}%\n                              {option.dataLoss && ' â€¢ Data loss possible'}\n                            </div>\n                          </div>\n                          <button\n                            onClick={() => handleRecoveryAction(option.action, option.description)}\n                            disabled={integrityLoading}\n                            className={`ml-4 px-3 py-1 text-sm rounded transition-colors ${\n                              option.riskLevel === 'low' ? 'bg-green-600 hover:bg-green-700 text-white' :\n                              option.riskLevel === 'medium' ? 'bg-yellow-600 hover:bg-yellow-700 text-white' :\n                              'bg-red-600 hover:bg-red-700 text-white'\n                            } disabled:opacity-50 disabled:cursor-not-allowed`}\n                          >\n                            {integrityLoading ? (\n                              <LoadingSpinner size=\"sm\" color=\"white\" />\n                            ) : (\n                              'Execute'\n                            )}\n                          </button>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default BackupRestoreSystem;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/ErrorHandlingWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'clearError' is assigned a value but never used.","line":35,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isOnline' is assigned a value but never used.","line":48,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isOffline' is assigned a value but never used.","line":48,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":30},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'performAutoBackup' and 'performHealthCheck'. Either include them or remove the dependency array.","line":136,"column":6,"nodeType":"ArrayExpression","endLine":136,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [performAutoBackup, performHealthCheck]","fix":{"range":[4536,4538],"text":"[performAutoBackup, performHealthCheck]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5074,5077],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5074,5077],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performHealthCheck'. Either include it or remove the dependency array.","line":165,"column":6,"nodeType":"ArrayExpression","endLine":165,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [performHealthCheck]","fix":{"range":[5809,5811],"text":"[performHealthCheck]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'errorInfo' is defined but never used.","line":200,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":35}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { ErrorBoundary } from './ErrorBoundary';\nimport { NotificationProvider, NotificationContainer } from './NotificationSystem';\nimport { OfflineNotification, ConnectionStatus } from './OfflineNotification';\nimport { BackupRestoreSystem } from './BackupRestoreSystem';\nimport { LoadingOverlay } from './LoadingSystem';\nimport { useErrorHandling } from '../hooks/useErrorHandling';\nimport { useOfflineDetection } from '../hooks/useOfflineDetection';\nimport DataIntegrityService from '../../../../../lib/pain-tracker/storage/DataIntegrityService';\nimport { Shield, AlertTriangle, CheckCircle, Settings } from 'lucide-react';\n\ninterface ErrorHandlingWrapperProps {\n  children: React.ReactNode;\n  showConnectionStatus?: boolean;\n  showOfflineNotifications?: boolean;\n  enableAutoBackup?: boolean;\n  enableHealthChecks?: boolean;\n  className?: string;\n}\n\nexport function ErrorHandlingWrapper({\n  children,\n  showConnectionStatus = true,\n  showOfflineNotifications = true,\n  enableAutoBackup = true,\n  enableHealthChecks = true,\n  className = ''\n}: ErrorHandlingWrapperProps) {\n  const [showBackupSystem, setShowBackupSystem] = useState(false);\n  const [healthStatus, setHealthStatus] = useState<'healthy' | 'warning' | 'error' | 'checking'>('healthy');\n  const [lastHealthCheck, setLastHealthCheck] = useState<Date | null>(null);\n\n  const { errorState, handleError, clearError } = useErrorHandling({\n    enableAutoRecovery: true,\n    enableOfflineMode: true,\n    onError: (error) => {\n      console.error('Error handled by wrapper:', error);\n    },\n    onRecovery: (success) => {\n      if (success) {\n        setHealthStatus('healthy');\n      }\n    }\n  });\n\n  const { isOnline, isOffline } = useOfflineDetection({\n    onOffline: () => {\n      if (showOfflineNotifications) {\n        // Offline notification will be handled by OfflineNotification component\n      }\n    },\n    onOnline: () => {\n      // Trigger health check when coming back online\n      if (enableHealthChecks) {\n        performHealthCheck();\n      }\n    }\n  });\n\n  const dataIntegrityService = new DataIntegrityService();\n\n  // Perform health check\n  const performHealthCheck = async () => {\n    if (!enableHealthChecks) return;\n\n    setHealthStatus('checking');\n    try {\n      const report = await dataIntegrityService.checkDataIntegrity();\n      \n      if (report.isValid) {\n        setHealthStatus('healthy');\n      } else if (report.corruptionLevel === 'minor') {\n        setHealthStatus('warning');\n      } else {\n        setHealthStatus('error');\n      }\n      \n      setLastHealthCheck(new Date());\n    } catch (error) {\n      console.error('Health check failed:', error);\n      setHealthStatus('error');\n      handleError(error as Error, 'health check');\n    }\n  };\n\n  // Auto backup functionality\n  const performAutoBackup = async () => {\n    if (!enableAutoBackup) return;\n\n    try {\n      const records = JSON.parse(localStorage.getItem('enhanced_pain_tracker_records') || '[]');\n      if (records.length === 0) return;\n\n      const lastBackup = localStorage.getItem('enhanced_pain_tracker_last_backup');\n      const lastBackupDate = lastBackup ? new Date(lastBackup) : null;\n      const now = new Date();\n      \n      // Auto backup every 7 days\n      if (!lastBackupDate || (now.getTime() - lastBackupDate.getTime()) > 7 * 24 * 60 * 60 * 1000) {\n        const backupData = {\n          records,\n          preferences: JSON.parse(localStorage.getItem('enhanced_pain_tracker_preferences') || '{}'),\n          metadata: JSON.parse(localStorage.getItem('enhanced_pain_tracker_metadata') || '{}'),\n          schemaVersion: 1,\n          lastBackup: now\n        };\n\n        localStorage.setItem('enhanced_pain_tracker_records_backup', JSON.stringify(backupData));\n        localStorage.setItem('enhanced_pain_tracker_last_backup', now.toISOString());\n      }\n    } catch (error) {\n      console.error('Auto backup failed:', error);\n    }\n  };\n\n  // Initialize health checks and auto backup\n  useEffect(() => {\n    // Initial health check\n    performHealthCheck();\n    \n    // Initial auto backup\n    performAutoBackup();\n\n    // Set up periodic health checks (every 10 minutes)\n    const healthCheckInterval = setInterval(performHealthCheck, 10 * 60 * 1000);\n    \n    // Set up periodic auto backup (every hour)\n    const backupInterval = setInterval(performAutoBackup, 60 * 60 * 1000);\n\n    return () => {\n      clearInterval(healthCheckInterval);\n      clearInterval(backupInterval);\n    };\n  }, []);\n\n  // Listen for custom events\n  useEffect(() => {\n    const handleExportRequest = () => setShowBackupSystem(true);\n    const handleBackupRequest = () => setShowBackupSystem(true);\n    const handleCleanupRequest = () => {\n      // Implement cleanup logic\n      const records = JSON.parse(localStorage.getItem('enhanced_pain_tracker_records') || '[]');\n      const cutoffDate = new Date();\n      cutoffDate.setFullYear(cutoffDate.getFullYear() - 1); // Keep only last year\n      \n      const filteredRecords = records.filter((record: any) => \n        new Date(record.date) > cutoffDate\n      );\n      \n      localStorage.setItem('enhanced_pain_tracker_records', JSON.stringify(filteredRecords));\n      performHealthCheck();\n    };\n\n    window.addEventListener('pain-tracker-export-request', handleExportRequest);\n    window.addEventListener('pain-tracker-backup-request', handleBackupRequest);\n    window.addEventListener('pain-tracker-cleanup-request', handleCleanupRequest);\n\n    return () => {\n      window.removeEventListener('pain-tracker-export-request', handleExportRequest);\n      window.removeEventListener('pain-tracker-backup-request', handleBackupRequest);\n      window.removeEventListener('pain-tracker-cleanup-request', handleCleanupRequest);\n    };\n  }, []);\n\n  const getHealthStatusIcon = () => {\n    switch (healthStatus) {\n      case 'healthy':\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />;\n      case 'error':\n        return <AlertTriangle className=\"h-4 w-4 text-red-500\" />;\n      case 'checking':\n        return <Shield className=\"h-4 w-4 text-blue-500 animate-pulse\" />;\n      default:\n        return <Shield className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const getHealthStatusText = () => {\n    switch (healthStatus) {\n      case 'healthy':\n        return 'Data Healthy';\n      case 'warning':\n        return 'Minor Issues';\n      case 'error':\n        return 'Data Issues';\n      case 'checking':\n        return 'Checking...';\n      default:\n        return 'Unknown';\n    }\n  };\n\n  return (\n    <NotificationProvider>\n      <ErrorBoundary\n        onError={(error, errorInfo) => {\n          handleError(error, 'component error');\n        }}\n        showDetails={process.env.NODE_ENV === 'development'}\n      >\n        <div className={`relative ${className}`}>\n          {/* Status Bar */}\n          {(showConnectionStatus || enableHealthChecks) && (\n            <div className=\"flex items-center justify-between p-2 bg-gray-50 border-b border-gray-200 text-sm\">\n              <div className=\"flex items-center space-x-4\">\n                {showConnectionStatus && (\n                  <ConnectionStatus showDetails={true} />\n                )}\n                \n                {enableHealthChecks && (\n                  <div className=\"flex items-center\">\n                    {getHealthStatusIcon()}\n                    <span className=\"ml-1\">{getHealthStatusText()}</span>\n                    {lastHealthCheck && (\n                      <span className=\"ml-2 text-xs text-gray-500\">\n                        Last check: {lastHealthCheck.toLocaleTimeString()}\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={performHealthCheck}\n                  disabled={healthStatus === 'checking'}\n                  className=\"text-xs text-blue-600 hover:text-blue-800 disabled:opacity-50 transition-colors\"\n                >\n                  Check Health\n                </button>\n                \n                <button\n                  onClick={() => setShowBackupSystem(true)}\n                  className=\"text-xs text-gray-600 hover:text-gray-800 transition-colors\"\n                >\n                  <Settings className=\"h-3 w-3\" />\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Main Content */}\n          {children}\n\n          {/* Loading Overlay for Recovery Operations */}\n          <LoadingOverlay\n            isVisible={errorState.isRecovering}\n            message=\"Attempting to recover from error...\"\n            progress={errorState.recoveryAttempts * 33.33}\n          />\n\n          {/* Offline Notifications */}\n          {showOfflineNotifications && (\n            <OfflineNotification\n              storageKey=\"pain_tracker\"\n              showConnectionQuality={true}\n              autoHide={true}\n            />\n          )}\n\n          {/* Backup/Restore System Modal */}\n          {showBackupSystem && (\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n              <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto\">\n                <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n                  <h2 className=\"text-lg font-semibold text-gray-900\">\n                    Data Management\n                  </h2>\n                  <button\n                    onClick={() => setShowBackupSystem(false)}\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                  >\n                    <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n                \n                <BackupRestoreSystem\n                  onBackupComplete={(success) => {\n                    if (success) {\n                      performHealthCheck();\n                    }\n                  }}\n                  onRestoreComplete={(success) => {\n                    if (success) {\n                      performHealthCheck();\n                      // Refresh the page to reload with restored data\n                      setTimeout(() => window.location.reload(), 1000);\n                    }\n                  }}\n                  onIntegrityCheck={(report) => {\n                    if (report.isValid) {\n                      setHealthStatus('healthy');\n                    } else if (report.corruptionLevel === 'minor') {\n                      setHealthStatus('warning');\n                    } else {\n                      setHealthStatus('error');\n                    }\n                  }}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Notification Container */}\n          <NotificationContainer position=\"top-right\" />\n        </div>\n      </ErrorBoundary>\n    </NotificationProvider>\n  );\n}\n\nexport default ErrorHandlingWrapper;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/HealthDataDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":22,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport { useHealthDataStore } from '../stores/healthDataStore';\nimport { useInteractiveToolTranslations } from '../hooks/useAppTranslations';\nimport { \n  BarChart3, \n  TrendingUp, \n  Calendar, \n  Activity,\n  Download,\n  Upload,\n  Trash2,\n  AlertCircle\n} from 'lucide-react';\n\ninterface HealthDataDashboardProps {\n  locale: string;\n}\n\nexport default function HealthDataDashboard({ locale }: HealthDataDashboardProps) {\n  const { t } = useInteractiveToolTranslations();\n  \n  const {\n    painEntries,\n    constitutionResults,\n    preferences,\n    lastSyncTime,\n    getAveragePainLevel,\n    getMostCommonSymptoms,\n    getPainTrends,\n    exportData,\n    importData,\n    clearAllData\n  } = useHealthDataStore();\n\n  const averagePainLevel = getAveragePainLevel();\n  const mostCommonSymptoms = getMostCommonSymptoms();\n  const painTrends = getPainTrends();\n\n  const handleExportData = () => {\n    const data = exportData();\n    const blob = new Blob([data], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `periodhub-health-data-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleImportData = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const data = e.target?.result as string;\n        const success = importData(data);\n        if (success) {\n          alert(locale === 'zh' ? 'æ•°æ®å¯¼å…¥æˆåŠŸï¼' : 'Data imported successfully!');\n        } else {\n          alert(locale === 'zh' ? 'æ•°æ®å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€‚' : 'Data import failed. Please check file format.');\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const handleClearData = () => {\n    const confirmMessage = locale === 'zh' \n      ? 'ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚' \n      : 'Are you sure you want to clear all data? This action cannot be undone.';\n    \n    if (confirm(confirmMessage)) {\n      clearAllData();\n      alert(locale === 'zh' ? 'æ•°æ®å·²æ¸…é™¤ã€‚' : 'Data cleared.');\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* æ•°æ®æ¦‚è§ˆ */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-blue-600 font-medium\">\n                {locale === 'zh' ? 'ç–¼ç—›è®°å½•' : 'Pain Entries'}\n              </p>\n              <p className=\"text-2xl font-bold text-blue-700\">{painEntries.length}</p>\n            </div>\n            <BarChart3 className=\"w-8 h-8 text-blue-600\" />\n          </div>\n        </div>\n\n        <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-green-600 font-medium\">\n                {locale === 'zh' ? 'å¹³å‡ç–¼ç—›ç­‰çº§' : 'Average Pain Level'}\n              </p>\n              <p className=\"text-2xl font-bold text-green-700\">{averagePainLevel}/10</p>\n            </div>\n            <TrendingUp className=\"w-8 h-8 text-green-600\" />\n          </div>\n        </div>\n\n        <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-purple-600 font-medium\">\n                {locale === 'zh' ? 'ä½“è´¨æµ‹è¯•' : 'Constitution Tests'}\n              </p>\n              <p className=\"text-2xl font-bold text-purple-700\">{constitutionResults.length}</p>\n            </div>\n            <Activity className=\"w-8 h-8 text-purple-600\" />\n          </div>\n        </div>\n\n        <div className=\"bg-orange-50 p-4 rounded-lg border border-orange-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-orange-600 font-medium\">\n                {locale === 'zh' ? 'æœ€ååŒæ­¥' : 'Last Sync'}\n              </p>\n              <p className=\"text-sm font-medium text-orange-700\">\n                {lastSyncTime ? new Date(lastSyncTime).toLocaleDateString() : 'N/A'}\n              </p>\n            </div>\n            <Calendar className=\"w-8 h-8 text-orange-600\" />\n          </div>\n        </div>\n      </div>\n\n      {/* å¸¸è§ç—‡çŠ¶ */}\n      {mostCommonSymptoms.length > 0 && (\n        <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\n            <AlertCircle className=\"w-5 h-5 mr-2 text-red-500\" />\n            {locale === 'zh' ? 'æœ€å¸¸è§ç—‡çŠ¶' : 'Most Common Symptoms'}\n          </h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {mostCommonSymptoms.map((symptom, index) => (\n              <span \n                key={index}\n                className=\"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium\"\n              >\n                {symptom}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* ç–¼ç—›è¶‹åŠ¿ */}\n      {Object.keys(painTrends).length > 0 && (\n        <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\n            <TrendingUp className=\"w-5 h-5 mr-2 text-blue-500\" />\n            {locale === 'zh' ? 'ç–¼ç—›è¶‹åŠ¿' : 'Pain Trends'}\n          </h3>\n          <div className=\"space-y-2\">\n            {Object.entries(painTrends).slice(-7).map(([date, levels]) => {\n              const avgLevel = (levels as number[]).reduce((a, b) => a + b, 0) / (levels as number[]).length;\n              return (\n                <div key={date} className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">{date}</span>\n                  <div className=\"flex items-center\">\n                    <div className=\"w-32 bg-gray-200 rounded-full h-2 mr-2\">\n                      <div \n                        className=\"bg-blue-500 h-2 rounded-full\" \n                        style={{ width: `${(avgLevel / 10) * 100}%` }}\n                      ></div>\n                    </div>\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      {avgLevel.toFixed(1)}/10\n                    </span>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* æ•°æ®ç®¡ç† */}\n      <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\n          {locale === 'zh' ? 'æ•°æ®ç®¡ç†' : 'Data Management'}\n        </h3>\n        <div className=\"flex flex-wrap gap-4\">\n          <button\n            onClick={handleExportData}\n            className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <Download className=\"w-4 h-4 mr-2\" />\n            {locale === 'zh' ? 'å¯¼å‡ºæ•°æ®' : 'Export Data'}\n          </button>\n\n          <label className=\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors cursor-pointer\">\n            <Upload className=\"w-4 h-4 mr-2\" />\n            {locale === 'zh' ? 'å¯¼å…¥æ•°æ®' : 'Import Data'}\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleImportData}\n              className=\"hidden\"\n            />\n          </label>\n\n          <button\n            onClick={handleClearData}\n            className=\"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n          >\n            <Trash2 className=\"w-4 h-4 mr-2\" />\n            {locale === 'zh' ? 'æ¸…é™¤æ•°æ®' : 'Clear Data'}\n          </button>\n        </div>\n      </div>\n\n      {/* ç”¨æˆ·åå¥½ */}\n      <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\n          {locale === 'zh' ? 'ç”¨æˆ·åå¥½' : 'User Preferences'}\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n          <div>\n            <span className=\"font-medium text-gray-700\">\n              {locale === 'zh' ? 'è¯­è¨€ï¼š' : 'Language: '}\n            </span>\n            <span className=\"text-gray-600\">{preferences.language}</span>\n          </div>\n          <div>\n            <span className=\"font-medium text-gray-700\">\n              {locale === 'zh' ? 'ä¸»é¢˜ï¼š' : 'Theme: '}\n            </span>\n            <span className=\"text-gray-600\">{preferences.theme}</span>\n          </div>\n          <div>\n            <span className=\"font-medium text-gray-700\">\n              {locale === 'zh' ? 'ç–¼ç—›æé†’ï¼š' : 'Pain Reminders: '}\n            </span>\n            <span className=\"text-gray-600\">\n              {preferences.notifications.painReminders ? \n                (locale === 'zh' ? 'å¼€å¯' : 'On') : \n                (locale === 'zh' ? 'å…³é—­' : 'Off')\n              }\n            </span>\n          </div>\n          <div>\n            <span className=\"font-medium text-gray-700\">\n              {locale === 'zh' ? 'æ•°æ®åˆ†æï¼š' : 'Analytics: '}\n            </span>\n            <span className=\"text-gray-600\">\n              {preferences.privacy.analytics ? \n                (locale === 'zh' ? 'å¼€å¯' : 'On') : \n                (locale === 'zh' ? 'å…³é—­' : 'Off')\n              }\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/LoadingSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":180,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":180,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7609,7612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7609,7612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7638,7641],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7638,7641],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":310,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":310,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7824,7827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7824,7827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":323,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":323,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8157,8160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8157,8160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"import/no-anonymous-default-export","severity":1,"message":"Assign object to a variable before exporting as module default","line":358,"column":1,"nodeType":"ExportDefaultDeclaration","endLine":367,"endColumn":3}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Loader2, CheckCircle, AlertCircle, Clock } from 'lucide-react';\n\n// Loading Spinner Component\ninterface LoadingSpinnerProps {\n  size?: 'sm' | 'md' | 'lg';\n  color?: 'primary' | 'secondary' | 'white';\n  className?: string;\n}\n\nexport function LoadingSpinner({ size = 'md', color = 'primary', className = '' }: LoadingSpinnerProps) {\n  const sizeClasses = {\n    sm: 'h-4 w-4',\n    md: 'h-6 w-6',\n    lg: 'h-8 w-8'\n  };\n\n  const colorClasses = {\n    primary: 'text-blue-600',\n    secondary: 'text-gray-600',\n    white: 'text-white'\n  };\n\n  return (\n    <Loader2 \n      className={`animate-spin ${sizeClasses[size]} ${colorClasses[color]} ${className}`}\n      aria-label=\"Loading\"\n    />\n  );\n}\n\n// Loading Overlay Component\ninterface LoadingOverlayProps {\n  isVisible: boolean;\n  message?: string;\n  progress?: number;\n  onCancel?: () => void;\n  className?: string;\n}\n\nexport function LoadingOverlay({ \n  isVisible, \n  message = 'Loading...', \n  progress,\n  onCancel,\n  className = '' \n}: LoadingOverlayProps) {\n  if (!isVisible) return null;\n\n  return (\n    <div className={`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ${className}`}>\n      <div className=\"bg-white rounded-lg p-6 max-w-sm w-full mx-4 shadow-xl\">\n        <div className=\"flex flex-col items-center\">\n          <LoadingSpinner size=\"lg\" />\n          <p className=\"mt-4 text-gray-700 text-center\">{message}</p>\n          \n          {progress !== undefined && (\n            <div className=\"w-full mt-4\">\n              <div className=\"flex justify-between text-sm text-gray-600 mb-1\">\n                <span>Progress</span>\n                <span>{Math.round(progress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${progress}%` }}\n                />\n              </div>\n            </div>\n          )}\n          \n          {onCancel && (\n            <button\n              onClick={onCancel}\n              className=\"mt-4 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\n            >\n              Cancel\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Inline Loading State Component\ninterface InlineLoadingProps {\n  isLoading: boolean;\n  children: React.ReactNode;\n  loadingText?: string;\n  className?: string;\n}\n\nexport function InlineLoading({ \n  isLoading, \n  children, \n  loadingText = 'Loading...', \n  className = '' \n}: InlineLoadingProps) {\n  if (isLoading) {\n    return (\n      <div className={`flex items-center justify-center p-4 ${className}`}>\n        <LoadingSpinner size=\"sm\" className=\"mr-2\" />\n        <span className=\"text-gray-600\">{loadingText}</span>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}\n\n// Progress Bar Component\ninterface ProgressBarProps {\n  progress: number;\n  label?: string;\n  showPercentage?: boolean;\n  color?: 'blue' | 'green' | 'red' | 'yellow';\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nexport function ProgressBar({ \n  progress, \n  label, \n  showPercentage = true, \n  color = 'blue',\n  size = 'md',\n  className = '' \n}: ProgressBarProps) {\n  const colorClasses = {\n    blue: 'bg-blue-600',\n    green: 'bg-green-600',\n    red: 'bg-red-600',\n    yellow: 'bg-yellow-600'\n  };\n\n  const sizeClasses = {\n    sm: 'h-1',\n    md: 'h-2',\n    lg: 'h-3'\n  };\n\n  const clampedProgress = Math.max(0, Math.min(100, progress));\n\n  return (\n    <div className={className}>\n      {(label || showPercentage) && (\n        <div className=\"flex justify-between text-sm text-gray-600 mb-1\">\n          {label && <span>{label}</span>}\n          {showPercentage && <span>{Math.round(clampedProgress)}%</span>}\n        </div>\n      )}\n      <div className={`w-full bg-gray-200 rounded-full ${sizeClasses[size]}`}>\n        <div \n          className={`${colorClasses[color]} ${sizeClasses[size]} rounded-full transition-all duration-300`}\n          style={{ width: `${clampedProgress}%` }}\n        />\n      </div>\n    </div>\n  );\n}\n\n// Step Progress Component\ninterface Step {\n  id: string;\n  label: string;\n  status: 'pending' | 'active' | 'completed' | 'error';\n}\n\ninterface StepProgressProps {\n  steps: Step[];\n  className?: string;\n}\n\nexport function StepProgress({ steps, className = '' }: StepProgressProps) {\n  return (\n    <div className={`space-y-2 ${className}`}>\n      {steps.map((step, index) => (\n        <div key={step.id} className=\"flex items-center\">\n          <div className=\"flex items-center justify-center w-6 h-6 rounded-full mr-3 flex-shrink-0\">\n            {step.status === 'completed' && (\n              <CheckCircle className=\"w-5 h-5 text-green-600\" />\n            )}\n            {step.status === 'error' && (\n              <AlertCircle className=\"w-5 h-5 text-red-600\" />\n            )}\n            {step.status === 'active' && (\n              <LoadingSpinner size=\"sm\" />\n            )}\n            {step.status === 'pending' && (\n              <Clock className=\"w-5 h-5 text-gray-400\" />\n            )}\n          </div>\n          <span className={`text-sm ${\n            step.status === 'completed' ? 'text-green-700' :\n            step.status === 'error' ? 'text-red-700' :\n            step.status === 'active' ? 'text-blue-700' :\n            'text-gray-500'\n          }`}>\n            {step.label}\n          </span>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// Skeleton Loading Component\ninterface SkeletonProps {\n  width?: string | number;\n  height?: string | number;\n  className?: string;\n  variant?: 'text' | 'rectangular' | 'circular';\n}\n\nexport function Skeleton({ \n  width = '100%', \n  height = '1rem', \n  className = '', \n  variant = 'rectangular' \n}: SkeletonProps) {\n  const baseClasses = 'animate-pulse bg-gray-200';\n  \n  const variantClasses = {\n    text: 'rounded',\n    rectangular: 'rounded',\n    circular: 'rounded-full'\n  };\n\n  const style = {\n    width: typeof width === 'number' ? `${width}px` : width,\n    height: typeof height === 'number' ? `${height}px` : height\n  };\n\n  return (\n    <div \n      className={`${baseClasses} ${variantClasses[variant]} ${className}`}\n      style={style}\n    />\n  );\n}\n\n// Loading State Hook\nexport function useLoadingState(initialState = false) {\n  const [isLoading, setIsLoading] = useState(initialState);\n  const [progress, setProgress] = useState(0);\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState<string | null>(null);\n\n  const startLoading = (loadingMessage = 'Loading...') => {\n    setIsLoading(true);\n    setProgress(0);\n    setMessage(loadingMessage);\n    setError(null);\n  };\n\n  const updateProgress = (newProgress: number, newMessage?: string) => {\n    setProgress(Math.max(0, Math.min(100, newProgress)));\n    if (newMessage) {\n      setMessage(newMessage);\n    }\n  };\n\n  const finishLoading = () => {\n    setProgress(100);\n    setTimeout(() => {\n      setIsLoading(false);\n      setProgress(0);\n      setMessage('');\n    }, 500);\n  };\n\n  const setLoadingError = (errorMessage: string) => {\n    setError(errorMessage);\n    setIsLoading(false);\n  };\n\n  const reset = () => {\n    setIsLoading(false);\n    setProgress(0);\n    setMessage('');\n    setError(null);\n  };\n\n  return {\n    isLoading,\n    progress,\n    message,\n    error,\n    startLoading,\n    updateProgress,\n    finishLoading,\n    setLoadingError,\n    reset\n  };\n}\n\n// Async Operation Wrapper Component\ninterface AsyncOperationProps {\n  operation: () => Promise<any>;\n  onSuccess?: (result: any) => void;\n  onError?: (error: Error) => void;\n  loadingMessage?: string;\n  children: (state: {\n    execute: () => void;\n    isLoading: boolean;\n    error: string | null;\n    result: any;\n  }) => React.ReactNode;\n}\n\nexport function AsyncOperation({ \n  operation, \n  onSuccess, \n  onError, \n  loadingMessage = 'Processing...', \n  children \n}: AsyncOperationProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [result, setResult] = useState<any>(null);\n\n  const execute = async () => {\n    setIsLoading(true);\n    setError(null);\n    setResult(null);\n\n    try {\n      const operationResult = await operation();\n      setResult(operationResult);\n      if (onSuccess) {\n        onSuccess(operationResult);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'An error occurred';\n      setError(errorMessage);\n      if (onError) {\n        onError(err instanceof Error ? err : new Error(errorMessage));\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {children({ execute, isLoading, error, result })}\n      <LoadingOverlay \n        isVisible={isLoading} \n        message={loadingMessage}\n      />\n    </>\n  );\n}\n\nexport default {\n  LoadingSpinner,\n  LoadingOverlay,\n  InlineLoading,\n  ProgressBar,\n  StepProgress,\n  Skeleton,\n  useLoadingState,\n  AsyncOperation\n};","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/NotificationContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/NotificationSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Database' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RefreshCw' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":12},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'removeNotification'. Either include it or remove the dependency array.","line":100,"column":6,"nodeType":"ArrayExpression","endLine":100,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [defaultDuration, maxNotifications, removeNotification]","fix":{"range":[3198,3233],"text":"[defaultDuration, maxNotifications, removeNotification]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":431,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":431,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13030,13033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13030,13033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect, useCallback, createContext, useContext } from 'react';\nimport { \n  CheckCircle, \n  AlertTriangle, \n  AlertCircle, \n  Info, \n  X, \n  Wifi,\n  WifiOff,\n  Shield,\n  Database,\n  RefreshCw\n} from 'lucide-react';\n\nexport type NotificationType = 'success' | 'error' | 'warning' | 'info' | 'offline' | 'online' | 'data_issue';\n\nexport interface Notification {\n  id: string;\n  type: NotificationType;\n  title: string;\n  message: string;\n  duration?: number; // in milliseconds, 0 for persistent\n  actions?: NotificationAction[];\n  timestamp: Date;\n  persistent?: boolean;\n  priority?: 'low' | 'medium' | 'high';\n}\n\nexport interface NotificationAction {\n  label: string;\n  action: () => void;\n  style?: 'primary' | 'secondary' | 'danger';\n}\n\ninterface NotificationContextType {\n  notifications: Notification[];\n  addNotification: (notification: Omit<Notification, 'id' | 'timestamp'>) => string;\n  removeNotification: (id: string) => void;\n  clearAllNotifications: () => void;\n  addSuccessNotification: (title: string, message: string, actions?: NotificationAction[]) => string;\n  addErrorNotification: (title: string, message: string, actions?: NotificationAction[]) => string;\n  addWarningNotification: (title: string, message: string, actions?: NotificationAction[]) => string;\n  addInfoNotification: (title: string, message: string, actions?: NotificationAction[]) => string;\n  addOfflineNotification: (message?: string) => string;\n  addOnlineNotification: (message?: string) => string;\n  addDataIssueNotification: (title: string, message: string, actions?: NotificationAction[]) => string;\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\n\nexport function useNotifications() {\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n}\n\ninterface NotificationProviderProps {\n  children: React.ReactNode;\n  maxNotifications?: number;\n  defaultDuration?: number;\n}\n\nexport function NotificationProvider({ \n  children, \n  maxNotifications = 5,\n  defaultDuration = 5000 \n}: NotificationProviderProps) {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n\n  const addNotification = useCallback((notification: Omit<Notification, 'id' | 'timestamp'>) => {\n    const id = `notification_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newNotification: Notification = {\n      ...notification,\n      id,\n      timestamp: new Date(),\n      duration: notification.duration ?? defaultDuration\n    };\n\n    setNotifications(prev => {\n      const updated = [newNotification, ...prev];\n      // Remove oldest notifications if exceeding max\n      if (updated.length > maxNotifications) {\n        return updated.slice(0, maxNotifications);\n      }\n      return updated;\n    });\n\n    // Auto-remove notification after duration (if not persistent)\n    if (newNotification.duration && newNotification.duration > 0 && !newNotification.persistent) {\n      setTimeout(() => {\n        removeNotification(id);\n      }, newNotification.duration);\n    }\n\n    return id;\n  }, [defaultDuration, maxNotifications]);\n\n  const removeNotification = useCallback((id: string) => {\n    setNotifications(prev => prev.filter(notification => notification.id !== id));\n  }, []);\n\n  const clearAllNotifications = useCallback(() => {\n    setNotifications([]);\n  }, []);\n\n  const addSuccessNotification = useCallback((title: string, message: string, actions?: NotificationAction[]) => {\n    return addNotification({\n      type: 'success',\n      title,\n      message,\n      actions,\n      priority: 'medium'\n    });\n  }, [addNotification]);\n\n  const addErrorNotification = useCallback((title: string, message: string, actions?: NotificationAction[]) => {\n    return addNotification({\n      type: 'error',\n      title,\n      message,\n      actions,\n      persistent: true,\n      priority: 'high'\n    });\n  }, [addNotification]);\n\n  const addWarningNotification = useCallback((title: string, message: string, actions?: NotificationAction[]) => {\n    return addNotification({\n      type: 'warning',\n      title,\n      message,\n      actions,\n      duration: 8000,\n      priority: 'medium'\n    });\n  }, [addNotification]);\n\n  const addInfoNotification = useCallback((title: string, message: string, actions?: NotificationAction[]) => {\n    return addNotification({\n      type: 'info',\n      title,\n      message,\n      actions,\n      priority: 'low'\n    });\n  }, [addNotification]);\n\n  const addOfflineNotification = useCallback((message = 'You are currently offline. Data will be saved locally.') => {\n    return addNotification({\n      type: 'offline',\n      title: 'Offline Mode',\n      message,\n      persistent: true,\n      priority: 'high'\n    });\n  }, [addNotification]);\n\n  const addOnlineNotification = useCallback((message = 'Connection restored. Your data will be synced.') => {\n    return addNotification({\n      type: 'online',\n      title: 'Back Online',\n      message,\n      duration: 3000,\n      priority: 'medium'\n    });\n  }, [addNotification]);\n\n  const addDataIssueNotification = useCallback((title: string, message: string, actions?: NotificationAction[]) => {\n    return addNotification({\n      type: 'data_issue',\n      title,\n      message,\n      actions,\n      persistent: true,\n      priority: 'high'\n    });\n  }, [addNotification]);\n\n  const value: NotificationContextType = {\n    notifications,\n    addNotification,\n    removeNotification,\n    clearAllNotifications,\n    addSuccessNotification,\n    addErrorNotification,\n    addWarningNotification,\n    addInfoNotification,\n    addOfflineNotification,\n    addOnlineNotification,\n    addDataIssueNotification\n  };\n\n  return (\n    <NotificationContext.Provider value={value}>\n      {children}\n    </NotificationContext.Provider>\n  );\n}\n\n// Individual Notification Component\ninterface NotificationItemProps {\n  notification: Notification;\n  onRemove: (id: string) => void;\n}\n\nfunction NotificationItem({ notification, onRemove }: NotificationItemProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [isRemoving, setIsRemoving] = useState(false);\n\n  useEffect(() => {\n    // Animate in\n    const timer = setTimeout(() => setIsVisible(true), 10);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleRemove = () => {\n    setIsRemoving(true);\n    setTimeout(() => onRemove(notification.id), 300);\n  };\n\n  const getNotificationStyles = (type: NotificationType) => {\n    switch (type) {\n      case 'success':\n        return {\n          bg: 'bg-green-50',\n          border: 'border-green-200',\n          icon: CheckCircle,\n          iconColor: 'text-green-500',\n          titleColor: 'text-green-800',\n          messageColor: 'text-green-700'\n        };\n      case 'error':\n        return {\n          bg: 'bg-red-50',\n          border: 'border-red-200',\n          icon: AlertCircle,\n          iconColor: 'text-red-500',\n          titleColor: 'text-red-800',\n          messageColor: 'text-red-700'\n        };\n      case 'warning':\n        return {\n          bg: 'bg-yellow-50',\n          border: 'border-yellow-200',\n          icon: AlertTriangle,\n          iconColor: 'text-yellow-500',\n          titleColor: 'text-yellow-800',\n          messageColor: 'text-yellow-700'\n        };\n      case 'info':\n        return {\n          bg: 'bg-blue-50',\n          border: 'border-blue-200',\n          icon: Info,\n          iconColor: 'text-blue-500',\n          titleColor: 'text-blue-800',\n          messageColor: 'text-blue-700'\n        };\n      case 'offline':\n        return {\n          bg: 'bg-gray-50',\n          border: 'border-gray-200',\n          icon: WifiOff,\n          iconColor: 'text-gray-500',\n          titleColor: 'text-gray-800',\n          messageColor: 'text-gray-700'\n        };\n      case 'online':\n        return {\n          bg: 'bg-green-50',\n          border: 'border-green-200',\n          icon: Wifi,\n          iconColor: 'text-green-500',\n          titleColor: 'text-green-800',\n          messageColor: 'text-green-700'\n        };\n      case 'data_issue':\n        return {\n          bg: 'bg-purple-50',\n          border: 'border-purple-200',\n          icon: Shield,\n          iconColor: 'text-purple-500',\n          titleColor: 'text-purple-800',\n          messageColor: 'text-purple-700'\n        };\n      default:\n        return {\n          bg: 'bg-gray-50',\n          border: 'border-gray-200',\n          icon: Info,\n          iconColor: 'text-gray-500',\n          titleColor: 'text-gray-800',\n          messageColor: 'text-gray-700'\n        };\n    }\n  };\n\n  const styles = getNotificationStyles(notification.type);\n  const Icon = styles.icon;\n\n  return (\n    <div\n      className={`transform transition-all duration-300 ease-in-out ${\n        isVisible && !isRemoving\n          ? 'translate-x-0 opacity-100'\n          : 'translate-x-full opacity-0'\n      }`}\n    >\n      <div className={`${styles.bg} ${styles.border} border rounded-lg shadow-lg p-4 mb-3 max-w-sm`}>\n        <div className=\"flex items-start\">\n          <Icon className={`h-5 w-5 ${styles.iconColor} mt-0.5 mr-3 flex-shrink-0`} />\n          \n          <div className=\"flex-1 min-w-0\">\n            <h4 className={`text-sm font-medium ${styles.titleColor}`}>\n              {notification.title}\n            </h4>\n            <p className={`text-sm ${styles.messageColor} mt-1`}>\n              {notification.message}\n            </p>\n            \n            {notification.actions && notification.actions.length > 0 && (\n              <div className=\"mt-3 flex space-x-2\">\n                {notification.actions.map((action, index) => (\n                  <button\n                    key={index}\n                    onClick={action.action}\n                    className={`text-xs px-3 py-1 rounded transition-colors ${\n                      action.style === 'primary'\n                        ? 'bg-blue-600 text-white hover:bg-blue-700'\n                        : action.style === 'danger'\n                        ? 'bg-red-600 text-white hover:bg-red-700'\n                        : 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                    }`}\n                  >\n                    {action.label}\n                  </button>\n                ))}\n              </div>\n            )}\n            \n            <div className=\"mt-2 text-xs text-gray-500\">\n              {notification.timestamp.toLocaleTimeString()}\n            </div>\n          </div>\n          \n          <button\n            onClick={handleRemove}\n            className=\"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Notification Container Component\ninterface NotificationContainerProps {\n  position?: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' | 'top-center' | 'bottom-center';\n  className?: string;\n}\n\nexport function NotificationContainer({ \n  position = 'top-right', \n  className = '' \n}: NotificationContainerProps) {\n  const { notifications, removeNotification } = useNotifications();\n\n  const getPositionClasses = (pos: string) => {\n    switch (pos) {\n      case 'top-right':\n        return 'fixed top-4 right-4 z-50';\n      case 'top-left':\n        return 'fixed top-4 left-4 z-50';\n      case 'bottom-right':\n        return 'fixed bottom-4 right-4 z-50';\n      case 'bottom-left':\n        return 'fixed bottom-4 left-4 z-50';\n      case 'top-center':\n        return 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50';\n      case 'bottom-center':\n        return 'fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50';\n      default:\n        return 'fixed top-4 right-4 z-50';\n    }\n  };\n\n  if (notifications.length === 0) return null;\n\n  return (\n    <div className={`${getPositionClasses(position)} ${className}`}>\n      {notifications.map(notification => (\n        <NotificationItem\n          key={notification.id}\n          notification={notification}\n          onRemove={removeNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Toast Hook for quick notifications\nexport function useToast() {\n  const { \n    addSuccessNotification, \n    addErrorNotification, \n    addWarningNotification, \n    addInfoNotification \n  } = useNotifications();\n\n  const toast = {\n    success: (message: string, title = 'Success') => addSuccessNotification(title, message),\n    error: (message: string, title = 'Error') => addErrorNotification(title, message),\n    warning: (message: string, title = 'Warning') => addWarningNotification(title, message),\n    info: (message: string, title = 'Info') => addInfoNotification(title, message)\n  };\n\n  return toast;\n}\n\n// Recovery Notification Hook\nexport function useRecoveryNotifications() {\n  const { addDataIssueNotification, addWarningNotification, addErrorNotification } = useNotifications();\n\n  const notifyDataCorruption = (corruptionLevel: string, recoveryOptions: any[]) => {\n    const actions = recoveryOptions.slice(0, 2).map(option => ({\n      label: option.type === 'repair' ? 'Repair' : option.type === 'restore' ? 'Restore' : 'Fix',\n      action: option.action,\n      style: option.riskLevel === 'low' ? 'primary' : 'secondary'\n    })) as NotificationAction[];\n\n    return addDataIssueNotification(\n      'Data Integrity Issue',\n      `${corruptionLevel} corruption detected in your pain tracking data.`,\n      actions\n    );\n  };\n\n  const notifyStorageQuotaExceeded = (onExport: () => void, onCleanup: () => void) => {\n    return addWarningNotification(\n      'Storage Almost Full',\n      'Your browser storage is nearly full. Consider exporting old data.',\n      [\n        { label: 'Export Data', action: onExport, style: 'primary' },\n        { label: 'Cleanup', action: onCleanup, style: 'secondary' }\n      ]\n    );\n  };\n\n  const notifyBackupRecommended = (onBackup: () => void) => {\n    return addWarningNotification(\n      'Backup Recommended',\n      'It\\'s been a while since your last backup. Consider creating one now.',\n      [\n        { label: 'Create Backup', action: onBackup, style: 'primary' }\n      ]\n    );\n  };\n\n  const notifyRecoverySuccess = (recoveredCount: number) => {\n    return addDataIssueNotification(\n      'Recovery Complete',\n      `Successfully recovered ${recoveredCount} records from corrupted data.`,\n      []\n    );\n  };\n\n  const notifyRecoveryFailed = (onRetry: () => void, onSupport: () => void) => {\n    return addErrorNotification(\n      'Recovery Failed',\n      'Unable to recover your data automatically. Manual intervention may be required.',\n      [\n        { label: 'Retry', action: onRetry, style: 'primary' },\n        { label: 'Get Help', action: onSupport, style: 'secondary' }\n      ]\n    );\n  };\n\n  return {\n    notifyDataCorruption,\n    notifyStorageQuotaExceeded,\n    notifyBackupRecommended,\n    notifyRecoverySuccess,\n    notifyRecoveryFailed\n  };\n}\n\nexport default NotificationContainer;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/OfflineNotification.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'offlineData' is assigned a value but never used.","line":52,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":22},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":109,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3327,3373],"text":"\n                You&apos;re offline\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3327,3373],"text":"\n                You&lsquo;re offline\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3327,3373],"text":"\n                You&#39;re offline\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3327,3373],"text":"\n                You&rsquo;re offline\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":238,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7944,7947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7944,7947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { WifiOff, Wifi, AlertTriangle, CheckCircle, Clock, RefreshCw } from 'lucide-react';\nimport { useOfflineDetection, useOfflineStorage } from '../hooks/useOfflineDetection';\n\ninterface OfflineNotificationProps {\n  storageKey?: string;\n  showConnectionQuality?: boolean;\n  autoHide?: boolean;\n  autoHideDelay?: number;\n  className?: string;\n}\n\nexport function OfflineNotification({ \n  storageKey = 'pain_tracker',\n  showConnectionQuality = true,\n  autoHide = true,\n  autoHideDelay = 5000,\n  className = ''\n}: OfflineNotificationProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [showReconnected, setShowReconnected] = useState(false);\n  const [reconnectDuration, setReconnectDuration] = useState(0);\n\n  const { \n    isOnline, \n    isOffline, \n    wasOffline, \n    checkConnectivity, \n    getConnectionQuality,\n    connectionInfo \n  } = useOfflineDetection({\n    onOffline: () => {\n      setIsVisible(true);\n      setShowReconnected(false);\n    },\n    onReconnect: (duration) => {\n      setReconnectDuration(duration);\n      setShowReconnected(true);\n      setIsVisible(true);\n      \n      if (autoHide) {\n        setTimeout(() => {\n          setIsVisible(false);\n          setShowReconnected(false);\n        }, autoHideDelay);\n      }\n    }\n  });\n\n  const { offlineData, getOfflineDataCount } = useOfflineStorage(storageKey);\n\n  // Hide notification when coming back online (after showing reconnected message)\n  useEffect(() => {\n    if (isOnline && !showReconnected && wasOffline) {\n      if (autoHide) {\n        setTimeout(() => {\n          setIsVisible(false);\n        }, autoHideDelay);\n      }\n    }\n  }, [isOnline, showReconnected, wasOffline, autoHide, autoHideDelay]);\n\n  const formatDuration = (milliseconds: number): string => {\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n\n    if (hours > 0) {\n      return `${hours}h ${minutes % 60}m`;\n    } else if (minutes > 0) {\n      return `${minutes}m ${seconds % 60}s`;\n    } else {\n      return `${seconds}s`;\n    }\n  };\n\n  const getConnectionQualityColor = (quality: string): string => {\n    switch (quality) {\n      case 'excellent': return 'text-green-600';\n      case 'good': return 'text-blue-600';\n      case 'fair': return 'text-yellow-600';\n      case 'poor': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const getConnectionQualityIcon = (quality: string) => {\n    switch (quality) {\n      case 'excellent': return <CheckCircle className=\"h-4 w-4\" />;\n      case 'good': return <Wifi className=\"h-4 w-4\" />;\n      case 'fair': return <AlertTriangle className=\"h-4 w-4\" />;\n      case 'poor': return <WifiOff className=\"h-4 w-4\" />;\n      default: return <Clock className=\"h-4 w-4\" />;\n    }\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className={`fixed top-4 right-4 z-50 max-w-sm ${className}`}>\n      {isOffline && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg\">\n          <div className=\"flex items-start\">\n            <WifiOff className=\"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0\" />\n            <div className=\"flex-1\">\n              <h3 className=\"text-sm font-medium text-red-800\">\n                You're offline\n              </h3>\n              <p className=\"text-sm text-red-700 mt-1\">\n                Your data will be saved locally and synced when you reconnect.\n              </p>\n              \n              {getOfflineDataCount() > 0 && (\n                <p className=\"text-xs text-red-600 mt-2\">\n                  {getOfflineDataCount()} items stored offline\n                </p>\n              )}\n              \n              <div className=\"mt-3 flex items-center space-x-2\">\n                <button\n                  onClick={checkConnectivity}\n                  className=\"flex items-center text-xs text-red-600 hover:text-red-800 transition-colors\"\n                >\n                  <RefreshCw className=\"h-3 w-3 mr-1\" />\n                  Check connection\n                </button>\n                \n                <button\n                  onClick={() => setIsVisible(false)}\n                  className=\"text-xs text-red-600 hover:text-red-800 transition-colors\"\n                >\n                  Dismiss\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showReconnected && isOnline && (\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg\">\n          <div className=\"flex items-start\">\n            <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0\" />\n            <div className=\"flex-1\">\n              <h3 className=\"text-sm font-medium text-green-800\">\n                Back online!\n              </h3>\n              <p className=\"text-sm text-green-700 mt-1\">\n                Connection restored after {formatDuration(reconnectDuration)}.\n              </p>\n              \n              {getOfflineDataCount() > 0 && (\n                <p className=\"text-xs text-green-600 mt-2\">\n                  {getOfflineDataCount()} offline items ready to sync\n                </p>\n              )}\n              \n              {showConnectionQuality && connectionInfo && (\n                <div className=\"mt-2 flex items-center text-xs\">\n                  <span className=\"text-green-700 mr-2\">Connection:</span>\n                  <div className={`flex items-center ${getConnectionQualityColor(getConnectionQuality())}`}>\n                    {getConnectionQualityIcon(getConnectionQuality())}\n                    <span className=\"ml-1 capitalize\">{getConnectionQuality()}</span>\n                    {connectionInfo.effectiveType && (\n                      <span className=\"ml-1\">({connectionInfo.effectiveType})</span>\n                    )}\n                  </div>\n                </div>\n              )}\n              \n              <button\n                onClick={() => {\n                  setIsVisible(false);\n                  setShowReconnected(false);\n                }}\n                className=\"mt-2 text-xs text-green-600 hover:text-green-800 transition-colors\"\n              >\n                Dismiss\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Connection Status Indicator Component\ninterface ConnectionStatusProps {\n  showDetails?: boolean;\n  className?: string;\n}\n\nexport function ConnectionStatus({ showDetails = false, className = '' }: ConnectionStatusProps) {\n  const { isOnline, getConnectionQuality, connectionInfo } = useOfflineDetection();\n  const quality = getConnectionQuality();\n\n  const getConnectionQualityColor = (quality: string): string => {\n    switch (quality) {\n      case 'excellent': return 'text-green-600';\n      case 'good': return 'text-blue-600';\n      case 'fair': return 'text-yellow-600';\n      case 'poor': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  return (\n    <div className={`flex items-center ${className}`}>\n      <div className={`flex items-center ${isOnline ? 'text-green-600' : 'text-red-600'}`}>\n        {isOnline ? (\n          <Wifi className=\"h-4 w-4\" />\n        ) : (\n          <WifiOff className=\"h-4 w-4\" />\n        )}\n        <span className=\"ml-1 text-sm\">\n          {isOnline ? 'Online' : 'Offline'}\n        </span>\n      </div>\n      \n      {showDetails && isOnline && connectionInfo && (\n        <div className={`ml-3 text-xs ${getConnectionQualityColor(quality)}`}>\n          <span className=\"capitalize\">{quality}</span>\n          {connectionInfo.effectiveType && (\n            <span className=\"ml-1\">({connectionInfo.effectiveType})</span>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Offline Data Sync Component\ninterface OfflineDataSyncProps {\n  storageKey: string;\n  onSync?: (data: any[]) => Promise<boolean>;\n  className?: string;\n}\n\nexport function OfflineDataSync({ storageKey, onSync, className = '' }: OfflineDataSyncProps) {\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [syncError, setSyncError] = useState<string | null>(null);\n  const [lastSyncTime, setLastSyncTime] = useState<Date | null>(null);\n\n  const { isOnline } = useOfflineDetection();\n  const { offlineData, clearOfflineData, getOfflineDataCount } = useOfflineStorage(storageKey);\n\n  const handleSync = async () => {\n    if (!onSync || !isOnline || getOfflineDataCount() === 0) return;\n\n    setIsSyncing(true);\n    setSyncError(null);\n\n    try {\n      const success = await onSync(offlineData);\n      if (success) {\n        clearOfflineData();\n        setLastSyncTime(new Date());\n      } else {\n        setSyncError('Sync failed. Please try again.');\n      }\n    } catch (error) {\n      setSyncError(error instanceof Error ? error.message : 'Sync failed');\n    } finally {\n      setIsSyncing(false);\n    }\n  };\n\n  if (getOfflineDataCount() === 0) return null;\n\n  return (\n    <div className={`bg-blue-50 border border-blue-200 rounded-lg p-3 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <Clock className=\"h-4 w-4 text-blue-500 mr-2\" />\n          <span className=\"text-sm text-blue-800\">\n            {getOfflineDataCount()} items pending sync\n          </span>\n        </div>\n        \n        {isOnline && (\n          <button\n            onClick={handleSync}\n            disabled={isSyncing}\n            className=\"flex items-center text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50 transition-colors\"\n          >\n            <RefreshCw className={`h-3 w-3 mr-1 ${isSyncing ? 'animate-spin' : ''}`} />\n            {isSyncing ? 'Syncing...' : 'Sync now'}\n          </button>\n        )}\n      </div>\n      \n      {syncError && (\n        <p className=\"text-xs text-red-600 mt-2\">{syncError}</p>\n      )}\n      \n      {lastSyncTime && (\n        <p className=\"text-xs text-blue-600 mt-1\">\n          Last synced: {lastSyncTime.toLocaleTimeString()}\n        </p>\n      )}\n    </div>\n  );\n}\n\nexport default OfflineNotification;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/ResponsiveContainer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2666,2669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2666,2669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { ReactNode, useEffect, useState } from 'react';\n\ninterface ResponsiveContainerProps {\n  children: ReactNode;\n  className?: string;\n  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | '2xl' | 'full';\n  padding?: 'none' | 'sm' | 'md' | 'lg' | 'xl';\n  centerContent?: boolean;\n  role?: string;\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  id?: string;\n}\n\ninterface BreakpointInfo {\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  isLargeDesktop: boolean;\n  width: number;\n  height: number;\n}\n\nexport function ResponsiveContainer({\n  children,\n  className = '',\n  maxWidth = 'full',\n  padding = 'md',\n  centerContent = false,\n  role,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledBy,\n  id\n}: ResponsiveContainerProps) {\n  const [breakpoint, setBreakpoint] = useState<BreakpointInfo>({\n    isMobile: false,\n    isTablet: false,\n    isDesktop: false,\n    isLargeDesktop: false,\n    width: 0,\n    height: 0\n  });\n\n  useEffect(() => {\n    const updateBreakpoint = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      \n      setBreakpoint({\n        isMobile: width < 768,\n        isTablet: width >= 768 && width < 1024,\n        isDesktop: width >= 1024 && width < 1280,\n        isLargeDesktop: width >= 1280,\n        width,\n        height\n      });\n    };\n\n    updateBreakpoint();\n    window.addEventListener('resize', updateBreakpoint);\n    \n    return () => window.removeEventListener('resize', updateBreakpoint);\n  }, []);\n\n  const getMaxWidthClass = () => {\n    switch (maxWidth) {\n      case 'sm': return 'max-w-sm';\n      case 'md': return 'max-w-md';\n      case 'lg': return 'max-w-lg';\n      case 'xl': return 'max-w-xl';\n      case '2xl': return 'max-w-2xl';\n      case 'full': return 'max-w-full';\n      default: return 'max-w-full';\n    }\n  };\n\n  const getPaddingClass = () => {\n    switch (padding) {\n      case 'none': return '';\n      case 'sm': return 'p-2 sm:p-3';\n      case 'md': return 'p-4 sm:p-6';\n      case 'lg': return 'p-6 sm:p-8';\n      case 'xl': return 'p-8 sm:p-12';\n      default: return 'p-4 sm:p-6';\n    }\n  };\n\n  const containerClasses = [\n    'w-full',\n    getMaxWidthClass(),\n    getPaddingClass(),\n    centerContent ? 'mx-auto' : '',\n    className\n  ].filter(Boolean).join(' ');\n\n  return (\n    <div\n      className={containerClasses}\n      role={role}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      id={id}\n      data-breakpoint={breakpoint.isMobile ? 'mobile' : breakpoint.isTablet ? 'tablet' : breakpoint.isDesktop ? 'desktop' : 'large-desktop'}\n    >\n      {typeof children === 'function' ? (children as any)(breakpoint) : children}\n    </div>\n  );\n}\n\n// Hook for responsive behavior\nexport function useResponsive() {\n  const [breakpoint, setBreakpoint] = useState<BreakpointInfo>({\n    isMobile: false,\n    isTablet: false,\n    isDesktop: false,\n    isLargeDesktop: false,\n    width: 0,\n    height: 0\n  });\n\n  useEffect(() => {\n    const updateBreakpoint = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      \n      setBreakpoint({\n        isMobile: width < 768,\n        isTablet: width >= 768 && width < 1024,\n        isDesktop: width >= 1024 && width < 1280,\n        isLargeDesktop: width >= 1280,\n        width,\n        height\n      });\n    };\n\n    updateBreakpoint();\n    window.addEventListener('resize', updateBreakpoint);\n    \n    return () => window.removeEventListener('resize', updateBreakpoint);\n  }, []);\n\n  return breakpoint;\n}\n\n// Responsive Grid Component\ninterface ResponsiveGridProps {\n  children: ReactNode;\n  columns?: {\n    mobile?: number;\n    tablet?: number;\n    desktop?: number;\n    largeDesktop?: number;\n  };\n  gap?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n  role?: string;\n  'aria-label'?: string;\n}\n\nexport function ResponsiveGrid({\n  children,\n  columns = { mobile: 1, tablet: 2, desktop: 3, largeDesktop: 4 },\n  gap = 'md',\n  className = '',\n  role,\n  'aria-label': ariaLabel\n}: ResponsiveGridProps) {\n  const getGridClasses = () => {\n    const { mobile = 1, tablet = 2, desktop = 3, largeDesktop = 4 } = columns;\n    \n    const gridCols = [\n      `grid-cols-${mobile}`,\n      `sm:grid-cols-${tablet}`,\n      `md:grid-cols-${desktop}`,\n      `lg:grid-cols-${largeDesktop}`\n    ].join(' ');\n\n    const gapClass = {\n      sm: 'gap-2',\n      md: 'gap-4',\n      lg: 'gap-6',\n      xl: 'gap-8'\n    }[gap];\n\n    return `grid ${gridCols} ${gapClass}`;\n  };\n\n  return (\n    <div\n      className={`${getGridClasses()} ${className}`}\n      role={role}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Responsive Text Component\ninterface ResponsiveTextProps {\n  children: ReactNode;\n  as?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | 'p' | 'span' | 'div';\n  size?: {\n    mobile?: 'xs' | 'sm' | 'base' | 'lg' | 'xl' | '2xl' | '3xl';\n    tablet?: 'xs' | 'sm' | 'base' | 'lg' | 'xl' | '2xl' | '3xl';\n    desktop?: 'xs' | 'sm' | 'base' | 'lg' | 'xl' | '2xl' | '3xl';\n  };\n  weight?: 'normal' | 'medium' | 'semibold' | 'bold';\n  color?: string;\n  className?: string;\n  id?: string;\n  role?: string;\n  'aria-level'?: number;\n}\n\nexport function ResponsiveText({\n  children,\n  as: Component = 'p',\n  size = { mobile: 'base', tablet: 'base', desktop: 'base' },\n  weight = 'normal',\n  color = 'text-gray-900',\n  className = '',\n  id,\n  role,\n  'aria-level': ariaLevel\n}: ResponsiveTextProps) {\n  const getSizeClasses = () => {\n    const { mobile = 'base', tablet = 'base', desktop = 'base' } = size;\n    \n    const sizeMap = {\n      xs: 'text-xs',\n      sm: 'text-sm',\n      base: 'text-base',\n      lg: 'text-lg',\n      xl: 'text-xl',\n      '2xl': 'text-2xl',\n      '3xl': 'text-3xl'\n    };\n\n    return [\n      sizeMap[mobile],\n      `sm:${sizeMap[tablet]}`,\n      `md:${sizeMap[desktop]}`\n    ].join(' ');\n  };\n\n  const getWeightClass = () => {\n    const weightMap = {\n      normal: 'font-normal',\n      medium: 'font-medium',\n      semibold: 'font-semibold',\n      bold: 'font-bold'\n    };\n    return weightMap[weight];\n  };\n\n  const textClasses = [\n    getSizeClasses(),\n    getWeightClass(),\n    color,\n    'leading-relaxed',\n    className\n  ].filter(Boolean).join(' ');\n\n  return (\n    <Component\n      className={textClasses}\n      id={id}\n      role={role}\n      aria-level={ariaLevel}\n    >\n      {children}\n    </Component>\n  );\n}\n\n// Responsive Button Component\ninterface ResponsiveButtonProps {\n  children: ReactNode;\n  onClick?: () => void;\n  type?: 'button' | 'submit' | 'reset';\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  size?: {\n    mobile?: 'sm' | 'md' | 'lg';\n    desktop?: 'sm' | 'md' | 'lg';\n  };\n  disabled?: boolean;\n  loading?: boolean;\n  fullWidth?: boolean;\n  className?: string;\n  'aria-label'?: string;\n  'aria-describedby'?: string;\n  id?: string;\n}\n\nexport function ResponsiveButton({\n  children,\n  onClick,\n  type = 'button',\n  variant = 'primary',\n  size = { mobile: 'md', desktop: 'md' },\n  disabled = false,\n  loading = false,\n  fullWidth = false,\n  className = '',\n  'aria-label': ariaLabel,\n  'aria-describedby': ariaDescribedBy,\n  id\n}: ResponsiveButtonProps) {\n  const getVariantClasses = () => {\n    const variants = {\n      primary: 'bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-700 hover:to-purple-700 focus:ring-pink-500',\n      secondary: 'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500',\n      outline: 'border-2 border-pink-600 text-pink-600 hover:bg-pink-50 focus:ring-pink-500',\n      ghost: 'text-pink-600 hover:bg-pink-50 focus:ring-pink-500'\n    };\n    return variants[variant];\n  };\n\n  const getSizeClasses = () => {\n    const { mobile = 'md', desktop = 'md' } = size;\n    \n    const sizeMap = {\n      sm: 'px-3 py-2 text-sm',\n      md: 'px-4 py-3 text-base',\n      lg: 'px-6 py-4 text-lg'\n    };\n\n    return [\n      sizeMap[mobile],\n      `sm:${sizeMap[desktop]}`\n    ].join(' ');\n  };\n\n  const buttonClasses = [\n    'inline-flex items-center justify-center',\n    'font-medium rounded-lg',\n    'transition-all duration-200',\n    'focus:outline-none focus:ring-2 focus:ring-offset-2',\n    'disabled:opacity-50 disabled:cursor-not-allowed',\n    'min-h-[44px] min-w-[44px]', // Accessibility: minimum touch target\n    getVariantClasses(),\n    getSizeClasses(),\n    fullWidth ? 'w-full' : '',\n    className\n  ].filter(Boolean).join(' ');\n\n  return (\n    <button\n      type={type}\n      onClick={onClick}\n      disabled={disabled || loading}\n      className={buttonClasses}\n      aria-label={ariaLabel}\n      aria-describedby={ariaDescribedBy}\n      aria-disabled={disabled || loading}\n      id={id}\n    >\n      {loading && (\n        <svg\n          className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          aria-hidden=\"true\"\n        >\n          <circle\n            className=\"opacity-25\"\n            cx=\"12\"\n            cy=\"12\"\n            r=\"10\"\n            stroke=\"currentColor\"\n            strokeWidth=\"4\"\n          />\n          <path\n            className=\"opacity-75\"\n            fill=\"currentColor\"\n            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n          />\n        </svg>\n      )}\n      {children}\n    </button>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/components/__tests__/ErrorHandling.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'addErrorNotification' is assigned a value but never used.","line":41,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @jest-environment jsdom\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport { ErrorBoundary } from '../ErrorBoundary';\nimport { NotificationProvider, useNotifications } from '../NotificationSystem';\nimport { useErrorHandling } from '../../hooks/useErrorHandling';\nimport { PainTrackerError } from '../../../../../../types/pain-tracker';\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock\n});\n\n// Mock navigator.onLine\nObject.defineProperty(navigator, 'onLine', {\n  writable: true,\n  value: true\n});\n\n// Test component that throws an error\nconst ErrorThrowingComponent = ({ shouldThrow }: { shouldThrow: boolean }) => {\n  if (shouldThrow) {\n    throw new Error('Test error');\n  }\n  return <div>No error</div>;\n};\n\n// Test component that uses error handling hook\nconst ErrorHandlingTestComponent = () => {\n  const { handleError, errorState, clearError } = useErrorHandling();\n  const { addErrorNotification } = useNotifications();\n\n  const triggerStorageError = () => {\n    handleError(\n      new PainTrackerError('Storage failed', 'STORAGE_ERROR'),\n      'test storage operation'\n    );\n  };\n\n  const triggerValidationError = () => {\n    handleError(\n      new PainTrackerError('Invalid data', 'VALIDATION_ERROR'),\n      'test validation'\n    );\n  };\n\n  const triggerGenericError = () => {\n    handleError(new Error('Generic error'), 'test operation');\n  };\n\n  return (\n    <div>\n      <div data-testid=\"error-state\">\n        {errorState.hasError ? 'Has Error' : 'No Error'}\n      </div>\n      <div data-testid=\"error-message\">\n        {errorState.error?.message || 'No message'}\n      </div>\n      <div data-testid=\"error-code\">\n        {errorState.errorCode || 'No code'}\n      </div>\n      <button onClick={triggerStorageError} data-testid=\"storage-error-btn\">\n        Trigger Storage Error\n      </button>\n      <button onClick={triggerValidationError} data-testid=\"validation-error-btn\">\n        Trigger Validation Error\n      </button>\n      <button onClick={triggerGenericError} data-testid=\"generic-error-btn\">\n        Trigger Generic Error\n      </button>\n      <button onClick={clearError} data-testid=\"clear-error-btn\">\n        Clear Error\n      </button>\n    </div>\n  );\n};\n\ndescribe('Error Handling System', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    localStorageMock.getItem.mockReturnValue(null);\n  });\n\n  describe('ErrorBoundary', () => {\n    it('should catch and display errors', () => {\n      const onError = jest.fn();\n      \n      render(\n        <ErrorBoundary onError={onError}>\n          <ErrorThrowingComponent shouldThrow={true} />\n        </ErrorBoundary>\n      );\n\n      expect(screen.getByText('Unexpected Error')).toBeInTheDocument();\n      expect(screen.getByText(/An unexpected error occurred/)).toBeInTheDocument();\n      expect(onError).toHaveBeenCalled();\n    });\n\n    it('should render children when no error occurs', () => {\n      render(\n        <ErrorBoundary>\n          <ErrorThrowingComponent shouldThrow={false} />\n        </ErrorBoundary>\n      );\n\n      expect(screen.getByText('No error')).toBeInTheDocument();\n    });\n\n    it('should provide retry functionality', () => {\n      const onError = jest.fn();\n      \n      render(\n        <ErrorBoundary onError={onError}>\n          <ErrorThrowingComponent shouldThrow={true} />\n        </ErrorBoundary>\n      );\n\n      const retryButton = screen.getByText(/Retry/);\n      expect(retryButton).toBeInTheDocument();\n      \n      fireEvent.click(retryButton);\n      // After retry, the error should be cleared and component should re-render\n    });\n\n    it('should show recovery suggestions for different error types', () => {\n      render(\n        <ErrorBoundary>\n          <ErrorThrowingComponent shouldThrow={true} />\n        </ErrorBoundary>\n      );\n\n      expect(screen.getByText('Suggested Solutions:')).toBeInTheDocument();\n      expect(screen.getByText(/Try refreshing the page/)).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling Hook', () => {\n    it('should handle storage errors correctly', async () => {\n      render(\n        <NotificationProvider>\n          <ErrorHandlingTestComponent />\n        </NotificationProvider>\n      );\n\n      const storageErrorBtn = screen.getByTestId('storage-error-btn');\n      fireEvent.click(storageErrorBtn);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-state')).toHaveTextContent('Has Error');\n        expect(screen.getByTestId('error-message')).toHaveTextContent('Storage failed');\n        expect(screen.getByTestId('error-code')).toHaveTextContent('STORAGE_ERROR');\n      });\n    });\n\n    it('should handle validation errors correctly', async () => {\n      render(\n        <NotificationProvider>\n          <ErrorHandlingTestComponent />\n        </NotificationProvider>\n      );\n\n      const validationErrorBtn = screen.getByTestId('validation-error-btn');\n      fireEvent.click(validationErrorBtn);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-state')).toHaveTextContent('Has Error');\n        expect(screen.getByTestId('error-message')).toHaveTextContent('Invalid data');\n        expect(screen.getByTestId('error-code')).toHaveTextContent('VALIDATION_ERROR');\n      });\n    });\n\n    it('should handle generic errors correctly', async () => {\n      render(\n        <NotificationProvider>\n          <ErrorHandlingTestComponent />\n        </NotificationProvider>\n      );\n\n      const genericErrorBtn = screen.getByTestId('generic-error-btn');\n      fireEvent.click(genericErrorBtn);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-state')).toHaveTextContent('Has Error');\n        expect(screen.getByTestId('error-message')).toHaveTextContent('Generic error');\n        expect(screen.getByTestId('error-code')).toHaveTextContent('No code');\n      });\n    });\n\n    it('should clear errors correctly', async () => {\n      render(\n        <NotificationProvider>\n          <ErrorHandlingTestComponent />\n        </NotificationProvider>\n      );\n\n      // First trigger an error\n      const storageErrorBtn = screen.getByTestId('storage-error-btn');\n      fireEvent.click(storageErrorBtn);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-state')).toHaveTextContent('Has Error');\n      });\n\n      // Then clear it\n      const clearErrorBtn = screen.getByTestId('clear-error-btn');\n      fireEvent.click(clearErrorBtn);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-state')).toHaveTextContent('No Error');\n        expect(screen.getByTestId('error-message')).toHaveTextContent('No message');\n        expect(screen.getByTestId('error-code')).toHaveTextContent('No code');\n      });\n    });\n  });\n\n  describe('Notification System', () => {\n    it('should display notifications correctly', () => {\n      const TestComponent = () => {\n        const { addErrorNotification, addSuccessNotification } = useNotifications();\n        \n        return (\n          <div>\n            <button \n              onClick={() => addErrorNotification('Error Title', 'Error message')}\n              data-testid=\"add-error-btn\"\n            >\n              Add Error\n            </button>\n            <button \n              onClick={() => addSuccessNotification('Success Title', 'Success message')}\n              data-testid=\"add-success-btn\"\n            >\n              Add Success\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <NotificationProvider>\n          <TestComponent />\n        </NotificationProvider>\n      );\n\n      const addErrorBtn = screen.getByTestId('add-error-btn');\n      fireEvent.click(addErrorBtn);\n\n      expect(screen.getByText('Error Title')).toBeInTheDocument();\n      expect(screen.getByText('Error message')).toBeInTheDocument();\n\n      const addSuccessBtn = screen.getByTestId('add-success-btn');\n      fireEvent.click(addSuccessBtn);\n\n      expect(screen.getByText('Success Title')).toBeInTheDocument();\n      expect(screen.getByText('Success message')).toBeInTheDocument();\n    });\n  });\n\n  describe('Data Integrity', () => {\n    it('should detect corrupted data', () => {\n      // Mock corrupted data in localStorage\n      localStorageMock.getItem.mockImplementation((key) => {\n        if (key === 'enhanced_pain_tracker_records') {\n          return 'invalid json';\n        }\n        return null;\n      });\n\n      // This would be tested with the DataIntegrityService\n      // For now, we just verify the mock is working\n      expect(localStorage.getItem('enhanced_pain_tracker_records')).toBe('invalid json');\n    });\n\n    it('should handle quota exceeded errors', () => {\n      // Mock quota exceeded error\n      localStorageMock.setItem.mockImplementation(() => {\n        const error = new Error('QuotaExceededError');\n        error.name = 'QuotaExceededError';\n        throw error;\n      });\n\n      expect(() => {\n        localStorage.setItem('test', 'data');\n      }).toThrow('QuotaExceededError');\n    });\n  });\n\n  describe('Offline Handling', () => {\n    it('should detect offline state', () => {\n      // Mock offline state\n      Object.defineProperty(navigator, 'onLine', {\n        writable: true,\n        value: false\n      });\n\n      expect(navigator.onLine).toBe(false);\n    });\n\n    it('should detect online state', () => {\n      // Mock online state\n      Object.defineProperty(navigator, 'onLine', {\n        writable: true,\n        value: true\n      });\n\n      expect(navigator.onLine).toBe(true);\n    });\n  });\n});\n\ndescribe('Integration Tests', () => {\n  it('should handle complete error recovery flow', async () => {\n    const TestApp = () => {\n      const { handleError, errorState, clearError } = useErrorHandling({\n        enableAutoRecovery: true,\n        maxRetries: 2\n      });\n\n      const triggerRecoverableError = () => {\n        handleError(\n          new PainTrackerError('Recoverable error', 'CHART_ERROR'),\n          'chart rendering'\n        );\n      };\n\n      return (\n        <div>\n          <div data-testid=\"error-state\">\n            {errorState.hasError ? 'Has Error' : 'No Error'}\n          </div>\n          <div data-testid=\"recovery-state\">\n            {errorState.isRecovering ? 'Recovering' : 'Not Recovering'}\n          </div>\n          <div data-testid=\"retry-count\">\n            {errorState.recoveryAttempts}\n          </div>\n          <button onClick={triggerRecoverableError} data-testid=\"trigger-error-btn\">\n            Trigger Error\n          </button>\n          <button onClick={clearError} data-testid=\"clear-error-btn\">\n            Clear Error\n          </button>\n        </div>\n      );\n    };\n\n    render(\n      <NotificationProvider>\n        <TestApp />\n      </NotificationProvider>\n    );\n\n    // Initially no error\n    expect(screen.getByTestId('error-state')).toHaveTextContent('No Error');\n\n    // Trigger error\n    const triggerBtn = screen.getByTestId('trigger-error-btn');\n    fireEvent.click(triggerBtn);\n\n    // Should show error state\n    await waitFor(() => {\n      expect(screen.getByTestId('error-state')).toHaveTextContent('Has Error');\n    });\n\n    // Auto-recovery should kick in for CHART_ERROR\n    // This would be tested with proper timing and mocking\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/constants/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/data/assessmentQuestions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/data/constitutionQuestions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/data/constitutionRecommendations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/data/constitutionTypes.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ConstitutionRecommendations' is defined but never used.","line":1,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":59}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ConstitutionTypeInfo, ConstitutionRecommendations, ConstitutionType } from '../types/constitution';\n\nexport const constitutionTypeInfo: Record<string, Record<ConstitutionType, ConstitutionTypeInfo>> = {\n  zh: {\n    balanced: {\n      name: 'å¹³å’Œè´¨',\n      description: 'ä½“è´¨å¹³å’Œï¼Œèº«å¿ƒå¥åº·ï¼Œæ˜¯æœ€ç†æƒ³çš„ä½“è´¨çŠ¶æ€ã€‚',\n      characteristics: [\n        'ç²¾åŠ›å……æ²›ï¼Œä¸æ˜“ç–²åŠ³',\n        'ç¡çœ è‰¯å¥½ï¼Œæƒ…ç»ªç¨³å®š',\n        'æ¶ˆåŒ–åŠŸèƒ½æ­£å¸¸',\n        'å¯¹ç¯å¢ƒé€‚åº”èƒ½åŠ›å¼º'\n      ],\n      commonSymptoms: [\n        'å¾ˆå°‘ç”Ÿç—…',\n        'æ¢å¤èƒ½åŠ›å¼º',\n        'æŠµæŠ—åŠ›å¥½'\n      ],\n      menstrualFeatures: [\n        'æœˆç»å‘¨æœŸè§„å¾‹ï¼ˆ28-30å¤©ï¼‰',\n        'ç»é‡é€‚ä¸­',\n        'é¢œè‰²æ­£å¸¸çº¢è‰²',\n        'ç—›ç»è½»å¾®æˆ–æ— ç—›ç»'\n      ]\n    },\n    qi_deficiency: {\n      name: 'æ°”è™šè´¨',\n      description: 'å…ƒæ°”ä¸è¶³ï¼Œä»¥ç–²ä¹ã€æ°”çŸ­ã€è‡ªæ±—ç­‰æ°”è™šè¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'å®¹æ˜“ç–²åŠ³ï¼Œç²¾ç¥ä¸æŒ¯',\n        'è¯´è¯å£°éŸ³ä½ï¼Œä¸çˆ±è¯´è¯',\n        'å®¹æ˜“å‡ºæ±—ï¼Œæ´»åŠ¨åæ›´æ˜æ˜¾',\n        'æŠµæŠ—åŠ›å·®ï¼Œå®¹æ˜“æ„Ÿå†’'\n      ],\n      commonSymptoms: [\n        'æ°”çŸ­æ‡’è¨€',\n        'å®¹æ˜“ç–²åŠ³',\n        'è‡ªæ±—',\n        'é£Ÿæ¬²ä¸æŒ¯'\n      ],\n      menstrualFeatures: [\n        'æœˆç»é‡å°‘ï¼Œé¢œè‰²æ·¡',\n        'å‘¨æœŸå¯èƒ½å»¶å',\n        'ç»æœŸç–²åŠ³åŠ é‡',\n        'å¯èƒ½æœ‰è½»åº¦ç—›ç»'\n      ]\n    },\n    yang_deficiency: {\n      name: 'é˜³è™šè´¨',\n      description: 'é˜³æ°”ä¸è¶³ï¼Œä»¥ç•å¯’æ€•å†·ã€æ‰‹è¶³ä¸æ¸©ç­‰è™šå¯’è¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'ç•å¯’æ€•å†·ï¼Œæ‰‹è¶³ä¸æ¸©',\n        'å–œçƒ­é¥®é£Ÿï¼Œä¸è€å¯’é‚ª',\n        'ç²¾ç¥ä¸æŒ¯ï¼Œç¡çœ åå¤š',\n        'å¤§ä¾¿æºè–„ï¼Œå°ä¾¿æ¸…é•¿'\n      ],\n      commonSymptoms: [\n        'ç•å¯’è‚¢å†·',\n        'ç²¾ç¥èé¡',\n        'è…°è†é…¸è½¯',\n        'æ€§åŠŸèƒ½å‡é€€'\n      ],\n      menstrualFeatures: [\n        'æœˆç»é‡å°‘ï¼Œé¢œè‰²æ·¡',\n        'å‘¨æœŸå»¶å',\n        'ç»æœŸè…¹ç—›å–œæ¸©å–œæŒ‰',\n        'ç»å‰æˆ–ç»æœŸè…°é…¸æ˜æ˜¾'\n      ]\n    },\n    yin_deficiency: {\n      name: 'é˜´è™šè´¨',\n      description: 'é˜´æ¶²äºå°‘ï¼Œä»¥å£ç‡¥å’½å¹²ã€æ‰‹è¶³å¿ƒçƒ­ç­‰è™šçƒ­è¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'æ‰‹è¶³å¿ƒçƒ­ï¼Œå£å’½å¹²ç‡¥',\n        'å–œå†·é¥®ï¼Œä¸è€æš‘çƒ­',\n        'å¤§ä¾¿å¹²ç‡¥ï¼Œå°ä¾¿çŸ­èµ¤',\n        'ç¡çœ å·®ï¼Œæ€§æƒ…æ€¥èº'\n      ],\n      commonSymptoms: [\n        'äº”å¿ƒçƒ¦çƒ­',\n        'å£å¹²å’½ç‡¥',\n        'ç›—æ±—',\n        'å¤±çœ å¤šæ¢¦'\n      ],\n      menstrualFeatures: [\n        'æœˆç»é‡å°‘æˆ–æ­£å¸¸',\n        'å‘¨æœŸå¯èƒ½æå‰',\n        'ç»è‰²é²œçº¢',\n        'ç»å‰çƒ¦èºï¼Œå¤±çœ '\n      ]\n    },\n    phlegm_dampness: {\n      name: 'ç—°æ¹¿è´¨',\n      description: 'ç—°æ¹¿å‡èšï¼Œä»¥å½¢ä½“è‚¥èƒ–ã€è…¹éƒ¨è‚¥æ»¡ã€å£é»è‹”è…»ç­‰ç—°æ¹¿è¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'å½¢ä½“è‚¥èƒ–ï¼Œè…¹éƒ¨è‚¥æ»¡æ¾è½¯',\n        'é¢éƒ¨çš®è‚¤æ²¹è„‚è¾ƒå¤š',\n        'å®¹æ˜“å›°å€¦ï¼Œèº«é‡ä¸çˆ½',\n        'å£é»è…»æˆ–ç”œï¼Œå–œé£Ÿè‚¥ç”˜ç”œè…»'\n      ],\n      commonSymptoms: [\n        'èº«é‡å›°å€¦',\n        'èƒ¸é—·ç—°å¤š',\n        'å£é»è…»',\n        'å¤§ä¾¿æ­£å¸¸æˆ–ä¸å®'\n      ],\n      menstrualFeatures: [\n        'æœˆç»é‡å¤šæˆ–æ­£å¸¸',\n        'ç»è‰²æ·¡çº¢',\n        'è´¨åœ°ç²˜ç¨ ',\n        'ç»å‰èƒ¸é—·ã€æ°´è‚¿'\n      ]\n    },\n    damp_heat: {\n      name: 'æ¹¿çƒ­è´¨',\n      description: 'æ¹¿çƒ­å†…è•´ï¼Œä»¥é¢å¢æ²¹è…»ã€å£è‹¦ã€è‹”é»„è…»ç­‰æ¹¿çƒ­è¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'é¢å¢æ²¹è…»ï¼Œæ˜“ç”Ÿç—¤ç–®',\n        'å£è‹¦å£å¹²ï¼Œèº«é‡å›°å€¦',\n        'å¤§ä¾¿é»æ»ä¸ç•…æˆ–ç‡¥ç»“',\n        'å°ä¾¿çŸ­é»„ï¼Œç”·æ˜“é˜´å›Šæ½®æ¹¿'\n      ],\n      commonSymptoms: [\n        'é¢éƒ¨æ²¹è…»',\n        'å£è‹¦å£å¹²',\n        'èº«é‡å›°å€¦',\n        'å¤§ä¾¿é»æ»'\n      ],\n      menstrualFeatures: [\n        'æœˆç»é‡å¤šï¼Œé¢œè‰²æ·±çº¢',\n        'å‘¨æœŸå¯èƒ½æå‰',\n        'ç»å‰çƒ¦èºæ˜“æ€’',\n        'ç—›ç»è¾ƒé‡ï¼Œå–œå†·æ¶çƒ­'\n      ]\n    },\n    blood_stasis: {\n      name: 'è¡€ç˜€è´¨',\n      description: 'è¡€è¡Œä¸ç•…ï¼Œä»¥è‚¤è‰²æ™¦é»¯ã€èˆŒè´¨ç´«é»¯ç­‰è¡€ç˜€è¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'è‚¤è‰²æ™¦é»¯ï¼Œè‰²ç´ æ²‰ç€',\n        'å®¹æ˜“å‡ºç°ç˜€æ–‘',\n        'å£å”‡é»¯æ·¡ï¼ŒèˆŒä¸‹ç»œè„‰ç´«é»¯',\n        'æ€§æƒ…æ€¥èºï¼Œå¥å¿˜'\n      ],\n      commonSymptoms: [\n        'è‚¤è‰²æ™¦é»¯',\n        'æ˜“ç”Ÿè‰²æ–‘',\n        'ç–¼ç—›å¦‚é’ˆåˆº',\n        'å¥å¿˜'\n      ],\n      menstrualFeatures: [\n        'æœˆç»æœ‰è¡€å—',\n        'ç»è‰²æš—çº¢æˆ–ç´«é»‘',\n        'ç—›ç»æ˜æ˜¾ï¼Œæ‹’æŒ‰',\n        'ç»å‰ä¹³æˆ¿èƒ€ç—›'\n      ]\n    },\n    qi_stagnation: {\n      name: 'æ°”éƒè´¨',\n      description: 'æ°”æœºéƒæ»ï¼Œä»¥ç¥æƒ…æŠ‘éƒã€å¿§è™‘è„†å¼±ç­‰æ°”éƒè¡¨ç°ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'ç¥æƒ…æŠ‘éƒï¼Œæƒ…æ„Ÿè„†å¼±',\n        'çƒ¦é—·ä¸ä¹ï¼Œå®¹æ˜“ç´§å¼ ',\n        'å¤šæ„å–„æ„Ÿï¼Œå¿§è™‘ä¸å®‰',\n        'å¯¹ç²¾ç¥åˆºæ¿€é€‚åº”èƒ½åŠ›è¾ƒå·®'\n      ],\n      commonSymptoms: [\n        'æƒ…ç»ªæŠ‘éƒ',\n        'èƒ¸èƒèƒ€æ»¡',\n        'å–„å¤ªæ¯',\n        'å’½ä¸­å¦‚æœ‰å¼‚ç‰©'\n      ],\n      menstrualFeatures: [\n        'æœˆç»ä¸è§„å¾‹',\n        'ç»å‰æƒ…ç»ªæ³¢åŠ¨å¤§',\n        'ä¹³æˆ¿èƒ€ç—›æ˜æ˜¾',\n        'ç—›ç»ç¨‹åº¦ä¸æƒ…ç»ªç›¸å…³'\n      ]\n    },\n    special_diathesis: {\n      name: 'ç‰¹ç¦€è´¨',\n      description: 'å…ˆå¤©å¤±å¸¸ï¼Œä»¥ç”Ÿç†ç¼ºé™·ã€è¿‡æ•ååº”ç­‰ä¸ºä¸»è¦ç‰¹å¾ã€‚',\n      characteristics: [\n        'å…ˆå¤©ç¦€èµ‹ä¸è¶³',\n        'å®¹æ˜“è¿‡æ•',\n        'é€‚åº”èƒ½åŠ›å·®',\n        'é—ä¼ æ€§ç–¾ç—…å®¶æ—å²'\n      ],\n      commonSymptoms: [\n        'è¿‡æ•æ€§ç–¾ç—…',\n        'é—ä¼ æ€§ç–¾ç—…',\n        'èƒä¼ æ€§ç–¾ç—…'\n      ],\n      menstrualFeatures: [\n        'æœˆç»å¼‚å¸¸å¤šæ ·',\n        'å¯èƒ½ä¼´éšè¿‡æ•ç—‡çŠ¶',\n        'å¯¹ç¯å¢ƒå˜åŒ–æ•æ„Ÿ'\n      ]\n    }\n  },\n  en: {\n    balanced: {\n      name: 'Balanced Constitution',\n      description: 'A harmonious constitution with balanced body and mind, representing the ideal health state.',\n      characteristics: [\n        'Energetic and not easily fatigued',\n        'Good sleep and stable emotions',\n        'Normal digestive function',\n        'Strong adaptability to environment'\n      ],\n      commonSymptoms: [\n        'Rarely gets sick',\n        'Strong recovery ability',\n        'Good resistance'\n      ],\n      menstrualFeatures: [\n        'Regular menstrual cycle (28-30 days)',\n        'Moderate flow',\n        'Normal red color',\n        'Mild or no menstrual pain'\n      ]\n    },\n    qi_deficiency: {\n      name: 'Qi Deficiency Constitution',\n      description: 'Insufficient vital energy, characterized by fatigue, shortness of breath, and spontaneous sweating.',\n      characteristics: [\n        'Easily fatigued and low spirits',\n        'Low voice, reluctant to speak',\n        'Prone to sweating, especially after activity',\n        'Poor resistance, easily catches cold'\n      ],\n      commonSymptoms: [\n        'Shortness of breath and reluctance to speak',\n        'Easy fatigue',\n        'Spontaneous sweating',\n        'Poor appetite'\n      ],\n      menstrualFeatures: [\n        'Scanty menstruation with pale color',\n        'Cycle may be delayed',\n        'Increased fatigue during menstruation',\n        'May have mild menstrual pain'\n      ]\n    },\n    yang_deficiency: {\n      name: 'Yang Deficiency Constitution',\n      description: 'Insufficient yang qi, characterized by aversion to cold, cold limbs, and other cold manifestations.',\n      characteristics: [\n        'Aversion to cold, cold hands and feet',\n        'Prefers warm food and drinks, intolerant to cold',\n        'Low spirits, tends to sleep more',\n        'Loose stools, clear and long urine'\n      ],\n      commonSymptoms: [\n        'Aversion to cold and cold limbs',\n        'Mental fatigue',\n        'Sore and weak lower back and knees',\n        'Decreased sexual function'\n      ],\n      menstrualFeatures: [\n        'Scanty menstruation with pale color',\n        'Delayed cycle',\n        'Abdominal pain during menstruation, relieved by warmth and pressure',\n        'Obvious lower back pain before or during menstruation'\n      ]\n    },\n    yin_deficiency: {\n      name: 'Yin Deficiency Constitution',\n      description: 'Insufficient yin fluid, characterized by dry mouth and throat, hot palms and soles.',\n      characteristics: [\n        'Hot palms and soles, dry mouth and throat',\n        'Prefers cold drinks, intolerant to heat',\n        'Dry stools, short and yellow urine',\n        'Poor sleep, irritable temperament'\n      ],\n      commonSymptoms: [\n        'Five-center heat (palms, soles, chest)',\n        'Dry mouth and throat',\n        'Night sweats',\n        'Insomnia and vivid dreams'\n      ],\n      menstrualFeatures: [\n        'Scanty or normal menstruation',\n        'Cycle may be advanced',\n        'Bright red menstrual color',\n        'Irritability and insomnia before menstruation'\n      ]\n    },\n    phlegm_dampness: {\n      name: 'Phlegm-Dampness Constitution',\n      description: 'Accumulation of phlegm and dampness, characterized by obesity, abdominal fullness, and sticky mouth.',\n      characteristics: [\n        'Obese body with soft and full abdomen',\n        'Oily facial skin',\n        'Easily drowsy, heavy body feeling',\n        'Sticky or sweet mouth, prefers fatty and sweet foods'\n      ],\n      commonSymptoms: [\n        'Heavy body and drowsiness',\n        'Chest tightness and phlegm',\n        'Sticky mouth',\n        'Normal or loose stools'\n      ],\n      menstrualFeatures: [\n        'Heavy or normal menstruation',\n        'Light red color',\n        'Thick consistency',\n        'Chest tightness and edema before menstruation'\n      ]\n    },\n    damp_heat: {\n      name: 'Damp-Heat Constitution',\n      description: 'Internal accumulation of damp-heat, characterized by oily face, bitter mouth, and yellow greasy tongue coating.',\n      characteristics: [\n        'Oily face, prone to acne',\n        'Bitter and dry mouth, heavy body feeling',\n        'Sticky or dry stools',\n        'Short and yellow urine, men prone to scrotal dampness'\n      ],\n      commonSymptoms: [\n        'Oily face',\n        'Bitter and dry mouth',\n        'Heavy body and drowsiness',\n        'Sticky stools'\n      ],\n      menstrualFeatures: [\n        'Heavy menstruation with dark red color',\n        'Cycle may be advanced',\n        'Irritability before menstruation',\n        'Severe menstrual pain, prefers cold and dislikes heat'\n      ]\n    },\n    blood_stasis: {\n      name: 'Blood Stasis Constitution',\n      description: 'Poor blood circulation, characterized by dull complexion and purple tongue.',\n      characteristics: [\n        'Dull complexion with pigmentation',\n        'Prone to bruising',\n        'Dark lips, purple sublingual vessels',\n        'Irritable temperament, forgetful'\n      ],\n      commonSymptoms: [\n        'Dull complexion',\n        'Prone to dark spots',\n        'Needle-like pain',\n        'Forgetfulness'\n      ],\n      menstrualFeatures: [\n        'Menstruation with blood clots',\n        'Dark red or purple-black color',\n        'Obvious menstrual pain, refuses pressure',\n        'Breast distension before menstruation'\n      ]\n    },\n    qi_stagnation: {\n      name: 'Qi Stagnation Constitution',\n      description: 'Stagnant qi movement, characterized by depression, anxiety, and emotional fragility.',\n      characteristics: [\n        'Depressed mood, emotionally fragile',\n        'Restless and easily tense',\n        'Sentimental and anxious',\n        'Poor adaptability to mental stimulation'\n      ],\n      commonSymptoms: [\n        'Emotional depression',\n        'Chest and hypochondriac distension',\n        'Frequent sighing',\n        'Feeling of foreign body in throat'\n      ],\n      menstrualFeatures: [\n        'Irregular menstruation',\n        'Large emotional fluctuations before menstruation',\n        'Obvious breast distension',\n        'Menstrual pain related to emotions'\n      ]\n    },\n    special_diathesis: {\n      name: 'Special Constitution',\n      description: 'Congenital abnormalities, characterized by physiological defects and allergic reactions.',\n      characteristics: [\n        'Congenital insufficiency',\n        'Prone to allergies',\n        'Poor adaptability',\n        'Family history of hereditary diseases'\n      ],\n      commonSymptoms: [\n        'Allergic diseases',\n        'Hereditary diseases',\n        'Congenital diseases'\n      ],\n      menstrualFeatures: [\n        'Various menstrual abnormalities',\n        'May be accompanied by allergic symptoms',\n        'Sensitive to environmental changes'\n      ]\n    }\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/data/menstrualPainRecommendations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useAccessibility.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'focusTrapRef' is assigned a value but never used.","line":25,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":101,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":391,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":391,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useCallback } from 'react';\n\ninterface UseAccessibilityOptions {\n  announcePageChanges?: boolean;\n  manageFocus?: boolean;\n  trapFocus?: boolean;\n  skipLinks?: boolean;\n}\n\ninterface AccessibilityAnnouncement {\n  message: string;\n  priority?: 'polite' | 'assertive';\n  delay?: number;\n}\n\nexport function useAccessibility(options: UseAccessibilityOptions = {}) {\n  const {\n    announcePageChanges = true,\n    manageFocus = true,\n    trapFocus = false,\n    skipLinks = true\n  } = options;\n\n  const announcementRef = useRef<HTMLDivElement | null>(null);\n  const focusTrapRef = useRef<HTMLDivElement | null>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // Create announcement region for screen readers\n  useEffect(() => {\n    if (!announcePageChanges) return;\n\n    const announcementRegion = document.createElement('div');\n    announcementRegion.setAttribute('aria-live', 'polite');\n    announcementRegion.setAttribute('aria-atomic', 'true');\n    announcementRegion.className = 'sr-only';\n    announcementRegion.id = 'accessibility-announcements';\n    \n    document.body.appendChild(announcementRegion);\n    announcementRef.current = announcementRegion;\n\n    return () => {\n      if (announcementRegion.parentNode) {\n        announcementRegion.parentNode.removeChild(announcementRegion);\n      }\n    };\n  }, [announcePageChanges]);\n\n  // Announce messages to screen readers\n  const announce = useCallback((announcement: AccessibilityAnnouncement) => {\n    if (!announcementRef.current) return;\n\n    const { message, priority = 'polite', delay = 100 } = announcement;\n    \n    // Clear previous announcement\n    announcementRef.current.textContent = '';\n    announcementRef.current.setAttribute('aria-live', priority);\n    \n    // Add new announcement with slight delay to ensure it's read\n    setTimeout(() => {\n      if (announcementRef.current) {\n        announcementRef.current.textContent = message;\n      }\n    }, delay);\n  }, []);\n\n  // Focus management utilities\n  const focusElement = useCallback((selector: string | HTMLElement) => {\n    if (!manageFocus) return;\n\n    let element: HTMLElement | null = null;\n    \n    if (typeof selector === 'string') {\n      element = document.querySelector(selector);\n    } else {\n      element = selector;\n    }\n\n    if (element) {\n      // Store previous focus for restoration\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      \n      // Focus the element\n      element.focus();\n      \n      // Scroll into view if needed\n      element.scrollIntoView({ \n        behavior: 'smooth', \n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [manageFocus]);\n\n  // Restore previous focus\n  const restoreFocus = useCallback(() => {\n    if (!manageFocus || !previousFocusRef.current) return;\n\n    try {\n      previousFocusRef.current.focus();\n      previousFocusRef.current = null;\n    } catch (error) {\n      // Element might no longer exist, focus body as fallback\n      document.body.focus();\n    }\n  }, [manageFocus]);\n\n  // Focus trap for modals and dialogs\n  const trapFocusInElement = useCallback((element: HTMLElement) => {\n    if (!trapFocus) return () => {};\n\n    const focusableElements = element.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    \n    const firstFocusable = focusableElements[0] as HTMLElement;\n    const lastFocusable = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    const handleTabKey = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      if (e.shiftKey) {\n        // Shift + Tab\n        if (document.activeElement === firstFocusable) {\n          e.preventDefault();\n          lastFocusable.focus();\n        }\n      } else {\n        // Tab\n        if (document.activeElement === lastFocusable) {\n          e.preventDefault();\n          firstFocusable.focus();\n        }\n      }\n    };\n\n    element.addEventListener('keydown', handleTabKey);\n    \n    // Focus first element\n    if (firstFocusable) {\n      firstFocusable.focus();\n    }\n\n    return () => {\n      element.removeEventListener('keydown', handleTabKey);\n    };\n  }, [trapFocus]);\n\n  // Keyboard navigation helpers\n  const handleArrowNavigation = useCallback((\n    e: KeyboardEvent,\n    items: NodeListOf<Element> | Element[],\n    currentIndex: number,\n    options: {\n      horizontal?: boolean;\n      vertical?: boolean;\n      wrap?: boolean;\n      onNavigate?: (newIndex: number) => void;\n    } = {}\n  ) => {\n    const { horizontal = true, vertical = true, wrap = true, onNavigate } = options;\n    const itemsArray = Array.from(items);\n    let newIndex = currentIndex;\n\n    switch (e.key) {\n      case 'ArrowRight':\n        if (horizontal) {\n          e.preventDefault();\n          newIndex = currentIndex + 1;\n          if (newIndex >= itemsArray.length) {\n            newIndex = wrap ? 0 : itemsArray.length - 1;\n          }\n        }\n        break;\n      case 'ArrowLeft':\n        if (horizontal) {\n          e.preventDefault();\n          newIndex = currentIndex - 1;\n          if (newIndex < 0) {\n            newIndex = wrap ? itemsArray.length - 1 : 0;\n          }\n        }\n        break;\n      case 'ArrowDown':\n        if (vertical) {\n          e.preventDefault();\n          newIndex = currentIndex + 1;\n          if (newIndex >= itemsArray.length) {\n            newIndex = wrap ? 0 : itemsArray.length - 1;\n          }\n        }\n        break;\n      case 'ArrowUp':\n        if (vertical) {\n          e.preventDefault();\n          newIndex = currentIndex - 1;\n          if (newIndex < 0) {\n            newIndex = wrap ? itemsArray.length - 1 : 0;\n          }\n        }\n        break;\n      case 'Home':\n        e.preventDefault();\n        newIndex = 0;\n        break;\n      case 'End':\n        e.preventDefault();\n        newIndex = itemsArray.length - 1;\n        break;\n    }\n\n    if (newIndex !== currentIndex) {\n      const newElement = itemsArray[newIndex] as HTMLElement;\n      if (newElement) {\n        newElement.focus();\n        if (onNavigate) {\n          onNavigate(newIndex);\n        }\n      }\n    }\n  }, []);\n\n  // Skip link functionality\n  useEffect(() => {\n    if (!skipLinks) return;\n\n    const skipLink = document.createElement('a');\n    skipLink.href = '#main-content';\n    skipLink.textContent = 'Skip to main content';\n    skipLink.className = 'skip-link';\n    skipLink.addEventListener('click', (e) => {\n      e.preventDefault();\n      const mainContent = document.getElementById('main-content') || document.querySelector('main');\n      if (mainContent) {\n        mainContent.focus();\n        mainContent.scrollIntoView();\n      }\n    });\n\n    document.body.insertBefore(skipLink, document.body.firstChild);\n\n    return () => {\n      if (skipLink.parentNode) {\n        skipLink.parentNode.removeChild(skipLink);\n      }\n    };\n  }, [skipLinks]);\n\n  // Detect user preferences\n  const prefersReducedMotion = useCallback(() => {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }, []);\n\n  const prefersHighContrast = useCallback(() => {\n    return window.matchMedia('(prefers-contrast: high)').matches;\n  }, []);\n\n  const prefersDarkMode = useCallback(() => {\n    return window.matchMedia('(prefers-color-scheme: dark)').matches;\n  }, []);\n\n  // Generate unique IDs for accessibility\n  const generateId = useCallback((prefix: string = 'accessibility') => {\n    return `${prefix}-${Math.random().toString(36).substr(2, 9)}`;\n  }, []);\n\n  // Validate ARIA attributes\n  const validateAriaAttributes = useCallback((element: HTMLElement) => {\n    const warnings: string[] = [];\n\n    // Check for required ARIA attributes\n    if (element.getAttribute('role') === 'button' && !element.hasAttribute('aria-label') && !element.textContent?.trim()) {\n      warnings.push('Button elements should have accessible text or aria-label');\n    }\n\n    if (element.getAttribute('role') === 'tab' && !element.hasAttribute('aria-controls')) {\n      warnings.push('Tab elements should have aria-controls attribute');\n    }\n\n    if (element.getAttribute('role') === 'tabpanel' && !element.hasAttribute('aria-labelledby')) {\n      warnings.push('Tabpanel elements should have aria-labelledby attribute');\n    }\n\n    // Check for proper heading hierarchy\n    if (element.tagName.match(/^H[1-6]$/)) {\n      const level = parseInt(element.tagName.charAt(1));\n      const previousHeading = element.previousElementSibling?.closest('h1, h2, h3, h4, h5, h6');\n      if (previousHeading) {\n        const previousLevel = parseInt(previousHeading.tagName.charAt(1));\n        if (level > previousLevel + 1) {\n          warnings.push(`Heading level ${level} follows heading level ${previousLevel}, consider using h${previousLevel + 1}`);\n        }\n      }\n    }\n\n    if (warnings.length > 0 && process.env.NODE_ENV === 'development') {\n      console.warn('Accessibility warnings for element:', element, warnings);\n    }\n\n    return warnings;\n  }, []);\n\n  return {\n    announce,\n    focusElement,\n    restoreFocus,\n    trapFocusInElement,\n    handleArrowNavigation,\n    prefersReducedMotion,\n    prefersHighContrast,\n    prefersDarkMode,\n    generateId,\n    validateAriaAttributes\n  };\n}\n\n// Hook for managing live regions\nexport function useLiveRegion() {\n  const regionRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const region = document.createElement('div');\n    region.setAttribute('aria-live', 'polite');\n    region.setAttribute('aria-atomic', 'true');\n    region.className = 'sr-only';\n    document.body.appendChild(region);\n    regionRef.current = region;\n\n    return () => {\n      if (region.parentNode) {\n        region.parentNode.removeChild(region);\n      }\n    };\n  }, []);\n\n  const announce = useCallback((message: string, priority: 'polite' | 'assertive' = 'polite') => {\n    if (!regionRef.current) return;\n\n    regionRef.current.setAttribute('aria-live', priority);\n    regionRef.current.textContent = '';\n    \n    setTimeout(() => {\n      if (regionRef.current) {\n        regionRef.current.textContent = message;\n      }\n    }, 100);\n  }, []);\n\n  return { announce };\n}\n\n// Hook for managing focus within a component\nexport function useFocusManagement() {\n  const containerRef = useRef<HTMLElement | null>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  const setContainer = useCallback((element: HTMLElement | null) => {\n    containerRef.current = element;\n  }, []);\n\n  const focusFirst = useCallback(() => {\n    if (!containerRef.current) return;\n\n    const focusable = containerRef.current.querySelector(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    ) as HTMLElement;\n\n    if (focusable) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      focusable.focus();\n    }\n  }, []);\n\n  const focusLast = useCallback(() => {\n    if (!containerRef.current) return;\n\n    const focusableElements = containerRef.current.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    const lastFocusable = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    if (lastFocusable) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      lastFocusable.focus();\n    }\n  }, []);\n\n  const restoreFocus = useCallback(() => {\n    if (previousFocusRef.current) {\n      try {\n        previousFocusRef.current.focus();\n      } catch (error) {\n        // Element might no longer exist\n        document.body.focus();\n      }\n      previousFocusRef.current = null;\n    }\n  }, []);\n\n  return {\n    setContainer,\n    focusFirst,\n    focusLast,\n    restoreFocus\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useAppTranslations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useConstitutionTest.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'constitutionTypeInfo' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":30},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'questions' conditional could make the dependencies of useCallback Hook (at line 136) change on every render. To fix this, wrap the initialization of 'questions' in its own useMemo() Hook.","line":50,"column":9,"nodeType":"VariableDeclarator","endLine":50,"endColumn":115},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":179,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":179,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useCallback } from 'react';\nimport { \n  ConstitutionQuestion, \n  ConstitutionAnswer, \n  ConstitutionSession, \n  ConstitutionResult,\n  ConstitutionType \n} from '../types/constitution';\nimport { constitutionQuestions } from '../data/constitutionQuestions';\nimport { constitutionRecommendations } from '../data/constitutionRecommendations';\nimport { constitutionTypeInfo } from '../data/constitutionTypes';\n\ninterface UseConstitutionTestReturn {\n  // Current session\n  currentSession: ConstitutionSession | null;\n  currentQuestionIndex: number;\n  currentQuestion: ConstitutionQuestion | null;\n  isComplete: boolean;\n  \n  // Progress\n  progress: number;\n  totalQuestions: number;\n  \n  // Actions\n  startTest: (locale: string) => void;\n  answerQuestion: (answer: ConstitutionAnswer) => void;\n  goToQuestion: (index: number) => void;\n  goToPreviousQuestion: () => void;\n  goToNextQuestion: () => void;\n  completeTest: () => ConstitutionResult | null;\n  resetTest: () => void;\n  \n  // Results\n  result: ConstitutionResult | null;\n  \n  // State\n  isLoading: boolean;\n  error: string | null;\n}\n\nexport function useConstitutionTest(): UseConstitutionTestReturn {\n  const [currentSession, setCurrentSession] = useState<ConstitutionSession | null>(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [result, setResult] = useState<ConstitutionResult | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const questions = currentSession ? constitutionQuestions[currentSession.locale] || constitutionQuestions.zh : [];\n  const currentQuestion = questions[currentQuestionIndex] || null;\n  const isComplete = currentQuestionIndex >= questions.length;\n  const progress = questions.length > 0 ? Math.min((currentQuestionIndex / questions.length) * 100, 100) : 0;\n\n  const startTest = useCallback((locale: string) => {\n    const sessionId = `constitution_test_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newSession: ConstitutionSession = {\n      id: sessionId,\n      answers: [],\n      startedAt: new Date().toISOString(),\n      locale\n    };\n    \n    setCurrentSession(newSession);\n    setCurrentQuestionIndex(0);\n    setResult(null);\n    setError(null);\n  }, []);\n\n  const answerQuestion = useCallback((answer: ConstitutionAnswer) => {\n    if (!currentSession) return;\n\n    setCurrentSession(prev => {\n      if (!prev) return prev;\n      \n      const existingAnswerIndex = prev.answers.findIndex(a => a.questionId === answer.questionId);\n      const updatedAnswers = [...prev.answers];\n      \n      if (existingAnswerIndex >= 0) {\n        updatedAnswers[existingAnswerIndex] = answer;\n      } else {\n        updatedAnswers.push(answer);\n      }\n      \n      return {\n        ...prev,\n        answers: updatedAnswers\n      };\n    });\n  }, [currentSession]);\n\n  const goToQuestion = useCallback((index: number) => {\n    if (index >= 0 && index < questions.length) {\n      setCurrentQuestionIndex(index);\n    }\n  }, [questions.length]);\n\n  const goToPreviousQuestion = useCallback(() => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    }\n  }, [currentQuestionIndex]);\n\n  const goToNextQuestion = useCallback(() => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  }, [currentQuestionIndex, questions.length]);\n\n  const calculateConstitutionScores = useCallback((answers: ConstitutionAnswer[]): Record<ConstitutionType, number> => {\n    const scores: Record<ConstitutionType, number> = {\n      balanced: 0,\n      qi_deficiency: 0,\n      yang_deficiency: 0,\n      yin_deficiency: 0,\n      phlegm_dampness: 0,\n      damp_heat: 0,\n      blood_stasis: 0,\n      qi_stagnation: 0,\n      special_diathesis: 0\n    };\n\n    answers.forEach(answer => {\n      const question = questions.find(q => q.id === answer.questionId);\n      if (!question) return;\n\n      answer.selectedValues.forEach(value => {\n        const option = question.options.find(opt => opt.value === value);\n        if (option) {\n          scores[option.constitutionType] += option.weight * question.weight;\n        }\n      });\n    });\n\n    return scores;\n  }, [questions]);\n\n  const completeTest = useCallback((): ConstitutionResult | null => {\n    if (!currentSession || currentSession.answers.length !== questions.length) {\n      const isEnglish = currentSession?.locale === 'en';\n      setError(isEnglish ? 'Test incomplete, please answer all questions' : 'æµ‹è¯•æœªå®Œæˆï¼Œè¯·å›ç­”æ‰€æœ‰é—®é¢˜');\n      return null;\n    }\n\n    setIsLoading(true);\n    \n    try {\n      const scores = calculateConstitutionScores(currentSession.answers);\n      \n      // æ‰¾å‡ºå¾—åˆ†æœ€é«˜çš„ä½“è´¨ç±»å‹\n      const sortedScores = Object.entries(scores).sort(([,a], [,b]) => b - a);\n      const primaryType = sortedScores[0][0] as ConstitutionType;\n      const secondaryType = sortedScores[1][1] > 0 ? sortedScores[1][0] as ConstitutionType : undefined;\n      \n      // è®¡ç®—ç½®ä¿¡åº¦\n      const totalScore = Object.values(scores).reduce((sum, score) => sum + score, 0);\n      const confidence = totalScore > 0 ? Math.round((scores[primaryType] / totalScore) * 100) : 0;\n      \n      const testResult: ConstitutionResult = {\n        primaryType,\n        secondaryType,\n        scores,\n        confidence,\n        recommendations: constitutionRecommendations[currentSession.locale]?.[primaryType] || constitutionRecommendations.zh[primaryType],\n        sessionId: currentSession.id,\n        completedAt: new Date().toISOString()\n      };\n\n      // æ›´æ–°session\n      setCurrentSession(prev => prev ? {\n        ...prev,\n        completedAt: testResult.completedAt\n      } : null);\n\n      setResult(testResult);\n      setError(null);\n      \n      return testResult;\n    } catch (err) {\n      const isEnglish = currentSession?.locale === 'en';\n      setError(isEnglish ? 'Error calculating results, please try again' : 'è®¡ç®—ç»“æœæ—¶å‡ºé”™ï¼Œè¯·é‡è¯•');\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentSession, questions.length, calculateConstitutionScores]);\n\n  const resetTest = useCallback(() => {\n    setCurrentSession(null);\n    setCurrentQuestionIndex(0);\n    setResult(null);\n    setError(null);\n    setIsLoading(false);\n  }, []);\n\n  return {\n    currentSession,\n    currentQuestionIndex,\n    currentQuestion,\n    isComplete,\n    progress,\n    totalQuestions: questions.length,\n    startTest,\n    answerQuestion,\n    goToQuestion,\n    goToPreviousQuestion,\n    goToNextQuestion,\n    completeTest,\n    resetTest,\n    result,\n    isLoading,\n    error\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useErrorHandling.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'notifyRecoverySuccess' is assigned a value but never used.","line":57,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'notifyRecoveryFailed' is assigned a value but never used.","line":58,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":25},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'dataIntegrityService' object construction makes the dependencies of useEffect Hook (at line 501) change on every render. To fix this, wrap the initialization of 'dataIntegrityService' in its own useMemo() Hook.","line":62,"column":9,"nodeType":"VariableDeclarator","endLine":62,"endColumn":58},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'handleGenericError' and 'handlePainTrackerError'. Either include them or remove the dependency array.","line":88,"column":6,"nodeType":"ArrayExpression","endLine":88,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [handleGenericError, handlePainTrackerError, onError]","fix":{"range":[2512,2521],"text":"[handleGenericError, handlePainTrackerError, onError]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'handleChartError', 'handleDataCorruption', 'handleExportError', 'handleGenericError', 'handleMigrationError', 'handleQuotaExceeded', 'handleStorageError', and 'handleValidationError'. Either include them or remove the dependency array.","line":117,"column":6,"nodeType":"ArrayExpression","endLine":117,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [handleChartError, handleDataCorruption, handleExportError, handleGenericError, handleMigrationError, handleQuotaExceeded, handleStorageError, handleValidationError]","fix":{"range":[3427,3429],"text":"[handleChartError, handleDataCorruption, handleExportError, handleGenericError, handleMigrationError, handleQuotaExceeded, handleStorageError, handleValidationError]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":120,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":120,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":81},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addErrorNotification', 'addWarningNotification', 'getStorageRecoveryActions', and 'retryLastOperation'. Either include them or remove the dependency array.","line":145,"column":6,"nodeType":"ArrayExpression","endLine":145,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [enableOfflineMode, isOffline, addWarningNotification, retryLastOperation, getStorageRecoveryActions, addErrorNotification]","fix":{"range":[4369,4399],"text":"[enableOfflineMode, isOffline, addWarningNotification, retryLastOperation, getStorageRecoveryActions, addErrorNotification]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":148,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":148,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":148,"column":77,"nodeType":null,"messageId":"unusedVar","endLine":148,"endColumn":84},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addErrorNotification' and 'clearError'. Either include them or remove the dependency array.","line":163,"column":6,"nodeType":"ArrayExpression","endLine":163,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [addErrorNotification, clearError]","fix":{"range":[4935,4937],"text":"[addErrorNotification, clearError]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":166,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":166,"column":73,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":80},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addErrorNotification' and 'clearError'. Either include them or remove the dependency array.","line":189,"column":6,"nodeType":"ArrayExpression","endLine":189,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [addErrorNotification, clearError]","fix":{"range":[5683,5685],"text":"[addErrorNotification, clearError]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":192,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":192,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":192,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":192,"endColumn":79},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addWarningNotification', 'clearError', and 'retryLastOperation'. Either include them or remove the dependency array.","line":212,"column":6,"nodeType":"ArrayExpression","endLine":212,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [addWarningNotification, clearError, retryLastOperation]","fix":{"range":[6293,6295],"text":"[addWarningNotification, clearError, retryLastOperation]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":215,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":215,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":83},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addErrorNotification' and 'downloadCorruptedData'. Either include them or remove the dependency array.","line":259,"column":6,"nodeType":"ArrayExpression","endLine":259,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [addErrorNotification, dataIntegrityService, downloadCorruptedData, notifyDataCorruption]","fix":{"range":[7948,7992],"text":"[addErrorNotification, dataIntegrityService, downloadCorruptedData, notifyDataCorruption]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":262,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":262,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":262,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":262,"endColumn":82},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":276,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":276,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":276,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":276,"endColumn":83},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addErrorNotification' and 'retryLastOperation'. Either include them or remove the dependency array.","line":295,"column":6,"nodeType":"ArrayExpression","endLine":295,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [addErrorNotification, retryLastOperation]","fix":{"range":[9107,9109],"text":"[addErrorNotification, retryLastOperation]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addErrorNotification', 'reportError', and 'retryLastOperation'. Either include them or remove the dependency array.","line":315,"column":6,"nodeType":"ArrayExpression","endLine":315,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [addErrorNotification, reportError, retryLastOperation]","fix":{"range":[9654,9656],"text":"[addErrorNotification, reportError, retryLastOperation]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":331,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":331,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":351,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":351,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addSuccessNotification', 'addWarningNotification', and 'clearError'. Either include them or remove the dependency array.","line":401,"column":6,"nodeType":"ArrayExpression","endLine":401,"endColumn":71,"suggestions":[{"desc":"Update the dependencies array to be: [errorState.recoveryAttempts, maxRetries, addWarningNotification, clearError, onRecovery, addSuccessNotification, retryDelay]","fix":{"range":[12036,12101],"text":"[errorState.recoveryAttempts, maxRetries, addWarningNotification, clearError, onRecovery, addSuccessNotification, retryDelay]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'addSuccessNotification'. Either include it or remove the dependency array.","line":449,"column":6,"nodeType":"ArrayExpression","endLine":449,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [addSuccessNotification]","fix":{"range":[13530,13532],"text":"[addSuccessNotification]"}}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { PainTrackerError, PainTrackerErrorCode } from '../../../../../types/pain-tracker';\nimport { useNotifications, useRecoveryNotifications } from '../components/NotificationSystem';\nimport { useOfflineDetection } from './useOfflineDetection';\nimport DataIntegrityService from '../../../../../lib/pain-tracker/storage/DataIntegrityService';\n\ninterface ErrorState {\n  hasError: boolean;\n  error: Error | null;\n  errorCode: PainTrackerErrorCode | null;\n  isRecovering: boolean;\n  recoveryAttempts: number;\n  lastErrorTime: Date | null;\n}\n\ninterface ErrorHandlingOptions {\n  maxRetries?: number;\n  retryDelay?: number;\n  enableAutoRecovery?: boolean;\n  enableOfflineMode?: boolean;\n  onError?: (error: Error) => void;\n  onRecovery?: (success: boolean) => void;\n}\n\ninterface RecoveryAction {\n  label: string;\n  action: () => Promise<boolean>;\n  riskLevel: 'low' | 'medium' | 'high';\n  description: string;\n}\n\nexport function useErrorHandling(options: ErrorHandlingOptions = {}) {\n  const {\n    maxRetries = 3,\n    retryDelay = 1000,\n    enableAutoRecovery = true,\n    enableOfflineMode = true,\n    onError,\n    onRecovery\n  } = options;\n\n  const [errorState, setErrorState] = useState<ErrorState>({\n    hasError: false,\n    error: null,\n    errorCode: null,\n    isRecovering: false,\n    recoveryAttempts: 0,\n    lastErrorTime: null\n  });\n\n  const { addErrorNotification, addWarningNotification, addSuccessNotification } = useNotifications();\n  const { \n    notifyDataCorruption, \n    notifyStorageQuotaExceeded, \n    notifyRecoverySuccess, \n    notifyRecoveryFailed \n  } = useRecoveryNotifications();\n  \n  const { isOffline } = useOfflineDetection();\n  const dataIntegrityService = new DataIntegrityService();\n\n  // Handle different types of errors\n  const handleError = useCallback(async (error: Error | PainTrackerError, context?: string) => {\n    const now = new Date();\n    \n    setErrorState(prev => ({\n      ...prev,\n      hasError: true,\n      error,\n      errorCode: error instanceof PainTrackerError ? error.code : null,\n      lastErrorTime: now\n    }));\n\n    // Call custom error handler\n    onError?.(error);\n\n    // Log error for debugging\n    console.error(`Pain Tracker Error${context ? ` (${context})` : ''}:`, error);\n\n    // Handle specific error types\n    if (error instanceof PainTrackerError) {\n      await handlePainTrackerError(error, context);\n    } else {\n      await handleGenericError(error, context);\n    }\n  }, [onError]);\n\n  // Handle PainTrackerError instances\n  const handlePainTrackerError = useCallback(async (error: PainTrackerError, context?: string) => {\n    switch (error.code) {\n      case 'STORAGE_ERROR':\n        await handleStorageError(error, context);\n        break;\n      case 'VALIDATION_ERROR':\n        await handleValidationError(error, context);\n        break;\n      case 'EXPORT_ERROR':\n        await handleExportError(error, context);\n        break;\n      case 'CHART_ERROR':\n        await handleChartError(error, context);\n        break;\n      case 'DATA_CORRUPTION':\n        await handleDataCorruption(error, context);\n        break;\n      case 'QUOTA_EXCEEDED':\n        await handleQuotaExceeded(error, context);\n        break;\n      case 'MIGRATION_ERROR':\n        await handleMigrationError(error, context);\n        break;\n      default:\n        await handleGenericError(error, context);\n    }\n  }, []);\n\n  // Handle storage errors\n  const handleStorageError = useCallback(async (error: PainTrackerError, context?: string) => {\n    if (enableOfflineMode && isOffline) {\n      addWarningNotification(\n        'Offline Storage Issue',\n        'Unable to save to local storage. Data will be kept in memory until connection is restored.',\n        [\n          {\n            label: 'Retry',\n            action: () => retryLastOperation(),\n            style: 'primary'\n          }\n        ]\n      );\n    } else {\n      const recoveryActions = await getStorageRecoveryActions();\n      addErrorNotification(\n        'Storage Error',\n        'Unable to save your pain tracking data. Your browser storage may be full or corrupted.',\n        recoveryActions.slice(0, 2).map(action => ({\n          label: action.label,\n          action: action.action,\n          style: action.riskLevel === 'low' ? 'primary' : 'secondary'\n        }))\n      );\n    }\n  }, [isOffline, enableOfflineMode]);\n\n  // Handle validation errors\n  const handleValidationError = useCallback(async (error: PainTrackerError, context?: string) => {\n    addErrorNotification(\n      'Data Validation Error',\n      'The pain tracking data contains invalid information. Please check your entries and try again.',\n      [\n        {\n          label: 'Review Data',\n          action: () => {\n            // This would trigger a review of the current form or data\n            clearError();\n          },\n          style: 'primary'\n        }\n      ]\n    );\n  }, []);\n\n  // Handle export errors\n  const handleExportError = useCallback(async (error: PainTrackerError, context?: string) => {\n    addErrorNotification(\n      'Export Error',\n      'Unable to export your pain tracking data. This may be due to browser limitations or data size.',\n      [\n        {\n          label: 'Try Different Format',\n          action: () => {\n            // This would suggest trying HTML instead of PDF, etc.\n            clearError();\n          },\n          style: 'primary'\n        },\n        {\n          label: 'Export Smaller Range',\n          action: () => {\n            // This would suggest exporting a smaller date range\n            clearError();\n          },\n          style: 'secondary'\n        }\n      ]\n    );\n  }, []);\n\n  // Handle chart errors\n  const handleChartError = useCallback(async (error: PainTrackerError, context?: string) => {\n    addWarningNotification(\n      'Chart Display Error',\n      'Unable to display charts. You can still view your data in table format.',\n      [\n        {\n          label: 'View Table',\n          action: () => {\n            // This would switch to table view\n            clearError();\n          },\n          style: 'primary'\n        },\n        {\n          label: 'Retry Charts',\n          action: () => retryLastOperation(),\n          style: 'secondary'\n        }\n      ]\n    );\n  }, []);\n\n  // Handle data corruption\n  const handleDataCorruption = useCallback(async (error: PainTrackerError, context?: string) => {\n    try {\n      const integrityReport = await dataIntegrityService.checkDataIntegrity();\n      \n      if (integrityReport.recoveryOptions.length > 0) {\n        notifyDataCorruption(integrityReport.corruptionLevel, integrityReport.recoveryOptions);\n      } else {\n        addErrorNotification(\n          'Data Corruption Detected',\n          'Your pain tracking data appears to be corrupted and cannot be automatically recovered.',\n          [\n            {\n              label: 'Export Raw Data',\n              action: async () => {\n                try {\n                  const corruptedData = await dataIntegrityService.exportCorruptedData();\n                  downloadCorruptedData(corruptedData);\n                } catch (exportError) {\n                  console.error('Failed to export corrupted data:', exportError);\n                }\n              },\n              style: 'secondary'\n            },\n            {\n              label: 'Start Fresh',\n              action: () => {\n                if (confirm('This will delete all current data. Are you sure?')) {\n                  localStorage.clear();\n                  window.location.reload();\n                }\n              },\n              style: 'danger'\n            }\n          ]\n        );\n      }\n    } catch (checkError) {\n      console.error('Failed to check data integrity:', checkError);\n      addErrorNotification(\n        'Critical Data Error',\n        'Unable to assess data corruption. Manual intervention required.',\n        []\n      );\n    }\n  }, [dataIntegrityService, notifyDataCorruption]);\n\n  // Handle quota exceeded\n  const handleQuotaExceeded = useCallback(async (error: PainTrackerError, context?: string) => {\n    notifyStorageQuotaExceeded(\n      () => {\n        // Export data action\n        window.dispatchEvent(new CustomEvent('pain-tracker-export-request'));\n      },\n      () => {\n        // Cleanup action\n        window.dispatchEvent(new CustomEvent('pain-tracker-cleanup-request'));\n      }\n    );\n  }, [notifyStorageQuotaExceeded]);\n\n  // Handle migration errors\n  const handleMigrationError = useCallback(async (error: PainTrackerError, context?: string) => {\n    addErrorNotification(\n      'Data Migration Error',\n      'Unable to update your data to the latest format. Your data is safe but some features may not work.',\n      [\n        {\n          label: 'Retry Migration',\n          action: () => retryLastOperation(),\n          style: 'primary'\n        },\n        {\n          label: 'Export Backup',\n          action: () => {\n            window.dispatchEvent(new CustomEvent('pain-tracker-backup-request'));\n          },\n          style: 'secondary'\n        }\n      ]\n    );\n  }, []);\n\n  // Handle generic errors\n  const handleGenericError = useCallback(async (error: Error, context?: string) => {\n    addErrorNotification(\n      'Unexpected Error',\n      `An unexpected error occurred${context ? ` while ${context}` : ''}. Please try again.`,\n      [\n        {\n          label: 'Retry',\n          action: () => retryLastOperation(),\n          style: 'primary'\n        },\n        {\n          label: 'Report Issue',\n          action: () => reportError(error, context),\n          style: 'secondary'\n        }\n      ]\n    );\n  }, []);\n\n  // Get storage recovery actions\n  const getStorageRecoveryActions = useCallback(async (): Promise<RecoveryAction[]> => {\n    const actions: RecoveryAction[] = [];\n\n    // Check if backup is available\n    const backupAvailable = localStorage.getItem('enhanced_pain_tracker_records_backup');\n    if (backupAvailable) {\n      actions.push({\n        label: 'Restore Backup',\n        action: async () => {\n          try {\n            const backup = JSON.parse(backupAvailable);\n            localStorage.setItem('enhanced_pain_tracker_records', JSON.stringify(backup.records));\n            return true;\n          } catch (error) {\n            return false;\n          }\n        },\n        riskLevel: 'medium',\n        description: 'Restore from automatic backup'\n      });\n    }\n\n    // Clear storage and start fresh\n    actions.push({\n      label: 'Clear Storage',\n      action: async () => {\n        try {\n          Object.keys(localStorage).forEach(key => {\n            if (key.startsWith('enhanced_pain_tracker_')) {\n              localStorage.removeItem(key);\n            }\n          });\n          return true;\n        } catch (error) {\n          return false;\n        }\n      },\n      riskLevel: 'high',\n      description: 'Clear all data and start fresh'\n    });\n\n    return actions;\n  }, []);\n\n  // Retry last operation\n  const retryLastOperation = useCallback(async () => {\n    if (errorState.recoveryAttempts >= maxRetries) {\n      addWarningNotification(\n        'Max Retries Reached',\n        'Unable to recover after multiple attempts. Please try a different approach.',\n        []\n      );\n      return false;\n    }\n\n    setErrorState(prev => ({\n      ...prev,\n      isRecovering: true,\n      recoveryAttempts: prev.recoveryAttempts + 1\n    }));\n\n    try {\n      // Wait before retrying\n      await new Promise(resolve => setTimeout(resolve, retryDelay * errorState.recoveryAttempts));\n\n      // Clear error state\n      clearError();\n      \n      // Trigger recovery success\n      onRecovery?.(true);\n      addSuccessNotification('Recovery Successful', 'Operation completed successfully after retry.');\n      \n      return true;\n    } catch (retryError) {\n      console.error('Retry failed:', retryError);\n      onRecovery?.(false);\n      return false;\n    } finally {\n      setErrorState(prev => ({\n        ...prev,\n        isRecovering: false\n      }));\n    }\n  }, [errorState.recoveryAttempts, maxRetries, retryDelay, onRecovery]);\n\n  // Clear error state\n  const clearError = useCallback(() => {\n    setErrorState({\n      hasError: false,\n      error: null,\n      errorCode: null,\n      isRecovering: false,\n      recoveryAttempts: 0,\n      lastErrorTime: null\n    });\n  }, []);\n\n  // Report error to local storage for debugging\n  const reportError = useCallback((error: Error, context?: string) => {\n    try {\n      const errorReport = {\n        timestamp: new Date().toISOString(),\n        error: {\n          name: error.name,\n          message: error.message,\n          stack: error.stack\n        },\n        context,\n        userAgent: navigator.userAgent,\n        url: window.location.href,\n        localStorage: Object.keys(localStorage).filter(key => \n          key.startsWith('enhanced_pain_tracker_')\n        ).length\n      };\n\n      const existingReports = JSON.parse(\n        localStorage.getItem('pain_tracker_error_reports') || '[]'\n      );\n      existingReports.push(errorReport);\n      \n      // Keep only last 10 reports\n      if (existingReports.length > 10) {\n        existingReports.splice(0, existingReports.length - 10);\n      }\n      \n      localStorage.setItem('pain_tracker_error_reports', JSON.stringify(existingReports));\n      \n      addSuccessNotification('Error Reported', 'Error details have been saved for debugging.');\n    } catch (reportingError) {\n      console.error('Failed to report error:', reportingError);\n    }\n  }, []);\n\n  // Download corrupted data for analysis\n  const downloadCorruptedData = useCallback((data: string) => {\n    try {\n      const blob = new Blob([data], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `pain-tracker-corrupted-data-${Date.now()}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch (downloadError) {\n      console.error('Failed to download corrupted data:', downloadError);\n    }\n  }, []);\n\n  // Auto-recovery for certain error types\n  useEffect(() => {\n    if (enableAutoRecovery && errorState.hasError && !errorState.isRecovering) {\n      const autoRecoverableErrors: PainTrackerErrorCode[] = ['CHART_ERROR', 'VALIDATION_ERROR'];\n      \n      if (errorState.errorCode && autoRecoverableErrors.includes(errorState.errorCode)) {\n        const timer = setTimeout(() => {\n          retryLastOperation();\n        }, retryDelay);\n        \n        return () => clearTimeout(timer);\n      }\n    }\n  }, [errorState, enableAutoRecovery, retryDelay, retryLastOperation]);\n\n  // Periodic health check\n  useEffect(() => {\n    const healthCheckInterval = setInterval(async () => {\n      try {\n        const report = await dataIntegrityService.checkDataIntegrity();\n        if (!report.isValid && report.corruptionLevel !== 'none') {\n          handleError(\n            new PainTrackerError('Data corruption detected during health check', 'DATA_CORRUPTION'),\n            'health check'\n          );\n        }\n      } catch (error) {\n        // Silently fail health checks to avoid spam\n        console.warn('Health check failed:', error);\n      }\n    }, 5 * 60 * 1000); // Every 5 minutes\n\n    return () => clearInterval(healthCheckInterval);\n  }, [dataIntegrityService, handleError]);\n\n  return {\n    errorState,\n    handleError,\n    clearError,\n    retryLastOperation,\n    reportError\n  };\n}\n\nexport default useErrorHandling;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useNotifications.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":3,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'NotificationAction' is defined but never used.","line":4,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'removeNotification'. Either include it or remove the dependency array.","line":38,"column":6,"nodeType":"ArrayExpression","endLine":38,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [removeNotification]","fix":{"range":[1474,1476],"text":"[removeNotification]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { Notification, NotificationAction } from '../types';\n\ninterface UseNotificationsReturn {\n  notifications: Notification[];\n  addNotification: (notification: Omit<Notification, 'id'>) => string;\n  removeNotification: (id: string) => void;\n  clearAllNotifications: () => void;\n  addSuccessNotification: (title: string, message: string, duration?: number) => string;\n  addErrorNotification: (title: string, message: string, duration?: number) => string;\n  addWarningNotification: (title: string, message: string, duration?: number) => string;\n  addInfoNotification: (title: string, message: string, duration?: number) => string;\n}\n\nexport const useNotifications = (): UseNotificationsReturn => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n\n  const addNotification = useCallback((notification: Omit<Notification, 'id'>): string => {\n    const id = `notification_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newNotification: Notification = {\n      ...notification,\n      id,\n      duration: notification.duration ?? 5000 // Default 5 seconds\n    };\n\n    setNotifications(prev => [...prev, newNotification]);\n\n    // Auto-remove notification after duration\n    if (newNotification.duration && newNotification.duration > 0) {\n      setTimeout(() => {\n        removeNotification(id);\n      }, newNotification.duration);\n    }\n\n    return id;\n  }, []);\n\n  const removeNotification = useCallback((id: string) => {\n    setNotifications(prev => prev.filter(notification => notification.id !== id));\n  }, []);\n\n  const clearAllNotifications = useCallback(() => {\n    setNotifications([]);\n  }, []);\n\n  const addSuccessNotification = useCallback((title: string, message: string, duration?: number): string => {\n    return addNotification({\n      type: 'success',\n      title,\n      message,\n      duration\n    });\n  }, [addNotification]);\n\n  const addErrorNotification = useCallback((title: string, message: string, duration?: number): string => {\n    return addNotification({\n      type: 'error',\n      title,\n      message,\n      duration: duration ?? 8000 // Errors stay longer\n    });\n  }, [addNotification]);\n\n  const addWarningNotification = useCallback((title: string, message: string, duration?: number): string => {\n    return addNotification({\n      type: 'warning',\n      title,\n      message,\n      duration\n    });\n  }, [addNotification]);\n\n  const addInfoNotification = useCallback((title: string, message: string, duration?: number): string => {\n    return addNotification({\n      type: 'info',\n      title,\n      message,\n      duration\n    });\n  }, [addNotification]);\n\n  return {\n    notifications,\n    addNotification,\n    removeNotification,\n    clearAllNotifications,\n    addSuccessNotification,\n    addErrorNotification,\n    addWarningNotification,\n    addInfoNotification\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useOfflineDetection.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1286,1289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1286,1289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":72,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5351,5354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5351,5354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5739,5742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5739,5742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\ninterface OfflineState {\n  isOnline: boolean;\n  isOffline: boolean;\n  wasOffline: boolean;\n  offlineDuration: number;\n  lastOnlineTime: Date | null;\n  connectionType: string | null;\n}\n\ninterface OfflineDetectionOptions {\n  checkInterval?: number;\n  pingUrl?: string;\n  timeout?: number;\n  onOnline?: () => void;\n  onOffline?: () => void;\n  onReconnect?: (offlineDuration: number) => void;\n}\n\nexport function useOfflineDetection(options: OfflineDetectionOptions = {}) {\n  const {\n    checkInterval = 30000, // 30 seconds\n    pingUrl = '/favicon.ico',\n    timeout = 5000,\n    onOnline,\n    onOffline,\n    onReconnect\n  } = options;\n\n  const [state, setState] = useState<OfflineState>({\n    isOnline: typeof navigator !== 'undefined' ? navigator.onLine : true,\n    isOffline: typeof navigator !== 'undefined' ? !navigator.onLine : false,\n    wasOffline: false,\n    offlineDuration: 0,\n    lastOnlineTime: null,\n    connectionType: null\n  });\n\n  const [offlineStartTime, setOfflineStartTime] = useState<Date | null>(null);\n\n  // Get connection information\n  const getConnectionInfo = useCallback(() => {\n    if (typeof navigator !== 'undefined' && 'connection' in navigator) {\n      const connection = (navigator as any).connection;\n      return {\n        effectiveType: connection?.effectiveType || null,\n        downlink: connection?.downlink || null,\n        rtt: connection?.rtt || null,\n        saveData: connection?.saveData || false\n      };\n    }\n    return null;\n  }, []);\n\n  // Ping server to verify actual connectivity\n  const pingServer = useCallback(async (): Promise<boolean> => {\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n      const response = await fetch(pingUrl, {\n        method: 'HEAD',\n        cache: 'no-cache',\n        signal: controller.signal\n      });\n\n      clearTimeout(timeoutId);\n      return response.ok;\n    } catch (error) {\n      return false;\n    }\n  }, [pingUrl, timeout]);\n\n  // Update online status\n  const updateOnlineStatus = useCallback(async (isOnline: boolean, skipPing = false) => {\n    // If browser says we're online, verify with server ping\n    const actuallyOnline = isOnline && !skipPing ? await pingServer() : isOnline;\n\n    setState(prevState => {\n      const now = new Date();\n      let offlineDuration = 0;\n\n      // Calculate offline duration if coming back online\n      if (actuallyOnline && prevState.isOffline && offlineStartTime) {\n        offlineDuration = now.getTime() - offlineStartTime.getTime();\n      }\n\n      return {\n        ...prevState,\n        isOnline: actuallyOnline,\n        isOffline: !actuallyOnline,\n        wasOffline: prevState.isOffline,\n        offlineDuration,\n        lastOnlineTime: actuallyOnline ? now : prevState.lastOnlineTime,\n        connectionType: getConnectionInfo()?.effectiveType || null\n      };\n    });\n\n    // Handle state transitions\n    if (actuallyOnline && state.isOffline) {\n      // Coming back online\n      const duration = offlineStartTime ? Date.now() - offlineStartTime.getTime() : 0;\n      setOfflineStartTime(null);\n      onReconnect?.(duration);\n      onOnline?.();\n    } else if (!actuallyOnline && state.isOnline) {\n      // Going offline\n      setOfflineStartTime(new Date());\n      onOffline?.();\n    }\n  }, [state.isOnline, state.isOffline, offlineStartTime, pingServer, getConnectionInfo, onOnline, onOffline, onReconnect]);\n\n  // Handle browser online/offline events\n  useEffect(() => {\n    const handleOnline = () => updateOnlineStatus(true);\n    const handleOffline = () => updateOnlineStatus(false, true);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, [updateOnlineStatus]);\n\n  // Periodic connectivity check\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateOnlineStatus(navigator.onLine);\n    }, checkInterval);\n\n    return () => clearInterval(interval);\n  }, [checkInterval, updateOnlineStatus]);\n\n  // Initialize connection info\n  useEffect(() => {\n    setState(prevState => ({\n      ...prevState,\n      connectionType: getConnectionInfo()?.effectiveType || null\n    }));\n  }, [getConnectionInfo]);\n\n  // Manual connectivity check\n  const checkConnectivity = useCallback(async () => {\n    await updateOnlineStatus(navigator.onLine);\n  }, [updateOnlineStatus]);\n\n  // Get connection quality assessment\n  const getConnectionQuality = useCallback(() => {\n    const connectionInfo = getConnectionInfo();\n    if (!connectionInfo) return 'unknown';\n\n    const { effectiveType, rtt, downlink } = connectionInfo;\n\n    if (effectiveType === '4g' && rtt < 100 && downlink > 10) return 'excellent';\n    if (effectiveType === '4g' && rtt < 200 && downlink > 5) return 'good';\n    if (effectiveType === '3g' || (rtt < 500 && downlink > 1)) return 'fair';\n    return 'poor';\n  }, [getConnectionInfo]);\n\n  return {\n    ...state,\n    checkConnectivity,\n    getConnectionQuality,\n    connectionInfo: getConnectionInfo()\n  };\n}\n\n// Offline Storage Hook\nexport function useOfflineStorage(key: string) {\n  const [offlineData, setOfflineData] = useState<any[]>([]);\n\n  // Load offline data on mount\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(`offline_${key}`);\n      if (stored) {\n        setOfflineData(JSON.parse(stored));\n      }\n    } catch (error) {\n      console.error('Failed to load offline data:', error);\n    }\n  }, [key]);\n\n  // Store data for offline use\n  const storeOfflineData = useCallback((data: any) => {\n    try {\n      const newOfflineData = [...offlineData, {\n        ...data,\n        timestamp: new Date().toISOString(),\n        id: `offline_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n      }];\n      \n      setOfflineData(newOfflineData);\n      localStorage.setItem(`offline_${key}`, JSON.stringify(newOfflineData));\n      \n      return true;\n    } catch (error) {\n      console.error('Failed to store offline data:', error);\n      return false;\n    }\n  }, [key, offlineData]);\n\n  // Clear offline data\n  const clearOfflineData = useCallback(() => {\n    setOfflineData([]);\n    localStorage.removeItem(`offline_${key}`);\n  }, [key]);\n\n  // Get offline data count\n  const getOfflineDataCount = useCallback(() => {\n    return offlineData.length;\n  }, [offlineData]);\n\n  return {\n    offlineData,\n    storeOfflineData,\n    clearOfflineData,\n    getOfflineDataCount\n  };\n}\n\nexport default useOfflineDetection;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/usePainTracker.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STORAGE_KEYS' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3367,3370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3367,3370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { PainEntry, PainEntryFormData, PainStatistics, ValidationError } from '../types';\nimport { \n  validatePainEntry, \n  calculateStatistics, \n  saveToStorage, \n  loadFromStorage, \n  clearStorage,\n  createStorageKey \n} from '../utils';\nimport { STORAGE_KEYS } from '../constants';\n\ninterface UsePainTrackerReturn {\n  // Data\n  entries: PainEntry[];\n  statistics: PainStatistics;\n  isLoading: boolean;\n  error: string | null;\n  \n  // Actions\n  addEntry: (data: PainEntryFormData) => Promise<{ success: boolean; errors?: ValidationError[] }>;\n  updateEntry: (id: string, data: Partial<PainEntryFormData>) => Promise<{ success: boolean; errors?: ValidationError[] }>;\n  deleteEntry: (id: string) => Promise<boolean>;\n  clearAllEntries: () => Promise<boolean>;\n  \n  // Utilities\n  getEntry: (id: string) => PainEntry | undefined;\n  getEntriesInRange: (startDate: string, endDate: string) => PainEntry[];\n  exportData: (format: 'json' | 'csv') => void;\n  \n  // State management\n  refreshData: () => void;\n  setError: (error: string | null) => void;\n}\n\nexport const usePainTracker = (userId?: string): UsePainTrackerReturn => {\n  const [entries, setEntries] = useState<PainEntry[]>([]);\n  const [statistics, setStatistics] = useState<PainStatistics>({\n    totalEntries: 0,\n    averagePain: 0,\n    maxPain: 0,\n    minPain: 0,\n    mostCommonSymptoms: [],\n    mostEffectiveRemedies: [],\n    painFrequency: {},\n    trendDirection: 'stable'\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const storageKey = createStorageKey(userId || 'anonymous', 'pain_records');\n\n  // Load data from storage on mount\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n        \n        const savedEntries = loadFromStorage<PainEntry[]>(storageKey);\n        if (savedEntries && Array.isArray(savedEntries)) {\n          setEntries(savedEntries);\n          setStatistics(calculateStatistics(savedEntries));\n        }\n      } catch (err) {\n        console.error('Failed to load pain tracker data:', err);\n        setError('Failed to load data. Please refresh the page.');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadData();\n  }, [storageKey]);\n\n  // Save data to storage whenever entries change\n  useEffect(() => {\n    if (!isLoading && entries.length >= 0) {\n      const success = saveToStorage(storageKey, entries);\n      if (!success) {\n        setError('Failed to save data. Please try again.');\n      }\n    }\n  }, [entries, storageKey, isLoading]);\n\n  // Recalculate statistics when entries change\n  useEffect(() => {\n    setStatistics(calculateStatistics(entries));\n  }, [entries]);\n\n  const addEntry = useCallback(async (data: PainEntryFormData): Promise<{ success: boolean; errors?: ValidationError[] }> => {\n    try {\n      setError(null);\n      \n      // Validate the entry\n      const validationErrors = validatePainEntry(data);\n      if (validationErrors.length > 0) {\n        return { success: false, errors: validationErrors };\n      }\n\n      // Check for duplicate dates - å…è®¸ç”¨æˆ·é€‰æ‹©æ˜¯å¦è¦†ç›–\n      const existingEntry = entries.find(entry => entry.date === data.date);\n      if (existingEntry) {\n        // å¦‚æœç”¨æˆ·æ˜ç¡®è¡¨ç¤ºè¦è¦†ç›–ï¼Œåˆ™åˆ é™¤æ—§è®°å½•\n        if ((data as any).overwrite === true) {\n          setEntries(prev => prev.filter(entry => entry.date !== data.date));\n        } else {\n          return {\n            success: false,\n            errors: [{\n              field: 'date',\n              message: 'An entry for this date already exists. Do you want to overwrite it?',\n              code: 'DUPLICATE_DATE'\n            }]\n          };\n        }\n      }\n\n      // Create new entry\n      const now = new Date().toISOString();\n      const newEntry: PainEntry = {\n        id: `pain_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        ...data,\n        location: data.location || [],\n        symptoms: data.symptoms || [],\n        remedies: data.remedies || [],\n        createdAt: now,\n        updatedAt: now\n      };\n\n      // Add to entries\n      setEntries(prev => [...prev, newEntry].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()));\n      \n      return { success: true };\n    } catch (err) {\n      console.error('Failed to add entry:', err);\n      setError('Failed to add entry. Please try again.');\n      return { success: false, errors: [{ field: 'general', message: 'Failed to add entry', code: 'ADD_ERROR' }] };\n    }\n  }, [entries]);\n\n  const updateEntry = useCallback(async (id: string, data: Partial<PainEntryFormData>): Promise<{ success: boolean; errors?: ValidationError[] }> => {\n    try {\n      setError(null);\n      \n      const existingEntry = entries.find(entry => entry.id === id);\n      if (!existingEntry) {\n        return { \n          success: false, \n          errors: [{ field: 'id', message: 'Entry not found', code: 'NOT_FOUND' }] \n        };\n      }\n\n      // Merge with existing data\n      const updatedData = { ...existingEntry, ...data };\n      \n      // Validate the updated entry\n      const validationErrors = validatePainEntry(updatedData);\n      if (validationErrors.length > 0) {\n        return { success: false, errors: validationErrors };\n      }\n\n      // Check for duplicate dates (excluding current entry)\n      if (data.date && data.date !== existingEntry.date) {\n        const duplicateEntry = entries.find(entry => entry.id !== id && entry.date === data.date);\n        if (duplicateEntry) {\n          return { \n            success: false, \n            errors: [{ \n              field: 'date', \n              message: 'An entry for this date already exists', \n              code: 'DUPLICATE_DATE' \n            }] \n          };\n        }\n      }\n\n      // Update entry\n      const updatedEntry: PainEntry = {\n        ...existingEntry,\n        ...data,\n        updatedAt: new Date().toISOString()\n      };\n\n      setEntries(prev => \n        prev.map(entry => entry.id === id ? updatedEntry : entry)\n          .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\n      );\n      \n      return { success: true };\n    } catch (err) {\n      console.error('Failed to update entry:', err);\n      setError('Failed to update entry. Please try again.');\n      return { success: false, errors: [{ field: 'general', message: 'Failed to update entry', code: 'UPDATE_ERROR' }] };\n    }\n  }, [entries]);\n\n  const deleteEntry = useCallback(async (id: string): Promise<boolean> => {\n    try {\n      setError(null);\n      \n      const entryExists = entries.some(entry => entry.id === id);\n      if (!entryExists) {\n        setError('Entry not found');\n        return false;\n      }\n\n      setEntries(prev => prev.filter(entry => entry.id !== id));\n      return true;\n    } catch (err) {\n      console.error('Failed to delete entry:', err);\n      setError('Failed to delete entry. Please try again.');\n      return false;\n    }\n  }, [entries]);\n\n  const clearAllEntries = useCallback(async (): Promise<boolean> => {\n    try {\n      setError(null);\n      setEntries([]);\n      const success = clearStorage(storageKey);\n      if (!success) {\n        setError('Failed to clear data. Please try again.');\n        return false;\n      }\n      return true;\n    } catch (err) {\n      console.error('Failed to clear entries:', err);\n      setError('Failed to clear data. Please try again.');\n      return false;\n    }\n  }, [storageKey]);\n\n  const getEntry = useCallback((id: string): PainEntry | undefined => {\n    return entries.find(entry => entry.id === id);\n  }, [entries]);\n\n  const getEntriesInRange = useCallback((startDate: string, endDate: string): PainEntry[] => {\n    return entries.filter(entry => {\n      const entryDate = new Date(entry.date);\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      return entryDate >= start && entryDate <= end;\n    });\n  }, [entries]);\n\n  const exportData = useCallback((format: 'json' | 'csv') => {\n    try {\n      if (format === 'json') {\n        const dataStr = JSON.stringify(entries, null, 2);\n        const blob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `pain-tracker-data-${new Date().toISOString().split('T')[0]}.json`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      } else if (format === 'csv') {\n        // CSV export logic would go here\n        // For now, just export as JSON\n        exportData('json');\n      }\n    } catch (err) {\n      console.error('Failed to export data:', err);\n      setError('Failed to export data. Please try again.');\n    }\n  }, [entries]);\n\n  const refreshData = useCallback(() => {\n    const savedEntries = loadFromStorage<PainEntry[]>(storageKey);\n    if (savedEntries && Array.isArray(savedEntries)) {\n      setEntries(savedEntries);\n    }\n  }, [storageKey]);\n\n  return {\n    // Data\n    entries,\n    statistics,\n    isLoading,\n    error,\n    \n    // Actions\n    addEntry,\n    updateEntry,\n    deleteEntry,\n    clearAllEntries,\n    \n    // Utilities\n    getEntry,\n    getEntriesInRange,\n    exportData,\n    \n    // State management\n    refreshData,\n    setError\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/hooks/useSymptomAssessment.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[846,849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[846,849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'questions' conditional could make the dependencies of useCallback Hook (at line 461) change on every render. To fix this, wrap the initialization of 'questions' in its own useMemo() Hook.","line":67,"column":9,"nodeType":"VariableDeclarator","endLine":67,"endColumn":111},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":116,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":119,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5165,5168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5165,5168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14352,14355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14352,14355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { \n  Question, \n  AssessmentAnswer, \n  AssessmentSession, \n  AssessmentResult,\n  Recommendation \n} from '../types';\nimport { assessmentQuestions } from '../data/assessmentQuestions';\nimport { saveToStorage, loadFromStorage, createStorageKey } from '../utils';\n\ninterface UseSymptomAssessmentReturn {\n  // Current session\n  currentSession: AssessmentSession | null;\n  currentQuestionIndex: number;\n  currentQuestion: Question | null;\n  isComplete: boolean;\n\n  // Progress\n  progress: number;\n  totalQuestions: number;\n\n  // Actions\n  startAssessment: (locale: string) => void;\n  answerQuestion: (answer: AssessmentAnswer) => void;\n  goToQuestion: (index: number) => void;\n  goToPreviousQuestion: () => void;\n  goToNextQuestion: () => void;\n  completeAssessment: (t?: any) => AssessmentResult | null;\n  resetAssessment: () => void;\n\n  // Results\n  result: AssessmentResult | null;\n\n  // State\n  isLoading: boolean;\n  error: string | null;\n}\n\nexport const useSymptomAssessment = (userId?: string): UseSymptomAssessmentReturn => {\n  const [currentSession, setCurrentSession] = useState<AssessmentSession | null>(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [result, setResult] = useState<AssessmentResult | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const storageKey = createStorageKey(userId || 'anonymous', 'assessment_session');\n\n  // Load saved session on mount\n  useEffect(() => {\n    const savedSession = loadFromStorage<AssessmentSession>(storageKey);\n    if (savedSession && !savedSession.completedAt) {\n      setCurrentSession(savedSession);\n      setCurrentQuestionIndex(savedSession.answers.length);\n    }\n  }, [storageKey]);\n\n  // Save session whenever it changes\n  useEffect(() => {\n    if (currentSession) {\n      saveToStorage(storageKey, currentSession);\n    }\n  }, [currentSession, storageKey]);\n\n  const questions = currentSession ? assessmentQuestions[currentSession.locale] || assessmentQuestions.en : [];\n  const currentQuestion = questions[currentQuestionIndex] || null;\n  const isComplete = currentQuestionIndex >= questions.length;\n  const progress = questions.length > 0 ? Math.min((currentQuestionIndex / questions.length) * 100, 100) : 0;\n\n  const startAssessment = useCallback((locale: string) => {\n    const sessionId = `assessment_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newSession: AssessmentSession = {\n      id: sessionId,\n      answers: [],\n      startedAt: new Date().toISOString(),\n      locale\n    };\n    \n    setCurrentSession(newSession);\n    setCurrentQuestionIndex(0);\n    setResult(null);\n    setError(null);\n  }, []);\n\n  const answerQuestion = useCallback((answer: AssessmentAnswer) => {\n    if (!currentSession) return;\n\n    setCurrentSession(prev => {\n      if (!prev) return prev;\n      \n      // Remove any existing answer for this question\n      const filteredAnswers = prev.answers.filter(a => a.questionId !== answer.questionId);\n      \n      // Add the new answer\n      const updatedAnswers = [...filteredAnswers, answer];\n      \n      return {\n        ...prev,\n        answers: updatedAnswers\n      };\n    });\n  }, [currentSession]);\n\n  const goToQuestion = useCallback((index: number) => {\n    if (index >= 0 && index <= questions.length) {\n      setCurrentQuestionIndex(index);\n    }\n  }, [questions.length]);\n\n  const goToPreviousQuestion = useCallback(() => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    }\n  }, [currentQuestionIndex]);\n\n  const goToNextQuestion = useCallback(() => {\n    if (currentQuestionIndex < questions.length) {\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  }, [currentQuestionIndex, questions.length]);\n\n  const calculateScore = useCallback((answers: AssessmentAnswer[], questions: Question[]): number => {\n    let totalScore = 0;\n    let maxPossibleScore = 0;\n\n    questions.forEach(question => {\n      const answer = answers.find(a => a.questionId === question.id);\n      if (!answer) return;\n\n      maxPossibleScore += question.weight * 10; // Assuming max weight per question is 10\n\n      if (question.type === 'scale') {\n        totalScore += (answer.value as number) * question.weight;\n      } else if (question.type === 'single') {\n        const option = question.options?.find(opt => opt.value === answer.value);\n        if (option && option.weight !== undefined) {\n          totalScore += option.weight * question.weight;\n        }\n      } else if (question.type === 'multiple') {\n        const selectedValues = answer.value as string[];\n        selectedValues.forEach(value => {\n          const option = question.options?.find(opt => opt.value === value);\n          if (option && option.weight !== undefined) {\n            totalScore += option.weight * question.weight;\n          }\n        });\n      }\n    });\n\n    return Math.min(totalScore, maxPossibleScore);\n  }, []);\n\n  const generateRecommendations = useCallback((score: number, percentage: number, answers: AssessmentAnswer[], t?: any, locale?: string): Recommendation[] => {\n    const recommendations: Recommendation[] = [];\n    const isEnglish = locale === 'en';\n\n    // Emergency recommendations\n    if (percentage >= 80) {\n      const titleRaw = t ? t('recommendations.emergencyMedical.title') : (isEnglish ? 'Seek Immediate Medical Care' : 'å»ºè®®ç«‹å³å°±åŒ»');\n      const descriptionRaw = t ? t('recommendations.emergencyMedical.description') : (isEnglish ? 'Your symptoms may require professional medical evaluation and treatment' : 'æ‚¨çš„ç—‡çŠ¶å¯èƒ½éœ€è¦ä¸“ä¸šåŒ»ç–—è¯„ä¼°å’Œæ²»ç–—');\n      const timeframeRaw = t ? t('recommendations.emergencyMedical.timeframe') : (isEnglish ? 'Immediately' : 'ç«‹å³');\n      const actionStepsRaw = t ? t('recommendations.emergencyMedical.actionSteps') : (isEnglish ? [\n        'Contact your gynecologist',\n        'If pain is severe, consider emergency care',\n        'Keep a detailed symptom diary'\n      ] : [\n        'è”ç³»æ‚¨çš„å¦‡ç§‘åŒ»ç”Ÿ',\n        'å¦‚æœç–¼ç—›å‰§çƒˆï¼Œè€ƒè™‘æ€¥è¯Šå°±åŒ»',\n        'è®°å½•è¯¦ç»†çš„ç—‡çŠ¶æ—¥å¿—'\n      ]);\n\n      // Use fallback if translation returns the key itself (indicating translation failed)\n      const title = (titleRaw && !titleRaw.includes('recommendations.')) ? titleRaw : (isEnglish ? 'Seek Immediate Medical Care' : 'å»ºè®®ç«‹å³å°±åŒ»');\n      const description = (descriptionRaw && !descriptionRaw.includes('recommendations.')) ? descriptionRaw : (isEnglish ? 'Your symptoms may require professional medical evaluation and treatment' : 'æ‚¨çš„ç—‡çŠ¶å¯èƒ½éœ€è¦ä¸“ä¸šåŒ»ç–—è¯„ä¼°å’Œæ²»ç–—');\n      const timeframe = (timeframeRaw && !timeframeRaw.includes('recommendations.')) ? timeframeRaw : (isEnglish ? 'Immediately' : 'ç«‹å³');\n      const actionSteps = (Array.isArray(actionStepsRaw) && actionStepsRaw.length > 0 && !actionStepsRaw[0]?.includes?.('recommendations.'))\n        ? actionStepsRaw\n        : (isEnglish ? [\n            'Contact your gynecologist',\n            'If pain is severe, consider emergency care',\n            'Keep a detailed symptom diary'\n          ] : [\n            'è”ç³»æ‚¨çš„å¦‡ç§‘åŒ»ç”Ÿ',\n            'å¦‚æœç–¼ç—›å‰§çƒˆï¼Œè€ƒè™‘æ€¥è¯Šå°±åŒ»',\n            'è®°å½•è¯¦ç»†çš„ç—‡çŠ¶æ—¥å¿—'\n          ]);\n\n\n\n      recommendations.push({\n        id: 'emergency_medical',\n        category: 'medical',\n        title: title,\n        description: description,\n        priority: 'high',\n        timeframe: timeframe,\n        actionSteps: Array.isArray(actionSteps) ? actionSteps : [actionSteps]\n      });\n    }\n\n    // Pain management recommendations\n    if (percentage >= 40) {\n      const titleRaw = t ? t('recommendations.painManagement.title') : (isEnglish ? 'Pain Management Strategies' : 'ç–¼ç—›ç®¡ç†ç­–ç•¥');\n      const descriptionRaw = t ? t('recommendations.painManagement.description') : (isEnglish ? 'Multiple methods can help relieve menstrual pain' : 'å¤šç§æ–¹æ³•å¯ä»¥å¸®åŠ©ç¼“è§£ç»æœŸç–¼ç—›');\n      const timeframeRaw = t ? t('recommendations.painManagement.timeframe') : (isEnglish ? 'Immediately available' : 'ç«‹å³å¯ç”¨');\n      const actionStepsRaw = t ? t('recommendations.painManagement.actionSteps') : (isEnglish ? [\n        'Use heating pads or hot water bottles',\n        'Try light exercise like walking',\n        'Consider over-the-counter pain relievers (follow instructions)'\n      ] : [\n        'ä½¿ç”¨çƒ­æ•·å«æˆ–çƒ­æ°´è¢‹',\n        'å°è¯•è½»åº¦è¿åŠ¨å¦‚æ•£æ­¥',\n        'è€ƒè™‘éå¤„æ–¹æ­¢ç—›è¯ï¼ˆæŒ‰è¯´æ˜ä½¿ç”¨ï¼‰'\n      ]);\n\n      // Use fallback if translation returns the key itself\n      const title = (titleRaw && !titleRaw.includes('recommendations.')) ? titleRaw : (isEnglish ? 'Pain Management Strategies' : 'ç–¼ç—›ç®¡ç†ç­–ç•¥');\n      const description = (descriptionRaw && !descriptionRaw.includes('recommendations.')) ? descriptionRaw : (isEnglish ? 'Multiple methods can help relieve menstrual pain' : 'å¤šç§æ–¹æ³•å¯ä»¥å¸®åŠ©ç¼“è§£ç»æœŸç–¼ç—›');\n      const timeframe = (timeframeRaw && !timeframeRaw.includes('recommendations.')) ? timeframeRaw : (isEnglish ? 'Immediately available' : 'ç«‹å³å¯ç”¨');\n      const actionSteps = (Array.isArray(actionStepsRaw) && actionStepsRaw.length > 0 && !actionStepsRaw[0]?.includes?.('recommendations.'))\n        ? actionStepsRaw\n        : (isEnglish ? [\n            'Use heating pads or hot water bottles',\n            'Try light exercise like walking',\n            'Consider over-the-counter pain relievers (follow instructions)'\n          ] : [\n            'ä½¿ç”¨çƒ­æ•·å«æˆ–çƒ­æ°´è¢‹',\n            'å°è¯•è½»åº¦è¿åŠ¨å¦‚æ•£æ­¥',\n            'è€ƒè™‘éå¤„æ–¹æ­¢ç—›è¯ï¼ˆæŒ‰è¯´æ˜ä½¿ç”¨ï¼‰'\n          ]);\n\n\n\n      recommendations.push({\n        id: 'pain_management',\n        category: 'immediate',\n        title: title,\n        description: description,\n        priority: 'high',\n        timeframe: timeframe,\n        actionSteps: Array.isArray(actionSteps) ? actionSteps : [actionSteps]\n      });\n    }\n\n    // Lifestyle recommendations\n    const lifestyleTitleRaw = t ? t('recommendations.lifestyleChanges.title') : (isEnglish ? 'Lifestyle Adjustments' : 'ç”Ÿæ´»æ–¹å¼è°ƒæ•´');\n    const lifestyleDescriptionRaw = t ? t('recommendations.lifestyleChanges.description') : (isEnglish ? 'Long-term lifestyle changes can significantly improve symptoms' : 'é•¿æœŸçš„ç”Ÿæ´»æ–¹å¼æ”¹å˜å¯ä»¥æ˜¾è‘—æ”¹å–„ç—‡çŠ¶');\n    const lifestyleTimeframeRaw = t ? t('recommendations.lifestyleChanges.timeframe') : (isEnglish ? '2-3 months to see effects' : '2-3ä¸ªæœˆè§æ•ˆ');\n    const lifestyleActionStepsRaw = t ? t('recommendations.lifestyleChanges.actionSteps') : (isEnglish ? [\n      'Maintain regular exercise habits',\n      'Ensure adequate sleep',\n      'Learn stress management techniques',\n      'Maintain a balanced diet'\n    ] : [\n      'ä¿æŒè§„å¾‹çš„è¿åŠ¨ä¹ æƒ¯',\n      'ç¡®ä¿å……è¶³çš„ç¡çœ ',\n      'å­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§',\n      'ä¿æŒå‡è¡¡é¥®é£Ÿ'\n    ]);\n\n    // Use fallback if translation returns the key itself\n    const lifestyleTitle = (lifestyleTitleRaw && !lifestyleTitleRaw.includes('recommendations.')) ? lifestyleTitleRaw : (isEnglish ? 'Lifestyle Adjustments' : 'ç”Ÿæ´»æ–¹å¼è°ƒæ•´');\n    const lifestyleDescription = (lifestyleDescriptionRaw && !lifestyleDescriptionRaw.includes('recommendations.')) ? lifestyleDescriptionRaw : (isEnglish ? 'Long-term lifestyle changes can significantly improve symptoms' : 'é•¿æœŸçš„ç”Ÿæ´»æ–¹å¼æ”¹å˜å¯ä»¥æ˜¾è‘—æ”¹å–„ç—‡çŠ¶');\n    const lifestyleTimeframe = (lifestyleTimeframeRaw && !lifestyleTimeframeRaw.includes('recommendations.')) ? lifestyleTimeframeRaw : (isEnglish ? '2-3 months to see effects' : '2-3ä¸ªæœˆè§æ•ˆ');\n    const lifestyleActionSteps = (Array.isArray(lifestyleActionStepsRaw) && lifestyleActionStepsRaw.length > 0 && !lifestyleActionStepsRaw[0]?.includes?.('recommendations.'))\n      ? lifestyleActionStepsRaw\n      : (isEnglish ? [\n          'Maintain regular exercise habits',\n          'Ensure adequate sleep',\n          'Learn stress management techniques',\n          'Maintain a balanced diet'\n        ] : [\n          'ä¿æŒè§„å¾‹çš„è¿åŠ¨ä¹ æƒ¯',\n          'ç¡®ä¿å……è¶³çš„ç¡çœ ',\n          'å­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§',\n          'ä¿æŒå‡è¡¡é¥®é£Ÿ'\n        ]);\n\n\n\n    recommendations.push({\n      id: 'lifestyle_changes',\n      category: 'lifestyle',\n      title: lifestyleTitle,\n      description: lifestyleDescription,\n      priority: 'medium',\n      timeframe: lifestyleTimeframe,\n      actionSteps: Array.isArray(lifestyleActionSteps) ? lifestyleActionSteps : [lifestyleActionSteps]\n    });\n\n    // Self-care recommendations\n    const selfcareTitleRaw = t ? t('recommendations.selfcarePractices.title') : (isEnglish ? 'Self-Care Practices' : 'è‡ªæˆ‘æŠ¤ç†å®è·µ');\n    const selfcareDescriptionRaw = t ? t('recommendations.selfcarePractices.description') : (isEnglish ? 'Daily self-care can help you better manage symptoms' : 'æ—¥å¸¸çš„è‡ªæˆ‘æŠ¤ç†å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°ç®¡ç†ç—‡çŠ¶');\n    const selfcareTimeframeRaw = t ? t('recommendations.selfcarePractices.timeframe') : (isEnglish ? 'Ongoing' : 'æŒç»­è¿›è¡Œ');\n    const selfcareActionStepsRaw = t ? t('recommendations.selfcarePractices.actionSteps') : (isEnglish ? [\n      'Practice deep breathing and meditation',\n      'Use pain tracker to record symptoms',\n      'Build a support network',\n      'Learn relaxation techniques'\n    ] : [\n      'ç»ƒä¹ æ·±å‘¼å¸å’Œå†¥æƒ³',\n      'ä½¿ç”¨ç–¼ç—›è¿½è¸ªå™¨è®°å½•ç—‡çŠ¶',\n      'å»ºç«‹æ”¯æŒç½‘ç»œ',\n      'å­¦ä¹ æ”¾æ¾æŠ€å·§'\n    ]);\n\n    // Use fallback if translation returns the key itself\n    const selfcareTitle = (selfcareTitleRaw && !selfcareTitleRaw.includes('recommendations.')) ? selfcareTitleRaw : (isEnglish ? 'Self-Care Practices' : 'è‡ªæˆ‘æŠ¤ç†å®è·µ');\n    const selfcareDescription = (selfcareDescriptionRaw && !selfcareDescriptionRaw.includes('recommendations.')) ? selfcareDescriptionRaw : (isEnglish ? 'Daily self-care can help you better manage symptoms' : 'æ—¥å¸¸çš„è‡ªæˆ‘æŠ¤ç†å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°ç®¡ç†ç—‡çŠ¶');\n    const selfcareTimeframe = (selfcareTimeframeRaw && !selfcareTimeframeRaw.includes('recommendations.')) ? selfcareTimeframeRaw : (isEnglish ? 'Ongoing' : 'æŒç»­è¿›è¡Œ');\n    const selfcareActionSteps = (Array.isArray(selfcareActionStepsRaw) && selfcareActionStepsRaw.length > 0 && !selfcareActionStepsRaw[0]?.includes?.('recommendations.'))\n      ? selfcareActionStepsRaw\n      : (isEnglish ? [\n          'Practice deep breathing and meditation',\n          'Use pain tracker to record symptoms',\n          'Build a support network',\n          'Learn relaxation techniques'\n        ] : [\n          'ç»ƒä¹ æ·±å‘¼å¸å’Œå†¥æƒ³',\n          'ä½¿ç”¨ç–¼ç—›è¿½è¸ªå™¨è®°å½•ç—‡çŠ¶',\n          'å»ºç«‹æ”¯æŒç½‘ç»œ',\n          'å­¦ä¹ æ”¾æ¾æŠ€å·§'\n        ]);\n\n\n\n    recommendations.push({\n      id: 'selfcare_practices',\n      category: 'selfcare',\n      title: selfcareTitle,\n      description: selfcareDescription,\n      priority: 'medium',\n      timeframe: selfcareTimeframe,\n      actionSteps: Array.isArray(selfcareActionSteps) ? selfcareActionSteps : [selfcareActionSteps]\n    });\n\n    return recommendations;\n  }, []);\n\n  const completeAssessment = useCallback((t?: any, currentLocale?: string): AssessmentResult | null => {\n    console.log('completeAssessment called:', {\n      currentSession: !!currentSession,\n      answersCount: currentSession?.answers.length,\n      questionsCount: questions.length,\n      currentLocale\n    });\n\n    if (!currentSession) {\n      console.error('No current session');\n      return null;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const score = calculateScore(currentSession.answers, questions);\n      const maxScore = questions.reduce((sum, q) => sum + (q.weight * 10), 0);\n      const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;\n      // Use the current locale parameter if provided, otherwise fall back to session locale\n      const effectiveLocale = currentLocale || currentSession.locale;\n      const isEnglish = effectiveLocale === 'en';\n\n      console.log('Assessment calculation:', {\n        score,\n        maxScore,\n        percentage,\n        answersCount: currentSession.answers.length,\n        locale: currentSession.locale\n      });\n\n      let severity: 'mild' | 'moderate' | 'severe' | 'emergency';\n      let type: 'normal' | 'mild' | 'moderate' | 'severe' | 'emergency';\n      let message: string;\n      let summary: string;\n\n      if (percentage >= 80) {\n        severity = 'emergency';\n        type = 'emergency';\n        message = t ? t('resultMessages.emergency') : (isEnglish ? 'Your symptoms are quite severe. We recommend consulting a healthcare professional as soon as possible.' : 'æ‚¨çš„ç—‡çŠ¶è¾ƒä¸ºä¸¥é‡ï¼Œå»ºè®®å°½å¿«å’¨è¯¢åŒ»ç–—ä¸“ä¸šäººå£«ã€‚');\n        summary = t ? t('resultMessages.emergencySummary') : (isEnglish ? 'Assessment indicates you may need professional medical attention.' : 'è¯„ä¼°æ˜¾ç¤ºæ‚¨å¯èƒ½éœ€è¦ä¸“ä¸šåŒ»ç–—å…³æ³¨ã€‚');\n      } else if (percentage >= 60) {\n        severity = 'severe';\n        type = 'severe';\n        message = t ? t('resultMessages.severe') : (isEnglish ? 'Your symptoms are quite serious. We recommend adopting comprehensive management strategies.' : 'æ‚¨çš„ç—‡çŠ¶æ¯”è¾ƒä¸¥é‡ï¼Œå»ºè®®é‡‡å–ç»¼åˆç®¡ç†ç­–ç•¥ã€‚');\n        summary = t ? t('resultMessages.severeSummary') : (isEnglish ? 'Your symptoms require active management and possible medical intervention.' : 'æ‚¨çš„ç—‡çŠ¶éœ€è¦ç§¯æçš„ç®¡ç†å’Œå¯èƒ½çš„åŒ»ç–—å¹²é¢„ã€‚');\n      } else if (percentage >= 40) {\n        severity = 'moderate';\n        type = 'moderate';\n        message = t ? t('resultMessages.moderate') : (isEnglish ? 'You have moderate symptoms that can be managed through various methods.' : 'æ‚¨æœ‰ä¸­ç­‰ç¨‹åº¦çš„ç—‡çŠ¶ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹æ³•è¿›è¡Œç®¡ç†ã€‚');\n        summary = t ? t('resultMessages.moderateSummary') : (isEnglish ? 'Your symptoms are manageable with recommended relief strategies.' : 'æ‚¨çš„ç—‡çŠ¶æ˜¯å¯ä»¥ç®¡ç†çš„ï¼Œå»ºè®®é‡‡ç”¨å¤šç§ç¼“è§£ç­–ç•¥ã€‚');\n      } else {\n        severity = 'mild';\n        type = 'mild';\n        message = t ? t('resultMessages.mild') : (isEnglish ? 'Your symptoms are relatively mild and can be well managed through simple self-care.' : 'æ‚¨çš„ç—‡çŠ¶ç›¸å¯¹è¾ƒè½»ï¼Œé€šè¿‡ç®€å•çš„è‡ªæˆ‘æŠ¤ç†å°±èƒ½å¾ˆå¥½åœ°ç®¡ç†ã€‚');\n        summary = t ? t('resultMessages.mildSummary') : (isEnglish ? 'Your symptoms are mild and can be improved through lifestyle adjustments.' : 'æ‚¨çš„ç—‡çŠ¶è¾ƒè½»ï¼Œå¯ä»¥é€šè¿‡ç”Ÿæ´»æ–¹å¼è°ƒæ•´æ¥æ”¹å–„ã€‚');\n      }\n\n      const recommendations = generateRecommendations(score, percentage, currentSession.answers, t, effectiveLocale);\n\n      const assessmentResult: AssessmentResult = {\n        sessionId: currentSession.id,\n        type,\n        severity,\n        score,\n        maxScore,\n        percentage,\n        recommendations,\n        emergency: percentage >= 80,\n        message,\n        summary,\n        relatedArticles: [\n          '/articles/menstrual-pain-management',\n          '/articles/lifestyle-tips-for-period-health',\n          '/articles/when-to-see-a-doctor'\n        ],\n        nextSteps: t ? [\n          t('result.nextSteps.trackSymptoms') || (isEnglish ? 'Use pain tracker to record symptoms' : 'ä½¿ç”¨ç–¼ç—›è¿½è¸ªå™¨è®°å½•ç—‡çŠ¶'),\n          t('result.nextSteps.tryRecommendations') || (isEnglish ? 'Try recommended relief methods' : 'å°è¯•æ¨èçš„ç¼“è§£æ–¹æ³•'),\n          t('result.nextSteps.consultDoctor') || (isEnglish ? 'Consult a doctor if symptoms persist or worsen' : 'å¦‚æœç—‡çŠ¶æŒç»­æˆ–æ¶åŒ–ï¼Œè¯·å’¨è¯¢åŒ»ç”Ÿ')\n        ] : (isEnglish ? [\n          'Use pain tracker to record symptoms',\n          'Try recommended relief methods',\n          'Consult a doctor if symptoms persist or worsen'\n        ] : [\n          'ä½¿ç”¨ç–¼ç—›è¿½è¸ªå™¨è®°å½•ç—‡çŠ¶',\n          'å°è¯•æ¨èçš„ç¼“è§£æ–¹æ³•',\n          'å¦‚æœç—‡çŠ¶æŒç»­æˆ–æ¶åŒ–ï¼Œè¯·å’¨è¯¢åŒ»ç”Ÿ'\n        ]),\n        createdAt: new Date().toISOString()\n      };\n\n      // Update session with completion time and result\n      const completedSession = {\n        ...currentSession,\n        result: assessmentResult,\n        completedAt: new Date().toISOString()\n      };\n\n      console.log('Setting completed session and result:', {\n        completedSession,\n        assessmentResult\n      });\n\n      setCurrentSession(completedSession);\n      setResult(assessmentResult);\n\n      console.log('Result state should be updated');\n\n      return assessmentResult;\n    } catch (err) {\n      console.error('Failed to complete assessment:', err);\n      const effectiveLocale = currentLocale || currentSession?.locale;\n      const isEnglish = effectiveLocale === 'en';\n      setError(t ? t('messages.assessmentFailed') : (isEnglish ? 'An error occurred while completing the assessment. Please try again.' : 'è¯„ä¼°å®Œæˆæ—¶å‡ºç°é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚'));\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentSession, calculateScore, generateRecommendations, questions]);\n\n  const resetAssessment = useCallback(() => {\n    setCurrentSession(null);\n    setCurrentQuestionIndex(0);\n    setResult(null);\n    setError(null);\n    // Clear saved session\n    localStorage.removeItem(storageKey);\n  }, [storageKey]);\n\n  return {\n    // Current session\n    currentSession,\n    currentQuestionIndex,\n    currentQuestion,\n    isComplete,\n    \n    // Progress\n    progress,\n    totalQuestions: questions.length,\n    \n    // Actions\n    startAssessment,\n    answerQuestion,\n    goToQuestion,\n    goToPreviousQuestion,\n    goToNextQuestion,\n    completeAssessment,\n    resetAssessment,\n    \n    // Results\n    result,\n    \n    // State\n    isLoading,\n    error\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/stores/healthDataStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[485,488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[485,488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[500,503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[500,503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[520,523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[520,523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1470,1473],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1470,1473],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\n// æ•°æ®ç±»å‹å®šä¹‰\nexport interface PainEntry {\n  id: string;\n  date: string;\n  painLevel: number;\n  duration?: number;\n  location: string[];\n  symptoms: string[];\n  remedies: string[];\n  notes?: string;\n  timestamp: string;\n}\n\nexport interface ConstitutionResult {\n  id: string;\n  primaryType: string;\n  confidence: number;\n  answers: any[];\n  recommendations: {\n    acupoints: any;\n    diet: any;\n    lifestyle: any;\n  };\n  timestamp: string;\n}\n\nexport interface UserPreferences {\n  language: 'zh' | 'en';\n  theme: 'light' | 'dark';\n  notifications: {\n    painReminders: boolean;\n    assessmentReminders: boolean;\n    tipOfTheDay: boolean;\n  };\n  privacy: {\n    dataSharing: boolean;\n    analytics: boolean;\n  };\n}\n\nexport interface HealthDataState {\n  // ç–¼ç—›è¿½è¸ªæ•°æ®\n  painEntries: PainEntry[];\n  \n  // ä½“è´¨æµ‹è¯•ç»“æœ\n  constitutionResults: ConstitutionResult[];\n  \n  // ç”¨æˆ·åå¥½\n  preferences: UserPreferences;\n  \n  // æ•°æ®çŠ¶æ€\n  isLoading: boolean;\n  lastSyncTime: string | null;\n  \n  // Actions\n  addPainEntry: (entry: Omit<PainEntry, 'id' | 'timestamp'>) => void;\n  updatePainEntry: (id: string, updates: Partial<PainEntry>) => void;\n  deletePainEntry: (id: string) => void;\n  \n  addConstitutionResult: (result: Omit<ConstitutionResult, 'id' | 'timestamp'>) => void;\n  \n  updatePreferences: (preferences: Partial<UserPreferences>) => void;\n  \n  // æ•°æ®åˆ†ææ–¹æ³•\n  getPainTrends: () => any;\n  getAveragePainLevel: () => number;\n  getMostCommonSymptoms: () => string[];\n  \n  // æ•°æ®ç®¡ç†\n  exportData: () => string;\n  importData: (data: string) => boolean;\n  clearAllData: () => void;\n}\n\n// é»˜è®¤ç”¨æˆ·åå¥½\nconst defaultPreferences: UserPreferences = {\n  language: 'zh',\n  theme: 'light',\n  notifications: {\n    painReminders: true,\n    assessmentReminders: true,\n    tipOfTheDay: true,\n  },\n  privacy: {\n    dataSharing: false,\n    analytics: true,\n  },\n};\n\n// ç”Ÿæˆå”¯ä¸€ID\nconst generateId = () => `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n// åˆ›å»ºZustand Store\nexport const useHealthDataStore = create<HealthDataState>()(\n  persist(\n    (set, get) => ({\n      // åˆå§‹çŠ¶æ€\n      painEntries: [],\n      constitutionResults: [],\n      preferences: defaultPreferences,\n      isLoading: false,\n      lastSyncTime: null,\n\n      // ç–¼ç—›æ•°æ®ç®¡ç†\n      addPainEntry: (entry) => {\n        const newEntry: PainEntry = {\n          ...entry,\n          id: generateId(),\n          timestamp: new Date().toISOString(),\n        };\n        \n        set((state) => ({\n          painEntries: [...state.painEntries, newEntry],\n          lastSyncTime: new Date().toISOString(),\n        }));\n      },\n\n      updatePainEntry: (id, updates) => {\n        set((state) => ({\n          painEntries: state.painEntries.map((entry) =>\n            entry.id === id ? { ...entry, ...updates } : entry\n          ),\n          lastSyncTime: new Date().toISOString(),\n        }));\n      },\n\n      deletePainEntry: (id) => {\n        set((state) => ({\n          painEntries: state.painEntries.filter((entry) => entry.id !== id),\n          lastSyncTime: new Date().toISOString(),\n        }));\n      },\n\n      // ä½“è´¨æµ‹è¯•ç»“æœç®¡ç†\n      addConstitutionResult: (result) => {\n        const newResult: ConstitutionResult = {\n          ...result,\n          id: generateId(),\n          timestamp: new Date().toISOString(),\n        };\n        \n        set((state) => ({\n          constitutionResults: [...state.constitutionResults, newResult],\n          lastSyncTime: new Date().toISOString(),\n        }));\n      },\n\n      // ç”¨æˆ·åå¥½ç®¡ç†\n      updatePreferences: (newPreferences) => {\n        set((state) => ({\n          preferences: { ...state.preferences, ...newPreferences },\n          lastSyncTime: new Date().toISOString(),\n        }));\n      },\n\n      // æ•°æ®åˆ†ææ–¹æ³•\n      getPainTrends: () => {\n        const { painEntries } = get();\n        // å®ç°ç–¼ç—›è¶‹åŠ¿åˆ†æé€»è¾‘\n        return painEntries.reduce((trends, entry) => {\n          const date = entry.date;\n          if (!trends[date]) {\n            trends[date] = [];\n          }\n          trends[date].push(entry.painLevel);\n          return trends;\n        }, {} as Record<string, number[]>);\n      },\n\n      getAveragePainLevel: () => {\n        const { painEntries } = get();\n        if (painEntries.length === 0) return 0;\n        \n        const total = painEntries.reduce((sum, entry) => sum + entry.painLevel, 0);\n        return Math.round((total / painEntries.length) * 10) / 10;\n      },\n\n      getMostCommonSymptoms: () => {\n        const { painEntries } = get();\n        const symptomCounts: Record<string, number> = {};\n        \n        painEntries.forEach((entry) => {\n          entry.symptoms.forEach((symptom) => {\n            symptomCounts[symptom] = (symptomCounts[symptom] || 0) + 1;\n          });\n        });\n        \n        return Object.entries(symptomCounts)\n          .sort(([, a], [, b]) => b - a)\n          .slice(0, 5)\n          .map(([symptom]) => symptom);\n      },\n\n      // æ•°æ®å¯¼å…¥å¯¼å‡º\n      exportData: () => {\n        const state = get();\n        return JSON.stringify({\n          painEntries: state.painEntries,\n          constitutionResults: state.constitutionResults,\n          preferences: state.preferences,\n          exportTime: new Date().toISOString(),\n        });\n      },\n\n      importData: (data) => {\n        try {\n          const parsedData = JSON.parse(data);\n          set({\n            painEntries: parsedData.painEntries || [],\n            constitutionResults: parsedData.constitutionResults || [],\n            preferences: { ...defaultPreferences, ...parsedData.preferences },\n            lastSyncTime: new Date().toISOString(),\n          });\n          return true;\n        } catch (error) {\n          console.error('Failed to import data:', error);\n          return false;\n        }\n      },\n\n      clearAllData: () => {\n        set({\n          painEntries: [],\n          constitutionResults: [],\n          preferences: defaultPreferences,\n          lastSyncTime: new Date().toISOString(),\n        });\n      },\n    }),\n    {\n      name: 'periodhub-health-data',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        painEntries: state.painEntries,\n        constitutionResults: state.constitutionResults,\n        preferences: state.preferences,\n        lastSyncTime: state.lastSyncTime,\n      }),\n    }\n  )\n);\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/types/constitution.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3191,3194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3191,3194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å…±äº«ç±»å‹å®šä¹‰\nexport interface PainEntry {\n  id: string;\n  date: string; // ISO date string (YYYY-MM-DD)\n  painLevel: number; // 1-10\n  duration?: number; // minutes\n  location: string[];\n  menstrualStatus: 'period' | 'pre' | 'post' | 'ovulation' | 'other';\n  symptoms: string[];\n  remedies: string[];\n  effectiveness?: number; // 1-5\n  notes?: string;\n  createdAt: string; // ISO timestamp\n  updatedAt: string; // ISO timestamp\n}\n\nexport interface PainEntryFormData {\n  date: string;\n  painLevel: number;\n  duration?: number;\n  location: string[];\n  menstrualStatus: 'period' | 'pre' | 'post' | 'ovulation' | 'other';\n  symptoms: string[];\n  remedies: string[];\n  effectiveness?: number;\n  notes?: string;\n}\n\n// ç—‡çŠ¶è¯„ä¼°ç›¸å…³ç±»å‹\nexport interface Option {\n  value: string | number;\n  label: string;\n  icon?: string;\n  description?: string;\n  weight?: number; // ç”¨äºè¯„åˆ†è®¡ç®—\n}\n\nexport interface Question {\n  id: string;\n  type: 'single' | 'multiple' | 'scale' | 'text' | 'range' | 'boolean';\n  title: string;\n  description?: string;\n  options?: Option[];\n  validation?: {\n    required?: boolean;\n    min?: number;\n    max?: number;\n    minLength?: number;\n    maxLength?: number;\n  };\n  conditional?: {\n    dependsOn: string;\n    values: (string | number)[];\n  };\n  category: 'basic' | 'pain' | 'symptoms' | 'lifestyle' | 'medical';\n  weight: number; // é—®é¢˜æƒé‡\n}\n\nexport interface AssessmentAnswer {\n  questionId: string;\n  value: string | number | string[] | boolean;\n  timestamp: string;\n}\n\nexport interface AssessmentSession {\n  id: string;\n  answers: AssessmentAnswer[];\n  result?: AssessmentResult;\n  startedAt: string;\n  completedAt?: string;\n  locale: string;\n}\n\nexport interface AssessmentResult {\n  sessionId: string;\n  type: 'normal' | 'mild' | 'moderate' | 'severe' | 'emergency';\n  severity: 'mild' | 'moderate' | 'severe' | 'emergency';\n  score: number;\n  maxScore: number;\n  percentage: number;\n  recommendations: Recommendation[];\n  emergency?: boolean;\n  message: string;\n  summary: string;\n  relatedArticles: string[];\n  nextSteps: string[];\n  createdAt: string;\n}\n\nexport interface Recommendation {\n  id: string;\n  category: 'immediate' | 'lifestyle' | 'medical' | 'dietary' | 'exercise' | 'selfcare';\n  title: string;\n  description: string;\n  priority: 'high' | 'medium' | 'low';\n  timeframe: string;\n  evidence?: string;\n  actionSteps?: string[];\n  resources?: {\n    title: string;\n    url: string;\n    type: 'article' | 'video' | 'tool' | 'external';\n  }[];\n}\n\n// æ•°æ®å¯è§†åŒ–ç›¸å…³ç±»å‹\nexport interface ChartData {\n  labels: string[];\n  datasets: ChartDataset[];\n}\n\nexport interface ChartDataset {\n  label: string;\n  data: number[];\n  borderColor?: string;\n  backgroundColor?: string;\n  tension?: number;\n  fill?: boolean;\n}\n\nexport interface PainStatistics {\n  totalEntries: number;\n  averagePain: number;\n  maxPain: number;\n  minPain: number;\n  mostCommonSymptoms: string[];\n  mostEffectiveRemedies: string[];\n  painFrequency: Record<string, number>;\n  trendDirection: 'improving' | 'worsening' | 'stable';\n}\n\n// é”™è¯¯å¤„ç†ç±»å‹\nexport interface ValidationError {\n  field: string;\n  message: string;\n  code: string;\n}\n\nexport interface ApiError {\n  message: string;\n  code: string;\n  details?: Record<string, any>;\n}\n\n// æœ¬åœ°å­˜å‚¨ç›¸å…³ç±»å‹\nexport interface StorageData<T> {\n  data: T;\n  version: string;\n  timestamp: string;\n  checksum?: string;\n}\n\n// å¯¼å‡ºç›¸å…³ç±»å‹\nexport interface ExportOptions {\n  format: 'json' | 'csv' | 'pdf';\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n  includeCharts?: boolean;\n  includeStatistics?: boolean;\n}\n\n// é€šçŸ¥ç±»å‹\nexport interface Notification {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title: string;\n  message: string;\n  duration?: number;\n  actions?: NotificationAction[];\n}\n\nexport interface NotificationAction {\n  label: string;\n  action: () => void;\n  style?: 'primary' | 'secondary';\n}\n\n// ç”¨æˆ·åå¥½è®¾ç½®\nexport interface UserPreferences {\n  language: 'en' | 'zh';\n  theme: 'light' | 'dark' | 'auto';\n  notifications: {\n    reminders: boolean;\n    insights: boolean;\n    updates: boolean;\n  };\n  privacy: {\n    analytics: boolean;\n    crashReports: boolean;\n  };\n  display: {\n    chartType: 'line' | 'bar' | 'area';\n    dateFormat: 'YYYY-MM-DD' | 'DD/MM/YYYY' | 'MM/DD/YYYY';\n    timeFormat: '24h' | '12h';\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/utils/dateFormatting.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatDistanceToNow' is defined but never used.","line":1,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format, formatDistanceToNow, isToday, isYesterday, differenceInDays, differenceInWeeks, differenceInMonths } from 'date-fns';\nimport { enUS, zhCN } from 'date-fns/locale';\n\n// æ—¥æœŸæ—¶é—´æ ¼å¼å¸¸é‡ï¼ˆä¿®å¤ç¼ºå¤±çš„DATE_TIME_FORMATSï¼‰\nconst DATE_TIME_FORMATS = {\n  en: {\n    short: 'MMM d, yyyy',\n    medium: 'MMM d, yyyy h:mm a',\n    long: 'MMMM d, yyyy h:mm:ss a',\n    time: 'h:mm a',\n    date: 'MMMM d, yyyy',\n    monthYear: 'MMMM yyyy',\n    relative: {\n      today: 'Today',\n      yesterday: 'Yesterday',\n      daysAgo: (days: number) => `${days} day${days !== 1 ? 's' : ''} ago`,\n      weeksAgo: (weeks: number) => `${weeks} week${weeks !== 1 ? 's' : ''} ago`,\n      monthsAgo: (months: number) => `${months} month${months !== 1 ? 's' : ''} ago`\n    }\n  },\n  zh: {\n    short: 'yyyyå¹´Mæœˆdæ—¥',\n    medium: 'yyyyå¹´Mæœˆdæ—¥ HH:mm',\n    long: 'yyyyå¹´Mæœˆdæ—¥ HH:mm:ss',\n    time: 'HH:mm',\n    date: 'yyyyå¹´Mæœˆdæ—¥',\n    monthYear: 'yyyyå¹´Mæœˆ',\n    relative: {\n      today: 'ä»Šå¤©',\n      yesterday: 'æ˜¨å¤©',\n      daysAgo: (days: number) => `${days}å¤©å‰`,\n      weeksAgo: (weeks: number) => `${weeks}å‘¨å‰`,\n      monthsAgo: (months: number) => `${months}ä¸ªæœˆå‰`\n    }\n  }\n} as const;\n\n// Locale mapping for date-fns\nconst DATE_FNS_LOCALES = {\n  en: enUS,\n  zh: zhCN\n} as const;\n\n/**\n * Format date according to locale and format type\n */\nexport function formatDate(\n  date: Date | string,\n  formatType: keyof typeof DATE_TIME_FORMATS.en,\n  locale: 'en' | 'zh' = 'en'\n): string {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  const dateFnsLocale = DATE_FNS_LOCALES[locale];\n  const formatString = DATE_TIME_FORMATS[locale][formatType] as string;\n\n  try {\n    return format(dateObj, formatString, { locale: dateFnsLocale });\n  } catch (error) {\n    console.error('Date formatting error:', error);\n    return dateObj.toLocaleDateString(locale === 'zh' ? 'zh-CN' : 'en-US');\n  }\n}\n\n/**\n * Format date with relative time (e.g., \"2 days ago\", \"ä»Šå¤©\")\n */\nexport function formatRelativeDate(\n  date: Date | string,\n  locale: 'en' | 'zh' = 'en'\n): string {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  const formats = DATE_TIME_FORMATS[locale].relative;\n\n  if (isToday(dateObj)) {\n    return formats.today;\n  }\n\n  if (isYesterday(dateObj)) {\n    return formats.yesterday;\n  }\n\n  const daysDiff = differenceInDays(new Date(), dateObj);\n  const weeksDiff = differenceInWeeks(new Date(), dateObj);\n  const monthsDiff = differenceInMonths(new Date(), dateObj);\n\n  if (daysDiff < 7) {\n    return formats.daysAgo(daysDiff);\n  } else if (weeksDiff < 4) {\n    return formats.weeksAgo(weeksDiff);\n  } else {\n    return formats.monthsAgo(monthsDiff);\n  }\n}\n\n/**\n * Format date for medical reports (professional format)\n */\nexport function formatMedicalDate(\n  date: Date | string,\n  locale: 'en' | 'zh' = 'en',\n  includeTime: boolean = false\n): string {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  const dateFnsLocale = DATE_FNS_LOCALES[locale];\n\n  const formatString = includeTime \n    ? (locale === 'zh' ? 'yyyyå¹´Mæœˆdæ—¥ HH:mm' : 'MMMM d, yyyy h:mm a')\n    : (locale === 'zh' ? 'yyyyå¹´Mæœˆdæ—¥' : 'MMMM d, yyyy');\n\n  try {\n    return format(dateObj, formatString, { locale: dateFnsLocale });\n  } catch (error) {\n    console.error('Medical date formatting error:', error);\n    return dateObj.toLocaleDateString(locale === 'zh' ? 'zh-CN' : 'en-US');\n  }\n}\n\n/**\n * Format duration in minutes to human-readable format\n */\nexport function formatDuration(\n  minutes: number,\n  locale: 'en' | 'zh' = 'en'\n): string {\n  if (minutes < 60) {\n    return locale === 'zh' ? `${minutes}åˆ†é’Ÿ` : `${minutes} minute${minutes !== 1 ? 's' : ''}`;\n  }\n\n  const hours = Math.floor(minutes / 60);\n  const remainingMinutes = minutes % 60;\n\n  if (remainingMinutes === 0) {\n    return locale === 'zh' ? `${hours}å°æ—¶` : `${hours} hour${hours !== 1 ? 's' : ''}`;\n  }\n\n  return locale === 'zh' \n    ? `${hours}å°æ—¶${remainingMinutes}åˆ†é’Ÿ`\n    : `${hours} hour${hours !== 1 ? 's' : ''} ${remainingMinutes} minute${remainingMinutes !== 1 ? 's' : ''}`;\n}\n\n/**\n * Get localized month names\n */\nexport function getMonthNames(locale: 'en' | 'zh' = 'en'): string[] {\n  const months = [];\n  for (let i = 0; i < 12; i++) {\n    const date = new Date(2024, i, 1);\n    months.push(formatDate(date, 'monthYear', locale).split(' ')[0]);\n  }\n  return months;\n}\n\n/**\n * Get localized day names\n */\nexport function getDayNames(locale: 'en' | 'zh' = 'en'): string[] {\n  const days = [];\n  const dateFnsLocale = DATE_FNS_LOCALES[locale];\n  \n  for (let i = 0; i < 7; i++) {\n    const date = new Date(2024, 0, i + 1); // Start from Sunday\n    days.push(format(date, 'EEEE', { locale: dateFnsLocale }));\n  }\n  return days;\n}\n\n/**\n * Parse date string in various formats\n */\nexport function parseDate(dateString: string, locale: 'en' | 'zh' = 'en'): Date | null {\n  try {\n    // Try ISO format first\n    if (dateString.includes('-') && dateString.length >= 10) {\n      return new Date(dateString);\n    }\n\n    // Try locale-specific parsing\n    if (locale === 'zh') {\n      // Handle Chinese date formats like \"2024å¹´1æœˆ15æ—¥\"\n      const zhMatch = dateString.match(/(\\d{4})å¹´(\\d{1,2})æœˆ(\\d{1,2})æ—¥/);\n      if (zhMatch) {\n        const [, year, month, day] = zhMatch;\n        return new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      }\n    }\n\n    // Fallback to native Date parsing\n    const parsed = new Date(dateString);\n    return isNaN(parsed.getTime()) ? null : parsed;\n  } catch (error) {\n    console.error('Date parsing error:', error);\n    return null;\n  }\n}\n\n/**\n * Validate date input\n */\nexport function validateDate(\n  dateString: string,\n  locale: 'en' | 'zh' = 'en',\n  allowFuture: boolean = false\n): { isValid: boolean; error?: string } {\n  const date = parseDate(dateString, locale);\n  \n  if (!date) {\n    return {\n      isValid: false,\n      error: locale === 'zh' ? 'è¯·è¾“å…¥æœ‰æ•ˆæ—¥æœŸ' : 'Please enter a valid date'\n    };\n  }\n\n  if (!allowFuture && date > new Date()) {\n    return {\n      isValid: false,\n      error: locale === 'zh' ? 'æ—¥æœŸä¸èƒ½æ˜¯æœªæ¥æ—¶é—´' : 'Date cannot be in the future'\n    };\n  }\n\n  // Check if date is too far in the past (more than 10 years)\n  const tenYearsAgo = new Date();\n  tenYearsAgo.setFullYear(tenYearsAgo.getFullYear() - 10);\n  \n  if (date < tenYearsAgo) {\n    return {\n      isValid: false,\n      error: locale === 'zh' ? 'æ—¥æœŸä¸èƒ½è¶…è¿‡10å¹´å‰' : 'Date cannot be more than 10 years ago'\n    };\n  }\n\n  return { isValid: true };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/shared/utils/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":315,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8840,8843],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8840,8843],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":315,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8850,8853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8850,8853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PainEntry, PainStatistics, ValidationError, StorageData } from '../types';\n\n// SSR-safe runtime flags\nconst isServer = typeof window === 'undefined';\nconst isBrowser = !isServer;\n\n// æ—¥æœŸå·¥å…·å‡½æ•°\nexport const formatDate = (date: string | Date, locale: string = 'en'): string => {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  \n  if (locale === 'zh') {\n    return dateObj.toLocaleDateString('zh-CN', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  }\n  \n  return dateObj.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\nexport const formatDateShort = (date: string | Date): string => {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  // ä½¿ç”¨æœ¬åœ°æ—¶é—´è€Œä¸æ˜¯UTCæ—¶é—´ï¼Œé¿å…æ—¶åŒºé—®é¢˜\n  const year = dateObj.getFullYear();\n  const month = String(dateObj.getMonth() + 1).padStart(2, '0');\n  const day = String(dateObj.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`; // YYYY-MM-DD\n};\n\nexport const isValidDate = (dateString: string): boolean => {\n  const date = new Date(dateString);\n  return !isNaN(date.getTime()) && Boolean(dateString.match(/^\\d{4}-\\d{2}-\\d{2}$/));\n};\n\nexport const getDateRange = (days: number): { start: string; end: string } => {\n  const end = new Date();\n  const start = new Date();\n  start.setDate(start.getDate() - days);\n  \n  return {\n    start: formatDateShort(start),\n    end: formatDateShort(end)\n  };\n};\n\n// æ•°æ®éªŒè¯å‡½æ•°\nexport const validatePainEntry = (entry: Partial<PainEntry>): ValidationError[] => {\n  const errors: ValidationError[] = [];\n  \n  if (!entry.date) {\n    errors.push({\n      field: 'date',\n      message: 'Date is required',\n      code: 'REQUIRED'\n    });\n  } else if (!isValidDate(entry.date)) {\n    errors.push({\n      field: 'date',\n      message: 'Invalid date format',\n      code: 'INVALID_FORMAT'\n    });\n  }\n  \n  if (entry.painLevel === undefined || entry.painLevel === null) {\n    errors.push({\n      field: 'painLevel',\n      message: 'Pain level is required',\n      code: 'REQUIRED'\n    });\n  } else if (entry.painLevel < 1 || entry.painLevel > 10) {\n    errors.push({\n      field: 'painLevel',\n      message: 'Pain level must be between 1 and 10',\n      code: 'OUT_OF_RANGE'\n    });\n  }\n  \n  if (entry.duration !== undefined && (entry.duration < 0 || entry.duration > 1440)) {\n    errors.push({\n      field: 'duration',\n      message: 'Duration must be between 0 and 1440 minutes',\n      code: 'OUT_OF_RANGE'\n    });\n  }\n  \n  if (entry.effectiveness !== undefined && (entry.effectiveness < 1 || entry.effectiveness > 5)) {\n    errors.push({\n      field: 'effectiveness',\n      message: 'Effectiveness must be between 1 and 5',\n      code: 'OUT_OF_RANGE'\n    });\n  }\n  \n  return errors;\n};\n\n// ç»Ÿè®¡è®¡ç®—å‡½æ•°\nexport const calculateStatistics = (entries: PainEntry[]): PainStatistics => {\n  if (entries.length === 0) {\n    return {\n      totalEntries: 0,\n      averagePain: 0,\n      maxPain: 0,\n      minPain: 0,\n      mostCommonSymptoms: [],\n      mostEffectiveRemedies: [],\n      painFrequency: {},\n      trendDirection: 'stable'\n    };\n  }\n  \n  const painLevels = entries.map(e => e.painLevel);\n  const averagePain = painLevels.reduce((sum, level) => sum + level, 0) / painLevels.length;\n  \n  // è®¡ç®—æœ€å¸¸è§ç—‡çŠ¶\n  const symptomCounts: Record<string, number> = {};\n  entries.forEach(entry => {\n    entry.symptoms.forEach(symptom => {\n      symptomCounts[symptom] = (symptomCounts[symptom] || 0) + 1;\n    });\n  });\n  \n  const mostCommonSymptoms = Object.entries(symptomCounts)\n    .sort(([,a], [,b]) => b - a)\n    .slice(0, 5)\n    .map(([symptom]) => symptom);\n  \n  // è®¡ç®—æœ€æœ‰æ•ˆçš„ç¼“è§£æ–¹æ³•\n  const remedyEffectiveness: Record<string, { total: number; count: number }> = {};\n  entries.forEach(entry => {\n    if (entry.effectiveness && entry.remedies.length > 0) {\n      entry.remedies.forEach(remedy => {\n        if (!remedyEffectiveness[remedy]) {\n          remedyEffectiveness[remedy] = { total: 0, count: 0 };\n        }\n        remedyEffectiveness[remedy].total += entry.effectiveness!;\n        remedyEffectiveness[remedy].count += 1;\n      });\n    }\n  });\n  \n  const mostEffectiveRemedies = Object.entries(remedyEffectiveness)\n    .map(([remedy, data]) => ({\n      remedy,\n      avgEffectiveness: data.total / data.count\n    }))\n    .sort((a, b) => b.avgEffectiveness - a.avgEffectiveness)\n    .slice(0, 5)\n    .map(item => item.remedy);\n  \n  // è®¡ç®—ç–¼ç—›é¢‘ç‡\n  const painFrequency: Record<string, number> = {};\n  painLevels.forEach(level => {\n    const range = getPainRange(level);\n    painFrequency[range] = (painFrequency[range] || 0) + 1;\n  });\n  \n  // è®¡ç®—è¶‹åŠ¿\n  const trendDirection = calculateTrend(entries);\n  \n  return {\n    totalEntries: entries.length,\n    averagePain: Math.round(averagePain * 10) / 10,\n    maxPain: Math.max(...painLevels),\n    minPain: Math.min(...painLevels),\n    mostCommonSymptoms,\n    mostEffectiveRemedies,\n    painFrequency,\n    trendDirection\n  };\n};\n\nconst getPainRange = (level: number): string => {\n  if (level <= 3) return 'Mild (1-3)';\n  if (level <= 6) return 'Moderate (4-6)';\n  return 'Severe (7-10)';\n};\n\nconst calculateTrend = (entries: PainEntry[]): 'improving' | 'worsening' | 'stable' => {\n  if (entries.length < 4) return 'stable';\n  \n  const sortedEntries = [...entries].sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n  const firstHalf = sortedEntries.slice(0, Math.floor(sortedEntries.length / 2));\n  const secondHalf = sortedEntries.slice(Math.floor(sortedEntries.length / 2));\n  \n  const firstAvg = firstHalf.reduce((sum, e) => sum + e.painLevel, 0) / firstHalf.length;\n  const secondAvg = secondHalf.reduce((sum, e) => sum + e.painLevel, 0) / secondHalf.length;\n  \n  const difference = secondAvg - firstAvg;\n  \n  if (difference > 0.5) return 'worsening';\n  if (difference < -0.5) return 'improving';\n  return 'stable';\n};\n\n// æœ¬åœ°å­˜å‚¨å·¥å…·å‡½æ•°\nexport const createStorageKey = (userId: string, dataType: string): string => {\n  return `periodhub_${dataType}_${userId || 'anonymous'}`;\n};\n\nexport const saveToStorage = <T>(key: string, data: T): boolean => {\n  if (!isBrowser) return false;\n  try {\n    const storageData: StorageData<T> = {\n      data,\n      version: '1.0.0',\n      timestamp: new Date().toISOString()\n    };\n    window.localStorage?.setItem(key, JSON.stringify(storageData));\n    return true;\n  } catch (error) {\n    console.error('Failed to save to localStorage:', error);\n    return false;\n  }\n};\n\nexport const loadFromStorage = <T>(key: string): T | null => {\n  if (!isBrowser) return null;\n  try {\n    const item = window.localStorage?.getItem(key);\n    if (!item) return null;\n    const storageData: StorageData<T> = JSON.parse(item);\n    return storageData.data;\n  } catch (error) {\n    console.error('Failed to load from localStorage:', error);\n    return null;\n  }\n};\n\nexport const clearStorage = (key: string): boolean => {\n  if (!isBrowser) return false;\n  try {\n    window.localStorage?.removeItem(key);\n    return true;\n  } catch (error) {\n    console.error('Failed to clear localStorage:', error);\n    return false;\n  }\n};\n\n// æ•°æ®å¯¼å‡ºå‡½æ•°\nexport const exportToCSV = (entries: PainEntry[]): string => {\n  const headers = [\n    'Date',\n    'Pain Level',\n    'Duration (min)',\n    'Location',\n    'Menstrual Status',\n    'Symptoms',\n    'Remedies',\n    'Effectiveness',\n    'Notes'\n  ];\n  \n  const rows = entries.map(entry => [\n    entry.date,\n    entry.painLevel.toString(),\n    entry.duration?.toString() || '',\n    entry.location.join('; '),\n    entry.menstrualStatus,\n    entry.symptoms.join('; '),\n    entry.remedies.join('; '),\n    entry.effectiveness?.toString() || '',\n    entry.notes || ''\n  ]);\n  \n  const csvContent = [headers, ...rows]\n    .map(row => row.map(field => `\"${field.replace(/\"/g, '\"\"')}\"`).join(','))\n    .join('\\n');\n  \n  return csvContent;\n};\n\nexport const downloadFile = (content: string, filename: string, mimeType: string): void => {\n  if (!isBrowser) return;\n  try {\n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  } catch (error) {\n    console.error('Failed to trigger download:', error);\n  }\n};\n\n// é¢œè‰²å·¥å…·å‡½æ•°\nexport const getPainLevelColor = (level: number): string => {\n  if (level <= 3) return '#10b981'; // green\n  if (level <= 6) return '#f59e0b'; // yellow\n  return '#ef4444'; // red\n};\n\nexport const getStatusColor = (status: string): string => {\n  const colors: Record<string, string> = {\n    period: '#ec4899',\n    pre: '#f97316',\n    post: '#06b6d4',\n    ovulation: '#8b5cf6',\n    other: '#6b7280'\n  };\n  return colors[status] || '#6b7280';\n};\n\n// é˜²æŠ–å‡½æ•°\nexport const debounce = <T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): ((...args: Parameters<T>) => void) => {\n  let timeout: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/symptom-assessment/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/symptom-assessment/symptom-assessment-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/interactive-tools/test-assessment.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/medical-disclaimer/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/natural-therapies/NaturalTherapiesClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/natural-therapies/page-backup.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useState' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":12,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":13,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":16}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport Link from 'next/link';\nimport { useTranslations } from 'next-intl';\nimport { useState } from 'react';\n\nexport default function NaturalTherapiesPage({\n  params: { locale }\n}: {\n  params: { locale: string }\n}) {\n  const t = useTranslations('naturalTherapiesPage');\n  const commonT = useTranslations('common');\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Hero Section */}\n          <section className=\"bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-16 rounded-2xl\">\n            <div className=\"container mx-auto px-4\">\n              <div className=\"max-w-4xl mx-auto text-center\">\n                <h1 className=\"text-4xl md:text-5xl font-bold mb-6\">\n                  {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•' : 'Natural Therapies'}\n                </h1>\n                <p className=\"text-xl md:text-2xl opacity-90 mb-8\">\n                  {locale === 'zh'\n                    ? 'é€šè¿‡ç§‘å­¦çš„è‡ªç„¶ç–—æ³•ï¼Œå®‰å…¨æœ‰æ•ˆåœ°ç¼“è§£ç—›ç»'\n                    : 'Safe and effective menstrual pain relief through scientific natural therapies'\n                  }\n                </p>\n              </div>\n            </div>\n          </section>\n\n          {/* Simple Content */}\n          <section className=\"bg-white rounded-lg shadow-sm p-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n              {locale === 'zh' ? 'é¡µé¢æ­£åœ¨åŠ è½½...' : 'Page Loading...'}\n            </h2>\n            <p className=\"text-gray-600\">\n              {locale === 'zh'\n                ? 'å¦‚æœæ‚¨çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜åŸºæœ¬åŠŸèƒ½æ­£å¸¸ã€‚'\n                : 'If you see this page, the basic functionality is working.'\n              }\n            </p>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/natural-therapies/page-original.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":12,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":13,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'conditioningPillars' is assigned a value but never used.","line":320,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":320,"endColumn":28}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport Link from 'next/link';\nimport { useTranslations } from 'next-intl';\nimport { useState } from 'react';\n\nexport default function NaturalTherapiesPage({\n  params: { locale }\n}: {\n  params: { locale: string }\n}) {\n  const t = useTranslations('naturalTherapiesPage');\n  const commonT = useTranslations('common');\n\n  // State for managing expanded therapy cards\n  const [expandedTherapy, setExpandedTherapy] = useState<string | null>(null);\n\n  // Helper functions for dynamic classes\n  const getCardClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'bg-gradient-to-br from-red-50 to-red-50 hover:from-red-100 hover:to-red-100',\n      green: 'bg-gradient-to-br from-green-50 to-green-50 hover:from-green-100 hover:to-green-100',\n      blue: 'bg-gradient-to-br from-blue-50 to-blue-50 hover:from-blue-100 hover:to-blue-100',\n      purple: 'bg-gradient-to-br from-purple-50 to-purple-50 hover:from-purple-100 hover:to-purple-100',\n      pink: 'bg-gradient-to-br from-pink-50 to-pink-50 hover:from-pink-100 hover:to-pink-100',\n      yellow: 'bg-gradient-to-br from-yellow-50 to-yellow-50 hover:from-yellow-100 hover:to-yellow-100',\n      indigo: 'bg-gradient-to-br from-indigo-50 to-indigo-50 hover:from-indigo-100 hover:to-indigo-100',\n      teal: 'bg-gradient-to-br from-teal-50 to-teal-50 hover:from-teal-100 hover:to-teal-100'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getExpandedCardClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'bg-gradient-to-br from-red-50 to-red-100 border-red-200',\n      green: 'bg-gradient-to-br from-green-50 to-green-100 border-green-200',\n      blue: 'bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200',\n      purple: 'bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200',\n      pink: 'bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200',\n      yellow: 'bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200',\n      indigo: 'bg-gradient-to-br from-indigo-50 to-indigo-100 border-indigo-200',\n      teal: 'bg-gradient-to-br from-teal-50 to-teal-100 border-teal-200'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getTextClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'text-red-800',\n      green: 'text-green-800',\n      blue: 'text-blue-800',\n      purple: 'text-purple-800',\n      pink: 'text-pink-800',\n      yellow: 'text-yellow-800',\n      indigo: 'text-indigo-800',\n      teal: 'text-teal-800'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getSubtitleClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'text-red-600',\n      green: 'text-green-600',\n      blue: 'text-blue-600',\n      purple: 'text-purple-600',\n      pink: 'text-pink-600',\n      yellow: 'text-yellow-600',\n      indigo: 'text-indigo-600',\n      teal: 'text-teal-600'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getBorderClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'border-red-200',\n      green: 'border-green-200',\n      blue: 'border-blue-200',\n      purple: 'border-purple-200',\n      pink: 'border-pink-200',\n      yellow: 'border-yellow-200',\n      indigo: 'border-indigo-200',\n      teal: 'border-teal-200'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getMethodCardClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'bg-red-50 border-red-200',\n      green: 'bg-green-50 border-green-200',\n      blue: 'bg-blue-50 border-blue-200',\n      purple: 'bg-purple-50 border-purple-200',\n      pink: 'bg-pink-50 border-pink-200',\n      yellow: 'bg-yellow-50 border-yellow-200',\n      indigo: 'bg-indigo-50 border-indigo-200',\n      teal: 'bg-teal-50 border-teal-200'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getMethodTextClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'text-red-800',\n      green: 'text-green-800',\n      blue: 'text-blue-800',\n      purple: 'text-purple-800',\n      pink: 'text-pink-800',\n      yellow: 'text-yellow-800',\n      indigo: 'text-indigo-800',\n      teal: 'text-teal-800'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  const getMethodDescClasses = (color: string) => {\n    const colorMap: { [key: string]: string } = {\n      red: 'text-red-700',\n      green: 'text-green-700',\n      blue: 'text-blue-700',\n      purple: 'text-purple-700',\n      pink: 'text-pink-700',\n      yellow: 'text-yellow-700',\n      indigo: 'text-indigo-700',\n      teal: 'text-teal-700'\n    };\n    return colorMap[color] || colorMap.blue;\n  };\n\n  // Define therapy categories with detailed content\n  const therapyCategories = [\n    {\n      id: 'physical',\n      title: locale === 'zh' ? 'ç‰©ç†ç–—æ³•' : 'Physical Therapy',\n      subtitle: locale === 'zh' ? 'çƒ­æ•·ã€æŒ‰æ‘©ã€TENSç­‰' : 'Heat therapy, massage, TENS, etc.',\n      icon: 'ğŸ”¥',\n      color: 'red',\n      details: {\n        description: locale === 'zh'\n          ? 'ç‰©ç†ç–—æ³•é€šè¿‡å¤–éƒ¨ç‰©ç†æ‰‹æ®µæ”¹å–„è¡€æ¶²å¾ªç¯ã€ç¼“è§£è‚Œè‚‰ç´§å¼ ï¼Œæ˜¯æœ€ç›´æ¥æœ‰æ•ˆçš„ç—›ç»ç¼“è§£æ–¹æ³•ã€‚'\n          : 'Physical therapy improves blood circulation and relieves muscle tension through external physical means, making it the most direct and effective method for menstrual pain relief.',\n        methods: locale === 'zh' ? [\n          { name: 'çƒ­æ•·ç–—æ³•', description: 'ä½¿ç”¨çƒ­æ°´è¢‹ã€æš–å®«è´´ç­‰ï¼Œæ¸©åº¦40-45Â°Cï¼Œæ¯æ¬¡15-20åˆ†é’Ÿ' },\n          { name: 'æŒ‰æ‘©ç–—æ³•', description: 'è…¹éƒ¨é¡ºæ—¶é’ˆæŒ‰æ‘©ã€è…°éƒ¨æŒ‰å‹ï¼Œä¿ƒè¿›è¡€æ¶²å¾ªç¯' },\n          { name: 'TENSç–—æ³•', description: 'ç»çš®ç¥ç»ç”µåˆºæ¿€ï¼Œé˜»æ–­ç–¼ç—›ä¿¡å·ä¼ å¯¼' },\n          { name: 'æ¸©æ°´æµ´', description: '38-40Â°Cæ¸©æ°´æµ¸æ³¡15-20åˆ†é’Ÿï¼Œå…¨èº«æ”¾æ¾' }\n        ] : [\n          { name: 'Heat Therapy', description: 'Use hot water bottles, heating pads at 40-45Â°C for 15-20 minutes' },\n          { name: 'Massage Therapy', description: 'Clockwise abdominal massage, lower back pressure to promote circulation' },\n          { name: 'TENS Therapy', description: 'Transcutaneous electrical nerve stimulation blocks pain signal transmission' },\n          { name: 'Warm Bath', description: 'Soak in 38-40Â°C warm water for 15-20 minutes for full body relaxation' }\n        ]\n      }\n    },\n    {\n      id: 'herbal',\n      title: locale === 'zh' ? 'è‰è¯ç–—æ³•' : 'Herbal Therapy',\n      subtitle: locale === 'zh' ? 'è‰è¯èŒ¶ã€ä¸­è¯ã€è¡¥å……å‰‚ç­‰' : 'Herbal teas, TCM, supplements, etc.',\n      icon: 'ğŸŒ¿',\n      color: 'green',\n      details: {\n        description: locale === 'zh'\n          ? 'è‰è¯ç–—æ³•åˆ©ç”¨æ¤ç‰©çš„å¤©ç„¶æ´»æ€§æˆåˆ†è°ƒèŠ‚æ¿€ç´ å¹³è¡¡ã€å‡å°‘ç‚ç—‡ï¼Œæ˜¯æ¸©å’Œè€Œæœ‰æ•ˆçš„è°ƒç†æ–¹å¼ã€‚'\n          : 'Herbal therapy uses natural active compounds from plants to regulate hormonal balance and reduce inflammation, providing gentle yet effective conditioning.',\n        methods: locale === 'zh' ? [\n          { name: 'å§œèŒ¶', description: 'ç”Ÿå§œå…·æœ‰æŠ—ç‚ä½œç”¨ï¼Œæ¯æ—¥2-3æ¯æ¸©å§œèŒ¶' },\n          { name: 'å½“å½’è¡¥è¡€æ±¤', description: 'ä¼ ç»Ÿä¸­è¯æ–¹å‰‚ï¼Œè°ƒç†æ°”è¡€ï¼Œå»ºè®®å’¨è¯¢ä¸­åŒ»å¸ˆ' },\n          { name: 'æ´‹ç”˜èŠèŒ¶', description: 'å…·æœ‰é•‡é™å’ŒæŠ—ç—‰æŒ›ä½œç”¨ï¼Œç¡å‰é¥®ç”¨' },\n          { name: 'æœˆè§è‰æ²¹', description: 'å¯Œå«Î³-äºšéº»é…¸ï¼Œè°ƒèŠ‚å‰åˆ—è…ºç´ å¹³è¡¡' }\n        ] : [\n          { name: 'Ginger Tea', description: 'Ginger has anti-inflammatory properties, 2-3 cups of warm ginger tea daily' },\n          { name: 'Angelica Blood Tonic', description: 'Traditional Chinese medicine formula for qi and blood regulation, consult TCM practitioner' },\n          { name: 'Chamomile Tea', description: 'Has sedative and antispasmodic effects, drink before bedtime' },\n          { name: 'Evening Primrose Oil', description: 'Rich in Î³-linolenic acid, helps balance prostaglandins' }\n        ]\n      }\n    },\n    {\n      id: 'dietary',\n      title: locale === 'zh' ? 'é¥®é£Ÿè°ƒæ•´' : 'Dietary Adjustment',\n      subtitle: locale === 'zh' ? 'æŠ—ç‚é¥®é£Ÿã€è¥å…»è¡¥å……ç­‰' : 'Anti-inflammatory diet, nutrition, etc.',\n      icon: 'ğŸ',\n      color: 'blue',\n      details: {\n        description: locale === 'zh'\n          ? 'é€šè¿‡ç§‘å­¦çš„é¥®é£Ÿè°ƒæ•´ï¼Œè¡¥å……å…³é”®è¥å…»ç´ ï¼Œå‡å°‘ç‚ç—‡ååº”ï¼Œä»æ ¹æœ¬ä¸Šæ”¹å–„ç—›ç»ç—‡çŠ¶ã€‚'\n          : 'Through scientific dietary adjustments and key nutrient supplementation, reduce inflammatory responses and fundamentally improve menstrual pain symptoms.',\n        methods: locale === 'zh' ? [\n          { name: 'å¢åŠ Omega-3', description: 'æ·±æµ·é±¼ã€äºšéº»ç±½ã€æ ¸æ¡ƒç­‰ï¼Œæ¯å‘¨2-3æ¬¡' },\n          { name: 'è¡¥å……é•å…ƒç´ ', description: 'é»‘å·§å…‹åŠ›ã€é¦™è•‰ã€æä»ï¼Œæ¯æ—¥300-400mg' },\n          { name: 'å‡å°‘ç³–åˆ†æ‘„å…¥', description: 'é¿å…ç²¾åˆ¶ç³–å’ŒåŠ å·¥é£Ÿå“ï¼Œç¨³å®šè¡€ç³–' },\n          { name: 'å¢åŠ çº¤ç»´', description: 'å…¨è°·ç‰©ã€è”¬èœæ°´æœï¼Œä¿ƒè¿›æ¿€ç´ ä»£è°¢' }\n        ] : [\n          { name: 'Increase Omega-3', description: 'Deep sea fish, flaxseeds, walnuts, 2-3 times per week' },\n          { name: 'Magnesium Supplement', description: 'Dark chocolate, bananas, almonds, 300-400mg daily' },\n          { name: 'Reduce Sugar Intake', description: 'Avoid refined sugar and processed foods, stabilize blood sugar' },\n          { name: 'Increase Fiber', description: 'Whole grains, fruits and vegetables, promote hormone metabolism' }\n        ]\n      }\n    },\n    {\n      id: 'yoga',\n      title: locale === 'zh' ? 'ç‘œä¼½è¿åŠ¨' : 'Yoga & Exercise',\n      subtitle: locale === 'zh' ? 'ç‘œä¼½ä½“å¼ã€æ¸©å’Œè¿åŠ¨ç­‰' : 'Yoga poses, gentle exercise, etc.',\n      icon: 'ğŸ§˜â€â™€ï¸',\n      color: 'purple',\n      details: {\n        description: locale === 'zh'\n          ? 'ç‰¹å®šçš„ç‘œä¼½ä½“å¼å’Œæ¸©å’Œè¿åŠ¨å¯ä»¥ç¼“è§£ç›†è…”ç´§å¼ ã€æ”¹å–„è¡€æ¶²å¾ªç¯ï¼ŒåŒæ—¶é‡Šæ”¾å†…å•¡è‚½ç¼“è§£ç–¼ç—›ã€‚'\n          : 'Specific yoga poses and gentle exercises can relieve pelvic tension, improve blood circulation, and release endorphins to alleviate pain.',\n        methods: locale === 'zh' ? [\n          { name: 'çŒ«ç‰›å¼', description: 'ç¼“è§£ä¸‹èƒŒéƒ¨ç´§å¼ ï¼Œä¿ƒè¿›è„ŠæŸ±çµæ´»æ€§' },\n          { name: 'å©´å„¿å¼', description: 'æ”¾æ¾éª¨ç›†åŒºåŸŸï¼Œç¼“è§£è…¹éƒ¨å‹åŠ›' },\n          { name: 'æ‰­è½¬ä½“å¼', description: 'åˆºæ¿€è…¹éƒ¨å™¨å®˜ï¼Œæ”¹å–„æ¶ˆåŒ–å’Œè¡€æ¶²å¾ªç¯' },\n          { name: 'æ¸©å’Œæ•£æ­¥', description: 'æ¯æ—¥20-30åˆ†é’Ÿï¼Œä¿ƒè¿›å†…å•¡è‚½é‡Šæ”¾' }\n        ] : [\n          { name: 'Cat-Cow Pose', description: 'Relieves lower back tension, promotes spinal flexibility' },\n          { name: 'Child\\'s Pose', description: 'Relaxes pelvic area, relieves abdominal pressure' },\n          { name: 'Twisting Poses', description: 'Stimulates abdominal organs, improves digestion and circulation' },\n          { name: 'Gentle Walking', description: '20-30 minutes daily, promotes endorphin release' }\n        ]\n      }\n    },\n    {\n      id: 'aromatherapy',\n      title: locale === 'zh' ? 'èŠ³é¦™ç–—æ³•' : 'Aromatherapy',\n      subtitle: locale === 'zh' ? 'ç²¾æ²¹æŒ‰æ‘©ã€é¦™è–°ç­‰' : 'Essential oil massage, diffusion, etc.',\n      icon: 'ğŸŒ¸',\n      color: 'pink',\n      details: {\n        description: locale === 'zh'\n          ? 'ç²¾æ²¹çš„å¤©ç„¶èŠ³é¦™åˆ†å­å¯ä»¥é€šè¿‡å—…è§‰ç³»ç»Ÿå½±å“å¤§è„‘ï¼ŒåŒæ—¶å¤–ç”¨æŒ‰æ‘©å¯ä»¥ç¼“è§£å±€éƒ¨ç–¼ç—›ã€‚'\n          : 'Natural aromatic molecules in essential oils can affect the brain through the olfactory system, while topical massage can relieve local pain.',\n        methods: locale === 'zh' ? [\n          { name: 'è–°è¡£è‰ç²¾æ²¹', description: 'å…·æœ‰é•‡é™å’Œæ­¢ç—›ä½œç”¨ï¼Œå¯ç”¨äºæŒ‰æ‘©æˆ–é¦™è–°' },\n          { name: 'å¿«ä¹é¼ å°¾è‰', description: 'è°ƒèŠ‚æ¿€ç´ å¹³è¡¡ï¼Œç¼“è§£ç»å‰ç»¼åˆå¾' },\n          { name: 'ç”œæ©™ç²¾æ²¹', description: 'æå‡æƒ…ç»ªï¼Œå‡å°‘ç„¦è™‘å’ŒæŠ‘éƒ' },\n          { name: 'è…¹éƒ¨æŒ‰æ‘©', description: 'ç¨€é‡Šç²¾æ²¹æŒ‰æ‘©ä¸‹è…¹éƒ¨ï¼Œé¡ºæ—¶é’ˆæ–¹å‘' }\n        ] : [\n          { name: 'Lavender Essential Oil', description: 'Has sedative and analgesic effects, use for massage or diffusion' },\n          { name: 'Clary Sage', description: 'Regulates hormonal balance, relieves PMS symptoms' },\n          { name: 'Sweet Orange Oil', description: 'Uplifts mood, reduces anxiety and depression' },\n          { name: 'Abdominal Massage', description: 'Massage lower abdomen with diluted oils in clockwise direction' }\n        ]\n      }\n    },\n    {\n      id: 'acupuncture',\n      title: locale === 'zh' ? 'é’ˆç¸è‰¾ç¸' : 'Acupuncture & Moxibustion',\n      subtitle: locale === 'zh' ? 'ä¼ ç»Ÿä¸­åŒ»ç–—æ³•' : 'Traditional Chinese medicine',\n      icon: 'ğŸ“',\n      color: 'yellow',\n      details: {\n        description: locale === 'zh'\n          ? 'ä¼ ç»Ÿä¸­åŒ»é’ˆç¸é€šè¿‡åˆºæ¿€ç‰¹å®šç©´ä½è°ƒèŠ‚æ°”è¡€è¿è¡Œï¼Œè‰¾ç¸åˆ™é€šè¿‡æ¸©çƒ­åˆºæ¿€è¾¾åˆ°è°ƒç†æ•ˆæœã€‚'\n          : 'Traditional Chinese acupuncture regulates qi and blood flow by stimulating specific acupoints, while moxibustion achieves conditioning effects through warm stimulation.',\n        methods: locale === 'zh' ? [\n          { name: 'ä¸‰é˜´äº¤ç©´', description: 'ä½äºå°è…¿å†…ä¾§ï¼Œè°ƒèŠ‚å¦‡ç§‘ç–¾ç—…çš„é‡è¦ç©´ä½' },\n          { name: 'å…³å…ƒç©´', description: 'ä½äºä¸‹è…¹éƒ¨ï¼Œæ¸©è¡¥è‚¾é˜³ï¼Œè°ƒç†æœˆç»' },\n          { name: 'è¡€æµ·ç©´', description: 'ä½äºå¤§è…¿å†…ä¾§ï¼Œæ´»è¡€åŒ–ç˜€ï¼Œè°ƒç»æ­¢ç—›' },\n          { name: 'è‰¾ç¸ç–—æ³•', description: 'åœ¨ç›¸å…³ç©´ä½è¿›è¡Œè‰¾ç¸ï¼Œæ¸©ç»æ•£å¯’' }\n        ] : [\n          { name: 'Sanyinjiao Point', description: 'Located on inner calf, important acupoint for gynecological conditions' },\n          { name: 'Guanyuan Point', description: 'Located on lower abdomen, tonifies kidney yang, regulates menstruation' },\n          { name: 'Xuehai Point', description: 'Located on inner thigh, promotes blood circulation, regulates menstruation' },\n          { name: 'Moxibustion Therapy', description: 'Apply moxibustion to relevant acupoints to warm meridians and dispel cold' }\n        ]\n      }\n    },\n    {\n      id: 'psychological',\n      title: locale === 'zh' ? 'å¿ƒç†è°ƒèŠ‚' : 'Psychological Techniques',\n      subtitle: locale === 'zh' ? 'å†¥æƒ³ã€å‘¼å¸æ³•ç­‰' : 'Meditation, breathing techniques, etc.',\n      icon: 'ğŸ§ ',\n      color: 'indigo',\n      details: {\n        description: locale === 'zh'\n          ? 'å¿ƒç†è°ƒèŠ‚æŠ€å·§å¯ä»¥æ¿€æ´»å‰¯äº¤æ„Ÿç¥ç»ç³»ç»Ÿï¼Œé™ä½ç–¼ç—›æ•æ„Ÿåº¦ï¼ŒåŒæ—¶å‡å°‘ç„¦è™‘å’Œå‹åŠ›ã€‚'\n          : 'Psychological techniques can activate the parasympathetic nervous system, reduce pain sensitivity, and decrease anxiety and stress.',\n        methods: locale === 'zh' ? [\n          { name: 'æ·±å‘¼å¸ç»ƒä¹ ', description: 'è…¹å¼å‘¼å¸ï¼Œå¸æ°”4ç§’-å±æ¯4ç§’-å‘¼æ°”6ç§’' },\n          { name: 'æ­£å¿µå†¥æƒ³', description: 'ä¸“æ³¨å½“ä¸‹æ„Ÿå—ï¼Œæ¥çº³ç–¼ç—›è€Œä¸æŠ—æ‹’' },\n          { name: 'æ¸è¿›æ€§è‚Œè‚‰æ”¾æ¾', description: 'ä»å¤´åˆ°è„šä¾æ¬¡ç´§å¼ å’Œæ”¾æ¾å„éƒ¨ä½è‚Œè‚‰' },\n          { name: 'å¼•å¯¼æƒ³è±¡', description: 'æƒ³è±¡æ¸©æš–çš„å…‰èŠ’ç…§å°„ç–¼ç—›éƒ¨ä½' }\n        ] : [\n          { name: 'Deep Breathing Exercise', description: 'Abdominal breathing: inhale 4 sec - hold 4 sec - exhale 6 sec' },\n          { name: 'Mindfulness Meditation', description: 'Focus on present sensations, accept pain without resistance' },\n          { name: 'Progressive Muscle Relaxation', description: 'Systematically tense and relax muscle groups from head to toe' },\n          { name: 'Guided Imagery', description: 'Visualize warm light radiating to the painful area' }\n        ]\n      }\n    },\n    {\n      id: 'comprehensive',\n      title: locale === 'zh' ? 'ç»¼åˆæ–¹æ¡ˆ' : 'Comprehensive Plans',\n      subtitle: locale === 'zh' ? 'ä¸ªæ€§åŒ–ç»„åˆç–—æ³•' : 'Personalized combination therapy',\n      icon: 'ğŸ¯',\n      color: 'teal',\n      details: {\n        description: locale === 'zh'\n          ? 'ç»“åˆå¤šç§è‡ªç„¶ç–—æ³•ï¼Œåˆ¶å®šä¸ªæ€§åŒ–çš„ç»¼åˆæ²»ç–—æ–¹æ¡ˆï¼Œæ•ˆæœæ›´åŠ æ˜¾è‘—å’ŒæŒä¹…ã€‚'\n          : 'Combine multiple natural therapies to create personalized comprehensive treatment plans for more significant and lasting effects.',\n        methods: locale === 'zh' ? [\n          { name: 'è½»åº¦ç—›ç»æ–¹æ¡ˆ', description: 'çƒ­æ•·+ç‘œä¼½+è‰è¯èŒ¶+é¥®é£Ÿè°ƒæ•´' },\n          { name: 'ä¸­åº¦ç—›ç»æ–¹æ¡ˆ', description: 'æŒ‰æ‘©+é’ˆç¸+è¥å…»è¡¥å……+å¿ƒç†è°ƒèŠ‚' },\n          { name: 'é‡åº¦ç—›ç»æ–¹æ¡ˆ', description: 'å¤šç§ç‰©ç†ç–—æ³•+ä¸­è¯è°ƒç†+ä¸“ä¸šæŒ‡å¯¼' },\n          { name: 'é¢„é˜²æ€§æ–¹æ¡ˆ', description: 'æ—¥å¸¸è°ƒç†+å®šæœŸè¯„ä¼°+ç”Ÿæ´»æ–¹å¼ä¼˜åŒ–' }\n        ] : [\n          { name: 'Mild Pain Plan', description: 'Heat therapy + Yoga + Herbal tea + Dietary adjustment' },\n          { name: 'Moderate Pain Plan', description: 'Massage + Acupuncture + Nutrition + Psychological techniques' },\n          { name: 'Severe Pain Plan', description: 'Multiple physical therapies + TCM + Professional guidance' },\n          { name: 'Prevention Plan', description: 'Daily conditioning + Regular assessment + Lifestyle optimization' }\n        ]\n      }\n    }\n  ];\n\n  // Define the four pillars of conditioning\n  const conditioningPillars = [\n    {\n      id: 'nutrition',\n      title: locale === 'zh' ? 'è¥å…»ç–—æ³•' : 'Nutritional Therapy',\n      subtitle: locale === 'zh' ? 'é€šè¿‡ç§‘å­¦é¥®é£Ÿè°ƒèŠ‚æ¿€ç´ å¹³è¡¡ï¼Œå‡å°‘ç‚ç—‡' : 'Regulate hormonal balance and reduce inflammation through scientific diet',\n      color: 'green',\n      icon: (\n        <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"></path>\n        </svg>\n      )\n    },\n    {\n      id: 'exercise',\n      title: locale === 'zh' ? 'è¿åŠ¨ç–—æ³•' : 'Exercise Therapy',\n      subtitle: locale === 'zh' ? 'è§„å¾‹è¿åŠ¨ä¿ƒè¿›å†…å•¡è‚½é‡Šæ”¾ï¼Œæ”¹å–„è¡€æ¶²å¾ªç¯' : 'Regular exercise promotes endorphin release and improves circulation',\n      color: 'blue',\n      icon: (\n        <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"></path>\n        </svg>\n      )\n    },\n    {\n      id: 'stress',\n      title: locale === 'zh' ? 'å‹åŠ›ç®¡ç†' : 'Stress Management',\n      subtitle: locale === 'zh' ? 'æ…¢æ€§å‹åŠ›æ˜¯ç—›ç»åŠ é‡çš„é‡è¦å› ç´ ' : 'Chronic stress is an important factor in worsening menstrual pain',\n      color: 'purple',\n      icon: (\n        <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"></path>\n        </svg>\n      )\n    },\n    {\n      id: 'sleep',\n      title: locale === 'zh' ? 'ç¡çœ ä¼˜åŒ–' : 'Sleep Optimization',\n      subtitle: locale === 'zh' ? 'ä¼˜è´¨ç¡çœ æ˜¯æ¿€ç´ å¹³è¡¡çš„åŸºç¡€' : 'Quality sleep is the foundation of hormonal balance',\n      color: 'indigo',\n      icon: (\n        <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\"></path>\n        </svg>\n      )\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"space-y-12\">\n          {/* Hero Section */}\n          <section className=\"bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-16 rounded-2xl\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <h1 className=\"text-4xl md:text-5xl font-bold mb-6\">\n              {locale === 'zh' ? 'å¹³æ—¶è°ƒç†æ–¹æ¡ˆ' : 'Daily Conditioning Plan'}\n            </h1>\n            <p className=\"text-xl md:text-2xl opacity-90 mb-8\">\n              {locale === 'zh'\n                ? 'é€šè¿‡ç§‘å­¦çš„ç”Ÿæ´»æ–¹å¼è°ƒæ•´ï¼Œä»æ ¹æœ¬ä¸Šé¢„é˜²å’Œå‡è½»ç—›ç»'\n                : 'Prevent and reduce menstrual pain fundamentally through scientific lifestyle adjustments'\n              }\n            </p>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-6 max-w-2xl mx-auto\">\n              <h2 className=\"text-lg font-semibold mb-3\">\n                ğŸŒ± {locale === 'zh' ? 'é•¿æœŸæ”¹å–„' : 'Long-term Improvement'}\n              </h2>\n              <p className=\"text-sm opacity-90\">\n                {locale === 'zh'\n                  ? 'åšæŒç§‘å­¦çš„è°ƒç†æ–¹æ³•ï¼Œ3-6ä¸ªæœˆå†…æ˜¾è‘—æ”¹å–„ç—›ç»ç—‡çŠ¶'\n                  : 'Stick to scientific conditioning methods for significant improvement in menstrual pain within 3-6 months'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n          </section>\n\n\n\n          {/* ğŸ†• ç—›ç»è‡ªç„¶ç–—æ³•å¤§å…¨ä¸“æ  */}\n          <section className=\"py-16 bg-gradient-to-br from-rose-50 via-pink-50 to-purple-50 rounded-2xl\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-6xl mx-auto\">\n            {/* ä¸“æ æ ‡é¢˜ */}\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-4xl font-bold text-gray-900 mb-4\">\n                ğŸŒ¿ {locale === 'zh' ? 'ç—›ç»è‡ªç„¶ç–—æ³•å¤§å…¨' : 'Complete Guide to Natural Menstrual Pain Relief'}\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                {locale === 'zh'\n                  ? 'ç§‘å­¦éªŒè¯çš„éè¯ç‰©ç¼“è§£æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨è‡ªç„¶èˆ’ç¼“æœˆç»ç–¼ç—›'\n                  : 'Scientifically validated non-pharmaceutical relief solutions to naturally soothe menstrual pain'\n                }\n              </p>\n            </div>\n\n            {/* åŒ»ç–—å…è´£å£°æ˜ */}\n            <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-8 rounded-r-lg\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"h-5 w-5 text-yellow-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-yellow-800\">\n                    {locale === 'zh' ? 'é‡è¦åŒ»ç–—å…è´£å£°æ˜' : 'Important Medical Disclaimer'}\n                  </h3>\n                  <div className=\"mt-2 text-sm text-yellow-700\">\n                    <p>\n                      {locale === 'zh'\n                        ? 'æœ¬é¡µé¢æä¾›çš„è‡ªç„¶ç–—æ³•ä¿¡æ¯ä»…ä¾›æ•™è‚²å’Œå‚è€ƒç›®çš„ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€è¯Šæ–­æˆ–æ²»ç–—ã€‚åœ¨å°è¯•ä»»ä½•è‡ªç„¶ç–—æ³•å‰ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æƒ…å†µï¼Œè¯·åŠ¡å¿…å’¨è¯¢åˆæ ¼çš„åŒ»ç–—ä¿å¥æä¾›è€…ï¼š'\n                        : 'The natural therapy information provided on this page is for educational and reference purposes only and cannot replace professional medical advice, diagnosis or treatment. Before trying any natural therapy, especially if you have the following conditions, please consult a qualified healthcare provider:'\n                      }\n                    </p>\n                    <ul className=\"list-disc list-inside mt-2 space-y-1\">\n                      <li>{locale === 'zh' ? 'ä¸¥é‡æˆ–æŒç»­çš„ç—›ç»ç—‡çŠ¶' : 'Severe or persistent menstrual pain symptoms'}</li>\n                      <li>{locale === 'zh' ? 'æ­£åœ¨æœç”¨å¤„æ–¹è¯ç‰©' : 'Currently taking prescription medications'}</li>\n                      <li>{locale === 'zh' ? 'æœ‰æ…¢æ€§ç–¾ç—…æˆ–è¿‡æ•å²' : 'History of chronic diseases or allergies'}</li>\n                      <li>{locale === 'zh' ? 'æ€€å­•æˆ–å“ºä¹³æœŸ' : 'Pregnancy or breastfeeding'}</li>\n                      <li>{locale === 'zh' ? 'ç—‡çŠ¶çªç„¶åŠ é‡æˆ–æ€§è´¨æ”¹å˜' : 'Sudden worsening or change in symptom nature'}</li>\n                    </ul>\n                    <p className=\"mt-2\">\n                      {locale === 'zh'\n                        ? 'å¦‚æœå‡ºç°å‰§çƒˆç–¼ç—›ã€å‘çƒ­ã€å¼‚å¸¸å‡ºè¡€ç­‰ç—‡çŠ¶ï¼Œè¯·ç«‹å³å°±åŒ»ã€‚'\n                        : 'If you experience severe pain, fever, abnormal bleeding or other symptoms, seek medical attention immediately.'\n                      }\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* å¿«é€Ÿå¯¼èˆª */}\n            <div className=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n              <h3 className=\"text-xl font-semibold mb-4\">\n                ğŸ“‹ {locale === 'zh' ? 'å¿«é€Ÿå¯¼èˆª' : 'Quick Navigation'}\n              </h3>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n                <button\n                  onClick={() => document.getElementById('pain-assessment')?.scrollIntoView({ behavior: 'smooth' })}\n                  className=\"text-left p-3 rounded-lg border border-rose-200 hover:border-rose-300 hover:bg-rose-50 transition-colors\"\n                >\n                  <div className=\"text-rose-600 font-medium text-sm\">ğŸ¯ {locale === 'zh' ? 'ç—›ç»è‡ªæµ‹' : 'Pain Assessment'}</div>\n                </button>\n                <button\n                  onClick={() => document.getElementById('emergency-relief')?.scrollIntoView({ behavior: 'smooth' })}\n                  className=\"text-left p-3 rounded-lg border border-red-200 hover:border-red-300 hover:bg-red-50 transition-colors\"\n                >\n                  <div className=\"text-red-600 font-medium text-sm\">âš¡ {locale === 'zh' ? '5åˆ†é’Ÿæ€¥æ•‘' : '5-Min Emergency'}</div>\n                </button>\n                <button\n                  onClick={() => document.getElementById('therapy-overview')?.scrollIntoView({ behavior: 'smooth' })}\n                  className=\"text-left p-3 rounded-lg border border-blue-200 hover:border-blue-300 hover:bg-blue-50 transition-colors\"\n                >\n                  <div className=\"text-blue-600 font-medium text-sm\">ğŸ“š {locale === 'zh' ? 'ç–—æ³•æ¦‚è¿°' : 'Therapy Overview'}</div>\n                </button>\n                <button\n                  onClick={() => document.getElementById('downloads')?.scrollIntoView({ behavior: 'smooth' })}\n                  className=\"text-left p-3 rounded-lg border border-green-200 hover:border-green-300 hover:bg-green-50 transition-colors\"\n                >\n                  <div className=\"text-green-600 font-medium text-sm\">ğŸ“¥ {locale === 'zh' ? 'å·¥å…·ä¸‹è½½' : 'Tool Downloads'}</div>\n                </button>\n              </div>\n            </div>\n\n            {/* ç—›ç»ç¨‹åº¦è‡ªæµ‹å·¥å…· */}\n            <div id=\"pain-assessment\" className=\"bg-white rounded-lg shadow-sm p-8 mb-8\">\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">\n                ğŸ¯ {locale === 'zh' ? 'ç—›ç»ç¨‹åº¦è‡ªæµ‹' : 'Menstrual Pain Assessment'}\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                {locale === 'zh'\n                  ? 'åœ¨æ¢ç´¢è‡ªç„¶ç–—æ³•å‰ï¼Œäº†è§£æ‚¨çš„ç—›ç»ç¨‹åº¦å¯ä»¥å¸®åŠ©é€‰æ‹©æœ€é€‚åˆçš„æ–¹æ¡ˆã€‚'\n                  : 'Understanding your menstrual pain level before exploring natural therapies can help choose the most suitable approach.'\n                }\n              </p>\n\n              <div className=\"bg-gradient-to-r from-rose-100 to-pink-100 rounded-lg p-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-rose-600 mb-2\">\n                    <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                  </div>\n                  <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                    {locale === 'zh' ? 'ä½¿ç”¨ç°æœ‰çš„ç—›ç»è¯„ä¼°å·¥å…·' : 'Use Existing Pain Assessment Tool'}\n                  </h4>\n                  <p className=\"text-gray-600 mb-4\">\n                    {locale === 'zh'\n                      ? 'æˆ‘ä»¬å·²ç»ä¸ºæ‚¨å‡†å¤‡äº†ä¸“ä¸šçš„ç—›ç»è¯„ä¼°å·¥å…·ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•ã€‚'\n                      : 'We have prepared a professional menstrual pain assessment tool for you. Click the button below to start the test.'\n                    }\n                  </p>\n                  <Link\n                    href={`/${locale}/interactive-tools/period-pain-assessment`}\n                    className=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-rose-600 hover:bg-rose-700 transition-colors\"\n                  >\n                    {locale === 'zh' ? 'å¼€å§‹ç—›ç»è¯„ä¼°' : 'Start Pain Assessment'}\n                    <svg className=\"ml-2 w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\"></path>\n                    </svg>\n                  </Link>\n                </div>\n              </div>\n            </div>\n\n            {/* 5åˆ†é’Ÿæ€¥æ•‘æ–¹æ¡ˆ */}\n            <div id=\"emergency-relief\" className=\"bg-gradient-to-r from-red-50 to-rose-50 rounded-lg p-8 mb-8\">\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">\n                âš¡ {locale === 'zh' ? '5åˆ†é’Ÿæ€¥æ•‘æ–¹æ¡ˆ' : '5-Minute Emergency Relief'}\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                {locale === 'zh'\n                  ? 'æ­£åœ¨ç»å†ç—›ç»ï¼Ÿè¿™äº›æ–¹æ³•å¯ä»¥åœ¨5åˆ†é’Ÿå†…å¼€å§‹ç¼“è§£ç–¼ç—›ã€‚'\n                  : 'Currently experiencing menstrual pain? These methods can start providing relief within 5 minutes.'\n                }\n              </p>\n\n              <div className=\"grid md:grid-cols-3 gap-6\">\n                <div className=\"bg-white rounded-lg p-6 border-l-4 border-red-400\">\n                  <div className=\"flex items-center mb-3\">\n                    <span className=\"text-2xl mr-3\">ğŸ”¥</span>\n                    <h4 className=\"font-semibold text-lg\">{locale === 'zh' ? 'ç«‹å³çƒ­æ•·' : 'Immediate Heat Therapy'}</h4>\n                  </div>\n                  <ul className=\"text-sm text-gray-600 space-y-1\">\n                    <li>â€¢ {locale === 'zh' ? 'çƒ­æ°´è¢‹æ”¾åœ¨ä¸‹è…¹éƒ¨' : 'Place hot water bottle on lower abdomen'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'æ¸©åº¦40-45Â°Cï¼ŒæŒç»­15åˆ†é’Ÿ' : 'Temperature 40-45Â°C, for 15 minutes'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'å¯åŒæ—¶çƒ­æ•·è…°éƒ¨' : 'Can simultaneously apply to lower back'}</li>\n                  </ul>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 border-l-4 border-blue-400\">\n                  <div className=\"flex items-center mb-3\">\n                    <span className=\"text-2xl mr-3\">ğŸ«</span>\n                    <h4 className=\"font-semibold text-lg\">{locale === 'zh' ? 'æ·±å‘¼å¸æ”¾æ¾' : 'Deep Breathing Relaxation'}</h4>\n                  </div>\n                  <ul className=\"text-sm text-gray-600 space-y-1\">\n                    <li>â€¢ {locale === 'zh' ? 'è…¹å¼å‘¼å¸ï¼Œå¸æ°”4ç§’' : 'Abdominal breathing, inhale for 4 seconds'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'å±æ¯4ç§’ï¼Œå‘¼æ°”6ç§’' : 'Hold for 4 seconds, exhale for 6 seconds'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'é‡å¤10æ¬¡' : 'Repeat 10 times'}</li>\n                  </ul>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 border-l-4 border-purple-400\">\n                  <div className=\"flex items-center mb-3\">\n                    <span className=\"text-2xl mr-3\">ğŸ‘</span>\n                    <h4 className=\"font-semibold text-lg\">{locale === 'zh' ? 'ç©´ä½æŒ‰å‹' : 'Acupressure Points'}</h4>\n                  </div>\n                  <ul className=\"text-sm text-gray-600 space-y-1\">\n                    <li>â€¢ {locale === 'zh' ? 'æŒ‰å‹åˆè°·ç©´30ç§’' : 'Press Hegu point for 30 seconds'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'æŒ‰å‹ä¸‰é˜´äº¤ç©´30ç§’' : 'Press Sanyinjiao point for 30 seconds'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'è½»æŸ”æŒ‰æ‘©å…³å…ƒç©´' : 'Gently massage Guanyuan point'}</li>\n                  </ul>\n                </div>\n              </div>\n\n              <div className=\"mt-6 p-4 bg-white rounded-lg border border-red-200\">\n                <p className=\"text-sm text-red-700\">\n                  <strong>{locale === 'zh' ? 'ç´§æ€¥æé†’ï¼š' : 'Emergency Alert:'}</strong>\n                  {locale === 'zh'\n                    ? 'å¦‚æœç–¼ç—›å‰§çƒˆä¸”æŒç»­ï¼Œä¼´æœ‰å‘çƒ­ã€æ¶å¿ƒå‘•åæˆ–å¼‚å¸¸å‡ºè¡€ï¼Œè¯·ç«‹å³å°±åŒ»ã€‚'\n                    : 'If pain is severe and persistent, accompanied by fever, nausea, vomiting, or abnormal bleeding, seek medical attention immediately.'\n                  }\n                </p>\n              </div>\n            </div>\n\n            {/* è‡ªç„¶ç–—æ³•æ¦‚è¿° */}\n            <div id=\"therapy-overview\" className=\"bg-white rounded-lg shadow-sm p-8 mb-8\">\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">\n                ğŸ“š {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•æ¦‚è¿°' : 'Natural Therapy Overview'}\n              </h3>\n\n              <div className=\"prose max-w-none mb-8\">\n                <p className=\"text-gray-600 text-lg leading-relaxed\">\n                  {locale === 'zh'\n                    ? 'ç—›ç»ï¼ˆåŒ»å­¦æœ¯è¯­ï¼šç—›ç»ç—‡/ç»ç—›/Dysmenorrheaï¼‰æ˜¯æŒ‡å¥³æ€§åœ¨æœˆç»æœŸé—´æˆ–å‰åå‡ºç°çš„ä¸‹è…¹éƒ¨ç–¼ç—›ï¼Œå¸¸ä¼´æœ‰è…°ç—›ã€å¤´ç—›ã€æ¶å¿ƒç­‰ç—‡çŠ¶ã€‚æ ¹æ®ä¸–ç•Œå«ç”Ÿç»„ç»‡ï¼ˆWHOï¼‰çš„æ•°æ®ï¼Œå…¨çƒçº¦æœ‰50-90%çš„è‚²é¾„å¥³æ€§æ›¾ç»å†ä¸åŒç¨‹åº¦çš„ç—›ç»ï¼Œå…¶ä¸­çº¦10-20%çš„å¥³æ€§ä¼šå—åˆ°å‰§çƒˆç—›ç»çš„å›°æ‰°ï¼Œä¸¥é‡å½±å“ç”Ÿæ´»è´¨é‡ã€‚'\n                    : 'Dysmenorrhea refers to lower abdominal pain that occurs during or around menstruation, often accompanied by back pain, headaches, nausea and other symptoms. According to World Health Organization (WHO) data, approximately 50-90% of women of reproductive age worldwide have experienced varying degrees of menstrual pain, with about 10-20% suffering from severe menstrual pain that seriously affects quality of life.'\n                  }\n                </p>\n              </div>\n\n              {/* ç§‘å­¦åŸºç¡€ */}\n              <div className=\"mb-8\">\n                <h4 className=\"text-xl font-semibold text-gray-900 mb-4\">\n                  ğŸ”¬ {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•çš„ç§‘å­¦åŸºç¡€' : 'Scientific Foundation of Natural Therapies'}\n                </h4>\n                <p className=\"text-gray-600 mb-4\">\n                  {locale === 'zh'\n                    ? 'ç—›ç»ä¸»è¦ç”±å­å®«å†…è†œé‡Šæ”¾çš„å‰åˆ—è…ºç´ ï¼ˆProstaglandinsï¼‰è¿‡å¤šå¼•èµ·ï¼Œè¿™äº›ç‰©è´¨ä¼šå¯¼è‡´å­å®«å¼ºçƒˆæ”¶ç¼©ï¼Œå‡å°‘è¡€æµï¼Œä»è€Œäº§ç”Ÿç–¼ç—›ã€‚è‡ªç„¶ç–—æ³•çš„ä½œç”¨æœºåˆ¶ä¸»è¦åŒ…æ‹¬ï¼š'\n                    : 'Menstrual pain is primarily caused by excessive prostaglandins released by the endometrium, which cause strong uterine contractions and reduced blood flow, resulting in pain. The mechanisms of natural therapies mainly include:'\n                  }\n                </p>\n\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <span className=\"text-blue-600 text-xl mr-2\">ğŸ©¸</span>\n                      <h5 className=\"font-semibold text-blue-800\">{locale === 'zh' ? 'æ”¹å–„è¡€æ¶²å¾ªç¯' : 'Improve Blood Circulation'}</h5>\n                    </div>\n                    <p className=\"text-sm text-blue-700\">\n                      {locale === 'zh'\n                        ? 'çƒ­æ•·ã€ç‰¹å®šè¿åŠ¨å’ŒæŒ‰æ‘©ç­‰ç‰©ç†ç–—æ³•å¯ä»¥å¢åŠ ç›†è…”è¡€æ¶²å¾ªç¯ï¼Œç¼“è§£è‚Œè‚‰ç´§å¼ ï¼Œå‡è½»ç–¼ç—›ã€‚'\n                        : 'Physical therapies such as heat therapy, specific exercises and massage can increase pelvic blood circulation, relieve muscle tension, and reduce pain.'\n                      }\n                    </p>\n                  </div>\n\n                  <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <span className=\"text-purple-600 text-xl mr-2\">ğŸ§ </span>\n                      <h5 className=\"font-semibold text-purple-800\">{locale === 'zh' ? 'è°ƒèŠ‚ç¥ç»ç³»ç»Ÿ' : 'Regulate Nervous System'}</h5>\n                    </div>\n                    <p className=\"text-sm text-purple-700\">\n                      {locale === 'zh'\n                        ? 'å†¥æƒ³ã€æ·±å‘¼å¸ç­‰å¿ƒç†æŠ€å·§å¯ä»¥æ¿€æ´»å‰¯äº¤æ„Ÿç¥ç»ç³»ç»Ÿï¼Œé™ä½ç–¼ç—›æ•æ„Ÿåº¦ã€‚'\n                        : 'Psychological techniques such as meditation and deep breathing can activate the parasympathetic nervous system and reduce pain sensitivity.'\n                      }\n                    </p>\n                  </div>\n\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <span className=\"text-green-600 text-xl mr-2\">âš–ï¸</span>\n                      <h5 className=\"font-semibold text-green-800\">{locale === 'zh' ? 'è°ƒèŠ‚è·å°”è’™å¹³è¡¡' : 'Balance Hormones'}</h5>\n                    </div>\n                    <p className=\"text-sm text-green-700\">\n                      {locale === 'zh'\n                        ? 'æŸäº›è‰è¯å’Œé¥®é£Ÿè°ƒæ•´å¯ä»¥å¸®åŠ©å¹³è¡¡é›Œæ¿€ç´ å’Œå­•æ¿€ç´ æ°´å¹³ã€‚'\n                        : 'Certain herbs and dietary adjustments can help balance estrogen and progesterone levels.'\n                      }\n                    </p>\n                  </div>\n\n                  <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <span className=\"text-orange-600 text-xl mr-2\">ğŸ”¥</span>\n                      <h5 className=\"font-semibold text-orange-800\">{locale === 'zh' ? 'å‡å°‘ç‚ç—‡' : 'Reduce Inflammation'}</h5>\n                    </div>\n                    <p className=\"text-sm text-orange-700\">\n                      {locale === 'zh'\n                        ? 'å§œé»„ç´ ã€omega-3è„‚è‚ªé…¸ç­‰å¤©ç„¶æŠ—ç‚æˆåˆ†å¯ä»¥æŠ‘åˆ¶ç‚ç—‡ååº”ï¼Œå‡å°‘å‰åˆ—è…ºç´ çš„äº§ç”Ÿã€‚'\n                        : 'Natural anti-inflammatory components like curcumin and omega-3 fatty acids can suppress inflammatory responses and reduce prostaglandin production.'\n                      }\n                    </p>\n                  </div>\n\n                  <div className=\"bg-pink-50 border border-pink-200 rounded-lg p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <span className=\"text-pink-600 text-xl mr-2\">ğŸ’ª</span>\n                      <h5 className=\"font-semibold text-pink-800\">{locale === 'zh' ? 'ç¼“è§£è‚Œè‚‰ç´§å¼ ' : 'Relieve Muscle Tension'}</h5>\n                    </div>\n                    <p className=\"text-sm text-pink-700\">\n                      {locale === 'zh'\n                        ? 'ç‰¹å®šçš„ç‘œä¼½å§¿åŠ¿ã€ä¼¸å±•è¿åŠ¨å¯ä»¥æ”¾æ¾éª¨ç›†åŒºåŸŸçš„è‚Œè‚‰ã€‚'\n                        : 'Specific yoga poses and stretching exercises can relax muscles in the pelvic region.'\n                      }\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* è‡ªç„¶ç–—æ³•åˆ†ç±» */}\n              <div className=\"mb-8\">\n                <h4 className=\"text-xl font-semibold text-gray-900 mb-6\">\n                  ğŸ—‚ï¸ {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•åˆ†ç±»' : 'Natural Therapy Categories'}\n                </h4>\n                <p className=\"text-gray-600 mb-6\">\n                  {locale === 'zh'\n                    ? 'ç‚¹å‡»ä¸‹æ–¹å¡ç‰‡äº†è§£æ¯ç§ç–—æ³•çš„è¯¦ç»†ä¿¡æ¯å’Œå…·ä½“æ–¹æ³•ã€‚'\n                    : 'Click the cards below to learn detailed information and specific methods for each therapy.'\n                  }\n                </p>\n\n                <div className=\"space-y-4\">\n                  {therapyCategories.map((therapy) => (\n                    <div key={therapy.id} className=\"border border-gray-200 rounded-lg overflow-hidden\">\n                      <button\n                        onClick={() => setExpandedTherapy(expandedTherapy === therapy.id ? null : therapy.id)}\n                        className={`w-full p-6 text-left transition-all duration-200 ${\n                          expandedTherapy === therapy.id\n                            ? getExpandedCardClasses(therapy.color)\n                            : getCardClasses(therapy.color)\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center\">\n                            <span className=\"text-3xl mr-4\">{therapy.icon}</span>\n                            <div>\n                              <h5 className={`font-semibold text-lg ${getTextClasses(therapy.color)} mb-1`}>\n                                {therapy.title}\n                              </h5>\n                              <p className={`text-sm ${getSubtitleClasses(therapy.color)}`}>\n                                {therapy.subtitle}\n                              </p>\n                            </div>\n                          </div>\n                          <svg\n                            className={`w-5 h-5 ${getSubtitleClasses(therapy.color)} transform transition-transform duration-200 ${\n                              expandedTherapy === therapy.id ? 'rotate-180' : ''\n                            }`}\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n                          </svg>\n                        </div>\n                      </button>\n\n                      {expandedTherapy === therapy.id && (\n                        <div className={`p-6 bg-white border-t ${getBorderClasses(therapy.color)}`}>\n                          <p className=\"text-gray-700 mb-6\">{therapy.details.description}</p>\n\n                          <h6 className=\"font-semibold text-gray-900 mb-4\">\n                            {locale === 'zh' ? 'å…·ä½“æ–¹æ³•ï¼š' : 'Specific Methods:'}\n                          </h6>\n\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            {therapy.details.methods.map((method, index) => (\n                              <div key={index} className={`p-4 ${getMethodCardClasses(therapy.color)} border rounded-lg`}>\n                                <h6 className={`font-medium ${getMethodTextClasses(therapy.color)} mb-2 block`}>\n                                  {method.name}\n                                </h6>\n                                <p className={`text-sm ${getMethodDescClasses(therapy.color)}`}>\n                                  {method.description}\n                                </p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* é‡è¦æç¤º */}\n              <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\n                <div className=\"flex items-start\">\n                  <div className=\"flex-shrink-0\">\n                    <svg className=\"h-5 w-5 text-gray-400 mt-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                  <div className=\"ml-3\">\n                    <h5 className=\"text-sm font-medium text-gray-900 mb-1\">\n                      {locale === 'zh' ? 'é‡è¦æç¤º' : 'Important Note'}\n                    </h5>\n                    <p className=\"text-sm text-gray-600\">\n                      {locale === 'zh'\n                        ? 'æœ¬æŒ‡å—ä¸­çš„è‡ªç„¶ç–—æ³•ä¸»è¦é€‚ç”¨äºåŸå‘æ€§ç—›ç»ï¼ˆæ— å™¨è´¨æ€§ç—…å˜å¼•èµ·çš„ç—›ç»ï¼‰ã€‚å¦‚æœæ‚¨æ€€ç–‘è‡ªå·±å¯èƒ½æ‚£æœ‰å­å®«å†…è†œå¼‚ä½ç—‡ã€å­å®«è‚Œç˜¤ç­‰ç–¾ç—…ï¼Œæˆ–ç»å†å¼‚å¸¸ä¸¥é‡çš„ç—›ç»ï¼Œè¯·å…ˆå’¨è¯¢åŒ»ç–—ä¸“ä¸šäººå£«ã€‚è‡ªç„¶ç–—æ³•åº”ä½œä¸ºç»¼åˆç–¼ç—›ç®¡ç†ç­–ç•¥çš„ä¸€éƒ¨åˆ†ï¼Œè€Œéæ›¿ä»£å¿…è¦çš„åŒ»ç–—è¯Šæ–­å’Œæ²»ç–—ã€‚'\n                        : 'The natural therapies in this guide are primarily suitable for primary dysmenorrhea (menstrual pain without organic pathology). If you suspect you may have endometriosis, uterine fibroids, or other conditions, or experience abnormally severe menstrual pain, please consult a medical professional first. Natural therapies should be part of a comprehensive pain management strategy, not a replacement for necessary medical diagnosis and treatment.'\n                      }\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* å®ç”¨å·¥å…·ä¸‹è½½åŒº */}\n            <div id=\"downloads\" className=\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-8\">\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">\n                ğŸ“¥ {locale === 'zh' ? 'å®ç”¨å·¥å…·ä¸‹è½½' : 'Practical Tool Downloads'}\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                {locale === 'zh'\n                  ? 'æˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡äº†ä¸“ä¸šçš„ç—›ç»ç®¡ç†å·¥å…·ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°è¿½è¸ªç—‡çŠ¶å’Œè¯„ä¼°ç–—æ•ˆã€‚'\n                  : 'We have prepared professional menstrual pain management tools to help you better track symptoms and evaluate treatment effectiveness.'\n                }\n              </p>\n\n              <div className=\"grid md:grid-cols-3 gap-6\">\n                <div className=\"bg-white rounded-lg p-6 shadow-sm border border-green-200\">\n                  <div className=\"flex items-center mb-4\">\n                    <span className=\"text-2xl mr-3\">ğŸ“‹</span>\n                    <h4 className=\"font-semibold text-lg text-gray-900\">\n                      {locale === 'zh' ? 'ç—›ç»ç—‡çŠ¶è¿½è¸ªè¡¨' : 'Pain Tracking Form'}\n                    </h4>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    {locale === 'zh'\n                      ? 'è¿½è¸ªæ‚¨çš„ç—‡çŠ¶å˜åŒ–å’Œæ²»ç–—æ•ˆæœï¼Œå¸®åŠ©è¯†åˆ«æœ€æœ‰æ•ˆçš„ç¼“è§£æ–¹æ³•ã€‚'\n                      : 'Track your symptom changes and treatment effects to help identify the most effective relief methods.'\n                    }\n                  </p>\n                  <div className=\"space-y-2\">\n                    <a\n                      href={`/${locale}/downloads/preview/pain-tracking-form`}\n                      className=\"block w-full text-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm\"\n                    >\n                      {locale === 'zh' ? 'é¢„è§ˆè¡¨æ ¼' : 'Preview Form'}\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 shadow-sm border border-blue-200\">\n                  <div className=\"flex items-center mb-4\">\n                    <span className=\"text-2xl mr-3\">ğŸ“Š</span>\n                    <h4 className=\"font-semibold text-lg text-gray-900\">\n                      {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•æ•ˆæœè¯„ä¼°è¡¨' : 'Natural Therapy Assessment'}\n                    </h4>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    {locale === 'zh'\n                      ? 'è¯„ä¼°ä¸åŒè‡ªç„¶ç–—æ³•çš„ä¸ªäººæ•ˆæœï¼Œæ‰¾åˆ°æœ€é€‚åˆæ‚¨çš„æ²»ç–—ç»„åˆã€‚'\n                      : 'Evaluate the personal effectiveness of different natural therapies to find the treatment combination that works best for you.'\n                    }\n                  </p>\n                  <div className=\"space-y-2\">\n                    <a\n                      href={`/${locale}/downloads/preview/natural-therapy-assessment`}\n                      className=\"block w-full text-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm\"\n                    >\n                      {locale === 'zh' ? 'é¢„è§ˆè¯„ä¼°è¡¨' : 'Preview Assessment'}\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 shadow-sm border border-purple-200\">\n                  <div className=\"flex items-center mb-4\">\n                    <span className=\"text-2xl mr-3\">ğŸ</span>\n                    <h4 className=\"font-semibold text-lg text-gray-900\">\n                      {locale === 'zh' ? 'æœˆç»å‘¨æœŸè¥å…»è®¡åˆ’' : 'Menstrual Cycle Nutrition Plan'}\n                    </h4>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    {locale === 'zh'\n                      ? 'ä¸ªæ€§åŒ–çš„é¥®é£Ÿå’Œè¿åŠ¨å®‰æ’ï¼Œé…åˆæœˆç»å‘¨æœŸè¿›è¡Œç§‘å­¦è°ƒç†ã€‚'\n                      : 'Personalized diet and exercise arrangements for scientific conditioning in sync with your menstrual cycle.'\n                    }\n                  </p>\n                  <div className=\"space-y-2\">\n                    <a\n                      href={`/${locale}/downloads/preview/menstrual-cycle-nutrition-plan`}\n                      className=\"block w-full text-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm\"\n                    >\n                      {locale === 'zh' ? 'é¢„è§ˆè¥å…»è®¡åˆ’' : 'Preview Nutrition Plan'}\n                    </a>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6 p-4 bg-white rounded-lg border border-gray-200\">\n                <div className=\"flex items-center\">\n                  <svg className=\"h-5 w-5 text-gray-400 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                  </svg>\n                  <p className=\"text-sm text-gray-600\">\n                    {locale === 'zh'\n                      ? 'ğŸ’¡ æç¤ºï¼šå»ºè®®æ‰“å°è¿™äº›è¡¨æ ¼ï¼Œæ‰‹å†™è®°å½•æ¯”ç”µå­è®°å½•æ›´æœ‰åŠ©äºå»ºç«‹å¥åº·ä¹ æƒ¯ã€‚'\n                      : 'ğŸ’¡ Tip: We recommend printing these forms - handwritten records are more helpful for building healthy habits than electronic records.'\n                    }\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n          </section>\n\n          {/* Core Conditioning Principles */}\n          <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-6xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">\n              {locale === 'zh' ? 'è°ƒç†æ ¸å¿ƒåŸåˆ™' : 'Core Conditioning Principles'}\n            </h2>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {/* Prevention First */}\n              <div className=\"p-6 border border-gray-200 rounded-lg text-center\">\n                <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                  </svg>\n                </div>\n                <h3 className=\"font-semibold mb-2\">\n                  {locale === 'zh' ? 'é¢„é˜²ä¸ºä¸»' : 'Prevention First'}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {locale === 'zh'\n                    ? 'å»ºç«‹é•¿æœŸå¥åº·ä¹ æƒ¯ï¼Œä»æ ¹æºé¢„é˜²ç—›ç»å‘ç”Ÿ'\n                    : 'Establish long-term healthy habits to prevent menstrual pain from the root cause'\n                  }\n                </p>\n              </div>\n\n              {/* Gradual Progress */}\n              <div className=\"p-6 border border-gray-200 rounded-lg text-center\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                  </svg>\n                </div>\n                <h3 className=\"font-semibold mb-2\">\n                  {locale === 'zh' ? 'å¾ªåºæ¸è¿›' : 'Gradual Progress'}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {locale === 'zh'\n                    ? 'é€æ­¥è°ƒæ•´ç”Ÿæ´»æ–¹å¼ï¼Œé¿å…æ€¥è¿›å¼æ”¹å˜'\n                    : 'Gradually adjust lifestyle, avoid radical changes'\n                  }\n                </p>\n              </div>\n\n              {/* Personalized Adjustment */}\n              <div className=\"p-6 border border-gray-200 rounded-lg text-center\">\n                <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                  </svg>\n                </div>\n                <h3 className=\"font-semibold mb-2\">\n                  {locale === 'zh' ? 'ä¸ªæ€§åŒ–è°ƒæ•´' : 'Personalized Adjustment'}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {locale === 'zh'\n                    ? 'æ ¹æ®ä¸ªäººä½“è´¨å’Œååº”è°ƒæ•´æ–¹æ¡ˆ'\n                    : 'Adjust plans based on individual constitution and response'\n                  }\n                </p>\n              </div>\n\n              {/* Persistent Commitment */}\n              <div className=\"p-6 border border-gray-200 rounded-lg text-center\">\n                <div className=\"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                  </svg>\n                </div>\n                <h3 className=\"font-semibold mb-2\">\n                  {locale === 'zh' ? 'æŒç»­åšæŒ' : 'Persistent Commitment'}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {locale === 'zh'\n                    ? 'è°ƒç†éœ€è¦æ—¶é—´ï¼ŒåšæŒ3-6ä¸ªæœˆè§æ•ˆ'\n                    : 'Conditioning takes time, persist for 3-6 months to see results'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n          </section>\n\n          {/* Four Pillars of Conditioning */}\n          <section className=\"py-16 bg-gray-100 rounded-2xl\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-6xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">\n              {locale === 'zh' ? 'å››å¤§è°ƒç†æ”¯æŸ±' : 'Four Pillars of Conditioning'}\n            </h2>\n\n            {/* Nutritional Therapy */}\n            <div className=\"bg-white rounded-lg shadow-lg p-8 mb-12\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mr-6\">\n                  <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"></path>\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-green-700 mb-2\">\n                    {locale === 'zh' ? 'è¥å…»ç–—æ³•' : 'Nutritional Therapy'}\n                  </h3>\n                  <p className=\"text-green-600\">\n                    {locale === 'zh' ? 'é€šè¿‡ç§‘å­¦é¥®é£Ÿè°ƒèŠ‚æ¿€ç´ å¹³è¡¡ï¼Œå‡å°‘ç‚ç—‡' : 'Regulate hormonal balance and reduce inflammation through scientific diet'}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {/* Anti-inflammatory Foods */}\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-green-700 mb-4\">\n                    {locale === 'zh' ? 'æŠ—ç‚é£Ÿç‰©' : 'Anti-inflammatory Foods'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"text-green-500 mr-3 mt-1\">ğŸŸ</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'æ·±æµ·é±¼ç±»' : 'Deep Sea Fish'}</strong>\n                        <p className=\"text-sm text-green-600\">\n                          {locale === 'zh' ? 'å¯Œå«Omega-3è„‚è‚ªé…¸ï¼Œæ¯å‘¨2-3æ¬¡' : 'Rich in Omega-3 fatty acids, 2-3 times per week'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-green-500 mr-3 mt-1\">ğŸ¥¬</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'ç»¿å¶è”¬èœ' : 'Leafy Greens'}</strong>\n                        <p className=\"text-sm text-green-600\">\n                          {locale === 'zh' ? 'è èœã€ç¾½è¡£ç”˜è“ï¼Œå¯Œå«é•å’Œå¶é…¸' : 'Spinach, kale, rich in magnesium and folate'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-green-500 mr-3 mt-1\">ğŸ«</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'è“ç±»æ°´æœ' : 'Berries'}</strong>\n                        <p className=\"text-sm text-green-600\">\n                          {locale === 'zh' ? 'è“è“ã€è‰è“ï¼ŒæŠ—æ°§åŒ–å‰‚ä¸°å¯Œ' : 'Blueberries, strawberries, rich in antioxidants'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-green-500 mr-3 mt-1\">ğŸ¥œ</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'åšæœç§å­' : 'Nuts & Seeds'}</strong>\n                        <p className=\"text-sm text-green-600\">\n                          {locale === 'zh' ? 'æ ¸æ¡ƒã€äºšéº»ç±½ï¼Œå¥åº·è„‚è‚ªæº' : 'Walnuts, flaxseeds, healthy fat sources'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n\n                {/* Key Nutrients */}\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-blue-700 mb-4\">\n                    {locale === 'zh' ? 'å…³é”®è¥å…»ç´ ' : 'Key Nutrients'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-white rounded p-3\">\n                      <strong className=\"text-blue-600\">\n                        {locale === 'zh' ? 'é• (300-400mg/å¤©)' : 'Magnesium (300-400mg/day)'}\n                      </strong>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        {locale === 'zh' ? 'æ”¾æ¾è‚Œè‚‰ï¼Œå‡å°‘ç—‰æŒ›' : 'Relax muscles, reduce spasms'}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">\n                        {locale === 'zh' ? 'æ¥æºï¼šé»‘å·§å…‹åŠ›ã€é¦™è•‰ã€æä»' : 'Sources: Dark chocolate, bananas, almonds'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong className=\"text-blue-600\">\n                        {locale === 'zh' ? 'ç»´ç”Ÿç´ D (1000-2000IU/å¤©)' : 'Vitamin D (1000-2000IU/day)'}\n                      </strong>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        {locale === 'zh' ? 'è°ƒèŠ‚å…ç–«ï¼Œå‡å°‘ç‚ç—‡' : 'Regulate immunity, reduce inflammation'}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">\n                        {locale === 'zh' ? 'æ¥æºï¼šé˜³å…‰ç…§å°„ã€é±¼è‚æ²¹' : 'Sources: Sunlight exposure, fish oil'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong className=\"text-blue-600\">\n                        {locale === 'zh' ? 'Omega-3 (1-2g/å¤©)' : 'Omega-3 (1-2g/day)'}\n                      </strong>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        {locale === 'zh' ? 'æŠ‘åˆ¶å‰åˆ—è…ºç´ åˆæˆ' : 'Inhibit prostaglandin synthesis'}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">\n                        {locale === 'zh' ? 'æ¥æºï¼šé±¼æ²¹ã€äºšéº»ç±½æ²¹' : 'Sources: Fish oil, flaxseed oil'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Foods to Limit */}\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-red-700 mb-4\">\n                    {locale === 'zh' ? 'å»ºè®®é™åˆ¶' : 'Recommended Limits'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"text-red-500 mr-3 mt-1\">âš ï¸</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'ç²¾åˆ¶ç³–' : 'Refined Sugar'}</strong>\n                        <p className=\"text-sm text-red-600\">\n                          {locale === 'zh' ? 'åŠ é‡ç‚ç—‡ååº”ï¼Œå½±å“æ¿€ç´ å¹³è¡¡' : 'Worsen inflammatory response, affect hormonal balance'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-red-500 mr-3 mt-1\">â˜•</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'è¿‡é‡å’–å•¡å› ' : 'Excessive Caffeine'}</strong>\n                        <p className=\"text-sm text-red-600\">\n                          {locale === 'zh' ? 'å¯èƒ½å¢åŠ ç´§å¼ æ„Ÿï¼Œé™åˆ¶åœ¨2æ¯/å¤©' : 'May increase tension, limit to 2 cups/day'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-red-500 mr-3 mt-1\">ğŸ§‚</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'é«˜é’ é£Ÿç‰©' : 'High Sodium Foods'}</strong>\n                        <p className=\"text-sm text-red-600\">\n                          {locale === 'zh' ? 'åŠ é‡æ°´è‚¿å’Œè…¹èƒ€' : 'Worsen edema and bloating'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-red-500 mr-3 mt-1\">ğŸ¥©</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'è¿‡å¤šçº¢è‚‰' : 'Excessive Red Meat'}</strong>\n                        <p className=\"text-sm text-red-600\">\n                          {locale === 'zh' ? 'å¯èƒ½ä¿ƒè¿›ç‚ç—‡ï¼Œé€‚é‡é£Ÿç”¨' : 'May promote inflammation, consume in moderation'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Weekly Meal Plan */}\n              <div className=\"mt-8 bg-green-50 border border-green-200 rounded-lg p-6\">\n                <h4 className=\"text-lg font-semibold text-green-700 mb-4\">\n                  ğŸ’¡ {locale === 'zh' ? 'è°ƒç†æœŸæ¨èé£Ÿè°±' : 'Recommended Recipes for Conditioning Period'}\n                </h4>\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                  <div className=\"bg-white rounded p-3\">\n                    <strong className=\"text-green-600\">{locale === 'zh' ? 'æ—©é¤' : 'Breakfast'}</strong>\n                    <p className=\"text-sm text-gray-700\">\n                      {locale === 'zh' ? 'ç‡•éº¦ + è“è“ + æ ¸æ¡ƒ + è±†å¥¶' : 'Oats + Blueberries + Walnuts + Soy Milk'}\n                    </p>\n                  </div>\n                  <div className=\"bg-white rounded p-3\">\n                    <strong className=\"text-green-600\">{locale === 'zh' ? 'åˆé¤' : 'Lunch'}</strong>\n                    <p className=\"text-sm text-gray-700\">\n                      {locale === 'zh' ? 'ä¸‰æ–‡é±¼ + ç³™ç±³ + è’¸è”¬èœ' : 'Salmon + Brown Rice + Steamed Vegetables'}\n                    </p>\n                  </div>\n                  <div className=\"bg-white rounded p-3\">\n                    <strong className=\"text-green-600\">{locale === 'zh' ? 'æ™šé¤' : 'Dinner'}</strong>\n                    <p className=\"text-sm text-gray-700\">\n                      {locale === 'zh' ? 'è±†è… + è èœæ±¤ + å°‘é‡ç³™ç±³' : 'Tofu + Spinach Soup + Small Amount of Brown Rice'}\n                    </p>\n                  </div>\n                  <div className=\"bg-white rounded p-3\">\n                    <strong className=\"text-green-600\">{locale === 'zh' ? 'é›¶é£Ÿ' : 'Snacks'}</strong>\n                    <p className=\"text-sm text-gray-700\">\n                      {locale === 'zh' ? 'æä» + ç»¿èŒ¶ + é»‘å·§å…‹åŠ›' : 'Almonds + Green Tea + Dark Chocolate'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Exercise Therapy */}\n            <div className=\"bg-white rounded-lg shadow-lg p-8 mb-12\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mr-6\">\n                  <svg className=\"w-8 h-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"></path>\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-blue-700 mb-2\">\n                    {locale === 'zh' ? 'è¿åŠ¨ç–—æ³•' : 'Exercise Therapy'}\n                  </h3>\n                  <p className=\"text-blue-600\">\n                    {locale === 'zh' ? 'è§„å¾‹è¿åŠ¨ä¿ƒè¿›å†…å•¡è‚½é‡Šæ”¾ï¼Œæ”¹å–„è¡€æ¶²å¾ªç¯' : 'Regular exercise promotes endorphin release and improves circulation'}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {/* Aerobic Exercise */}\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-blue-700 mb-4\">\n                    {locale === 'zh' ? 'æœ‰æ°§è¿åŠ¨' : 'Aerobic Exercise'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-center\">\n                      <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                        <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                        </svg>\n                      </div>\n                      <p className=\"text-sm font-semibold\">{locale === 'zh' ? 'å¼ºåº¦' : 'Intensity'}</p>\n                      <p className=\"text-xs text-blue-600\">{locale === 'zh' ? 'ä¸­ç­‰å¼ºåº¦' : 'Moderate'}</p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'å¿«èµ°ï¼š' : 'Brisk Walking:'}</strong>\n                        {locale === 'zh' ? '30åˆ†é’Ÿï¼Œæ¯å‘¨4-5æ¬¡' : '30 min, 4-5 times/week'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'æ¸¸æ³³ï¼š' : 'Swimming:'}</strong>\n                        {locale === 'zh' ? '25åˆ†é’Ÿï¼Œæ¯å‘¨3æ¬¡' : '25 min, 3 times/week'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'éª‘è¡Œï¼š' : 'Cycling:'}</strong>\n                        {locale === 'zh' ? '45åˆ†é’Ÿï¼Œæ¯å‘¨2-3æ¬¡' : '45 min, 2-3 times/week'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'èˆè¹ˆï¼š' : 'Dancing:'}</strong>\n                        {locale === 'zh' ? '30åˆ†é’Ÿï¼Œæ¯å‘¨2-3æ¬¡' : '30 min, 2-3 times/week'}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Yoga */}\n                <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-purple-700 mb-4\">\n                    {locale === 'zh' ? 'ç‘œä¼½ç»ƒä¹ ' : 'Yoga Practice'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-center\">\n                      <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                        <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                        </svg>\n                      </div>\n                      <p className=\"text-sm font-semibold\">{locale === 'zh' ? 'é¢‘ç‡' : 'Frequency'}</p>\n                      <p className=\"text-xs text-purple-600\">{locale === 'zh' ? 'æ¯å‘¨3-4æ¬¡' : '3-4 times/week'}</p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'æ‰­è½¬ä½“å¼ï¼š' : 'Twisting Poses:'}</strong>\n                        {locale === 'zh' ? 'ç¼“è§£è…¹éƒ¨ç´§å¼ ' : 'Relieve abdominal tension'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'å‰å±ˆä½“å¼ï¼š' : 'Forward Bends:'}</strong>\n                        {locale === 'zh' ? 'æ”¾æ¾ç¥ç»ç³»ç»Ÿ' : 'Relax nervous system'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'é«‹éƒ¨å¼€å¯ï¼š' : 'Hip Openers:'}</strong>\n                        {locale === 'zh' ? 'æ”¹å–„ç›†è…”è¡€æµ' : 'Improve pelvic circulation'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'å€’ç«‹ä½“å¼ï¼š' : 'Inversions:'}</strong>\n                        {locale === 'zh' ? 'è°ƒèŠ‚å†…åˆ†æ³Œ' : 'Regulate endocrine system'}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Strength Training */}\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-green-700 mb-4\">\n                    {locale === 'zh' ? 'åŠ›é‡è®­ç»ƒ' : 'Strength Training'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-center\">\n                      <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                        <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                      </div>\n                      <p className=\"text-sm font-semibold\">{locale === 'zh' ? 'é‡ç‚¹' : 'Focus'}</p>\n                      <p className=\"text-xs text-green-600\">{locale === 'zh' ? 'æ ¸å¿ƒç¨³å®š' : 'Core Stability'}</p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'å¹³æ¿æ”¯æ’‘ï¼š' : 'Plank:'}</strong>\n                        {locale === 'zh' ? '30-60ç§’Ã—3ç»„' : '30-60 sec Ã— 3 sets'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'æ¡¥å¼ï¼š' : 'Bridge:'}</strong>\n                        {locale === 'zh' ? '15-20æ¬¡Ã—3ç»„' : '15-20 reps Ã— 3 sets'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'æ·±è¹²ï¼š' : 'Squats:'}</strong>\n                        {locale === 'zh' ? '12-15æ¬¡Ã—3ç»„' : '12-15 reps Ã— 3 sets'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'é¸Ÿç‹—å¼ï¼š' : 'Bird Dog:'}</strong>\n                        {locale === 'zh' ? '10æ¬¡/ä¾§Ã—2ç»„' : '10 reps/side Ã— 2 sets'}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Pelvic Floor */}\n                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-orange-700 mb-4\">\n                    {locale === 'zh' ? 'ç›†åº•è®­ç»ƒ' : 'Pelvic Floor Training'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-center\">\n                      <div className=\"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                        <svg className=\"w-6 h-6 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                        </svg>\n                      </div>\n                      <p className=\"text-sm font-semibold\">{locale === 'zh' ? 'ä¸“é¡¹' : 'Specialized'}</p>\n                      <p className=\"text-xs text-orange-600\">{locale === 'zh' ? 'æ¯æ—¥ç»ƒä¹ ' : 'Daily Practice'}</p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'å‡¯æ ¼å°”è¿åŠ¨ï¼š' : 'Kegel Exercise:'}</strong>\n                        {locale === 'zh' ? 'æ”¶ç¼©5ç§’Ã—10æ¬¡' : '5 sec hold Ã— 10 reps'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'æ·±å‘¼å¸ï¼š' : 'Deep Breathing:'}</strong>\n                        {locale === 'zh' ? 'é…åˆç›†åº•æ”¶æ”¾' : 'With pelvic floor engagement'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'è‡€æ¡¥å˜å¼ï¼š' : 'Bridge Variations:'}</strong>\n                        {locale === 'zh' ? 'åŠ å¼ºç›†åº•è‚Œç¾¤' : 'Strengthen pelvic floor'}\n                      </div>\n                      <div className=\"bg-white rounded p-2 text-sm\">\n                        <strong>{locale === 'zh' ? 'çŒ«ç‰›å¼ï¼š' : 'Cat-Cow:'}</strong>\n                        {locale === 'zh' ? 'æ´»åŠ¨éª¨ç›†' : 'Mobilize pelvis'}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Exercise Schedule */}\n              <div className=\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                <h4 className=\"text-lg font-semibold text-blue-700 mb-4\">\n                  ğŸ“… {locale === 'zh' ? 'å‘¨è¿åŠ¨è®¡åˆ’' : 'Weekly Exercise Plan'}\n                </h4>\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full text-sm\">\n                    <thead>\n                      <tr className=\"bg-blue-100\">\n                        <th className=\"p-2 text-left\">{locale === 'zh' ? 'æ—¥æœŸ' : 'Day'}</th>\n                        <th className=\"p-2 text-left\">{locale === 'zh' ? 'è¿åŠ¨ç±»å‹' : 'Exercise Type'}</th>\n                        <th className=\"p-2 text-left\">{locale === 'zh' ? 'æ—¶é•¿' : 'Duration'}</th>\n                        <th className=\"p-2 text-left\">{locale === 'zh' ? 'æ³¨æ„äº‹é¡¹' : 'Notes'}</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr className=\"bg-white\">\n                        <td className=\"p-2 font-semibold\">{locale === 'zh' ? 'å‘¨ä¸€' : 'Monday'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'æœ‰æ°§è¿åŠ¨ + ç›†åº•è®­ç»ƒ' : 'Aerobic + Pelvic Floor'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? '45åˆ†é’Ÿ' : '45 min'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'è®°å½•å¿ƒç‡' : 'Monitor heart rate'}</td>\n                      </tr>\n                      <tr className=\"bg-blue-25\">\n                        <td className=\"p-2 font-semibold\">{locale === 'zh' ? 'å‘¨äºŒ' : 'Tuesday'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'ç‘œä¼½ + ä¼¸å±•' : 'Yoga + Stretching'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? '60åˆ†é’Ÿ' : '60 min'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'ä¸“æ³¨å‘¼å¸' : 'Focus on breathing'}</td>\n                      </tr>\n                      <tr className=\"bg-white\">\n                        <td className=\"p-2 font-semibold\">{locale === 'zh' ? 'å‘¨ä¸‰' : 'Wednesday'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'åŠ›é‡è®­ç»ƒ' : 'Strength Training'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? '30åˆ†é’Ÿ' : '30 min'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'è½»é‡é‡å¤šæ¬¡æ•°' : 'Light weight, high reps'}</td>\n                      </tr>\n                      <tr className=\"bg-blue-25\">\n                        <td className=\"p-2 font-semibold\">{locale === 'zh' ? 'å‘¨å››' : 'Thursday'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'æœ‰æ°§è¿åŠ¨' : 'Aerobic Exercise'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? '40åˆ†é’Ÿ' : '40 min'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'ä¿æŒä¸­ç­‰å¼ºåº¦' : 'Maintain moderate intensity'}</td>\n                      </tr>\n                      <tr className=\"bg-white\">\n                        <td className=\"p-2 font-semibold\">{locale === 'zh' ? 'å‘¨äº”' : 'Friday'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'ç‘œä¼½ + å†¥æƒ³' : 'Yoga + Meditation'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? '50åˆ†é’Ÿ' : '50 min'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'æ”¾æ¾ä¸ºä¸»' : 'Focus on relaxation'}</td>\n                      </tr>\n                      <tr className=\"bg-blue-25\">\n                        <td className=\"p-2 font-semibold\">{locale === 'zh' ? 'å‘¨æœ«' : 'Weekend'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'æˆ·å¤–æ´»åŠ¨ / ä¼‘æ¯' : 'Outdoor Activity / Rest'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'è‡ªç”±å®‰æ’' : 'Flexible'}</td>\n                        <td className=\"p-2\">{locale === 'zh' ? 'äº«å—è¿åŠ¨ä¹è¶£' : 'Enjoy movement'}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n\n            {/* Stress Management */}\n            <div className=\"bg-white rounded-lg shadow-lg p-8 mb-12\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mr-6\">\n                  <svg className=\"w-8 h-8 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"></path>\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-purple-700 mb-2\">\n                    {locale === 'zh' ? 'å‹åŠ›ç®¡ç†' : 'Stress Management'}\n                  </h3>\n                  <p className=\"text-purple-600\">\n                    {locale === 'zh' ? 'æ…¢æ€§å‹åŠ›æ˜¯ç—›ç»åŠ é‡çš„é‡è¦å› ç´ ' : 'Chronic stress is a major factor in worsening menstrual pain'}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {/* Mindfulness */}\n                <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-purple-700 mb-4\">\n                    {locale === 'zh' ? 'æ­£å¿µç»ƒä¹ ' : 'Mindfulness Practice'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'æ­£å¿µå†¥æƒ³' : 'Mindful Meditation'}</strong>\n                      <p className=\"text-sm text-purple-600 mt-1\">\n                        {locale === 'zh' ? 'æ¯æ—¥15-20åˆ†é’Ÿï¼Œä¸“æ³¨å½“ä¸‹' : '15-20 min daily, focus on present'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'èº«ä½“æ‰«æ' : 'Body Scan'}</strong>\n                      <p className=\"text-sm text-purple-600 mt-1\">\n                        {locale === 'zh' ? 'è§‰å¯Ÿèº«ä½“æ„Ÿå—ï¼Œé‡Šæ”¾ç´§å¼ ' : 'Awareness of body sensations, release tension'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'æ­£å¿µé¥®é£Ÿ' : 'Mindful Eating'}</strong>\n                      <p className=\"text-sm text-purple-600 mt-1\">\n                        {locale === 'zh' ? 'æ…¢é£Ÿï¼Œå“å‘³æ¯ä¸€å£' : 'Slow eating, savor each bite'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Relaxation Techniques */}\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-blue-700 mb-4\">\n                    {locale === 'zh' ? 'æ”¾æ¾æŠ€å·§' : 'Relaxation Techniques'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'æ¸è¿›æ€§è‚Œè‚‰æ”¾æ¾' : 'Progressive Muscle Relaxation'}</strong>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        {locale === 'zh' ? 'ä»å¤´åˆ°è„šï¼Œé€ä¸€æ”¾æ¾' : 'Head to toe, systematic relaxation'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'èŠ³é¦™ç–—æ³•' : 'Aromatherapy'}</strong>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        {locale === 'zh' ? 'è–°è¡£è‰ã€æ´‹ç”˜èŠç²¾æ²¹' : 'Lavender, chamomile essential oils'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'éŸ³ä¹æ²»ç–—' : 'Music Therapy'}</strong>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        {locale === 'zh' ? 'èˆ’ç¼“éŸ³ä¹ï¼Œé™ä½çš®è´¨é†‡' : 'Soothing music, reduce cortisol'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Lifestyle Adjustments */}\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n                  <h4 className=\"text-lg font-semibold text-green-700 mb-4\">\n                    {locale === 'zh' ? 'ç”Ÿæ´»è°ƒæ•´' : 'Lifestyle Adjustments'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'æ—¶é—´ç®¡ç†' : 'Time Management'}</strong>\n                      <p className=\"text-sm text-green-600 mt-1\">\n                        {locale === 'zh' ? 'åˆç†å®‰æ’ï¼Œé¿å…è¿‡åº¦ç–²åŠ³' : 'Reasonable scheduling, avoid overexertion'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'ç¤¾äº¤æ”¯æŒ' : 'Social Support'}</strong>\n                      <p className=\"text-sm text-green-600 mt-1\">\n                        {locale === 'zh' ? 'ä¸æœ‹å‹åˆ†äº«ï¼Œè·å¾—ç†è§£' : 'Share with friends, gain understanding'}\n                      </p>\n                    </div>\n                    <div className=\"bg-white rounded p-3\">\n                      <strong>{locale === 'zh' ? 'å…´è¶£çˆ±å¥½' : 'Hobbies'}</strong>\n                      <p className=\"text-sm text-green-600 mt-1\">\n                        {locale === 'zh' ? 'åŸ¹å…»çˆ±å¥½ï¼Œè½¬ç§»æ³¨æ„åŠ›' : 'Develop hobbies, redirect attention'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Sleep Optimization */}\n            <div className=\"bg-white rounded-lg shadow-lg p-8 mb-12\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mr-6\">\n                  <svg className=\"w-8 h-8 text-indigo-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\"></path>\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-indigo-700 mb-2\">\n                    {locale === 'zh' ? 'ç¡çœ ä¼˜åŒ–' : 'Sleep Optimization'}\n                  </h3>\n                  <p className=\"text-indigo-600\">\n                    {locale === 'zh' ? 'ä¼˜è´¨ç¡çœ æ˜¯æ¿€ç´ å¹³è¡¡çš„åŸºç¡€' : 'Quality sleep is the foundation of hormonal balance'}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-8\">\n                <div>\n                  <h4 className=\"text-lg font-semibold text-indigo-700 mb-4\">\n                    {locale === 'zh' ? 'ç¡çœ å«ç”Ÿ' : 'Sleep Hygiene'}\n                  </h4>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"text-indigo-500 mr-3 mt-1\">ğŸ•™</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'å›ºå®šä½œæ¯' : 'Fixed Schedule'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'æ¯å¤©åŒä¸€æ—¶é—´ç¡è§‰å’Œèµ·åºŠ' : 'Sleep and wake at the same time daily'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-indigo-500 mr-3 mt-1\">ğŸŒ™</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'ç¡å‰ä»ªå¼' : 'Bedtime Ritual'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'æ´—æ¾¡ã€é˜…è¯»ã€è½»æŸ”éŸ³ä¹' : 'Bath, reading, soft music'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-indigo-500 mr-3 mt-1\">ğŸ“±</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'ç”µå­è®¾å¤‡' : 'Electronic Devices'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'ç¡å‰1å°æ—¶åœç”¨æ‰‹æœºå¹³æ¿' : 'Stop using devices 1 hour before bed'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"text-indigo-500 mr-3 mt-1\">ğŸŒ¡ï¸</span>\n                      <div>\n                        <strong>{locale === 'zh' ? 'ç¡çœ ç¯å¢ƒ' : 'Sleep Environment'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'å‡‰çˆ½(18-20Â°C)ã€é»‘æš—ã€å®‰é™' : 'Cool (18-20Â°C), dark, quiet'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h4 className=\"text-lg font-semibold text-indigo-700 mb-4\">\n                    {locale === 'zh' ? 'ç»æœŸç¡çœ è°ƒæ•´' : 'Menstrual Sleep Adjustments'}\n                  </h4>\n                  <div className=\"bg-indigo-50 border border-indigo-200 rounded-lg p-4\">\n                    <div className=\"space-y-3\">\n                      <div className=\"border-l-3 border-indigo-400 pl-3\">\n                        <strong>{locale === 'zh' ? 'ç»å‰æœŸ' : 'Pre-menstrual'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'å¯èƒ½éœ€è¦é¢å¤–30åˆ†é’Ÿç¡çœ ' : 'May need extra 30 minutes of sleep'}\n                        </p>\n                      </div>\n                      <div className=\"border-l-3 border-indigo-400 pl-3\">\n                        <strong>{locale === 'zh' ? 'ç»æœŸä¸­' : 'During Menstruation'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'ä½¿ç”¨çƒ­å«ç¼“è§£ä¸é€‚ï¼Œä¿è¯ç¡çœ è´¨é‡' : 'Use heating pad for comfort, ensure sleep quality'}\n                        </p>\n                      </div>\n                      <div className=\"border-l-3 border-indigo-400 pl-3\">\n                        <strong>{locale === 'zh' ? 'ç»æœŸå' : 'Post-menstrual'}</strong>\n                        <p className=\"text-sm text-indigo-600\">\n                          {locale === 'zh' ? 'æ¢å¤æ­£å¸¸ä½œæ¯ï¼Œè¡¥å……ä½“åŠ›' : 'Return to normal schedule, restore energy'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 bg-gray-50 border border-gray-300 rounded p-4\">\n                    <h5 className=\"font-semibold mb-2\">\n                      {locale === 'zh' ? 'ä¿ƒè¿›ç¡çœ çš„å¤©ç„¶æ–¹æ³•' : 'Natural Sleep Aids'}\n                    </h5>\n                    <ul className=\"text-sm space-y-1\">\n                      <li>â€¢ {locale === 'zh' ? 'æ´‹ç”˜èŠèŒ¶ï¼ˆç¡å‰1å°æ—¶ï¼‰' : 'Chamomile tea (1 hour before bed)'}</li>\n                      <li>â€¢ {locale === 'zh' ? 'é•è¡¥å……å‰‚ï¼ˆ200-300mgï¼‰' : 'Magnesium supplement (200-300mg)'}</li>\n                      <li>â€¢ {locale === 'zh' ? 'è–°è¡£è‰ç²¾æ²¹èŠ³é¦™ç–—æ³•' : 'Lavender essential oil aromatherapy'}</li>\n                      <li>â€¢ {locale === 'zh' ? 'æ¸©æ°´æ³¡è„šï¼ˆç¡å‰20åˆ†é’Ÿï¼‰' : 'Warm foot soak (20 min before bed)'}</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Progress Tracking */}\n            <div className=\"bg-white rounded-lg shadow-lg p-8 mb-12\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mr-6\">\n                  <svg className=\"w-8 h-8 text-emerald-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-emerald-700 mb-2\">\n                    {locale === 'zh' ? 'è°ƒç†è¿›åº¦è·Ÿè¸ª' : 'Progress Tracking'}\n                  </h3>\n                  <p className=\"text-emerald-600\">\n                    {locale === 'zh' ? 'ç›‘æµ‹æ”¹å–„æ•ˆæœï¼Œè°ƒæ•´è°ƒç†æ–¹æ¡ˆ' : 'Monitor improvement and adjust treatment plan'}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-lg p-8\">\n                <h3 className=\"text-xl font-bold mb-6 text-center\">\n                  ğŸ“Š {locale === 'zh' ? 'é¢„æœŸæ”¹å–„æ—¶é—´çº¿' : 'Expected Improvement Timeline'}\n                </h3>\n\n                <div className=\"space-y-6\">\n                  <div className=\"flex items-center\">\n                    <div className=\"w-20 flex-shrink-0 text-center\">\n                      <div className=\"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-1\">\n                        <span className=\"text-yellow-600 font-bold\">\n                          {locale === 'zh' ? '2å‘¨' : '2wk'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1 bg-yellow-50 border border-yellow-200 rounded p-4 ml-4\">\n                      <h4 className=\"font-semibold text-yellow-700\">\n                        {locale === 'zh' ? 'åˆæœŸé€‚åº”' : 'Initial Adaptation'}\n                      </h4>\n                      <p className=\"text-sm text-yellow-600\">\n                        {locale === 'zh' ? 'èº«ä½“å¼€å§‹é€‚åº”æ–°çš„ç”Ÿæ´»æ–¹å¼ï¼Œç¡çœ è´¨é‡å¯èƒ½æ”¹å–„' : 'Body begins adapting to new lifestyle, sleep quality may improve'}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <div className=\"w-20 flex-shrink-0 text-center\">\n                      <div className=\"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1\">\n                        <span className=\"text-orange-600 font-bold\">\n                          {locale === 'zh' ? '1æœˆ' : '1mo'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1 bg-orange-50 border border-orange-200 rounded p-4 ml-4\">\n                      <h4 className=\"font-semibold text-orange-700\">\n                        {locale === 'zh' ? 'åˆæ­¥æ”¹å–„' : 'Initial Improvement'}\n                      </h4>\n                      <p className=\"text-sm text-orange-600\">\n                        {locale === 'zh' ? 'å‹åŠ›æ°´å¹³é™ä½ï¼Œéƒ¨åˆ†å¥³æ€§å¼€å§‹æ„Ÿå—åˆ°ç–¼ç—›å¼ºåº¦å‡è½»' : 'Stress levels decrease, some women begin to feel pain intensity reduction'}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <div className=\"w-20 flex-shrink-0 text-center\">\n                      <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1\">\n                        <span className=\"text-blue-600 font-bold\">\n                          {locale === 'zh' ? '3æœˆ' : '3mo'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1 bg-blue-50 border border-blue-200 rounded p-4 ml-4\">\n                      <h4 className=\"font-semibold text-blue-700\">\n                        {locale === 'zh' ? 'æ˜¾è‘—æ”¹å–„' : 'Significant Improvement'}\n                      </h4>\n                      <p className=\"text-sm text-blue-600\">\n                        {locale === 'zh' ? 'æ¿€ç´ å¹³è¡¡æ”¹å–„ï¼Œç–¼ç—›é¢‘ç‡å’Œå¼ºåº¦æ˜æ˜¾ä¸‹é™ï¼Œæ•´ä½“å¥åº·çŠ¶å†µæå‡' : 'Hormonal balance improves, pain frequency and intensity significantly decrease, overall health improves'}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <div className=\"w-20 flex-shrink-0 text-center\">\n                      <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-1\">\n                        <span className=\"text-green-600 font-bold\">\n                          {locale === 'zh' ? '6æœˆ' : '6mo'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1 bg-green-50 border border-green-200 rounded p-4 ml-4\">\n                      <h4 className=\"font-semibold text-green-700\">\n                        {locale === 'zh' ? 'ç¨³å®šæ”¹å–„' : 'Stable Improvement'}\n                      </h4>\n                      <p className=\"text-sm text-green-600\">\n                        {locale === 'zh' ? 'æ–°çš„å¥åº·ä¹ æƒ¯å®Œå…¨å»ºç«‹ï¼Œç—›ç»ç—‡çŠ¶è¾¾åˆ°é¢„æœŸæ”¹å–„æ•ˆæœ' : 'New healthy habits fully established, menstrual pain symptoms reach expected improvement'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded p-4\">\n                  <h4 className=\"font-semibold text-blue-700 mb-2\">\n                    ğŸ’¡ {locale === 'zh' ? 'æˆåŠŸçš„å…³é”®' : 'Keys to Success'}\n                  </h4>\n                  <ul className=\"text-sm text-blue-700 space-y-1\">\n                    <li>â€¢ {locale === 'zh' ? 'åšæŒæ€§ï¼šæ¯å¤©æ‰§è¡Œè®¡åˆ’ï¼Œå½¢æˆä¹ æƒ¯' : 'Consistency: Execute plan daily, form habits'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'è€å¿ƒï¼šæ”¹å–„éœ€è¦æ—¶é—´ï¼Œä¸è¦æ€¥äºæ±‚æˆ' : 'Patience: Improvement takes time, don\\'t rush'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'è®°å½•ï¼šä½¿ç”¨ç—›ç»è¿½è¸ªå™¨è®°å½•è¿›å±•' : 'Recording: Use pain tracker to record progress'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'è°ƒæ•´ï¼šæ ¹æ®æ•ˆæœå’Œæ„Ÿå—åŠæ—¶è°ƒæ•´æ–¹æ¡ˆ' : 'Adjustment: Modify plan based on results and feelings'}</li>\n                    <li>â€¢ {locale === 'zh' ? 'ä¸“ä¸šæŒ‡å¯¼ï¼šå¿…è¦æ—¶å’¨è¯¢åŒ»ç”Ÿ' : 'Professional guidance: Consult doctor when necessary'}</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n          </section>\n\n          <section className=\"bg-primary-50 border-l-4 border-primary-500 p-4 rounded-r-lg\">\n            <p className=\"text-neutral-700\">\n              <strong className=\"text-primary-700\">\n                {locale === 'zh' ? 'å…è´£å£°æ˜ï¼š' : 'Disclaimer:'}\n              </strong>\n              {locale === 'zh'\n                ? 'æœ‰å…³è‡ªç„¶ç–—æ³•çš„ä¿¡æ¯ä»…ä¾›æ•™è‚²ç›®çš„ã€‚å®ƒä¸æ—¨åœ¨æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€‚å¦‚æœ‰ä»»ä½•å¥åº·é—®é¢˜æˆ–åœ¨æ”¹å˜å¥åº·æ–¹æ¡ˆä¹‹å‰ï¼Œè¯·åŠ¡å¿…å’¨è¯¢åŒ»ç–—ä¿å¥æä¾›è€…ã€‚'\n                : 'The information on natural therapies is for educational purposes only. It is not intended to replace professional medical advice. Always consult with a healthcare provider for any health concerns or before making any changes to your health regimen.'\n              }\n            </p>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/natural-therapies/page-simple.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":10,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useTranslations } from 'next-intl';\n\nexport default function NaturalTherapiesPage({\n  params: { locale }\n}: {\n  params: { locale: string }\n}) {\n  const t = useTranslations('naturalTherapiesPage');\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n      <div className=\"container-custom mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-lg shadow-sm p-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-6\">\n            {locale === 'zh' ? 'è‡ªç„¶ç–—æ³•' : 'Natural Therapies'}\n          </h1>\n          <p className=\"text-xl text-gray-600 mb-8\">\n            {locale === 'zh'\n              ? 'é€šè¿‡ç§‘å­¦çš„è‡ªç„¶ç–—æ³•ï¼Œå®‰å…¨æœ‰æ•ˆåœ°ç¼“è§£ç—›ç»'\n              : 'Safe and effective menstrual pain relief through scientific natural therapies'\n            }\n          </p>\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <p className=\"text-green-800\">\n              {locale === 'zh' \n                ? 'âœ… é¡µé¢åŠ è½½æˆåŠŸï¼åŸºæœ¬åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚' \n                : 'âœ… Page loaded successfully! Basic functionality is working.'\n              }\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/natural-therapies/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\nimport { unstable_setRequestLocale as setRequestLocale } from 'next-intl/server';\nimport { getTranslations } from 'next-intl/server';\nimport { Metadata } from 'next';\nimport BottomRecommendations from '@/components/BottomRecommendations';\n\n// SEO Metadata - å®ç°ä½ å»ºè®®çš„é•¿æ ‡é¢˜ç­–ç•¥\nexport async function generateMetadata({ params }: { params: Promise<{ locale: string }> }): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'naturalTherapiesPage' });\n  \n  return {\n    title: t('meta.title'),\n    description: t('meta.description'),\n    keywords: t('meta.keywords').split(','),\n    openGraph: {\n      title: t('meta.title'),\n      description: t('meta.description'),\n      url: `https://www.periodhub.health/${locale}/natural-therapies`,\n      siteName: 'PeriodHub',\n      locale: locale === 'zh' ? 'zh_CN' : 'en_US',\n      type: 'article',\n    },\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}/natural-therapies`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh/natural-therapies',\n        'en-US': 'https://www.periodhub.health/en/natural-therapies',\n        'x-default': 'https://www.periodhub.health/en/natural-therapies',\n      },\n    },\n    robots: {\n      index: true,\n      follow: true,\n      googleBot: {\n        index: true,\n        follow: true,\n        'max-video-preview': -1,\n        'max-image-preview': 'large',\n        'max-snippet': -1,\n      },\n    },\n  };\n}\n\n// å¢å¼ºçš„ç»“æ„åŒ–æ•°æ® - åŒ»ç–—ç½‘é¡µSchema\nconst getStructuredData = async (locale: string) => {\n  const t = await getTranslations({ locale, namespace: 'naturalTherapiesPage' });\n  \n  return {\n    \"@context\": \"https://schema.org\",\n    \"@graph\": [\n      {\n        \"@type\": \"MedicalWebPage\",\n        \"@id\": `https://www.periodhub.health/${locale}/natural-therapies#webpage`,\n        \"name\": t('meta.title'),\n        \"description\": t('meta.description'),\n        \"url\": `https://www.periodhub.health/${locale}/natural-therapies`,\n        \"medicalAudience\": {\n          \"@type\": \"MedicalAudience\",\n          \"audienceType\": \"Patient\"\n        },\n        \"about\": {\n          \"@type\": \"MedicalCondition\",\n          \"name\": t('faq.dysmenorrhea')\n        },\n        \"lastReviewed\": \"2025-08-16\",\n        \"reviewedBy\": {\n          \"@type\": \"Organization\",\n          \"name\": \"PeriodHub Medical Team\"\n        }\n      },\n      {\n        \"@type\": \"FAQPage\",\n        \"@id\": `https://www.periodhub.health/${locale}/natural-therapies#faq`,\n        \"mainEntity\": [\n          {\n            \"@type\": \"Question\",\n            \"name\": t('faq.effectiveTherapies'),\n            \"acceptedAnswer\": {\n              \"@type\": \"Answer\",\n              \"text\": t('faq.effectiveTherapiesAnswer')\n            }\n          },\n          {\n            \"@type\": \"Question\",\n            \"name\": t('faq.timeToEffect'),\n            \"acceptedAnswer\": {\n              \"@type\": \"Answer\",\n              \"text\": t('faq.timeToEffectAnswer')\n            }\n          }\n        ]\n      }\n    ]\n  };\n};\n\nexport default async function NaturalTherapiesPage({\n  params\n}: {\n  params: Promise<{ locale: string }>\n}) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n  const t = await getTranslations({ locale, namespace: 'naturalTherapiesPage' });\n  const structuredData = await getStructuredData(locale);\n  \n  return (\n    <>\n      {/* å¢å¼ºçš„ç»“æ„åŒ–æ•°æ® */}\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify(structuredData)\n        }}\n      />\n      \n      {/* Natural Therapies Content */}\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"space-y-12\">\n            {/* Hero Section */}\n            <section className=\"bg-gradient-to-r from-purple-600 to-pink-600 text-white py-16 rounded-2xl\">\n              <div className=\"container mx-auto px-4\">\n                <div className=\"max-w-4xl mx-auto text-center\">\n                  <h1 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 sm:mb-6\">\n                    {t('hero.title')}\n                  </h1>\n                  <p className=\"text-lg sm:text-xl md:text-2xl lg:text-3xl opacity-90 mb-6 sm:mb-8\">\n                    {t('hero.subtitle')}\n                  </p>\n                </div>\n              </div>\n            </section>\n\n            {/* Scientific Foundation Section */}\n            <div className=\"bg-gradient-to-br from-green-50 to-teal-50 p-4 sm:p-6 lg:p-8 rounded-xl mb-6 sm:mb-8\">\n              <h2 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-4 sm:mb-6 text-gray-800\">\n                {t('scientificFoundation.title')}\n              </h2>\n              <p className=\"text-base sm:text-lg lg:text-xl text-gray-700 mb-4 sm:mb-6 text-center max-w-4xl mx-auto\">\n                {t('scientificFoundation.description')}\n              </p>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\n                <div className=\"text-center\">\n                  <div className=\"w-12 h-12 sm:w-16 sm:h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4\">\n                    <span className=\"text-xl sm:text-2xl\">ğŸŒ¿</span>\n                  </div>\n                  <h3 className=\"font-semibold mb-2 text-green-700 text-sm sm:text-base\">\n                    {t('scientificFoundation.benefits.noSideEffects.title')}\n                  </h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">\n                    {t('scientificFoundation.benefits.noSideEffects.description')}\n                  </p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"w-12 h-12 sm:w-16 sm:h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4\">\n                    <span className=\"text-xl sm:text-2xl\">ğŸ”„</span>\n                  </div>\n                  <h3 className=\"font-semibold mb-2 text-teal-700 text-sm sm:text-base\">\n                    {t('scientificFoundation.benefits.holisticApproach.title')}\n                  </h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">\n                    {t('scientificFoundation.benefits.holisticApproach.description')}\n                  </p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"w-12 h-12 sm:w-16 sm:h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4\">\n                    <span className=\"text-xl sm:text-2xl\">ğŸ’°</span>\n                  </div>\n                  <h3 className=\"font-semibold mb-2 text-blue-700 text-sm sm:text-base\">\n                    {t('scientificFoundation.benefits.costEffective.title')}\n                  </h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">\n                    {t('scientificFoundation.benefits.costEffective.description')}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Natural Therapies Content */}\n            <div className=\"space-y-6 sm:space-y-8\">\n              <h2 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-center text-gray-800 mb-6 sm:mb-8\">\n                {t('therapies.title')}\n              </h2>\n              \n              <div className=\"grid grid-cols-1 gap-6 sm:gap-8\">\n                {/* 1. Heat Therapy - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-red-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-red-50 to-white p-4 sm:p-6\">\n                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center mb-4 sm:mb-6\">\n                      <div className=\"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-full bg-red-100 text-red-600 mr-3 sm:mr-4 mb-3 sm:mb-0\">\n                        <span className=\"text-xl sm:text-2xl\">ğŸ”¥</span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-xl sm:text-2xl font-bold text-red-700 mb-1\">\n                          {t('therapies.heatTherapy.title')}\n                      </h3>\n                        <p className=\"text-red-600 font-medium text-sm sm:text-base\">\n                          {t('therapies.heatTherapy.subtitle')}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <p className=\"text-gray-700 mb-4 sm:mb-6 text-sm sm:text-base\">\n                      {t('therapies.heatTherapy.description')}\n                    </p>\n                    \n                    {/* Scientific Parameters */}\n                    <div className=\"bg-red-50 p-3 sm:p-4 rounded-lg mb-4 sm:mb-6\">\n                      <h4 className=\"font-semibold text-red-800 mb-2 sm:mb-3 text-sm sm:text-base\">\n                        {t('therapies.heatTherapy.parameters.title')}\n                      </h4>\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-xs sm:text-sm\">\n                        <div><strong>{t('therapies.heatTherapy.parameters.temperature')}</strong>{t('therapies.heatTherapy.parameters.temperatureValue')}</div>\n                        <div><strong>{t('therapies.heatTherapy.parameters.duration')}</strong>{t('therapies.heatTherapy.parameters.durationValue')}</div>\n                        <div><strong>{t('therapies.heatTherapy.parameters.frequency')}</strong>{t('therapies.heatTherapy.parameters.frequencyValue')}</div>\n                        <div><strong>{t('therapies.heatTherapy.parameters.timing')}</strong>{t('therapies.heatTherapy.parameters.timingValue')}</div>\n                      </div>\n                      <p className=\"text-xs text-red-700 mt-3\">\n                        <strong>{t('therapies.heatTherapy.parameters.mechanism')}</strong>\n                        {t('therapies.heatTherapy.parameters.mechanismValue')}\n                      </p>\n                    </div>\n                    \n                    {/* Scientific Mechanism */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.heatTherapy.mechanism.title')}\n                      </h4>\n                      <div className=\"space-y-3\">\n                        <div className=\"border-l-4 border-red-400 pl-4\">\n                          <h5 className=\"font-semibold text-red-700 mb-1\">\n                            {t('therapies.heatTherapy.mechanism.gateControl.title')}\n                          </h5>\n                          <p className=\"text-sm text-gray-700\">\n                            {t('therapies.heatTherapy.mechanism.gateControl.description')}\n                          </p>\n                  </div>\n                        <div className=\"border-l-4 border-orange-400 pl-4\">\n                          <h5 className=\"font-semibold text-orange-700 mb-1\">\n                            {t('therapies.heatTherapy.mechanism.vasodilation.title')}\n                          </h5>\n                          <p className=\"text-sm text-gray-700\">\n                            {t('therapies.heatTherapy.mechanism.vasodilation.description')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Safety Guidelines */}\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-yellow-800 mb-2\">\n                        {t('therapies.heatTherapy.safety.title')}\n                      </h4>\n                      <div className=\"text-sm text-yellow-700 space-y-1\">\n                        <p>â€¢ {t('therapies.heatTherapy.safety.guidelines.0')}</p>\n                        <p>â€¢ {t('therapies.heatTherapy.safety.guidelines.1')}</p>\n                        <p>â€¢ {t('therapies.heatTherapy.safety.guidelines.2')}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 2. Herbal Therapy - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-green-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-green-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-green-100 text-green-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸŒ¿</span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-green-700\">\n                          {t('therapies.herbalTherapy.title')}\n                      </h3>\n                        <p className=\"text-green-600 font-medium\">\n                          {t('therapies.herbalTherapy.subtitle')}\n                      </p>\n                    </div>\n                  </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.herbalTherapy.description')}\n                    </p>\n                    \n                    {/* Key Herbs Section */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6\">\n                      <div className=\"bg-green-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-green-800 mb-3\">\n                          {t('therapies.herbalTherapy.herbs.ginger.title')}\n                        </h4>\n                        <div className=\"space-y-2 text-sm\">\n                          <p><strong>{t('therapies.herbalTherapy.herbs.ginger.activeCompounds')}</strong>{t('therapies.herbalTherapy.herbs.ginger.activeCompoundsValue')}</p>\n                          <p><strong>{t('therapies.herbalTherapy.herbs.ginger.mechanism')}</strong>{t('therapies.herbalTherapy.herbs.ginger.mechanismValue')}</p>\n                          <p><strong>{t('therapies.herbalTherapy.herbs.ginger.clinicalEvidence')}</strong>{t('therapies.herbalTherapy.herbs.ginger.clinicalEvidenceValue')}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-blue-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-blue-800 mb-3\">\n                          {t('therapies.herbalTherapy.herbs.angelica.title')}\n                        </h4>\n                        <div className=\"space-y-2 text-sm\">\n                          <p><strong>{t('therapies.herbalTherapy.herbs.angelica.activeCompounds')}</strong>{t('therapies.herbalTherapy.herbs.angelica.activeCompoundsValue')}</p>\n                          <p><strong>{t('therapies.herbalTherapy.herbs.angelica.mechanism')}</strong>{t('therapies.herbalTherapy.herbs.angelica.mechanismValue')}</p>\n                          <p><strong>{t('therapies.herbalTherapy.herbs.angelica.classicFormula')}</strong>{t('therapies.herbalTherapy.herbs.angelica.classicFormulaValue')}</p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Usage Guidelines */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.herbalTherapy.usage.title')}\n                      </h4>\n                      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 text-sm\">\n                        <div>\n                          <h5 className=\"font-semibold text-green-700 mb-2\">{t('therapies.herbalTherapy.usage.gingerTea.title')}</h5>\n                          <p className=\"text-gray-700\">\n                            {t('therapies.herbalTherapy.usage.gingerTea.description')}\n                          </p>\n                        </div>\n                        <div>\n                          <h5 className=\"font-semibold text-blue-700 mb-2\">{t('therapies.herbalTherapy.usage.angelicaDecoction.title')}</h5>\n                          <p className=\"text-gray-700\">\n                            {t('therapies.herbalTherapy.usage.angelicaDecoction.description')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Safety Reminder */}\n                    <div className=\"bg-red-50 border border-red-200 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-red-800 mb-2\">\n                        {t('therapies.herbalTherapy.safety.title')}\n                      </h4>\n                      <div className=\"text-sm text-red-700 space-y-1\">\n                        <p>â€¢ {t('therapies.herbalTherapy.safety.guidelines.0')}</p>\n                        <p>â€¢ {t('therapies.herbalTherapy.safety.guidelines.1')}</p>\n                        <p>â€¢ {t('therapies.herbalTherapy.safety.guidelines.2')}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 3. Dietary Adjustment - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-blue-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-blue-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸ</span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-blue-700\">\n                          {t('therapies.dietaryAdjustment.title')}\n                      </h3>\n                        <p className=\"text-blue-600 font-medium\">\n                          {t('therapies.dietaryAdjustment.subtitle')}\n                      </p>\n                    </div>\n                  </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.dietaryAdjustment.description')}\n                    </p>\n                    \n                    {/* Key Nutrients Section */}\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6\">\n                      <div className=\"bg-blue-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-blue-800 mb-2\">\n                          {t('therapies.dietaryAdjustment.nutrients.omega3.title')}\n                        </h4>\n                        <p className=\"text-sm text-gray-700 mb-2\">\n                          {t('therapies.dietaryAdjustment.nutrients.omega3.sourcesValue')}\n                        </p>\n                        <p className=\"text-xs text-blue-600\">\n                          {t('therapies.dietaryAdjustment.nutrients.omega3.mechanismValue')}\n                        </p>\n                      </div>\n                      \n                      <div className=\"bg-green-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-green-800 mb-2\">\n                          {t('therapies.dietaryAdjustment.nutrients.magnesium.title')}\n                        </h4>\n                        <p className=\"text-sm text-gray-700 mb-2\">\n                          {t('therapies.dietaryAdjustment.nutrients.magnesium.sourcesValue')}\n                        </p>\n                        <p className=\"text-xs text-green-600\">\n                          {t('therapies.dietaryAdjustment.nutrients.magnesium.mechanismValue')}\n                        </p>\n                      </div>\n                      \n                      <div className=\"bg-purple-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-purple-800 mb-2\">\n                          {t('therapies.dietaryAdjustment.nutrients.vitaminB6.title')}\n                        </h4>\n                        <p className=\"text-sm text-gray-700 mb-2\">\n                          {t('therapies.dietaryAdjustment.nutrients.vitaminB6.sourcesValue')}\n                        </p>\n                        <p className=\"text-xs text-purple-600\">\n                          {t('therapies.dietaryAdjustment.nutrients.vitaminB6.mechanismValue')}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    {/* Anti-inflammatory Foods */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.dietaryAdjustment.foods.title')}\n                      </h4>\n                      <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <h5 className=\"font-semibold text-green-700 mb-2\">{t('therapies.dietaryAdjustment.foods.recommended.title')}</h5>\n                          <ul className=\"space-y-1 text-gray-700\">\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.recommended.list.0')}</li>\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.recommended.list.1')}</li>\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.recommended.list.2')}</li>\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.recommended.list.3')}</li>\n                          </ul>\n                        </div>\n                        <div>\n                          <h5 className=\"font-semibold text-red-700 mb-2\">{t('therapies.dietaryAdjustment.foods.avoid.title')}</h5>\n                          <ul className=\"space-y-1 text-gray-700\">\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.avoid.list.0')}</li>\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.avoid.list.1')}</li>\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.avoid.list.2')}</li>\n                            <li>â€¢ {t('therapies.dietaryAdjustment.foods.avoid.list.3')}</li>\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 4. Yoga & Exercise - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-purple-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-purple-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-purple-100 text-purple-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸ§˜â€â™€ï¸</span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-purple-700\">\n                          {t('therapies.yogaExercise.title')}\n                        </h3>\n                        <p className=\"text-purple-600 font-medium\">\n                          {t('therapies.yogaExercise.subtitle')}\n                        </p>\n                    </div>\n                  </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.yogaExercise.description')}\n                    </p>\n                    \n                    {/* Key Poses Section */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6\">\n                      <div className=\"bg-purple-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-purple-800 mb-3\">\n                          {t('therapies.yogaExercise.poses.title')}\n                        </h4>\n                        <div className=\"space-y-3\">\n                          <div className=\"border-l-2 border-purple-300 pl-3\">\n                            <h5 className=\"font-medium text-purple-700\">{t('therapies.yogaExercise.poses.catCow.title')}</h5>\n                            <p className=\"text-sm text-gray-600\">{t('therapies.yogaExercise.poses.catCow.description')}</p>\n                          </div>\n                          <div className=\"border-l-2 border-purple-300 pl-3\">\n                            <h5 className=\"font-medium text-purple-700\">{t('therapies.yogaExercise.poses.childPose.title')}</h5>\n                            <p className=\"text-sm text-gray-600\">{t('therapies.yogaExercise.poses.childPose.description')}</p>\n                          </div>\n                          <div className=\"border-l-2 border-purple-300 pl-3\">\n                            <h5 className=\"font-medium text-purple-700\">{t('therapies.yogaExercise.poses.supineTwist.title')}</h5>\n                            <p className=\"text-sm text-gray-600\">{t('therapies.yogaExercise.poses.supineTwist.description')}</p>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-blue-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-blue-800 mb-3\">\n                          {t('therapies.yogaExercise.science.title')}\n                        </h4>\n                        <div className=\"space-y-2 text-sm\">\n                          <p><strong>{t('therapies.yogaExercise.science.endorphinRelease')}</strong>{t('therapies.yogaExercise.science.endorphinReleaseValue')}</p>\n                          <p><strong>{t('therapies.yogaExercise.science.bloodCirculation')}</strong>{t('therapies.yogaExercise.science.bloodCirculationValue')}</p>\n                          <p><strong>{t('therapies.yogaExercise.science.muscleRelaxation')}</strong>{t('therapies.yogaExercise.science.muscleRelaxationValue')}</p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Practice Guidelines */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.yogaExercise.practice.title')}\n                      </h4>\n                      <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <h5 className=\"font-semibold text-purple-700 mb-2\">{t('therapies.yogaExercise.practice.timing.title')}</h5>\n                          <ul className=\"space-y-1 text-gray-700\">\n                            <li>â€¢ {t('therapies.yogaExercise.practice.timing.1')}</li>\n                            <li>â€¢ {t('therapies.yogaExercise.practice.timing.2')}</li>\n                            <li>â€¢ {t('therapies.yogaExercise.practice.timing.3')}</li>\n                          </ul>\n                        </div>\n                        <div>\n                          <h5 className=\"font-semibold text-blue-700 mb-2\">{t('therapies.yogaExercise.practice.precautions.title')}</h5>\n                          <ul className=\"space-y-1 text-gray-700\">\n                            <li>â€¢ {t('therapies.yogaExercise.practice.precautions.1')}</li>\n                            <li>â€¢ {t('therapies.yogaExercise.practice.precautions.2')}</li>\n                            <li>â€¢ {t('therapies.yogaExercise.practice.precautions.3')}</li>\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 5. Aromatherapy - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-yellow-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-yellow-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-yellow-100 text-yellow-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸŒ¸</span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-yellow-700\">\n                          {t('therapies.aromatherapy.title')}\n                        </h3>\n                        <p className=\"text-yellow-600 font-medium\">\n                          {t('therapies.aromatherapy.subtitle')}\n                        </p>\n                    </div>\n                  </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.aromatherapy.description')}\n                    </p>\n                    \n                    {/* Key Oils Section */}\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6\">\n                      <div className=\"bg-purple-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-purple-800 mb-2\">\n                          {t('therapies.aromatherapy.oils.lavender.title')}\n                        </h4>\n                        <p className=\"text-sm text-gray-700 mb-2\">\n                          {t('therapies.aromatherapy.oils.lavender.effects')}\n                        </p>\n                        <p className=\"text-xs text-purple-600\">\n                          {t('therapies.aromatherapy.oils.lavender.mechanism')}\n                        </p>\n                      </div>\n                      \n                      <div className=\"bg-green-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-green-800 mb-2\">\n                          {t('therapies.aromatherapy.oils.clarySage.title')}\n                        </h4>\n                        <p className=\"text-sm text-gray-700 mb-2\">\n                          {t('therapies.aromatherapy.oils.clarySage.effects')}\n                        </p>\n                        <p className=\"text-xs text-green-600\">\n                          {t('therapies.aromatherapy.oils.clarySage.mechanism')}\n                        </p>\n                      </div>\n                      \n                      <div className=\"bg-blue-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-blue-800 mb-2\">\n                          {t('therapies.aromatherapy.oils.romanChamomile.title')}\n                        </h4>\n                        <p className=\"text-sm text-gray-700 mb-2\">\n                          {t('therapies.aromatherapy.oils.romanChamomile.effects')}\n                        </p>\n                        <p className=\"text-xs text-blue-600\">\n                          {t('therapies.aromatherapy.oils.romanChamomile.mechanism')}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    {/* Usage Methods */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.aromatherapy.usage.title')}\n                      </h4>\n                      <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <h5 className=\"font-semibold text-yellow-700 mb-2\">{t('therapies.aromatherapy.usage.massageOil.title')}</h5>\n                          <p className=\"text-gray-700 mb-2\">\n                            {t('therapies.aromatherapy.usage.massageOil.recipe')}\n                          </p>\n                          <p className=\"text-xs text-gray-600\">\n                            {t('therapies.aromatherapy.usage.massageOil.instructions')}\n                          </p>\n                        </div>\n                        <div>\n                          <h5 className=\"font-semibold text-blue-700 mb-2\">{t('therapies.aromatherapy.usage.diffusion.title')}</h5>\n                          <p className=\"text-gray-700 mb-2\">\n                            {t('therapies.aromatherapy.usage.diffusion.recipe')}\n                          </p>\n                          <p className=\"text-xs text-gray-600\">\n                            {t('therapies.aromatherapy.usage.diffusion.instructions')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Safety Guidelines */}\n                    <div className=\"bg-red-50 border border-red-200 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-red-800 mb-2\">\n                        {t('therapies.aromatherapy.safety.title')}\n                      </h4>\n                      <div className=\"text-sm text-red-700 space-y-1\">\n                        <p>â€¢ {t('therapies.aromatherapy.safety.guidelines.0')}</p>\n                        <p>â€¢ {t('therapies.aromatherapy.safety.guidelines.1')}</p>\n                        <p>â€¢ {t('therapies.aromatherapy.safety.guidelines.2')}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 6. Acupuncture & Moxibustion - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-orange-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-orange-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-orange-100 text-orange-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸª¡</span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-orange-700\">\n                          {t('therapies.acupuncture.title')}\n                        </h3>\n                        <p className=\"text-orange-600 font-medium\">\n                          {t('therapies.acupuncture.subtitle')}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.acupuncture.description')}\n                    </p>\n                    \n                    {/* Key Acupoints */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6\">\n                      <div className=\"bg-orange-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-orange-800 mb-3\">\n                          {t('therapies.acupuncture.acupoints.title')}\n                        </h4>\n                        <div className=\"space-y-3\">\n                          <div className=\"border-l-2 border-orange-300 pl-3\">\n                            <h5 className=\"font-medium text-orange-700\">{t('therapies.acupuncture.acupoints.sanyinjiao.title')}</h5>\n                            <p className=\"text-sm text-gray-600\">{t('therapies.acupuncture.acupoints.sanyinjiao.description')}</p>\n                          </div>\n                          <div className=\"border-l-2 border-orange-300 pl-3\">\n                            <h5 className=\"font-medium text-orange-700\">{t('therapies.acupuncture.acupoints.guanyuan.title')}</h5>\n                            <p className=\"text-sm text-gray-600\">{t('therapies.acupuncture.acupoints.guanyuan.description')}</p>\n                          </div>\n                          <div className=\"border-l-2 border-orange-300 pl-3\">\n                            <h5 className=\"font-medium text-orange-700\">{t('therapies.acupuncture.acupoints.shenque.title')}</h5>\n                            <p className=\"text-sm text-gray-600\">{t('therapies.acupuncture.acupoints.shenque.description')}</p>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-blue-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-blue-800 mb-3\">\n                          {t('therapies.acupuncture.mechanisms.title')}\n                        </h4>\n                        <div className=\"space-y-2 text-sm\">\n                          <p><strong>{t('therapies.acupuncture.mechanisms.neuralRegulation')}</strong>{t('therapies.acupuncture.mechanisms.neuralRegulationValue')}</p>\n                          <p><strong>{t('therapies.acupuncture.mechanisms.endocrineRegulation')}</strong>{t('therapies.acupuncture.mechanisms.endocrineRegulationValue')}</p>\n                          <p><strong>{t('therapies.acupuncture.mechanisms.evidenceBased')}</strong>{t('therapies.acupuncture.mechanisms.evidenceBasedValue')}</p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Self-Massage Guide */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.acupuncture.selfMassage.title')}\n                      </h4>\n                      <div className=\"text-sm text-gray-700 space-y-2\">\n                        <p>â€¢ <strong>{t('therapies.acupuncture.selfMassage.sanyinjiao.title')}</strong>{t('therapies.acupuncture.selfMassage.sanyinjiao.instructions')}</p>\n                        <p>â€¢ <strong>{t('therapies.acupuncture.selfMassage.guanyuan.title')}</strong>{t('therapies.acupuncture.selfMassage.guanyuan.instructions')}</p>\n                        <p className=\"text-xs text-orange-600 mt-2\">\n                          {t('therapies.acupuncture.selfMassage.note')}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 7. Psychological Techniques - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-indigo-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-indigo-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-indigo-100 text-indigo-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸ§ </span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-indigo-700\">\n                          {t('therapies.psychological.title')}\n                        </h3>\n                        <p className=\"text-indigo-600 font-medium\">\n                          {t('therapies.psychological.subtitle')}\n                        </p>\n                    </div>\n                  </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.psychological.description')}\n                    </p>\n                    \n                    {/* Techniques Section */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6\">\n                      <div className=\"bg-indigo-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-indigo-800 mb-3\">\n                          {t('therapies.psychological.breathing.title')}\n                        </h4>\n                        <div className=\"space-y-2 text-sm\">\n                          <p><strong>{t('therapies.psychological.breathing.steps')}</strong>{t('therapies.psychological.breathing.stepsValue')}</p>\n                          <p><strong>{t('therapies.psychological.breathing.frequency')}</strong>{t('therapies.psychological.breathing.frequencyValue')}</p>\n                          <p><strong>{t('therapies.psychological.breathing.effect')}</strong>{t('therapies.psychological.breathing.effectValue')}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-purple-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-purple-800 mb-3\">\n                          {t('therapies.psychological.mindfulness.title')}\n                        </h4>\n                        <div className=\"space-y-2 text-sm\">\n                          <p><strong>{t('therapies.psychological.mindfulness.method')}</strong>{t('therapies.psychological.mindfulness.methodValue')}</p>\n                          <p><strong>{t('therapies.psychological.mindfulness.duration')}</strong>{t('therapies.psychological.mindfulness.durationValue')}</p>\n                          <p><strong>{t('therapies.psychological.mindfulness.effect')}</strong>{t('therapies.psychological.mindfulness.effectValue')}</p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Progressive Muscle Relaxation */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.psychological.muscleRelaxation.title')}\n                      </h4>\n                      <div className=\"text-sm text-gray-700 space-y-1\">\n                        <p>â€¢ {t('therapies.psychological.muscleRelaxation.step1')}</p>\n                        <p>â€¢ {t('therapies.psychological.muscleRelaxation.step2')}</p>\n                        <p>â€¢ {t('therapies.psychological.muscleRelaxation.step3')}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* 8. Comprehensive Plans - Detailed Card */}\n                <div className=\"bg-white rounded-xl shadow-lg border-l-4 border-pink-500 overflow-hidden\">\n                  <div className=\"bg-gradient-to-r from-pink-50 to-white p-6\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"w-12 h-12 flex items-center justify-center rounded-full bg-pink-100 text-pink-600 mr-4\">\n                        <span className=\"text-2xl\">ğŸ“‹</span>\n                      </div>\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-pink-700\">\n                          {t('therapies.comprehensive.title')}\n                      </h3>\n                        <p className=\"text-pink-600 font-medium\">\n                          {t('therapies.comprehensive.subtitle')}\n                      </p>\n                    </div>\n                  </div>\n                    \n                    <p className=\"text-gray-700 mb-6\">\n                      {t('therapies.comprehensive.description')}\n                    </p>\n                    \n                    {/* Pain Level Plans */}\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-6\">\n                      <div className=\"bg-red-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-red-800 mb-3\">\n                          {t('therapies.comprehensive.painLevels.mild.title')}\n                        </h4>\n                        <ul className=\"text-sm text-gray-700 space-y-1\">\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.mild.plan1')}</li>\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.mild.plan2')}</li>\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.mild.plan3')}</li>\n                        </ul>\n                      </div>\n                      \n                      <div className=\"bg-orange-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-orange-800 mb-3\">\n                          {t('therapies.comprehensive.painLevels.moderate.title')}\n                        </h4>\n                        <ul className=\"text-sm text-gray-700 space-y-1\">\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.moderate.plan1')}</li>\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.moderate.plan2')}</li>\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.moderate.plan3')}</li>\n                        </ul>\n                      </div>\n                      \n                      <div className=\"bg-purple-50 p-4 rounded-lg\">\n                        <h4 className=\"font-semibold text-purple-800 mb-3\">\n                          {t('therapies.comprehensive.painLevels.severe.title')}\n                        </h4>\n                        <ul className=\"text-sm text-gray-700 space-y-1\">\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.severe.plan1')}</li>\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.severe.plan2')}</li>\n                          <li>â€¢ {t('therapies.comprehensive.painLevels.severe.plan3')}</li>\n                        </ul>\n                      </div>\n                    </div>\n                    \n                    {/* Synergistic Effects */}\n                    <div className=\"bg-gray-50 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-gray-800 mb-3\">\n                        {t('therapies.comprehensive.synergistic.title')}\n                      </h4>\n                      <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <h5 className=\"font-semibold text-green-700 mb-2\">{t('therapies.comprehensive.synergistic.enhancing.title')}</h5>\n                          <ul className=\"space-y-1 text-gray-700\">\n                            <li>â€¢ {t('therapies.comprehensive.synergistic.enhancing.combination1')}</li>\n                            <li>â€¢ {t('therapies.comprehensive.synergistic.enhancing.combination2')}</li>\n                            <li>â€¢ {t('therapies.comprehensive.synergistic.enhancing.combination3')}</li>\n                          </ul>\n                        </div>\n                        <div>\n                          <h5 className=\"font-semibold text-blue-700 mb-2\">{t('therapies.comprehensive.synergistic.personalized.title')}</h5>\n                          <ul className=\"space-y-1 text-gray-700\">\n                            <li>â€¢ {t('therapies.comprehensive.synergistic.personalized.coldConstitution')}</li>\n                            <li>â€¢ {t('therapies.comprehensive.synergistic.personalized.hotConstitution')}</li>\n                            <li>â€¢ {t('therapies.comprehensive.synergistic.personalized.qiDeficiency')}</li>\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Evidence-Based Medicine Summary */}\n            <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 sm:p-8 rounded-xl mb-6 sm:mb-8\">\n              <h2 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-6 sm:mb-8 text-gray-800\">\n                {t('evidenceBased.title')}\n              </h2>\n              \n              {/* Core Efficacy Data */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8\">\n                <div className=\"bg-white rounded-lg shadow-lg p-4 sm:p-6 text-center\">\n                  <div className=\"text-3xl sm:text-4xl font-bold text-red-600 mb-2\">92%</div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2 text-sm sm:text-base\">\n                    {t('evidenceBased.coreEfficacy.heatTherapy.title')}\n                  </h3>\n                  <p className=\"text-xs text-gray-600\">\n                    {t('evidenceBased.coreEfficacy.heatTherapy.source')}\n                  </p>\n                </div>\n                \n                <div className=\"bg-white rounded-lg shadow-lg p-4 sm:p-6 text-center\">\n                  <div className=\"text-3xl sm:text-4xl font-bold text-blue-600 mb-2\">76%</div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2 text-sm sm:text-base\">\n                    {t('evidenceBased.coreEfficacy.tens.title')}\n                  </h3>\n                  <p className=\"text-xs text-gray-600\">\n                    {t('evidenceBased.coreEfficacy.tens.source')}\n                  </p>\n                </div>\n                \n                <div className=\"bg-white rounded-lg shadow-lg p-4 sm:p-6 text-center\">\n                  <div className=\"text-3xl sm:text-4xl font-bold text-green-600 mb-2\">85%</div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2 text-sm sm:text-base\">\n                    {t('evidenceBased.coreEfficacy.acupuncture.title')}\n                  </h3>\n                  <p className=\"text-xs text-gray-600\">\n                    {t('evidenceBased.coreEfficacy.acupuncture.source')}\n                  </p>\n                </div>\n                \n                <div className=\"bg-white rounded-lg shadow-lg p-4 sm:p-6 text-center\">\n                  <div className=\"text-3xl sm:text-4xl font-bold text-purple-600 mb-2\">68%</div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2 text-sm sm:text-base\">\n                    {t('evidenceBased.coreEfficacy.aromatherapy.title')}\n                  </h3>\n                  <p className=\"text-xs text-gray-600\">\n                    {t('evidenceBased.coreEfficacy.aromatherapy.source')}\n                  </p>\n                </div>\n              </div>\n\n              {/* High-Level Evidence Support */}\n              <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n                <h3 className=\"text-xl font-bold mb-4 text-center text-blue-700\">\n                  {t('evidenceBased.highLevelEvidence.title')}\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">1</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.highLevelEvidence.cochrane')}\n                      </p>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">2</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.highLevelEvidence.rct')}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">3</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.highLevelEvidence.who')}\n                      </p>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">4</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.highLevelEvidence.nih')}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Long-term Observational Studies */}\n              <div className=\"bg-white rounded-lg shadow-lg p-6\">\n                <h3 className=\"text-xl font-bold mb-4 text-center text-green-700\">\n                  {t('evidenceBased.longTermStudies.title')}\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">1</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.longTermStudies.study1')}\n                      </p>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">2</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.longTermStudies.study2')}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">3</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.longTermStudies.study3')}\n                      </p>\n                    </div>\n                    <div className=\"flex items-start\">\n                      <span className=\"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3 mt-0.5 flex-shrink-0\">4</span>\n                      <p className=\"text-gray-700\">\n                        {t('evidenceBased.longTermStudies.study4')}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n\n      {/* Medical Disclaimer */}\n      <div className=\"container mx-auto px-4 py-8\">\n        <section className=\"bg-primary-50 border-l-4 border-primary-500 p-4 sm:p-6 rounded-r-lg\">\n          <p className=\"text-sm sm:text-base text-neutral-700 leading-relaxed break-words\">\n            <strong className=\"text-primary-700\">\n              {t('medicalDisclaimer.title')}\n            </strong>\n            {t('medicalDisclaimer.content')}\n          </p>\n        </section>\n      </div>\n\n      {/* åº•éƒ¨æ¨èå·¥å…· */}\n      <BottomRecommendations currentPage=\"natural-therapies\" />\n    </>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/page-original.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":270,"column":17,"nodeType":"JSXOpeningElement","endLine":275,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTranslations } from 'next-intl';\nimport Link from 'next/link';\nimport { unstable_setRequestLocale, getTranslations } from 'next-intl/server';\nimport { Metadata } from 'next';\nimport Hero from '@/components/layout/Hero';\nimport UserSuccessStories from '@/components/UserSuccessStories';\nimport NavigationTabs from '@/components/NavigationTabs';\n\n// é¡µé¢çº§åˆ«çš„metadata\nexport async function generateMetadata({ params }: { params: Promise<{ locale: string }> }): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'homePageContent' });\n\n  return {\n    title: t('seo.title'),\n    description: t('seo.description'),\n    keywords: t('seo.keywords').split(','),\n    openGraph: {\n      title: t('seo.ogTitle'),\n      description: t('seo.ogDescription'),\n      url: `https://www.periodhub.health/${locale}`,\n      siteName: 'PeriodHub',\n      locale: locale === 'zh' ? 'zh_CN' : 'en_US',\n      type: 'website',\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: t('seo.ogTitle'),\n      description: t('seo.ogDescription'),\n    },\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh',\n        'en-US': 'https://www.periodhub.health/en',\n        'x-default': 'https://www.periodhub.health',\n      },\n    },\n    robots: {\n      index: true,\n      follow: true,\n      googleBot: {\n        index: true,\n        follow: true,\n        'max-video-preview': -1,\n        'max-image-preview': 'large',\n        'max-snippet': -1,\n      },\n    },\n  };\n}\n\n// å¢å¼ºçš„ç»“æ„åŒ–æ•°æ® - é’ˆå¯¹å¥åº·å¹³å°ä¼˜åŒ–\nconst getStructuredData = async (locale: string) => {\n  const t = await getTranslations({ locale, namespace: '' });\n  \n  return {\n  \"@context\": \"https://schema.org\",\n  \"@graph\": [\n    {\n      \"@type\": \"SoftwareApplication\",\n      \"@id\": `https://www.periodhub.health/${locale}#application`,\n      \"name\": \"PeriodHub\",\n      \"applicationCategory\": \"HealthApplication\",\n      \"operatingSystem\": \"Web\",\n      \"inLanguage\": locale === 'zh' ? \"zh-CN\" : \"en-US\",\n      \"description\": t('metadata.home.structuredData.description'),\n      \"url\": `https://www.periodhub.health/${locale}`,\n      \"offers\": {\n        \"@type\": \"Offer\",\n        \"price\": \"0\",\n        \"priceCurrency\": \"USD\"\n      },\n      \"featureList\": [\n        t('metadata.home.structuredData.featureList.painTracking'),\n        t('metadata.home.structuredData.featureList.cyclePrediction'),\n        t('metadata.home.structuredData.featureList.constitutionAssessment'),\n        t('metadata.home.structuredData.featureList.healthGuides'),\n        t('metadata.home.structuredData.featureList.scenarioSolutions')\n      ],\n      \"aggregateRating\": {\n        \"@type\": \"AggregateRating\",\n        \"ratingValue\": \"4.8\",\n        \"ratingCount\": \"1250\",\n        \"bestRating\": \"5\"\n      },\n      \"publisher\": {\n        \"@id\": `https://www.periodhub.health/${locale}#organization`\n      }\n    },\n    {\n      \"@type\": \"Organization\",\n      \"@id\": `https://www.periodhub.health/${locale}#organization`,\n      \"name\": \"PeriodHub\",\n      \"url\": \"https://www.periodhub.health\",\n      \"logo\": {\n        \"@type\": \"ImageObject\",\n        \"url\": \"https://www.periodhub.health/icon-512.png\",\n        \"width\": 512,\n        \"height\": 512\n      },\n      \"sameAs\": [\n        \"https://www.periodhub.health/zh\",\n        \"https://www.periodhub.health/en\"\n      ]\n    },\n    {\n      \"@type\": \"WebSite\",\n      \"@id\": `https://www.periodhub.health/${locale}#website`,\n      \"url\": \"https://www.periodhub.health\",\n      \"name\": \"PeriodHub\",\n      \"description\": t('organization.description'),\n      \"publisher\": {\n        \"@id\": `https://www.periodhub.health/${locale}#organization`\n      },\n      \"potentialAction\": {\n        \"@type\": \"SearchAction\",\n        \"target\": {\n          \"@type\": \"EntryPoint\",\n          \"urlTemplate\": `https://www.periodhub.health/${locale}/search?q={search_term_string}`\n        },\n        \"query-input\": \"required name=search_term_string\"\n      }\n    },\n    {\n      \"@type\": \"FAQPage\",\n      \"@id\": `https://www.periodhub.health/${locale}#faq`,\n      \"mainEntity\": [\n        {\n          \"@type\": \"Question\",\n          \"name\": t('faq.q1.question'),\n          \"acceptedAnswer\": {\n            \"@type\": \"Answer\",\n            \"text\": t('faq.q1.answer')\n          }\n        },\n        {\n          \"@type\": \"Question\",\n          \"name\": t('faq.q2.question'),\n          \"acceptedAnswer\": {\n            \"@type\": \"Answer\",\n            \"text\": t('faq.q2.answer')\n          }\n        },\n        {\n          \"@type\": \"Question\",\n          \"name\": t('faq.q3.question'),\n          \"acceptedAnswer\": {\n            \"@type\": \"Answer\",\n            \"text\": t('faq.q3.answer')\n          }\n        }\n      ]\n    }\n  ]\n  };\n};\n\nexport default async function HomePage({ params }: { params: Promise<{ locale: string }> }) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  const t = await getTranslations('');\n  const isZh = typeof locale === 'string' && (locale === 'zh' || locale.startsWith('zh'));\n  const structuredData = await getStructuredData(locale);\n\n  return (\n    <>\n      {/* å¢å¼ºçš„ç»“æ„åŒ–æ•°æ® */}\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify(structuredData)\n        }}\n      />\n\n      <div className=\"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50\">\n        {/* é«˜çº§Hero - ä¸»è¦å†…å®¹åŒºåŸŸ */}\n        <main>\n          <Hero />\n\n          {/* Features Section */}\n          <section className=\"py-20\" aria-labelledby=\"features-heading\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-16\">\n                <h2 id=\"features-heading\" className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">\n                  {t('home.features.title')}\n                </h2>\n                <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n                  {t('home.features.subtitle')}\n                </p>\n              </header>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n                <Link href={`/${locale}/interactive-tools/cycle-tracker`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-purple-600 transition-colors\">{t('home.features.tracking.title')}</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{t('home.features.tracking.description')}</p>\n                    <div className=\"mt-4 text-purple-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.learnMore')}\n                    </div>\n                  </article>\n                </Link>\n\n                <Link href={`/${locale}/interactive-tools/symptom-assessment`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-blue-600 transition-colors\">{t('home.features.assessment.title')}</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{t('home.features.assessment.description')}</p>\n                    <div className=\"mt-4 text-blue-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.learnMore')}\n                    </div>\n                  </article>\n                </Link>\n\n                <Link href={`/${locale}/downloads`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-green-600 transition-colors\">{t('home.features.resources.title')}</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{t('home.features.resources.description')}</p>\n                    <div className=\"mt-4 text-green-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.learnMore')}\n                    </div>\n                  </article>\n                </Link>\n\n                <Link href={`/${locale}/immediate-relief`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-red-600 transition-colors\">\n                      {t('home.features.immediateRelief.title')}\n                    </h3>\n                    <p className=\"text-gray-600 leading-relaxed\">\n                      {t('home.features.immediateRelief.description')}\n                    </p>\n                    <div className=\"mt-4 text-red-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.immediateRelief.cta')}\n                    </div>\n                  </article>\n                </Link>\n              </div>\n            </div>\n          </section>\n\n          {/* å¯¼èˆªåˆ†æ®µ */}\n          <div className=\"py-10\">\n            <NavigationTabs locale={locale} />\n          </div>\n\n          {/* ç»Ÿè®¡æ¨¡å—ï¼šæ›¿æ¢ä¸º SVG ä¿¡æ¯å›¾ */}\n          <section id=\"articles-section\" className=\"py-16\">\n            <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <div className=\"bg-white/70 backdrop-blur rounded-2xl shadow-sm p-4 sm:p-6\">\n                <img\n                  src=\"/images/infographics/stats-infographic.svg\"\n                  alt={isZh ? 'æœˆç»å¥åº·ç»Ÿè®¡æ•°æ®ä¿¡æ¯å›¾' : 'Period Health Statistics Infographic'}\n                  className=\"w-full h-auto\"\n                  loading=\"lazy\"\n                />\n                <p className=\"mt-2 text-center text-sm text-neutral-500\">\n                  {t('healthStatistics.dataSource')}\n                </p>\n              </div>\n            </div>\n          </section>\n\n          {/* ä¿¡ä»»æŒ‡æ ‡ */}\n          <section className=\"py-16 bg-gradient-to-r from-blue-50 to-indigo-50\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <div className=\"text-center mb-12\">\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">{t('home.trusted.title')}</h2>\n                <p className=\"text-xl text-gray-600\">{t('home.trusted.subtitle')}</p>\n              </div>\n\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8 text-center\">\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-purple-600 mb-2\">50K+</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.activeUsers')}</div>\n                </div>\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-pink-600 mb-2\">43</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.articles')}</div>\n                </div>\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-blue-600 mb-2\">13</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.resources')}</div>\n                </div>\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-green-600 mb-2\">98%</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.satisfaction')}</div>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* ç—›ç»æ²»ç–—ä¸“é¢˜é“¾æ¥åŒºåŸŸ - åŸºäºå…³é”®è¯æ•°æ®ä¼˜åŒ– */}\n          <section className=\"py-16 bg-white\" aria-labelledby=\"pain-management-heading\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-12\">\n                <h2 id=\"pain-management-heading\" className=\"text-3xl font-bold text-gray-900 mb-4\">\n                  {t('home.treatmentGuide.title')}\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  {t('home.treatmentGuide.subtitle')}\n                </p>\n              </header>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {/* ç—›ç»ç”¨è¯æŒ‡å— */}\n                <Link href={`/${locale}/downloads/medication-guide`} className=\"group bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center mr-3\">\n                      <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-blue-600\">\n                      {t('home.treatmentGuide.medicationGuide.title')}\n                    </h3>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-3\">\n                    {t('home.treatmentGuide.medicationGuide.description')}\n                  </p>\n                  <div className=\"text-blue-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.treatmentGuide.medicationGuide.cta')}\n                  </div>\n                </Link>\n\n                {/* çƒ­æ•·ç–—æ³•æŒ‡å¯¼ */}\n                <Link href={`/${locale}/articles/heat-therapy-complete-guide`} className=\"group bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center mr-3\">\n                      <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-red-600\">\n                      {t('home.treatmentGuide.heatTherapy.title')}\n                    </h3>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-3\">\n                    {t('home.treatmentGuide.heatTherapy.description')}\n                  </p>\n                  <div className=\"text-red-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.treatmentGuide.heatTherapy.cta')}\n                  </div>\n                </Link>\n\n                {/* åŸå‘æ€§ç—›ç»è¯Šæ–­ */}\n                <Link href={`/${locale}/health-guide/understanding-pain`} className=\"group bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center mr-3\">\n                      <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-purple-600\">\n                      {t('home.treatmentGuide.diagnosis.title')}\n                    </h3>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-3\">\n                    {t('home.treatmentGuide.diagnosis.description')}\n                  </p>\n                  <div className=\"text-purple-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.treatmentGuide.diagnosis.cta')}\n                  </div>\n                </Link>\n              </div>\n            </div>\n          </section>\n\n          {/* ç”¨æˆ·æˆåŠŸæ¡ˆä¾‹ */}\n          <UserSuccessStories />\n\n          {/* FAQ Section - SEOä¼˜åŒ– */}\n          <section className=\"py-20 bg-white\" aria-labelledby=\"faq-heading\">\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-16\">\n                <h2 id=\"faq-heading\" className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">{t('faq.title')}</h2>\n                <p className=\"text-xl text-gray-600\">{t('faq.subtitle')}</p>\n              </header>\n\n              <div className=\"space-y-6\">\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q1.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q1.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q2.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q2.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q3.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q3.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q4.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q4.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q5.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q5.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q6.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q6.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q7.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q7.answer')}\n                  </div>\n                </details>\n              </div>\n            </div>\n          </section>\n\n          {/* Quick Links */}\n          <section className=\"py-20 bg-gradient-to-r from-purple-100/50 to-pink-100/50\" aria-labelledby=\"quick-links-heading\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-12\">\n                <h2 id=\"quick-links-heading\" className=\"text-3xl font-bold text-gray-900 mb-4\">\n                  {t('home.quickLinks.title')}\n                </h2>\n              </header>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                <Link href={`/${locale}/health-guide`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-purple-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-purple-600 mb-2 group-hover:text-purple-700\">{t('home.quickLinks.healthGuide')}</h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">{t('home.quickLinks.healthGuideDesc')}</p>\n                  <div className=\"mt-3 text-purple-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.viewNow')}\n                  </div>\n                </Link>\n\n                <Link href={`/${locale}/interactive-tools/symptom-assessment`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-pink-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-pink-500 to-pink-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-pink-600 mb-2 group-hover:text-pink-700\">\n                    {t('home.quickLinks.assessment.title')}\n                  </h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">\n                    {t('home.quickLinks.assessment.description')}\n                  </p>\n                  <div className=\"mt-3 text-pink-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.assessment.cta')}\n                  </div>\n                </Link>\n\n                <Link href={`/${locale}/downloads`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-blue-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-blue-600 mb-2 group-hover:text-blue-700\">{t('home.quickLinks.resources')}</h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">{t('home.quickLinks.resourcesDesc')}</p>\n                  <div className=\"mt-3 text-blue-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.downloads.cta')}\n                  </div>\n                </Link>\n\n                <Link href={`/${locale}/scenario-solutions`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-green-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-green-600 mb-2 group-hover:text-green-700\">{t('home.quickLinks.solutions')}</h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">{t('home.quickLinks.solutionsDesc')}</p>\n                  <div className=\"mt-3 text-green-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.scenarios.cta')}\n                  </div>\n                </Link>\n              </div>\n            </div>\n          </section>\n        </main>\n      </div>\n    </>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":290,"column":17,"nodeType":"JSXOpeningElement","endLine":295,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTranslations } from 'next-intl';\nimport Link from 'next/link';\nimport { unstable_setRequestLocale as setRequestLocale, getTranslations } from 'next-intl/server';\nimport { Metadata } from 'next';\nimport Hero from '@/components/layout/Hero';\nimport UserSuccessStories from '@/components/UserSuccessStories';\nimport NavigationTabs from '@/components/NavigationTabs';\n\n// é¡µé¢çº§åˆ«çš„metadata\nexport async function generateMetadata({ params }: { params: Promise<{ locale: string }> }): Promise<Metadata> {\n  const { locale } = await params;\n  const isZh = locale === 'zh';\n\n  return {\n    title: isZh\n      ? 'PeriodHub - ä¸“ä¸šç—›ç»ç¼“è§£æ–¹æ³•å’Œæœˆç»å¥åº·ç®¡ç†å¹³å° | ç§‘å­¦æŒ‡å¯¼ï¼Œè´´å¿ƒé™ªä¼´'\n      : 'PeriodHub - Professional Menstrual Health Management Platform | Scientific Guidance',\n    description: isZh\n      ? 'PeriodHubä¸“ä¸šç—›ç»ç¼“è§£æ–¹æ¡ˆä¸ç»æœŸå¥åº·ç®¡ç†å¹³å°ã€‚åŸºäº42ç¯‡åŒ»å­¦æŒ‡å—å’Œ24ä¸ªè‡ªæµ‹å·¥å…·ï¼Œå·²å¸®åŠ©60ä¸‡+å¥³æ€§ç§‘å­¦åº”å¯¹ç—›ç»å›°æ‰°ï¼Œè·å–ä¸ªæ€§åŒ–è§£å†³æ–¹æ¡ˆï¼Œæ”¹å–„ç”Ÿæ´»è´¨é‡ã€‚'\n      : 'PeriodHub - Professional menstrual health platform with 42 medical guidelines and 24 assessment tools. Board-certified OB/GYN reviewed content helping 600K+ women.',\n    keywords: isZh ? [\n      'ç—›ç»æ€ä¹ˆç¼“è§£æœ€å¿«æ–¹æ³•', 'ç—›ç»åƒä»€ä¹ˆè¯æœ€æœ‰æ•ˆ', 'æœˆç»æ¨è¿Ÿå‡ å¤©ç®—æ­£å¸¸', 'æœˆç»é‡å°‘æ˜¯ä»€ä¹ˆåŸå› ',\n      'ç—›ç»ç¼“è§£', 'æœˆç»ç–¼ç—›', 'ç»æœŸå¥åº·', 'å¥³æ€§å¥åº·', 'æœˆç»å¥åº·ç®¡ç†', 'ç»æœŸç–¼ç—›æ€ä¹ˆåŠ', 'ä¸­åŒ»è°ƒç†',\n      'çƒ­æ•·', 'æ•·çƒ­æ°´è¢‹', 'æš–å®å®', 'æŒ‰æ‘©', 'æ‰è‚šå­', 'æ­¢ç—›è¯',\n      'æœˆç»å‘¨æœŸ', 'ç»æœŸæŠ¤ç†', 'ç”Ÿç†æœŸ', 'å¤§å§¨å¦ˆ', 'ä¾‹å‡', 'æœˆç»ä¸è°ƒ', 'ç»æœŸç—‡çŠ¶'\n    ] : [\n      'menstrual cramps relief', 'period pain remedies', 'how to stop period pain', 'natural period pain relief',\n      'menstrual health', 'period tracking', 'women health', 'dysmenorrhea treatment'\n    ],\n    openGraph: {\n      title: isZh\n        ? 'PeriodHub - ä¸“ä¸šç—›ç»ç¼“è§£æ–¹æ³•å’Œæœˆç»å¥åº·ç®¡ç†å¹³å°'\n        : 'PeriodHub - Professional Menstrual Health Management Platform',\n      description: isZh\n        ? 'ä¸“ä¸šçš„å¥³æ€§æœˆç»å¥åº·ç®¡ç†å¹³å°ï¼Œæä¾›ç§‘å­¦çš„ç—›ç»ç¼“è§£æ–¹æ³•å’Œä¸ªæ€§åŒ–å¥åº·å»ºè®®ã€‚'\n        : 'Professional menstrual health management platform providing scientific period pain relief methods.',\n      url: `https://www.periodhub.health/${locale}`,\n      siteName: 'PeriodHub',\n      locale: isZh ? 'zh_CN' : 'en_US',\n      type: 'website',\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: isZh\n        ? 'PeriodHub - ä¸“ä¸šç—›ç»ç¼“è§£æ–¹æ³•å’Œæœˆç»å¥åº·ç®¡ç†å¹³å°'\n        : 'PeriodHub - Professional Menstrual Health Management Platform',\n      description: isZh\n        ? 'ä¸“ä¸šçš„å¥³æ€§æœˆç»å¥åº·ç®¡ç†å¹³å°ï¼Œæä¾›ç§‘å­¦çš„ç—›ç»ç¼“è§£æ–¹æ³•ã€‚'\n        : 'Professional menstrual health management platform.',\n    },\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh',\n        'en-US': 'https://www.periodhub.health/en',\n        'x-default': 'https://www.periodhub.health/zh',\n      },\n    },\n    robots: {\n      index: true,\n      follow: true,\n      googleBot: {\n        index: true,\n        follow: true,\n        'max-video-preview': -1,\n        'max-image-preview': 'large',\n        'max-snippet': -1,\n      },\n    },\n  };\n}\n\n// å¢å¼ºçš„ç»“æ„åŒ–æ•°æ® - é’ˆå¯¹å¥åº·å¹³å°ä¼˜åŒ–\nconst getStructuredData = async (locale: string) => {\n  const t = await getTranslations({ locale, namespace: '' });\n  \n  return {\n  \"@context\": \"https://schema.org\",\n  \"@graph\": [\n    {\n      \"@type\": \"SoftwareApplication\",\n      \"@id\": `https://www.periodhub.health/${locale}#application`,\n      \"name\": \"PeriodHub\",\n      \"applicationCategory\": \"HealthApplication\",\n      \"operatingSystem\": \"Web\",\n      \"inLanguage\": locale === 'zh' ? \"zh-CN\" : \"en-US\",\n      \"description\": t('metadata.home.structuredData.description'),\n      \"url\": `https://www.periodhub.health/${locale}`,\n      \"offers\": {\n        \"@type\": \"Offer\",\n        \"price\": \"0\",\n        \"priceCurrency\": \"USD\"\n      },\n      \"featureList\": [\n        t('metadata.home.structuredData.featureList.painTracking'),\n        t('metadata.home.structuredData.featureList.cyclePrediction'),\n        t('metadata.home.structuredData.featureList.constitutionAssessment'),\n        t('metadata.home.structuredData.featureList.healthGuides'),\n        t('metadata.home.structuredData.featureList.scenarioSolutions')\n      ],\n      \"aggregateRating\": {\n        \"@type\": \"AggregateRating\",\n        \"ratingValue\": \"4.8\",\n        \"ratingCount\": \"1250\",\n        \"bestRating\": \"5\"\n      },\n      \"publisher\": {\n        \"@id\": `https://www.periodhub.health/${locale}#organization`\n      }\n    },\n    {\n      \"@type\": \"Organization\",\n      \"@id\": `https://www.periodhub.health/${locale}#organization`,\n      \"name\": \"PeriodHub\",\n      \"url\": \"https://www.periodhub.health\",\n      \"logo\": {\n        \"@type\": \"ImageObject\",\n        \"url\": \"https://www.periodhub.health/icon-512.png\",\n        \"width\": 512,\n        \"height\": 512\n      },\n      \"sameAs\": [\n        \"https://www.periodhub.health/zh\",\n        \"https://www.periodhub.health/en\"\n      ]\n    },\n    {\n      \"@type\": \"WebSite\",\n      \"@id\": `https://www.periodhub.health/${locale}#website`,\n      \"url\": \"https://www.periodhub.health\",\n      \"name\": \"PeriodHub\",\n      \"description\": t('organization.description'),\n      \"publisher\": {\n        \"@id\": `https://www.periodhub.health/${locale}#organization`\n      },\n      \"potentialAction\": {\n        \"@type\": \"SearchAction\",\n        \"target\": {\n          \"@type\": \"EntryPoint\",\n          \"urlTemplate\": `https://www.periodhub.health/${locale}/search?q={search_term_string}`\n        },\n        \"query-input\": \"required name=search_term_string\"\n      }\n    },\n    {\n      \"@type\": \"FAQPage\",\n      \"@id\": `https://www.periodhub.health/${locale}#faq`,\n      \"mainEntity\": [\n        {\n          \"@type\": \"Question\",\n          \"name\": t('faq.q1.question'),\n          \"acceptedAnswer\": {\n            \"@type\": \"Answer\",\n            \"text\": t('faq.q1.answer')\n          }\n        },\n        {\n          \"@type\": \"Question\",\n          \"name\": t('faq.q2.question'),\n          \"acceptedAnswer\": {\n            \"@type\": \"Answer\",\n            \"text\": t('faq.q2.answer')\n          }\n        },\n        {\n          \"@type\": \"Question\",\n          \"name\": t('faq.q3.question'),\n          \"acceptedAnswer\": {\n            \"@type\": \"Answer\",\n            \"text\": t('faq.q3.answer')\n          }\n        }\n      ]\n    }\n  ]\n  };\n};\n\nexport default async function HomePage({ params }: { params: Promise<{ locale: string }> }) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n  const t = await getTranslations('');\n  const isZh = typeof locale === 'string' && (locale === 'zh' || locale.startsWith('zh'));\n  const structuredData = await getStructuredData(locale);\n\n  return (\n    <>\n      {/* å¢å¼ºçš„ç»“æ„åŒ–æ•°æ® */}\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify(structuredData)\n        }}\n      />\n\n      <div className=\"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50\">\n        {/* é«˜çº§Hero - ä¸»è¦å†…å®¹åŒºåŸŸ */}\n        <main>\n          <Hero />\n\n          {/* Features Section */}\n          <section className=\"py-20\" aria-labelledby=\"features-heading\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-16\">\n                <h2 id=\"features-heading\" className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">\n                  {t('home.features.title')}\n                </h2>\n                <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n                  {t('home.features.subtitle')}\n                </p>\n              </header>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n                <Link href={`/${locale}/interactive-tools/cycle-tracker`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-purple-600 transition-colors\">{t('home.features.tracking.title')}</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{t('home.features.tracking.description')}</p>\n                    <div className=\"mt-4 text-purple-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.learnMore')}\n                    </div>\n                  </article>\n                </Link>\n\n                <Link href={`/${locale}/interactive-tools/symptom-assessment`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-blue-600 transition-colors\">{t('home.features.assessment.title')}</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{t('home.features.assessment.description')}</p>\n                    <div className=\"mt-4 text-blue-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.learnMore')}\n                    </div>\n                  </article>\n                </Link>\n\n                <Link href={`/${locale}/downloads`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-green-600 transition-colors\">{t('home.features.resources.title')}</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{t('home.features.resources.description')}</p>\n                    <div className=\"mt-4 text-green-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.learnMore')}\n                    </div>\n                  </article>\n                </Link>\n\n                <Link href={`/${locale}/immediate-relief`} className=\"block\">\n                  <article className=\"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 group h-full\">\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-200\" aria-hidden=\"true\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 group-hover:text-red-600 transition-colors\">\n                      {t('home.features.immediateRelief.title')}\n                    </h3>\n                    <p className=\"text-gray-600 leading-relaxed\">\n                      {t('home.features.immediateRelief.description')}\n                    </p>\n                    <div className=\"mt-4 text-red-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {t('home.features.immediateRelief.cta')}\n                    </div>\n                  </article>\n                </Link>\n              </div>\n            </div>\n          </section>\n\n          {/* å¯¼èˆªåˆ†æ®µ */}\n          <div className=\"py-10\">\n            <NavigationTabs locale={locale} />\n          </div>\n\n          {/* ç»Ÿè®¡æ¨¡å—ï¼šæ›¿æ¢ä¸º SVG ä¿¡æ¯å›¾ */}\n          <section id=\"articles-section\" className=\"py-16\">\n            <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <div className=\"bg-white/70 backdrop-blur rounded-2xl shadow-sm p-4 sm:p-6\">\n                <img\n                  src=\"/images/infographics/stats-infographic.svg\"\n                  alt={isZh ? 'æœˆç»å¥åº·ç»Ÿè®¡æ•°æ®ä¿¡æ¯å›¾' : 'Period Health Statistics Infographic'}\n                  className=\"w-full h-auto\"\n                  loading=\"lazy\"\n                />\n                <p className=\"mt-2 text-center text-sm text-neutral-500\">\n                  {t('healthStatistics.dataSource')}\n                </p>\n              </div>\n            </div>\n          </section>\n\n          {/* ä¿¡ä»»æŒ‡æ ‡ */}\n          <section className=\"py-16 bg-gradient-to-r from-blue-50 to-indigo-50\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <div className=\"text-center mb-12\">\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">{t('home.trusted.title')}</h2>\n                <p className=\"text-xl text-gray-600\">{t('home.trusted.subtitle')}</p>\n              </div>\n\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8 text-center\">\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-purple-600 mb-2\">50K+</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.activeUsers')}</div>\n                </div>\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-pink-600 mb-2\">42</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.articles')}</div>\n                </div>\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-blue-600 mb-2\">24</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.resources')}</div>\n                </div>\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n                  <div className=\"text-3xl font-bold text-green-600 mb-2\">98%</div>\n                  <div className=\"text-gray-600\">{t('home.trusted.metrics.satisfaction')}</div>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* ç—›ç»æ²»ç–—ä¸“é¢˜é“¾æ¥åŒºåŸŸ - åŸºäºå…³é”®è¯æ•°æ®ä¼˜åŒ– */}\n          <section className=\"py-16 bg-white\" aria-labelledby=\"pain-management-heading\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-12\">\n                <h2 id=\"pain-management-heading\" className=\"text-3xl font-bold text-gray-900 mb-4\">\n                  {t('home.treatmentGuide.title')}\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  {t('home.treatmentGuide.subtitle')}\n                </p>\n              </header>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {/* ç—›ç»ç”¨è¯æŒ‡å— */}\n                <Link href={`/${locale}/downloads/medication-guide`} className=\"group bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center mr-3\">\n                      <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-blue-600\">\n                      {t('home.treatmentGuide.medicationGuide.title')}\n                    </h3>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-3\">\n                    {t('home.treatmentGuide.medicationGuide.description')}\n                  </p>\n                  <div className=\"text-blue-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.treatmentGuide.medicationGuide.cta')}\n                  </div>\n                </Link>\n\n                {/* çƒ­æ•·ç–—æ³•æŒ‡å¯¼ */}\n                <Link href={`/${locale}/articles/heat-therapy-complete-guide`} className=\"group bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center mr-3\">\n                      <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-red-600\">\n                      {t('home.treatmentGuide.heatTherapy.title')}\n                    </h3>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-3\">\n                    {t('home.treatmentGuide.heatTherapy.description')}\n                  </p>\n                  <div className=\"text-red-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.treatmentGuide.heatTherapy.cta')}\n                  </div>\n                </Link>\n\n                {/* åŸå‘æ€§ç—›ç»è¯Šæ–­ */}\n                <Link href={`/${locale}/health-guide/understanding-pain`} className=\"group bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center mr-3\">\n                      <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-purple-600\">\n                      {t('home.treatmentGuide.diagnosis.title')}\n                    </h3>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-3\">\n                    {t('home.treatmentGuide.diagnosis.description')}\n                  </p>\n                  <div className=\"text-purple-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.treatmentGuide.diagnosis.cta')}\n                  </div>\n                </Link>\n              </div>\n            </div>\n          </section>\n\n          {/* ç”¨æˆ·æˆåŠŸæ¡ˆä¾‹ */}\n          <UserSuccessStories />\n\n          {/* FAQ Section - SEOä¼˜åŒ– */}\n          <section className=\"py-20 bg-white\" aria-labelledby=\"faq-heading\">\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-16\">\n                <h2 id=\"faq-heading\" className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">{t('faq.title')}</h2>\n                <p className=\"text-xl text-gray-600\">{t('faq.subtitle')}</p>\n              </header>\n\n              <div className=\"space-y-6\">\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q1.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q1.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q2.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q2.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q3.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q3.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q4.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q4.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q5.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q5.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q6.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q6.answer')}\n                  </div>\n                </details>\n\n                <details className=\"bg-gray-50 rounded-lg p-6 group\">\n                  <summary className=\"font-semibold text-lg text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                    <span>{t('faq.q7.question')}</span>\n                    <svg className=\"w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </summary>\n                  <div className=\"mt-4 text-gray-600 leading-relaxed\">\n                    {t('faq.q7.answer')}\n                  </div>\n                </details>\n              </div>\n            </div>\n          </section>\n\n          {/* Quick Links */}\n          <section className=\"py-20 bg-gradient-to-r from-purple-100/50 to-pink-100/50\" aria-labelledby=\"quick-links-heading\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <header className=\"text-center mb-12\">\n                <h2 id=\"quick-links-heading\" className=\"text-3xl font-bold text-gray-900 mb-4\">\n                  {t('home.quickLinks.title')}\n                </h2>\n              </header>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                <Link href={`/${locale}/health-guide`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-purple-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-purple-600 mb-2 group-hover:text-purple-700\">{t('home.quickLinks.healthGuide')}</h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">{t('home.quickLinks.healthGuideDesc')}</p>\n                  <div className=\"mt-3 text-purple-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.viewNow')}\n                  </div>\n                </Link>\n\n                <Link href={`/${locale}/interactive-tools/symptom-assessment`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-pink-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-pink-500 to-pink-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-pink-600 mb-2 group-hover:text-pink-700\">\n                    {t('home.quickLinks.assessment.title')}\n                  </h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">\n                    {t('home.quickLinks.assessment.description')}\n                  </p>\n                  <div className=\"mt-3 text-pink-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.assessment.cta')}\n                  </div>\n                </Link>\n\n                <Link href={`/${locale}/downloads`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-blue-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-blue-600 mb-2 group-hover:text-blue-700\">{t('home.quickLinks.resources')}</h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">{t('home.quickLinks.resourcesDesc')}</p>\n                  <div className=\"mt-3 text-blue-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.downloads.cta')}\n                  </div>\n                </Link>\n\n                <Link href={`/${locale}/scenario-solutions`} className=\"group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border border-transparent hover:border-green-200 transform hover:-translate-y-1\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-green-600 mb-2 group-hover:text-green-700\">{t('home.quickLinks.solutions')}</h3>\n                  <p className=\"text-gray-600 text-sm leading-relaxed\">{t('home.quickLinks.solutionsDesc')}</p>\n                  <div className=\"mt-3 text-green-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {t('home.quickLinks.scenarios.cta')}\n                  </div>\n                </Link>\n              </div>\n            </div>\n          </section>\n        </main>\n      </div>\n    </>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/pain-tracker/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/pain-tracker/pain-tracker-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/pdf-center-test/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":14,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":30,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":10}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { getTranslations, setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport PDFCenterOptimized from '../../../components/PDFCenterOptimized';\n\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'common' });\n  \n  return {\n    title: `PDFèµ„æºä¸­å¿ƒæµ‹è¯• - ${locale === 'zh' ? 'Period Hub' : 'Period Hub'}`,\n    description: 'æµ‹è¯•æ–°çš„PDFèµ„æºåˆ†ç±»å’Œä¼˜åŒ–ç³»ç»Ÿ',\n    robots: {\n      index: false,\n      follow: false,\n    },\n  };\n}\n\nexport default async function PDFCenterTestPage({ params }: Props) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n  \n  const t = await getTranslations('common');\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* é¡µé¢å¤´éƒ¨ */}\n      <div className=\"bg-white border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 py-8\">\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              ğŸ“š PDFèµ„æºä¸­å¿ƒä¼˜åŒ–æµ‹è¯•\n            </h1>\n            <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n              æµ‹è¯•38ä¸ªPDFèµ„æºçš„æ–°åˆ†ç±»ç³»ç»Ÿã€ç§»åŠ¨ç«¯ä¼˜åŒ–ç•Œé¢å’Œæ™ºèƒ½æœç´¢åŠŸèƒ½\n            </p>\n            \n            {/* æµ‹è¯•çŠ¶æ€æŒ‡ç¤ºå™¨ */}\n            <div className=\"mt-6 flex justify-center gap-4\">\n              <div className=\"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-800 rounded-lg\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                <span className=\"text-sm font-medium\">æŠ€æœ¯æ¶æ„ âœ“</span>\n              </div>\n              <div className=\"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-800 rounded-lg\">\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                <span className=\"text-sm font-medium\">æ•°æ®ç»“æ„ âœ“</span>\n              </div>\n              <div className=\"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-800 rounded-lg\">\n                <div className=\"w-2 h-2 bg-purple-500 rounded-full\"></div>\n                <span className=\"text-sm font-medium\">UIç»„ä»¶ âœ“</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* PDFä¸­å¿ƒç»„ä»¶ */}\n      <div className=\"py-8\">\n        <PDFCenterOptimized\n          locale={locale}\n          showSearch={true}\n          showFilters={true}\n          maxResults={20}\n        />\n      </div>\n\n      {/* æµ‹è¯•ä¿¡æ¯é¢æ¿ */}\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n            ğŸ§ª æµ‹è¯•åŠŸèƒ½è¯´æ˜\n          </h2>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <div className=\"space-y-2\">\n              <h3 className=\"font-medium text-gray-900\">åˆ†ç±»ç³»ç»Ÿ</h3>\n              <ul className=\"text-sm text-gray-600 space-y-1\">\n                <li>â€¢ ç´§æ€¥ç¼“è§£ (10ä¸ª)</li>\n                <li>â€¢ æ—¥å¸¸ç®¡ç† (10ä¸ª)</li>\n                <li>â€¢ æ·±åº¦å­¦ä¹  (12ä¸ª)</li>\n                <li>â€¢ ä¸“ä¸šæŒ‡å¯¼ (6ä¸ª)</li>\n              </ul>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <h3 className=\"font-medium text-gray-900\">ä¼˜å…ˆçº§æ ‡ç­¾</h3>\n              <ul className=\"text-sm text-gray-600 space-y-1\">\n                <li>â€¢ <span className=\"text-red-600\">HIGHEST</span> - æœ€ç´§æ€¥</li>\n                <li>â€¢ <span className=\"text-orange-600\">HIGH</span> - é«˜ä¼˜å…ˆçº§</li>\n                <li>â€¢ <span className=\"text-yellow-600\">MEDIUM</span> - ä¸­ç­‰</li>\n                <li>â€¢ <span className=\"text-gray-600\">LOW</span> - ä½ä¼˜å…ˆçº§</li>\n              </ul>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <h3 className=\"font-medium text-gray-900\">æœç´¢åŠŸèƒ½</h3>\n              <ul className=\"text-sm text-gray-600 space-y-1\">\n                <li>â€¢ æ ‡é¢˜æœç´¢</li>\n                <li>â€¢ æè¿°æœç´¢</li>\n                <li>â€¢ æ ‡ç­¾æœç´¢</li>\n                <li>â€¢ å®æ—¶ç­›é€‰</li>\n              </ul>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <h3 className=\"font-medium text-gray-900\">ç§»åŠ¨ç«¯ä¼˜åŒ–</h3>\n              <ul className=\"text-sm text-gray-600 space-y-1\">\n                <li>â€¢ å“åº”å¼å¸ƒå±€</li>\n                <li>â€¢ è§¦æ‘¸å‹å¥½æŒ‰é’®</li>\n                <li>â€¢ æ¨ªå‘æ»šåŠ¨å¯¼èˆª</li>\n                <li>â€¢ å¡ç‰‡å¼è®¾è®¡</li>\n              </ul>\n            </div>\n          </div>\n          \n          <div className=\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n            <h4 className=\"font-medium text-yellow-800 mb-2\">âš ï¸ æµ‹è¯•æ³¨æ„äº‹é¡¹</h4>\n            <p className=\"text-sm text-yellow-700\">\n              è¿™æ˜¯æŠ€æœ¯æ¶æ„æµ‹è¯•é¡µé¢ã€‚å½“å‰æ˜¾ç¤ºçš„æ˜¯å‰10ä¸ªç´§æ€¥ç¼“è§£ç±»èµ„æºçš„ç¤ºä¾‹æ•°æ®ã€‚\n              å®Œæ•´çš„38ä¸ªèµ„æºæ•°æ®å°†åœ¨å†…å®¹åˆ¶ä½œå®Œæˆåé€æ­¥æ·»åŠ ã€‚\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/privacy-policy/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\n\n// Types\ntype Locale = 'en' | 'zh';\n\n// Generate metadata for the privacy policy page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'éšç§æ”¿ç­–' : 'Privacy Policy';\n  const description = locale === 'zh' \n    ? 'äº†è§£æˆ‘ä»¬å¦‚ä½•æ”¶é›†ã€ä½¿ç”¨å’Œä¿æŠ¤æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚'\n    : 'Learn how we collect, use, and protect your personal information.';\n\n  return {\n    title: `${title} | periodhub.health`,\n    description,\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}/privacy-policy`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh/privacy-policy',\n        'en-US': 'https://www.periodhub.health/en/privacy-policy',\n        'x-default': 'https://www.periodhub.health/zh/privacy-policy',\n      },\n    },\n    openGraph: {\n      title,\n      description,\n      type: 'website',\n    },\n  };\n}\n\nexport default async function PrivacyPolicyPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const content = locale === 'zh' ? {\n    title: 'éšç§æ”¿ç­–',\n    lastUpdated: 'æœ€åæ›´æ–°ï¼š2024å¹´4æœˆ1æ—¥',\n    sections: [\n      {\n        title: '1. ä¿¡æ¯æ”¶é›†',\n        content: `\n          <p>æˆ‘ä»¬å¯èƒ½æ”¶é›†ä»¥ä¸‹ç±»å‹çš„ä¿¡æ¯ï¼š</p>\n          <ul>\n            <li><strong>ä¸ªäººä¿¡æ¯ï¼š</strong>å½“æ‚¨æ³¨å†Œè´¦æˆ·æˆ–ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½æ”¶é›†æ‚¨çš„å§“åã€ç”µå­é‚®ä»¶åœ°å€ç­‰ä¿¡æ¯ã€‚</li>\n            <li><strong>å¥åº·ä¿¡æ¯ï¼š</strong>æ‚¨åœ¨ä½¿ç”¨æˆ‘ä»¬çš„ç—‡çŠ¶è¿½è¸ªå·¥å…·æ—¶æä¾›çš„å¥åº·ç›¸å…³ä¿¡æ¯ã€‚</li>\n            <li><strong>ä½¿ç”¨æ•°æ®ï¼š</strong>å…³äºæ‚¨å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬ç½‘ç«™çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è®¿é—®æ—¶é—´ã€é¡µé¢æµè§ˆç­‰ã€‚</li>\n            <li><strong>æŠ€æœ¯ä¿¡æ¯ï¼š</strong>æ‚¨çš„IPåœ°å€ã€æµè§ˆå™¨ç±»å‹ã€è®¾å¤‡ä¿¡æ¯ç­‰ã€‚</li>\n          </ul>\n        `\n      },\n      {\n        title: '2. ä¿¡æ¯ä½¿ç”¨',\n        content: `\n          <p>æˆ‘ä»¬ä½¿ç”¨æ”¶é›†çš„ä¿¡æ¯ç”¨äºï¼š</p>\n          <ul>\n            <li>æä¾›å’Œæ”¹è¿›æˆ‘ä»¬çš„æœåŠ¡</li>\n            <li>ä¸ªæ€§åŒ–æ‚¨çš„ç”¨æˆ·ä½“éªŒ</li>\n            <li>å‘é€é‡è¦é€šçŸ¥å’Œæ›´æ–°</li>\n            <li>è¿›è¡Œæ•°æ®åˆ†æä»¥æ”¹å–„ç½‘ç«™åŠŸèƒ½</li>\n            <li>ç¡®ä¿ç½‘ç«™å®‰å…¨å’Œé˜²æ­¢æ¬ºè¯ˆ</li>\n          </ul>\n        `\n      },\n      {\n        title: '3. ä¿¡æ¯å…±äº«',\n        content: `\n          <p>æˆ‘ä»¬ä¸ä¼šå‡ºå”®ã€äº¤æ˜“æˆ–è½¬è®©æ‚¨çš„ä¸ªäººä¿¡æ¯ç»™ç¬¬ä¸‰æ–¹ï¼Œé™¤éï¼š</p>\n          <ul>\n            <li>è·å¾—æ‚¨çš„æ˜ç¡®åŒæ„</li>\n            <li>æ³•å¾‹è¦æ±‚æˆ–æ³•é™¢å‘½ä»¤</li>\n            <li>ä¿æŠ¤æˆ‘ä»¬çš„æƒåˆ©ã€è´¢äº§æˆ–å®‰å…¨</li>\n            <li>ä¸å¯ä¿¡çš„ç¬¬ä¸‰æ–¹æœåŠ¡æä¾›å•†åˆä½œï¼ˆä»–ä»¬åŒæ„ä¿å¯†ï¼‰</li>\n          </ul>\n        `\n      },\n      {\n        title: '4. æ•°æ®å®‰å…¨',\n        content: `\n          <p>æˆ‘ä»¬é‡‡å–é€‚å½“çš„å®‰å…¨æªæ–½æ¥ä¿æŠ¤æ‚¨çš„ä¸ªäººä¿¡æ¯ï¼š</p>\n          <ul>\n            <li>ä½¿ç”¨SSLåŠ å¯†æŠ€æœ¯ä¿æŠ¤æ•°æ®ä¼ è¾“</li>\n            <li>å®šæœŸæ›´æ–°å®‰å…¨åè®®</li>\n            <li>é™åˆ¶å‘˜å·¥è®¿é—®ä¸ªäººä¿¡æ¯</li>\n            <li>å®šæœŸå¤‡ä»½å’Œå®‰å…¨å­˜å‚¨æ•°æ®</li>\n          </ul>\n          <p>ä½†è¯·æ³¨æ„ï¼Œæ²¡æœ‰ä»»ä½•äº’è”ç½‘ä¼ è¾“æˆ–å­˜å‚¨æ–¹æ³•æ˜¯100%å®‰å…¨çš„ã€‚</p>\n\n          <div class=\"bg-blue-50 border-l-4 border-blue-500 p-4 my-4\">\n            <p class=\"text-blue-800\"><strong>MVPé˜¶æ®µè¯´æ˜ï¼š</strong>è¯·æ³¨æ„ï¼Œperiodhub.healthç›®å‰å¤„äºæœ€å°å¯è¡Œäº§å“(MVP)é˜¶æ®µã€‚æˆ‘ä»¬ä»¥æœ‰é™çš„èµ„æºè¿è¥ï¼Œä¸“æ³¨äºæœ€å°åŒ–åŸºç¡€è®¾æ–½å’Œæˆæœ¬ï¼Œæ—¨åœ¨å®ç°æ¥è¿‘é›¶çš„ä¸ªäººä¿¡æ¯æ”¶é›†ã€‚</p>\n          </div>\n        `\n      },\n      {\n        title: '5. Cookieä½¿ç”¨',\n        content: `\n          <p>æˆ‘ä»¬ä½¿ç”¨Cookieæ¥ï¼š</p>\n          <ul>\n            <li>è®°ä½æ‚¨çš„åå¥½è®¾ç½®</li>\n            <li>åˆ†æç½‘ç«™æµé‡</li>\n            <li>æ”¹å–„ç”¨æˆ·ä½“éªŒ</li>\n            <li>æä¾›ä¸ªæ€§åŒ–å†…å®¹</li>\n          </ul>\n          <p>æ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¾ç½®æ§åˆ¶Cookieçš„ä½¿ç”¨ã€‚</p>\n        `\n      },\n      {\n        title: '6. æ‚¨çš„æƒåˆ©',\n        content: `\n          <p>æ‚¨æœ‰æƒï¼š</p>\n          <ul>\n            <li>è®¿é—®æˆ‘ä»¬æŒæœ‰çš„å…³äºæ‚¨çš„ä¿¡æ¯</li>\n            <li>è¦æ±‚æ›´æ­£ä¸å‡†ç¡®çš„ä¿¡æ¯</li>\n            <li>è¦æ±‚åˆ é™¤æ‚¨çš„ä¸ªäººä¿¡æ¯</li>\n            <li>åå¯¹å¤„ç†æ‚¨çš„ä¸ªäººä¿¡æ¯</li>\n            <li>æ•°æ®å¯æºå¸¦æƒ</li>\n          </ul>\n        `\n      },\n      {\n        title: '7. è”ç³»æˆ‘ä»¬',\n        content: `\n          <p>å¦‚æœæ‚¨å¯¹æœ¬éšç§æ”¿ç­–æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š</p>\n          <ul>\n            <li>ç”µå­é‚®ä»¶ï¼štiyibaofu@outlook.com</li>\n            <li>é‚®å¯„åœ°å€ï¼š[å…¬å¸åœ°å€]</li>\n          </ul>\n        `\n      }\n    ]\n  } : {\n    title: 'Privacy Policy',\n    lastUpdated: 'Last updated: April 1, 2024',\n    sections: [\n      {\n        title: '1. Information Collection',\n        content: `\n          <p>We may collect the following types of information:</p>\n          <ul>\n            <li><strong>Personal Information:</strong> When you register an account or use our services, we may collect your name, email address, and other information.</li>\n            <li><strong>Health Information:</strong> Health-related information you provide when using our symptom tracking tools.</li>\n            <li><strong>Usage Data:</strong> Information about how you use our website, including access times, page views, etc.</li>\n            <li><strong>Technical Information:</strong> Your IP address, browser type, device information, etc.</li>\n          </ul>\n        `\n      },\n      {\n        title: '2. Information Use',\n        content: `\n          <p>We use the collected information to:</p>\n          <ul>\n            <li>Provide and improve our services</li>\n            <li>Personalize your user experience</li>\n            <li>Send important notices and updates</li>\n            <li>Conduct data analysis to improve website functionality</li>\n            <li>Ensure website security and prevent fraud</li>\n          </ul>\n        `\n      },\n      {\n        title: '3. Information Sharing',\n        content: `\n          <p>We do not sell, trade, or transfer your personal information to third parties, except when:</p>\n          <ul>\n            <li>We have your explicit consent</li>\n            <li>Required by law or court order</li>\n            <li>To protect our rights, property, or safety</li>\n            <li>Working with trusted third-party service providers (who agree to confidentiality)</li>\n          </ul>\n        `\n      },\n      {\n        title: '4. Data Security',\n        content: `\n          <p>We take appropriate security measures to protect your personal information:</p>\n          <ul>\n            <li>Use SSL encryption technology to protect data transmission</li>\n            <li>Regularly update security protocols</li>\n            <li>Limit employee access to personal information</li>\n            <li>Regular backup and secure data storage</li>\n          </ul>\n          <p>However, please be aware that no data transmission over the internet or storage system can be guaranteed to be 100% secure.</p>\n\n          <div class=\"bg-blue-50 border-l-4 border-blue-500 p-4 my-4\">\n            <p class=\"text-blue-800\"><strong>MVP Phase Notice:</strong> Please be aware that periodhub.health is currently in its Minimum Viable Product (MVP) phase, focused on minimal infrastructure and cost, aiming for near-zero data collection of personal information.</p>\n          </div>\n        `\n      },\n      {\n        title: '5. Cookie Usage',\n        content: `\n          <p>We use cookies to:</p>\n          <ul>\n            <li>Remember your preference settings</li>\n            <li>Analyze website traffic</li>\n            <li>Improve user experience</li>\n            <li>Provide personalized content</li>\n          </ul>\n          <p>You can control cookie usage through your browser settings.</p>\n        `\n      },\n      {\n        title: '6. Your Rights',\n        content: `\n          <p>You have the right to:</p>\n          <ul>\n            <li>Access information we hold about you</li>\n            <li>Request correction of inaccurate information</li>\n            <li>Request deletion of your personal information</li>\n            <li>Object to processing of your personal information</li>\n            <li>Data portability</li>\n          </ul>\n        `\n      },\n      {\n        title: '7. Contact Us',\n        content: `\n          <p>If you have any questions about this Privacy Policy, please contact us:</p>\n          <ul>\n            <li>Email: tiyibaofu@outlook.com</li>\n            <li>Mailing Address: [Company Address]</li>\n          </ul>\n        `\n      }\n    ]\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Page Header */}\n      <header className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold text-neutral-800 mb-6\">\n            {content.title}\n          </h1>\n          <p className=\"text-neutral-600 mb-8\">\n            {content.lastUpdated}\n          </p>\n        </div>\n      </header>\n\n      {/* Content */}\n      <main className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"bg-white rounded-lg shadow-sm p-8 space-y-8\">\n            {content.sections.map((section, index) => (\n              <section key={index} className=\"border-b border-neutral-200 pb-6 last:border-b-0\">\n                <h2 className=\"text-xl font-semibold text-neutral-800 mb-4\">\n                  {section.title}\n                </h2>\n                <div \n                  className=\"prose prose-neutral max-w-none\"\n                  dangerouslySetInnerHTML={{ __html: section.content }}\n                />\n              </section>\n            ))}\n          </div>\n        </div>\n      </main>\n\n      {/* Contact Section */}\n      <section className=\"bg-neutral-50 py-12\">\n        <div className=\"container-custom\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <h2 className=\"text-2xl font-bold text-neutral-800 mb-4\">\n              {locale === 'zh' ? 'æœ‰ç–‘é—®ï¼Ÿ' : 'Questions?'}\n            </h2>\n            <p className=\"text-neutral-600 mb-6\">\n              {locale === 'zh' \n                ? 'å¦‚æœæ‚¨å¯¹æˆ‘ä»¬çš„éšç§æ”¿ç­–æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚'\n                : 'If you have any questions about our Privacy Policy, please feel free to contact us.'\n              }\n            </p>\n            <a\n              href=\"mailto:tiyibaofu@outlook.com\"\n              className=\"btn-primary\"\n            >\n              {locale === 'zh' ? 'è”ç³»æˆ‘ä»¬' : 'Contact Us'}\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/resources/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/commute/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":42,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport {\n  Car,\n  Train,\n  Bus,\n  Bike,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Clock,\n  MapPin,\n  Shield,\n  Hand,\n  Wind,\n  Quote\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${t('scenarios.commute.title')} - ${t('title')}`,\n    description: t('scenarios.commute.description'),\n  };\n}\n\nexport default async function CommuteScenarioPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const emergencyKit = [\n    {\n      item: locale === 'zh' ? 'éšå½¢çƒ­æ•·ç³»ç»Ÿ' : 'Invisible Heat System',\n      description: locale === 'zh' ? 'å¯ç²˜è´´æš–å®å®ï¼ˆThermaCareéšå½¢è´´ç‰‡ï¼‰' : 'Adhesive heat patches (ThermaCare invisible patches)',\n      usage: locale === 'zh' ? 'è´´åœ¨è…¹éƒ¨æˆ–è…°éƒ¨ï¼ŒæŒç»­å‘çƒ­6å°æ—¶' : 'Apply to abdomen or lower back, continuous heat for 6 hours'\n    },\n    {\n      item: locale === 'zh' ? 'è¿·ä½ ç”µçƒ­æŠ¤è…°' : 'Mini Electric Heating Pad',\n      description: locale === 'zh' ? 'USBå……ç”µæ¬¾ï¼Œä¼šè®®ä¸­å¯ç©¿æˆ´' : 'USB rechargeable, wearable during meetings',\n      usage: locale === 'zh' ? 'éšè”½ç©¿æˆ´ï¼Œæ¸©åº¦å¯è°ƒèŠ‚' : 'Discreet wear, adjustable temperature'\n    },\n    {\n      item: locale === 'zh' ? 'å§œèŒ¶å†²å‰‚æ¡' : 'Ginger Tea Sachets',\n      description: locale === 'zh' ? 'æ— ç³–é…æ–¹ï¼Œ30ç§’é€Ÿæº¶' : 'Sugar-free formula, dissolves in 30 seconds',\n      usage: locale === 'zh' ? 'ç”¨æ¸©æ°´å†²æ³¡ï¼Œç¼“è§£ç—‰æŒ›' : 'Mix with warm water, relieves cramps'\n    },\n    {\n      item: locale === 'zh' ? 'ç©´ä½æŒ‰æ‘©å·¥å…·' : 'Acupressure Tools',\n      description: locale === 'zh' ? 'å†…å…³ç©´æŒ‰æ‘©æˆ’æŒ‡ï¼ˆéšå½¢è®¾è®¡ï¼‰' : 'Neiguan point massage ring (invisible design)',\n      usage: locale === 'zh' ? 'å•æ‰‹æ“ä½œï¼Œéšè”½æŒ‰å‹' : 'One-handed operation, discreet pressure'\n    }\n  ];\n\n  const transportStrategies = [\n    {\n      type: locale === 'zh' ? 'åœ°é“/å…¬äº¤' : 'Subway/Bus',\n      icon: <Train className=\"w-6 h-6\" />,\n      color: 'bg-blue-50 text-blue-600',\n      strategies: [\n        locale === 'zh' ? 'é€‰æ‹©ä¸­é—´è½¦å¢ï¼ˆå‡å°‘åŠ å‡é€Ÿæƒ¯æ€§å†²å‡»ï¼‰' : 'Choose middle cars (reduce acceleration/deceleration impact)',\n        locale === 'zh' ? 'ä¼˜å…ˆåº§æ™ºèƒ½ç”³è¯·ï¼ˆç»æœŸç”µå­å‡­è¯ï¼‰' : 'Priority seat smart application (period electronic certificate)',\n        locale === 'zh' ? 'é å¢™éª¨ç›†æ”¯æ’‘æ³•ï¼šå¾®å±ˆè†é¡¶ä½è½¦å¢å£' : 'Wall pelvic support method: slightly bend knees against carriage wall',\n        locale === 'zh' ? 'ä½©æˆ´é™å™ªè€³æœºæ’­æ”¾432Hzé•‡ç—›éŸ³é¢‘' : 'Wear noise-canceling headphones with 432Hz pain relief audio'\n      ]\n    },\n    {\n      type: locale === 'zh' ? 'è‡ªé©¾å‡ºè¡Œ' : 'Self-Driving',\n      icon: <Car className=\"w-6 h-6\" />,\n      color: 'bg-green-50 text-green-600',\n      strategies: [\n        locale === 'zh' ? 'åº§æ¤…åŠ çƒ­+è…°æ¤æ°”å«ï¼ˆæ¯30åˆ†é’Ÿè‡ªåŠ¨å……æ”¾æ°”ï¼‰' : 'Seat heating + lumbar air cushion (auto inflate/deflate every 30 min)',\n        locale === 'zh' ? 'æ–¹å‘ç›˜ç”Ÿå‘½ä½“å¾ç›‘æµ‹' : 'Steering wheel vital signs monitoring',\n        locale === 'zh' ? 'è½¦è½½è¿·ä½ å¾®æ³¢ç‚‰ï¼ˆåŠ çƒ­æš–å®«è´´ï¼‰' : 'Car mini microwave (heat warming patches)',\n        locale === 'zh' ? 'é¿å…ç–¼ç—›æ—¶å¼ºè¡Œé©¾é©¶ï¼ˆååº”é€Ÿåº¦ä¸‹é™30%ï¼‰' : 'Avoid forced driving during pain (reaction speed decreases 30%)'\n      ]\n    },\n    {\n      type: locale === 'zh' ? 'å…±äº«å•è½¦' : 'Bike Sharing',\n      icon: <Bike className=\"w-6 h-6\" />,\n      color: 'bg-orange-50 text-orange-600',\n      strategies: [\n        locale === 'zh' ? 'ç¡…èƒ¶åå«å¥—ï¼ˆå‡éœ‡+æ’æ¸©ï¼‰' : 'Silicone seat cover (shock absorption + constant temperature)',\n        locale === 'zh' ? 'æŸè…¹å¸¦ç¨³å®šæ ¸å¿ƒï¼ˆé˜²éª‘è¡Œæ™ƒåŠ¨ï¼‰' : 'Abdominal belt for core stability (prevent riding sway)',\n        locale === 'zh' ? 'å•æ¬¡ä¸è¶…è¿‡20åˆ†é’Ÿï¼Œä¸­é€”ä¼‘æ¯' : 'No more than 20 minutes per session, rest in between',\n        locale === 'zh' ? 'è°ƒæ•´åº§æ¤…é«˜åº¦å‡å°‘ä¼šé˜´å‹è¿«' : 'Adjust seat height to reduce perineal pressure'\n      ]\n    },\n    {\n      type: locale === 'zh' ? 'ç½‘çº¦è½¦/å‡ºç§Ÿè½¦' : 'Ride-hailing/Taxi',\n      icon: <Bus className=\"w-6 h-6\" />,\n      color: 'bg-purple-50 text-purple-600',\n      strategies: [\n        locale === 'zh' ? 'åº§æ¤…åŠ çƒ­ç­‰çº§è®¾å®šï¼ˆé€šè¿‡APPæå‰å‘é€æŒ‡ä»¤ï¼‰' : 'Seat heating level setting (send instructions via app in advance)',\n        locale === 'zh' ? 'ç©ºæ°”å‡€åŒ–æ¨¡å¼ï¼ˆè¿‡æ»¤PM2.5ä¸æŒ¥å‘æ€§ç‰©è´¨ï¼‰' : 'Air purification mode (filter PM2.5 and volatile substances)',\n        locale === 'zh' ? 'é€‰æ‹©\"èˆ’é€‚å‹\"è½¦å‹ï¼ˆç©ºé—´å®½æ•ï¼‰' : 'Choose \"comfort\" vehicle type (spacious)',\n        locale === 'zh' ? 'ä½¿ç”¨\"åŒ»ç–—ç´§æ€¥æ¨¡å¼\"ï¼ˆéƒ¨åˆ†APPæ”¯æŒï¼‰' : 'Use \"medical emergency mode\" (supported by some apps)'\n      ]\n    }\n  ];\n\n  const timeManagement = [\n    {\n      phase: locale === 'zh' ? 'å‡ºå‘å‰20åˆ†é’Ÿ' : '20 Minutes Before Departure',\n      actions: [\n        locale === 'zh' ? 'é¥®ç”¨300mlç”Ÿå§œè‚‰æ¡‚é¥®' : 'Drink 300ml ginger cinnamon beverage',\n        locale === 'zh' ? 'è´´æ•·è¿œçº¢å¤–æš–å®«è´´ï¼ˆæŒç»­å‘çƒ­6å°æ—¶ï¼‰' : 'Apply far-infrared warming patches (6-hour continuous heat)',\n        locale === 'zh' ? 'æœç”¨æ­¢ç—›è¯ï¼ˆæå‰æœç”¨æ›´æœ‰æ•ˆï¼‰' : 'Take pain medication (more effective when taken in advance)'\n      ]\n    },\n    {\n      phase: locale === 'zh' ? 'é€šå‹¤é€”ä¸­' : 'During Commute',\n      actions: [\n        locale === 'zh' ? 'å•è„šè¸©å°é˜¶å½¢æˆéª¨ç›†å€¾æ–œï¼ˆç¼“è§£è…°ç—›ï¼‰' : 'Step on platform with one foot to create pelvic tilt (relieves back pain)',\n        locale === 'zh' ? 'æ‰‹æ‹‰åŠç¯æ—¶è½»å¾®æ‹‰ä¼¸ä¾§è…°è‚Œç¾¤' : 'Gently stretch side waist muscles when holding handrails',\n        locale === 'zh' ? '4-7-8å‘¼å¸æ³•ï¼šå¸æ°”4ç§’â†’å±æ¯7ç§’â†’å‘¼æ°”8ç§’' : '4-7-8 breathing: inhale 4 sec â†’ hold 7 sec â†’ exhale 8 sec'\n      ]\n    },\n    {\n      phase: locale === 'zh' ? 'åˆ°è¾¾å10åˆ†é’Ÿ' : '10 Minutes After Arrival',\n      actions: [\n        locale === 'zh' ? 'è¿›è¡Œ3åˆ†é’Ÿéª¨ç›†å¤ä½æ“' : 'Perform 3-minute pelvic reset exercises',\n        locale === 'zh' ? 'é å¢™æ·±è¹²ï¼ˆæ¿€æ´»è‡€è‚Œï¼‰' : 'Wall squats (activate glutes)',\n        locale === 'zh' ? 'è„ŠæŸ±é€èŠ‚ä¼¸å±•ï¼ˆæ”¹å–„å¾ªç¯ï¼‰' : 'Spinal segmental stretching (improve circulation)'\n      ]\n    }\n  ];\n\n  const emergencyPlans = [\n    {\n      situation: locale === 'zh' ? 'çªå‘ç–¼ç—›å‡çº§' : 'Sudden Pain Escalation',\n      solutions: [\n        locale === 'zh' ? 'åœ°é“/å…¬äº¤ï¼šå¯åŠ¨\"å‡è£…ä½è¡€ç³–\"é¢„æ¡ˆ' : 'Subway/Bus: Activate \"fake hypoglycemia\" plan',\n        locale === 'zh' ? 'å«æœè‘¡è„ç³–ç‰‡+è¯·æ±‚è®©åº§' : 'Take glucose tablets + request seat',\n        locale === 'zh' ? 'ç½‘çº¦è½¦ï¼šä½¿ç”¨\"åŒ»ç–—ç´§æ€¥æ¨¡å¼\"' : 'Ride-hailing: Use \"medical emergency mode\"'\n      ]\n    },\n    {\n      situation: locale === 'zh' ? 'å«ç”Ÿç”¨å“çŸ­ç¼º' : 'Sanitary Product Shortage',\n      solutions: [\n        locale === 'zh' ? 'ä¾¿åˆ©åº—é€Ÿè´­ï¼šå‘åº—å‘˜å‡ºç¤º\"Code Red\"æ‰‹åŠ¿' : 'Convenience store quick purchase: Show \"Code Red\" gesture to clerk',\n        locale === 'zh' ? 'å…±äº«å«ç”Ÿå·¾æœºï¼šåœ°å›¾å¯¼èˆªè‡³æœ€è¿‘ç½‘ç‚¹' : 'Shared sanitary pad machine: Navigate to nearest location',\n        locale === 'zh' ? 'å‚ä¸å•†å®¶æä¾›å…è´¹åº”æ€¥åŒ…' : 'Participating merchants provide free emergency kits'\n      ]\n    },\n    {\n      situation: locale === 'zh' ? 'è¡£ç‰©æ±¡æŸ“å¤„ç†' : 'Clothing Contamination',\n      solutions: [\n        locale === 'zh' ? 'å–·æ´’å«é…¶é¢„å¤„ç†å‰‚ï¼ˆåˆ†è§£è¡€æ¸è›‹ç™½ï¼‰' : 'Spray enzyme pre-treatment agent (breaks down blood protein)',\n        locale === 'zh' ? 'ç”¨å†·æ°´è½»æ‹ï¼ˆç¦ç”¨çƒ­æ°´ï¼ï¼‰' : 'Gently pat with cold water (no hot water!)',\n        locale === 'zh' ? 'å¤–å¥—åç³»è…°é—´ï¼ˆæ—¶å°šä¼ªè£…æ³•ï¼‰' : 'Tie jacket around waist backwards (fashionable camouflage)'\n      ]\n    }\n  ];\n\n  // é€šå‹¤ç©´ä½æŒ‰å‹æŠ€å·§\n  const commuteAcupressure = [\n    {\n      name: locale === 'zh' ? 'åˆè°·ç©´' : 'Hegu Point',\n      location: locale === 'zh' ? 'è™å£å¤„ï¼Œæ‹‡æŒ‡å’Œé£ŸæŒ‡ä¹‹é—´' : 'Tiger mouth area, between thumb and index finger',\n      benefits: locale === 'zh' ? 'ç–è‚ç†æ°”ã€æ´»è¡€åŒ–ç˜€ï¼Œé€šç”¨æ€§å¼º' : 'Soothes liver qi, promotes blood circulation, highly versatile',\n      technique: locale === 'zh' ? 'æ‹‡æŒ‡æˆ–é£ŸæŒ‡æŒ‡è…¹ç‚¹æŒ‰ã€æ‰æŒ‰ï¼ŒåŠ›åº¦é€‚ä¸­' : 'Press and rub with thumb or index finger pad, moderate pressure',\n      commuteUse: locale === 'zh' ? 'åœ¨åŒ…åŒ…ä¸‹ã€è¡£ç‰©é®æŒ¡ä¸‹éšè”½è¿›è¡Œï¼Œåˆ©ç”¨æ‰¶æ‰‹æˆ–é èƒŒååŠ©' : 'Perform discreetly under bag or clothing, use handrails or backrests for assistance',\n      userQuote: locale === 'zh' ? '\"æŒ¤åœ°é“å·²ç»å¤Ÿç´¯äº†ï¼Œç—›ç»ä¸€æ¥çœŸæ˜¯é›ªä¸ŠåŠ éœœï¼Œåªæƒ³å¿«ç‚¹åˆ°å®¶èººå¹³ã€‚\"' : '\"The subway is already exhausting, and when period pain hits, it\\'s just adding insult to injury. I just want to get home and lie down.\"'\n    },\n    {\n      name: locale === 'zh' ? 'å†…å…³ç©´' : 'Neiguan Point',\n      location: locale === 'zh' ? 'æ‰‹è…•å†…ä¾§ï¼Œè·ç¦»è…•æ¨ªçº¹çº¦ä¸‰æŒ‡å®½' : 'Inner side of wrist, about three fingers width from wrist crease',\n      benefits: locale === 'zh' ? 'ç¼“è§£æ¶å¿ƒã€å¿ƒçƒ¦ç­‰ä¼´éšç—‡çŠ¶ï¼Œè°ƒèŠ‚æƒ…ç»ª' : 'Relieves nausea, irritability and other accompanying symptoms, regulates emotions',\n      technique: locale === 'zh' ? 'ç”¨æ‹‡æŒ‡æŒ‰å‹ï¼Œå¯é‡‡ç”¨æ–­ç»­æˆ–æŒç»­æŒ‰å‹' : 'Press with thumb, can use intermittent or continuous pressure',\n      commuteUse: locale === 'zh' ? 'å¯åœ¨æ¡æ‰¶æ‰‹æ—¶åŒæ—¶è¿›è¡Œï¼Œéå¸¸éšè”½' : 'Can be done while holding handrails, very discreet',\n      userQuote: locale === 'zh' ? '\"å¼€è½¦æ—¶è‚šå­ç—›ï¼Œä¼šå½±å“æ³¨æ„åŠ›ï¼Œæ„Ÿè§‰å¾ˆå±é™©ã€‚ä½†åˆä¸èƒ½éšä¾¿åœä¸‹æ¥ã€‚\"' : '\"Stomach pain while driving affects concentration and feels dangerous. But I can\\'t just stop anywhere.\"'\n    },\n    {\n      name: locale === 'zh' ? 'å¤ªå†²ç©´' : 'Taichong Point',\n      location: locale === 'zh' ? 'è¶³èƒŒï¼Œå¤§è„šè¶¾å’ŒäºŒè„šè¶¾ä¹‹é—´å‘ä¸Šçº¦ä¸€æŒ‡å®½' : 'Top of foot, about one finger width up between big toe and second toe',\n      benefits: locale === 'zh' ? 'ç–è‚ç†æ°”ã€è¡Œæ°”æ­¢ç—›ï¼Œä¸“é—¨é’ˆå¯¹æƒ…ç»ªæ³¢åŠ¨' : 'Soothes liver qi, promotes qi circulation and pain relief, specifically for mood swings',\n      technique: locale === 'zh' ? 'è„±æ‰é‹å­ï¼Œç”¨æ‹‡æŒ‡æŒ‰å‹ï¼Œé…åˆæ·±å‘¼å¸' : 'Remove shoes, press with thumb, coordinate with deep breathing',\n      commuteUse: locale === 'zh' ? 'é€‚åˆåç€æ—¶è¿›è¡Œï¼Œå¯åœ¨åº§ä½ä¸Šæ‚„æ‚„è„±é‹æŒ‰å‹' : 'Suitable when sitting, can quietly remove shoes and press while seated',\n      userQuote: locale === 'zh' ? '\"åœ¨åœ°é“é‡ŒæŒ‰äº†å¤ªå†²ç©´ï¼Œæ„Ÿè§‰æƒ…ç»ªå¹³é™äº†å¾ˆå¤šï¼Œç–¼ç—›ä¹Ÿå‡è½»äº†ã€‚\"' : '\"Pressing Taichong point on the subway made me feel much calmer emotionally, and the pain was also reduced.\"'\n    }\n  ];\n\n  // é©¾è½¦å‘¼å¸æ”¾æ¾æ–¹æ³•\n  const drivingBreathingTechniques = [\n    {\n      name: locale === 'zh' ? 'æ–¹æ¡†å‘¼å¸æ³•' : 'Box Breathing',\n      description: locale === 'zh' ? '4-4-4-4èŠ‚å¥ï¼Œå¸®åŠ©è°ƒèŠ‚è‡ªä¸»ç¥ç»ç³»ç»Ÿ' : '4-4-4-4 rhythm, helps regulate autonomic nervous system',\n      steps: [\n        locale === 'zh' ? 'å¸æ°”4ç§’ï¼ˆè‚šå­é¼“èµ·ï¼‰' : 'Inhale 4 seconds (belly rises)',\n        locale === 'zh' ? 'å±æ°”4ç§’' : 'Hold breath 4 seconds',\n        locale === 'zh' ? 'å‘¼æ°”4ç§’ï¼ˆè‚šå­æ”¶å›ï¼‰' : 'Exhale 4 seconds (belly falls)',\n        locale === 'zh' ? 'å±æ°”4ç§’ï¼Œé‡å¤å¾ªç¯' : 'Hold breath 4 seconds, repeat cycle'\n      ],\n      benefits: locale === 'zh' ? 'é™ä½å¿ƒç‡å’Œå‹åŠ›ï¼Œç¼“è§£è‚Œè‚‰ç´§å¼ ' : 'Reduces heart rate and stress, relieves muscle tension',\n      safetyTip: locale === 'zh' ? 'åªåœ¨ç­‰çº¢ç¯æˆ–å®‰å…¨åœè½¦æ—¶è¿›è¡Œå®Œæ•´ç»ƒä¹ ' : 'Only practice fully when stopped at red lights or safely parked'\n    },\n    {\n      name: locale === 'zh' ? 'è…¹å¼å‘¼å¸' : 'Diaphragmatic Breathing',\n      description: locale === 'zh' ? 'ä¸“æ³¨äºè…¹éƒ¨èµ·ä¼ï¼Œä¿ƒè¿›è¡€æ¶²å¾ªç¯' : 'Focus on abdominal movement, promotes blood circulation',\n      steps: [\n        locale === 'zh' ? 'ä¸€æ‰‹æ”¾èƒ¸éƒ¨ï¼Œä¸€æ‰‹æ”¾è…¹éƒ¨' : 'One hand on chest, one hand on abdomen',\n        locale === 'zh' ? 'å¸æ°”æ—¶è…¹éƒ¨æ‰‹ä¸Šå‡ï¼Œèƒ¸éƒ¨æ‰‹ä¿æŒä¸åŠ¨' : 'When inhaling, abdominal hand rises, chest hand stays still',\n        locale === 'zh' ? 'å‘¼æ°”æ—¶è…¹éƒ¨æ‰‹ä¸‹é™' : 'When exhaling, abdominal hand falls',\n        locale === 'zh' ? 'ä¿æŒç¼“æ…¢æ·±é•¿çš„å‘¼å¸èŠ‚å¥' : 'Maintain slow, deep breathing rhythm'\n      ],\n      benefits: locale === 'zh' ? 'å¢åŠ æ°§æ°”ä¾›åº”ï¼Œç¼“è§£è…¹éƒ¨ç—‰æŒ›' : 'Increases oxygen supply, relieves abdominal cramps',\n      safetyTip: locale === 'zh' ? 'å¯åœ¨é©¾é©¶ä¸­è¿›è¡Œï¼Œä½†æ³¨æ„åŠ›ä»éœ€é›†ä¸­åœ¨è·¯å†µ' : 'Can be done while driving, but attention must remain on road conditions'\n    }\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 md:space-y-12\" data-page=\"scenario-commute\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">{t('scenarios.commute.title')}</span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <div className=\"w-16 h-16 bg-green-50 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <Car className=\"w-8 h-8\" />\n        </div>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('scenarios.commute.title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('scenarios.commute.description')}\n        </p>\n      </header>\n\n      {/* Emergency Kit Section */}\n      <section className=\"bg-gradient-to-br from-green-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"flex items-center mb-6\">\n          <AlertTriangle className=\"w-6 h-6 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'é€šå‹¤åº”æ€¥å·¥å…·åŒ…' : 'Commute Emergency Kit'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {emergencyKit.map((kit, index) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n                {kit.item}\n              </h3>\n              <p className=\"text-neutral-600 mb-3\">\n                {kit.description}\n              </p>\n              <div className=\"flex items-start\">\n                <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                <span className=\"text-sm text-neutral-700\">{kit.usage}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Transport Strategies Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <MapPin className=\"w-6 h-6 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'äº¤é€šæ–¹å¼é€‚é…ç­–ç•¥' : 'Transport Mode Adaptation Strategies'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {transportStrategies.map((transport, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"flex items-center mb-4\">\n                <div className={`w-12 h-12 rounded-full flex items-center justify-center ${transport.color} mr-4`}>\n                  {transport.icon}\n                </div>\n                <h3 className=\"text-lg font-semibold text-neutral-800\">\n                  {transport.type}\n                </h3>\n              </div>\n              \n              <ul className=\"space-y-3\">\n                {transport.strategies.map((strategy, strategyIndex) => (\n                  <li key={strategyIndex} className=\"flex items-start\">\n                    <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-sm text-neutral-700\">{strategy}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Time Management Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Clock className=\"w-6 h-6 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'é€šå‹¤æ—¶æ®µç®¡ç†æŒ‡å—' : 'Commute Time Management Guide'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {timeManagement.map((phase, index) => (\n            <div key={index} className=\"card\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n                {phase.phase}\n              </h3>\n              <ul className=\"space-y-3\">\n                {phase.actions.map((action, actionIndex) => (\n                  <li key={actionIndex} className=\"flex items-start\">\n                    <span className=\"w-5 h-5 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                      {actionIndex + 1}\n                    </span>\n                    <span className=\"text-sm text-neutral-700\">{action}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Emergency Plans Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Shield className=\"w-6 h-6 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'æç«¯æƒ…å†µåº”æ€¥é¢„æ¡ˆ' : 'Emergency Response Plans'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-1 gap-6\">\n          {emergencyPlans.map((plan, index) => (\n            <div key={index} className=\"card\">\n              <h3 className=\"text-lg font-semibold text-red-700 mb-4\">\n                {plan.situation}\n              </h3>\n              <ul className=\"space-y-3\">\n                {plan.solutions.map((solution, solutionIndex) => (\n                  <li key={solutionIndex} className=\"flex items-start\">\n                    <AlertTriangle className=\"w-4 h-4 text-red-500 mr-2 mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-sm text-neutral-700\">{solution}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Acupressure Points Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Hand className=\"w-6 h-6 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'åœ°é“/å…¬äº¤ç©´ä½æŒ‰å‹æŠ€å·§' : 'Subway/Bus Acupressure Techniques'}\n          </h2>\n        </div>\n        <p className=\"text-neutral-600 mb-8\">\n          {locale === 'zh' ? 'åœ¨æ‹¥æŒ¤çš„ç©ºé—´é‡Œï¼Œè¿™äº›ç®€å•æ˜“å­¦ã€éšæ—¶éšåœ°å¯è¡Œçš„ç©´ä½æŒ‰å‹æŠ€å·§ï¼Œèƒ½å¿«é€Ÿç¼“è§£é€šå‹¤ä¸­çš„ç–¼ç—›ã€‚' : 'In crowded spaces, these simple and easy-to-learn acupressure techniques can quickly relieve pain during commuting.'}\n        </p>\n\n        <div className=\"space-y-8\">\n          {commuteAcupressure.map((point, index) => (\n            <div key={index} className=\"bg-gradient-to-br from-green-50 to-neutral-50 p-6 rounded-xl\">\n              <h3 className=\"text-xl font-semibold text-neutral-800 mb-4\">\n                {point.name}\n              </h3>\n\n              {/* User Quote */}\n              <div className=\"bg-white p-4 rounded-lg mb-6 border-l-4 border-green-300\">\n                <div className=\"flex items-start\">\n                  <Quote className=\"w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                  <p className=\"text-neutral-700 italic text-sm leading-relaxed\">\n                    {point.userQuote}\n                  </p>\n                </div>\n                <p className=\"text-xs text-neutral-500 mt-2\">\n                  {locale === 'zh' ? 'â€”â€” æ¥è‡ªç”¨æˆ·è¯­å½•' : 'â€”â€” From user testimonials'}\n                </p>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-medium text-neutral-700 mb-2\">\n                      {locale === 'zh' ? 'ä½ç½®ï¼š' : 'Location:'}\n                    </h4>\n                    <p className=\"text-neutral-600 text-sm\">{point.location}</p>\n                  </div>\n\n                  <div>\n                    <h4 className=\"font-medium text-neutral-700 mb-2\">\n                      {locale === 'zh' ? 'åŠŸæ•ˆï¼š' : 'Benefits:'}\n                    </h4>\n                    <p className=\"text-neutral-600 text-sm\">{point.benefits}</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-medium text-neutral-700 mb-2\">\n                      {locale === 'zh' ? 'æŒ‰å‹æ–¹æ³•ï¼š' : 'Technique:'}\n                    </h4>\n                    <p className=\"text-neutral-600 text-sm\">{point.technique}</p>\n                  </div>\n\n                  <div className=\"bg-green-100 p-3 rounded-lg\">\n                    <h4 className=\"font-medium text-green-800 mb-1 text-sm\">\n                      {locale === 'zh' ? 'é€šå‹¤åº”ç”¨ï¼š' : 'Commute Application:'}\n                    </h4>\n                    <p className=\"text-green-700 text-sm\">{point.commuteUse}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Driving Breathing Techniques Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Wind className=\"w-6 h-6 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'é©¾è½¦åœºæ™¯å‘¼å¸æ”¾æ¾æ–¹æ³•' : 'Driving Breathing Relaxation Methods'}\n          </h2>\n        </div>\n        <p className=\"text-neutral-600 mb-8\">\n          {locale === 'zh' ? 'å¼€è½¦éœ€è¦é«˜åº¦ä¸“æ³¨ï¼Œç»æœŸç–¼ç—›å¯èƒ½è®©ä½ åˆ†å¿ƒã€‚å­¦ä¼šè¿™äº›ç®€å•çš„å‘¼å¸æŠ€å·§ï¼Œå¸®åŠ©ä½ åœ¨é©¾é©¶æ—¶ç¼“è§£ä¸é€‚ï¼Œä¿éšœå®‰å…¨ã€‚' : 'Driving requires high concentration, and period pain can be distracting. Learn these simple breathing techniques to help relieve discomfort while driving and ensure safety.'}\n        </p>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {drivingBreathingTechniques.map((technique, index) => (\n            <div key={index} className=\"card\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n                {technique.name}\n              </h3>\n\n              <p className=\"text-neutral-600 mb-4 text-sm\">\n                {technique.description}\n              </p>\n\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium text-neutral-700 mb-2 text-sm\">\n                  {locale === 'zh' ? 'æ­¥éª¤ï¼š' : 'Steps:'}\n                </h4>\n                <ol className=\"space-y-2\">\n                  {technique.steps.map((step, stepIndex) => (\n                    <li key={stepIndex} className=\"flex items-start text-sm text-neutral-700\">\n                      <span className=\"w-5 h-5 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                        {stepIndex + 1}\n                      </span>\n                      {step}\n                    </li>\n                  ))}\n                </ol>\n              </div>\n\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium text-neutral-700 mb-2 text-sm\">\n                  {locale === 'zh' ? 'ç›Šå¤„ï¼š' : 'Benefits:'}\n                </h4>\n                <p className=\"text-neutral-600 text-sm\">{technique.benefits}</p>\n              </div>\n\n              <div className=\"bg-red-50 p-3 rounded-lg\">\n                <h4 className=\"font-medium text-red-800 mb-1 text-sm\">\n                  {locale === 'zh' ? 'å®‰å…¨æç¤ºï¼š' : 'Safety Tip:'}\n                </h4>\n                <p className=\"text-red-700 text-sm\">{technique.safetyTip}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n          <h4 className=\"font-semibold text-blue-800 mb-2\">\n            {locale === 'zh' ? 'ç§‘å­¦ä¾æ®' : 'Scientific Basis'}\n          </h4>\n          <p className=\"text-blue-700 text-sm\">\n            {locale === 'zh' ? 'æ·±å‘¼å¸ç»ƒä¹ é€šè¿‡è°ƒèŠ‚è‡ªä¸»ç¥ç»ç³»ç»Ÿï¼Œé™ä½å¿ƒç‡å’Œå‹åŠ›ååº”ï¼Œç¼“è§£è‚Œè‚‰ç´§å¼ ã€‚ç ”ç©¶è¡¨æ˜ï¼Œè§„å¾‹çš„å‘¼å¸ç»ƒä¹ å¯ä»¥ä¿ƒè¿›å†…å•¡è‚½é‡Šæ”¾ï¼Œè¿™æ˜¯äººä½“å¤©ç„¶çš„æ­¢ç—›ç‰©è´¨ã€‚' : 'Deep breathing exercises regulate the autonomic nervous system, reducing heart rate and stress response, relieving muscle tension. Research shows that regular breathing exercises can promote endorphin release, the body\\'s natural painkillers.'}\n          </p>\n        </div>\n      </section>\n\n      {/* Safety Tips */}\n      <section className=\"bg-yellow-50 p-6 md:p-8 rounded-xl\">\n        <h3 className=\"text-lg font-semibold text-yellow-800 mb-4\">\n          {locale === 'zh' ? 'å®‰å…¨æç¤º' : 'Safety Tips'}\n        </h3>\n        <ul className=\"space-y-2 text-sm text-yellow-700\">\n          <li>â€¢ {locale === 'zh' ? 'è¯ç‰©æºå¸¦ï¼šå¸ƒæ´›èŠ¬éœ€åŸåŒ…è£…æºå¸¦ï¼Œé¿å…æ•£è£…è¯å“å¼•å‘å®‰æ£€ç–‘é—®' : 'Medication carrying: Ibuprofen should be carried in original packaging to avoid security questions'}</li>\n          <li>â€¢ {locale === 'zh' ? 'éšç§ä¿æŠ¤ï¼šä½¿ç”¨åˆ†è£…ç›’å­˜æ”¾å«ç”Ÿç”¨å“ï¼Œé¿å…å¤–éœ²' : 'Privacy protection: Use compartment boxes to store sanitary products, avoid exposure'}</li>\n          <li>â€¢ {locale === 'zh' ? 'æ•°æ®è®°å½•ï¼šé€šå‹¤ç–¼ç—›å‘ä½œæ—¶ï¼Œç”¨APPè®°å½•\"ç–¼ç—›å¼€å§‹æ—¶é—´+äº¤é€šæ–¹å¼\"' : 'Data recording: When commute pain occurs, use app to record \"pain start time + transport mode\"'}</li>\n          <li>â€¢ {locale === 'zh' ? 'ä¸¥é‡ç–¼ç—›æ—¶ç¦æ­¢é©¾é©¶ï¼šç–¼ç—›å‰§çƒˆå½±å“é©¾é©¶å®‰å…¨æ—¶ï¼Œå¿…é¡»ç«‹å³é è¾¹åœè½¦ä¼‘æ¯æˆ–å¯»æ±‚å¸®åŠ©' : 'No driving during severe pain: When severe pain affects driving safety, must immediately pull over to rest or seek help'}</li>\n        </ul>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center\">\n        <Link \n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/emergency-kit/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport {\n  Package,\n  Briefcase,\n  Car,\n  Dumbbell,\n  Bed,\n  Users,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Info,\n  School,\n  Heart\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${locale === 'zh' ? 'å¤šåœºæ™¯åº”æ€¥åŒ…æ¸…å•' : 'Multi-Scenario Emergency Kit List'} - ${t('title')}`,\n    description: locale === 'zh' ? 'è¯¦ç»†çš„ç»æœŸåº”æ€¥åŒ…å‡†å¤‡æ¸…å•ï¼Œæ¶µç›–åŠå…¬ã€é€šå‹¤ã€è¿åŠ¨ã€ç¡çœ ã€ç¤¾äº¤ç­‰å„ç§åœºæ™¯' : 'Detailed period emergency kit preparation list covering office, commute, exercise, sleep, social and other scenarios',\n  };\n}\n\nexport default async function EmergencyKitPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const emergencyKitScenarios = [\n    {\n      scenario: locale === 'zh' ? 'é’å°‘å¹´/æ ¡å›­' : 'Teen/Campus',\n      icon: <School className=\"w-6 h-6\" />,\n      color: 'bg-pink-50 text-pink-600',\n      description: locale === 'zh' ? 'ä¸“ä¸º12-18å²é’å°‘å¹´è®¾è®¡çš„æ ¡å›­åº”æ€¥åŒ…ï¼Œå¸®åŠ©åœ¨å­¦æ ¡ã€å®¿èˆç­‰ç¯å¢ƒä¸­ä»å®¹åº”å¯¹ç»æœŸä¸é€‚ã€‚' : 'Campus emergency kit designed specifically for teens aged 12-18, helping handle period discomfort confidently in school, dorm, and other environments.',\n      items: [\n        {\n          item: locale === 'zh' ? 'è¿·ä½ çƒ­æ•·è´´/æš–å®å®' : 'Mini Heat Patches/Hand Warmers',\n          usage: locale === 'zh' ? 'è´´åœ¨å°è…¹æˆ–è…°éƒ¨ï¼Œéšæ—¶éšåœ°æä¾›æ¸©æš–ã€‚ä½“ç§¯å°å·§ï¼Œå¯ä»¥éšè”½ä½¿ç”¨ï¼Œä¸ä¼šå¼•èµ·åŒå­¦æ³¨æ„ã€‚ç‰¹åˆ«é€‚åˆåœ¨è¯¾å ‚ä¸Šä½¿ç”¨ã€‚' : 'Apply to abdomen or lower back for warmth anytime, anywhere. Compact size allows discreet use without attracting classmates\\' attention. Especially suitable for classroom use.',\n          tip: locale === 'zh' ? 'é€‰æ‹©å¯é•¿æ—¶é—´å‘çƒ­ä¸”æ’æ¸©çš„äº§å“ã€‚ç¡®ä¿éš”ç€è¡£ç‰©ä½¿ç”¨ï¼Œé¿å…ä½æ¸©çƒ«ä¼¤ã€‚å¯ä»¥åœ¨ä¸Šå­¦å‰è´´å¥½ã€‚' : 'Choose products with long-lasting, constant temperature heat. Use over clothing to avoid burns. Can apply before going to school.'\n        },\n        {\n          item: locale === 'zh' ? 'æ­¢ç—›è¯ï¼ˆå®¶é•¿åŒæ„ä¸‹ï¼‰' : 'Pain Medication (With Parental Consent)',\n          usage: locale === 'zh' ? 'åœ¨å®¶é•¿åŒæ„å’ŒæŒ‡å¯¼ä¸‹ï¼Œéšèº«æºå¸¦é€‚é‡çš„å®‰å…¨æ­¢ç—›è¯ã€‚åœ¨èº«ä½“åˆšæ„Ÿè§‰ä¸é€‚æ—¶æœç”¨ï¼Œæœ‰æ•ˆå¿«é€Ÿç¼“è§£ç–¼ç—›ã€‚' : 'Carry safe pain medication with parental consent and guidance. Take when body first feels discomfort for effective, quick pain relief.',\n          tip: locale === 'zh' ? 'åŠ¡å¿…åœ¨å®¶é•¿æˆ–åŒ»ç”ŸæŒ‡å¯¼ä¸‹ä½¿ç”¨ã€‚äº†è§£è¯å“çš„å‰‚é‡ã€æœç”¨æ—¶é—´ã€‚ä¸è¦ä¸åŒå­¦åˆ†äº«è¯ç‰©ã€‚' : 'Must use under parental or medical guidance. Understand dosage and timing. Do not share medication with classmates.'\n        },\n        {\n          item: locale === 'zh' ? 'çƒ­æ°´æ¯/ä¿æ¸©æ¯' : 'Hot Water Bottle/Thermos',\n          usage: locale === 'zh' ? 'å’Œå­¦æ ¡æ²Ÿé€šï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å…è®¸ç»æœŸç‰¹åˆ«ä¸èˆ’æœæ—¶ä½¿ç”¨ã€‚éšæ—¶è¡¥å……æ¸©æ°´ï¼Œæœ‰åŠ©äºç¼“è§£è…¹èƒ€å’Œè‚Œè‚‰ç´§å¼ ã€‚' : 'Communicate with school about using during particularly difficult periods. Replenish warm water anytime to help relieve bloating and muscle tension.',\n          tip: locale === 'zh' ? 'é€‰æ‹©ä¿æ¸©æ•ˆæœå¥½çš„æ¯å­ã€‚å¯ä»¥åœ¨è¯¾é—´æˆ–åˆä¼‘æ—¶ä½¿ç”¨ã€‚å¦‚æœå­¦æ ¡ä¸å…è®¸ï¼Œå¯ä»¥åœ¨è¯¾é—´å»é¥®æ°´å¤„å–æ¸©æ°´ã€‚' : 'Choose cups with good insulation. Can use during breaks or lunch. If school doesn\\'t allow, drink warm water at water stations during breaks.'\n        },\n        {\n          item: locale === 'zh' ? 'å°é›¶é£Ÿï¼ˆå·§å…‹åŠ›/ç³–æœï¼‰' : 'Small Snacks (Chocolate/Candy)',\n          usage: locale === 'zh' ? 'ä¸€å—å·§å…‹åŠ›æˆ–å°‘é‡ç³–æœï¼Œæœ‰æ—¶å€™èƒ½å¸®ä½ åˆ†æ•£æ³¨æ„åŠ›ï¼Œæä¾›èƒ½é‡ã€‚åœ¨æ„Ÿè§‰ç–²åŠ³æˆ–æƒ…ç»ªä½è½æ—¶é£Ÿç”¨ã€‚' : 'A piece of chocolate or small candy can help distract attention and provide energy. Eat when feeling tired or down.',\n          tip: locale === 'zh' ? 'é€‰æ‹©ç‹¬ç«‹åŒ…è£…ï¼Œæ–¹ä¾¿æºå¸¦ã€‚æ³¨æ„ä¸è¦åœ¨è¯¾å ‚ä¸Šé£Ÿç”¨ï¼Œå¯ä»¥åœ¨è¯¾é—´æˆ–åˆä¼‘æ—¶äº«ç”¨ã€‚' : 'Choose individually packaged for easy carrying. Don\\'t eat during class, enjoy during breaks or lunch.'\n        },\n        {\n          item: locale === 'zh' ? 'èˆ’é€‚çš„å¤‡ç”¨è¡£ç‰©' : 'Comfortable Spare Clothing',\n          usage: locale === 'zh' ? 'å‡†å¤‡ä¸€ä»¶å®½æ¾çš„å¤–å¥—æˆ–å›´å·¾ï¼Œåœ¨æ„Ÿè§‰å¯’å†·æˆ–éœ€è¦é¢å¤–ä¿æš–æ—¶ä½¿ç”¨ã€‚ä¹Ÿå¯ä»¥åœ¨è…¹éƒ¨ä¸é€‚æ—¶æä¾›å¿ƒç†å®‰æ…°ã€‚' : 'Prepare a loose jacket or scarf for when feeling cold or needing extra warmth. Can also provide psychological comfort when abdomen feels uncomfortable.',\n          tip: locale === 'zh' ? 'é€‰æ‹©å®¹æ˜“æ­é…çš„é¢œè‰²å’Œæ¬¾å¼ã€‚å¯ä»¥æ”¾åœ¨å®¿èˆæˆ–å‚¨ç‰©æŸœé‡Œå¤‡ç”¨ã€‚' : 'Choose colors and styles that are easy to match. Can keep in dorm or locker as backup.'\n        },\n        {\n          item: locale === 'zh' ? 'æ²Ÿé€šå¡ç‰‡/ä¾¿æ¡' : 'Communication Cards/Notes',\n          usage: locale === 'zh' ? 'æå‰å‡†å¤‡å¥½ç®€å•çš„ä¾¿æ¡ï¼Œå¦‚\"æˆ‘èº«ä½“ä¸å¤ªèˆ’æœï¼Œå¯ä»¥å»åŒ»åŠ¡å®¤å—ï¼Ÿ\"æ–¹ä¾¿åœ¨ä¸å¥½æ„æ€å¼€å£æ—¶ä½¿ç”¨ã€‚' : 'Prepare simple notes in advance, like \"I\\'m not feeling well, may I go to the nurse\\'s office?\" for use when too shy to speak up.',\n          tip: locale === 'zh' ? 'å¯ä»¥å‡†å¤‡ä¸­è‹±æ–‡ç‰ˆæœ¬ã€‚ä¹Ÿå¯ä»¥äº‹å…ˆå’Œä¿¡ä»»çš„åŒå­¦æˆ–è€å¸ˆæ²Ÿé€šï¼Œå»ºç«‹ç†è§£å’Œæ”¯æŒã€‚' : 'Can prepare Chinese and English versions. Also communicate with trusted classmates or teachers in advance to build understanding and support.'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'åŠå…¬/èŒåœº' : 'Office/Workplace',\n      icon: <Briefcase className=\"w-6 h-6\" />,\n      color: 'bg-blue-50 text-blue-600',\n      description: locale === 'zh' ? 'åœ¨åŠå…¬å®¤é¢å¯¹çªç„¶æ¥è¢­çš„ç»æœŸç–¼ç—›ï¼Œéœ€è¦å¿«é€Ÿã€ä¾¿æ·ä¸”ä¸å½±å“å·¥ä½œçš„æ–¹å¼æ¥ç¼“è§£ã€‚' : 'Facing sudden period pain in the office requires quick, convenient methods that don\\'t affect work.',\n      items: [\n        {\n          item: locale === 'zh' ? 'è¿·ä½ çƒ­æ•·è´´/æš–å®å®' : 'Mini Heat Patches/Hand Warmers',\n          usage: locale === 'zh' ? 'è´´åœ¨å°è…¹æˆ–è…°éƒ¨ã€‚æä¾›æŒç»­æ¸©æš–ï¼Œæ”¾æ¾è‚Œè‚‰ï¼Œç¼“è§£ç—‰æŒ›ã€‚ä½“ç§¯å°å·§ï¼Œæ–¹ä¾¿éšè”½ä½¿ç”¨ã€‚' : 'Apply to abdomen or lower back. Provides continuous warmth, relaxes muscles, relieves cramps. Compact size for discreet use.',\n          tip: locale === 'zh' ? 'é€‰æ‹©å¯é•¿æ—¶é—´å‘çƒ­ä¸”æ’æ¸©çš„äº§å“ã€‚ç¡®ä¿éš”ç€è¡£ç‰©ä½¿ç”¨ï¼Œé¿å…ä½æ¸©çƒ«ä¼¤ã€‚' : 'Choose products with long-lasting, constant temperature heat. Use over clothing to avoid low-temperature burns.'\n        },\n        {\n          item: locale === 'zh' ? 'éšèº«æ­¢ç—›è¯' : 'Portable Pain Medication',\n          usage: locale === 'zh' ? 'åœ¨èº«ä½“åˆšæ„Ÿè§‰ä¸é€‚æ—¶æœç”¨ã€‚æœ‰æ•ˆå¿«é€Ÿç¼“è§£ç–¼ç—›ã€‚åŠ¡å¿…åœ¨åŒ»ç”Ÿæˆ–è¯å¸ˆæŒ‡å¯¼ä¸‹æºå¸¦å’Œä½¿ç”¨ã€‚' : 'Take when body first feels discomfort. Effectively relieves pain quickly. Must carry and use under doctor or pharmacist guidance.',\n          tip: locale === 'zh' ? 'äº†è§£è¯å“çš„å‰‚é‡ã€æœç”¨æ—¶é—´å’Œå¯èƒ½çš„å‰¯ä½œç”¨ã€‚ä¸è¦æ“…è‡ªå¢åŠ å‰‚é‡ã€‚' : 'Understand dosage, timing, and possible side effects. Do not increase dosage without authorization.'\n        },\n        {\n          item: locale === 'zh' ? 'çº¢ç³–å§œèŒ¶åŒ…/é€Ÿæº¶æ¸©é¥®' : 'Brown Sugar Ginger Tea/Instant Warm Drinks',\n          usage: locale === 'zh' ? 'åœ¨èŒ¶æ°´é—´ç”¨çƒ­æ°´å†²æ³¡é¥®ç”¨ã€‚æ¸©çƒ­é¥®å“æœ‰åŠ©äºä¿ƒè¿›è¡€æ¶²å¾ªç¯ï¼Œç¼“è§£è…¹èƒ€å’Œå¯’å‡ã€‚' : 'Brew with hot water in tea room. Warm drinks help promote blood circulation, relieve bloating and cold stagnation.',\n          tip: locale === 'zh' ? 'é€‰æ‹©ç‹¬ç«‹åŒ…è£…ï¼Œæ–¹ä¾¿æºå¸¦å’Œå†²æ³¡ã€‚' : 'Choose individually packaged for easy carrying and brewing.'\n        },\n        {\n          item: locale === 'zh' ? 'å°å·§çš„æŒ‰æ‘©å·¥å…·' : 'Compact Massage Tools',\n          usage: locale === 'zh' ? 'åœ¨åŠå…¬æ¤…ä¸Šæˆ–ä¼‘æ¯æ—¶ï¼Œè½»æŸ”æŒ‰æ‘©è…°éƒ¨ã€æ‰‹éƒ¨ç©´ä½ã€‚åˆ†æ•£æ³¨æ„åŠ›ï¼Œç¼“è§£å±€éƒ¨è‚Œè‚‰ç´§å¼ ã€‚' : 'Gently massage waist and hand acupoints while in office chair or resting. Distracts attention, relieves local muscle tension.',\n          tip: locale === 'zh' ? 'æ— éœ€å¤§å¹…åº¦åŠ¨ä½œï¼Œå¯åœ¨è¡£æœä¸‹è¿›è¡Œã€‚' : 'No large movements needed, can be done under clothing.'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'é€šå‹¤' : 'Commute',\n      icon: <Car className=\"w-6 h-6\" />,\n      color: 'bg-green-50 text-green-600',\n      description: locale === 'zh' ? 'åœ¨è·¯ä¸Šé­é‡ç»æœŸä¸é€‚ï¼Œç‰¹åˆ«æ˜¯ä¹˜åå…¬å…±äº¤é€šæ—¶ï¼Œéœ€è¦å¿«é€Ÿã€ä¸å¼•äººæ³¨æ„çš„åº”æ€¥æ–¹æ³•ã€‚' : 'Encountering period discomfort on the road, especially on public transport, requires quick, discreet emergency methods.',\n      items: [\n        {\n          item: locale === 'zh' ? 'è¿·ä½ æš–å®å®' : 'Mini Hand Warmers',\n          usage: locale === 'zh' ? 'ä¸Šè·¯å‰è´´å¥½ã€‚é•¿æ—¶é—´æä¾›æ¸©æš–ï¼Œç‰¹åˆ«é€‚åˆé•¿æ—¶é—´ç«™ç«‹æˆ–åç€çš„é€šå‹¤ã€‚' : 'Apply before departure. Provides long-term warmth, especially suitable for long periods of standing or sitting during commute.',\n          tip: locale === 'zh' ? 'ç¡®ä¿ç²˜æ€§å¥½ä¸æ˜“è„±è½ã€‚' : 'Ensure good adhesion and won\\'t fall off easily.'\n        },\n        {\n          item: locale === 'zh' ? 'å°ç“¶æ¸©æ°´æˆ–ä¿æ¸©æ¯' : 'Small Bottle of Warm Water or Thermos',\n          usage: locale === 'zh' ? 'éšæ—¶è¡¥å……æ°´åˆ†ï¼Œå°å£é¥®ç”¨æ¸©æ°´ã€‚æ¸©æ°´æœ‰åŠ©äºç¼“è§£è…¹èƒ€å’Œè‚Œè‚‰ç´§å¼ ã€‚' : 'Replenish fluids anytime, sip warm water. Warm water helps relieve bloating and muscle tension.',\n          tip: locale === 'zh' ? 'å†¬å­£å°¤å…¶é‡è¦ã€‚å¦‚æœä¹˜åäº¤é€šå·¥å…·ä¸ä¾¿ï¼Œå¯åœ¨ä¸Šè½¦å‰æˆ–ä¸‹è½¦ååŠæ—¶è¡¥å……ã€‚' : 'Especially important in winter. If inconvenient on transport, replenish before boarding or after alighting.'\n        },\n        {\n          item: locale === 'zh' ? 'è€³æœº' : 'Headphones',\n          usage: locale === 'zh' ? 'å¬èˆ’ç¼“éŸ³ä¹ã€ç™½å™ªéŸ³æˆ–æ’­å®¢ã€‚åˆ†æ•£æ³¨æ„åŠ›ï¼Œå¹³é™æƒ…ç»ªã€‚' : 'Listen to soothing music, white noise, or podcasts. Distracts attention, calms emotions.',\n          tip: locale === 'zh' ? 'å¯å°è¯•å£°æ³¢ç–—æ³•ä¸­æ¨èçš„èˆ’ç¼“éŸ³é¢‘ã€‚' : 'Try soothing audio recommended in sound therapy.'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'è¿åŠ¨/æˆ·å¤–' : 'Exercise/Outdoor',\n      icon: <Dumbbell className=\"w-6 h-6\" />,\n      color: 'bg-orange-50 text-orange-600',\n      description: locale === 'zh' ? 'ç»æœŸé€‚åº¦è¿åŠ¨æœ‰ç›Šå¥åº·ï¼Œä½†åœ¨è¿åŠ¨ä¸­æˆ–æˆ·å¤–ç¯å¢ƒé­é‡ç–¼ç—›ï¼Œéœ€è¦ç‰¹åˆ«çš„å‡†å¤‡å’Œåº”å¯¹ã€‚' : 'Moderate exercise during menstruation is beneficial for health, but encountering pain during exercise or outdoor environments requires special preparation and response.',\n      items: [\n        {\n          item: locale === 'zh' ? 'è½»è–„é˜²é£å¤–å¥—' : 'Lightweight Windproof Jacket',\n          usage: locale === 'zh' ? 'è¿åŠ¨å‡ºæ±—ååŠæ—¶ç©¿ä¸Šï¼Œé¿å…å—å‡‰ã€‚ç‰¹åˆ«æ˜¯åœ¨æˆ·å¤–ç¯å¢ƒä¸­ã€‚' : 'Put on immediately after sweating from exercise to avoid catching cold. Especially important in outdoor environments.',\n          tip: locale === 'zh' ? 'å—å‡‰å¯èƒ½åŠ é‡ç–¼ç—›ã€‚é€‰æ‹©é€æ°”å¸æ¹¿æ’æ±—çš„ä¸“ä¸šè¿åŠ¨æœã€‚' : 'Catching cold may worsen pain. Choose breathable, moisture-wicking professional sportswear.'\n        },\n        {\n          item: locale === 'zh' ? 'ä¸ªäººå«ç”Ÿç”¨å“ï¼ˆè¿åŠ¨ä¸“ç”¨ï¼‰' : 'Personal Hygiene Products (Sports-specific)',\n          usage: locale === 'zh' ? 'å¦‚è¿åŠ¨å‹å«ç”Ÿå·¾/æ£‰æ¡/æœˆç»æ¯ã€‚ç¡®ä¿è¿åŠ¨ä¸­çš„é˜²æ¼å’Œèˆ’é€‚ã€‚' : 'Such as sports sanitary pads/tampons/menstrual cups. Ensure leak protection and comfort during exercise.',\n          tip: locale === 'zh' ? 'æ ¹æ®è¿åŠ¨å¼ºåº¦å’Œè‡ªèº«æµé‡é€‰æ‹©åˆé€‚çš„äº§å“ã€‚' : 'Choose appropriate products based on exercise intensity and personal flow.'\n        },\n        {\n          item: locale === 'zh' ? 'å……è¶³çš„é¥®ç”¨æ°´/ç”µè§£è´¨é¥®æ–™' : 'Adequate Drinking Water/Electrolyte Drinks',\n          usage: locale === 'zh' ? 'è¿åŠ¨ä¸­åŠæ—¶è¡¥å……æ°´åˆ†å’Œç”µè§£è´¨ã€‚é¿å…è„±æ°´ï¼Œæœ‰åŠ©äºèº«ä½“ç»´æŒæ­£å¸¸åŠŸèƒ½ï¼Œéƒ¨åˆ†ç¼“è§£ç–²åŠ³å’Œç—‰æŒ›ã€‚' : 'Replenish fluids and electrolytes during exercise. Avoid dehydration, helps body maintain normal function, partially relieves fatigue and cramps.',\n          tip: locale === 'zh' ? 'æ¸©æ°´æ›´ä½³ã€‚é¿å…ç©ºè…¹è¿åŠ¨ã€‚' : 'Warm water is better. Avoid exercising on an empty stomach.'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'ç¡çœ ' : 'Sleep',\n      icon: <Bed className=\"w-6 h-6\" />,\n      color: 'bg-purple-50 text-purple-600',\n      description: locale === 'zh' ? 'å¤œé—´çš„ç»æœŸç–¼ç—›ä¼šä¸¥é‡å½±å“ç¡çœ ï¼Œè‰¯å¥½çš„å‡†å¤‡æœ‰åŠ©äºå®‰ç¨³å…¥ç¡ã€‚' : 'Nighttime period pain can seriously affect sleep, good preparation helps ensure restful sleep.',\n      items: [\n        {\n          item: locale === 'zh' ? 'çƒ­æ°´è¢‹/ç”µçƒ­æ¯¯/æš–å®å®' : 'Hot Water Bottle/Electric Blanket/Hand Warmers',\n          usage: locale === 'zh' ? 'ç¡å‰æ•·åœ¨å°è…¹æˆ–è…°éƒ¨ã€‚æä¾›æŒç»­æ¸©æš–ï¼Œæ”¾æ¾è…¹éƒ¨è‚Œè‚‰ï¼Œæ˜¾è‘—ç¼“è§£ç—‰æŒ›ç—›æ„Ÿã€‚' : 'Apply to abdomen or lower back before sleep. Provides continuous warmth, relaxes abdominal muscles, significantly relieves cramping pain.',\n          tip: locale === 'zh' ? 'æ³¨æ„æ¸©åº¦ï¼Œé¿å…çƒ«ä¼¤ã€‚ç”µçƒ­æ¯¯/çƒ­æ°´è¢‹éœ€æ³¨æ„å®‰å…¨ä½¿ç”¨ã€‚æš–å®å®é€‚åˆæ•´å¤œä½¿ç”¨ã€‚' : 'Pay attention to temperature to avoid burns. Electric blankets/hot water bottles require safe use. Hand warmers are suitable for all-night use.'\n        },\n        {\n          item: locale === 'zh' ? 'æŠ±æ•æˆ–é å«' : 'Body Pillow or Cushion',\n          usage: locale === 'zh' ? 'ç¡è§‰æ—¶æ”¾åœ¨è†ä¸‹æˆ–æŠ±åœ¨æ€€é‡Œï¼ˆé…åˆå·¦ä¾§å§ï¼‰ã€‚å¸®åŠ©èº«ä½“ä¿æŒèˆ’é€‚å§¿åŠ¿ï¼Œå‡è½»è…¹éƒ¨å—å‹ã€‚' : 'Place under knees or hug while sleeping (with left side lying). Helps body maintain comfortable position, reduces abdominal pressure.',\n          tip: locale === 'zh' ? 'å¯ä»¥å°è¯•åœ¨åŒè…¿ä¸­é—´å¤¹ä¸€ä¸ªæŠ±æ•ï¼Œæˆ–å°†æŠ±æ•æ”¾åœ¨è…¹éƒ¨ä¸‹æ–¹æ”¯æ’‘ã€‚' : 'Try placing a pillow between legs or under abdomen for support.'\n        },\n        {\n          item: locale === 'zh' ? 'ç¡å‰åŠ©çœ éŸ³é¢‘' : 'Bedtime Sleep Audio',\n          usage: locale === 'zh' ? 'ç¡å‰æ’­æ”¾ï¼Œè°ƒèŠ‚ç¥ç»ï¼Œåˆ†æ•£å¯¹ç–¼ç—›çš„æ³¨æ„åŠ›ï¼Œå¸®åŠ©æ”¾æ¾å…¥ç¡ã€‚' : 'Play before sleep to regulate nerves, distract from pain, help relax and fall asleep.',\n          tip: locale === 'zh' ? 'å¯ä½©æˆ´èˆ’é€‚çš„è€³æœºã€‚é€‰æ‹©éŸ³é‡é€‚ä¸­ã€å†…å®¹å¹³é™çš„éŸ³é¢‘ã€‚' : 'Can wear comfortable headphones. Choose moderate volume, calm content audio.'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'ç¤¾äº¤' : 'Social',\n      icon: <Users className=\"w-6 h-6\" />,\n      color: 'bg-pink-50 text-pink-600',\n      description: locale === 'zh' ? 'å‚ä¸ç¤¾äº¤æ´»åŠ¨ï¼ˆå¦‚çº¦ä¼šã€èšä¼šã€å¤–å‡ºç”¨é¤ï¼‰æ—¶åº”å¯¹ç»æœŸä¸é€‚ï¼Œéœ€è¦å·§å¦™åº”å¯¹å’Œæå‰å‡†å¤‡ã€‚' : 'When participating in social activities (such as dates, parties, dining out) while dealing with period discomfort, requires clever handling and advance preparation.',\n      items: [\n        {\n          item: locale === 'zh' ? 'è¿·ä½ æš–å®å®' : 'Mini Hand Warmers',\n          usage: locale === 'zh' ? 'å¤–å‡ºå‰è´´å¥½ã€‚æä¾›æŒç»­æ¸©æš–ï¼Œä¸æ˜“è¢«ä»–äººå¯Ÿè§‰ã€‚' : 'Apply before going out. Provides continuous warmth, not easily noticed by others.',\n          tip: locale === 'zh' ? 'é€‰æ‹©ä½“ç§¯å°å·§ï¼Œè´´åˆæ€§å¥½çš„äº§å“ã€‚' : 'Choose compact products with good adhesion.'\n        },\n        {\n          item: locale === 'zh' ? 'èˆ’é€‚ä¸”ä¾¿äºè¡ŒåŠ¨çš„è¡£ç‰©' : 'Comfortable and Movement-friendly Clothing',\n          usage: locale === 'zh' ? 'é€‰æ‹©ä¸ä¼šå‹’ç´§è…¹éƒ¨ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºè¿›è¡Œä¸€äº›éšè”½çš„å°è°ƒæ•´çš„è¡£ç‰©ã€‚' : 'Choose clothing that doesn\\'t constrict the abdomen while allowing for discreet small adjustments.',\n          tip: locale === 'zh' ? 'ç¾è§‚ä¸èˆ’é€‚å…¼é¡¾ã€‚' : 'Balance beauty and comfort.'\n        },\n        {\n          item: locale === 'zh' ? 'ä¸€æ¡å°å·§èˆ’é€‚çš„å›´å·¾æˆ–æŠ«è‚©' : 'Small Comfortable Scarf or Shawl',\n          usage: locale === 'zh' ? 'åœ¨ç©ºè°ƒç¯å¢ƒæˆ–æ„Ÿåˆ°ç•å¯’æ—¶ä½¿ç”¨ã€‚ä¿æŠ¤è…¹éƒ¨å’Œè…°éƒ¨ã€‚' : 'Use in air-conditioned environments or when feeling cold. Protects abdomen and waist.',\n          tip: locale === 'zh' ? 'æ—¢æ˜¯é…é¥°ï¼Œä¹Ÿèƒ½æä¾›ä¿æš–å’Œå®‰å…¨æ„Ÿã€‚' : 'Serves as both accessory and provides warmth and security.'\n        }\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 md:space-y-12\" data-page=\"scenario-emergency-kit\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600 py-4\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">\n          {locale === 'zh' ? 'åº”æ€¥åŒ…æ¸…å•' : 'Emergency Kit List'}\n        </span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center py-8 md:py-12\">\n        <div className=\"w-12 sm:w-16 h-12 sm:h-16 bg-red-50 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6\">\n          <Package className=\"w-6 sm:w-8 h-6 sm:h-8\" />\n        </div>\n        <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold text-primary-700 mb-3 sm:mb-4\">\n          {locale === 'zh' ? 'å¤šåœºæ™¯ç»æœŸåº”æ€¥åŒ…æ¸…å•' : 'Multi-Scenario Period Emergency Kit List'}\n        </h1>\n        <p className=\"text-base sm:text-lg text-neutral-600 max-w-3xl mx-auto px-4\">\n          {locale === 'zh' ? 'ä»å®¹åº”å¯¹ï¼Œè‡ªåœ¨ç”Ÿæ´»ï¼šç»æœŸä¸é€‚ï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ã€‚è¿™ä»½æ¸…å•ä¸ºä½ æä¾›äº†åœ¨å„ç§åœºæ™¯ä¸‹çš„åº”æ€¥å‡†å¤‡å’Œç‰©å“å»ºè®®ï¼Œå¸®åŠ©ä½ éšæ—¶éšåœ°éƒ½èƒ½ä»å®¹åº”å¯¹ï¼ŒæŒæ§è‡ªå·±çš„çŠ¶æ€ã€‚' : 'Handle with confidence, live comfortably: You\\'re not fighting period discomfort alone. This list provides emergency preparation and item suggestions for various scenarios, helping you handle any situation with confidence and control your state.'}\n        </p>\n      </header>\n\n      {/* é’å°‘å¹´ä¸“åŒºç‰¹åˆ«æ¨å¹¿ */}\n      <section className=\"bg-gradient-to-r from-pink-50 via-purple-50 to-blue-50 rounded-2xl p-4 sm:p-6 md:p-8 border border-pink-100 relative overflow-hidden\">\n        <div className=\"absolute top-0 right-0 w-24 sm:w-32 h-24 sm:h-32 bg-pink-200 rounded-full opacity-20 transform translate-x-12 sm:translate-x-16 -translate-y-12 sm:-translate-y-16\"></div>\n        <div className=\"absolute bottom-0 left-0 w-20 sm:w-24 h-20 sm:h-24 bg-purple-200 rounded-full opacity-20 transform -translate-x-10 sm:-translate-x-12 translate-y-10 sm:translate-y-12\"></div>\n\n        <div className=\"relative z-10 text-center\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-center mb-4 gap-3\">\n            <div className=\"bg-pink-100 rounded-full p-2 sm:p-3\">\n              <Heart className=\"w-6 sm:w-8 h-6 sm:h-8 text-pink-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">\n                {locale === 'zh' ? 'ğŸŒ¸ é’å°‘å¹´ä¸“åŒºæ–°å¢ï¼' : 'ğŸŒ¸ New Teen Section Added!'}\n              </h2>\n              <p className=\"text-xs sm:text-sm text-pink-600 font-medium\">\n                {locale === 'zh' ? 'ä¸“ä¸º12-18å²å¥³å­©è®¾è®¡çš„æ ¡å›­åº”æ€¥åŒ…' : 'Campus emergency kit designed for girls aged 12-18'}\n              </p>\n            </div>\n          </div>\n          <p className=\"text-gray-700 mb-4 sm:mb-6 text-base sm:text-lg leading-relaxed max-w-4xl mx-auto\">\n            {locale === 'zh'\n              ? 'æˆ‘ä»¬ç‰¹åˆ«ä¸ºé’å°‘å¹´æœ‹å‹ä»¬æ–°å¢äº†æ ¡å›­åº”æ€¥åŒ…æ¸…å•ï¼ä»è¯¾å ‚åº”æ€¥åˆ°å®¿èˆç®¡ç†ï¼Œä»ä¸è€å¸ˆæ²Ÿé€šåˆ°åŒå­¦äº’åŠ©ï¼Œå…¨æ–¹ä½å¸®åŠ©ä½ åœ¨æ ¡å›­ç¯å¢ƒä¸­è‡ªä¿¡åº”å¯¹ç»æœŸã€‚'\n              : 'We\\'ve specially added a campus emergency kit list for our teen friends! From classroom emergencies to dorm management, from communicating with teachers to peer support, comprehensive help for confidently handling periods in campus environments.'\n            }\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center\">\n            <Link\n              href={`/${locale}/teen-health`}\n              className=\"inline-flex items-center justify-center bg-gradient-to-r from-pink-600 to-purple-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full font-medium hover:from-pink-700 hover:to-purple-700 transition-all transform hover:scale-105 text-sm sm:text-base\"\n            >\n              {locale === 'zh' ? 'æ¢ç´¢é’å°‘å¹´ä¸“åŒº' : 'Explore Teen Zone'}\n              <Heart className=\"w-4 sm:w-5 h-4 sm:h-5 ml-2\" />\n            </Link>\n            <Link\n              href={`/${locale}/teen-health/campus-guide`}\n              className=\"inline-flex items-center justify-center bg-white text-pink-600 px-4 sm:px-6 py-2 sm:py-3 rounded-full font-medium border-2 border-pink-200 hover:bg-pink-50 transition-colors text-sm sm:text-base\"\n            >\n              {locale === 'zh' ? 'æ ¡å›­åº”æ€¥æŒ‡å—' : 'Campus Emergency Guide'}\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* Important Notice */}\n      <section className=\"bg-yellow-50 p-4 sm:p-6 md:p-8 rounded-xl border border-yellow-200\">\n        <div className=\"flex flex-col sm:flex-row items-start gap-3 sm:gap-0\">\n          <AlertTriangle className=\"w-5 sm:w-6 h-5 sm:h-6 text-yellow-600 mr-0 sm:mr-3 mt-0.5 flex-shrink-0\" />\n          <div>\n            <h3 className=\"text-base sm:text-lg font-semibold text-yellow-800 mb-2\">\n              {locale === 'zh' ? 'é‡è¦æç¤º' : 'Important Notice'}\n            </h3>\n            <p className=\"text-yellow-700 text-xs sm:text-sm leading-relaxed\">\n              {locale === 'zh' ? 'æœ¬æ¸…å•æä¾›çš„å»ºè®®ä¸ºè¾…åŠ©ç¼“è§£æªæ–½ï¼Œå¦‚æœä½ çš„ç»æœŸç–¼ç—›å‰§çƒˆæˆ–ä¼´æœ‰å…¶ä»–å¼‚å¸¸ç—‡çŠ¶ï¼Œè¯·åŠ¡å¿…åŠæ—¶å°±åŒ»ã€‚æ­¢ç—›è¯ç­‰è¯ç‰©çš„ä½¿ç”¨ï¼Œåº”åœ¨åŒ»ç”Ÿæˆ–è¯å¸ˆæŒ‡å¯¼ä¸‹è¿›è¡Œã€‚' : 'The suggestions in this list are auxiliary relief measures. If you experience severe period pain or other abnormal symptoms, please seek medical attention promptly. Use of pain medications should be under the guidance of a doctor or pharmacist.'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Emergency Kit Scenarios */}\n      <section className=\"py-8 sm:py-10 md:py-12\">\n        <div className=\"space-y-8 sm:space-y-10 md:space-y-12\">\n          {emergencyKitScenarios.map((scenario, index) => (\n            <div key={index} className=\"bg-gradient-to-br from-neutral-50 to-white p-4 sm:p-6 md:p-8 rounded-xl border border-neutral-200 shadow-sm\">\n              <div className=\"flex flex-col sm:flex-row items-start sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0\">\n                <div className={`w-10 sm:w-12 h-10 sm:h-12 rounded-full flex items-center justify-center ${scenario.color} mr-0 sm:mr-4`}>\n                  {scenario.icon}\n                </div>\n                <div>\n                  <h2 className=\"text-xl sm:text-2xl font-semibold text-neutral-800\">\n                    {locale === 'zh' ? 'åœºæ™¯ï¼š' : 'Scenario: '}{scenario.scenario}\n                  </h2>\n                  <p className=\"text-neutral-600 mt-2 text-sm sm:text-base\">\n                    {scenario.description}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4 sm:space-y-6\">\n                {scenario.items.map((item, itemIndex) => (\n                  <div key={itemIndex} className=\"bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-neutral-100 hover:shadow-md transition-shadow\">\n                    <h3 className=\"text-base sm:text-lg font-semibold text-neutral-800 mb-2 sm:mb-3\">\n                      {item.item}\n                    </h3>\n                    \n                    <div className=\"space-y-2 sm:space-y-3\">\n                      <div>\n                        <h4 className=\"font-medium text-neutral-700 mb-1 text-xs sm:text-sm\">\n                          {locale === 'zh' ? 'ä½¿ç”¨æç¤º/ç†ç”±ï¼š' : 'Usage Tips/Reason:'}\n                        </h4>\n                        <p className=\"text-neutral-600 text-xs sm:text-sm leading-relaxed\">\n                          {item.usage}\n                        </p>\n                      </div>\n                      \n                      <div className=\"bg-blue-50 p-3 rounded-lg border border-blue-100\">\n                        <h4 className=\"font-medium text-blue-800 mb-1 text-xs sm:text-sm\">\n                          {locale === 'zh' ? 'ç›¸å…³å»ºè®®ï¼š' : 'Related Suggestions:'}\n                        </h4>\n                        <p className=\"text-blue-700 text-xs sm:text-sm leading-relaxed\">\n                          {item.tip}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Summary and Tips */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-neutral-50 p-4 sm:p-6 md:p-8 rounded-xl border border-blue-100\">\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0\">\n          <Info className=\"w-5 sm:w-6 h-5 sm:h-6 text-blue-600 mr-0 sm:mr-3\" />\n          <h2 className=\"text-xl sm:text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'æ€»ç»“ä¸å»ºè®®' : 'Summary and Recommendations'}\n          </h2>\n        </div>\n\n        <div className=\"space-y-3 sm:space-y-4 text-neutral-700\">\n          <p className=\"leading-relaxed text-sm sm:text-base\">\n            {locale === 'zh' ? 'è¿™ä»½æ¸…å•ä¸ºä½ æä¾›äº†ä¸€ä¸ªåŸºç¡€æ¡†æ¶ï¼Œå…·ä½“çš„åº”æ€¥åŒ…å†…å®¹å’Œå‡†å¤‡æ–¹å¼å¯ä»¥æ ¹æ®ä½ ä¸ªäººçš„å®é™…æƒ…å†µã€ç–¼ç—›ç¨‹åº¦ã€ç”Ÿæ´»ä¹ æƒ¯ä»¥åŠæ‰€å¤„çš„å…·ä½“ç¯å¢ƒè¿›è¡Œè°ƒæ•´ã€‚æœ€é‡è¦çš„æ˜¯ï¼š' : 'This list provides a basic framework. The specific emergency kit contents and preparation methods can be adjusted according to your personal situation, pain level, lifestyle habits, and specific environment. Most importantly:'}\n          </p>\n\n          <ul className=\"space-y-2 sm:space-y-3\">\n            <li className=\"flex items-start\">\n              <CheckCircle className=\"w-4 sm:w-5 h-4 sm:h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n              <span className=\"text-sm sm:text-base\">\n                <strong>{locale === 'zh' ? 'äº†è§£ä½ çš„èº«ä½“ï¼š' : 'Know your body: '}</strong>\n                {locale === 'zh' ? 'å…³æ³¨ç»æœŸç–¼ç—›çš„è§„å¾‹å’Œç‰¹ç‚¹ã€‚' : 'Pay attention to the patterns and characteristics of menstrual pain.'}\n              </span>\n            </li>\n            <li className=\"flex items-start\">\n              <CheckCircle className=\"w-4 sm:w-5 h-4 sm:h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n              <span className=\"text-sm sm:text-base\">\n                <strong>{locale === 'zh' ? 'æå‰åšå¥½å‡†å¤‡ï¼š' : 'Prepare in advance: '}</strong>\n                {locale === 'zh' ? 'é˜²æ‚£äºæœªç„¶ï¼Œå°†åº”æ€¥ç‰©å“æˆä¸ºä½ åŒ…é‡Œçš„å¸¸å¤‡é¡¹ã€‚' : 'Be prepared, make emergency items a regular part of your bag.'}\n              </span>\n            </li>\n            <li className=\"flex items-start\">\n              <CheckCircle className=\"w-4 sm:w-5 h-4 sm:h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n              <span className=\"text-sm sm:text-base\">\n                <strong>{locale === 'zh' ? 'å€¾å¬èº«ä½“çš„å£°éŸ³ï¼š' : 'Listen to your body: '}</strong>\n                {locale === 'zh' ? 'ä¸è¦ç¡¬æ’‘ï¼Œå¦‚æœç–¼ç—›ä¸¥é‡å½±å“æ­£å¸¸ç”Ÿæ´»ï¼ŒåŠæ—¶å¯»æ±‚ä¼‘æ¯æˆ–åŒ»ç–—å¸®åŠ©ã€‚' : 'Don\\'t push through, if pain seriously affects normal life, seek rest or medical help promptly.'}\n              </span>\n            </li>\n            <li className=\"flex items-start\">\n              <CheckCircle className=\"w-4 sm:w-5 h-4 sm:h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n              <span className=\"text-sm sm:text-base\">\n                <strong>{locale === 'zh' ? 'å‹‡æ•¢å¯»æ±‚å¸®åŠ©ï¼š' : 'Seek help bravely: '}</strong>\n                {locale === 'zh' ? 'åœ¨éœ€è¦æ—¶ï¼Œå‘Šè¯‰å®¶äººã€æœ‹å‹æˆ–ä¿¡ä»»çš„äººä½ çš„ä¸é€‚ï¼Œè·å¾—ä»–ä»¬çš„ç†è§£å’Œæ”¯æŒã€‚' : 'When needed, tell family, friends, or trusted people about your discomfort to gain their understanding and support.'}\n              </span>\n            </li>\n            <li className=\"flex items-start\">\n              <CheckCircle className=\"w-4 sm:w-5 h-4 sm:h-5 text-pink-500 mr-2 mt-0.5 flex-shrink-0\" />\n              <span className=\"text-sm sm:text-base\">\n                <strong>{locale === 'zh' ? 'é’å°‘å¹´ç‰¹åˆ«æé†’ï¼š' : 'Special reminder for teens: '}</strong>\n                {locale === 'zh' ? 'å¦‚æœä½ æ˜¯12-18å²çš„å­¦ç”Ÿï¼Œè®°å¾—ä¸å®¶é•¿æ²Ÿé€šåº”æ€¥åŒ…çš„å‡†å¤‡ï¼Œåœ¨å­¦æ ¡é‡åˆ°å›°éš¾æ—¶å‹‡æ•¢å‘è€å¸ˆæˆ–æ ¡åŒ»æ±‚åŠ©ã€‚' : 'If you\\'re a 12-18 year old student, remember to communicate with parents about emergency kit preparation, and bravely seek help from teachers or school nurses when facing difficulties at school.'}\n              </span>\n            </li>\n          </ul>\n\n          <p className=\"leading-relaxed mt-4 sm:mt-6 text-center font-medium text-blue-800 text-sm sm:text-base\">\n            {locale === 'zh' ? 'å¸Œæœ›è¿™ä»½æ¸…å•èƒ½å¸®åŠ©ä½ åœ¨ç»æœŸä¹Ÿèƒ½æ›´åŠ è‡ªä¿¡ã€èˆ’é€‚åœ°é¢å¯¹å„ç§ç”Ÿæ´»åœºæ™¯ï¼' : 'Hope this list helps you face various life scenarios with more confidence and comfort during your period!'}\n          </p>\n        </div>\n      </section>\n\n      {/* Disclaimer */}\n      <section className=\"bg-red-50 p-4 sm:p-6 md:p-8 rounded-xl border border-red-200\">\n        <h3 className=\"text-base sm:text-lg font-semibold text-red-800 mb-3 sm:mb-4\">\n          {locale === 'zh' ? 'å…è´£å£°æ˜' : 'Disclaimer'}\n        </h3>\n        <p className=\"text-red-700 text-xs sm:text-sm leading-relaxed\">\n          {locale === 'zh' ? 'æœ¬æ¸…å•æä¾›çš„å»ºè®®ä»…ä¾›ä¿¡æ¯å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šçš„åŒ»ç–—è¯Šæ–­ã€æ²»ç–—æˆ–å»ºè®®ã€‚è¯ç‰©ä½¿ç”¨è¯·åŠ¡å¿…éµå¾ªåŒ»ç”Ÿæˆ–è¯å¸ˆçš„æŒ‡å¯¼ã€‚ä¸ªä½“æƒ…å†µå·®å¼‚ï¼Œè¯·æ ¹æ®è‡ªèº«æ„Ÿå—è¿›è¡Œè°ƒæ•´ã€‚å¦‚æœä½ çš„ç»æœŸç–¼ç—›å‰§çƒˆéš¾å¿ï¼Œæˆ–ä¼´éšå…¶ä»–å¼‚å¸¸ç—‡çŠ¶ï¼ˆå¦‚å‘çƒ§ã€å‰§çƒˆå‘•åã€å¼‚å¸¸å‡ºè¡€ç­‰ï¼‰ï¼Œè¯·ç«‹å³å°±åŒ»ã€‚' : 'The suggestions in this list are for informational reference only and cannot replace professional medical diagnosis, treatment, or advice. Please follow doctor or pharmacist guidance for medication use. Individual situations vary, please adjust according to your own feelings. If your menstrual pain is severe and unbearable, or accompanied by other abnormal symptoms (such as fever, severe vomiting, abnormal bleeding, etc.), please seek medical attention immediately.'}\n        </p>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center py-4 sm:py-6\">\n        <Link\n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center justify-center text-primary-600 hover:text-primary-700 font-medium transition-colors text-sm sm:text-base\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/exercise/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":39,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { \n  Dumbbell, \n  Mountain, \n  Waves, \n  Heart,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Clock,\n  Shield,\n  Thermometer\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${t('scenarios.exercise.title')} - ${t('title')}`,\n    description: t('scenarios.exercise.description'),\n  };\n}\n\nexport default async function ExerciseScenarioPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const hikingGuide = {\n    preparation: [\n      {\n        category: locale === 'zh' ? 'ä¸‰å±‚é˜²æŠ¤ä½“ç³»' : 'Three-Layer Protection System',\n        items: [\n          locale === 'zh' ? 'åŸºç¡€å±‚ï¼šé€Ÿå¹²æŠ—èŒå†…è£¤ï¼ˆæ¨èKnixå“ç‰Œï¼‰' : 'Base layer: Quick-dry antibacterial underwear (Knix brand recommended)',\n          locale === 'zh' ? 'ä¿æš–å±‚ï¼šçŸ³å¢¨çƒ¯å‘çƒ­æŠ¤è…°ï¼ˆæŒç»­6å°æ—¶æ’æ¸©ï¼‰' : 'Insulation layer: Graphene heating waist support (6-hour constant temperature)',\n          locale === 'zh' ? 'å¤–å±‚ï¼šå¸¦æš—è¢‹çš„ç™»å±±è£¤ï¼ˆå†…ç½®å«ç”Ÿç”¨å“éš”å±‚ï¼‰' : 'Outer layer: Hiking pants with hidden pockets (built-in sanitary product compartment)'\n        ]\n      },\n      {\n        category: locale === 'zh' ? 'è£…å¤‡æ¸…å•' : 'Equipment List',\n        items: [\n          locale === 'zh' ? 'é€æ°”æ€§å¥½çš„é€Ÿå¹²å†…è¡£' : 'Breathable quick-dry underwear',\n          locale === 'zh' ? 'å®½æ¾èˆ’é€‚çš„å¾’æ­¥è£¤' : 'Loose comfortable hiking pants',\n          locale === 'zh' ? 'é˜²æ»‘æ€§å¥½çš„å¾’æ­¥é‹' : 'Non-slip hiking shoes',\n          locale === 'zh' ? 'ç™»å±±æ–å‡è½»è…¹éƒ¨å‹åŠ›' : 'Hiking poles to reduce abdominal pressure'\n        ]\n      }\n    ],\n    duringHike: [\n      locale === 'zh' ? 'é€‰æ‹©ä¸­ä½å¼ºåº¦è·¯çº¿ï¼Œé¿å…é«˜æµ·æ‹”æˆ–æç«¯å¤©æ°”' : 'Choose low-medium intensity routes, avoid high altitude or extreme weather',\n      locale === 'zh' ? 'æ¯30åˆ†é’Ÿä¼‘æ¯5åˆ†é’Ÿï¼Œè¡¥å……æ¸©çƒ­é¥®å“' : 'Rest 5 minutes every 30 minutes, replenish with warm drinks',\n      locale === 'zh' ? 'å¯†åˆ‡å…³æ³¨èº«ä½“ä¿¡å·ï¼Œå‡ºç°ä¸é€‚ç«‹å³åœæ­¢' : 'Monitor body signals closely, stop immediately if discomfort occurs',\n      locale === 'zh' ? 'ä¿æŒä¸é˜Ÿå‹é€‚å½“è·ç¦»ï¼Œç›¸äº’ç…§åº”' : 'Maintain appropriate distance with teammates, look out for each other'\n    ]\n  };\n\n  const poolSafety = {\n    requirements: [\n      {\n        indicator: locale === 'zh' ? 'æ°´æ¸©æ£€æŸ¥' : 'Water Temperature Check',\n        standard: locale === 'zh' ? 'æ°´æ¸©>28â„ƒï¼ˆä½æ¸©æ˜“è‡´ç—‰æŒ›ï¼‰' : 'Water temp >28â„ƒ (low temp causes cramps)',\n        icon: <Thermometer className=\"w-5 h-5\" />\n      },\n      {\n        indicator: locale === 'zh' ? 'æ°¯æµ“åº¦' : 'Chlorine Concentration',\n        standard: locale === 'zh' ? '0.5-1.0ppmï¼ˆè¿‡é«˜æŸä¼¤é»è†œï¼‰' : '0.5-1.0ppm (too high damages mucosa)',\n        icon: <Waves className=\"w-5 h-5\" />\n      },\n      {\n        indicator: locale === 'zh' ? 'å«ç”Ÿæ ‡å‡†' : 'Hygiene Standards',\n        standard: locale === 'zh' ? 'é€‰æ‹©æ­£è§„æ³³æ± ï¼Œé¿å…äººæµé‡å¤§çš„åœºæ‰€' : 'Choose regulated pools, avoid crowded venues',\n        icon: <Shield className=\"w-5 h-5\" />\n      }\n    ],\n    products: [\n      locale === 'zh' ? 'æœˆç»æ¯ä¼˜äºå«ç”Ÿæ£‰æ¡ï¼ˆé˜²æ°´æ€§æ›´å¥½ï¼‰' : 'Menstrual cup preferred over tampons (better waterproof)',\n      locale === 'zh' ? 'é˜²æ°´å‹å«ç”Ÿæ£‰æ¡ï¼ˆå…·æœ‰è‰¯å¥½é˜²æ°´æ€§èƒ½ï¼‰' : 'Waterproof tampons (with good waterproof performance)',\n      locale === 'zh' ? 'è”“è¶Šè“æµ“ç¼©èƒ¶å›Šï¼ˆé¢„é˜²å°¿è·¯æ„ŸæŸ“ï¼‰' : 'Cranberry concentrate capsules (prevent UTI)'\n    ],\n    protocol: [\n      locale === 'zh' ? 'æ¸¸æ³³å‰å½»åº•æ·‹æµ´æ¸…æ´èº«ä½“' : 'Thoroughly shower before swimming',\n      locale === 'zh' ? 'é€‰æ‹©ç»æœŸä¸­åæœŸï¼Œæµé‡è¾ƒå°‘æ—¶æ¸¸æ³³' : 'Swim during mid-late period when flow is lighter',\n      locale === 'zh' ? 'æ¸¸æ³³åç«‹å³å†²æ´—å¹¶æ›´æ¢å¹²å‡€å†…è¡£' : 'Rinse immediately after swimming and change to clean underwear',\n      locale === 'zh' ? 'é¿å…åœ¨å…¬å…±æŒ‰æ‘©æµ´ç¼¸ä¸­æµ¸æ³¡' : 'Avoid soaking in public hot tubs'\n    ]\n  };\n\n  const yogaPoses = [\n    {\n      name: locale === 'zh' ? 'çŒ«ç‰›å¼' : 'Cat-Cow Pose',\n      sanskrit: 'Marjaryasana-Bitilasana',\n      duration: locale === 'zh' ? '5-10æ¬¡åŠ¨æ€ç»ƒä¹ ' : '5-10 dynamic repetitions',\n      benefits: locale === 'zh' ? 'åŠ¨æ€æ´»åŒ–éª¨ç›†ï¼Œç¼“è§£è…°èƒŒå‹åŠ›' : 'Dynamically activates pelvis, relieves back pressure',\n      steps: [\n        locale === 'zh' ? 'åŒæ‰‹åŒè†ç€åœ°ï¼Œä¿æŒè„ŠæŸ±ä¸­ç«‹' : 'Hands and knees on ground, maintain neutral spine',\n        locale === 'zh' ? 'å¸æ°”æ—¶ä¸‹æ²‰è…¹éƒ¨ï¼ŒæŠ¬å¤´å‘ä¸Šï¼ˆç‰›å¼ï¼‰' : 'Inhale: sink belly, lift head up (Cow)',\n        locale === 'zh' ? 'å‘¼æ°”æ—¶æ‹±èµ·è„ŠèƒŒï¼Œä½å¤´çœ‹è…¹éƒ¨ï¼ˆçŒ«å¼ï¼‰' : 'Exhale: arch spine, look toward belly (Cat)'\n      ]\n    },\n    {\n      name: locale === 'zh' ? 'å©´å„¿å¼' : 'Child\\'s Pose',\n      sanskrit: 'Balasana',\n      duration: locale === 'zh' ? 'ä¿æŒ1-3åˆ†é’Ÿ' : 'Hold for 1-3 minutes',\n      benefits: locale === 'zh' ? 'ç¼“è§£è…°èƒŒå‹åŠ›ï¼Œæ”¾æ¾èº«å¿ƒ' : 'Relieves back pressure, relaxes body and mind',\n      steps: [\n        locale === 'zh' ? 'è·ªåï¼Œè‡€éƒ¨ååœ¨è„šè·Ÿä¸Š' : 'Kneel, sit back on heels',\n        locale === 'zh' ? 'ä¸Šèº«å‰å€¾ï¼Œé¢å¤´è´´åœ°' : 'Lean forward, forehead to ground',\n        locale === 'zh' ? 'åŒæ‰‹æ”¾åœ¨èº«ä½“ä¸¤ä¾§æˆ–å‘å‰ä¼¸å±•' : 'Arms at sides or extended forward'\n      ]\n    },\n    {\n      name: locale === 'zh' ? 'ä»°å§æŸè§’å¼' : 'Reclined Bound Angle Pose',\n      sanskrit: 'Supta Baddha Konasana',\n      duration: locale === 'zh' ? 'ä¿æŒ5-15åˆ†é’Ÿ' : 'Hold for 5-15 minutes',\n      benefits: locale === 'zh' ? 'æ”¹å–„è¡€æ¶²å¾ªç¯ï¼Œç¼“è§£éª¨ç›†å……è¡€' : 'Improves circulation, relieves pelvic congestion',\n      steps: [\n        locale === 'zh' ? 'ä»°å§ï¼ŒåŒè„šè„šæŒç›¸å¯¹' : 'Lie down, soles of feet together',\n        locale === 'zh' ? 'è†ç›–å‘ä¸¤ä¾§æ‰“å¼€' : 'Knees fall to sides',\n        locale === 'zh' ? 'åŒæ‰‹æ”¾åœ¨èº«ä½“ä¸¤ä¾§ï¼Œæ·±å‘¼å¸' : 'Arms at sides, breathe deeply'\n      ]\n    },\n    {\n      name: locale === 'zh' ? 'åŒè…¿é å¢™å¼' : 'Legs Up the Wall',\n      sanskrit: 'Viparita Karani',\n      duration: locale === 'zh' ? 'ä¿æŒ5-15åˆ†é’Ÿ' : 'Hold for 5-15 minutes',\n      benefits: locale === 'zh' ? 'ä¿ƒè¿›è¡€æ¶²å›æµï¼Œç¼“è§£è…¿éƒ¨ç–²åŠ³' : 'Promotes blood return, relieves leg fatigue',\n      steps: [\n        locale === 'zh' ? 'ååœ¨å¢™è¾¹ï¼ŒåŒè…¿ä¼¸ç›´é å¢™' : 'Sit by wall, legs straight up wall',\n        locale === 'zh' ? 'èº«ä½“ä¸å¢™å‘ˆ90åº¦è§’' : 'Body at 90-degree angle to wall',\n        locale === 'zh' ? 'åŒè‡‚è‡ªç„¶æ”¾æ¾ï¼Œé—­çœ¼ä¼‘æ¯' : 'Arms relaxed, close eyes and rest'\n      ]\n    }\n  ];\n\n  const avoidPoses = [\n    locale === 'zh' ? 'å€’ç«‹ç±»ä½“å¼ï¼ˆå¤´å€’ç«‹ã€è‚©å€’ç«‹ï¼‰' : 'Inversion poses (headstand, shoulderstand)',\n    locale === 'zh' ? 'æ·±åº¦åå¼¯ä½“å¼ï¼ˆè½®å¼ã€éª†é©¼å¼ï¼‰' : 'Deep backbends (wheel pose, camel pose)',\n    locale === 'zh' ? 'å¼ºçƒˆæ‰­è½¬ä½“å¼' : 'Intense twisting poses',\n    locale === 'zh' ? 'è…¹éƒ¨å¼ºåŠ›æ”¶ç¼©çš„ä½“å¼' : 'Poses with strong abdominal contractions'\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 md:space-y-12\" data-page=\"scenario-exercise\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">{t('scenarios.exercise.title')}</span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <div className=\"w-16 h-16 bg-orange-50 text-orange-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <Dumbbell className=\"w-8 h-8\" />\n        </div>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('scenarios.exercise.title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('scenarios.exercise.description')}\n        </p>\n      </header>\n\n      {/* Hiking Guide Section */}\n      <section className=\"bg-gradient-to-br from-orange-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"flex items-center mb-6\">\n          <Mountain className=\"w-6 h-6 text-orange-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ç»æœŸå¾’æ­¥ä¸‰å±‚é˜²æŠ¤ä½“ç³»' : 'Period Hiking Three-Layer Protection System'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-2 gap-8 mb-8\">\n          {hikingGuide.preparation.map((prep, index) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n                {prep.category}\n              </h3>\n              <ul className=\"space-y-3\">\n                {prep.items.map((item, itemIndex) => (\n                  <li key={itemIndex} className=\"flex items-start\">\n                    <CheckCircle className=\"w-4 h-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-sm text-neutral-700\">{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"bg-orange-100 p-4 rounded-lg\">\n          <h4 className=\"font-semibold text-orange-800 mb-3\">\n            {locale === 'zh' ? 'å¾’æ­¥è¿‡ç¨‹ä¸­æ³¨æ„äº‹é¡¹' : 'Precautions During Hiking'}\n          </h4>\n          <ul className=\"space-y-2\">\n            {hikingGuide.duringHike.map((note, index) => (\n              <li key={index} className=\"flex items-start text-sm text-orange-700\">\n                <span className=\"w-5 h-5 bg-orange-200 text-orange-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                  {index + 1}\n                </span>\n                {note}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </section>\n\n      {/* Pool Safety Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Waves className=\"w-6 h-6 text-orange-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'æ³³æ± å«ç”Ÿé£é™©é˜²æ§' : 'Pool Hygiene Risk Prevention'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6 mb-8\">\n          {poolSafety.requirements.map((req, index) => (\n            <div key={index} className=\"card text-center\">\n              <div className=\"w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                {req.icon}\n              </div>\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-2\">\n                {req.indicator}\n              </h3>\n              <p className=\"text-sm text-neutral-600\">\n                {req.standard}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          <div className=\"bg-blue-50 p-6 rounded-lg\">\n            <h4 className=\"font-semibold text-blue-800 mb-4\">\n              {locale === 'zh' ? 'æ¨èäº§å“' : 'Recommended Products'}\n            </h4>\n            <ul className=\"space-y-3\">\n              {poolSafety.products.map((product, index) => (\n                <li key={index} className=\"flex items-start text-sm text-blue-700\">\n                  <CheckCircle className=\"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n                  {product}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className=\"bg-green-50 p-6 rounded-lg\">\n            <h4 className=\"font-semibold text-green-800 mb-4\">\n              {locale === 'zh' ? 'å«ç”Ÿåè®®' : 'Hygiene Protocol'}\n            </h4>\n            <ul className=\"space-y-3\">\n              {poolSafety.protocol.map((step, index) => (\n                <li key={index} className=\"flex items-start text-sm text-green-700\">\n                  <span className=\"w-5 h-5 bg-green-200 text-green-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                    {index + 1}\n                  </span>\n                  {step}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Yoga Poses Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Heart className=\"w-6 h-6 text-orange-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ç»æœŸç‘œä¼½ä½“å¼åº“' : 'Period Yoga Pose Library'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n          {yogaPoses.map((pose, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-neutral-800\">\n                  {pose.name}\n                </h3>\n                <span className=\"text-xs text-neutral-500 italic\">\n                  {pose.sanskrit}\n                </span>\n              </div>\n              \n              <div className=\"mb-4\">\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800\">\n                  <Clock className=\"w-3 h-3 mr-1\" />\n                  {pose.duration}\n                </span>\n              </div>\n\n              <p className=\"text-neutral-600 mb-4 text-sm\">\n                <strong>{locale === 'zh' ? 'åŠŸæ•ˆï¼š' : 'Benefits: '}</strong>\n                {pose.benefits}\n              </p>\n\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'åŠ¨ä½œè¦ç‚¹ï¼š' : 'Key Points:'}\n                </h4>\n                <ol className=\"space-y-2\">\n                  {pose.steps.map((step, stepIndex) => (\n                    <li key={stepIndex} className=\"flex items-start text-sm text-neutral-700\">\n                      <span className=\"w-5 h-5 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                        {stepIndex + 1}\n                      </span>\n                      {step}\n                    </li>\n                  ))}\n                </ol>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"bg-red-50 p-6 rounded-lg\">\n          <h4 className=\"font-semibold text-red-800 mb-4 flex items-center\">\n            <AlertTriangle className=\"w-5 h-5 mr-2\" />\n            {locale === 'zh' ? 'ç»æœŸåº”é¿å…çš„ä½“å¼' : 'Poses to Avoid During Period'}\n          </h4>\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            {avoidPoses.map((pose, index) => (\n              <div key={index} className=\"flex items-center text-sm text-red-700\">\n                <span className=\"w-2 h-2 bg-red-400 rounded-full mr-2\"></span>\n                {pose}\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Safety Guidelines */}\n      <section className=\"bg-yellow-50 p-6 md:p-8 rounded-xl\">\n        <h3 className=\"text-lg font-semibold text-yellow-800 mb-4\">\n          {locale === 'zh' ? 'è¿åŠ¨å®‰å…¨æŒ‡å—' : 'Exercise Safety Guidelines'}\n        </h3>\n        <div className=\"grid md:grid-cols-2 gap-6 text-sm text-yellow-700\">\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'è¿åŠ¨å¼ºåº¦æ§åˆ¶' : 'Exercise Intensity Control'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'é¿å…å‰§çƒˆè¿åŠ¨ï¼Œé€‰æ‹©ä¸­ä½å¼ºåº¦æ´»åŠ¨' : 'Avoid intense exercise, choose low-medium intensity activities'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ ¹æ®èº«ä½“çŠ¶å†µéšæ—¶è°ƒæ•´è¿åŠ¨è®¡åˆ’' : 'Adjust exercise plan according to body condition'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å‡ºç°ä¸¥é‡ä¸é€‚ç«‹å³åœæ­¢è¿åŠ¨' : 'Stop immediately if severe discomfort occurs'}</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'è¡¥æ°´ä¸è¥å…»' : 'Hydration & Nutrition'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'è¿åŠ¨å‰åå……åˆ†è¡¥æ°´ï¼Œé€‰æ‹©æ¸©çƒ­é¥®å“' : 'Hydrate well before/after exercise, choose warm drinks'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æºå¸¦èƒ½é‡é£Ÿç‰©ï¼Œå¦‚åšæœã€é¦™è•‰ç­‰' : 'Carry energy foods like nuts, bananas'}</li>\n              <li>â€¢ {locale === 'zh' ? 'é¿å…ç©ºè…¹è¿åŠ¨ï¼Œé˜²æ­¢ä½è¡€ç³–' : 'Avoid exercising on empty stomach, prevent hypoglycemia'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center\">\n        <Link \n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/lifeStages/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":16}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport {\n  Heart,\n  BookOpen,\n  Baby,\n  Flower,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Clock,\n  Shield,\n  Users,\n  Download,\n  ExternalLink\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${t('scenarios.lifeStages.title')} - ${t('title')}`,\n    description: t('scenarios.lifeStages.description'),\n  };\n}\n\nexport default async function LifeStagesScenarioPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const lifeStages = [\n    {\n      stage: locale === 'zh' ? 'é’æ˜¥æœŸä¸“é¡¹æ–¹æ¡ˆ' : 'Adolescence Program',\n      ageRange: locale === 'zh' ? '12-18å²' : '12-18 years',\n      icon: <BookOpen className=\"w-8 h-8\" />,\n      color: 'bg-blue-50 text-blue-600',\n      borderColor: 'border-blue-200',\n      description: locale === 'zh' ? 'åˆæ½®æ•™è‚²ä¸æ ¡å›­åº”å¯¹ç­–ç•¥' : 'Menarche education and campus coping strategies',\n      keyFeatures: [\n        {\n          title: locale === 'zh' ? 'åŸºç¡€ç§‘æ™®ä¸å¿ƒç†ç–å¯¼' : 'Basic Education & Psychological Guidance',\n          details: [\n            locale === 'zh' ? 'å…¨é¢çš„ç—›ç»çŸ¥è¯†ç§‘æ™®ï¼Œæ¶ˆé™¤ææƒ§å’Œç¾è€»æ„Ÿ' : 'Comprehensive menstrual pain education, eliminate fear and shame',\n            locale === 'zh' ? 'æ­£ç¡®çš„å¥åº·è§‚å¿µå’Œåº”å¯¹ç–¼ç—›çš„ä¿¡å¿ƒ' : 'Correct health concepts and confidence in pain management',\n            locale === 'zh' ? 'å­¦æ ¡å¥åº·æ•™è‚²è¯¾ç¨‹å’Œè®²åº§' : 'School health education courses and lectures'\n          ]\n        },\n        {\n          title: locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼è°ƒæ•´æŒ‡å¯¼' : 'Lifestyle Adjustment Guidance',\n          details: [\n            locale === 'zh' ? 'è§„å¾‹ä½œæ¯ï¼Œä¿è¯8-9å°æ—¶ç¡çœ ' : 'Regular schedule, ensure 8-9 hours of sleep',\n            locale === 'zh' ? 'åˆç†é¥®é£Ÿï¼Œå¢åŠ é“ã€è›‹ç™½è´¨ã€ç»´ç”Ÿç´ æ‘„å…¥' : 'Balanced diet, increase iron, protein, vitamin intake',\n            locale === 'zh' ? 'é€‚å½“è¿åŠ¨ï¼Œæ¯å‘¨3-5æ¬¡æœ‰æ°§è¿åŠ¨' : 'Appropriate exercise, 3-5 times aerobic exercise per week'\n          ]\n        },\n        {\n          title: locale === 'zh' ? 'æ ¡å›­åº”æ€¥æ”¯æŒæªæ–½' : 'Campus Emergency Support Measures',\n          details: [\n            locale === 'zh' ? 'å®¿èˆå’Œæ•™å®¤é…å¤‡å«ç”Ÿç”¨å“å’Œåº”æ€¥è¯å“' : 'Dormitories and classrooms equipped with sanitary products and emergency medicines',\n            locale === 'zh' ? 'å¥åº·å’¨è¯¢å®¤å’Œå¿ƒç†è¾…å¯¼å®¤' : 'Health consultation room and psychological counseling room',\n            locale === 'zh' ? 'ä¸“ä¸šæ ¡åŒ»å’Œå¿ƒç†å’¨è¯¢å¸ˆæœåŠ¡' : 'Professional school doctor and psychological counselor services'\n          ]\n        }\n      ],\n      emergencyKit: [\n        locale === 'zh' ? 'é˜²æ¼è­¦æŠ¥å†…è£¤' : 'Leak-proof alarm underwear',\n        locale === 'zh' ? 'æ— å£°æš–è´´' : 'Silent warming patches',\n        locale === 'zh' ? 'ç»æœŸçŸ¥è¯†æ¼«ç”»æ‰‹å†Œ' : 'Menstrual knowledge comic handbook',\n        locale === 'zh' ? 'èˆ’ç¼“è¿åŠ¨è§†é¢‘è¯¾ç¨‹' : 'Soothing exercise video courses'\n      ]\n    },\n    {\n      stage: locale === 'zh' ? 'å¤‡å­•æœŸä¸“é¡¹æ–¹æ¡ˆ' : 'Pre-pregnancy Program',\n      ageRange: locale === 'zh' ? '25-35å²' : '25-35 years',\n      icon: <Baby className=\"w-8 h-8\" />,\n      color: 'bg-green-50 text-green-600',\n      borderColor: 'border-green-200',\n      description: locale === 'zh' ? 'è‡ªç„¶ç–—æ³•ä¸ç”Ÿè‚²å¥åº·ä¼˜åŒ–' : 'Natural therapy and reproductive health optimization',\n      keyFeatures: [\n        {\n          title: locale === 'zh' ? 'è‡ªç„¶ç–—æ³•ä¸é¥®é£Ÿè°ƒç†' : 'Natural Therapy & Dietary Adjustment',\n          details: [\n            locale === 'zh' ? 'çƒ­æ•·ã€æŒ‰æ‘©ã€ç‘œä¼½ç­‰å¤©ç„¶ç¼“è§£æ–¹æ³•' : 'Natural relief methods like heat therapy, massage, yoga',\n            locale === 'zh' ? 'å¯Œå«ç»´ç”Ÿç´ B6ã€é’™ã€é•ã€æ¬§ç±³èŒ„-3çš„é£Ÿç‰©' : 'Foods rich in vitamin B6, calcium, magnesium, omega-3',\n            locale === 'zh' ? 'è§„å¾‹é¥®é£Ÿä¹ æƒ¯ï¼Œé¿å…è¿‡åº¦èŠ‚é£Ÿæˆ–æš´é¥®æš´é£Ÿ' : 'Regular eating habits, avoid excessive dieting or overeating'\n          ]\n        },\n        {\n          title: locale === 'zh' ? 'åŒ»ç”Ÿå’¨è¯¢ä¸è¯ç‰©ç®¡ç†' : 'Medical Consultation & Medication Management',\n          details: [\n            locale === 'zh' ? 'å­•å‰å…¨é¢èº«ä½“æ£€æŸ¥ï¼Œç‰¹åˆ«æ˜¯ç”Ÿæ®–ç³»ç»Ÿæ£€æŸ¥' : 'Comprehensive pre-pregnancy physical examination, especially reproductive system',\n            locale === 'zh' ? 'æ’é™¤ç»§å‘æ€§ç—›ç»å¯èƒ½ï¼ˆå­å®«å†…è†œå¼‚ä½ç—‡ç­‰ï¼‰' : 'Rule out secondary dysmenorrhea (endometriosis, etc.)',\n            locale === 'zh' ? 'åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹åˆç†ä½¿ç”¨è¯ç‰©æ²»ç–—' : 'Rational use of medication under doctor\\'s guidance'\n          ]\n        },\n        {\n          title: locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼ä¸ä¹ æƒ¯è°ƒæ•´' : 'Lifestyle & Habit Adjustment',\n          details: [\n            locale === 'zh' ? 'æˆ’çƒŸæˆ’é…’ï¼Œé¿å…ç†¬å¤œï¼Œå‡å°‘å’–å•¡å› æ‘„å…¥' : 'Quit smoking and drinking, avoid staying up late, reduce caffeine intake',\n            locale === 'zh' ? 'æ¯å‘¨3-4æ¬¡ä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨å’ŒåŠ›é‡è®­ç»ƒ' : '3-4 times moderate-intensity aerobic exercise and strength training per week',\n            locale === 'zh' ? 'ä¿æŒè‰¯å¥½å¿ƒç†çŠ¶æ€ï¼Œç¼“è§£å¤‡å­•å¿ƒç†è´Ÿæ‹…' : 'Maintain good mental state, relieve psychological burden of pregnancy preparation'\n          ]\n        }\n      ],\n      emergencyKit: [\n        locale === 'zh' ? 'åŸºç¡€ä½“æ¸©æ™ºèƒ½åˆ†æç³»ç»Ÿ' : 'Basal body temperature intelligent analysis system',\n        locale === 'zh' ? 'å­å®«å†…è†œè¡€æµæ£€æµ‹é£Ÿè°±' : 'Endometrial blood flow detection recipes',\n        locale === 'zh' ? 'é»„ä½“æœŸä¸“å±ç‘œä¼½åºåˆ—' : 'Luteal phase exclusive yoga sequence',\n        locale === 'zh' ? 'å¤‡å­•è¥å…»è¡¥å……æŒ‡å—' : 'Pre-pregnancy nutrition supplement guide'\n      ]\n    },\n    {\n      stage: locale === 'zh' ? 'å›´ç»ç»æœŸä¸“é¡¹æ–¹æ¡ˆ' : 'Perimenopause Program',\n      ageRange: locale === 'zh' ? '45-55å²' : '45-55 years',\n      icon: <Flower className=\"w-8 h-8\" />,\n      color: 'bg-purple-50 text-purple-600',\n      borderColor: 'border-purple-200',\n      description: locale === 'zh' ? 'è·å°”è’™ç–—æ³•ä¸ç»¼åˆç®¡ç†' : 'Hormone therapy and comprehensive management',\n      keyFeatures: [\n        {\n          title: locale === 'zh' ? 'è·å°”è’™ç–—æ³•ä¸åŒ»ç”ŸæŒ‡å¯¼' : 'Hormone Therapy & Medical Guidance',\n          details: [\n            locale === 'zh' ? 'åœ¨åŒ»ç”Ÿè¯„ä¼°ä¸‹è€ƒè™‘è·å°”è’™ç–—æ³•ç¼“è§£ç—‡çŠ¶' : 'Consider hormone therapy under doctor\\'s evaluation to relieve symptoms',\n            locale === 'zh' ? 'è°ƒèŠ‚å†…åˆ†æ³Œå¹³è¡¡ï¼Œå‡è½»ç—›ç»å’Œæœˆç»ä¸è°ƒ' : 'Regulate endocrine balance, reduce dysmenorrhea and menstrual irregularities',\n            locale === 'zh' ? 'å®šæœŸèº«ä½“æ£€æŸ¥å’Œç›‘æµ‹ï¼Œæ³¨æ„é£é™©å’Œå‰¯ä½œç”¨' : 'Regular physical examination and monitoring, pay attention to risks and side effects'\n          ]\n        },\n        {\n          title: locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼è°ƒæ•´ä¸è‡ªæˆ‘ä¿å¥' : 'Lifestyle Adjustment & Self-care',\n          details: [\n            locale === 'zh' ? 'å¢åŠ å¯Œå«æ¤ç‰©é›Œæ¿€ç´ çš„é£Ÿç‰©ï¼ˆå¤§è±†åˆ¶å“ã€äºšéº»ç±½ï¼‰' : 'Increase foods rich in phytoestrogens (soy products, flaxseed)',\n            locale === 'zh' ? 'ä¿è¯7-8å°æ—¶ç¡çœ ï¼Œé€‚å½“å¢åŠ åˆä¼‘æ—¶é—´' : 'Ensure 7-8 hours of sleep, appropriately increase nap time',\n            locale === 'zh' ? 'æ•£æ­¥ã€å¤ªææ‹³ã€ç‘œä¼½ç­‰èˆ’ç¼“è¿åŠ¨é¡¹ç›®' : 'Gentle exercise programs like walking, tai chi, yoga'\n          ]\n        },\n        {\n          title: locale === 'zh' ? 'å¿ƒç†æ”¯æŒä¸ç¤¾äº¤æ´»åŠ¨' : 'Psychological Support & Social Activities',\n          details: [\n            locale === 'zh' ? 'å‚åŠ å¿ƒç†è¾…å¯¼è¯¾ç¨‹å’Œå›´ç»ç»æœŸå¥³æ€§æ”¯æŒå°ç»„' : 'Participate in psychological counseling courses and perimenopause women support groups',\n            locale === 'zh' ? 'ç§¯æå‚åŠ æ–‡åŒ–æ´»åŠ¨ã€æ—…æ¸¸ã€å¿—æ„¿è€…æœåŠ¡' : 'Actively participate in cultural activities, travel, volunteer services',\n            locale === 'zh' ? 'ä¿æŒç§¯æä¹è§‚å¿ƒæ€ï¼Œå¢å¼ºè‡ªä¿¡å¿ƒå’Œç”Ÿæ´»ä¹è¶£' : 'Maintain positive and optimistic attitude, enhance confidence and life enjoyment'\n          ]\n        }\n      ],\n      emergencyKit: [\n        locale === 'zh' ? 'æ½®çƒ­é¢„è­¦æ‰‹ç¯' : 'Hot flash warning bracelet',\n        locale === 'zh' ? 'éª¨éª¼å¯†åº¦ä¿æŠ¤é£Ÿè°±' : 'Bone density protection recipes',\n        locale === 'zh' ? 'æƒ…ç»ªç®¡ç†éŸ³é¢‘è¯¾ç¨‹' : 'Emotional management audio courses',\n        locale === 'zh' ? 'å›´ç»ç»æœŸç—‡çŠ¶è¿½è¸ªè¡¨' : 'Perimenopause symptom tracking chart'\n      ]\n    }\n  ];\n\n  const commonChallenges = [\n    {\n      challenge: locale === 'zh' ? 'å¿ƒç†å‹åŠ›ç®¡ç†' : 'Psychological Stress Management',\n      solutions: [\n        locale === 'zh' ? 'å»ºç«‹æ­£ç¡®çš„å¥åº·è§‚å¿µï¼Œæ¶ˆé™¤å¯¹ç—›ç»çš„ææƒ§' : 'Establish correct health concepts, eliminate fear of dysmenorrhea',\n        locale === 'zh' ? 'å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å’Œå®¶åº­æ”¯æŒ' : 'Seek professional psychological counseling and family support',\n        locale === 'zh' ? 'å‚åŠ åŒé¾„äººæ”¯æŒå°ç»„ï¼Œåˆ†äº«ç»éªŒ' : 'Join peer support groups, share experiences'\n      ]\n    },\n    {\n      challenge: locale === 'zh' ? 'ç”Ÿæ´»æ–¹å¼è°ƒæ•´' : 'Lifestyle Adjustment',\n      solutions: [\n        locale === 'zh' ? 'åˆ¶å®šä¸ªæ€§åŒ–çš„ä½œæ¯æ—¶é—´è¡¨' : 'Create personalized schedule',\n        locale === 'zh' ? 'é€‰æ‹©é€‚åˆå¹´é¾„æ®µçš„è¿åŠ¨æ–¹å¼' : 'Choose age-appropriate exercise methods',\n        locale === 'zh' ? 'å»ºç«‹å¥åº·çš„é¥®é£Ÿä¹ æƒ¯å’Œè¥å…»æ­é…' : 'Establish healthy eating habits and nutritional combinations'\n      ]\n    },\n    {\n      challenge: locale === 'zh' ? 'åŒ»ç–—èµ„æºè·å–' : 'Medical Resource Access',\n      solutions: [\n        locale === 'zh' ? 'å®šæœŸè¿›è¡Œä¸“ä¸šåŒ»ç–—æ£€æŸ¥å’Œå’¨è¯¢' : 'Regular professional medical examinations and consultations',\n        locale === 'zh' ? 'äº†è§£ä¸åŒç”Ÿç†é˜¶æ®µçš„ç‰¹æ®Šéœ€æ±‚' : 'Understand special needs of different physiological stages',\n        locale === 'zh' ? 'å»ºç«‹ä¸åŒ»ç–—ä¸“ä¸šäººå£«çš„é•¿æœŸå…³ç³»' : 'Establish long-term relationships with medical professionals'\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 md:space-y-12\" data-page=\"scenario-lifestages\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">{t('scenarios.lifeStages.title')}</span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <div className=\"w-16 h-16 bg-red-50 text-red-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <Heart className=\"w-8 h-8\" />\n        </div>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('scenarios.lifeStages.title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('scenarios.lifeStages.description')}\n        </p>\n      </header>\n\n      {/* Life Stages Section */}\n      <section className=\"space-y-12\">\n        {lifeStages.map((stage, index) => (\n          <div key={index} className={`border-2 rounded-xl p-6 md:p-8 ${stage.borderColor}`}>\n            <div className=\"flex items-center mb-6\">\n              <div className={`w-16 h-16 rounded-full flex items-center justify-center ${stage.color} mr-4`}>\n                {stage.icon}\n              </div>\n              <div>\n                <h2 className=\"text-2xl font-semibold text-neutral-800 mb-2\">\n                  {stage.stage}\n                </h2>\n                <div className=\"flex items-center space-x-4\">\n                  <span className=\"bg-neutral-100 text-neutral-700 px-3 py-1 rounded-full text-sm font-medium\">\n                    {stage.ageRange}\n                  </span>\n                  <p className=\"text-neutral-600\">\n                    {stage.description}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"grid md:grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n              {stage.keyFeatures.map((feature, featureIndex) => (\n                <div key={featureIndex} className=\"bg-white p-6 rounded-lg shadow-sm\">\n                  <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n                    {feature.title}\n                  </h3>\n                  <ul className=\"space-y-3\">\n                    {feature.details.map((detail, detailIndex) => (\n                      <li key={detailIndex} className=\"flex items-start\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                        <span className=\"text-sm text-neutral-700\">{detail}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ))}\n            </div>\n\n            <div className={`${stage.color.replace('text-', 'bg-').replace('-600', '-100')} p-4 rounded-lg`}>\n              <h4 className={`font-semibold mb-3 ${stage.color.replace('bg-', 'text-').replace('-50', '-800')}`}>\n                {locale === 'zh' ? 'ä¸“é¡¹å·¥å…·åŒ…ï¼š' : 'Specialized Toolkit:'}\n              </h4>\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-3\">\n                {stage.emergencyKit.map((item, itemIndex) => (\n                  <div key={itemIndex} className=\"bg-white p-3 rounded text-center\">\n                    <span className=\"text-sm text-neutral-700\">{item}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* PDF Resources for Adolescence Program */}\n            {index === 0 && (\n              <div className=\"mt-6 bg-blue-50 p-6 rounded-lg border border-blue-200\">\n                <h4 className=\"font-semibold mb-4 text-blue-800 flex items-center\">\n                  <Download className=\"w-5 h-5 mr-2\" />\n                  {locale === 'zh' ? 'ç›¸å…³PDFèµ„æºä¸‹è½½' : 'Related PDF Resources'}\n                </h4>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <Link\n                    href={`/${locale}/downloads/preview/campus-emergency-checklist`}\n                    className=\"flex items-center p-3 bg-white rounded-lg hover:bg-blue-50 transition-colors border border-blue-100 hover:border-blue-300\"\n                  >\n                    <ExternalLink className=\"w-4 h-4 text-blue-600 mr-3 flex-shrink-0\" />\n                    <div>\n                      <div className=\"font-medium text-blue-800 text-sm\">\n                        {locale === 'zh' ? 'æ ¡å›­åº”æ€¥æ¸…å•' : 'Campus Emergency Checklist'}\n                      </div>\n                      <div className=\"text-xs text-blue-600\">\n                        {locale === 'zh' ? 'æ ¡å›­ç»æœŸåº”æ€¥å¤„ç†æŒ‡å—' : 'Campus menstrual emergency guide'}\n                      </div>\n                    </div>\n                  </Link>\n\n                  <Link\n                    href={`/${locale}/downloads/preview/parent-communication-guide`}\n                    className=\"flex items-center p-3 bg-white rounded-lg hover:bg-blue-50 transition-colors border border-blue-100 hover:border-blue-300\"\n                  >\n                    <ExternalLink className=\"w-4 h-4 text-blue-600 mr-3 flex-shrink-0\" />\n                    <div>\n                      <div className=\"font-medium text-blue-800 text-sm\">\n                        {locale === 'zh' ? 'å®¶é•¿æ²Ÿé€šæŒ‡å¯¼æ‰‹å†Œ' : 'Parent Communication Guide'}\n                      </div>\n                      <div className=\"text-xs text-blue-600\">\n                        {locale === 'zh' ? 'å¸®åŠ©å®¶é•¿ä¸é’æ˜¥æœŸå¥³å„¿æ²Ÿé€š' : 'Help parents communicate with teenage daughters'}\n                      </div>\n                    </div>\n                  </Link>\n\n                  <Link\n                    href={`/${locale}/downloads/preview/teacher-health-manual`}\n                    className=\"flex items-center p-3 bg-white rounded-lg hover:bg-blue-50 transition-colors border border-blue-100 hover:border-blue-300\"\n                  >\n                    <ExternalLink className=\"w-4 h-4 text-blue-600 mr-3 flex-shrink-0\" />\n                    <div>\n                      <div className=\"font-medium text-blue-800 text-sm\">\n                        {locale === 'zh' ? 'æ•™å¸ˆå¥åº·ç®¡ç†æ‰‹å†Œ' : 'Teacher Health Manual'}\n                      </div>\n                      <div className=\"text-xs text-blue-600\">\n                        {locale === 'zh' ? 'æ•™å¸ˆå’Œå­¦æ ¡å«ç”Ÿäººå‘˜æŒ‡å—' : 'Guide for teachers and school health personnel'}\n                      </div>\n                    </div>\n                  </Link>\n\n                  <Link\n                    href={`/${locale}/downloads/preview/teacher-collaboration-handbook`}\n                    className=\"flex items-center p-3 bg-white rounded-lg hover:bg-blue-50 transition-colors border border-blue-100 hover:border-blue-300\"\n                  >\n                    <ExternalLink className=\"w-4 h-4 text-blue-600 mr-3 flex-shrink-0\" />\n                    <div>\n                      <div className=\"font-medium text-blue-800 text-sm\">\n                        {locale === 'zh' ? 'æ•™å¸ˆåä½œæ‰‹å†Œ' : 'Teacher Collaboration Handbook'}\n                      </div>\n                      <div className=\"text-xs text-blue-600\">\n                        {locale === 'zh' ? 'ç†è§£ä¸æ”¯æŒç»æœŸä¸é€‚çš„é’å°‘å¹´å­¦ç”Ÿ' : 'Understanding and supporting adolescent students with menstrual discomfort'}\n                      </div>\n                    </div>\n                  </Link>\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n      </section>\n\n      {/* Common Challenges Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Shield className=\"w-6 h-6 text-red-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'è·¨é˜¶æ®µå…±åŒæŒ‘æˆ˜' : 'Cross-Stage Common Challenges'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {commonChallenges.map((item, index) => (\n            <div key={index} className=\"card\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n                {item.challenge}\n              </h3>\n              <ul className=\"space-y-3\">\n                {item.solutions.map((solution, solutionIndex) => (\n                  <li key={solutionIndex} className=\"flex items-start\">\n                    <span className=\"w-5 h-5 bg-red-100 text-red-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                      {solutionIndex + 1}\n                    </span>\n                    <span className=\"text-sm text-neutral-700\">{solution}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Professional Support */}\n      <section className=\"bg-yellow-50 p-6 md:p-8 rounded-xl\">\n        <h3 className=\"text-lg font-semibold text-yellow-800 mb-4 flex items-center\">\n          <Users className=\"w-5 h-5 mr-2\" />\n          {locale === 'zh' ? 'ä¸“ä¸šæ”¯æŒç½‘ç»œ' : 'Professional Support Network'}\n        </h3>\n        <div className=\"grid md:grid-cols-2 gap-6 text-sm text-yellow-700\">\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'åŒ»ç–—ä¸“ä¸šäººå£«' : 'Medical Professionals'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'å¦‡äº§ç§‘åŒ»ç”Ÿï¼šä¸“ä¸šè¯Šæ–­å’Œæ²»ç–—å»ºè®®' : 'Gynecologists: Professional diagnosis and treatment advice'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å†…åˆ†æ³Œç§‘åŒ»ç”Ÿï¼šæ¿€ç´ æ°´å¹³è°ƒèŠ‚' : 'Endocrinologists: Hormone level regulation'}</li>\n              <li>â€¢ {locale === 'zh' ? 'è¥å…»å¸ˆï¼šä¸ªæ€§åŒ–é¥®é£ŸæŒ‡å¯¼' : 'Nutritionists: Personalized dietary guidance'}</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'å¿ƒç†å¥åº·æ”¯æŒ' : 'Mental Health Support'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'å¿ƒç†å’¨è¯¢å¸ˆï¼šæƒ…ç»ªç®¡ç†å’Œå‹åŠ›ç¼“è§£' : 'Psychologists: Emotional management and stress relief'}</li>\n              <li>â€¢ {locale === 'zh' ? 'åŒé¾„äººæ”¯æŒå°ç»„ï¼šç»éªŒåˆ†äº«å’Œäº’åŠ©' : 'Peer support groups: Experience sharing and mutual aid'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å®¶åº­æ”¯æŒç³»ç»Ÿï¼šç†è§£å’Œå…³çˆ±' : 'Family support system: Understanding and care'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center\">\n        <Link \n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/office/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Users' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Thermometer' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":42,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":16}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport {\n  Briefcase,\n  Clock,\n  Coffee,\n  Users,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Thermometer,\n  Utensils,\n  Dumbbell,\n  MessageCircle,\n  Hand,\n  Copy\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${t('scenarios.office.title')} - ${t('title')}`,\n    description: t('scenarios.office.description'),\n  };\n}\n\nexport default async function OfficeScenarioPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const emergencyKitItems = [\n    {\n      category: locale === 'zh' ? 'æ ¸å¿ƒè£…å¤‡' : 'Core Equipment',\n      items: [\n        locale === 'zh' ? 'å¯ç²˜è´´æš–å®å®ï¼ˆThermaCareéšå½¢è´´ç‰‡ï¼‰' : 'Adhesive heat patches (ThermaCare invisible patches)',\n        locale === 'zh' ? 'è¿·ä½ ç”µçƒ­æŠ¤è…°ï¼ˆUSBå……ç”µæ¬¾ï¼‰' : 'Mini electric heating pad (USB rechargeable)',\n        locale === 'zh' ? 'å§œèŒ¶å†²å‰‚æ¡ï¼ˆæ— ç³–é…æ–¹ï¼‰' : 'Ginger tea sachets (sugar-free formula)',\n        locale === 'zh' ? 'åº”æ€¥èƒ½é‡èƒ¶ï¼ˆå«é•+ç»´ç”Ÿç´ B6ï¼‰' : 'Emergency energy gel (with magnesium + vitamin B6)'\n      ]\n    },\n    {\n      category: locale === 'zh' ? 'ç–¼ç—›ç¼“è§£' : 'Pain Relief',\n      items: [\n        locale === 'zh' ? 'å¸ƒæ´›èŠ¬/å¯¹ä¹™é…°æ°¨åŸºé…š' : 'Ibuprofen/Acetaminophen',\n        locale === 'zh' ? 'è–„è·è†ï¼ˆå¤ªé˜³ç©´æŒ‰æ‘©ç”¨ï¼‰' : 'Peppermint balm (for temple massage)',\n        locale === 'zh' ? 'ç®€æ˜“æŒ‰æ‘©å·¥å…·' : 'Simple massage tools'\n      ]\n    },\n    {\n      category: locale === 'zh' ? 'å½¢è±¡ç®¡ç†' : 'Image Management',\n      items: [\n        locale === 'zh' ? 'é•œå­ã€å”‡è†ã€å¸æ²¹çº¸' : 'Mirror, lipstick, oil blotting paper',\n        locale === 'zh' ? 'å¹²å‘å–·é›¾ã€é™¤è‡­å‰‚' : 'Dry shampoo, deodorant',\n        locale === 'zh' ? 'åº”æ€¥åŒ–å¦†å“' : 'Emergency makeup'\n      ]\n    }\n  ];\n\n  const stretchExercises = [\n    {\n      name: locale === 'zh' ? 'åº§æ¤…éª¨ç›†æ—¶é’Ÿè¿åŠ¨' : 'Chair Pelvic Clock Movement',\n      description: locale === 'zh' ? 'ç¼“è§£éª¶é«‚å…³èŠ‚å‹åŠ›ï¼Œæ”¹å–„ä¸‹èƒŒéƒ¨è¡€æ¶²å¾ªç¯' : 'Relieves sacroiliac joint pressure, improves lower back circulation',\n      duration: locale === 'zh' ? 'æ¯æ¬¡30ç§’ï¼Œé‡å¤3-5æ¬¡' : '30 seconds each, repeat 3-5 times',\n      steps: [\n        locale === 'zh' ? 'ååœ¨æ¤…å­è¾¹ç¼˜ï¼ŒåŒè„šå¹³æ”¾åœ°é¢' : 'Sit on edge of chair, feet flat on floor',\n        locale === 'zh' ? 'æƒ³è±¡éª¨ç›†æ˜¯æ—¶é’Ÿï¼Œç¼“æ…¢ç”»åœ†' : 'Imagine pelvis as clock, slowly draw circles',\n        locale === 'zh' ? 'é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆå„åšä¸€ç»„' : 'Do one set clockwise and counterclockwise'\n      ]\n    },\n    {\n      name: locale === 'zh' ? 'éšè—å¼è¶³åº•æŒ‰æ‘©' : 'Hidden Foot Massage',\n      description: locale === 'zh' ? 'åˆ©ç”¨æ¡Œä¸‹ç­‹è†œçƒï¼Œä¿ƒè¿›ä¸‹è‚¢è¡€æ¶²å›æµ' : 'Use under-desk fascia ball to promote lower limb blood return',\n      duration: locale === 'zh' ? 'éšæ—¶è¿›è¡Œï¼Œæ¯æ¬¡2-3åˆ†é’Ÿ' : 'Anytime, 2-3 minutes each',\n      steps: [\n        locale === 'zh' ? 'åœ¨æ¡Œä¸‹æ”¾ç½®å°å‹æŒ‰æ‘©çƒ' : 'Place small massage ball under desk',\n        locale === 'zh' ? 'è„±æ‰é‹å­ï¼Œç”¨è„šåº•æ»šåŠ¨æŒ‰æ‘©çƒ' : 'Remove shoes, roll ball with sole of foot',\n        locale === 'zh' ? 'é‡ç‚¹æŒ‰å‹è¶³å¼“å’Œè„šè·Ÿéƒ¨ä½' : 'Focus on arch and heel areas'\n      ]\n    },\n    {\n      name: locale === 'zh' ? 'é¥®æ°´æœºæ—ä¾§è…°æ‹‰ä¼¸' : 'Side Waist Stretch by Water Cooler',\n      description: locale === 'zh' ? 'è‡ªç„¶ç«™ç«‹å§¿åŠ¿ï¼Œç¼“è§£è…°éƒ¨ç´§å¼ ' : 'Natural standing position, relieves waist tension',\n      duration: locale === 'zh' ? 'æ¯ä¾§ä¿æŒ15-30ç§’' : 'Hold 15-30 seconds each side',\n      steps: [\n        locale === 'zh' ? 'ç«™åœ¨é¥®æ°´æœºæ—ï¼ŒåŒè„šä¸è‚©åŒå®½' : 'Stand by water cooler, feet shoulder-width apart',\n        locale === 'zh' ? 'ä¸€æ‰‹æ‰¶è…°ï¼Œå¦ä¸€æ‰‹å‘ä¸Šä¼¸å±•' : 'One hand on waist, other arm stretch up',\n        locale === 'zh' ? 'èº«ä½“å‘ä¸€ä¾§å¼¯æ›²ï¼Œæ„Ÿå—ä¾§è…°æ‹‰ä¼¸' : 'Bend body to one side, feel side waist stretch'\n      ]\n    }\n  ];\n\n  const nutritionPlan = [\n    {\n      time: locale === 'zh' ? 'æ—©é¤ (7:00-8:00)' : 'Breakfast (7:00-8:00)',\n      foods: locale === 'zh' ? 'ç‡•éº¦ç²¥+åšæœ+é¦™è•‰' : 'Oatmeal + nuts + banana',\n      benefits: locale === 'zh' ? 'æä¾›æŒç»­èƒ½é‡ï¼Œç¨³å®šè¡€ç³–' : 'Provides sustained energy, stabilizes blood sugar'\n    },\n    {\n      time: locale === 'zh' ? 'ä¸ŠåˆèŒ¶ (10:00)' : 'Morning Tea (10:00)',\n      foods: locale === 'zh' ? 'çº¢æ£èŒ¶æˆ–ç«ç‘°èŠ±èŒ¶' : 'Red date tea or rose tea',\n      benefits: locale === 'zh' ? 'æ¸©æš–å­å®«ï¼Œç¼“è§£ç—‰æŒ›' : 'Warms uterus, relieves cramps'\n    },\n    {\n      time: locale === 'zh' ? 'åˆé¤ (12:00-13:00)' : 'Lunch (12:00-13:00)',\n      foods: locale === 'zh' ? 'ç˜¦è‚‰+æ·±ç»¿è‰²è”¬èœ+ç³™ç±³' : 'Lean meat + dark green vegetables + brown rice',\n      benefits: locale === 'zh' ? 'è¡¥é“è¡¥çº¤ç»´ï¼Œé¢„é˜²è´«è¡€' : 'Iron and fiber supplement, prevents anemia'\n    },\n    {\n      time: locale === 'zh' ? 'ä¸‹åˆèŒ¶ (15:00)' : 'Afternoon Tea (15:00)',\n      foods: locale === 'zh' ? 'é»‘å·§å…‹åŠ›+æ¸©ç‰›å¥¶' : 'Dark chocolate + warm milk',\n      benefits: locale === 'zh' ? 'ç¼“è§£æƒ…ç»ªæ³¢åŠ¨ï¼Œè¡¥å……é•å…ƒç´ ' : 'Relieves mood swings, supplements magnesium'\n    }\n  ];\n\n  // æ²Ÿé€šæ¨¡æ¿æ•°æ®\n  const communicationTemplates = [\n    {\n      scenario: locale === 'zh' ? 'ä¸ä¼´ä¾£æ²Ÿé€š' : 'Communicating with Partner',\n      icon: 'ğŸ’•',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'é€šçŸ¥å‘ŠçŸ¥' : 'Notification',\n          tone: locale === 'zh' ? 'äº²å¯†' : 'Intimate',\n          template: locale === 'zh' ? '\"äº²çˆ±çš„ï¼Œæˆ‘ä»Šå¤©èº«ä½“ä¸å¤ªèˆ’æœï¼Œå¯èƒ½éœ€è¦å¤šä¼‘æ¯ä¸€ä¸‹ã€‚å¦‚æœæˆ‘çœ‹èµ·æ¥æœ‰ç‚¹ä¸èˆ’æœï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚\"' : '\"Honey, I\\'m not feeling well today and might need more rest. If I seem uncomfortable, please don\\'t worry.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        },\n        {\n          situation: locale === 'zh' ? 'å¯»æ±‚ç†è§£' : 'Seeking Understanding',\n          tone: locale === 'zh' ? 'äº²å¯†' : 'Intimate',\n          template: locale === 'zh' ? '\"æˆ‘ç°åœ¨æœ‰äº›ç–¼ç—›ï¼Œå¯èƒ½æƒ…ç»ªä¼šæœ‰äº›æ³¢åŠ¨ã€‚ä½ èƒ½ç†è§£å¹¶ç»™æˆ‘ä¸€äº›æ—¶é—´å’Œç©ºé—´å—ï¼Ÿæˆ‘ä¼šå°½å¿«æ¢å¤çš„ã€‚\"' : '\"I\\'m experiencing some pain and my emotions might fluctuate. Can you understand and give me some time and space? I\\'ll recover soon.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'ä¸æœ‹å‹æ²Ÿé€š' : 'Communicating with Friends',\n      icon: 'ğŸ‘­',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'çº¦ä¼šæ”¹æœŸ' : 'Rescheduling Date',\n          tone: locale === 'zh' ? 'éšæ„' : 'Casual',\n          template: locale === 'zh' ? '\"ä¸å¥½æ„æ€ï¼Œæˆ‘ä»Šå¤©èº«ä½“æœ‰ç‚¹ä¸å¤ªèˆ’æœï¼Œå¯èƒ½æ²¡æ³•ä¿æŒæœ€ä½³çŠ¶æ€ã€‚æˆ‘ä»¬èƒ½æ”¹åˆ°ä¸‹æ¬¡å—ï¼Ÿæˆ‘ä¼šè¡¥å¿ä½ çš„ï¼\"' : '\"Sorry, I\\'m not feeling well today and might not be at my best. Can we reschedule? I\\'ll make it up to you!\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        },\n        {\n          situation: locale === 'zh' ? 'èšä¼šå‚ä¸' : 'Party Participation',\n          tone: locale === 'zh' ? 'éšæ„' : 'Casual',\n          template: locale === 'zh' ? '\"æˆ‘å¯èƒ½ä¼šæ¥èšä¼šï¼Œä½†å¯èƒ½éœ€è¦æ—©ç‚¹ç¦»å¼€ã€‚å¦‚æœæˆ‘çœ‹èµ·æ¥æœ‰ç‚¹ç´¯ï¼Œä½ ä»¬ç†è§£å°±å¥½ã€‚\"' : '\"I might come to the party but may need to leave early. If I look tired, please understand.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'ä¸åŒäº‹æ²Ÿé€š' : 'Communicating with Colleagues',\n      icon: 'ğŸ‘”',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'è¯·å‡ç”³è¯·' : 'Leave Request',\n          tone: locale === 'zh' ? 'æ­£å¼' : 'Formal',\n          template: locale === 'zh' ? '\"æ‚¨å¥½ï¼Œæˆ‘ä»Šå¤©èº«ä½“ä¸å¤ªèˆ’æœï¼Œå¯èƒ½éœ€è¦è¯·åŠå¤©å‡å»å¤„ç†èº«ä½“é—®é¢˜ã€‚æˆ‘ä¼šå°½å¿«å¤„ç†å®Œå…¶ä»–äº‹åŠ¡çš„ã€‚\"' : '\"Hello, I\\'m not feeling well today and may need to take half a day off to address health issues. I\\'ll handle other matters as soon as possible.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        },\n        {\n          situation: locale === 'zh' ? 'å·¥ä½œè°ƒæ•´' : 'Work Adjustment',\n          tone: locale === 'zh' ? 'æ­£å¼' : 'Formal',\n          template: locale === 'zh' ? '\"ä¸å¥½æ„æ€ï¼Œæˆ‘ä»Šå¤©èº«ä½“æœ‰äº›ä¸é€‚ï¼Œå¯èƒ½å·¥ä½œæ•ˆç‡ä¼šæœ‰æ‰€å½±å“ã€‚å¦‚æœæœ‰æ€¥äº‹è¯·ä¼˜å…ˆå®‰æ’ï¼Œå…¶ä»–äº‹åŠ¡æˆ‘ä¼šå°½å¿«å®Œæˆã€‚\"' : '\"Sorry, I\\'m feeling unwell today and my work efficiency might be affected. Please prioritize urgent matters, and I\\'ll complete other tasks as soon as possible.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        }\n      ]\n    }\n  ];\n\n  // ç©´ä½æŒ‰å‹æŠ€å·§\n  const acupressurePoints = [\n    {\n      name: locale === 'zh' ? 'åˆè°·ç©´' : 'Hegu Point',\n      location: locale === 'zh' ? 'è™å£å¤„ï¼Œæ‹‡æŒ‡å’Œé£ŸæŒ‡ä¹‹é—´' : 'Tiger mouth area, between thumb and index finger',\n      benefits: locale === 'zh' ? 'ç–è‚ç†æ°”ã€æ´»è¡€åŒ–ç˜€ï¼Œç¼“è§£å…¨èº«ç–¼ç—›' : 'Soothes liver qi, promotes blood circulation, relieves general pain',\n      technique: locale === 'zh' ? 'ç”¨æ‹‡æŒ‡æŒ‡è…¹æŒ‰å‹ï¼ŒåŠ›åº¦é€‚ä¸­ï¼Œæ¯æ¬¡30ç§’' : 'Press with thumb pad, moderate pressure, 30 seconds each time',\n      officeUse: locale === 'zh' ? 'å¯åœ¨å¼€ä¼šæ—¶éšè”½è¿›è¡Œï¼Œä¸å¼•äººæ³¨æ„' : 'Can be done discreetly during meetings without drawing attention'\n    },\n    {\n      name: locale === 'zh' ? 'ä¸‰é˜´äº¤ç©´' : 'Sanyinjiao Point',\n      location: locale === 'zh' ? 'å°è…¿å†…ä¾§ï¼Œè¸å…³èŠ‚ä¸Šä¸‰å¯¸' : 'Inner side of lower leg, three fingers above ankle',\n      benefits: locale === 'zh' ? 'è°ƒç†æ°”è¡€ï¼Œä¸“é—¨ç¼“è§£å¦‡ç§‘ç–¼ç—›' : 'Regulates qi and blood, specifically relieves gynecological pain',\n      technique: locale === 'zh' ? 'ç”¨æ‹‡æŒ‡æŒ‰å‹ï¼Œé…åˆæ·±å‘¼å¸ï¼Œæ¯æ¬¡1-2åˆ†é’Ÿ' : 'Press with thumb, coordinate with deep breathing, 1-2 minutes each time',\n      officeUse: locale === 'zh' ? 'å¯åœ¨æ¡Œä¸‹è¿›è¡Œï¼Œè„±æ‰é‹å­æŒ‰å‹æ•ˆæœæ›´å¥½' : 'Can be done under desk, better effect when shoes are removed'\n    }\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 md:space-y-12\" data-page=\"scenario-office\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">{t('scenarios.office.title')}</span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <div className=\"w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <Briefcase className=\"w-8 h-8\" />\n        </div>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('scenarios.office.title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('scenarios.office.description')}\n        </p>\n      </header>\n\n      {/* Emergency Kit Section */}\n      <section className=\"bg-gradient-to-br from-blue-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"flex items-center mb-6\">\n          <AlertTriangle className=\"w-6 h-6 text-blue-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ä¼šè®®åº”æ€¥åŒ…' : 'Meeting Emergency Kit'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {emergencyKitItems.map((category, index) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n                {category.category}\n              </h3>\n              <ul className=\"space-y-3\">\n                {category.items.map((item, itemIndex) => (\n                  <li key={itemIndex} className=\"flex items-start\">\n                    <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-sm text-neutral-700\">{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-6 p-4 bg-blue-100 rounded-lg\">\n          <h4 className=\"font-semibold text-blue-800 mb-2\">\n            {locale === 'zh' ? 'éšè”½ä½¿ç”¨æŒ‡å—' : 'Discreet Usage Guide'}\n          </h4>\n          <ul className=\"text-sm text-blue-700 space-y-1\">\n            <li>â€¢ {locale === 'zh' ? 'çƒ­æ•·è´´å¯åŠ¨å€Ÿå£ï¼š\"æ­£åœ¨ç”¨æš–å®å®ç¼“è§£è‚©é¢ˆé…¸ç—›\"' : 'Heat patch excuse: \"Using heat pad for neck and shoulder pain\"'}</li>\n            <li>â€¢ {locale === 'zh' ? 'çªå‘ç–¼ç—›ç¦»åœºè¯æœ¯ï¼š\"éœ€è¦ç´§æ€¥å¤„ç†å®¢æˆ·é‚®ä»¶\"' : 'Emergency exit phrase: \"Need to handle urgent client email\"'}</li>\n          </ul>\n        </div>\n      </section>\n\n      {/* Stretching Exercises Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Dumbbell className=\"w-6 h-6 text-blue-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'åŠå…¬æ¤…æ‹‰ä¼¸ç³»ç»Ÿ' : 'Office Chair Stretching System'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-1 lg:grid-cols-3 gap-6\">\n          {stretchExercises.map((exercise, index) => (\n            <div key={index} className=\"card\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n                {exercise.name}\n              </h3>\n              <p className=\"text-neutral-600 mb-4\">\n                {exercise.description}\n              </p>\n              <div className=\"mb-4\">\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                  <Clock className=\"w-3 h-3 mr-1\" />\n                  {exercise.duration}\n                </span>\n              </div>\n              <ol className=\"space-y-2\">\n                {exercise.steps.map((step, stepIndex) => (\n                  <li key={stepIndex} className=\"flex items-start text-sm text-neutral-700\">\n                    <span className=\"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-medium mr-2 mt-0.5 flex-shrink-0\">\n                      {stepIndex + 1}\n                    </span>\n                    {step}\n                  </li>\n                ))}\n              </ol>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Nutrition Plan Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Utensils className=\"w-6 h-6 text-blue-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'èŒåœºé¥®é£Ÿç®¡ç†' : 'Workplace Nutrition Management'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {nutritionPlan.map((meal, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"flex items-center mb-3\">\n                <Coffee className=\"w-5 h-5 text-blue-600 mr-2\" />\n                <h3 className=\"text-lg font-semibold text-neutral-800\">\n                  {meal.time}\n                </h3>\n              </div>\n              <p className=\"text-neutral-700 mb-2 font-medium\">\n                {meal.foods}\n              </p>\n              <p className=\"text-sm text-neutral-600\">\n                {meal.benefits}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-6 p-6 bg-red-50 rounded-lg\">\n          <h4 className=\"font-semibold text-red-800 mb-3\">\n            {locale === 'zh' ? 'é¿å…é£Ÿç‰©æ¸…å•' : 'Foods to Avoid'}\n          </h4>\n          <div className=\"grid md:grid-cols-3 gap-4 text-sm text-red-700\">\n            <div>\n              <strong>{locale === 'zh' ? 'å†°é¥®ç±»ï¼š' : 'Cold drinks:'}</strong>\n              <p>{locale === 'zh' ? 'å†°å’–å•¡ã€å†·é¥®ã€å†°æ°´' : 'Iced coffee, cold drinks, ice water'}</p>\n            </div>\n            <div>\n              <strong>{locale === 'zh' ? 'é«˜ç›é›¶é£Ÿï¼š' : 'High-salt snacks:'}</strong>\n              <p>{locale === 'zh' ? 'è–¯ç‰‡ã€è…Œåˆ¶é£Ÿå“' : 'Chips, pickled foods'}</p>\n            </div>\n            <div>\n              <strong>{locale === 'zh' ? 'è¿‡é‡å’–å•¡å› ï¼š' : 'Excessive caffeine:'}</strong>\n              <p>{locale === 'zh' ? 'æµ“å’–å•¡ã€èƒ½é‡é¥®æ–™' : 'Strong coffee, energy drinks'}</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Communication Templates Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <MessageCircle className=\"w-6 h-6 text-blue-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'æ²Ÿé€šæ¨¡æ¿åŠ©æ‰‹' : 'Communication Template Assistant'}\n          </h2>\n        </div>\n        <p className=\"text-neutral-600 mb-8\">\n          {locale === 'zh' ? 'ç»æœŸä¸é€‚æ—¶ï¼Œä¸èº«è¾¹çš„äººè¿›è¡Œæœ‰æ•ˆæ²Ÿé€šã€‚è¿™äº›æ¨¡æ¿å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°è¡¨è¾¾éœ€æ±‚å’Œå¯»æ±‚ç†è§£ã€‚' : 'Effective communication with people around you during menstrual discomfort. These templates help you better express needs and seek understanding.'}\n        </p>\n\n        <div className=\"space-y-8\">\n          {communicationTemplates.map((category, index) => (\n            <div key={index} className=\"bg-gradient-to-br from-blue-50 to-neutral-50 p-6 rounded-xl\">\n              <div className=\"flex items-center mb-6\">\n                <span className=\"text-2xl mr-3\">{category.icon}</span>\n                <h3 className=\"text-xl font-semibold text-neutral-800\">\n                  {category.scenario}\n                </h3>\n              </div>\n\n              <div className=\"grid md:grid-cols-1 gap-4\">\n                {category.templates.map((template, templateIndex) => (\n                  <div key={templateIndex} className=\"bg-white p-6 rounded-lg shadow-sm\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-medium text-neutral-800\">{template.situation}</h4>\n                      <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full\">\n                        {template.tone}\n                      </span>\n                    </div>\n\n                    <div className=\"bg-blue-50 p-4 rounded-lg mb-4\">\n                      <p className=\"text-blue-800 leading-relaxed\">\n                        {template.template}\n                      </p>\n                    </div>\n\n                    <div className=\"inline-flex items-center text-blue-600 text-sm font-medium\">\n                      <Copy className=\"w-4 h-4 mr-1\" />\n                      <span className=\"text-xs text-neutral-500\">\n                        {locale === 'zh' ? 'å¯å¤åˆ¶ä½¿ç”¨' : 'Copy to use'}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Acupressure Points Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Hand className=\"w-6 h-6 text-blue-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'åŠå…¬å®¤ç©´ä½æŒ‰å‹' : 'Office Acupressure Points'}\n          </h2>\n        </div>\n        <p className=\"text-neutral-600 mb-8\">\n          {locale === 'zh' ? 'ç®€å•æ˜“å­¦çš„ç©´ä½æŒ‰å‹æŠ€å·§ï¼Œå¯ä»¥åœ¨åŠå…¬å®¤éšè”½è¿›è¡Œï¼Œå¿«é€Ÿç¼“è§£ç–¼ç—›ä¸é€‚ã€‚' : 'Simple acupressure techniques that can be done discreetly in the office to quickly relieve pain and discomfort.'}\n        </p>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {acupressurePoints.map((point, index) => (\n            <div key={index} className=\"card\">\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n                {point.name}\n              </h3>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <h4 className=\"font-medium text-neutral-700 mb-2\">\n                    {locale === 'zh' ? 'ä½ç½®ï¼š' : 'Location:'}\n                  </h4>\n                  <p className=\"text-neutral-600 text-sm\">{point.location}</p>\n                </div>\n\n                <div>\n                  <h4 className=\"font-medium text-neutral-700 mb-2\">\n                    {locale === 'zh' ? 'åŠŸæ•ˆï¼š' : 'Benefits:'}\n                  </h4>\n                  <p className=\"text-neutral-600 text-sm\">{point.benefits}</p>\n                </div>\n\n                <div>\n                  <h4 className=\"font-medium text-neutral-700 mb-2\">\n                    {locale === 'zh' ? 'æŒ‰å‹æ–¹æ³•ï¼š' : 'Technique:'}\n                  </h4>\n                  <p className=\"text-neutral-600 text-sm\">{point.technique}</p>\n                </div>\n\n                <div className=\"bg-blue-50 p-3 rounded-lg\">\n                  <h4 className=\"font-medium text-blue-800 mb-1 text-sm\">\n                    {locale === 'zh' ? 'åŠå…¬å®¤åº”ç”¨ï¼š' : 'Office Application:'}\n                  </h4>\n                  <p className=\"text-blue-700 text-sm\">{point.officeUse}</p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-6 p-4 bg-yellow-50 rounded-lg\">\n          <h4 className=\"font-semibold text-yellow-800 mb-2\">\n            {locale === 'zh' ? 'ç§‘å­¦ä¾æ®' : 'Scientific Basis'}\n          </h4>\n          <p className=\"text-yellow-700 text-sm\">\n            {locale === 'zh' ? 'ç©´ä½æŒ‰å‹é€šè¿‡åˆºæ¿€ç‰¹å®šç¥ç»ç‚¹ï¼Œä¿ƒè¿›å†…å•¡è‚½é‡Šæ”¾ï¼Œè¿™æ˜¯äººä½“å¤©ç„¶çš„æ­¢ç—›ç‰©è´¨ã€‚ç°ä»£ç ”ç©¶è¡¨æ˜ï¼Œé€‚å½“çš„ç©´ä½åˆºæ¿€å¯ä»¥è°ƒèŠ‚ç¥ç»ä¼ å¯¼ï¼Œç¼“è§£ç–¼ç—›æ„ŸçŸ¥ã€‚' : 'Acupressure works by stimulating specific nerve points, promoting endorphin release, which are the body\\'s natural painkillers. Modern research shows that appropriate acupoint stimulation can regulate nerve conduction and relieve pain perception.'}\n          </p>\n        </div>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center\">\n        <Link\n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/sleep/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":39,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":16}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { \n  Moon, \n  Volume2, \n  Bed, \n  Coffee,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Clock,\n  Thermometer,\n  Heart\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${t('scenarios.sleep.title')} - ${t('title')}`,\n    description: t('scenarios.sleep.description'),\n  };\n}\n\nexport default async function SleepScenarioPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const audioSystems = [\n    {\n      type: locale === 'zh' ? 'ç™½å™ªéŸ³éŸ³é¢‘' : 'White Noise Audio',\n      icon: <Volume2 className=\"w-6 h-6\" />,\n      color: 'bg-blue-50 text-blue-600',\n      description: locale === 'zh' ? 'é›¨å£°ã€æµ·æµªå£°ã€é£å£°ã€é¸Ÿé¸£å£°ç­‰è‡ªç„¶ç™½å™ªéŸ³' : 'Rain, ocean waves, wind, bird sounds and other natural white noise',\n      benefits: [\n        locale === 'zh' ? 'æ©ç›–ç¯å¢ƒæ‚éŸ³ï¼Œåˆ›é€ å®‰é™ç¡çœ ç¯å¢ƒ' : 'Mask environmental noise, create quiet sleep environment',\n        locale === 'zh' ? 'ç¨³å®šé¢‘ç‡åˆºæ¿€å¤§è„‘äº§ç”ŸÎ±è„‘ç”µæ³¢' : 'Stable frequency stimulates brain to produce alpha waves',\n        locale === 'zh' ? 'æŒç»­30-60åˆ†é’Ÿï¼Œç¼“è§£å¤±çœ å’Œç„¦è™‘' : 'Play for 30-60 minutes, relieves insomnia and anxiety'\n      ]\n    },\n    {\n      type: locale === 'zh' ? 'å†¥æƒ³å¼•å¯¼éŸ³é¢‘' : 'Guided Meditation Audio',\n      icon: <Heart className=\"w-6 h-6\" />,\n      color: 'bg-purple-50 text-purple-600',\n      description: locale === 'zh' ? 'ä¸“ä¸šå†¥æƒ³å¯¼å¸ˆå¼•å¯¼çš„ç¡çœ å†¥æƒ³ç»ƒä¹ ' : 'Sleep meditation practices guided by professional meditation instructors',\n      benefits: [\n        locale === 'zh' ? 'å¼•å¯¼æ·±å‘¼å¸ã€èº«ä½“æ‰«æã€æ”¾æ¾å†¥æƒ³' : 'Guides deep breathing, body scanning, relaxation meditation',\n        locale === 'zh' ? 'å°†æ³¨æ„åŠ›ä»ç–¼ç—›è½¬ç§»åˆ°å†…åœ¨å¹³é™' : 'Shifts attention from pain to inner peace',\n        locale === 'zh' ? '15-20åˆ†é’Ÿé€æ­¥æ”¾æ¾èº«ä½“å„éƒ¨ä½' : '15-20 minutes gradually relaxing each body part'\n      ]\n    },\n    {\n      type: locale === 'zh' ? 'ç”Ÿç‰©åé¦ˆéŸ³ä¹' : 'Biofeedback Music',\n      icon: <Thermometer className=\"w-6 h-6\" />,\n      color: 'bg-green-50 text-green-600',\n      description: locale === 'zh' ? '528Hzä¿®å¤é¢‘ç‡ï¼ŒæŠ‘åˆ¶PGF2Î±åˆæˆé…¶æ´»æ€§' : '528Hz healing frequency, inhibits PGF2Î± synthase activity',\n      benefits: [\n        locale === 'zh' ? 'ç§‘å­¦é¢‘ç‡ç¼“è§£ç”Ÿç†ç–¼ç—›' : 'Scientific frequency relieves physiological pain',\n        locale === 'zh' ? 'ä¿ƒè¿›ç»†èƒä¿®å¤å’Œå†ç”Ÿ' : 'Promotes cell repair and regeneration',\n        locale === 'zh' ? 'é™ä½å¿ƒç‡ï¼Œæ”¾æ¾è‚Œè‚‰' : 'Lowers heart rate, relaxes muscles'\n      ]\n    }\n  ];\n\n  const sleepPositions = [\n    {\n      position: locale === 'zh' ? 'å·¦ä¾§å§ä½' : 'Left Side Position',\n      effectiveness: '68%',\n      description: locale === 'zh' ? 'åŒè…¿å¤¹å­•å¦‡æ•ï¼Œéª¨ç›†å€¾æ–œ15Â°' : 'Pregnancy pillow between legs, pelvis tilted 15Â°',\n      benefits: [\n        locale === 'zh' ? 'å‡è½»å­å®«å¯¹è…¹ä¸»åŠ¨è„‰çš„å‹è¿«' : 'Reduces uterine pressure on abdominal aorta',\n        locale === 'zh' ? 'æ”¹å–„å­å®«è¡€æ¶²ä¾›åº”ï¼Œå‡å°‘ç–¼ç—›' : 'Improves uterine blood supply, reduces pain',\n        locale === 'zh' ? 'ä¿ƒè¿›ç»è¡€é¡ºç•…æ’å‡º' : 'Promotes smooth menstrual flow'\n      ],\n      tools: [locale === 'zh' ? 'é•¿æ¡å½¢æŠ±æ•' : 'Long body pillow', locale === 'zh' ? 'å­•å¦‡æ•' : 'Pregnancy pillow']\n    },\n    {\n      position: locale === 'zh' ? 'åŠä»°å§ä½' : 'Semi-Supine Position',\n      effectiveness: '55%',\n      description: locale === 'zh' ? 'è†ä¸‹å«æ¥”å½¢æ•ï¼Œè…°éƒ¨å®Œå…¨æ‚¬ç©º' : 'Wedge pillow under knees, lower back completely suspended',\n      benefits: [\n        locale === 'zh' ? 'ä¿ƒè¿›ç›†è…”è¡€æ¶²å›æµ' : 'Promotes pelvic blood return',\n        locale === 'zh' ? 'å‡è½»ç›†è…”å……è¡€å’Œè‚¿èƒ€' : 'Reduces pelvic congestion and swelling',\n        locale === 'zh' ? 'ç¼“è§£ä¸‹è…¹éƒ¨ç–¼ç—›' : 'Relieves lower abdominal pain'\n      ],\n      tools: [locale === 'zh' ? 'æ¥”å½¢æ•' : 'Wedge pillow', locale === 'zh' ? 'è…¿éƒ¨æŠ¬é«˜å«' : 'Leg elevation pad']\n    },\n    {\n      position: locale === 'zh' ? 'èœ·å§ä½ï¼ˆèƒå„¿å¼ï¼‰' : 'Fetal Position',\n      effectiveness: '62%',\n      description: locale === 'zh' ? 'åŒè†é—´å¤¹æ•å¤´ï¼Œç±»ä¼¼å­å®«å†…å§¿åŠ¿' : 'Pillow between knees, similar to in-utero position',\n      benefits: [\n        locale === 'zh' ? 'å¸¦æ¥å®‰å…¨æ„Ÿå’Œèˆ’é€‚æ„Ÿ' : 'Provides sense of security and comfort',\n        locale === 'zh' ? 'ç¼“è§£èº«ä½“ç´§å¼ å’Œç–¼ç—›' : 'Relieves body tension and pain',\n        locale === 'zh' ? 'å‡è½»é«‹éƒ¨å’Œè…°éƒ¨å‹åŠ›' : 'Reduces hip and lower back pressure'\n      ],\n      tools: [locale === 'zh' ? 'è†é—´æ•' : 'Knee pillow', locale === 'zh' ? 'å¯å¾®æ³¢æš–å®«æ•' : 'Microwaveable warming pillow']\n    }\n  ];\n\n  const bedtimeFoods = {\n    recommended: [\n      {\n        food: locale === 'zh' ? 'æ¸©ç‰›å¥¶+èœ‚èœœ' : 'Warm Milk + Honey',\n        component: locale === 'zh' ? 'è‰²æ°¨é…¸+å¤©ç„¶ç³–åˆ†' : 'Tryptophan + Natural sugars',\n        benefit: locale === 'zh' ? 'ä¿ƒè¿›è¤ªé»‘ç´ åˆ†æ³Œï¼Œå¸®åŠ©å¿«é€Ÿå…¥ç¡' : 'Promotes melatonin secretion, helps fall asleep quickly'\n      },\n      {\n        food: locale === 'zh' ? 'é¦™è•‰+æä»å¥¶' : 'Banana + Almond Milk',\n        component: locale === 'zh' ? 'é•+è‰²æ°¨é…¸' : 'Magnesium + Tryptophan',\n        benefit: locale === 'zh' ? 'æ”¾æ¾è‚Œè‚‰ï¼Œç¼“è§£ç—‰æŒ›' : 'Relaxes muscles, relieves cramps'\n      },\n      {\n        food: locale === 'zh' ? 'æ¨±æ¡ƒæ±' : 'Cherry Juice',\n        component: locale === 'zh' ? 'å¤©ç„¶è¤ªé»‘ç´ ' : 'Natural melatonin',\n        benefit: locale === 'zh' ? 'è°ƒèŠ‚ç¡çœ èŠ‚å¾‹ï¼Œæ”¹å–„ç¡çœ è´¨é‡' : 'Regulates sleep rhythm, improves sleep quality'\n      },\n      {\n        food: locale === 'zh' ? 'å…¨éº¦é¢åŒ…+åšæœ' : 'Whole Grain Bread + Nuts',\n        component: locale === 'zh' ? 'å¤åˆç¢³æ°´+é•' : 'Complex carbs + Magnesium',\n        benefit: locale === 'zh' ? 'ç¨³å®šè¡€ç³–ï¼ŒæŒç»­é‡Šæ”¾èƒ½é‡' : 'Stabilizes blood sugar, sustained energy release'\n      }\n    ],\n    avoid: [\n      {\n        item: locale === 'zh' ? 'å’–å•¡å› é¥®æ–™' : 'Caffeinated beverages',\n        reason: locale === 'zh' ? 'ç¡å‰6å°æ—¶å†…é¿å…ï¼Œåˆºæ¿€ç¥ç»ç³»ç»Ÿ' : 'Avoid 6 hours before bed, stimulates nervous system'\n      },\n      {\n        item: locale === 'zh' ? 'é…’ç²¾' : 'Alcohol',\n        reason: locale === 'zh' ? 'å½±å“æ·±åº¦ç¡çœ ï¼Œå¯èƒ½å¢åŠ ç»è¡€æµé‡' : 'Affects deep sleep, may increase menstrual flow'\n      },\n      {\n        item: locale === 'zh' ? 'é«˜ç³–é£Ÿç‰©' : 'High-sugar foods',\n        reason: locale === 'zh' ? 'é€ æˆè¡€ç³–æ³¢åŠ¨ï¼Œå½±å“ç¡çœ ç¨³å®šæ€§' : 'Causes blood sugar fluctuations, affects sleep stability'\n      },\n      {\n        item: locale === 'zh' ? 'è¾›è¾£é£Ÿç‰©' : 'Spicy foods',\n        reason: locale === 'zh' ? 'åˆºæ¿€è‚ èƒƒï¼Œå¯èƒ½å½±å“ç¡çœ è´¨é‡' : 'Irritates digestive system, may affect sleep quality'\n      }\n    ]\n  };\n\n  const sleepEnvironment = [\n    {\n      aspect: locale === 'zh' ? 'å£°æ³¢ç–—æ³•' : 'Sound Therapy',\n      details: locale === 'zh' ? '432Hzå­å®«ä¿®å¤é¢‘ç‡éŸ³é¢‘' : '432Hz uterine healing frequency audio',\n      icon: <Volume2 className=\"w-5 h-5\" />\n    },\n    {\n      aspect: locale === 'zh' ? 'å…‰ç¯å¢ƒ' : 'Light Environment',\n      details: locale === 'zh' ? 'ç¥ç€è‰²å¤œç¯ï¼ˆæŠ‘åˆ¶è¤ªé»‘ç´ å¹²æ‰°ï¼‰' : 'Amber night light (prevents melatonin interference)',\n      icon: <Moon className=\"w-5 h-5\" />\n    },\n    {\n      aspect: locale === 'zh' ? 'è§¦è§‰åé¦ˆ' : 'Tactile Feedback',\n      details: locale === 'zh' ? 'é‡åŠ›è¢«ï¼ˆ7-9kgå‹åŠ›ç¼“è§£ç„¦è™‘ï¼‰' : 'Weighted blanket (7-9kg pressure relieves anxiety)',\n      icon: <Bed className=\"w-5 h-5\" />\n    },\n    {\n      aspect: locale === 'zh' ? 'æ¸©åº¦æ§åˆ¶' : 'Temperature Control',\n      details: locale === 'zh' ? 'å®¤æ¸©18-22â„ƒï¼Œæ¹¿åº¦50-60%' : 'Room temp 18-22â„ƒ, humidity 50-60%',\n      icon: <Thermometer className=\"w-5 h-5\" />\n    }\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 md:space-y-12\" data-page=\"scenario-sleep\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">{t('scenarios.sleep.title')}</span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <div className=\"w-16 h-16 bg-purple-50 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <Moon className=\"w-8 h-8\" />\n        </div>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('scenarios.sleep.title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('scenarios.sleep.description')}\n        </p>\n      </header>\n\n      {/* Audio Systems Section */}\n      <section className=\"bg-gradient-to-br from-purple-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"flex items-center mb-6\">\n          <Volume2 className=\"w-6 h-6 text-purple-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ä¸‰ç»´åŠ©çœ éŸ³é¢‘ç³»ç»Ÿ' : 'Three-Dimensional Sleep Audio System'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {audioSystems.map((audio, index) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm\">\n              <div className={`w-12 h-12 rounded-full flex items-center justify-center ${audio.color} mb-4`}>\n                {audio.icon}\n              </div>\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-3\">\n                {audio.type}\n              </h3>\n              <p className=\"text-neutral-600 mb-4 text-sm\">\n                {audio.description}\n              </p>\n              <ul className=\"space-y-2\">\n                {audio.benefits.map((benefit, benefitIndex) => (\n                  <li key={benefitIndex} className=\"flex items-start text-sm text-neutral-700\">\n                    <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                    {benefit}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Sleep Positions Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Bed className=\"w-6 h-6 text-purple-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ç§‘å­¦ç¡å§¿çŸ©é˜µ' : 'Scientific Sleep Position Matrix'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-1 lg:grid-cols-3 gap-6\">\n          {sleepPositions.map((position, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-neutral-800\">\n                  {position.position}\n                </h3>\n                <span className=\"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full\">\n                  {locale === 'zh' ? 'ç¼“è§£ç‡' : 'Relief Rate'} {position.effectiveness}\n                </span>\n              </div>\n              \n              <p className=\"text-neutral-600 mb-4 text-sm\">\n                <strong>{locale === 'zh' ? 'å®æ–½è¦ç‚¹ï¼š' : 'Key Points: '}</strong>\n                {position.description}\n              </p>\n\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'åŠŸæ•ˆï¼š' : 'Benefits:'}\n                </h4>\n                <ul className=\"space-y-1\">\n                  {position.benefits.map((benefit, benefitIndex) => (\n                    <li key={benefitIndex} className=\"flex items-start text-sm text-neutral-700\">\n                      <span className=\"w-2 h-2 bg-purple-400 rounded-full mr-2 mt-2\"></span>\n                      {benefit}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n\n              <div>\n                <h4 className=\"font-medium text-neutral-800 mb-2\">\n                  {locale === 'zh' ? 'è¾…åŠ©å·¥å…·ï¼š' : 'Support Tools:'}\n                </h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {position.tools.map((tool, toolIndex) => (\n                    <span key={toolIndex} className=\"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded\">\n                      {tool}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Bedtime Nutrition Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Coffee className=\"w-6 h-6 text-purple-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ç¡å‰é¥®é£Ÿå»ºè®®' : 'Bedtime Nutrition Recommendations'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          <div className=\"bg-green-50 p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-green-800 mb-4\">\n              {locale === 'zh' ? 'æ¨èé£Ÿç‰©' : 'Recommended Foods'}\n            </h3>\n            <div className=\"space-y-4\">\n              {bedtimeFoods.recommended.map((food, index) => (\n                <div key={index} className=\"border-l-4 border-green-400 pl-4\">\n                  <h4 className=\"font-medium text-green-800\">{food.food}</h4>\n                  <p className=\"text-sm text-green-600 mb-1\">\n                    <strong>{locale === 'zh' ? 'ä¸»è¦æˆåˆ†ï¼š' : 'Key Components: '}</strong>\n                    {food.component}\n                  </p>\n                  <p className=\"text-sm text-green-700\">{food.benefit}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"bg-red-50 p-6 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-red-800 mb-4\">\n              {locale === 'zh' ? 'é¿å…é£Ÿç‰©' : 'Foods to Avoid'}\n            </h3>\n            <div className=\"space-y-4\">\n              {bedtimeFoods.avoid.map((item, index) => (\n                <div key={index} className=\"border-l-4 border-red-400 pl-4\">\n                  <h4 className=\"font-medium text-red-800\">{item.item}</h4>\n                  <p className=\"text-sm text-red-700\">{item.reason}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Sleep Environment Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Moon className=\"w-6 h-6 text-purple-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ç¡çœ ç¯å¢ƒä¼˜åŒ–' : 'Sleep Environment Optimization'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {sleepEnvironment.map((env, index) => (\n            <div key={index} className=\"card text-center\">\n              <div className=\"w-12 h-12 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                {env.icon}\n              </div>\n              <h3 className=\"text-lg font-semibold text-neutral-800 mb-2\">\n                {env.aspect}\n              </h3>\n              <p className=\"text-sm text-neutral-600\">\n                {env.details}\n              </p>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Sleep Tips */}\n      <section className=\"bg-yellow-50 p-6 md:p-8 rounded-xl\">\n        <h3 className=\"text-lg font-semibold text-yellow-800 mb-4 flex items-center\">\n          <Clock className=\"w-5 h-5 mr-2\" />\n          {locale === 'zh' ? 'ç¡çœ æ—¶é—´ç®¡ç†' : 'Sleep Time Management'}\n        </h3>\n        <div className=\"grid md:grid-cols-3 gap-6 text-sm text-yellow-700\">\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'ç¡å‰2å°æ—¶' : '2 Hours Before Bed'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'åœæ­¢è¿›é£Ÿï¼Œé¿å…æ¶ˆåŒ–è´Ÿæ‹…' : 'Stop eating, avoid digestive burden'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å¼€å§‹æ’­æ”¾åŠ©çœ éŸ³é¢‘' : 'Start playing sleep audio'}</li>\n              <li>â€¢ {locale === 'zh' ? 'è°ƒæš—å®¤å†…ç¯å…‰' : 'Dim room lighting'}</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'ç¡å‰1å°æ—¶' : '1 Hour Before Bed'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'æ¸©æ°´æ´—æ¾¡ï¼Œæ”¾æ¾èº«å¿ƒ' : 'Warm bath, relax body and mind'}</li>\n              <li>â€¢ {locale === 'zh' ? 'è¿›è¡Œè½»æŸ”æ‹‰ä¼¸è¿åŠ¨' : 'Gentle stretching exercises'}</li>\n              <li>â€¢ {locale === 'zh' ? 'é¿å…ä½¿ç”¨ç”µå­è®¾å¤‡' : 'Avoid electronic devices'}</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-2\">{locale === 'zh' ? 'ç¡å‰30åˆ†é’Ÿ' : '30 Minutes Before Bed'}</h4>\n            <ul className=\"space-y-1\">\n              <li>â€¢ {locale === 'zh' ? 'è°ƒæ•´åˆ°æœ€ä½³ç¡å§¿' : 'Adjust to optimal sleep position'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ä½¿ç”¨æš–å®«è´´æˆ–çƒ­æ°´è¢‹' : 'Use warming patches or hot water bottle'}</li>\n              <li>â€¢ {locale === 'zh' ? 'è¿›è¡Œæ·±å‘¼å¸ç»ƒä¹ ' : 'Practice deep breathing'}</li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center\">\n        <Link \n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/scenario-solutions/social/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'commonT' is assigned a value but never used.","line":40,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport {\n  Users,\n  Heart,\n  Wine,\n  CheckCircle,\n  ArrowLeft,\n  AlertTriangle,\n  Clock,\n  Shield,\n  MessageCircle,\n  Copy,\n  Quote\n} from 'lucide-react';\n\n// Types\ntype Locale = 'en' | 'zh';\n\ninterface Props {\n  params: Promise<{ locale: Locale }>;\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'scenarioSolutionsPage' });\n  \n  return {\n    title: `${t('scenarios.social.title')} - ${t('title')}`,\n    description: t('scenarios.social.description'),\n  };\n}\n\nexport default async function SocialScenarioPage({ params }: Props) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n  \n  const t = await getTranslations('scenarioSolutionsPage');\n  const commonT = await getTranslations('common');\n\n  const dateStrategies = [\n    {\n      phase: locale === 'zh' ? 'çº¦ä¼šå‰å‡†å¤‡' : 'Pre-Date Preparation',\n      icon: <Clock className=\"w-5 h-5\" />,\n      strategies: [\n        locale === 'zh' ? 'æå‰3å¤©å¼€å§‹è®°å½•ç»æœŸç—‡çŠ¶' : 'Start tracking period symptoms 3 days in advance',\n        locale === 'zh' ? 'å‡†å¤‡å°å·§åº”æ€¥åŒ…ï¼šæ­¢ç—›è¯ã€å«ç”Ÿç”¨å“ã€æ¹¿å·¾' : 'Prepare compact emergency kit: pain meds, sanitary products, wipes',\n        locale === 'zh' ? 'é€‰æ‹©æ·±è‰²æœè£…ï¼Œå‡†å¤‡å¤–å¥—é®æŒ¡' : 'Choose dark clothing, prepare jacket for coverage',\n        locale === 'zh' ? 'æå‰æŸ¥è¯¢çº¦ä¼šåœ°ç‚¹é™„è¿‘çš„å«ç”Ÿé—´ä½ç½®' : 'Research restroom locations near date venue'\n      ]\n    },\n    {\n      phase: locale === 'zh' ? 'çº¦ä¼šä¸­åº”å¯¹' : 'During Date Management',\n      icon: <Heart className=\"w-5 h-5\" />,\n      strategies: [\n        locale === 'zh' ? 'å€Ÿå£ç­–ç•¥ï¼š\"éœ€è¦è¡¥å¦†\"ã€\"æ¥ä¸ªé‡è¦ç”µè¯\"' : 'Excuse strategies: \"Need to touch up makeup\", \"Important call\"',\n        locale === 'zh' ? 'é€‰æ‹©åº§ä½æ—¶è€ƒè™‘å¿«é€Ÿç¦»å¼€çš„ä¾¿åˆ©æ€§' : 'Choose seating considering quick exit convenience',\n        locale === 'zh' ? 'æ§åˆ¶é¥®æ°´é‡ï¼Œé¿å…é¢‘ç¹å¦‚å•å¼•èµ·æ³¨æ„' : 'Control water intake, avoid frequent bathroom trips',\n        locale === 'zh' ? 'é€‰æ‹©èˆ’é€‚çš„æ´»åŠ¨ï¼šçœ‹ç”µå½±ã€åƒé¥­ã€æ•£æ­¥' : 'Choose comfortable activities: movies, dining, walking'\n      ]\n    },\n    {\n      phase: locale === 'zh' ? 'çªå‘çŠ¶å†µå¤„ç†' : 'Emergency Situation Handling',\n      icon: <AlertTriangle className=\"w-5 h-5\" />,\n      strategies: [\n        locale === 'zh' ? 'è½»åº¦ä¸é€‚ï¼šæ·±å‘¼å¸ï¼Œé€‚å½“è¡¨è¾¾éœ€è¦çŸ­æš‚ä¼‘æ¯' : 'Mild discomfort: deep breathing, express need for brief rest',\n        locale === 'zh' ? 'å‰§çƒˆç—›ç»ï¼šè¯šå®è¯´æ˜èº«ä½“ä¸é€‚ï¼Œæè®®æ”¹æœŸ' : 'Severe cramps: honestly explain discomfort, suggest rescheduling',\n        locale === 'zh' ? 'æƒ…ç»ªæ³¢åŠ¨ï¼šé€šè¿‡è°ƒæ•´å‘¼å¸èŠ‚å¥ç¼“è§£' : 'Mood swings: relieve through breathing rhythm adjustment',\n        locale === 'zh' ? 'åº”æ€¥ç¦»åœºï¼šå¯åŠ¨\"è¿‡æ•é¢„æ¡ˆ\"æˆ–\"çªå‘å·¥ä½œ\"' : 'Emergency exit: activate \"allergy plan\" or \"urgent work\"'\n      ]\n    }\n  ];\n\n  const partyFoodGuide = {\n    recommended: [\n      {\n        category: locale === 'zh' ? 'ä¸»é£Ÿé€‰æ‹©' : 'Main Food Choices',\n        items: [\n          locale === 'zh' ? 'çƒ¤é¸¡èƒ¸è‚‰ï¼ˆå¯Œå«è›‹ç™½è´¨å’Œé“ï¼‰' : 'Grilled chicken breast (rich in protein and iron)',\n          locale === 'zh' ? 'çƒ¤ä¸‰æ–‡é±¼ï¼ˆæŠ—ç‚omega-3ï¼‰' : 'Grilled salmon (anti-inflammatory omega-3)',\n          locale === 'zh' ? 'è”¬èœæ²™æ‹‰ï¼ˆè¡¥å……ç»´ç”Ÿç´ ï¼‰' : 'Vegetable salad (vitamin supplement)',\n          locale === 'zh' ? 'å…¨éº¦é¢åŒ…ï¼ˆå¤åˆç¢³æ°´åŒ–åˆç‰©ï¼‰' : 'Whole grain bread (complex carbohydrates)'\n        ]\n      },\n      {\n        category: locale === 'zh' ? 'é¥®å“é€‰æ‹©' : 'Beverage Choices',\n        items: [\n          locale === 'zh' ? 'çƒ­è‹¹æœé†‹è‹æ‰“æ°´ï¼ˆç¼“è§£èƒ€æ°”ï¼‰' : 'Hot apple cider vinegar soda (relieves bloating)',\n          locale === 'zh' ? 'ç´«è–¯å§œå¥¶ï¼ˆæš–å®«é¥®å“ï¼‰' : 'Purple sweet potato ginger milk (warming drink)',\n          locale === 'zh' ? 'æ— ç³–èŒ¶ç±»ï¼ˆæŠ—æ°§åŒ–ï¼‰' : 'Sugar-free teas (antioxidant)',\n          locale === 'zh' ? 'æ¸©å¼€æ°´ï¼ˆä¿æŒæ°´åˆ†ï¼‰' : 'Warm water (maintain hydration)'\n        ]\n      }\n    ],\n    avoid: [\n      {\n        category: locale === 'zh' ? 'é«˜é£é™©é£Ÿç‰©' : 'High-Risk Foods',\n        items: [\n          locale === 'zh' ? 'å†°æ·‡æ·‹ã€å†·é¥®ï¼ˆå¯¼è‡´å­å®«æ”¶ç¼©ï¼‰' : 'Ice cream, cold drinks (cause uterine contractions)',\n          locale === 'zh' ? 'è–¯ç‰‡ã€ç‚¸é¸¡ï¼ˆé«˜ç›é«˜è„‚ï¼‰' : 'Chips, fried chicken (high salt, high fat)',\n          locale === 'zh' ? 'å¥¶æ²¹è›‹ç³•ï¼ˆé«˜ç³–å¯¼è‡´è¡€ç³–æ³¢åŠ¨ï¼‰' : 'Cream cake (high sugar causes blood sugar fluctuations)',\n          locale === 'zh' ? 'è¾›è¾£é£Ÿç‰©ï¼ˆåˆºæ¿€è‚ èƒƒï¼‰' : 'Spicy foods (irritate digestive system)'\n        ]\n      },\n      {\n        category: locale === 'zh' ? 'é…’ç²¾ç®¡ç†' : 'Alcohol Management',\n        items: [\n          locale === 'zh' ? 'çƒˆé…’ï¼ˆåŠ é‡ç—›ç»ç—‡çŠ¶ï¼‰' : 'Hard liquor (worsens menstrual symptoms)',\n          locale === 'zh' ? 'å¤§é‡é…’ç²¾ï¼ˆå½±å“ç»è¡€æµé‡ï¼‰' : 'Large amounts of alcohol (affects menstrual flow)',\n          locale === 'zh' ? 'ç©ºè…¹é¥®é…’ï¼ˆåŠ é‡èº«ä½“è´Ÿæ‹…ï¼‰' : 'Drinking on empty stomach (increases body burden)',\n          locale === 'zh' ? 'å«å’–å•¡å› é¸¡å°¾é…’ï¼ˆåˆºæ¿€ç¥ç»ï¼‰' : 'Caffeinated cocktails (stimulate nerves)'\n        ]\n      }\n    ]\n  };\n\n  const alcoholStrategies = [\n    {\n      strategy: locale === 'zh' ? 'åŒ»å­¦çº§æ‹’é…’è¯æœ¯' : 'Medical-Grade Alcohol Refusal',\n      excuse: locale === 'zh' ? '\"æ­£åœ¨æœç”¨æŠ—ç”Ÿç´ ï¼Œä¸èƒ½é¥®é…’\"' : '\"Taking antibiotics, cannot drink alcohol\"',\n      effectiveness: '95%'\n    },\n    {\n      strategy: locale === 'zh' ? 'æ— é†‡èµ·æ³¡é…’ä¼ªè£…æœ¯' : 'Non-Alcoholic Sparkling Wine Disguise',\n      excuse: locale === 'zh' ? 'æå‰ä¸æœåŠ¡å‘˜å¯†çº¦ï¼Œç”¨æ— é†‡é¥®å“æ›¿ä»£' : 'Pre-arrange with server to substitute non-alcoholic drinks',\n      effectiveness: '90%'\n    },\n    {\n      strategy: locale === 'zh' ? 'é©¾é©¶è´£ä»»å€Ÿå£' : 'Driving Responsibility Excuse',\n      excuse: locale === 'zh' ? '\"ä»Šæ™šæˆ‘æ˜¯æŒ‡å®šå¸æœº\"' : '\"I\\'m the designated driver tonight\"',\n      effectiveness: '85%'\n    },\n    {\n      strategy: locale === 'zh' ? 'å¥åº·ç”Ÿæ´»æ–¹å¼' : 'Healthy Lifestyle',\n      excuse: locale === 'zh' ? '\"æœ€è¿‘åœ¨è°ƒç†èº«ä½“ï¼Œæš‚æ—¶æˆ’é…’\"' : '\"Recently focusing on health, temporarily abstaining from alcohol\"',\n      effectiveness: '80%'\n    }\n  ];\n\n  // ç¤¾äº¤æ²Ÿé€šæ¨¡æ¿\n  const socialCommunicationTemplates = [\n    {\n      scenario: locale === 'zh' ? 'ä¸ä¼´ä¾£æ²Ÿé€š' : 'Communicating with Partner',\n      icon: 'ğŸ’•',\n      userQuote: locale === 'zh' ? '\"æœ¬æ¥çº¦äº†å–œæ¬¢çš„äººåƒé¥­ï¼Œç»“æœç—›å¾—å®Œå…¨æ²¡å¿ƒæƒ…ï¼Œåªèƒ½æ¨æ‰ï¼Œæ„Ÿè§‰é”™å¤±æœºä¼šâ€¦â€¦\"' : '\"I had a dinner date with someone I like, but the pain made me completely lose interest, so I had to cancel. I feel like I missed an opportunity...\"',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'çº¦ä¼šæ”¹æœŸ' : 'Rescheduling Date',\n          tone: locale === 'zh' ? 'æ¸©æŸ”' : 'Gentle',\n          template: locale === 'zh' ? '\"ä¸å¥½æ„æ€ï¼Œæˆ‘ä»Šå¤©èº«ä½“æœ‰äº›ä¸èˆ’æœï¼Œå¯èƒ½æ²¡æ³•ä¿æŒæœ€ä½³çŠ¶æ€ã€‚æˆ‘ä»¬èƒ½æ”¹åˆ°ä¸‹æ¬¡å—ï¼Ÿæˆ‘çœŸçš„å¾ˆæœŸå¾…å’Œä½ è§é¢ã€‚\"' : '\"Sorry, I\\'m not feeling well today and might not be at my best. Can we reschedule? I\\'m really looking forward to seeing you.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        },\n        {\n          situation: locale === 'zh' ? 'å¯»æ±‚æ”¯æŒ' : 'Seeking Support',\n          tone: locale === 'zh' ? 'äº²å¯†' : 'Intimate',\n          template: locale === 'zh' ? '\"æˆ‘ç°åœ¨æœ‰äº›ç–¼ç—›ï¼Œå¯èƒ½æƒ…ç»ªä¼šæœ‰äº›æ³¢åŠ¨ã€‚ä½ èƒ½ç†è§£å¹¶ç»™æˆ‘ä¸€äº›æ¸©æš–çš„é™ªä¼´å—ï¼Ÿ\"' : '\"I\\'m experiencing some pain and my emotions might fluctuate. Can you understand and give me some warm companionship?\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'ä¸æœ‹å‹æ²Ÿé€š' : 'Communicating with Friends',\n      icon: 'ğŸ‘­',\n      userQuote: locale === 'zh' ? '\"å‚åŠ æœ‹å‹èšä¼šæ‹…å¿ƒçªç„¶è‚šå­ç—›ï¼Œåˆä¸èƒ½åƒåœ¨å®¶ä¸€æ ·éšä¾¿èººï¼Œå¾ˆçº ç»“è¦ä¸è¦å»ã€‚\"' : '\"I\\'m worried about sudden stomach pain at a friend\\'s party, and I can\\'t just lie down like at home. I\\'m torn about whether to go.\"',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'èšä¼šå‚ä¸' : 'Party Participation',\n          tone: locale === 'zh' ? 'éšæ„' : 'Casual',\n          template: locale === 'zh' ? '\"æˆ‘å¯èƒ½ä¼šæ¥èšä¼šï¼Œä½†å¯èƒ½éœ€è¦æ—©ç‚¹ç¦»å¼€æˆ–è€…ä¸­é€”ä¼‘æ¯ä¸€ä¸‹ã€‚å¦‚æœæˆ‘çœ‹èµ·æ¥æœ‰ç‚¹ç´¯ï¼Œä½ ä»¬ç†è§£å°±å¥½ã€‚\"' : '\"I might come to the party but may need to leave early or take breaks. If I look tired, please understand.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        },\n        {\n          situation: locale === 'zh' ? 'å¯»æ±‚æ”¯æŒ' : 'Seeking Support',\n          tone: locale === 'zh' ? 'éšæ„' : 'Casual',\n          template: locale === 'zh' ? '\"å§å¦¹ï¼Œæˆ‘ç°åœ¨ç»æœŸç—›å¾—å‰å®³ï¼Œä½ æœ‰ä»€ä¹ˆå¥½çš„ç¼“è§£æ–¹æ³•å—ï¼Ÿæˆ–è€…å°±æ˜¯é™ªæˆ‘èŠèŠå¤©ä¹Ÿå¥½ã€‚\"' : '\"Girl, I\\'m having severe period pain right now. Do you have any good relief methods? Or just chat with me would be nice.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        }\n      ]\n    },\n    {\n      scenario: locale === 'zh' ? 'ä¼šè®®å‚ä¸' : 'Meeting Participation',\n      icon: 'ğŸ¤',\n      userQuote: locale === 'zh' ? '\"æˆ‘å¯èƒ½éœ€è¦ä¼šè®®ä¸­é€”ç¦»å¼€ä¸€ä¸‹ï¼Œä½†åˆä¸æƒ³è®©å¤§å®¶è§‰å¾—æˆ‘ä¸ä¸“ä¸šâ€¦â€¦\"' : '\"I might need to leave the meeting briefly, but I don\\'t want everyone to think I\\'m unprofessional...\"',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'ä¼šè®®å‚ä¸' : 'Meeting Participation',\n          tone: locale === 'zh' ? 'æ­£å¼' : 'Formal',\n          template: locale === 'zh' ? '\"æˆ‘å¯èƒ½éœ€è¦ä¼šè®®ä¸­é€”ç¦»å¼€ä¸€ä¸‹å¤„ç†ç´§æ€¥äº‹åŠ¡ï¼Œå¦‚æœæœ‰é‡è¦å†…å®¹è¯·å¸®æˆ‘è®°å½•ï¼Œè°¢è°¢å¤§å®¶çš„ç†è§£ã€‚\"' : '\"I might need to step out briefly to handle urgent matters. If there\\'s important content, please help me take notes. Thank you for your understanding.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        },\n        {\n          situation: locale === 'zh' ? 'å¯»æ±‚æ”¯æŒ' : 'Seeking Support',\n          tone: locale === 'zh' ? 'æ­£å¼' : 'Formal',\n          template: locale === 'zh' ? '\"æˆ‘ä»Šå¤©èº«ä½“æœ‰äº›ä¸é€‚ï¼Œå¯èƒ½ä¼šå½±å“æˆ‘çš„å‚ä¸åº¦ã€‚å¦‚æœæœ‰éœ€è¦æˆ‘é‡ç‚¹å…³æ³¨çš„å†…å®¹ï¼Œè¯·æé†’æˆ‘ã€‚\"' : '\"I\\'m feeling unwell today and it might affect my participation. If there\\'s content I need to focus on, please remind me.\"',\n          copyText: locale === 'zh' ? 'å¤åˆ¶æ–‡æœ¬' : 'Copy Text'\n        }\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 md:space-y-12\" data-page=\"scenario-social\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center space-x-2 text-sm text-neutral-600\">\n        <Link href={`/${locale}/scenario-solutions`} className=\"hover:text-primary-600 transition-colors\">\n          {t('title')}\n        </Link>\n        <span>/</span>\n        <span className=\"text-neutral-800\">{t('scenarios.social.title')}</span>\n      </nav>\n\n      {/* Page Header */}\n      <header className=\"text-center\">\n        <div className=\"w-16 h-16 bg-pink-50 text-pink-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <Users className=\"w-8 h-8\" />\n        </div>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-primary-700 mb-4\">\n          {t('scenarios.social.title')}\n        </h1>\n        <p className=\"text-lg text-neutral-600 max-w-3xl mx-auto\">\n          {t('scenarios.social.description')}\n        </p>\n      </header>\n\n      {/* Date Strategies Section */}\n      <section className=\"bg-gradient-to-br from-pink-50 to-neutral-50 p-6 md:p-8 rounded-xl\">\n        <div className=\"flex items-center mb-6\">\n          <Heart className=\"w-6 h-6 text-pink-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'çº¦ä¼šåº”æ€¥ç­–ç•¥' : 'Date Emergency Strategies'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {dateStrategies.map((phase, index) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm\">\n              <div className=\"flex items-center mb-4\">\n                <div className=\"w-10 h-10 bg-pink-100 text-pink-600 rounded-full flex items-center justify-center mr-3\">\n                  {phase.icon}\n                </div>\n                <h3 className=\"text-lg font-semibold text-neutral-800\">\n                  {phase.phase}\n                </h3>\n              </div>\n              \n              <ul className=\"space-y-3\">\n                {phase.strategies.map((strategy, strategyIndex) => (\n                  <li key={strategyIndex} className=\"flex items-start\">\n                    <CheckCircle className=\"w-4 h-4 text-pink-500 mr-2 mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-sm text-neutral-700\">{strategy}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Party Food Guide Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Wine className=\"w-6 h-6 text-pink-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'èšä¼šé¥®é£Ÿæ™ºèƒ½é€‰æ‹©' : 'Smart Party Food Choices'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          <div className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-green-800 mb-4\">\n              {locale === 'zh' ? 'æ¨èé€‰æ‹©' : 'Recommended Choices'}\n            </h3>\n            {partyFoodGuide.recommended.map((category, index) => (\n              <div key={index} className=\"bg-green-50 p-6 rounded-lg\">\n                <h4 className=\"font-medium text-green-800 mb-3\">{category.category}</h4>\n                <ul className=\"space-y-2\">\n                  {category.items.map((item, itemIndex) => (\n                    <li key={itemIndex} className=\"flex items-start text-sm text-green-700\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-red-800 mb-4\">\n              {locale === 'zh' ? 'é¿å…é€‰æ‹©' : 'Avoid These Choices'}\n            </h3>\n            {partyFoodGuide.avoid.map((category, index) => (\n              <div key={index} className=\"bg-red-50 p-6 rounded-lg\">\n                <h4 className=\"font-medium text-red-800 mb-3\">{category.category}</h4>\n                <ul className=\"space-y-2\">\n                  {category.items.map((item, itemIndex) => (\n                    <li key={itemIndex} className=\"flex items-start text-sm text-red-700\">\n                      <AlertTriangle className=\"w-4 h-4 text-red-500 mr-2 mt-0.5 flex-shrink-0\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Alcohol Management Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <Shield className=\"w-6 h-6 text-pink-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'é…’ç²¾åº”å¯¹æ‰‹å†Œ' : 'Alcohol Management Handbook'}\n          </h2>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {alcoholStrategies.map((strategy, index) => (\n            <div key={index} className=\"card\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-lg font-semibold text-neutral-800\">\n                  {strategy.strategy}\n                </h3>\n                <span className=\"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full\">\n                  {locale === 'zh' ? 'æˆåŠŸç‡' : 'Success Rate'} {strategy.effectiveness}\n                </span>\n              </div>\n              \n              <div className=\"bg-blue-50 p-4 rounded-lg\">\n                <p className=\"text-blue-800 font-medium mb-2\">\n                  {locale === 'zh' ? 'è¯æœ¯ç¤ºä¾‹ï¼š' : 'Script Example:'}\n                </p>\n                <p className=\"text-blue-700 italic\">&ldquo;{strategy.excuse}&rdquo;</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Social Communication Templates Section */}\n      <section>\n        <div className=\"flex items-center mb-6\">\n          <MessageCircle className=\"w-6 h-6 text-pink-600 mr-3\" />\n          <h2 className=\"text-2xl font-semibold text-neutral-800\">\n            {locale === 'zh' ? 'ç¤¾äº¤æ²Ÿé€šåŠ©æ‰‹' : 'Social Communication Assistant'}\n          </h2>\n        </div>\n        <p className=\"text-neutral-600 mb-8\">\n          {locale === 'zh' ? 'ç»æœŸä¸é€‚æ—¶ï¼Œå¦‚ä½•ä¸ä¸åŒçš„äººè¿›è¡Œæœ‰æ•ˆæ²Ÿé€šï¼Œè·å¾—ç†è§£å’Œæ”¯æŒã€‚' : 'How to communicate effectively with different people during menstrual discomfort to gain understanding and support.'}\n        </p>\n\n        <div className=\"space-y-8\">\n          {socialCommunicationTemplates.map((category, index) => (\n            <div key={index} className=\"bg-gradient-to-br from-pink-50 to-neutral-50 p-6 rounded-xl\">\n              <div className=\"flex items-center mb-4\">\n                <span className=\"text-2xl mr-3\">{category.icon}</span>\n                <h3 className=\"text-xl font-semibold text-neutral-800\">\n                  {category.scenario}\n                </h3>\n              </div>\n\n              {/* User Quote */}\n              <div className=\"bg-white p-4 rounded-lg mb-6 border-l-4 border-pink-300\">\n                <div className=\"flex items-start\">\n                  <Quote className=\"w-5 h-5 text-pink-500 mr-2 mt-0.5 flex-shrink-0\" />\n                  <p className=\"text-neutral-700 italic text-sm leading-relaxed\">\n                    {category.userQuote}\n                  </p>\n                </div>\n                <p className=\"text-xs text-neutral-500 mt-2\">\n                  {locale === 'zh' ? 'â€”â€” æ¥è‡ªç”¨æˆ·è¯­å½•' : 'â€”â€” From user testimonials'}\n                </p>\n              </div>\n\n              <div className=\"grid md:grid-cols-1 gap-4\">\n                {category.templates.map((template, templateIndex) => (\n                  <div key={templateIndex} className=\"bg-white p-6 rounded-lg shadow-sm\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-medium text-neutral-800\">{template.situation}</h4>\n                      <span className=\"bg-pink-100 text-pink-800 text-xs font-medium px-2 py-1 rounded-full\">\n                        {template.tone}\n                      </span>\n                    </div>\n\n                    <div className=\"bg-pink-50 p-4 rounded-lg mb-4\">\n                      <p className=\"text-pink-800 leading-relaxed\">\n                        {template.template}\n                      </p>\n                    </div>\n\n                    <div className=\"inline-flex items-center text-pink-600 text-sm font-medium\">\n                      <Copy className=\"w-4 h-4 mr-1\" />\n                      <span className=\"text-xs text-neutral-500\">\n                        {locale === 'zh' ? 'å¯å¤åˆ¶ä½¿ç”¨' : 'Copy to use'}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n          <h4 className=\"font-semibold text-blue-800 mb-2\">\n            {locale === 'zh' ? 'ä½¿ç”¨æç¤º' : 'Usage Tips'}\n          </h4>\n          <ul className=\"text-blue-700 text-sm space-y-1\">\n            <li>â€¢ {locale === 'zh' ? 'æ ¹æ®å…³ç³»äº²å¯†åº¦é€‰æ‹©åˆé€‚çš„æ²Ÿé€šæ–¹å¼' : 'Choose appropriate communication style based on relationship intimacy'}</li>\n            <li>â€¢ {locale === 'zh' ? 'è¯šå®è¡¨è¾¾éœ€æ±‚ï¼Œä½†æ— éœ€è¿‡åº¦è§£é‡Š' : 'Express needs honestly without over-explaining'}</li>\n            <li>â€¢ {locale === 'zh' ? 'æå‰å‡†å¤‡è¯æœ¯ï¼Œé¿å…ä¸´æ—¶ç´§å¼ ' : 'Prepare scripts in advance to avoid last-minute nervousness'}</li>\n          </ul>\n        </div>\n      </section>\n\n      {/* Back to Overview */}\n      <div className=\"text-center\">\n        <Link\n          href={`/${locale}/scenario-solutions`}\n          className=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›åœºæ™¯è§£å†³æ–¹æ¡ˆæ€»è§ˆ' : 'Back to Scenario Solutions Overview'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/special-therapies/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/teen-health/campus-guide/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":31,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport Link from 'next/link';\nimport {\n  School,\n  Clock,\n  Heart,\n  Users,\n  AlertTriangle,\n  CheckCircle,\n  ArrowLeft,\n  ArrowRight,\n  Thermometer,\n  Pill,\n  Coffee,\n  Candy,\n  Home,\n  Activity,\n  MessageCircle,\n  BookOpen\n} from 'lucide-react';\nimport type { Metadata } from 'next';\n\ntype Locale = 'en' | 'zh';\n\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'teenHealth' });\n  \n  return {\n    title: locale === 'zh' ? 'æ ¡å›­åº”æ€¥æŒ‡å— - é’å°‘å¹´ç»æœŸå¥åº·ä¸“åŒº' : 'Campus Emergency Guide - Teen Menstrual Health Zone',\n    description: locale === 'zh' \n      ? 'åœ¨å­¦æ ¡çªç„¶ç—›èµ·æ¥æ€ä¹ˆåŠï¼Ÿè¯¾å ‚åº”æ€¥ã€å®¿èˆç®¡ç†ã€ä½“è‚²è¯¾åº”å¯¹ï¼Œå…¨æ–¹ä½æ ¡å›­ç”Ÿå­˜æŒ‡å—ã€‚'\n      : 'What to do when pain strikes at school? Classroom emergencies, dorm management, PE class strategies.',\n  };\n}\n\nexport default async function CampusGuidePage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const emergencySteps = [\n    {\n      icon: <Clock className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'å¿«é€Ÿè¯„ä¼°' : 'Quick Assessment',\n      description: locale === 'zh' ? 'æ„Ÿè§‰æœ‰ç‚¹ä¸èˆ’æœï¼Ÿè¿˜æ˜¯å·²ç»å¾ˆç—›äº†ï¼Ÿ' : 'Feeling a bit uncomfortable? Or already in significant pain?'\n    },\n    {\n      icon: <Heart className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'æ‚„æ‚„è‡ªæ•‘' : 'Discreet Self-Help',\n      description: locale === 'zh' ? 'è°ƒæ•´åå§¿ã€æ·±å‘¼å¸ã€è½»æŸ”æŒ‰æ‘©' : 'Adjust posture, deep breathing, gentle massage'\n    },\n    {\n      icon: <Users className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'å¯»æ±‚å¸®åŠ©' : 'Seek Help',\n      description: locale === 'zh' ? 'ç¤ºæ„è€å¸ˆæˆ–æ‰¾åŒå­¦å¸®å¿™' : 'Signal teacher or ask classmate for help'\n    }\n  ];\n\n  const emergencyKit = [\n    {\n      icon: <Thermometer className=\"w-5 h-5\" />,\n      item: locale === 'zh' ? 'è¿·ä½ çƒ­æ•·è´´/æš–å®å®' : 'Mini heat patches/warmers',\n      usage: locale === 'zh' ? 'è´´åœ¨å°è…¹æˆ–è…°éƒ¨ï¼Œéšæ—¶éšåœ°æä¾›æ¸©æš–' : 'Apply to abdomen or lower back for instant warmth'\n    },\n    {\n      icon: <Pill className=\"w-5 h-5\" />,\n      item: locale === 'zh' ? 'æ­¢ç—›è¯' : 'Pain medication',\n      usage: locale === 'zh' ? 'åœ¨å®¶é•¿åŒæ„å’ŒæŒ‡å¯¼ä¸‹ï¼Œéšèº«æºå¸¦é€‚é‡çš„å®‰å…¨æ­¢ç—›è¯' : 'Carry safe pain medication with parental consent and guidance'\n    },\n    {\n      icon: <Coffee className=\"w-5 h-5\" />,\n      item: locale === 'zh' ? 'çƒ­æ°´æ¯' : 'Hot water bottle',\n      usage: locale === 'zh' ? 'å’Œå­¦æ ¡æ²Ÿé€šï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å…è®¸ç»æœŸç‰¹åˆ«ä¸èˆ’æœæ—¶ä½¿ç”¨' : 'Communicate with school about using during particularly difficult periods'\n    },\n    {\n      icon: <Candy className=\"w-5 h-5\" />,\n      item: locale === 'zh' ? 'å°é›¶é£Ÿ' : 'Small snacks',\n      usage: locale === 'zh' ? 'ä¸€å—å·§å…‹åŠ›æˆ–å°‘é‡ç³–æœï¼Œæœ‰æ—¶å€™èƒ½å¸®ä½ åˆ†æ•£æ³¨æ„åŠ›' : 'A piece of chocolate or small candy can help distract and provide energy'\n    }\n  ];\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 space-y-12\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center text-sm text-gray-600\">\n        <Link href={`/${locale}/teen-health`} className=\"hover:text-primary-600 transition-colors\">\n          {locale === 'zh' ? 'é’å°‘å¹´ä¸“åŒº' : 'Teen Zone'}\n        </Link>\n        <span className=\"mx-2\">/</span>\n        <span className=\"text-gray-900\">{locale === 'zh' ? 'æ ¡å›­åº”æ€¥æŒ‡å—' : 'Campus Emergency Guide'}</span>\n      </nav>\n\n      {/* Header */}\n      <header className=\"text-center\">\n        <div className=\"flex justify-center mb-6\">\n          <div className=\"bg-blue-100 rounded-full p-4\">\n            <School className=\"w-12 h-12 text-blue-600\" />\n          </div>\n        </div>\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ğŸ« æ ¡å›­åº”æ€¥æŒ‡å—' : 'ğŸ« Campus Emergency Guide'}\n        </h1>\n        <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'å­¦æ ¡æ˜¯æ¯å¤©å¤§éƒ¨åˆ†æ—¶é—´å¾…çš„åœ°æ–¹ï¼Œå¦‚æœåœ¨è¯¾å ‚ä¸Šã€å®¿èˆé‡Œï¼Œç”šè‡³ä½“è‚²è¯¾ä¸Šç—›èµ·æ¥ï¼Œé‚£å¯çœŸæ˜¯å¤ªéš¾ç†¬äº†ï¼åˆ«æ…Œï¼Œæˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†è¿™ä»½\"æ ¡å›­ç”Ÿå­˜æŒ‡å—\"ã€‚'\n            : 'School is where you spend most of your day. If pain strikes in class, dorm, or even during PE, it can be really tough! Don\\'t panic - we\\'ve prepared this \"campus survival guide\" for you.'\n          }\n        </p>\n      </header>\n\n      {/* User Story */}\n      <section className=\"bg-blue-50 rounded-2xl p-8 border border-blue-100\">\n        <div className=\"flex items-start\">\n          <div className=\"bg-blue-100 rounded-full p-2 mr-4 flex-shrink-0\">\n            <MessageCircle className=\"w-6 h-6 text-blue-600\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-2\">\n              {locale === 'zh' ? 'å°éƒåŒå­¦çš„ç»å†ï¼š' : 'Xiao Yu\\'s Experience:'}\n            </h3>\n            <p className=\"text-gray-700 italic\">\n              {locale === 'zh'\n                ? '\"æœ‰ä¸€æ¬¡ä¸Šæ•°å­¦è¯¾ï¼Œçªç„¶ç—›å¾—æµ‘èº«å‡ºæ±—ï¼Œæ ¹æœ¬æ²¡æ³•é›†ä¸­ç²¾ç¥ã€‚åˆä¸æ•¢ä¸¾æ‰‹è¯´ï¼Œåªèƒ½ç¡¬æ’‘ç€ï¼Œæ„Ÿè§‰æ—¶é—´è¿‡å¾—å¥½æ…¢å¥½æ…¢ã€‚\"'\n                : '\"Once during math class, I suddenly felt such intense pain that I broke out in a cold sweat and couldn\\'t concentrate at all. I didn\\'t dare raise my hand to say anything, so I just had to endure it. Time felt like it was crawling by.\"'\n              }\n            </p>\n            <p className=\"text-blue-600 font-medium mt-2\">\n              {locale === 'zh' ? 'è¿™å°±æ˜¯å¾ˆå¤šåŒå­¦åœ¨å­¦æ ¡çš„çœŸå®å†™ç…§ï¼Œæˆ‘ä»¬æ‡‚ï¼' : 'This is the reality for many students at school - we understand!'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Emergency Steps */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'è¯¾å ‚åº”æ€¥ä¸‰æ­¥æ³•' : 'Classroom Emergency 3-Step Method'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-8\">\n          {emergencySteps.map((step, index) => (\n            <div key={index} className=\"text-center\">\n              <div className=\"bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\n                <div className=\"text-blue-600\">\n                  {step.icon}\n                </div>\n              </div>\n              <div className=\"bg-blue-50 rounded-full px-4 py-1 text-blue-600 text-sm font-medium mb-3 inline-block\">\n                {locale === 'zh' ? `ç¬¬${index + 1}æ­¥` : `Step ${index + 1}`}\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                {step.title}\n              </h3>\n              <p className=\"text-gray-600\">\n                {step.description}\n              </p>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Detailed Strategies */}\n      <section className=\"space-y-8\">\n        <h2 className=\"text-3xl font-bold text-center text-gray-900\">\n          {locale === 'zh' ? 'è¯¦ç»†åº”å¯¹ç­–ç•¥' : 'Detailed Coping Strategies'}\n        </h2>\n\n        {/* Classroom Strategies */}\n        <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n          <div className=\"flex items-center mb-6\">\n            <School className=\"w-8 h-8 text-blue-600 mr-3\" />\n            <h3 className=\"text-2xl font-semibold text-gray-900\">\n              {locale === 'zh' ? 'è¯¾å ‚åº”æ€¥æŒ‡å—' : 'Classroom Emergency Guide'}\n            </h3>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 gap-8\">\n            <div>\n              <h4 className=\"font-semibold text-gray-900 mb-4\">\n                {locale === 'zh' ? 'æ‚„æ‚„è‡ªæ•‘æŠ€å·§ï¼š' : 'Discreet Self-Help Techniques:'}\n              </h4>\n              <ul className=\"space-y-3\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <span className=\"font-medium\">{locale === 'zh' ? 'è°ƒæ•´åå§¿' : 'Adjust Posture'}</span>\n                    <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'å°è¯•æŠŠèº«ä½“å¾®å¾®å‰å€¾ï¼Œæˆ–è½»æŸ”åœ°æŒ‰æ‘©ä¸‹è…¹éƒ¨' : 'Try leaning slightly forward or gently massage your lower abdomen'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <span className=\"font-medium\">{locale === 'zh' ? 'æ·±å‘¼å¸' : 'Deep Breathing'}</span>\n                    <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'ç¼“æ…¢ã€æ·±é•¿åœ°å¸æ°”ï¼Œå†æ…¢æ…¢å‘¼å‡ºï¼Œæœ‰åŠ©äºæ”¾æ¾ç´§å¼ çš„è‚Œè‚‰' : 'Slow, deep breaths help relax tense muscles'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <span className=\"font-medium\">{locale === 'zh' ? 'æ„å¿µè½¬ç§»' : 'Mental Distraction'}</span>\n                    <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'è¯•ç€æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨è€å¸ˆè®²è¯¾çš„å†…å®¹ä¸Š' : 'Try to focus your attention on the teacher\\'s lesson'}</p>\n                  </div>\n                </li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold text-gray-900 mb-4\">\n                {locale === 'zh' ? 'å¯»æ±‚å¸®åŠ©ï¼š' : 'Seeking Help:'}\n              </h4>\n              <ul className=\"space-y-3\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <span className=\"font-medium\">{locale === 'zh' ? 'ç¤ºæ„è€å¸ˆ' : 'Signal Teacher'}</span>\n                    <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'å¦‚æœå®åœ¨å¤ªç—›ï¼Œå¯ä»¥æ‚„æ‚„ç¤ºæ„è€å¸ˆï¼Œè¯´æ˜éœ€è¦å»åŒ»åŠ¡å®¤' : 'If pain is severe, quietly signal the teacher that you need to go to the nurse\\'s office'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <span className=\"font-medium\">{locale === 'zh' ? 'æ‰¾åŒå­¦å¸®å¿™' : 'Ask Classmate for Help'}</span>\n                    <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'å’Œååœ¨èº«è¾¹çš„å¥½æœ‹å‹ç®€å•è¯´æ˜æƒ…å†µï¼Œè¯·å¥¹å¸®å¿™å‘Šè¯‰è€å¸ˆ' : 'Briefly explain the situation to a close friend nearby and ask her to help inform the teacher'}</p>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        {/* Dorm Management */}\n        <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n          <div className=\"flex items-center mb-6\">\n            <Home className=\"w-8 h-8 text-purple-600 mr-3\" />\n            <h3 className=\"text-2xl font-semibold text-gray-900\">\n              {locale === 'zh' ? 'å®¿èˆç–¼ç—›ç®¡ç†' : 'Dorm Pain Management'}\n            </h3>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-6\">\n            <div>\n              <h4 className=\"font-semibold text-purple-600 mb-3\">\n                {locale === 'zh' ? 'çƒ­æ•·æ–¹æ³•' : 'Heat Therapy'}\n              </h4>\n              <ul className=\"space-y-2 text-sm\">\n                <li>â€¢ {locale === 'zh' ? 'çƒ­æ°´è¢‹ï¼šæœ€ç»å…¸æœ‰æ•ˆçš„æ–¹æ³•' : 'Hot water bottle: Classic and effective'}</li>\n                <li>â€¢ {locale === 'zh' ? 'çƒ­æ¯›å·¾ï¼šç”¨çƒ­æ°´æµ¸æ¹¿æ¯›å·¾æ‹§å¹²æ•·è‚šå­' : 'Hot towel: Soak towel in hot water and apply'}</li>\n                <li>â€¢ {locale === 'zh' ? 'ç”µçƒ­æ¯¯ï¼šçŸ­æ—¶é—´ä½¿ç”¨ï¼Œæ³¨æ„å®‰å…¨' : 'Electric blanket: Use briefly, ensure safety'}</li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold text-purple-600 mb-3\">\n                {locale === 'zh' ? 'èˆ’é€‚å§¿åŠ¿' : 'Comfortable Positions'}\n              </h4>\n              <ul className=\"space-y-2 text-sm\">\n                <li>â€¢ {locale === 'zh' ? 'èœ·ç¼©ä¾§å§ï¼šåƒä¸ªè™¾ç±³è½»è½»æŠ±ç€è‚šå­' : 'Curled side position: Like a shrimp, gently hugging abdomen'}</li>\n                <li>â€¢ {locale === 'zh' ? 'è†ç›–æŠ¬é«˜ï¼šä»°å§ï¼Œè†ç›–å¼¯æ›²æŠ¬åˆ°èƒ¸éƒ¨' : 'Knees up: Lie back, bend knees to chest'}</li>\n                <li>â€¢ {locale === 'zh' ? 'ä½¿ç”¨æ•å¤´ï¼šå«åœ¨è‚šå­æˆ–è†ä¸‹æ‰¾èˆ’æœå§¿åŠ¿' : 'Use pillows: Place under abdomen or knees'}</li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold text-purple-600 mb-3\">\n                {locale === 'zh' ? 'å®¤å‹äº’åŠ©' : 'Roommate Support'}\n              </h4>\n              <ul className=\"space-y-2 text-sm\">\n                <li>â€¢ {locale === 'zh' ? 'åˆ†äº«ç»éªŒï¼šäº’ç›¸ç…§é¡¾ï¼Œä¸€èµ·æ³¡çº¢ç³–æ°´' : 'Share experiences: Care for each other, make brown sugar water together'}</li>\n                <li>â€¢ {locale === 'zh' ? 'äº’ç›¸æé†’ï¼šæŒ‰æ‰ç©´ä½çš„æ–¹æ³•' : 'Remind each other: Acupressure techniques'}</li>\n                <li>â€¢ {locale === 'zh' ? 'æƒ…æ„Ÿæ”¯æŒï¼šç†è§£å’Œé™ªä¼´å¾ˆé‡è¦' : 'Emotional support: Understanding and companionship matter'}</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        {/* PE Class Strategies */}\n        <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n          <div className=\"flex items-center mb-6\">\n            <Activity className=\"w-8 h-8 text-green-600 mr-3\" />\n            <h3 className=\"text-2xl font-semibold text-gray-900\">\n              {locale === 'zh' ? 'ä½“è‚²è¯¾/è¿åŠ¨ä¼šåº”å¯¹' : 'PE Class/Sports Event Strategies'}\n            </h3>\n          </div>\n          \n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-start\">\n              <AlertTriangle className=\"w-5 h-5 text-yellow-600 mr-2 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-yellow-800 font-medium mb-1\">\n                  {locale === 'zh' ? 'è€å¸ˆè§†è§’ï¼š' : 'Teacher\\'s Perspective:'}\n                </p>\n                <p className=\"text-yellow-700 text-sm\">\n                  {locale === 'zh'\n                    ? '\"ä½œä¸ºè€å¸ˆï¼Œæˆ‘ä»¬å¸Œæœ›äº†è§£å­¦ç”Ÿçš„éœ€æ±‚ï¼Œä½†æœ‰äº›åŒå­¦ä¸å¥½æ„æ€è¯´ã€‚å¦‚æœä½ ä»¬èƒ½å‘Šè¯‰æˆ‘èº«ä½“ä¸èˆ’æœï¼Œæˆ‘ä¼šæ›´ç†è§£å’Œæ”¯æŒä½ ä»¬ã€‚\"'\n                    : '\"As teachers, we want to understand students\\' needs, but some students are too shy to speak up. If you can tell me you\\'re not feeling well, I\\'ll be more understanding and supportive.\"'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 gap-6\">\n            <div>\n              <h4 className=\"font-semibold text-gray-900 mb-3\">\n                {locale === 'zh' ? 'æ²Ÿé€šç­–ç•¥ï¼š' : 'Communication Strategies:'}\n              </h4>\n              <ul className=\"space-y-2\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <span className=\"text-sm\">{locale === 'zh' ? 'æå‰æ²Ÿé€šï¼šå¦‚æœç»æœŸç–¼ç—›ä¸¥é‡ï¼Œæå‰å‘ŠçŸ¥ä½“è‚²è€å¸ˆ' : 'Communicate early: If period pain is severe, inform PE teacher in advance'}</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <span className=\"text-sm\">{locale === 'zh' ? 'ç®€å•è¯´æ˜ï¼š\"ä»Šå¤©èº«ä½“ä¸å¤ªèˆ’æœï¼Œå¯èƒ½ä¸å¤ªé€‚åˆå‰§çƒˆè¿åŠ¨\"' : 'Simple explanation: \"I\\'m not feeling well today and may not be suitable for intense exercise\"'}</span>\n                </li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold text-gray-900 mb-3\">\n                {locale === 'zh' ? 'è¿åŠ¨é€‰æ‹©ï¼š' : 'Exercise Options:'}\n              </h4>\n              <ul className=\"space-y-2\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <span className=\"text-sm\">{locale === 'zh' ? 'ä½å¼ºåº¦è¿åŠ¨ï¼šæ•£æ­¥ã€æ…¢è·‘ã€ç‘œä¼½ã€æ‹‰ä¼¸åè€Œæœ‰åŠ©ç¼“è§£' : 'Low-intensity exercise: Walking, light jogging, yoga, stretching can actually help'}</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <span className=\"text-sm\">{locale === 'zh' ? 'é¿å…å‰§çƒˆè¿åŠ¨ï¼šé«˜å¼ºåº¦è¿åŠ¨å¯èƒ½ä¼šåŠ é‡ç–¼ç—›' : 'Avoid intense exercise: High-intensity activities may worsen pain'}</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        {/* Exam Coping Strategies */}\n        <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n          <div className=\"flex items-center mb-6\">\n            <BookOpen className=\"w-8 h-8 text-orange-600 mr-3\" />\n            <h3 className=\"text-2xl font-semibold text-gray-900\">\n              {locale === 'zh' ? 'è€ƒè¯•åº”å¯¹ç­–ç•¥' : 'Exam Coping Strategies'}\n            </h3>\n          </div>\n\n          {/* Special highlight box */}\n          <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-start\">\n              <AlertTriangle className=\"w-5 h-5 text-orange-600 mr-2 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-orange-800 font-medium mb-1\">\n                  {locale === 'zh' ? 'å½“\"å¤§è€ƒ\"æ’ä¸Š\"å¤§å§¨å¦ˆ\"' : 'When \"Big Exam\" Meets \"Aunt Flo\"'}\n                </p>\n                <p className=\"text-orange-700 text-sm\">\n                  {locale === 'zh'\n                    ? 'è¿™ç§æƒ…å†µæ¯”ä½ æƒ³è±¡çš„æ›´å¸¸è§ï¼æå‰å‡†å¤‡å’Œå†·é™åº”å¯¹æ˜¯å…³é”®ã€‚'\n                    : 'This situation is more common than you think! Advance preparation and calm response are key.'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-6\">\n            <div>\n              <h4 className=\"font-semibold text-orange-600 mb-3\">\n                {locale === 'zh' ? 'è€ƒå‰å‡†å¤‡' : 'Pre-exam Preparation'}\n              </h4>\n              <ul className=\"space-y-3\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'æœªé›¨ç»¸ç¼ª' : 'Plan Ahead'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'é¢„æµ‹åˆ°è€ƒè¯•å¯èƒ½æ’ä¸Šç»æœŸæ—¶ï¼Œæå‰ä¸å®¶é•¿ã€ç­ä¸»ä»»æ²Ÿé€šå­¦æ ¡åº”å¯¹æ”¿ç­–' : 'When predicting exam might coincide with period, communicate with parents and teachers about school policies'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'ç²¾å¿ƒå‡†å¤‡' : 'Careful Preparation'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'ä¿è¯å……è¶³ç¡çœ å’Œå‡è¡¡è¥å…»ï¼Œé¿å…ç†¬å¤œå’Œåˆºæ¿€æ€§é£Ÿç‰©ï¼Œè€ƒå‰é€‚å½“çƒ­æ•·æ”¾æ¾' : 'Ensure adequate sleep and balanced nutrition, avoid staying up late and irritating foods, apply heat therapy before exam'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'è¯ç‰©å‡†å¤‡' : 'Medication Preparation'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'å¦‚åŒ»ç”Ÿå¼€è¿‡æ­¢ç—›è¯ï¼ŒåŠ¡å¿…éµåŒ»å˜±æå‰è¯•ç”¨ï¼Œç¡®ä¿æ— å‰¯ä½œç”¨' : 'If doctor prescribed pain medication, follow instructions and test in advance to ensure no side effects'}</p>\n                  </div>\n                </li>\n              </ul>\n            </div>\n\n            <div>\n              <h4 className=\"font-semibold text-orange-600 mb-3\">\n                {locale === 'zh' ? 'è€ƒè¯•ä¸­åº”å¯¹' : 'During Exam Response'}\n              </h4>\n              <ul className=\"space-y-3\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'ä¿æŒå†·é™' : 'Stay Calm'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'çªå‘ä¸é€‚æ—¶ä¸è¦æ…Œå¼ ï¼Œç«‹å³ä¸¾æ‰‹å‘ç›‘è€ƒè€å¸ˆæŠ¥å‘Š' : 'Don\\'t panic when sudden discomfort occurs, immediately raise hand to report to invigilator'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'æ¸…æ¥šæ²Ÿé€š' : 'Clear Communication'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'å°å£°è¯´æ˜ä¸é€‚æƒ…å†µï¼Œè¯¢é—®æ˜¯å¦å¯ä»¥çŸ­æš‚ä¼‘æ¯æˆ–å»å«ç”Ÿé—´' : 'Quietly explain discomfort, ask if you can take a brief break or go to restroom'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'å¯»æ±‚å¸®åŠ©' : 'Seek Help'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'è¯¢é—®æ˜¯å¦æœ‰å…¶ä»–åº”æ€¥å¤„ç†æªæ–½ï¼Œå¤§å¤šæ•°å­¦æ ¡éƒ½ä¼šç»™äºˆäººé“å…³æ€€' : 'Ask about other emergency measures, most schools will provide humanitarian care'}</p>\n                  </div>\n                </li>\n              </ul>\n            </div>\n\n            <div>\n              <h4 className=\"font-semibold text-orange-600 mb-3\">\n                {locale === 'zh' ? 'æ ¡å›­èµ„æº' : 'Campus Resources'}\n              </h4>\n              <ul className=\"space-y-3\">\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'æå‰äº†è§£' : 'Know in Advance'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'å¼€å­¦åˆäº†è§£æ ¡åŒ»å®¤ä½ç½®ã€ä¸Šç­æ—¶é—´å’Œå¿ƒç†è¾…å¯¼å®¤ä¿¡æ¯' : 'Learn about nurse\\'s office location, hours, and counseling room info at start of term'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'å‹‡æ•¢æ±‚åŠ©' : 'Seek Help Bravely'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'èº«ä½“ä¸é€‚æˆ–æƒ…ç»ªä½è½æ—¶ï¼Œä¸»åŠ¨å‘è€å¸ˆç”³è¯·å»æ ¡åŒ»å®¤æˆ–å¿ƒç†è¾…å¯¼å®¤' : 'When feeling unwell or emotionally down, actively ask teacher to go to nurse\\'s office or counseling room'}</p>\n                  </div>\n                </li>\n                <li className=\"flex items-start\">\n                  <CheckCircle className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0 mt-1\" />\n                  <div>\n                    <span className=\"font-medium text-sm\">{locale === 'zh' ? 'ä¸“ä¸šæ”¯æŒ' : 'Professional Support'}</span>\n                    <p className=\"text-xs text-gray-600\">{locale === 'zh' ? 'æ ¡åŒ»å’Œå¿ƒç†è€å¸ˆéƒ½æ˜¯ä¸“ä¸šçš„ï¼Œä¼šä¿æŠ¤éšç§å¹¶æä¾›æœ‰æ•ˆæ”¯æŒ' : 'School nurses and counselors are professional, will protect privacy and provide effective support'}</p>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Additional tip box */}\n          <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-start\">\n              <Heart className=\"w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-blue-800 font-medium mb-1\">\n                  {locale === 'zh' ? 'æ ¡å›­\"ç§˜å¯†è¡¥ç»™ç«™\"å’Œ\"æƒ…ç»ªåŠ æ²¹ç«™\"' : 'Campus \"Secret Supply Station\" and \"Emotional Refueling Station\"'}\n                </p>\n                <p className=\"text-blue-700 text-sm\">\n                  {locale === 'zh'\n                    ? 'æ ¡åŒ»å®¤å¯æä¾›ä¸´æ—¶ä¼‘æ¯åœºæ‰€å’ŒåŸºæœ¬ç–¼ç—›ç¼“è§£å»ºè®®ï¼›å¿ƒç†è¾…å¯¼å®¤å¯å¸®åŠ©ç–å¯¼è´Ÿé¢æƒ…ç»ªï¼Œæ•™æˆæ”¾æ¾å’Œåº”å¯¹æŠ€å·§ã€‚'\n                    : 'Nurse\\'s office provides temporary rest space and basic pain relief advice; counseling room helps process negative emotions and teaches relaxation and coping skills.'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Emergency Kit */}\n      <section className=\"bg-red-50 rounded-2xl p-8 border border-red-100\">\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'éšèº«\"åº”æ€¥åŒ…\"' : 'Personal \"Emergency Kit\"'}\n        </h2>\n        <p className=\"text-center text-gray-600 mb-8\">\n          {locale === 'zh' ? 'å¤‡å¥½è¿™äº›å°ä¸œè¥¿ï¼Œå…³é”®æ—¶åˆ»èƒ½æ´¾ä¸Šå¤§ç”¨åœº' : 'Keep these small items ready - they can be lifesavers in critical moments'}\n        </p>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {emergencyKit.map((item, index) => (\n            <div key={index} className=\"bg-white rounded-lg p-6 shadow-sm\">\n              <div className=\"flex items-start\">\n                <div className=\"bg-red-100 rounded-full p-2 mr-4 flex-shrink-0\">\n                  <div className=\"text-red-600\">\n                    {item.icon}\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-gray-900 mb-2\">\n                    {item.item}\n                  </h4>\n                  <p className=\"text-sm text-gray-600\">\n                    {item.usage}\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Important Notice */}\n      <section className=\"bg-yellow-50 border border-yellow-200 rounded-2xl p-8\">\n        <div className=\"flex items-start\">\n          <AlertTriangle className=\"w-8 h-8 text-yellow-600 mr-4 flex-shrink-0\" />\n          <div>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">\n              {locale === 'zh' ? 'é‡è¦æé†’' : 'Important Reminder'}\n            </h3>\n            <p className=\"text-gray-700 mb-4\">\n              {locale === 'zh'\n                ? 'æ¯ä¸ªäººçš„èº«ä½“çŠ¶å†µä¸åŒï¼Œå¯¹ç–¼ç—›çš„å¿å—åº¦å’Œåº”å¯¹æ–¹æ³•ä¹Ÿä¸åŒã€‚ä»¥ä¸Šå»ºè®®ä»…ä¾›å‚è€ƒï¼Œæœ€ä½³æ–¹æ¡ˆéœ€è¦ä½ è‡ªå·±å»æ‘¸ç´¢ã€‚'\n                : 'Everyone\\'s body is different, and pain tolerance and coping methods vary. The above suggestions are for reference only - the best approach needs to be discovered by yourself.'\n              }\n            </p>\n            <p className=\"text-gray-700\">\n              {locale === 'zh'\n                ? 'å¦‚æœä½ çš„ç–¼ç—›éå¸¸å‰§çƒˆï¼Œå½±å“æ­£å¸¸å­¦ä¹ ç”Ÿæ´»ï¼Œæˆ–è€…ä¼´æœ‰å…¶ä»–å¼‚å¸¸ç—‡çŠ¶ï¼Œä¸€å®šè¦åŠæ—¶å‘Šè¯‰å®¶é•¿å’Œè€å¸ˆï¼Œå¯»æ±‚åŒ»ç”Ÿçš„ä¸“ä¸šå¸®åŠ©ã€‚'\n                : 'If your pain is very severe, affects normal study and life, or is accompanied by other abnormal symptoms, be sure to tell your parents and teachers promptly and seek professional medical help.'\n              }\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-gray-200\">\n        <Link\n          href={`/${locale}/teen-health`}\n          className=\"flex items-center text-gray-600 hover:text-primary-600 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5 mr-2\" />\n          {locale === 'zh' ? 'è¿”å›ä¸“åŒºé¦–é¡µ' : 'Back to Teen Zone'}\n        </Link>\n        \n        <Link\n          href={`/${locale}/teen-health/development-pain`}\n          className=\"flex items-center text-primary-600 hover:text-primary-700 transition-colors\"\n        >\n          {locale === 'zh' ? 'ä¸‹ä¸€ç¯‡ï¼šå‘è‚²æœŸç–¼ç—›ç®¡ç†' : 'Next: Developmental Pain Management'}\n          <ArrowRight className=\"w-5 h-5 ml-2\" />\n        </Link>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/teen-health/communication-guide/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mail' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":29,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":10}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport Link from 'next/link';\nimport { \n  MessageCircle, \n  Heart, \n  Users, \n  School,\n  Stethoscope,\n  CheckCircle,\n  ArrowLeft,\n  ArrowRight,\n  Copy,\n  AlertTriangle,\n  BookOpen,\n  Phone,\n  Mail,\n  Clock\n} from 'lucide-react';\nimport type { Metadata } from 'next';\n\ntype Locale = 'en' | 'zh';\n\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'teenHealth' });\n  \n  return {\n    title: locale === 'zh' ? 'æ²Ÿé€šæŒ‡å¯¼ - é’å°‘å¹´ç»æœŸå¥åº·ä¸“åŒº' : 'Communication Guide - Teen Menstrual Health Zone',\n    description: locale === 'zh' \n      ? 'å¦‚ä½•ä¸å®¶é•¿ã€è€å¸ˆã€åŒ»ç”Ÿæœ‰æ•ˆæ²Ÿé€šï¼Ÿæä¾›å¯¹è¯æ¨¡æ¿å’Œæ²Ÿé€šæŠ€å·§ï¼Œè®©ä½ å‹‡æ•¢è¡¨è¾¾éœ€æ±‚ã€‚'\n      : 'How to effectively communicate with parents, teachers, and doctors? Conversation templates and communication skills.',\n  };\n}\n\nexport default async function CommunicationGuidePage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const communicationScenarios = [\n    {\n      id: 'parents',\n      title: locale === 'zh' ? 'ä¸å®¶é•¿æ²Ÿé€š' : 'Communicating with Parents',\n      icon: <Heart className=\"w-8 h-8\" />,\n      color: 'bg-pink-50 text-pink-600',\n      description: locale === 'zh' ? 'å¦‚ä½•å‘å®¶é•¿è¡¨è¾¾ä½ çš„éœ€æ±‚å’Œå›°æ‰°' : 'How to express your needs and concerns to parents',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'ç¬¬ä¸€æ¬¡æ¥æœˆç»' : 'First Period',\n          template: locale === 'zh' \n            ? '\"å¦ˆå¦ˆï¼Œæˆ‘æƒ³æˆ‘æ¥æœˆç»äº†ï¼Œæˆ‘æœ‰ç‚¹ç´§å¼ ï¼Œä½ èƒ½å¸®åŠ©æˆ‘å—ï¼Ÿæˆ‘éœ€è¦çŸ¥é“è¯¥æ€ä¹ˆåŠã€‚\"'\n            : '\"Mom, I think I got my period. I\\'m a bit nervous, can you help me? I need to know what to do.\"',\n          tips: locale === 'zh' ? 'é€‰æ‹©ä¸€ä¸ªå®‰é™ã€ç§å¯†çš„æ—¶é—´å’Œåœ°ç‚¹' : 'Choose a quiet, private time and place'\n        },\n        {\n          situation: locale === 'zh' ? 'ç–¼ç—›ä¸¥é‡' : 'Severe Pain',\n          template: locale === 'zh'\n            ? '\"å¦ˆå¦ˆï¼Œæˆ‘çš„ç»æœŸç–¼ç—›å¾ˆä¸¥é‡ï¼Œå½±å“äº†æˆ‘çš„å­¦ä¹ å’Œç”Ÿæ´»ã€‚æˆ‘æƒ³å»çœ‹åŒ»ç”Ÿï¼Œä½ è§‰å¾—å‘¢ï¼Ÿ\"'\n            : '\"Mom, my period pain is severe and affecting my studies and daily life. I\\'d like to see a doctor, what do you think?\"',\n          tips: locale === 'zh' ? 'å…·ä½“æè¿°ç–¼ç—›ç¨‹åº¦å’Œå½±å“' : 'Specifically describe pain level and impact'\n        },\n        {\n          situation: locale === 'zh' ? 'éœ€è¦ç”¨å“' : 'Need Supplies',\n          template: locale === 'zh'\n            ? '\"å¦ˆå¦ˆï¼Œæˆ‘éœ€è¦ä¸€äº›å«ç”Ÿç”¨å“ï¼Œè¿˜æœ‰æ­¢ç—›è¯ã€‚ä½ èƒ½å¸®æˆ‘å‡†å¤‡å—ï¼Ÿ\"'\n            : '\"Mom, I need some sanitary products and pain medication. Can you help me prepare these?\"',\n          tips: locale === 'zh' ? 'æå‰åˆ—ä¸€ä¸ªæ¸…å•ä¼šæ›´æœ‰å¸®åŠ©' : 'Making a list beforehand would be more helpful'\n        }\n      ]\n    },\n    {\n      id: 'teachers',\n      title: locale === 'zh' ? 'ä¸è€å¸ˆæ²Ÿé€š' : 'Communicating with Teachers',\n      icon: <School className=\"w-8 h-8\" />,\n      color: 'bg-blue-50 text-blue-600',\n      description: locale === 'zh' ? 'å¦‚ä½•åœ¨å­¦æ ¡è·å¾—ç†è§£å’Œæ”¯æŒ' : 'How to get understanding and support at school',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'è¯¾å ‚ä¸é€‚' : 'Classroom Discomfort',\n          template: locale === 'zh'\n            ? '\"è€å¸ˆï¼Œæˆ‘ä»Šå¤©èº«ä½“ä¸å¤ªèˆ’æœï¼Œå¯èƒ½éœ€è¦å»åŒ»åŠ¡å®¤ä¼‘æ¯ä¸€ä¸‹ã€‚\"'\n            : '\"Teacher, I\\'m not feeling well today and may need to go to the nurse\\'s office to rest.\"',\n          tips: locale === 'zh' ? 'ç®€å•è¯´æ˜å³å¯ï¼Œä¸éœ€è¦è¯¦ç»†è§£é‡Š' : 'A simple explanation is enough, no need for details'\n        },\n        {\n          situation: locale === 'zh' ? 'ä½“è‚²è¯¾è¯·å‡' : 'PE Class Excuse',\n          template: locale === 'zh'\n            ? '\"è€å¸ˆï¼Œæˆ‘ä»Šå¤©èº«ä½“ä¸é€‚ï¼Œä¸å¤ªé€‚åˆå‰§çƒˆè¿åŠ¨ï¼Œå¯ä»¥åšä¸€äº›è½»æ¾çš„æ´»åŠ¨å—ï¼Ÿ\"'\n            : '\"Teacher, I\\'m not feeling well today and not suitable for intense exercise. Can I do some light activities?\"',\n          tips: locale === 'zh' ? 'æå‰æ²Ÿé€šæ¯”ä¸´æ—¶è¯·å‡æ›´å¥½' : 'Communicating in advance is better than last-minute requests'\n        },\n        {\n          situation: locale === 'zh' ? 'è€ƒè¯•å»¶æœŸ' : 'Exam Postponement',\n          template: locale === 'zh'\n            ? '\"è€å¸ˆï¼Œæˆ‘å› ä¸ºèº«ä½“åŸå› æ— æ³•é›†ä¸­ç²¾ç¥ï¼Œå¯ä»¥ç”³è¯·å»¶æœŸè€ƒè¯•å—ï¼Ÿ\"'\n            : '\"Teacher, due to physical reasons I can\\'t concentrate. Can I apply for exam postponement?\"',\n          tips: locale === 'zh' ? 'éœ€è¦æœ‰åŒ»ç”Ÿè¯æ˜æˆ–å®¶é•¿æ”¯æŒ' : 'May need doctor\\'s note or parental support'\n        }\n      ]\n    },\n    {\n      id: 'doctors',\n      title: locale === 'zh' ? 'ä¸åŒ»ç”Ÿæ²Ÿé€š' : 'Communicating with Doctors',\n      icon: <Stethoscope className=\"w-8 h-8\" />,\n      color: 'bg-green-50 text-green-600',\n      description: locale === 'zh' ? 'å¦‚ä½•å‡†ç¡®æè¿°ç—‡çŠ¶ï¼Œè·å¾—ä¸“ä¸šå¸®åŠ©' : 'How to accurately describe symptoms and get professional help',\n      templates: [\n        {\n          situation: locale === 'zh' ? 'æè¿°ç–¼ç—›' : 'Describing Pain',\n          template: locale === 'zh'\n            ? '\"åŒ»ç”Ÿï¼Œæˆ‘çš„ç»æœŸç–¼ç—›é€šå¸¸åœ¨æœˆç»ç¬¬ä¸€å¤©æœ€ä¸¥é‡ï¼Œç–¼ç—›ç¨‹åº¦å¤§æ¦‚æ˜¯7-8åˆ†ï¼ˆæ»¡åˆ†10åˆ†ï¼‰ï¼Œä¸»è¦åœ¨å°è…¹éƒ¨ï¼Œæœ‰æ—¶ä¼šæ”¾å°„åˆ°è…°éƒ¨ã€‚\"'\n            : '\"Doctor, my period pain is usually most severe on the first day, pain level about 7-8 out of 10, mainly in lower abdomen, sometimes radiating to lower back.\"',\n          tips: locale === 'zh' ? 'ç”¨æ•°å­—è¯„åˆ†æ›´å‡†ç¡®' : 'Using numerical ratings is more accurate'\n        },\n        {\n          situation: locale === 'zh' ? 'æœˆç»å‘¨æœŸ' : 'Menstrual Cycle',\n          template: locale === 'zh'\n            ? '\"æˆ‘çš„æœˆç»å‘¨æœŸå¤§æ¦‚æ˜¯Xå¤©ï¼Œç»æœŸæŒç»­Xå¤©ï¼Œè¡€é‡ï¼ˆå¤š/ä¸­ç­‰/å°‘ï¼‰ï¼Œé¢œè‰²ï¼ˆé²œçº¢/æš—çº¢/è¤è‰²ï¼‰ã€‚\"'\n            : '\"My menstrual cycle is about X days, period lasts X days, flow is (heavy/moderate/light), color is (bright red/dark red/brown).\"',\n          tips: locale === 'zh' ? 'æå‰è®°å½•å‡ ä¸ªæœˆçš„æ•°æ®' : 'Record data for several months beforehand'\n        },\n        {\n          situation: locale === 'zh' ? 'å…¶ä»–ç—‡çŠ¶' : 'Other Symptoms',\n          template: locale === 'zh'\n            ? '\"é™¤äº†ç–¼ç—›ï¼Œæˆ‘è¿˜æœ‰ï¼ˆå¤´ç—›/æ¶å¿ƒ/è…¹æ³»/æƒ…ç»ªå˜åŒ–ï¼‰ç­‰ç—‡çŠ¶ï¼Œé€šå¸¸åœ¨æœˆç»å‰/ä¸­/åå‡ºç°ã€‚\"'\n            : '\"Besides pain, I also have (headache/nausea/diarrhea/mood changes) symptoms, usually appearing before/during/after my period.\"',\n          tips: locale === 'zh' ? 'è®°å½•æ‰€æœ‰ç›¸å…³ç—‡çŠ¶' : 'Record all related symptoms'\n        }\n      ]\n    }\n  ];\n\n  const communicationTips = [\n    {\n      icon: <Clock className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'é€‰æ‹©åˆé€‚çš„æ—¶æœº' : 'Choose the Right Time',\n      description: locale === 'zh' ? 'æ‰¾ä¸€ä¸ªå¤§å®¶éƒ½æ¯”è¾ƒæ”¾æ¾ã€ä¸ä¼šè¢«æ‰“æ‰°çš„æ—¶é—´' : 'Find a time when everyone is relaxed and won\\'t be interrupted'\n    },\n    {\n      icon: <Heart className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'è¯šå®è¡¨è¾¾æ„Ÿå—' : 'Express Feelings Honestly',\n      description: locale === 'zh' ? 'ä¸è¦å®³æ€•è¯´å‡ºä½ çš„æ‹…å¿ƒã€ç–¼ç—›æˆ–éœ€æ±‚' : 'Don\\'t be afraid to express your worries, pain, or needs'\n    },\n    {\n      icon: <BookOpen className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'å‡†å¤‡ç›¸å…³ä¿¡æ¯' : 'Prepare Relevant Information',\n      description: locale === 'zh' ? 'æå‰è®°å½•ç—‡çŠ¶ã€æ—¶é—´ã€ç¨‹åº¦ç­‰ä¿¡æ¯' : 'Record symptoms, timing, severity, and other information in advance'\n    },\n    {\n      icon: <Users className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'å¯»æ±‚æ”¯æŒ' : 'Seek Support',\n      description: locale === 'zh' ? 'å¦‚æœä¸€ä¸ªäººä¸æ•¢è¯´ï¼Œå¯ä»¥è¯·ä¿¡ä»»çš„äººé™ªåŒ' : 'If you\\'re afraid to speak alone, ask a trusted person to accompany you'\n    }\n  ];\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 space-y-12\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center text-sm text-gray-600\">\n        <Link href={`/${locale}/teen-health`} className=\"hover:text-primary-600 transition-colors\">\n          {locale === 'zh' ? 'é’å°‘å¹´ä¸“åŒº' : 'Teen Zone'}\n        </Link>\n        <span className=\"mx-2\">/</span>\n        <span className=\"text-gray-900\">{locale === 'zh' ? 'æ²Ÿé€šæŒ‡å¯¼' : 'Communication Guide'}</span>\n      </nav>\n\n      {/* Header */}\n      <header className=\"text-center\">\n        <div className=\"flex justify-center mb-6\">\n          <div className=\"bg-green-100 rounded-full p-4\">\n            <MessageCircle className=\"w-12 h-12 text-green-600\" />\n          </div>\n        </div>\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ğŸ’¬ æ²Ÿé€šæŒ‡å¯¼' : 'ğŸ’¬ Communication Guide'}\n        </h1>\n        <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'æœ‰æ—¶å€™ï¼Œæœ€éš¾çš„ä¸æ˜¯ç–¼ç—›æœ¬èº«ï¼Œè€Œæ˜¯å¦‚ä½•å¼€å£å¯»æ±‚å¸®åŠ©ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†å®ç”¨çš„æ²Ÿé€šæ¨¡æ¿å’ŒæŠ€å·§ã€‚'\n            : 'Sometimes, the hardest part isn\\'t the pain itself, but how to ask for help. Don\\'t worry, we\\'ve prepared practical communication templates and techniques for you.'\n          }\n        </p>\n      </header>\n\n      {/* Why Communication Matters */}\n      <section className=\"bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl p-8\">\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'ä¸ºä»€ä¹ˆæ²Ÿé€šå¾ˆé‡è¦ï¼Ÿ' : 'Why Is Communication Important?'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-3 gap-8\">\n          <div className=\"text-center\">\n            <div className=\"bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\n              <Heart className=\"w-8 h-8 text-blue-600\" />\n            </div>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              {locale === 'zh' ? 'è·å¾—ç†è§£' : 'Get Understanding'}\n            </h3>\n            <p className=\"text-gray-600\">\n              {locale === 'zh' ? 'è®©èº«è¾¹çš„äººäº†è§£ä½ çš„éœ€æ±‚ï¼Œç»™ä½ æ›´å¤šæ”¯æŒ' : 'Help people around you understand your needs and give you more support'}\n            </p>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\n              <Stethoscope className=\"w-8 h-8 text-green-600\" />\n            </div>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              {locale === 'zh' ? 'è·å¾—å¸®åŠ©' : 'Get Help'}\n            </h3>\n            <p className=\"text-gray-600\">\n              {locale === 'zh' ? 'åŠæ—¶è·å¾—åŒ»ç–—å»ºè®®å’Œä¸“ä¸šæ²»ç–—' : 'Get timely medical advice and professional treatment'}\n            </p>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"bg-purple-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\n              <Users className=\"w-8 h-8 text-purple-600\" />\n            </div>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              {locale === 'zh' ? 'å‡å°‘ç„¦è™‘' : 'Reduce Anxiety'}\n            </h3>\n            <p className=\"text-gray-600\">\n              {locale === 'zh' ? 'åˆ†äº«å›°æ‰°ï¼Œå‡è½»å¿ƒç†å‹åŠ›' : 'Share concerns and reduce psychological pressure'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Communication Tips */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'æ²Ÿé€šæŠ€å·§' : 'Communication Tips'}\n        </h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-8\">\n          {communicationTips.map((tip, index) => (\n            <div key={index} className=\"bg-white rounded-lg p-6 shadow-lg border border-gray-100\">\n              <div className=\"flex items-center mb-4\">\n                <div className=\"bg-green-100 rounded-full p-2 mr-3\">\n                  <div className=\"text-green-600\">\n                    {tip.icon}\n                  </div>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900\">\n                  {tip.title}\n                </h3>\n              </div>\n              <p className=\"text-gray-600\">\n                {tip.description}\n              </p>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Communication Templates */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'å®ç”¨æ²Ÿé€šæ¨¡æ¿' : 'Practical Communication Templates'}\n        </h2>\n        <p className=\"text-center text-gray-600 mb-12\">\n          {locale === 'zh' ? 'æ ¹æ®ä¸åŒæƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„è¡¨è¾¾æ–¹å¼' : 'Choose appropriate expressions based on different situations'}\n        </p>\n        \n        <div className=\"space-y-12\">\n          {communicationScenarios.map((scenario) => (\n            <div key={scenario.id} className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n              <div className=\"flex items-center mb-6\">\n                <div className={`w-12 h-12 flex items-center justify-center rounded-full ${scenario.color} mr-4`}>\n                  {scenario.icon}\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-semibold text-gray-900\">\n                    {scenario.title}\n                  </h3>\n                  <p className=\"text-gray-600\">\n                    {scenario.description}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-6\">\n                {scenario.templates.map((template, index) => (\n                  <div key={index} className=\"bg-gray-50 rounded-lg p-6\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-semibold text-gray-900\">\n                        {template.situation}\n                      </h4>\n                      <div className=\"inline-flex items-center text-gray-500 text-sm\">\n                        <Copy className=\"w-4 h-4 mr-1\" />\n                        <span>{locale === 'zh' ? 'å¯å¤åˆ¶ä½¿ç”¨' : 'Copy to use'}</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"bg-white rounded-lg p-4 mb-3 border-l-4 border-blue-500\">\n                      <p className=\"text-gray-700 italic\">\n                        {template.template}\n                      </p>\n                    </div>\n                    \n                    <div className=\"flex items-start\">\n                      <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                      <p className=\"text-sm text-gray-600\">\n                        <span className=\"font-medium\">{locale === 'zh' ? 'å°è´´å£«ï¼š' : 'Tip: '}</span>\n                        {template.tips}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Emergency Communication */}\n      <section className=\"bg-red-50 rounded-2xl p-8 border border-red-200\">\n        <div className=\"flex items-center mb-6\">\n          <AlertTriangle className=\"w-8 h-8 text-red-600 mr-3\" />\n          <h2 className=\"text-2xl font-bold text-gray-900\">\n            {locale === 'zh' ? 'ç´§æ€¥æƒ…å†µä¸‹çš„æ²Ÿé€š' : 'Emergency Communication'}\n          </h2>\n        </div>\n        \n        <p className=\"text-gray-700 mb-6\">\n          {locale === 'zh'\n            ? 'å¦‚æœä½ é‡åˆ°ä»¥ä¸‹æƒ…å†µï¼Œè¯·ç«‹å³å¯»æ±‚å¸®åŠ©ï¼Œä¸è¦çŠ¹è±«ï¼š'\n            : 'If you encounter the following situations, seek help immediately without hesitation:'\n          }\n        </p>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"bg-white rounded-lg p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-3\">\n              {locale === 'zh' ? 'ä¸¥é‡ç—‡çŠ¶ï¼š' : 'Severe Symptoms:'}\n            </h3>\n            <ul className=\"space-y-2 text-sm text-gray-700\">\n              <li>â€¢ {locale === 'zh' ? 'å‰§çƒˆç–¼ç—›ï¼Œæ— æ³•å¿å—' : 'Severe, unbearable pain'}</li>\n              <li>â€¢ {locale === 'zh' ? 'å¤§é‡å‡ºè¡€ï¼Œè¶…è¿‡æ­£å¸¸èŒƒå›´' : 'Heavy bleeding beyond normal range'}</li>\n              <li>â€¢ {locale === 'zh' ? 'ä¼´æœ‰å‘çƒ§ã€å‘•å' : 'Accompanied by fever, vomiting'}</li>\n              <li>â€¢ {locale === 'zh' ? 'æ™•å€’æˆ–æ„è¯†æ¨¡ç³Š' : 'Fainting or confusion'}</li>\n            </ul>\n          </div>\n          \n          <div className=\"bg-white rounded-lg p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-3\">\n              {locale === 'zh' ? 'ç´§æ€¥è”ç³»ï¼š' : 'Emergency Contacts:'}\n            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center\">\n                <Phone className=\"w-5 h-5 text-red-600 mr-2\" />\n                <span className=\"text-sm text-gray-700\">\n                  {locale === 'zh' ? 'ç«‹å³å‘Šè¯‰å®¶é•¿æˆ–ç›‘æŠ¤äºº' : 'Immediately tell parents or guardians'}\n                </span>\n              </div>\n              <div className=\"flex items-center\">\n                <School className=\"w-5 h-5 text-red-600 mr-2\" />\n                <span className=\"text-sm text-gray-700\">\n                  {locale === 'zh' ? 'è”ç³»å­¦æ ¡åŒ»åŠ¡å®¤æˆ–è€å¸ˆ' : 'Contact school nurse or teacher'}\n                </span>\n              </div>\n              <div className=\"flex items-center\">\n                <Stethoscope className=\"w-5 h-5 text-red-600 mr-2\" />\n                <span className=\"text-sm text-gray-700\">\n                  {locale === 'zh' ? 'å¿…è¦æ—¶æ‹¨æ‰“æ€¥æ•‘ç”µè¯' : 'Call emergency services if necessary'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Encouragement */}\n      <section className=\"bg-gradient-to-r from-pink-100 to-purple-100 rounded-2xl p-8 text-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ğŸŒŸ å‹‡æ•¢å¼€å£ï¼Œä½ å€¼å¾—è¢«å…³çˆ±' : 'ğŸŒŸ Speak Up Bravely, You Deserve Care'}\n        </h2>\n        <p className=\"text-lg text-gray-700 max-w-2xl mx-auto\">\n          {locale === 'zh'\n            ? 'è®°ä½ï¼Œå¯»æ±‚å¸®åŠ©ä¸æ˜¯è½¯å¼±çš„è¡¨ç°ï¼Œè€Œæ˜¯çˆ±æŠ¤è‡ªå·±çš„ä½“ç°ã€‚ä½ çš„å¥åº·å’Œæ„Ÿå—å¾ˆé‡è¦ï¼Œèº«è¾¹çš„äººéƒ½æ„¿æ„å¸®åŠ©ä½ ã€‚å‹‡æ•¢åœ°è¡¨è¾¾ä½ çš„éœ€æ±‚ï¼Œä½ ä¼šå‘ç°ä¸–ç•Œæ¯”ä½ æƒ³è±¡çš„æ›´æ¸©æš–ã€‚'\n            : 'Remember, seeking help isn\\'t a sign of weakness, but a way of caring for yourself. Your health and feelings matter, and people around you are willing to help. Express your needs bravely, and you\\'ll find the world is warmer than you imagine.'\n          }\n        </p>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-gray-200\">\n        <Link\n          href={`/${locale}/teen-health/emotional-support`}\n          className=\"flex items-center text-gray-600 hover:text-primary-600 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5 mr-2\" />\n          {locale === 'zh' ? 'ä¸Šä¸€ç¯‡ï¼šæƒ…ç»ªæ”¯æŒä¸å¿ƒç†å¥åº·' : 'Previous: Emotional Support & Mental Health'}\n        </Link>\n        \n        <Link\n          href={`/${locale}/teen-health`}\n          className=\"flex items-center text-primary-600 hover:text-primary-700 transition-colors\"\n        >\n          {locale === 'zh' ? 'è¿”å›ä¸“åŒºé¦–é¡µ' : 'Back to Teen Zone'}\n          <ArrowRight className=\"w-5 h-5 ml-2\" />\n        </Link>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/teen-health/development-pain/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":30,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport Link from 'next/link';\nimport {\n  Heart,\n  Clock,\n  MapPin,\n  Activity,\n  AlertTriangle,\n  CheckCircle,\n  ArrowLeft,\n  ArrowRight,\n  Thermometer,\n  Pill,\n  Utensils,\n  Moon,\n  MessageCircle,\n  Stethoscope\n} from 'lucide-react';\nimport type { Metadata } from 'next';\nimport EmbeddedPainAssessment from '@/components/EmbeddedPainAssessment';\n\ntype Locale = 'en' | 'zh';\n\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'teenHealth' });\n  \n  return {\n    title: locale === 'zh' ? 'å‘è‚²æœŸç–¼ç—›ç®¡ç† - é’å°‘å¹´ç»æœŸå¥åº·ä¸“åŒº' : 'Developmental Pain Management - Teen Menstrual Health Zone',\n    description: locale === 'zh' \n      ? '12-16å²ä¸“å±ç–¼ç—›ç®¡ç†å»ºè®®ï¼Œäº†è§£é’æ˜¥æœŸç—›ç»ç‰¹ç‚¹ï¼ŒæŒæ¡ç§‘å­¦ç¼“è§£æ–¹æ³•ã€‚'\n      : 'Specialized pain management advice for ages 12-16, understanding adolescent period pain characteristics.',\n  };\n}\n\nexport default async function DevelopmentPainPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const painCharacteristics = [\n    {\n      icon: <Clock className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'å¸¸è§æ—¶é—´' : 'Common Timing',\n      description: locale === 'zh' ? 'ç–¼ç—›é€šå¸¸åœ¨æœˆç»æ¥æ½®å‰å‡ å°æ—¶æˆ–æ¥æ½®åä¸ä¹…å¼€å§‹ï¼ŒæŒç»­1-3å¤©' : 'Pain usually starts a few hours before or shortly after menstruation begins, lasting 1-3 days'\n    },\n    {\n      icon: <MapPin className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'ç–¼ç—›éƒ¨ä½' : 'Pain Location',\n      description: locale === 'zh' ? 'ä¸»è¦åœ¨å°è…¹éƒ¨ï¼Œæœ‰æ—¶ä¼šæ”¾å°„åˆ°è…°éƒ¨ã€å¤§è…¿å†…ä¾§' : 'Mainly in the lower abdomen, sometimes radiating to the lower back and inner thighs'\n    },\n    {\n      icon: <Activity className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'ç–¼ç—›æ„Ÿè§‰' : 'Pain Sensation',\n      description: locale === 'zh' ? 'å¯èƒ½æ˜¯é˜µå‘æ€§çš„ç»ç—›ï¼Œä¹Ÿå¯èƒ½æ˜¯æŒç»­çš„å èƒ€æ„Ÿ' : 'May be intermittent cramping or continuous aching sensation'\n    }\n  ];\n\n  const managementMethods = [\n    {\n      category: locale === 'zh' ? 'å¥åº·ç”Ÿæ´»æ–¹å¼' : 'Healthy Lifestyle',\n      icon: <Heart className=\"w-6 h-6\" />,\n      color: 'bg-pink-50 text-pink-600',\n      methods: [\n        {\n          icon: <Utensils className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'å‡è¡¡é¥®é£Ÿ' : 'Balanced Diet',\n          description: locale === 'zh' ? 'å¤šåƒå¯Œå«ç»´ç”Ÿç´ ã€çŸ¿ç‰©è´¨çš„é£Ÿç‰©ï¼Œå°‘åƒæ²¹è…»ã€è¾›è¾£ã€ç”Ÿå†·åˆºæ¿€çš„é£Ÿç‰©' : 'Eat foods rich in vitamins and minerals, avoid oily, spicy, and cold foods'\n        },\n        {\n          icon: <Moon className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'å……è¶³ç¡çœ ' : 'Adequate Sleep',\n          description: locale === 'zh' ? 'ä¿è¯æ¯å¤©è‡³å°‘8å°æ—¶çš„ç¡çœ ï¼Œç¡å‰å¯ä»¥å¬å¬èˆ’ç¼“çš„éŸ³ä¹' : 'Ensure at least 8 hours of sleep daily, listen to soothing music before bed'\n        },\n        {\n          icon: <Activity className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'é€‚åº¦è¿åŠ¨' : 'Moderate Exercise',\n          description: locale === 'zh' ? 'æ•£æ­¥ã€æ‹‰ä¼¸ã€ç‘œä¼½ç­‰ä½å¼ºåº¦è¿åŠ¨æœ‰åŠ©äºæ”¹å–„è¡€æ¶²å¾ªç¯' : 'Low-intensity exercises like walking, stretching, yoga help improve circulation'\n        }\n      ]\n    },\n    {\n      category: locale === 'zh' ? 'éè¯ç‰©ç¼“è§£' : 'Non-Drug Relief',\n      icon: <Thermometer className=\"w-6 h-6\" />,\n      color: 'bg-blue-50 text-blue-600',\n      methods: [\n        {\n          icon: <Thermometer className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'çƒ­æ•·' : 'Heat Therapy',\n          description: locale === 'zh' ? 'ç”¨çƒ­æ°´è¢‹æˆ–æš–å®å®æ•·åœ¨å°è…¹æˆ–è…°éƒ¨ï¼Œæ¸©æš–èƒ½æ”¾æ¾è‚Œè‚‰ï¼Œå‡è½»ç—‰æŒ›æ„Ÿ' : 'Apply hot water bottle or heat pad to abdomen or lower back to relax muscles'\n        },\n        {\n          icon: <Heart className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'è½»æŸ”æŒ‰æ‘©' : 'Gentle Massage',\n          description: locale === 'zh' ? 'ç”¨æ‰‹æŒè½»è½»æŒ‰æ‘©å°è…¹éƒ¨ï¼Œé¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆéƒ½å¯ä»¥' : 'Gently massage lower abdomen with palms, clockwise or counterclockwise'\n        },\n        {\n          icon: <Moon className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'ä¼‘æ¯å’Œæ”¾æ¾' : 'Rest and Relaxation',\n          description: locale === 'zh' ? 'æ‰¾ä¸ªèˆ’æœçš„åœ°æ–¹åä¸‹æˆ–èººä¸‹ï¼Œå¬éŸ³ä¹ã€çœ‹ä¹¦ï¼Œåˆ†æ•£å¯¹ç–¼ç—›çš„æ³¨æ„åŠ›' : 'Find a comfortable place to sit or lie down, listen to music, read to distract from pain'\n        }\n      ]\n    }\n  ];\n\n  const warningSignals = [\n    locale === 'zh' ? 'ç–¼ç—›çªç„¶å˜å¾—éå¸¸å‰§çƒˆï¼Œç”šè‡³å½±å“åˆ°ç«™ç«‹æˆ–è¡Œèµ°' : 'Pain suddenly becomes very severe, affecting standing or walking',\n    locale === 'zh' ? 'ä¼´éšå‘çƒ§ã€å‰§çƒˆå‘•åã€è…¹æ³»ä¸æ­¢ã€å¤´æ™•ã€å¿ƒæ…Œ' : 'Accompanied by fever, severe vomiting, persistent diarrhea, dizziness, palpitations',\n    locale === 'zh' ? 'éç»æœŸä¹Ÿå‡ºç°è…¹ç—›æˆ–å‡ºè¡€' : 'Abdominal pain or bleeding outside of menstrual period',\n    locale === 'zh' ? 'æœç”¨å¸¸è§„å‰‚é‡çš„æ­¢ç—›è¯åï¼Œç–¼ç—›æ²¡æœ‰ä»»ä½•ç¼“è§£' : 'No pain relief after taking regular doses of pain medication'\n  ];\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 space-y-12\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center text-sm text-gray-600\">\n        <Link href={`/${locale}/teen-health`} className=\"hover:text-primary-600 transition-colors\">\n          {locale === 'zh' ? 'é’å°‘å¹´ä¸“åŒº' : 'Teen Zone'}\n        </Link>\n        <span className=\"mx-2\">/</span>\n        <span className=\"text-gray-900\">{locale === 'zh' ? 'å‘è‚²æœŸç–¼ç—›ç®¡ç†' : 'Developmental Pain Management'}</span>\n      </nav>\n\n      {/* Header */}\n      <header className=\"text-center\">\n        <div className=\"flex justify-center mb-6\">\n          <div className=\"bg-pink-100 rounded-full p-4\">\n            <Heart className=\"w-12 h-12 text-pink-600\" />\n          </div>\n        </div>\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ğŸŒ± å‘è‚²æœŸç–¼ç—›ç®¡ç†' : 'ğŸŒ± Developmental Pain Management'}\n        </h1>\n        <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'æ¬¢è¿æ¥åˆ°é’æ˜¥æœŸï¼å¯¹äº12-16å²çš„ä½ æ¥è¯´ï¼Œäº†è§£è¿™ä¸ªé˜¶æ®µç»æœŸç–¼ç—›çš„ç‰¹ç‚¹ï¼Œæ›´æœ‰åŠ©äºä½ ç§‘å­¦åœ°ç®¡ç†å®ƒã€‚'\n            : 'Welcome to adolescence! For you at ages 12-16, understanding the characteristics of period pain at this stage will help you manage it scientifically.'\n          }\n        </p>\n      </header>\n\n      {/* User Story */}\n      <section className=\"bg-pink-50 rounded-2xl p-8 border border-pink-100\">\n        <div className=\"flex items-start\">\n          <div className=\"bg-pink-100 rounded-full p-2 mr-4 flex-shrink-0\">\n            <MessageCircle className=\"w-6 h-6 text-pink-600\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-2\">\n              {locale === 'zh' ? 'ç”œç”œåŒå­¦çš„ç»å†ï¼š' : 'Tian Tian\\'s Experience:'}\n            </h3>\n            <p className=\"text-gray-700 italic\">\n              {locale === 'zh'\n                ? '\"æˆ‘ç¬¬ä¸€æ¬¡æ¥æœˆç»çš„æ—¶å€™ï¼Œè‚šå­ç—›å¾—æˆ‘éƒ½å“­äº†ã€‚æˆ‘å¦ˆå¦ˆè¯´è¿™æ˜¯æ­£å¸¸çš„ï¼Œä½†æˆ‘çœŸçš„å¾ˆæ‹…å¿ƒæ˜¯ä¸æ˜¯ç”Ÿç—…äº†ã€‚\"'\n                : '\"When I got my first period, the stomach pain made me cry. My mom said it was normal, but I was really worried if I was sick.\"'\n              }\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Pain Characteristics */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'é’æ˜¥æœŸç»æœŸç–¼ç—›çš„\"ä¸å¤ªä¸€æ ·\"' : 'What Makes Adolescent Period Pain \"Different\"'}\n        </h2>\n        \n        <div className=\"bg-blue-50 rounded-2xl p-8 mb-8\">\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">\n            {locale === 'zh' ? 'ä¸ºä»€ä¹ˆä¼šç—›ï¼Ÿ' : 'Why Does It Hurt?'}\n          </h3>\n          <p className=\"text-gray-700 leading-relaxed\">\n            {locale === 'zh'\n              ? 'ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å­å®«åœ¨åŠªåŠ›å·¥ä½œï¼Œæ’å‡ºç»è¡€ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­äº§ç”Ÿçš„\"æŒ‡æŒ¥å®˜\"â€”â€”å‰åˆ—è…ºç´ ï¼Œä¼šå¼•èµ·å­å®«è‚Œè‚‰æ”¶ç¼©ï¼Œæ”¶ç¼©å¾—è¶Šå‰å®³ï¼Œæœ‰äº›äººå°±è¶Šç—›ã€‚é’æ˜¥æœŸä½“å†…æ¿€ç´ æ°´å¹³å˜åŒ–æ¯”è¾ƒå¤§ï¼Œå‰åˆ—è…ºç´ æ°´å¹³ä¹Ÿå¯èƒ½åé«˜ä¸€äº›ï¼Œæ‰€ä»¥ç—›æ„Ÿä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚'\n              : 'Simply put, the uterus is working hard to expel menstrual blood. During this process, \"commanders\" called prostaglandins cause uterine muscle contractions. The stronger the contractions, the more pain some people feel. During adolescence, hormone levels fluctuate greatly, and prostaglandin levels may be higher, making pain more noticeable.'\n            }\n          </p>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-8\">\n          {painCharacteristics.map((characteristic, index) => (\n            <div key={index} className=\"text-center\">\n              <div className=\"bg-pink-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\n                <div className=\"text-pink-600\">\n                  {characteristic.icon}\n                </div>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                {characteristic.title}\n              </h3>\n              <p className=\"text-gray-600\">\n                {characteristic.description}\n              </p>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Pain Assessment Tool */}\n      <section className=\"bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-8\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\n            {locale === 'zh' ? 'ğŸ¯ è¯„ä¼°ä½ çš„ç—›ç»ç¨‹åº¦' : 'ğŸ¯ Assess Your Pain Level'}\n          </h2>\n          <p className=\"text-gray-600 max-w-2xl mx-auto\">\n            {locale === 'zh'\n              ? 'é€šè¿‡ç®€å•çš„è‡ªæµ‹ï¼Œäº†è§£ä½ çš„ç—›ç»æ˜¯å¦åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œä»¥åŠæ˜¯å¦éœ€è¦å¯»æ±‚è¿›ä¸€æ­¥çš„å¸®åŠ©ã€‚'\n              : 'Through simple self-assessment, understand if your period pain is within normal range and whether you need to seek further help.'\n            }\n          </p>\n        </div>\n\n        <div className=\"max-w-2xl mx-auto\">\n          <EmbeddedPainAssessment locale={locale} />\n        </div>\n      </section>\n\n      {/* Management Methods */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? '12-16å²ä¸“å±ç–¼ç—›ç®¡ç†å»ºè®®' : 'Specialized Pain Management for Ages 12-16'}\n        </h2>\n        <p className=\"text-center text-gray-600 mb-12\">\n          {locale === 'zh' ? 'åœ¨è¿™ä¸ªæˆé•¿å…³é”®æœŸï¼Œå»ºç«‹å¥åº·çš„ç»æœŸç®¡ç†ä¹ æƒ¯éå¸¸é‡è¦' : 'During this critical growth period, establishing healthy period management habits is very important'}\n        </p>\n        \n        <div className=\"space-y-8\">\n          {managementMethods.map((category, index) => (\n            <div key={index} className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n              <div className=\"flex items-center mb-6\">\n                <div className={`w-12 h-12 flex items-center justify-center rounded-full ${category.color} mr-4`}>\n                  {category.icon}\n                </div>\n                <h3 className=\"text-2xl font-semibold text-gray-900\">\n                  {category.category}\n                </h3>\n              </div>\n              \n              <div className=\"grid md:grid-cols-3 gap-6\">\n                {category.methods.map((method, methodIndex) => (\n                  <div key={methodIndex} className=\"bg-gray-50 rounded-lg p-6\">\n                    <div className=\"flex items-center mb-3\">\n                      <div className={`w-8 h-8 flex items-center justify-center rounded-full ${category.color} mr-3`}>\n                        {method.icon}\n                      </div>\n                      <h4 className=\"font-semibold text-gray-900\">\n                        {method.title}\n                      </h4>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">\n                      {method.description}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Medication Guidelines */}\n      <section className=\"bg-yellow-50 rounded-2xl p-8 border border-yellow-200\">\n        <div className=\"flex items-center mb-6\">\n          <Pill className=\"w-8 h-8 text-yellow-600 mr-3\" />\n          <h2 className=\"text-2xl font-bold text-gray-900\">\n            {locale === 'zh' ? 'è¯ç‰©ä½¿ç”¨éœ€è°¨æ…' : 'Careful Medication Use'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-2 gap-8\">\n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-4\">\n              {locale === 'zh' ? 'éå¤„æ–¹æ­¢ç—›è¯ï¼š' : 'Over-the-Counter Pain Medication:'}\n            </h3>\n            <ul className=\"space-y-3\">\n              <li className=\"flex items-start\">\n                <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <span className=\"font-medium\">{locale === 'zh' ? 'å¸¸è§è¯ç‰©' : 'Common Medications'}</span>\n                  <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'å¸ƒæ´›èŠ¬ï¼ˆIbuprofenï¼‰æˆ–å¯¹ä¹™é…°æ°¨åŸºé…šï¼ˆAcetaminophenï¼‰' : 'Ibuprofen or Acetaminophen'}</p>\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <CheckCircle className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <span className=\"font-medium\">{locale === 'zh' ? 'ä½¿ç”¨åŸåˆ™' : 'Usage Principles'}</span>\n                  <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'ä¸€å®šè¦åœ¨å®¶é•¿æŒ‡å¯¼ä¸‹ï¼Œä¸¥æ ¼æŒ‰ç…§è¯å“è¯´æ˜ä¹¦çš„å‰‚é‡å’Œæ—¶é—´æœç”¨' : 'Must be used under parental guidance, strictly following dosage and timing on medication labels'}</p>\n                </div>\n              </li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-4\">\n              {locale === 'zh' ? 'é‡è¦æé†’ï¼š' : 'Important Reminders:'}\n            </h3>\n            <ul className=\"space-y-3\">\n              <li className=\"flex items-start\">\n                <AlertTriangle className=\"w-5 h-5 text-yellow-600 mr-2 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <span className=\"font-medium\">{locale === 'zh' ? 'ä½•æ—¶æœç”¨' : 'When to Take'}</span>\n                  <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'æœ€å¥½åœ¨æ„Ÿè§‰ç–¼ç—›åˆšå¼€å§‹æ—¶å°±æœç”¨ï¼Œæ•ˆæœä¼šæ›´å¥½' : 'Best taken when pain first begins for better effectiveness'}</p>\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <AlertTriangle className=\"w-5 h-5 text-yellow-600 mr-2 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <span className=\"font-medium\">{locale === 'zh' ? 'ä¸è¦é•¿æœŸä¾èµ–' : 'Don\\'t Rely Long-term'}</span>\n                  <p className=\"text-sm text-gray-600\">{locale === 'zh' ? 'æ­¢ç—›è¯æ˜¯ç¼“è§£ç—‡çŠ¶çš„æ‰‹æ®µï¼Œä¸èƒ½é•¿æœŸæˆ–å¤§å‰‚é‡ä½¿ç”¨' : 'Pain medication is for symptom relief, not for long-term or high-dose use'}</p>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Warning Signals */}\n      <section className=\"bg-red-50 rounded-2xl p-8 border border-red-200\">\n        <div className=\"flex items-center mb-6\">\n          <AlertTriangle className=\"w-8 h-8 text-red-600 mr-3\" />\n          <h2 className=\"text-2xl font-bold text-gray-900\">\n            {locale === 'zh' ? 'å…³æ³¨èº«ä½“çš„\"æŠ¥è­¦ä¿¡å·\"' : 'Watch for Body\\'s \"Warning Signals\"'}\n          </h2>\n        </div>\n        \n        <p className=\"text-gray-700 mb-6\">\n          {locale === 'zh'\n            ? 'å¦‚æœå‡ºç°ä»¥ä¸‹ä»»ä½•ä¸€ç§æƒ…å†µï¼Œè¯·åŠ¡å¿…åŠæ—¶å‘Šè¯‰å®¶é•¿ï¼Œå¹¶å°½å¿«å»çœ‹åŒ»ç”Ÿï¼'\n            : 'If any of the following situations occur, be sure to tell your parents immediately and see a doctor as soon as possible!'\n          }\n        </p>\n        \n        <div className=\"grid md:grid-cols-2 gap-4\">\n          {warningSignals.map((signal, index) => (\n            <div key={index} className=\"flex items-start bg-white rounded-lg p-4\">\n              <AlertTriangle className=\"w-5 h-5 text-red-500 mr-3 flex-shrink-0 mt-0.5\" />\n              <span className=\"text-sm text-gray-700\">{signal}</span>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"mt-6 bg-white rounded-lg p-6\">\n          <div className=\"flex items-center mb-3\">\n            <Stethoscope className=\"w-6 h-6 text-red-600 mr-2\" />\n            <h3 className=\"font-semibold text-gray-900\">\n              {locale === 'zh' ? 'è®°ä½ï¼š' : 'Remember:'}\n            </h3>\n          </div>\n          <p className=\"text-gray-700\">\n            {locale === 'zh'\n              ? 'å‘è‚²æœŸçš„ç–¼ç—›ç»å¤§å¤šæ•°æ˜¯æ­£å¸¸çš„ï¼Œä½†æ’é™¤æ½œåœ¨çš„å¥åº·é—®é¢˜éå¸¸é‡è¦ã€‚åŒ»ç”Ÿä¼šæ ¹æ®ä½ çš„å…·ä½“æƒ…å†µç»™å‡ºä¸“ä¸šçš„è¯Šæ–­å’Œå»ºè®®ã€‚'\n              : 'Most developmental pain is normal, but it\\'s very important to rule out potential health issues. Doctors will provide professional diagnosis and advice based on your specific situation.'\n            }\n          </p>\n        </div>\n      </section>\n\n      {/* Encouragement */}\n      <section className=\"bg-gradient-to-r from-pink-100 to-purple-100 rounded-2xl p-8 text-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ğŸ’ª ä½ å¹¶ä¸å­¤å•' : 'ğŸ’ª You\\'re Not Alone'}\n        </h2>\n        <p className=\"text-lg text-gray-700 max-w-2xl mx-auto\">\n          {locale === 'zh'\n            ? 'äº†è§£è‡ªå·±çš„èº«ä½“ï¼Œå…³æ³¨ç–¼ç—›çš„å˜åŒ–ï¼Œç§¯æé‡‡å–åº”å¯¹æªæ–½ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¤§èƒ†å¯»æ±‚å¸®åŠ©ï¼Œä½ å°±èƒ½æ›´å¥½åœ°åº¦è¿‡é’æ˜¥æœŸçš„ç»æœŸã€‚è®°ä½ï¼Œè¿™æ˜¯æˆé•¿çš„ä¸€éƒ¨åˆ†ï¼Œä½ æ­£åœ¨å˜å¾—æ›´åŠ å¼ºå¤§ï¼'\n            : 'Understanding your body, monitoring pain changes, actively taking coping measures, and boldly seeking help when needed will help you better navigate adolescent periods. Remember, this is part of growing up - you\\'re becoming stronger!'\n          }\n        </p>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-gray-200\">\n        <Link\n          href={`/${locale}/teen-health/campus-guide`}\n          className=\"flex items-center text-gray-600 hover:text-primary-600 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5 mr-2\" />\n          {locale === 'zh' ? 'ä¸Šä¸€ç¯‡ï¼šæ ¡å›­åº”æ€¥æŒ‡å—' : 'Previous: Campus Emergency Guide'}\n        </Link>\n        \n        <Link\n          href={`/${locale}/teen-health/emotional-support`}\n          className=\"flex items-center text-primary-600 hover:text-primary-700 transition-colors\"\n        >\n          {locale === 'zh' ? 'ä¸‹ä¸€ç¯‡ï¼šæƒ…ç»ªæ”¯æŒä¸å¿ƒç†å¥åº·' : 'Next: Emotional Support & Mental Health'}\n          <ArrowRight className=\"w-5 h-5 ml-2\" />\n        </Link>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/teen-health/emotional-support/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Music' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":31,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":10}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport Link from 'next/link';\nimport { \n  Brain, \n  Heart, \n  Moon, \n  Music,\n  PenTool,\n  Users,\n  AlertTriangle,\n  CheckCircle,\n  ArrowLeft,\n  ArrowRight,\n  MessageCircle,\n  Headphones,\n  BookOpen,\n  Smile,\n  Frown,\n  Zap\n} from 'lucide-react';\nimport type { Metadata } from 'next';\n\ntype Locale = 'en' | 'zh';\n\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const t = await getTranslations({ locale, namespace: 'teenHealth' });\n  \n  return {\n    title: locale === 'zh' ? 'æƒ…ç»ªæ”¯æŒä¸å¿ƒç†å¥åº· - é’å°‘å¹´ç»æœŸå¥åº·ä¸“åŒº' : 'Emotional Support & Mental Health - Teen Menstrual Health Zone',\n    description: locale === 'zh' \n      ? 'ç»æœŸç„¦è™‘ã€æƒ…ç»ªä½è½å¦‚ä½•åº”å¯¹ï¼Ÿæ”¾æ¾æŠ€å·§ã€åŒé¾„äººç»éªŒåˆ†äº«ï¼Œé™ªä½ åº¦è¿‡æƒ…ç»ª\"è¿‡å±±è½¦\"ã€‚'\n      : 'How to cope with period anxiety and mood swings? Relaxation techniques and peer experience sharing.',\n  };\n}\n\nexport default async function EmotionalSupportPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const emotionalSymptoms = [\n    {\n      icon: <Frown className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'çƒ¦èºæ˜“æ€’' : 'Irritability',\n      description: locale === 'zh' ? 'ä¸€ç‚¹å°äº‹å°±å¯èƒ½ç‚¹ç‡ƒä½ çš„æ€’ç«' : 'Small things might easily trigger your anger'\n    },\n    {\n      icon: <Heart className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'æƒ…ç»ªä½è½' : 'Low Mood',\n      description: locale === 'zh' ? 'æ„Ÿè§‰æ²¡ç²¾ç¥ã€æä¸èµ·åŠ²ï¼Œç”šè‡³æœ‰ç‚¹æƒ³å“­' : 'Feeling listless, lacking energy, even wanting to cry'\n    },\n    {\n      icon: <Zap className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'ç„¦è™‘ä¸å®‰' : 'Anxiety',\n      description: locale === 'zh' ? 'æ‹…å¿ƒç–¼ç—›ã€æ‹…å¿ƒå‡ºè¡€ã€æ‹…å¿ƒåˆ«äººå‘ç°' : 'Worrying about pain, bleeding, or others noticing'\n    },\n    {\n      icon: <Brain className=\"w-6 h-6\" />,\n      title: locale === 'zh' ? 'æ³¨æ„åŠ›ä¸é›†ä¸­' : 'Difficulty Concentrating',\n      description: locale === 'zh' ? 'å­¦ä¹ æ•ˆç‡ä¸‹é™ï¼Œéš¾ä»¥ä¸“æ³¨' : 'Decreased study efficiency, hard to focus'\n    }\n  ];\n\n  const copingStrategies = [\n    {\n      category: locale === 'zh' ? 'æ”¾æ¾æŠ€å·§' : 'Relaxation Techniques',\n      icon: <Moon className=\"w-6 h-6\" />,\n      color: 'bg-blue-50 text-blue-600',\n      strategies: [\n        {\n          icon: <Heart className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'æ·±å‘¼å¸ç»ƒä¹ ' : 'Deep Breathing',\n          description: locale === 'zh' ? 'åœ¨æ„Ÿè§‰çƒ¦èºæˆ–ç„¦è™‘æ—¶ï¼Œæ‰¾ä¸€ä¸ªå®‰é™çš„åœ°æ–¹ï¼Œåšå‡ æ¬¡æ·±å‘¼å¸' : 'When feeling irritated or anxious, find a quiet place and take several deep breaths'\n        },\n        {\n          icon: <Brain className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'å†¥æƒ³æˆ–æ­£å¿µ' : 'Meditation or Mindfulness',\n          description: locale === 'zh' ? 'å°è¯•ç®€å•çš„å¼•å¯¼å¼å†¥æƒ³ï¼Œå¸®åŠ©å¹³é™å†…å¿ƒ' : 'Try simple guided meditation to help calm your mind'\n        },\n        {\n          icon: <Headphones className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'å¬éŸ³ä¹/ASMR' : 'Music/ASMR',\n          description: locale === 'zh' ? 'å¬ä¸€äº›è®©ä½ æ”¾æ¾æˆ–æ„‰æ‚¦çš„éŸ³ä¹ï¼Œæˆ–å°è¯•ASMRéŸ³é¢‘' : 'Listen to relaxing or pleasant music, or try ASMR audio'\n        }\n      ]\n    },\n    {\n      category: locale === 'zh' ? 'æƒ…ç»ªè¡¨è¾¾' : 'Emotional Expression',\n      icon: <PenTool className=\"w-6 h-6\" />,\n      color: 'bg-purple-50 text-purple-600',\n      strategies: [\n        {\n          icon: <PenTool className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'å†™æ—¥è®°æˆ–ç”»ç”»' : 'Journaling or Drawing',\n          description: locale === 'zh' ? 'æŠŠè‡ªå·±çš„æ„Ÿå—å†™ä¸‹æ¥æˆ–ç”»å‡ºæ¥ï¼Œæ˜¯ä¸€ç§å¾ˆå¥½çš„æƒ…ç»ªå®£æ³„æ–¹å¼' : 'Writing down or drawing your feelings is a great way to release emotions'\n        },\n        {\n          icon: <Smile className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'åšå–œæ¬¢çš„äº‹' : 'Do What You Love',\n          description: locale === 'zh' ? 'çœ‹ç”µå½±ã€å¬æ­Œã€å’Œæœ‹å‹èŠå¤©ã€åšæ‰‹å·¥ï¼Œåšä»»ä½•è®©ä½ æ„Ÿåˆ°å¼€å¿ƒçš„äº‹æƒ…' : 'Watch movies, listen to music, chat with friends, do crafts - anything that makes you happy'\n        },\n        {\n          icon: <Users className=\"w-5 h-5\" />,\n          title: locale === 'zh' ? 'ä¸äººæ²Ÿé€š' : 'Communicate with Others',\n          description: locale === 'zh' ? 'å’Œä½ ä¿¡ä»»çš„æœ‹å‹ã€å®¶äººæˆ–è€å¸ˆèŠèŠä½ çš„æ„Ÿå—' : 'Talk about your feelings with trusted friends, family, or teachers'\n        }\n      ]\n    }\n  ];\n\n  const peerExperiences = [\n    {\n      question: locale === 'zh' ? 'ç»æœŸå‰æƒ…ç»ªç‰¹åˆ«å·®ï¼Œçœ‹ä»€ä¹ˆéƒ½ä¸é¡ºçœ¼ï¼Œæ€ä¹ˆæ§åˆ¶è‡ªå·±çš„è„¾æ°”ä¸è¿æ€’å®¶äººï¼Ÿ' : 'My mood is particularly bad before my period, everything annoys me. How can I control my temper and not take it out on family?',\n      answer: locale === 'zh' \n        ? 'æˆ‘ä¹Ÿæ˜¯è¿™æ ·ï¼æˆ‘çš„æ–¹æ³•æ˜¯ï¼Œæ„Ÿè§‰å¿«è¦å‘è„¾æ°”çš„æ—¶å€™ï¼Œå°±æ·±å‘¼å¸ï¼Œç„¶åæ‰¾ä¸ªæ²¡äººçš„åœ°æ–¹å‘†å‡ åˆ†é’Ÿï¼Œæˆ–è€…å‡ºå»æ•£æ­¥ã€‚å‘Šè¯‰å®¶äººæˆ‘è¿™å‡ å¤©æƒ…ç»ªä¸å¤ªç¨³å®šï¼Œè¯·ä»–ä»¬å¤šæ‹…å¾…ä¸€ä¸‹ï¼Œå¾—åˆ°ç†è§£ä¼šå¥½å¾ˆå¤šã€‚'\n        : 'I\\'m the same way! My method is to take deep breaths when I feel like I\\'m about to lose my temper, then find a quiet place to stay for a few minutes or go for a walk. I tell my family that my emotions are unstable these days and ask for their understanding - it helps a lot.'\n    },\n    {\n      question: locale === 'zh' ? 'æ¯æ¬¡æ¥æœˆç»ï¼Œæˆ‘å°±å®³æ€•è‚šå­ç—›ï¼Œè€Œä¸”ä¼šæƒ³å¥½å¤šå¥‡å¥‡æ€ªæ€ªçš„äº‹æƒ…ï¼Œæ„Ÿè§‰è‡ªå·±å¥½ç„¦è™‘ï¼Œæ­£å¸¸å—ï¼Ÿ' : 'Every time I get my period, I\\'m afraid of stomach pain and think about many strange things. I feel so anxious - is this normal?',\n      answer: locale === 'zh'\n        ? 'è¶…çº§æ­£å¸¸ï¼æˆ‘é‚£æ—¶å€™ä¹Ÿæ˜¯ï¼Œä¼šè¿‡åº¦æ‹…å¿ƒç–¼ç—›ã€å­¦ä¹ å˜å·®ã€èº«æå˜åŒ–ä¹‹ç±»çš„ã€‚åæ¥æˆ‘çŸ¥é“è¿™æ˜¯æ¿€ç´ çš„å½±å“ï¼Œå°±æ²¡é‚£ä¹ˆå®³æ€•äº†ã€‚å¤šäº†è§£ç§‘æ™®çŸ¥è¯†ï¼ŒçŸ¥é“èº«ä½“æ˜¯æ€ä¹ˆå›äº‹ï¼Œèƒ½å‡è½»å¾ˆå¤šç„¦è™‘ã€‚æˆ‘è¿˜ä¼šå»åšäº›å–œæ¬¢çš„äº‹æƒ…åˆ†æ•£æ³¨æ„åŠ›ã€‚'\n        : 'Super normal! I was the same way, worrying excessively about pain, declining grades, body changes, etc. Later I learned this was hormonal influence and wasn\\'t so scared anymore. Learning more scientific knowledge about how the body works can reduce a lot of anxiety. I also do things I enjoy to distract myself.'\n    },\n    {\n      question: locale === 'zh' ? 'æˆ‘ç—›ç»å¾ˆå‰å®³ï¼Œæœ‰æ—¶å€™ä¼šå“­ï¼Œä½†ä¸æ•¢å‘Šè¯‰ä»»ä½•äººï¼Œè§‰å¾—å¾ˆä¸¢è„¸æ€ä¹ˆåŠï¼Ÿ' : 'My period pain is severe and sometimes I cry, but I don\\'t dare tell anyone because I feel embarrassed. What should I do?',\n      answer: locale === 'zh'\n        ? 'ç—›ç»ä¸æ˜¯ä¸¢è„¸çš„äº‹ï¼å®ƒæ˜¯å¾ˆå¤šå¥³ç”Ÿéƒ½ä¼šç»å†çš„ã€‚å‹‡æ•¢åœ°å‘Šè¯‰ä½ æœ€ä¿¡ä»»çš„äººï¼Œæ¯”å¦‚å¦ˆå¦ˆã€å¥½æœ‹å‹ã€æ ¡åŒ»ï¼Œä»–ä»¬ä¼šç†è§£ä½ ã€å¸®åŠ©ä½ çš„ã€‚å¯»æ±‚å¸®åŠ©ä¸æ˜¯ç¤ºå¼±ï¼Œæ˜¯çˆ±è‡ªå·±çš„è¡¨ç°ã€‚'\n        : 'Period pain is not embarrassing! It\\'s something many girls experience. Bravely tell someone you trust most, like your mom, good friend, or school nurse - they will understand and help you. Seeking help isn\\'t weakness, it\\'s self-care.'\n    }\n  ];\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 space-y-12\">\n      {/* Breadcrumb */}\n      <nav className=\"flex items-center text-sm text-gray-600\">\n        <Link href={`/${locale}/teen-health`} className=\"hover:text-primary-600 transition-colors\">\n          {locale === 'zh' ? 'é’å°‘å¹´ä¸“åŒº' : 'Teen Zone'}\n        </Link>\n        <span className=\"mx-2\">/</span>\n        <span className=\"text-gray-900\">{locale === 'zh' ? 'æƒ…ç»ªæ”¯æŒä¸å¿ƒç†å¥åº·' : 'Emotional Support & Mental Health'}</span>\n      </nav>\n\n      {/* Header */}\n      <header className=\"text-center\">\n        <div className=\"flex justify-center mb-6\">\n          <div className=\"bg-purple-100 rounded-full p-4\">\n            <Brain className=\"w-12 h-12 text-purple-600\" />\n          </div>\n        </div>\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\n          {locale === 'zh' ? 'ğŸ’­ æƒ…ç»ªæ”¯æŒä¸å¿ƒç†å¥åº·' : 'ğŸ’­ Emotional Support & Mental Health'}\n        </h1>\n        <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n          {locale === 'zh'\n            ? 'ç»æœŸä¸ä»…ä»…æ˜¯èº«ä½“ä¸Šçš„ä¸é€‚ï¼Œæœ‰æ—¶å€™æƒ…ç»ªä¹Ÿä¼šè·Ÿç€\"æ„Ÿå†’\"ã€‚çƒ¦èºã€æ˜“æ€’ã€æ„Ÿè§‰ä½è½ã€ç”šè‡³æœ‰ç‚¹æƒ³å“­ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™å¾ˆæ­£å¸¸ï¼'\n            : 'Periods aren\\'t just physical discomfort - sometimes emotions can \"catch a cold\" too. Irritable, angry, feeling down, even wanting to cry? Don\\'t worry, this is normal!'\n          }\n        </p>\n      </header>\n\n      {/* User Stories */}\n      <section className=\"space-y-6\">\n        <div className=\"bg-purple-50 rounded-2xl p-8 border border-purple-100\">\n          <div className=\"flex items-start\">\n            <div className=\"bg-purple-100 rounded-full p-2 mr-4 flex-shrink-0\">\n              <MessageCircle className=\"w-6 h-6 text-purple-600\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">\n                {locale === 'zh' ? 'å°é›…åŒå­¦ï¼š' : 'Xiao Ya:'}\n              </h3>\n              <p className=\"text-gray-700 italic\">\n                {locale === 'zh'\n                  ? '\"æ¥æœˆç»å‰å‡ å¤©ï¼Œæˆ‘æ€»æ˜¯ä¼šè«åå…¶å¦™åœ°çƒ¦èºï¼Œçœ‹ä»€ä¹ˆéƒ½ä¸é¡ºçœ¼ï¼Œç‰¹åˆ«å®¹æ˜“å’Œå°ä¼™ä¼´åµæ¶ï¼Œäº‹ååˆå¾ˆåæ‚”ã€‚\"'\n                  : '\"A few days before my period, I always get inexplicably irritated, everything annoys me, and I easily argue with friends, then regret it afterwards.\"'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-blue-50 rounded-2xl p-8 border border-blue-100\">\n          <div className=\"flex items-start\">\n            <div className=\"bg-blue-100 rounded-full p-2 mr-4 flex-shrink-0\">\n              <MessageCircle className=\"w-6 h-6 text-blue-600\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">\n                {locale === 'zh' ? 'å°é™åŒå­¦ï¼š' : 'Xiao Jing:'}\n              </h3>\n              <p className=\"text-gray-700 italic\">\n                {locale === 'zh'\n                  ? '\"æ¯æ¬¡æœˆç»å¿«æ¥ï¼Œæˆ‘å°±ç‰¹åˆ«ç´§å¼ ï¼Œå®³æ€•è‚šå­ç—›ï¼Œå®³æ€•è¡€é‡å¤šå¼„è„è£¤å­ï¼Œæ™šä¸Šéƒ½ç¡ä¸å¥½ã€‚æ„Ÿè§‰è‡ªå·±å¥½è„†å¼±ã€‚\"'\n                  : '\"Every time my period is coming, I get especially nervous, afraid of stomach pain, afraid of heavy bleeding staining my pants, can\\'t sleep well at night. I feel so vulnerable.\"'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Why Emotions Are Affected */}\n      <section className=\"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-8\">\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'ä¸ºä»€ä¹ˆç»æœŸæƒ…ç»ªä¼šå—å½±å“ï¼Ÿ' : 'Why Are Emotions Affected During Periods?'}\n        </h2>\n        \n        <div className=\"max-w-4xl mx-auto\">\n          <p className=\"text-lg text-gray-700 mb-6 leading-relaxed\">\n            {locale === 'zh'\n              ? 'ä¸»è¦æ˜¯å› ä¸ºæœˆç»å‘¨æœŸä¸­ä½“å†…æ¿€ç´ æ°´å¹³çš„æ³¢åŠ¨ã€‚ç‰¹åˆ«æ˜¯é›Œæ¿€ç´ å’Œå­•æ¿€ç´ ï¼Œå®ƒä»¬çš„å˜åŒ–ä¼šå½±å“å¤§è„‘ä¸­ä¸€äº›è°ƒèŠ‚æƒ…ç»ªçš„åŒ–å­¦ç‰©è´¨ï¼Œæ¯”å¦‚è¡€æ¸…ç´ ã€‚æ‰€ä»¥ï¼Œæ„Ÿè§‰æƒ…ç»ªä¸ç¨³å®šæ˜¯å¾ˆæ­£å¸¸çš„ç”Ÿç†ååº”ã€‚'\n              : 'This is mainly due to hormonal fluctuations during the menstrual cycle. Especially estrogen and progesterone - their changes affect mood-regulating chemicals in the brain, like serotonin. So feeling emotionally unstable is a very normal physiological response.'\n            }\n          </p>\n          \n          <div className=\"grid md:grid-cols-4 gap-6\">\n            {emotionalSymptoms.map((symptom, index) => (\n              <div key={index} className=\"text-center bg-white rounded-lg p-6 shadow-sm\">\n                <div className=\"bg-purple-100 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3\">\n                  <div className=\"text-purple-600\">\n                    {symptom.icon}\n                  </div>\n                </div>\n                <h3 className=\"font-semibold text-gray-900 mb-2\">\n                  {symptom.title}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {symptom.description}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Coping Strategies */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'åº”å¯¹ç»æœŸç„¦è™‘å’Œæƒ…ç»ªä½è½' : 'Coping with Period Anxiety and Low Mood'}\n        </h2>\n        <p className=\"text-center text-gray-600 mb-12\">\n          {locale === 'zh' ? 'ç†è§£è¿™äº›æ˜¯èº«ä½“çš„æ­£å¸¸ååº”ï¼Œæ˜¯ç¼“è§£ç„¦è™‘çš„ç¬¬ä¸€æ­¥' : 'Understanding these as normal bodily responses is the first step to relieving anxiety'}\n        </p>\n        \n        <div className=\"space-y-8\">\n          {copingStrategies.map((category, index) => (\n            <div key={index} className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n              <div className=\"flex items-center mb-6\">\n                <div className={`w-12 h-12 flex items-center justify-center rounded-full ${category.color} mr-4`}>\n                  {category.icon}\n                </div>\n                <h3 className=\"text-2xl font-semibold text-gray-900\">\n                  {category.category}\n                </h3>\n              </div>\n              \n              <div className=\"grid md:grid-cols-3 gap-6\">\n                {category.strategies.map((strategy, strategyIndex) => (\n                  <div key={strategyIndex} className=\"bg-gray-50 rounded-lg p-6\">\n                    <div className=\"flex items-center mb-3\">\n                      <div className={`w-8 h-8 flex items-center justify-center rounded-full ${category.color} mr-3`}>\n                        {strategy.icon}\n                      </div>\n                      <h4 className=\"font-semibold text-gray-900\">\n                        {strategy.title}\n                      </h4>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">\n                      {strategy.description}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* Healthy Habits */}\n      <section className=\"bg-green-50 rounded-2xl p-8 border border-green-100\">\n        <div className=\"flex items-center mb-6\">\n          <Heart className=\"w-8 h-8 text-green-600 mr-3\" />\n          <h2 className=\"text-2xl font-bold text-gray-900\">\n            {locale === 'zh' ? 'å»ºç«‹å¥åº·çš„æƒ…ç»ªç®¡ç†ä¹ æƒ¯' : 'Build Healthy Emotional Management Habits'}\n          </h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div className=\"bg-white rounded-lg p-6\">\n            <div className=\"flex items-center mb-3\">\n              <Moon className=\"w-6 h-6 text-green-600 mr-2\" />\n              <h3 className=\"font-semibold text-gray-900\">\n                {locale === 'zh' ? 'å……è¶³çš„ç¡çœ ' : 'Adequate Sleep'}\n              </h3>\n            </div>\n            <p className=\"text-sm text-gray-600\">\n              {locale === 'zh' ? 'ä¿è¯é«˜è´¨é‡çš„ç¡çœ å¯¹è°ƒèŠ‚æƒ…ç»ªéå¸¸é‡è¦ã€‚ç¡å‰å¯ä»¥å¬ä¸€äº›èˆ’ç¼“çš„éŸ³ä¹æˆ–å†¥æƒ³éŸ³é¢‘ã€‚' : 'Quality sleep is crucial for emotional regulation. Listen to soothing music or meditation audio before bed.'}\n            </p>\n          </div>\n          \n          <div className=\"bg-white rounded-lg p-6\">\n            <div className=\"flex items-center mb-3\">\n              <Users className=\"w-6 h-6 text-green-600 mr-2\" />\n              <h3 className=\"font-semibold text-gray-900\">\n                {locale === 'zh' ? 'åŒä¼´æ”¯æŒ' : 'Peer Support'}\n              </h3>\n            </div>\n            <p className=\"text-sm text-gray-600\">\n              {locale === 'zh' ? 'çŸ¥é“è‡ªå·±ä¸æ˜¯ä¸€ä¸ªäººç»å†è¿™äº›å¾ˆé‡è¦ã€‚å¯ä»¥å’ŒåŒé¾„å°ä¼™ä¼´äº¤æµï¼Œæˆ–è€…çœ‹çœ‹åˆ«äººæ˜¯å¦‚ä½•åº”å¯¹çš„ã€‚' : 'Knowing you\\'re not alone in experiencing this is important. Talk with peers or see how others cope.'}\n            </p>\n          </div>\n          \n          <div className=\"bg-white rounded-lg p-6\">\n            <div className=\"flex items-center mb-3\">\n              <BookOpen className=\"w-6 h-6 text-green-600 mr-2\" />\n              <h3 className=\"font-semibold text-gray-900\">\n                {locale === 'zh' ? 'å­¦ä¹ äº†è§£' : 'Learn and Understand'}\n              </h3>\n            </div>\n            <p className=\"text-sm text-gray-600\">\n              {locale === 'zh' ? 'å¤šäº†è§£ç»æœŸç›¸å…³çš„ç§‘å­¦çŸ¥è¯†ï¼Œç†è§£èº«ä½“å˜åŒ–ï¼Œèƒ½å¤Ÿå‡å°‘å¾ˆå¤šä¸å¿…è¦çš„æ‹…å¿ƒå’Œç„¦è™‘ã€‚' : 'Learning scientific knowledge about periods and understanding body changes can reduce unnecessary worry and anxiety.'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Peer Q&A */}\n      <section>\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-8\">\n          {locale === 'zh' ? 'ğŸ‘­ åŒé¾„äººç»éªŒåˆ†äº«' : 'ğŸ‘­ Peer Experience Sharing'}\n        </h2>\n        <p className=\"text-center text-gray-600 mb-12\">\n          {locale === 'zh' ? 'æ¥è‡ªçœŸå®ç”¨æˆ·çš„åŒ¿åé—®ç­”ï¼Œä½ å¹¶ä¸å­¤å•' : 'Anonymous Q&A from real users - you\\'re not alone'}\n        </p>\n        \n        <div className=\"space-y-8\">\n          {peerExperiences.map((experience, index) => (\n            <div key={index} className=\"bg-white rounded-2xl p-8 shadow-lg border border-gray-100\">\n              <div className=\"mb-6\">\n                <div className=\"flex items-start mb-4\">\n                  <div className=\"bg-blue-100 rounded-full p-2 mr-3 flex-shrink-0\">\n                    <MessageCircle className=\"w-5 h-5 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-blue-600 mb-2\">Q:</h3>\n                    <p className=\"text-gray-700\">{experience.question}</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start\">\n                  <div className=\"bg-green-100 rounded-full p-2 mr-3 flex-shrink-0\">\n                    <Users className=\"w-5 h-5 text-green-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-green-600 mb-2\">A:</h3>\n                    <p className=\"text-gray-700 italic\">{experience.answer}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/* When to Seek Help */}\n      <section className=\"bg-yellow-50 rounded-2xl p-8 border border-yellow-200\">\n        <div className=\"flex items-center mb-6\">\n          <AlertTriangle className=\"w-8 h-8 text-yellow-600 mr-3\" />\n          <h2 className=\"text-2xl font-bold text-gray-900\">\n            {locale === 'zh' ? 'ä½•æ—¶å¯»æ±‚ä¸“ä¸šå¸®åŠ©ï¼Ÿ' : 'When to Seek Professional Help?'}\n          </h2>\n        </div>\n        \n        <p className=\"text-gray-700 mb-6\">\n          {locale === 'zh'\n            ? 'å¦‚æœä½ çš„ç»æœŸæƒ…ç»ªé—®é¢˜ï¼ˆç„¦è™‘ã€æŠ‘éƒã€æ˜“æ€’ï¼‰éå¸¸ä¸¥é‡ï¼ŒæŒç»­æ—¶é—´é•¿ï¼Œå½±å“åˆ°ä½ çš„å­¦ä¹ ã€ç¤¾äº¤å’Œæ—¥å¸¸ç”Ÿæ´»ï¼Œæˆ–è€…æœ‰è‡ªæˆ‘ä¼¤å®³çš„æƒ³æ³•ï¼Œè¯·ä¸€å®šè¦å‘Šè¯‰å®¶é•¿æˆ–è€å¸ˆï¼Œå¹¶å¯»æ±‚ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢å¸ˆæˆ–åŒ»ç”Ÿçš„å¸®åŠ©ã€‚'\n            : 'If your period-related emotional issues (anxiety, depression, irritability) are very severe, last a long time, affect your studies, social life, and daily activities, or if you have thoughts of self-harm, please tell your parents or teachers and seek help from professional counselors or doctors.'\n          }\n        </p>\n        \n        <div className=\"bg-white rounded-lg p-6\">\n          <h3 className=\"font-semibold text-gray-900 mb-3\">\n            {locale === 'zh' ? 'è®°ä½ï¼š' : 'Remember:'}\n          </h3>\n          <p className=\"text-gray-700\">\n            {locale === 'zh'\n              ? 'æƒ…ç»ªåƒå¤©æ°”ä¸€æ ·ä¼šæœ‰é˜´æ™´åœ†ç¼ºï¼Œç‰¹åˆ«æ˜¯ç»æœŸã€‚äº†è§£å®ƒï¼Œæ¥çº³å®ƒï¼Œå¹¶å­¦ä¼šä¸å®ƒç›¸å¤„ï¼Œä½ ä¼šè¶Šæ¥è¶Šå¼ºå¤§ã€‚'\n              : 'Emotions are like weather - they have ups and downs, especially during periods. Understanding, accepting, and learning to live with them will make you stronger.'\n            }\n          </p>\n        </div>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"flex justify-between items-center pt-8 border-t border-gray-200\">\n        <Link\n          href={`/${locale}/teen-health/development-pain`}\n          className=\"flex items-center text-gray-600 hover:text-primary-600 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5 mr-2\" />\n          {locale === 'zh' ? 'ä¸Šä¸€ç¯‡ï¼šå‘è‚²æœŸç–¼ç—›ç®¡ç†' : 'Previous: Developmental Pain Management'}\n        </Link>\n        \n        <Link\n          href={`/${locale}/teen-health/communication-guide`}\n          className=\"flex items-center text-primary-600 hover:text-primary-700 transition-colors\"\n        >\n          {locale === 'zh' ? 'ä¸‹ä¸€ç¯‡ï¼šæ²Ÿé€šæŒ‡å¯¼' : 'Next: Communication Guide'}\n          <ArrowRight className=\"w-5 h-5 ml-2\" />\n        </Link>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/teen-health/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/terms-of-service/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTranslations' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations, unstable_setRequestLocale } from 'next-intl/server';\nimport type { Metadata } from 'next';\n\n// Types\ntype Locale = 'en' | 'zh';\n\n// Generate metadata for the terms of service page\nexport async function generateMetadata({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}): Promise<Metadata> {\n  const { locale } = await params;\n  const title = locale === 'zh' ? 'æœåŠ¡æ¡æ¬¾' : 'Terms of Service';\n  const description = locale === 'zh' \n    ? 'äº†è§£ä½¿ç”¨periodhub.healthçš„æ¡æ¬¾å’Œæ¡ä»¶ï¼ŒåŒ…æ‹¬ç”¨æˆ·è´£ä»»å’ŒæœåŠ¡é™åˆ¶ã€‚'\n    : 'Learn about the terms and conditions for using periodhub.health, including user responsibilities and service limitations.';\n\n  return {\n    title: `${title} | periodhub.health`,\n    description,\n    alternates: {\n      canonical: `https://www.periodhub.health/${locale}/terms-of-service`,\n      languages: {\n        'zh-CN': 'https://www.periodhub.health/zh/terms-of-service',\n        'en-US': 'https://www.periodhub.health/en/terms-of-service',\n        'x-default': 'https://www.periodhub.health/en/terms-of-service',\n      },\n    },\n    openGraph: {\n      title: `${title} | periodhub.health`,\n      description,\n      type: 'website',\n      url: `https://www.periodhub.health/${locale}/terms-of-service`,\n    },\n    robots: {\n      index: true,\n      follow: true,\n    },\n  };\n}\n\nexport default async function TermsOfServicePage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  unstable_setRequestLocale(locale);\n\n  const content = locale === 'zh' ? {\n    title: 'æœåŠ¡æ¡æ¬¾',\n    lastUpdated: 'æœ€åæ›´æ–°ï¼š2024å¹´4æœˆ1æ—¥',\n    intro: 'æ¬¢è¿ä½¿ç”¨periodhub.healthã€‚é€šè¿‡è®¿é—®å’Œä½¿ç”¨æˆ‘ä»¬çš„ç½‘ç«™ï¼Œæ‚¨åŒæ„éµå®ˆä»¥ä¸‹æœåŠ¡æ¡æ¬¾ã€‚è¯·ä»”ç»†é˜…è¯»è¿™äº›æ¡æ¬¾ï¼Œå¦‚æœæ‚¨ä¸åŒæ„ä»»ä½•æ¡æ¬¾ï¼Œè¯·ä¸è¦ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡ã€‚',\n    sections: [\n      {\n        title: '1. æœåŠ¡æè¿°',\n        content: `\n          <p>periodhub.healthæ˜¯ä¸€ä¸ªæä¾›æœˆç»å¥åº·ä¿¡æ¯å’Œæ•™è‚²èµ„æºçš„å¹³å°ã€‚æˆ‘ä»¬çš„æœåŠ¡åŒ…æ‹¬ï¼š</p>\n          <ul>\n            <li><strong>æ•™è‚²å†…å®¹ï¼š</strong>å…³äºæœˆç»å¥åº·ã€ç–¼ç—›ç®¡ç†å’Œå¥³æ€§å¥åº·çš„æ–‡ç« å’ŒæŒ‡å—</li>\n            <li><strong>äº¤äº’å·¥å…·ï¼š</strong>ç—‡çŠ¶è¯„ä¼°å·¥å…·ã€ç–¼ç—›è¿½è¸ªå™¨å’Œä¸ªæ€§åŒ–å»ºè®®ç³»ç»Ÿ</li>\n            <li><strong>èµ„æºåº“ï¼š</strong>ä¼ ç»Ÿç–—æ³•ã€è‡ªç„¶ç¼“è§£æ–¹æ³•å’Œç”Ÿæ´»æ–¹å¼å»ºè®®</li>\n            <li><strong>ç¤¾åŒºæ”¯æŒï¼š</strong>å®‰å…¨çš„ä¿¡æ¯åˆ†äº«å’Œæ”¯æŒç¯å¢ƒ</li>\n          </ul>\n          \n          <div class=\"bg-red-50 border-l-4 border-red-500 p-4 my-4\">\n            <p class=\"text-red-800\"><strong>é‡è¦åŒ»ç–—å£°æ˜ï¼š</strong>æˆ‘ä»¬çš„æœåŠ¡ä»…ä¾›æ•™è‚²å’Œä¿¡æ¯ç›®çš„ï¼Œä¸æ„æˆåŒ»ç–—å»ºè®®ã€è¯Šæ–­æˆ–æ²»ç–—ã€‚æˆ‘ä»¬ä¸æ˜¯åŒ»ç–—ä¿å¥ä¸“ä¸šäººå‘˜ï¼Œæœ¬ç½‘ç«™ä¿¡æ¯ä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€‚ä½¿ç”¨æœ¬ç½‘ç«™ä¸ä¼šåœ¨æ‚¨ä¸periodhub.healthä¹‹é—´å»ºç«‹åŒ»æ‚£å…³ç³»ã€‚å¦‚é‡ç´§æ€¥æƒ…å†µï¼Œè¯·ç«‹å³å¯»æ±‚åŒ»ç–—æ•‘åŠ©ã€‚</p>\n          </div>\n\n          <div class=\"bg-blue-50 border-l-4 border-blue-500 p-4 my-4\">\n            <p class=\"text-blue-800\"><strong>MVPé˜¶æ®µè¯´æ˜ï¼š</strong>periodhub.healthç›®å‰å¤„äºæœ€å°å¯è¡Œäº§å“(MVP)é˜¶æ®µï¼Œä»¥æœ‰é™èµ„æºè¿è¥ã€‚å†…å®¹å¯èƒ½ä¸å¦‚å¤§å‹åŒ»ç–—æœºæ„é‚£æ ·å…¨é¢æˆ–é¢‘ç¹æ›´æ–°ã€‚</p>\n          </div>\n        `\n      },\n      {\n        title: '2. åŒ»ç–—å…è´£å£°æ˜',\n        content: `\n          <h3>2.1 éåŒ»ç–—æœåŠ¡</h3>\n          <p>periodhub.healthä¸æ˜¯åŒ»ç–—æœåŠ¡æä¾›è€…ã€‚æˆ‘ä»¬æä¾›çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>\n          <ul>\n            <li>ä»…ä¾›ä¸€èˆ¬æ•™è‚²å’Œä¿¡æ¯ç›®çš„</li>\n            <li>ä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€è¯Šæ–­æˆ–æ²»ç–—</li>\n            <li>ä¸åº”ç”¨äºåŒ»ç–—ç´§æ€¥æƒ…å†µ</li>\n            <li>å¯èƒ½ä¸é€‚ç”¨äºæ‚¨çš„å…·ä½“æƒ…å†µ</li>\n          </ul>\n          \n          <h3>2.2 å¯»æ±‚ä¸“ä¸šåŒ»ç–—å»ºè®®</h3>\n          <p>æ‚¨åº”è¯¥ï¼š</p>\n          <ul>\n            <li>åœ¨å¼€å§‹ä»»ä½•æ²»ç–—å‰å’¨è¯¢åˆæ ¼çš„åŒ»ç–—ä¸“ä¸šäººå£«</li>\n            <li>å¯¹äºä¸¥é‡æˆ–æŒç»­çš„ç—‡çŠ¶ç«‹å³å¯»æ±‚åŒ»ç–—å¸®åŠ©</li>\n            <li>ä¸è¦å› ä¸ºæˆ‘ä»¬ç½‘ç«™ä¸Šçš„ä¿¡æ¯è€Œå¿½è§†æˆ–å»¶è¿Ÿå¯»æ±‚åŒ»ç–—å»ºè®®</li>\n            <li>åœ¨åœæ­¢æˆ–æ”¹å˜ç°æœ‰æ²»ç–—å‰å’¨è¯¢æ‚¨çš„åŒ»ç”Ÿ</li>\n          </ul>\n          \n          <h3>2.3 ç´§æ€¥æƒ…å†µ</h3>\n          <p>å¦‚æœæ‚¨é‡åˆ°åŒ»ç–—ç´§æ€¥æƒ…å†µï¼Œè¯·ç«‹å³æ‹¨æ‰“å½“åœ°ç´§æ€¥æœåŠ¡ç”µè¯æˆ–å‰å¾€æœ€è¿‘çš„æ€¥è¯Šç§‘ã€‚</p>\n        `\n      },\n      {\n        title: '3. ç”¨æˆ·è´£ä»»',\n        content: `\n          <h3>3.1 é€‚å½“ä½¿ç”¨</h3>\n          <p>æ‚¨åŒæ„ï¼š</p>\n          <ul>\n            <li>ä»…å°†æˆ‘ä»¬çš„æœåŠ¡ç”¨äºåˆæ³•ç›®çš„</li>\n            <li>æä¾›å‡†ç¡®ã€å®Œæ•´çš„ä¿¡æ¯</li>\n            <li>ä¿æŠ¤æ‚¨çš„è´¦æˆ·å®‰å…¨</li>\n            <li>å°Šé‡å…¶ä»–ç”¨æˆ·çš„éšç§å’Œæƒåˆ©</li>\n          </ul>\n          \n          <h3>3.2 ç¦æ­¢è¡Œä¸º</h3>\n          <p>æ‚¨ä¸å¾—ï¼š</p>\n          <ul>\n            <li>å‘å¸ƒè™šå‡ã€è¯¯å¯¼æˆ–æœ‰å®³ä¿¡æ¯</li>\n            <li>ä¾µçŠ¯ä»–äººçš„çŸ¥è¯†äº§æƒ</li>\n            <li>ä¼ æ’­æ¶æ„è½¯ä»¶æˆ–è¿›è¡Œç½‘ç»œæ”»å‡»</li>\n            <li>éªšæ‰°ã€å¨èƒæˆ–ä¼¤å®³å…¶ä»–ç”¨æˆ·</li>\n            <li>å°†æˆ‘ä»¬çš„æœåŠ¡ç”¨äºå•†ä¸šç›®çš„ï¼ˆæœªç»æˆæƒï¼‰</li>\n          </ul>\n        `\n      },\n      {\n        title: '4. çŸ¥è¯†äº§æƒ',\n        content: `\n          <p>periodhub.healthçš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>\n          <ul>\n            <li>æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘å’ŒéŸ³é¢‘å†…å®¹</li>\n            <li>ç½‘ç«™è®¾è®¡å’Œå¸ƒå±€</li>\n            <li>è½¯ä»¶å’Œä»£ç </li>\n            <li>å•†æ ‡å’Œæ ‡è¯†</li>\n          </ul>\n          <p>å‡å—ç‰ˆæƒæ³•å’Œå…¶ä»–çŸ¥è¯†äº§æƒæ³•ä¿æŠ¤ã€‚æœªç»æ˜ç¡®ä¹¦é¢è®¸å¯ï¼Œæ‚¨ä¸å¾—å¤åˆ¶ã€åˆ†å‘ã€ä¿®æ”¹æˆ–åˆ›å»ºè¡ç”Ÿä½œå“ã€‚</p>\n        `\n      }\n    ]\n  } : {\n    title: 'Terms of Service',\n    lastUpdated: 'Last updated: April 1, 2024',\n    intro: 'Welcome to periodhub.health. By accessing and using our website, you agree to comply with the following terms of service. Please read these terms carefully. If you do not agree to any terms, please do not use our services.',\n    sections: [\n      {\n        title: '1. Service Description',\n        content: `\n          <p>periodhub.health is a platform providing menstrual health information and educational resources. Our services include:</p>\n          <ul>\n            <li><strong>Educational Content:</strong> Articles and guides about menstrual health, pain management, and women's health</li>\n            <li><strong>Interactive Tools:</strong> Symptom assessment tools, pain trackers, and personalized recommendation systems</li>\n            <li><strong>Resource Library:</strong> Traditional therapies, natural relief methods, and lifestyle recommendations</li>\n            <li><strong>Community Support:</strong> Safe environment for information sharing and support</li>\n          </ul>\n          \n          <div class=\"bg-red-50 border-l-4 border-red-500 p-4 my-4\">\n            <p class=\"text-red-800\"><strong>Important Medical Notice:</strong> Our services are for educational and informational purposes only and do not constitute medical advice, diagnosis, or treatment. We are not healthcare professionals, and the information on this website cannot replace professional medical advice. Use of this website does not establish a doctor-patient relationship. In case of emergency, seek immediate medical attention.</p>\n          </div>\n\n          <div class=\"bg-blue-50 border-l-4 border-blue-500 p-4 my-4\">\n            <p class=\"text-blue-800\"><strong>MVP Phase Notice:</strong> periodhub.health is currently in its Minimum Viable Product (MVP) phase, operating with limited resources. Content may not be as comprehensive or frequently updated as larger medical institutions.</p>\n          </div>\n        `\n      },\n      {\n        title: '2. Medical Disclaimer',\n        content: `\n          <h3>2.1 Non-Medical Service</h3>\n          <p>periodhub.health is not a medical service provider. All information we provide:</p>\n          <ul>\n            <li>Is for general educational and informational purposes only</li>\n            <li>Cannot replace professional medical advice, diagnosis, or treatment</li>\n            <li>Should not be used for medical emergencies</li>\n            <li>May not be applicable to your specific situation</li>\n          </ul>\n          \n          <h3>2.2 Seek Professional Medical Advice</h3>\n          <p>You should:</p>\n          <ul>\n            <li>Consult qualified medical professionals before starting any treatment</li>\n            <li>Seek immediate medical help for serious or persistent symptoms</li>\n            <li>Not ignore or delay seeking medical advice because of information on our website</li>\n            <li>Consult your doctor before stopping or changing existing treatments</li>\n          </ul>\n          \n          <h3>2.3 Emergency Situations</h3>\n          <p>If you experience a medical emergency, immediately call your local emergency services or go to the nearest emergency room.</p>\n        `\n      },\n      {\n        title: '3. User Responsibilities',\n        content: `\n          <h3>3.1 Appropriate Use</h3>\n          <p>You agree to:</p>\n          <ul>\n            <li>Use our services only for lawful purposes</li>\n            <li>Provide accurate and complete information</li>\n            <li>Protect your account security</li>\n            <li>Respect other users' privacy and rights</li>\n          </ul>\n          \n          <h3>3.2 Prohibited Conduct</h3>\n          <p>You may not:</p>\n          <ul>\n            <li>Post false, misleading, or harmful information</li>\n            <li>Infringe on others' intellectual property rights</li>\n            <li>Distribute malware or conduct cyber attacks</li>\n            <li>Harass, threaten, or harm other users</li>\n            <li>Use our services for commercial purposes (without authorization)</li>\n          </ul>\n        `\n      },\n      {\n        title: '4. Intellectual Property',\n        content: `\n          <p>All content on periodhub.health, including but not limited to:</p>\n          <ul>\n            <li>Text, images, videos, and audio content</li>\n            <li>Website design and layout</li>\n            <li>Software and code</li>\n            <li>Trademarks and logos</li>\n          </ul>\n          <p>Is protected by copyright and other intellectual property laws. You may not copy, distribute, modify, or create derivative works without explicit written permission.</p>\n        `\n      }\n    ]\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Page Header */}\n      <header className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold text-neutral-800 mb-6\">\n            {content.title}\n          </h1>\n          <p className=\"text-neutral-600 mb-6\">\n            {content.lastUpdated}\n          </p>\n          <div className=\"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg\">\n            <p className=\"text-blue-800\">\n              {content.intro}\n            </p>\n          </div>\n        </div>\n      </header>\n\n      {/* Content */}\n      <main className=\"container-custom\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"bg-white rounded-lg shadow-sm p-8 space-y-12\">\n            {content.sections.map((section, index) => (\n              <section key={index} className=\"border-b border-neutral-200 pb-8 last:border-b-0\">\n                <h2 className=\"text-2xl font-semibold text-neutral-800 mb-6\">\n                  {section.title}\n                </h2>\n                <div \n                  className=\"prose prose-lg prose-neutral max-w-none prose-headings:text-neutral-800 prose-p:text-neutral-700 prose-li:text-neutral-700\"\n                  dangerouslySetInnerHTML={{ __html: section.content }}\n                />\n              </section>\n            ))}\n          </div>\n        </div>\n      </main>\n\n      {/* Important Notice */}\n      <section className=\"bg-yellow-50 py-12\">\n        <div className=\"container-custom\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"bg-yellow-100 border-l-4 border-yellow-500 p-6 rounded-r-lg\">\n              <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">\n                {locale === 'zh' ? 'é‡è¦æé†’' : 'Important Reminder'}\n              </h3>\n              <p className=\"text-yellow-700\">\n                {locale === 'zh' \n                  ? 'è¿™äº›æœåŠ¡æ¡æ¬¾å¯èƒ½ä¼šä¸æ—¶æ›´æ–°ã€‚ç»§ç»­ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡å³è¡¨ç¤ºæ‚¨æ¥å—ä»»ä½•ä¿®æ”¹ã€‚'\n                  : 'These Terms of Service may be updated from time to time. Continued use of our services indicates your acceptance of any modifications.'\n                }\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Section */}\n      <section className=\"bg-neutral-50 py-12\">\n        <div className=\"container-custom\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <h2 className=\"text-2xl font-bold text-neutral-800 mb-4\">\n              {locale === 'zh' ? 'æœ‰ç–‘é—®ï¼Ÿ' : 'Questions?'}\n            </h2>\n            <p className=\"text-neutral-600 mb-6\">\n              {locale === 'zh' \n                ? 'å¦‚æœæ‚¨å¯¹æˆ‘ä»¬çš„æœåŠ¡æ¡æ¬¾æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚'\n                : 'If you have any questions about our Terms of Service, please feel free to contact us.'\n              }\n            </p>\n            <a\n              href=\"mailto:tiyibaofu@outlook.com\"\n              className=\"btn-primary\"\n            >\n              {locale === 'zh' ? 'è”ç³»æˆ‘ä»¬' : 'Contact Us'}\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/test-banner/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2967,2970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2967,2970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3022,3025],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3022,3025],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { setRequestLocale } from 'next-intl/server';\nimport { Locale } from '@/i18n';\nimport type { Metadata } from 'next';\n\n// Add noindex metadata for test pages\nexport const metadata: Metadata = {\n  title: 'Test Banner - PeriodHub',\n  description: 'Test page for banner functionality',\n  robots: {\n    index: false,\n    follow: false,\n  },\n};\n\nexport default async function TestBannerPage({\n  params\n}: {\n  params: Promise<{ locale: Locale }>\n}) {\n  const { locale } = await params;\n  setRequestLocale(locale);\n\n  return (\n    <div className=\"min-h-screen py-12 bg-gray-100\">\n      <div className=\"container mx-auto px-4 max-w-7xl\">\n        \n        <h1 className=\"text-4xl font-bold text-center mb-8\">æ¨ªå¹…æµ‹è¯•é¡µé¢</h1>\n        \n        {/* æµ‹è¯•æ¨ªå¹… 1 - åŸºç¡€ç‰ˆæœ¬ */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold mb-4\">æµ‹è¯•æ¨ªå¹… 1 - åŸºç¡€ç‰ˆæœ¬</h2>\n          <div className=\"bg-purple-600 text-white p-8 rounded-2xl text-center\">\n            <h3 className=\"text-2xl font-bold\">ğŸ‰ å…¨æ–°PDFä¸‹è½½ä¸­å¿ƒé‡ç£…ä¸Šçº¿ï¼</h3>\n            <p className=\"mt-4\">38ä¸ªä¸“ä¸šèµ„æº â€¢ ç§»åŠ¨ç«¯ä¼˜åŒ– â€¢ æ™ºèƒ½åˆ†ç±» â€¢ ä¸€é”®ä¸‹è½½</p>\n          </div>\n        </div>\n\n        {/* æµ‹è¯•æ¨ªå¹… 2 - å†…è”æ ·å¼ç‰ˆæœ¬ */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold mb-4\">æµ‹è¯•æ¨ªå¹… 2 - å†…è”æ ·å¼ç‰ˆæœ¬</h2>\n          <div \n            style={{\n              background: 'linear-gradient(135deg, #9333ea 0%, #ec4899 100%)',\n              color: 'white',\n              padding: '32px',\n              borderRadius: '16px',\n              textAlign: 'center',\n              boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n              border: '4px solid #fbbf24'\n            }}\n          >\n            <div style={{ fontSize: '48px', marginBottom: '16px' }}>ğŸ‰</div>\n            <h3 style={{ fontSize: '32px', fontWeight: 'bold', marginBottom: '16px' }}>\n              å…¨æ–°PDFä¸‹è½½ä¸­å¿ƒé‡ç£…ä¸Šçº¿ï¼\n            </h3>\n            <p style={{ fontSize: '18px', opacity: 0.9 }}>\n              38ä¸ªä¸“ä¸šèµ„æº â€¢ ç§»åŠ¨ç«¯ä¼˜åŒ– â€¢ æ™ºèƒ½åˆ†ç±» â€¢ ä¸€é”®ä¸‹è½½\n            </p>\n            <button \n              style={{\n                background: 'white',\n                color: '#9333ea',\n                padding: '16px 32px',\n                borderRadius: '12px',\n                fontWeight: 'bold',\n                fontSize: '18px',\n                border: 'none',\n                marginTop: '24px',\n                cursor: 'pointer'\n              }}\n            >\n              ğŸš€ ç«‹å³ä½“éªŒæ–°ç‰ˆä¸‹è½½ä¸­å¿ƒ\n            </button>\n          </div>\n        </div>\n\n        {/* æµ‹è¯•æ¨ªå¹… 3 - å¼ºåˆ¶æ˜¾ç¤ºç‰ˆæœ¬ */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold mb-4\">æµ‹è¯•æ¨ªå¹… 3 - å¼ºåˆ¶æ˜¾ç¤ºç‰ˆæœ¬</h2>\n          <div \n            style={{\n              background: 'linear-gradient(135deg, #9333ea 0%, #ec4899 100%)',\n              color: 'white',\n              padding: '32px',\n              borderRadius: '16px',\n              textAlign: 'center',\n              boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n              border: '4px solid #fbbf24',\n              display: 'block !important' as any,\n              visibility: 'visible !important' as any,\n              position: 'relative',\n              zIndex: 9999\n            }}\n          >\n            <div style={{ fontSize: '48px', marginBottom: '16px' }}>ğŸ‰</div>\n            <h3 style={{ fontSize: '32px', fontWeight: 'bold', marginBottom: '16px' }}>\n              å…¨æ–°PDFä¸‹è½½ä¸­å¿ƒé‡ç£…ä¸Šçº¿ï¼\n            </h3>\n            <p style={{ fontSize: '18px', opacity: 0.9 }}>\n              38ä¸ªä¸“ä¸šèµ„æº â€¢ ç§»åŠ¨ç«¯ä¼˜åŒ– â€¢ æ™ºèƒ½åˆ†ç±» â€¢ ä¸€é”®ä¸‹è½½\n            </p>\n            <button \n              style={{\n                background: 'white',\n                color: '#9333ea',\n                padding: '16px 32px',\n                borderRadius: '12px',\n                fontWeight: 'bold',\n                fontSize: '18px',\n                border: 'none',\n                marginTop: '24px',\n                cursor: 'pointer'\n              }}\n            >\n              ğŸš€ ç«‹å³ä½“éªŒæ–°ç‰ˆä¸‹è½½ä¸­å¿ƒ\n            </button>\n          </div>\n        </div>\n\n        <div className=\"text-center mt-12\">\n          <a \n            href=\"/zh/articles\" \n            className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700\"\n          >\n            è¿”å›æ–‡ç« é¡µé¢\n          </a>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/test-downloads/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/test-image-quality/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/test-route/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/test-simple-route/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/[locale]/test-simple/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/admin/performance-dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/api/analytics/performance/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/api/analytics/web-vitals/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/api/articles/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/api/indexnow/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/api/performance/route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":4,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[104,107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[104,107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2311,2314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2311,2314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2431,2434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2431,2434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\n\n// æ€§èƒ½æ•°æ®å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ•°æ®åº“ï¼‰\nconst performanceData: any[] = [];\n\nexport async function POST(request: NextRequest) {\n  try {\n    const data = await request.json();\n    \n    // éªŒè¯æ•°æ®æ ¼å¼\n    if (!data.timestamp || !data.url || !data.metrics) {\n      return NextResponse.json(\n        { error: 'Invalid performance data format' },\n        { status: 400 }\n      );\n    }\n\n    // å­˜å‚¨æ€§èƒ½æ•°æ®\n    performanceData.push({\n      ...data,\n      id: Date.now().toString(),\n      userAgent: request.headers.get('user-agent'),\n      ip: request.headers.get('x-forwarded-for') || 'unknown'\n    });\n\n    // åªä¿ç•™æœ€è¿‘1000æ¡è®°å½•\n    if (performanceData.length > 1000) {\n      performanceData.splice(0, performanceData.length - 1000);\n    }\n\n    console.log('ğŸ“Š Performance data received:', {\n      url: data.url,\n      metrics: Object.keys(data.metrics),\n      timestamp: data.timestamp\n    });\n\n    return NextResponse.json({ success: true });\n  } catch (error) {\n    console.error('Error processing performance data:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const limit = parseInt(searchParams.get('limit') || '50');\n    const url = searchParams.get('url');\n\n    let filteredData = performanceData;\n\n    // æŒ‰URLè¿‡æ»¤\n    if (url) {\n      filteredData = performanceData.filter(item => \n        item.url.includes(url)\n      );\n    }\n\n    // æŒ‰æ—¶é—´æ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰\n    filteredData.sort((a, b) => \n      new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n    );\n\n    // é™åˆ¶è¿”å›æ•°é‡\n    const limitedData = filteredData.slice(0, limit);\n\n    // è®¡ç®—å¹³å‡æ€§èƒ½æŒ‡æ ‡\n    const averages = calculateAverages(limitedData);\n\n    return NextResponse.json({\n      data: limitedData,\n      averages,\n      total: filteredData.length,\n      summary: {\n        totalRecords: performanceData.length,\n        filteredRecords: filteredData.length,\n        returnedRecords: limitedData.length\n      }\n    });\n  } catch (error) {\n    console.error('Error fetching performance data:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\nfunction calculateAverages(data: any[]) {\n  if (data.length === 0) return {};\n\n  const metrics = ['LCP', 'FID', 'CLS', 'FCP', 'TTFB'];\n  const averages: any = {};\n\n  metrics.forEach(metric => {\n    const values = data\n      .map(item => item.metrics[metric])\n      .filter(value => typeof value === 'number' && !isNaN(value));\n\n    if (values.length > 0) {\n      averages[metric] = {\n        average: values.reduce((sum, val) => sum + val, 0) / values.length,\n        min: Math.min(...values),\n        max: Math.max(...values),\n        count: values.length\n      };\n    }\n  });\n\n  return averages;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/dynamic-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/error.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":3,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nexport default function GlobalError({ error, reset }: { error: Error & { digest?: string }; reset: () => void }) {\n  return (\n    <div style={{\n      minHeight: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column',\n      fontFamily: 'system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif'\n    }}>\n      <h1 style={{ fontSize: '28px', marginBottom: '12px' }}>æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯</h1>\n      <p style={{ color: '#6b7280', marginBottom: '20px' }}>An unexpected error occurred.</p>\n      <div style={{ display: 'flex', gap: '12px' }}>\n        <button onClick={reset} style={{ background: '#111827', color: '#fff', padding: '10px 16px', borderRadius: '8px' }}>é‡è¯•</button>\n        <a href=\"/zh\" style={{ background: '#7c3aed', color: '#fff', padding: '10px 16px', borderRadius: '8px', textDecoration: 'none' }}>è¿”å›é¦–é¡µ</a>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/framework-demo/framework-demo-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/framework-demo/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/icon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/image-requirements/image-requirements-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/image-requirements/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/layout.tsx","messages":[{"ruleId":"@next/next/next-script-for-ga","severity":1,"message":"Prefer `next/script` component when using the inline script for Google Analytics. See: https://nextjs.org/docs/messages/next-script-for-ga","line":108,"column":13,"nodeType":"JSXOpeningElement","endLine":111,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import './globals.css';\nimport { Metadata, Viewport } from 'next';\nimport { Noto_Sans_SC } from 'next/font/google';\n// import ClientSafe from '@/components/ClientSafe';\n\nconst notoSansSC = Noto_Sans_SC({\n  subsets: ['latin'],\n  weight: ['300', '400', '500', '600', '700', '900'],\n  display: 'swap',\n});\nimport { WebVitalsReporter } from '@/components/WebVitalsReporter';\nimport PerformanceMonitor from '@/components/PerformanceMonitor';\n\n// ğŸš€ Core Web Vitals ä¼˜åŒ–çš„æ ¹å¸ƒå±€\nexport const metadata: Metadata = {\n  metadataBase: new URL('https://www.periodhub.health'),\n  title: {\n    default: 'PeriodHub - ä¸“ä¸šç—›ç»ç¼“è§£æ–¹æ³•å’Œæœˆç»å¥åº·ç®¡ç†å¹³å°',\n    template: '%s | PeriodHub'\n  },\n  description: 'æä¾›42ç¯‡ä¸“ä¸šæ–‡ç« ã€24ä¸ªå®ç”¨å·¥å…·ï¼Œå¸®åŠ©å¥³æ€§ç§‘å­¦ç®¡ç†æœˆç»å¥åº·ï¼Œå¿«é€Ÿç¼“è§£ç—›ç»ã€‚åŸºäºåŒ»å­¦ç ”ç©¶çš„ä¸ªæ€§åŒ–å»ºè®®ï¼Œä¸­è¥¿åŒ»ç»“åˆçš„å¥åº·æ–¹æ¡ˆã€‚',\n  keywords: [\n    // é«˜æœç´¢é‡æ ¸å¿ƒè¯\n    'ç—›ç»æ€ä¹ˆç¼“è§£æœ€å¿«æ–¹æ³•', 'ç—›ç»åƒä»€ä¹ˆè¯æœ€æœ‰æ•ˆ', 'æœˆç»æ¨è¿Ÿå‡ å¤©ç®—æ­£å¸¸', 'æœˆç»é‡å°‘æ˜¯ä»€ä¹ˆåŸå› ',\n    // å“ç‰Œæ ¸å¿ƒè¯\n    'ç—›ç»ç¼“è§£', 'æœˆç»ç–¼ç—›', 'ç»æœŸå¥åº·', 'å¥³æ€§å¥åº·', 'æœˆç»å¥åº·ç®¡ç†', 'ç»æœŸç–¼ç—›æ€ä¹ˆåŠ', 'ä¸­åŒ»è°ƒç†',\n    // è‹±æ–‡å…³é”®è¯\n    'menstrual cramps relief', 'period pain remedies', 'how to stop period pain', 'natural period pain relief'\n  ],\n  authors: [{ name: 'PeriodHub Team' }],\n  creator: 'PeriodHub',\n  publisher: 'PeriodHub',\n  formatDetection: {\n    email: false,\n    address: false,\n    telephone: false,\n  },\n  // Open Graph\n  openGraph: {\n    type: 'website',\n    locale: 'zh_CN',\n    url: 'https://www.periodhub.health',\n    siteName: 'PeriodHub',\n    title: 'PeriodHub - ä¸“ä¸šå¥³æ€§å¥åº·ç®¡ç†å¹³å°',\n    description: 'ä¸“ä¸šçš„å¥³æ€§æœˆç»å¥åº·ç®¡ç†å¹³å°ï¼Œæä¾›ä¸­è¥¿åŒ»ç»“åˆçš„ç—›ç»è§£å†³æ–¹æ¡ˆã€‚',\n  },\n  // Twitter\n  twitter: {\n    card: 'summary_large_image',\n    title: 'PeriodHub - ä¸“ä¸šå¥³æ€§å¥åº·ç®¡ç†å¹³å°',\n    description: 'ä¸“ä¸šçš„å¥³æ€§æœˆç»å¥åº·ç®¡ç†å¹³å°ï¼Œæä¾›ä¸­è¥¿åŒ»ç»“åˆçš„ç—›ç»è§£å†³æ–¹æ¡ˆã€‚',\n  },\n  // ç§»åŠ¨ç«¯ä¼˜åŒ– - å·²ç§»è‡³å•ç‹¬çš„ viewport å¯¼å‡º\n  // æ€§èƒ½ä¼˜åŒ–\n  other: {\n    'theme-color': '#9333ea',\n    'color-scheme': 'light',\n  },\n};\n\n// ğŸš€ ç§»åŠ¨ç«¯ä¼˜åŒ– - Next.js æ¨èçš„ viewport é…ç½®\nexport const viewport: Viewport = {\n  width: 'device-width',\n  initialScale: 1,\n  maximumScale: 5,\n  userScalable: true,\n};\n\n// æ ¹çº§åˆ«layout - å¿…é¡»åŒ…å«htmlå’Œbodyæ ‡ç­¾\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html data-scroll-behavior=\"smooth\">\n      <head>\n        {/* ğŸš€ æ€§èƒ½ä¼˜åŒ– - DNS é¢„è§£æ */}\n        <link rel=\"dns-prefetch\" href=\"//www.googletagmanager.com\" />\n        <link rel=\"dns-prefetch\" href=\"//pagead2.googlesyndication.com\" />\n        <link rel=\"dns-prefetch\" href=\"//www.clarity.ms\" />\n        \n        {/* ğŸš€ æ€§èƒ½ä¼˜åŒ– - é¢„è¿æ¥å…³é”®èµ„æº */}\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"anonymous\" />\n        \n        {/* ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ– - é˜²æ­¢ç¼©æ”¾é—ªçƒ */}\n        <meta name=\"format-detection\" content=\"telephone=no\" />\n        <meta name=\"mobile-web-app-capable\" content=\"yes\" />\n        <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n        <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\" />\n        \n        {/* ğŸ” æœç´¢å¼•æ“ä¼˜åŒ– */}\n        <meta name=\"google-site-verification\" content=\"1cZ9WUBHeRB2lMoPes66cXWCTkycozosPw4_PnNMoGk\" />\n        <meta name=\"msvalidate.01\" content=\"12D5EA89A249696AACD3F155B64C5E56\" />\n        <meta name=\"robots\" content=\"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1\" />\n        \n        {/* ğŸ¨ ä¸»é¢˜å’Œå›¾æ ‡ */}\n        <link rel=\"icon\" href=\"/icon.svg\" type=\"image/svg+xml\" />\n        <link rel=\"icon\" href=\"/favicon-32x32.png\" sizes=\"32x32\" type=\"image/png\" />\n        <link rel=\"icon\" href=\"/favicon-16x16.png\" sizes=\"16x16\" type=\"image/png\" />\n        <link rel=\"apple-touch-icon\" href=\"/apple-touch-icon.png\" />\n        <link rel=\"manifest\" href=\"/manifest.json\" />\n        \n        {/* ğŸ“Š Google Analytics 4 - å¼‚æ­¥åŠ è½½ä¼˜åŒ– */}\n        {process.env.NODE_ENV === 'production' && (\n          <>\n            <script\n              async\n              src=\"https://www.googletagmanager.com/gtag/js?id=G-YOUR_GA_ID\"\n            />\n            <script\n              dangerouslySetInnerHTML={{\n                __html: `\n                  window.dataLayer = window.dataLayer || [];\n                  function gtag(){dataLayer.push(arguments);}\n                  gtag('js', new Date());\n                  gtag('config', 'G-YOUR_GA_ID', {\n                    page_title: document.title,\n                    page_location: window.location.href,\n                    anonymize_ip: true,\n                    allow_google_signals: false,\n                    allow_ad_personalization_signals: false\n                  });\n                `,\n              }}\n            />\n          </>\n        )}\n        \n        {/* ğŸ“Š Microsoft Clarity - å»¶è¿ŸåŠ è½½ */}\n        {process.env.NODE_ENV === 'production' && (\n          <script\n            dangerouslySetInnerHTML={{\n              __html: `\n                (function(c,l,a,r,i,t,y){\n                  c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n                  t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n                  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n                })(window, document, \"clarity\", \"script\", \"ssdsoc827u\");\n              `,\n            }}\n          />\n        )}\n        \n        {/* ğŸ’° Google AdSense - å»¶è¿ŸåŠ è½½ */}\n        {process.env.NODE_ENV === 'production' && (\n          <script\n            async\n            src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5773162579508714\"\n            crossOrigin=\"anonymous\"\n          />\n        )}\n        \n        {/* ğŸš€ æ€§èƒ½ä¼˜åŒ– - å…³é”®CSSå†…è” */}\n        <style dangerouslySetInnerHTML={{\n          __html: `\n            /* å…³é”®CSS - é˜²æ­¢å¸ƒå±€åç§» */\n            html { scroll-behavior: smooth; }\n            body { \n              margin: 0; \n              font-family: \"Noto Sans SC\", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\n              line-height: 1.6;\n              -webkit-font-smoothing: antialiased;\n              -moz-osx-font-smoothing: grayscale;\n              text-rendering: optimizeLegibility;\n            }\n            * { box-sizing: border-box; }\n            img, video { max-width: 100%; height: auto; }\n          `\n        }} />\n      </head>\n      <body className={notoSansSC.className}>\n        {children}\n        \n        {/* ğŸš€ SEOä¼˜åŒ– - Core Web Vitalsç›‘æ§ */}\n        <WebVitalsReporter />\n        \n        {/* ğŸš€ SEOä¼˜åŒ– - æ€§èƒ½ç›‘æ§ */}\n        <PerformanceMonitor />\n        \n      </body>\n    </html>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/manifest.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/robots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/seo-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/sitemap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/teen-health/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/test-assessment/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/test-symptom-assessment/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/test-symptom-assessment/test-symptom-assessment-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'results' is assigned a value but never used.","line":37,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { useSymptomAssessment } from '../[locale]/interactive-tools/shared/hooks/useSymptomAssessment';\nimport { AssessmentAnswer } from '../[locale]/interactive-tools/shared/types';\n\nexport default function TestSymptomAssessmentClient() {\n  const {\n    currentSession,\n    currentQuestion,\n    currentQuestionIndex,\n    isComplete,\n    progress,\n    totalQuestions,\n    startAssessment,\n    answerQuestion,\n    goToPreviousQuestion,\n    goToNextQuestion,\n    resetAssessment,\n    completeAssessment\n  } = useSymptomAssessment();\n\n  const [showResults, setShowResults] = useState(false);\n\n  const handleAnswer = (value: string | number) => {\n    if (currentQuestion) {\n      const answer: AssessmentAnswer = {\n        questionId: currentQuestion.id,\n        value: value,\n        timestamp: new Date().toISOString()\n      };\n      answerQuestion(answer);\n    }\n  };\n\n  const handleComplete = () => {\n    const results = completeAssessment();\n    setShowResults(true);\n  };\n\n  const handleReset = () => {\n    resetAssessment();\n    setShowResults(false);\n  };\n\n  if (!currentSession) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Test Symptom Assessment</h1>\n          <p className=\"text-gray-600 mb-6\">This is a test page for the symptom assessment functionality.</p>\n          <button\n            onClick={() => startAssessment('en')}\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Start Test Assessment\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (isComplete && showResults) {\n    const results = completeAssessment();\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"max-w-4xl mx-auto px-4\">\n          <div className=\"bg-white rounded-lg shadow-lg p-8\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">Assessment Results</h2>\n            \n            <div className=\"space-y-6\">\n              <div className=\"bg-blue-50 rounded-lg p-6\">\n                <h2 className=\"text-xl font-semibold text-blue-900 mb-4\">Summary</h2>\n                <p className=\"text-blue-800\">\n                  Assessment completed successfully. This is a test environment.\n                </p>\n                {results && (\n                  <div className=\"mt-4\">\n                    <p className=\"text-blue-800\">Severity: {results.severity}</p>\n                    <p className=\"text-blue-800\">Type: {results.type}</p>\n                    <p className=\"text-blue-800\">Score: {results.score}/{results.maxScore}</p>\n                    <p className=\"text-blue-800\">Percentage: {results.percentage}%</p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Assessment Details</h3>\n                <div className=\"space-y-2\">\n                  <p className=\"text-gray-700\">Progress: {progress}%</p>\n                  <p className=\"text-gray-700\">Questions Completed: {currentQuestionIndex} / {totalQuestions}</p>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={handleReset}\n                  className=\"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n                >\n                  Reset Assessment\n                </button>\n                <button\n                  onClick={() => setShowResults(false)}\n                  className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Back to Assessment\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4\">\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">Test Symptom Assessment</h2>\n          \n          {currentQuestion && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-blue-50 rounded-lg p-6\">\n                <h2 className=\"text-xl font-semibold text-blue-900 mb-4\">\n                  Question {currentQuestionIndex + 1}\n                </h2>\n                <p className=\"text-blue-800 text-lg\">\n                  {currentQuestion.title}\n                </p>\n              </div>\n\n              <div className=\"space-y-3\">\n                {currentQuestion.options?.map((option, index) => (\n                  <button\n                    key={index}\n                    onClick={() => handleAnswer(option.value)}\n                    className=\"w-full p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    <span className=\"font-medium text-gray-900\">{option.label}</span>\n                  </button>\n                ))}\n              </div>\n\n              <div className=\"flex justify-between items-center\">\n                <div className=\"text-sm text-gray-500\">\n                  Progress: {progress}% ({currentQuestionIndex + 1} / {totalQuestions})\n                </div>\n                <div className=\"flex space-x-2\">\n                  {currentQuestionIndex > 0 && (\n                    <button\n                      onClick={goToPreviousQuestion}\n                      className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                    >\n                      Previous\n                    </button>\n                  )}\n                  {currentQuestionIndex < totalQuestions - 1 && (\n                    <button\n                      onClick={goToNextQuestion}\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                    >\n                      Next\n                    </button>\n                  )}\n                  {isComplete && (\n                    <button\n                      onClick={handleComplete}\n                      className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                    >\n                      Complete Assessment\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/app/test/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/AppProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ArticleInteractions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/BottomRecommendations.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'icon' is defined but never used.","line":79,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'color' is defined but never used.","line":79,"column":84,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":89}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\nimport { useTranslations } from 'next-intl';\n\ninterface RecommendationItem {\n  titleKey: string;\n  descriptionKey: string;\n  actionTextKey: string;\n  icon: string;\n  link: string;\n  color: 'blue' | 'green' | 'purple';\n}\n\ninterface BottomRecommendationsProps {\n  currentPage: string;\n}\n\nconst BottomRecommendations = ({ currentPage }: BottomRecommendationsProps) => {\n  const t = useTranslations('bottomRecommendations');\n  \n  const recommendations: Record<string, RecommendationItem[]> = {\n    'natural-therapies': [\n      {\n        titleKey: 'scenarioSolutions.title',\n        descriptionKey: 'scenarioSolutions.description',\n        actionTextKey: 'scenarioSolutions.actionText',\n        icon: 'ğŸ ',\n        link: '/scenario-solutions',\n        color: 'blue'\n      },\n      {\n        titleKey: 'symptomAssessment.title',\n        descriptionKey: 'symptomAssessment.description',\n        actionTextKey: 'symptomAssessment.actionText',\n        icon: 'ğŸ“Š',\n        link: '/interactive-tools/symptom-assessment',\n        color: 'green'\n      }\n    ],\n    'health-guide': [\n      {\n        titleKey: 'scenarioSolutions.title',\n        descriptionKey: 'scenarioSolutions.description',\n        actionTextKey: 'scenarioSolutions.actionText',\n        icon: 'ğŸ ',\n        link: '/scenario-solutions',\n        color: 'blue'\n      },\n      {\n        titleKey: 'symptomAssessment.title',\n        descriptionKey: 'symptomAssessment.description',\n        actionTextKey: 'symptomAssessment.actionText',\n        icon: 'ğŸ“Š',\n        link: '/interactive-tools/symptom-assessment',\n        color: 'green'\n      }\n    ]\n  };\n\n  const currentRecommendations = recommendations[currentPage] || [];\n\n  if (currentRecommendations.length === 0) {\n    return null;\n  }\n\n  return (\n    <section className=\"py-12 bg-gray-50\">\n      <div className=\"container mx-auto px-4\">\n        <h2 className=\"text-2xl font-bold text-center mb-8 text-gray-800\">{t('title')}</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 max-w-4xl mx-auto\">\n          {currentRecommendations.map((rec, index) => (\n            <RecommendationCard key={index} {...rec} />\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nconst RecommendationCard = ({ titleKey, descriptionKey, actionTextKey, icon, link, color }: RecommendationItem) => {\n  const t = useTranslations('bottomRecommendations');\n  \n  // æ ¹æ®å¡ç‰‡ç±»å‹è®¾ç½®ä¸åŒçš„å›¾æ ‡ç»„åˆ\n  const getIcons = () => {\n    if (titleKey === 'scenarioSolutions.title') {\n      return { mainIcon: 'ğŸ ', actionIcon: 'ğŸ¡' };\n    } else {\n      return { mainIcon: 'ğŸ“Š', actionIcon: 'ğŸ“ˆ' };\n    }\n  };\n\n  const { mainIcon, actionIcon } = getIcons();\n\n  return (\n    <Link href={link} className=\"block group\">\n      <div className=\"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 hover:shadow-md transition-all duration-200\">\n        <div className=\"flex items-center mb-3\">\n          <span className=\"text-2xl mr-3\">{mainIcon}</span>\n          <h3 className=\"text-lg font-semibold text-gray-900\">{t(titleKey)}</h3>\n        </div>\n        <p className=\"text-sm text-gray-600 mb-4 leading-relaxed\">{t(descriptionKey)}</p>\n        <div className=\"flex items-center text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors duration-200\">\n          <span className=\"text-base mr-2\">{actionIcon}</span>\n          {t(actionTextKey)}\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default BottomRecommendations;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/Breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/BreathingExercise.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'phases' array makes the dependencies of useEffect Hook (at line 68) change on every render. To fix this, wrap the initialization of 'phases' in its own useMemo() Hook.","line":24,"column":9,"nodeType":"VariableDeclarator","endLine":43,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useTranslations } from 'next-intl';\n\ninterface BreathingExerciseProps {\n  locale: string;\n}\n\ninterface Phase {\n  name: string;\n  nameEn: string;\n  duration: number;\n  color: string;\n}\n\nexport default function BreathingExercise({ locale }: BreathingExerciseProps) {\n  const t = useTranslations('breathingExercise');\n  const [isActive, setIsActive] = useState(false);\n  const [currentPhase, setCurrentPhase] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [isComplete, setIsComplete] = useState(false);\n\n  const phases: Phase[] = [\n    {\n      name: t('phases.inhale'),\n      nameEn: 'Inhale',\n      duration: 4,\n      color: 'bg-blue-600'\n    },\n    {\n      name: t('phases.hold'),\n      nameEn: 'Hold',\n      duration: 7,\n      color: 'bg-purple-600'\n    },\n    {\n      name: t('phases.exhale'),\n      nameEn: 'Exhale',\n      duration: 8,\n      color: 'bg-pink-600'\n    }\n  ];\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n\n    if (isActive && timeLeft > 0) {\n      interval = setInterval(() => {\n        setTimeLeft(timeLeft - 1);\n      }, 1000);\n    } else if (isActive && timeLeft === 0) {\n      if (currentPhase < phases.length - 1) {\n        // Move to next phase\n        setTimeout(() => {\n          setCurrentPhase(currentPhase + 1);\n          setTimeLeft(phases[currentPhase + 1].duration);\n        }, 500);\n      } else {\n        // Complete the cycle\n        setIsActive(false);\n        setIsComplete(true);\n        setCurrentPhase(0);\n      }\n    }\n\n    return () => clearInterval(interval);\n  }, [isActive, timeLeft, currentPhase, phases]);\n\n  const startExercise = () => {\n    setIsActive(true);\n    setIsComplete(false);\n    setCurrentPhase(0);\n    setTimeLeft(phases[0].duration);\n  };\n\n  const resetExercise = () => {\n    setIsActive(false);\n    setIsComplete(false);\n    setCurrentPhase(0);\n    setTimeLeft(0);\n  };\n\n  const getCurrentPhase = () => phases[currentPhase];\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-lg p-6 border border-blue-100\">\n      {/* Header */}\n      <div className=\"text-center mb-6\">\n        <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <span className=\"text-2xl\">ğŸ«</span>\n        </div>\n        <h3 className=\"text-2xl font-bold text-blue-800 mb-2\">\n          {t('title')}\n        </h3>\n        <p className=\"text-blue-600 text-sm\">\n          {t('subtitle')}\n        </p>\n      </div>\n\n      {/* Instructions */}\n      <div className=\"bg-blue-50 rounded-lg p-4 mb-6\">\n        <h4 className=\"font-semibold text-blue-800 mb-2\">\n          {t('instructions.title')}\n        </h4>\n        <div className=\"grid grid-cols-3 gap-3 text-center text-sm\">\n          <div>\n            <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n              <span className=\"text-lg font-bold text-blue-600\">4</span>\n            </div>\n            <p className=\"text-blue-700\">\n              {t('instructions.inhale')}\n            </p>\n          </div>\n          <div>\n            <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n              <span className=\"text-lg font-bold text-purple-600\">7</span>\n            </div>\n            <p className=\"text-purple-700\">\n              {t('instructions.hold')}\n            </p>\n          </div>\n          <div>\n            <div className=\"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n              <span className=\"text-lg font-bold text-pink-600\">8</span>\n            </div>\n            <p className=\"text-pink-700\">\n              {t('instructions.exhale')}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Exercise Display */}\n      <div className=\"text-center mb-6\">\n        {isActive ? (\n          <div className=\"space-y-4\">\n            <div className={`w-32 h-32 rounded-full flex items-center justify-center mx-auto transition-all duration-1000 ${getCurrentPhase().color}`}>\n              <div className=\"text-white text-center\">\n                <div className=\"text-3xl font-bold\">{timeLeft}</div>\n                <div className=\"text-sm\">\n                  {locale === 'zh' ? getCurrentPhase().name : getCurrentPhase().nameEn}\n                </div>\n              </div>\n            </div>\n            <p className=\"text-gray-600\">\n              {t('currentPhase')} {getCurrentPhase().name}\n            </p>\n          </div>\n        ) : (\n          <div className=\"w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center mx-auto\">\n            <span className=\"text-4xl text-gray-400\">ğŸ«</span>\n          </div>\n        )}\n      </div>\n\n      {/* Control Buttons */}\n      <div className=\"text-center space-y-3\">\n        {!isActive && !isComplete && (\n          <button\n            onClick={startExercise}\n            className=\"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors w-full\"\n          >\n{t('buttons.startPractice')}\n          </button>\n        )}\n\n        {isComplete && (\n          <div className=\"space-y-3\">\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n              <p className=\"text-green-700 font-medium\">\n                {t('buttons.oneCycleCompleted')}\n              </p>\n            </div>\n            <button\n              onClick={startExercise}\n              className=\"bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors w-full\"\n            >\n{t('buttons.practiceAgain')}\n            </button>\n          </div>\n        )}\n\n        {isActive && (\n          <button\n            onClick={resetExercise}\n            className=\"bg-gray-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors\"\n          >\n{t('buttons.stopPractice')}\n          </button>\n        )}\n      </div>\n\n      {/* Benefits */}\n      <div className=\"mt-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4\">\n        <h5 className=\"font-semibold text-gray-800 mb-2\">\n          {t('benefits.title')}\n        </h5>\n        <div className=\"grid grid-cols-3 gap-3 text-center text-xs\">\n          <div>\n            <div className=\"text-lg font-bold text-blue-600\">-40%</div>\n            <div className=\"text-gray-600\">\n              {t('benefits.painPerception')}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-lg font-bold text-purple-600\">-35%</div>\n            <div className=\"text-gray-600\">\n              {t('benefits.muscleTension')}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-lg font-bold text-pink-600\">+60%</div>\n            <div className=\"text-gray-600\">\n              {t('benefits.relaxation')}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tips */}\n      <div className=\"mt-4 text-xs text-gray-600\">\n        <p>\n          {t('tip')}\n        </p>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ClientErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ClientErrorHandler.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ClientSafe.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/DownloadButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/EmbeddedPainAssessment.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTranslations' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { useTranslations } from 'next-intl';\n\ninterface EmbeddedPainAssessmentProps {\n  locale?: string;\n  className?: string;\n}\n\nconst EmbeddedPainAssessment: React.FC<EmbeddedPainAssessmentProps> = ({\n  locale = 'zh',\n  className = ''\n}) => {\n  const [intensity, setIntensity] = useState<string>('');\n  const [showQuickResult, setShowQuickResult] = useState(false);\n\n  // Direct translations to avoid i18n issues\n  const translations = {\n    title: locale === 'zh' ? 'ğŸ’¡ ç—›ç»å¿«é€Ÿè‡ªæµ‹' : 'ğŸ’¡ Quick Pain Assessment',\n    subtitle: locale === 'zh' ? '1åˆ†é’Ÿäº†è§£æ‚¨çš„ç—›ç»ç¨‹åº¦ï¼Œè·å¾—åˆæ­¥å»ºè®®' : 'Understand your pain level in 1 minute and get initial recommendations',\n    question: locale === 'zh' ? 'æ‚¨çš„ç—›ç»å¼ºåº¦å¦‚ä½•ï¼Ÿ' : 'How intense is your menstrual pain?',\n    selectIntensityFirst: locale === 'zh' ? 'è¯·å…ˆé€‰æ‹©ç—›ç»å¼ºåº¦' : 'Please select pain intensity first',\n    options: {\n      mild: locale === 'zh' ? 'è½»å¾®ï¼ˆå¯ä»¥å¿å—ï¼Œä¸å½±å“æ—¥å¸¸æ´»åŠ¨ï¼‰' : 'Mild (tolerable, doesn\\'t affect daily activities)',\n      moderate: locale === 'zh' ? 'ä¸­åº¦ï¼ˆå½±å“éƒ¨åˆ†æ´»åŠ¨ï¼Œä½†èƒ½åšæŒï¼‰' : 'Moderate (affects some activities, but manageable)',\n      severe: locale === 'zh' ? 'é‡åº¦ï¼ˆå®Œå…¨å½±å“æ—¥å¸¸æ´»åŠ¨ï¼Œéœ€è¦ä¼‘æ¯ï¼‰' : 'Severe (completely affects daily activities, need rest)'\n    },\n    buttons: {\n      getAdvice: locale === 'zh' ? 'è·å–å»ºè®®' : 'Get Advice',\n      detailedAssessment: locale === 'zh' ? 'è¯¦ç»†è¯„ä¼°' : 'Detailed Assessment',\n      testAgain: locale === 'zh' ? 'é‡æ–°æµ‹è¯•' : 'Test Again',\n      fullAssessment: locale === 'zh' ? 'å®Œæ•´è¯„ä¼°' : 'Full Assessment'\n    },\n    resultTitle: locale === 'zh' ? 'è¯„ä¼°ç»“æœ' : 'Assessment Result',\n    results: {\n      mild: locale === 'zh' ? 'æ‚¨çš„ç—›ç»ç¨‹åº¦è¾ƒè½»ï¼Œå¯ä»¥å°è¯•çƒ­æ•·ã€è½»åº¦è¿åŠ¨ç­‰è‡ªç„¶ç¼“è§£æ–¹æ³•ã€‚' : 'Your menstrual pain is mild. You can try natural relief methods like heat therapy and light exercise.',\n      moderate: locale === 'zh' ? 'æ‚¨çš„ç—›ç»ç¨‹åº¦ä¸­ç­‰ï¼Œå»ºè®®ç»“åˆå¤šç§ç¼“è§£æ–¹æ³•ï¼Œå¦‚æœ‰éœ€è¦å¯è€ƒè™‘éå¤„æ–¹æ­¢ç—›è¯ã€‚' : 'Your menstrual pain is moderate. Consider combining multiple relief methods, and over-the-counter pain medication if needed.',\n      severe: locale === 'zh' ? 'æ‚¨çš„ç—›ç»ç¨‹åº¦è¾ƒé‡ï¼Œå»ºè®®å’¨è¯¢åŒ»ç”Ÿè·å¾—ä¸“ä¸šè¯„ä¼°å’Œæ²»ç–—å»ºè®®ã€‚' : 'Your menstrual pain is severe. We recommend consulting a doctor for professional assessment and treatment advice.'\n    },\n    disclaimer: locale === 'zh' ? 'âš ï¸ æ­¤å·¥å…·ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®' : 'âš ï¸ This tool is for reference only and cannot replace professional medical advice'\n  };\n\n  const getQuickAssessment = () => {\n    if (!intensity) {\n      alert(translations.selectIntensityFirst);\n      return;\n    }\n\n    setShowQuickResult(true);\n  };\n\n  const getResultMessage = () => {\n    if (intensity === 'mild') {\n      return translations.results.mild;\n    } else if (intensity === 'moderate') {\n      return translations.results.moderate;\n    } else {\n      return translations.results.severe;\n    }\n  };\n\n  const getResultColor = () => {\n    if (intensity === 'mild') return 'border-green-500 bg-green-50 text-green-700';\n    if (intensity === 'moderate') return 'border-yellow-500 bg-yellow-50 text-yellow-700';\n    return 'border-red-500 bg-red-50 text-red-700';\n  };\n\n  return (\n    <div className={`bg-gradient-to-br from-secondary-50 to-primary-50 rounded-xl p-6 ${className}`}>\n      <div className=\"text-center mb-6\">\n        <h3 className=\"text-xl font-bold text-primary-700 mb-2\">\n          {translations.title}\n        </h3>\n        <p className=\"text-gray-600 text-sm\">\n          {translations.subtitle}\n        </p>\n      </div>\n\n      {!showQuickResult ? (\n        <div className=\"space-y-4\">\n          <div>\n            <h4 className=\"font-medium mb-3 text-gray-800\">\n              {translations.question}\n            </h4>\n            <div className=\"space-y-2\">\n              {[\n                {\n                  value: 'mild',\n                  label: translations.options.mild,\n                  emoji: 'ğŸ˜Š'\n                },\n                {\n                  value: 'moderate',\n                  label: translations.options.moderate,\n                  emoji: 'ğŸ˜'\n                },\n                {\n                  value: 'severe',\n                  label: translations.options.severe,\n                  emoji: 'ğŸ˜°'\n                }\n              ].map((option) => (\n                <label \n                  key={option.value} \n                  className=\"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-white/50 transition-colors\"\n                >\n                  <input\n                    type=\"radio\"\n                    name=\"intensity\"\n                    value={option.value}\n                    checked={intensity === option.value}\n                    onChange={(e) => setIntensity(e.target.value)}\n                    className=\"w-4 h-4 text-primary-600\"\n                  />\n                  <span className=\"text-lg\">{option.emoji}</span>\n                  <span className=\"text-sm text-gray-700 flex-1\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <button\n              onClick={getQuickAssessment}\n              className=\"flex-1 btn-primary text-sm py-2 px-4 font-semibold\"\n            >\n              {translations.buttons.getAdvice}\n            </button>\n            <Link\n              href={`/${locale}/interactive-tools/period-pain-assessment`}\n              className=\"flex-1 btn-outline text-sm py-2 px-4 font-semibold text-center\"\n            >\n              {translations.buttons.detailedAssessment}\n            </Link>\n          </div>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          <div className={`p-4 rounded-lg border-l-4 ${getResultColor()}`}>\n            <h4 className=\"font-medium mb-2\">\n              {translations.resultTitle}\n            </h4>\n            <p className=\"text-sm leading-relaxed\">\n              {getResultMessage()}\n            </p>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <button\n              onClick={() => {\n                setShowQuickResult(false);\n                setIntensity('');\n              }}\n              className=\"flex-1 btn-outline text-sm py-2 px-4 font-semibold\"\n            >\n              {translations.buttons.testAgain}\n            </button>\n            <Link\n              href={`/${locale}/interactive-tools/period-pain-assessment`}\n              className=\"flex-1 btn-primary text-sm py-2 px-4 font-semibold text-center\"\n            >\n              {translations.buttons.fullAssessment}\n            </Link>\n          </div>\n        </div>\n      )}\n\n      <div className=\"mt-4 text-center\">\n        <p className=\"text-xs text-gray-500\">\n          {translations.disclaimer}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default EmbeddedPainAssessment;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/EnhancedStructuredData.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/FAQStructuredData.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/HealthStatistics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/HydrationSafe.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ImagePlaceholder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/LanguageSetter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/LazyComponents.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Suspense' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport dynamic from 'next/dynamic';\nimport { Suspense, useState, useEffect } from 'react';\n\n// ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šåŠ¨æ€å¯¼å…¥é‡å‹ç»„ä»¶\n// è¿™äº›ç»„ä»¶åªåœ¨éœ€è¦æ—¶æ‰åŠ è½½ï¼Œå‡å°‘åˆå§‹åŒ…å¤§å°\n\n// æ€§èƒ½ç›‘æ§ç»„ä»¶ - åªåœ¨ç”Ÿäº§ç¯å¢ƒåŠ è½½\nexport const PerformanceMonitor = dynamic(\n  () => import('./PerformanceMonitor'),\n  {\n    ssr: false,\n    loading: () => null, // é™é»˜åŠ è½½\n  }\n);\n\n// äº¤äº’å¼å·¥å…·ç»„ä»¶ - å»¶è¿ŸåŠ è½½\nexport const NSAIDInteractive = dynamic(\n  () => import('./NSAIDInteractive'),\n  {\n    ssr: false,\n    loading: () => (\n      <div className=\"flex items-center justify-center p-4\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600\"></div>\n      </div>\n    ),\n  }\n);\n\n// ç–¼ç—›è¿½è¸ªå™¨ - å»¶è¿ŸåŠ è½½ (æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå› ä¸ºç»„ä»¶ä¸å­˜åœ¨)\n// export const PainTracker = dynamic(\n//   () => import('./PainTracker'),\n//   {\n//     ssr: false,\n//     loading: () => (\n//       <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n//         <div className=\"animate-pulse\">\n//           <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\"></div>\n//           <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-2\"></div>\n//           <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\n//         </div>\n//       </div>\n//     ),\n//   }\n// );\n\n// ç—‡çŠ¶è¯„ä¼°å·¥å…· - å»¶è¿ŸåŠ è½½ (æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå› ä¸ºç»„ä»¶ä¸å­˜åœ¨)\n// export const SymptomAssessment = dynamic(\n//   () => import('./SymptomAssessment'),\n//   {\n//     ssr: false,\n//     loading: () => (\n//       <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n//         <div className=\"animate-pulse\">\n//           <div className=\"h-6 bg-gray-200 rounded w-1/2 mb-4\"></div>\n//           <div className=\"space-y-3\">\n//             <div className=\"h-4 bg-gray-200 rounded\"></div>\n//             <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\n//             <div className=\"h-4 bg-gray-200 rounded w-4/6\"></div>\n//           </div>\n//         </div>\n//       </div>\n//     ),\n//   }\n// );\n\n// å‘¼å¸ç»ƒä¹ å·¥å…· - å»¶è¿ŸåŠ è½½\nexport const BreathingExercise = dynamic(\n  () => import('./BreathingExercise'),\n  {\n    ssr: false,\n    loading: () => (\n      <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-purple-200 rounded-full w-8 mx-auto mb-4\"></div>\n          <div className=\"h-4 bg-purple-200 rounded w-1/2 mx-auto\"></div>\n        </div>\n      </div>\n    ),\n  }\n);\n\n// å‘¨æœŸè¿½è¸ªå™¨ - å»¶è¿ŸåŠ è½½ (æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå› ä¸ºç»„ä»¶ä¸å­˜åœ¨)\n// export const CycleTracker = dynamic(\n//   () => import('./CycleTracker'),\n//   {\n//     ssr: false,\n//     loading: () => (\n//       <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n//         <div className=\"animate-pulse\">\n//           <div className=\"h-5 bg-gray-200 rounded w-1/3 mb-4\"></div>\n//           <div className=\"grid grid-cols-7 gap-2 mb-4\">\n//             {Array.from({ length: 7 }).map((_, i) => (\n//               <div key={i} className=\"h-8 bg-gray-200 rounded\"></div>\n//             ))}\n//           </div>\n//           <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\n//         </div>\n//       </div>\n//     ),\n//   }\n// );\n\n// é«˜çº§ç»„ä»¶ - å»¶è¿ŸåŠ è½½ (æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå› ä¸ºç»„ä»¶æœ‰é—®é¢˜)\n// export const AdvancedComponents = dynamic(\n//   () => import('./advanced/AppProvider'),\n//   {\n//     ssr: false,\n//     loading: () => null,\n//   }\n// );\n\n// ç§»åŠ¨ç«¯ç‰¹å®šçš„å»¶è¿ŸåŠ è½½ç»„ä»¶\nexport const MobileOptimizedComponents = {\n  // ç§»åŠ¨ç«¯PDFä¸­å¿ƒ\n  PDFCenter: dynamic(\n    () => import('./OptimizedMobilePDFCenter'),\n    {\n      ssr: false,\n      loading: () => (\n        <div className=\"space-y-4\">\n          {Array.from({ length: 3 }).map((_, i) => (\n            <div key={i} className=\"bg-white rounded-lg p-4 shadow-sm\">\n              <div className=\"animate-pulse\">\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </div>\n            </div>\n          ))}\n        </div>\n      ),\n    }\n  ),\n  \n  // ç§»åŠ¨ç«¯æœç´¢ç»„ä»¶ (æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå› ä¸ºç»„ä»¶ä¸å­˜åœ¨)\n  // SearchComponent: dynamic(\n  //   () => import('./MobileSearch'),\n  //   {\n  //     ssr: false,\n  //     loading: () => (\n  //       <div className=\"bg-white rounded-lg p-4 shadow-sm\">\n  //         <div className=\"animate-pulse\">\n  //           <div className=\"h-10 bg-gray-200 rounded\"></div>\n  //         </div>\n  //       </div>\n  //     ),\n  //   }\n  // ),\n};\n\n// æ¡ä»¶åŠ è½½Hook - åŸºäºè®¾å¤‡ç±»å‹å’Œç”¨æˆ·äº¤äº’\nexport function useConditionalLoading() {\n  const [shouldLoad, setShouldLoad] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    // æ£€æµ‹ç§»åŠ¨ç«¯\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    \n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    // åŸºäºç”¨æˆ·äº¤äº’å†³å®šæ˜¯å¦åŠ è½½é‡å‹ç»„ä»¶\n    const handleUserInteraction = () => {\n      setShouldLoad(true);\n    };\n    \n    // ç›‘å¬ç”¨æˆ·äº¤äº’\n    document.addEventListener('click', handleUserInteraction, { once: true });\n    document.addEventListener('scroll', handleUserInteraction, { once: true });\n    document.addEventListener('touchstart', handleUserInteraction, { once: true });\n    \n    return () => {\n      window.removeEventListener('resize', checkMobile);\n      document.removeEventListener('click', handleUserInteraction);\n      document.removeEventListener('scroll', handleUserInteraction);\n      document.removeEventListener('touchstart', handleUserInteraction);\n    };\n  }, []);\n\n  return { shouldLoad, isMobile };\n}\n\n// é¢„åŠ è½½å…³é”®ç»„ä»¶\nexport function preloadCriticalComponents() {\n  if (typeof window !== 'undefined') {\n    // é¢„åŠ è½½å…³é”®ç»„ä»¶\n    import('./PerformanceMonitor');\n    import('./WebVitalsReporter');\n    \n    // åœ¨ç©ºé—²æ—¶é—´é¢„åŠ è½½å…¶ä»–ç»„ä»¶ (æš‚æ—¶æ³¨é‡Šæ‰ä¸å­˜åœ¨çš„ç»„ä»¶)\n    if ('requestIdleCallback' in window) {\n      requestIdleCallback(() => {\n        // import('./PainTracker');\n        // import('./SymptomAssessment');\n      });\n    } else {\n      // é™çº§æ–¹æ¡ˆ\n      setTimeout(() => {\n        // import('./PainTracker');\n        // import('./SymptomAssessment');\n      }, 2000);\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/MarkdownWithMermaid.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[603,606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[603,606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport MermaidChart from './MermaidChart';\n\ninterface MarkdownWithMermaidProps {\n  content: string;\n  className?: string;\n}\n\nexport default function MarkdownWithMermaid({ content, className = '' }: MarkdownWithMermaidProps) {\n  return (\n    <div className={className}>\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm]}\n        rehypePlugins={[rehypeRaw]}\n        components={{\n        // Handle Mermaid code blocks\n        code: ({ className, children, ...props }: any) => {\n          const match = /language-(\\w+)/.exec(className || '');\n          const language = match ? match[1] : '';\n          const inline = props.inline;\n\n          if (!inline && language === 'mermaid') {\n            const chartCode = String(children).replace(/\\n$/, '');\n\n            // Determine language from chart content for appropriate title\n            const isEnglish = chartCode.includes('Menstrual Pain Onset') || chartCode.includes('Pain Relief Achieved');\n\n            return (\n              <div className=\"my-8\">\n                <MermaidChart\n                  chart={chartCode}\n                  title={isEnglish ? \"Menstrual Pain Medication Decision Tree\" : \"ç—›ç»ç”¨è¯å†³ç­–æµç¨‹å›¾\"}\n                  description={isEnglish\n                    ? \"Scientific medication guidance process based on pain severity, including safety checks and effectiveness evaluation steps\"\n                    : \"åŸºäºç–¼ç—›ç¨‹åº¦çš„ç§‘å­¦ç”¨è¯æŒ‡å¯¼æµç¨‹ï¼ŒåŒ…å«å®‰å…¨æ£€æŸ¥å’Œæ•ˆæœè¯„ä¼°æ­¥éª¤\"\n                  }\n                  className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\"\n                />\n              </div>\n            );\n          }\n          \n          return (\n            <code className={className} {...props}>\n              {children}\n            </code>\n          );\n        },\n        \n        // Enhanced table styling\n        table: ({ children }) => (\n          <div className=\"overflow-x-auto my-6\">\n            <table className=\"min-w-full border-collapse border border-gray-300 bg-white rounded-lg shadow-sm\">\n              {children}\n            </table>\n          </div>\n        ),\n        thead: ({ children }) => (\n          <thead className=\"bg-primary-50\">\n            {children}\n          </thead>\n        ),\n        th: ({ children }) => (\n          <th className=\"border border-gray-300 px-3 sm:px-4 py-2 sm:py-3 bg-primary-100 font-semibold text-left text-primary-800 text-sm sm:text-base\">\n            {children}\n          </th>\n        ),\n        td: ({ children }) => (\n          <td className=\"border border-gray-300 px-3 sm:px-4 py-2 sm:py-3 text-neutral-700 text-sm sm:text-base\">\n            {children}\n          </td>\n        ),\n        tr: ({ children }) => (\n          <tr className=\"even:bg-gray-50 hover:bg-primary-25\">\n            {children}\n          </tr>\n        ),\n        \n        // Enhanced blockquote styling\n        blockquote: ({ children }) => (\n          <blockquote className=\"border-l-4 border-primary-400 pl-4 py-2 my-4 bg-primary-50 rounded-r-lg\">\n            <div className=\"text-primary-800 font-medium\">\n              {children}\n            </div>\n          </blockquote>\n        ),\n        \n        // Enhanced list styling\n        ul: ({ children }) => (\n          <ul className=\"list-disc list-inside space-y-2 my-4 text-neutral-700\">\n            {children}\n          </ul>\n        ),\n        ol: ({ children }) => (\n          <ol className=\"list-decimal list-inside space-y-2 my-4 text-neutral-700\">\n            {children}\n          </ol>\n        ),\n        li: ({ children }) => (\n          <li className=\"leading-relaxed\">\n            {children}\n          </li>\n        ),\n        \n        // Enhanced heading styling\n        h1: ({ children }) => (\n          <h1 className=\"text-3xl font-bold text-neutral-800 mb-6 mt-8 first:mt-0\">\n            {children}\n          </h1>\n        ),\n        h2: ({ children }) => (\n          <h2 className=\"text-2xl font-semibold text-neutral-800 mb-4 mt-8 first:mt-0\">\n            {children}\n          </h2>\n        ),\n        h3: ({ children }) => (\n          <h3 className=\"text-xl font-semibold text-neutral-800 mb-3 mt-6 first:mt-0\">\n            {children}\n          </h3>\n        ),\n        h4: ({ children }) => (\n          <h4 className=\"text-lg font-semibold text-neutral-800 mb-2 mt-4 first:mt-0\">\n            {children}\n          </h4>\n        ),\n        \n        // Enhanced paragraph styling\n        p: ({ children }) => (\n          <p className=\"text-neutral-700 leading-relaxed mb-4\">\n            {children}\n          </p>\n        ),\n        \n        // Enhanced link styling\n        a: ({ href, children }) => (\n          <a \n            href={href}\n            className=\"text-primary-600 hover:text-primary-800 underline decoration-primary-300 hover:decoration-primary-500 transition-colors\"\n            target={href?.startsWith('http') ? '_blank' : undefined}\n            rel={href?.startsWith('http') ? 'noopener noreferrer' : undefined}\n          >\n            {children}\n          </a>\n        ),\n        \n        // Enhanced strong/em styling\n        strong: ({ children }) => (\n          <strong className=\"font-semibold text-neutral-800\">\n            {children}\n          </strong>\n        ),\n        em: ({ children }) => (\n          <em className=\"italic text-neutral-700\">\n            {children}\n          </em>\n        ),\n      }}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/MermaidChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/NSAIDContent.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 't'. Either include it or remove the dependency array.","line":864,"column":6,"nodeType":"ArrayExpression","endLine":864,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [t]","fix":{"range":[29135,29137],"text":"[t]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect } from 'react';\nimport { useAppTranslations } from '@/hooks/useAppTranslations';\n\ninterface NSAIDContentProps {\n  content: string;\n}\n\n// Function to process NSAID content and convert Markdown to HTML while preserving HTML blocks\nfunction processNSAIDContent(content: string): string {\n  // First, protect HTML blocks by replacing them with placeholders\n  const htmlBlocks: string[] = [];\n  let processedContent = content.replace(/<div[\\s\\S]*?<\\/div>/g, (match) => {\n    const index = htmlBlocks.length;\n    htmlBlocks.push(match);\n    return `__HTML_BLOCK_${index}__`;\n  });\n\n  // Process Markdown syntax\n  processedContent = processedContent\n    // Convert headers\n    .replace(/^# (.*$)/gim, '<h1>$1</h1>')\n    .replace(/^## (.*$)/gim, '<h2>$1</h2>')\n    .replace(/^### (.*$)/gim, '<h3>$1</h3>')\n    .replace(/^#### (.*$)/gim, '<h4>$1</h4>')\n    \n    // Convert bold and italic\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n    .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n    \n    // Convert blockquotes\n    .replace(/^> (.*$)/gim, '<blockquote>$1</blockquote>')\n    \n    // Convert code blocks\n    .replace(/```([\\s\\S]*?)```/g, '<pre><code>$1</code></pre>')\n    .replace(/`(.*?)`/g, '<code>$1</code>')\n    \n    // Convert links\n    .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\">$1</a>')\n    \n    // Convert tables - improved table processing with center alignment for first column\n    .replace(/\\|(.+)\\|\\n\\|[-\\s|]+\\|\\n((?:\\|.+\\|\\n?)*)/g, (match, header, rows) => {\n      const headerCells = header.split('|').map((cell: string) => cell.trim()).filter(Boolean);\n      const headerRow = '<tr>' + headerCells.map((cell: string, index: number) => {\n        const alignment = index === 0 ? 'text-center' : 'text-left';\n        return `<th class=\"border border-gray-300 px-4 py-3 bg-primary-100 font-semibold ${alignment} text-primary-800\">${cell}</th>`;\n      }).join('') + '</tr>';\n\n      const bodyRows = rows.trim().split('\\n').map((row: string) => {\n        const cells = row.replace(/^\\||\\|$/g, '').split('|').map((cell: string) => cell.trim());\n        return '<tr class=\"even:bg-gray-50 hover:bg-primary-25\">' + cells.map((cell: string, index: number) => {\n          const alignment = index === 0 ? 'text-center' : 'text-left';\n          return `<td class=\"border border-gray-300 px-4 py-3 text-neutral-700 ${alignment}\">${cell}</td>`;\n        }).join('') + '</tr>';\n      }).join('');\n\n      return `<div class=\"overflow-x-auto my-6\"><table class=\"min-w-full border-collapse border border-gray-300 bg-white rounded-lg shadow-sm\"><thead class=\"bg-primary-50\">${headerRow}</thead><tbody>${bodyRows}</tbody></table></div>`;\n    })\n    \n    // Convert line breaks and paragraphs\n    .replace(/\\n\\n/g, '</p><p>')\n    .replace(/\\n/g, '<br>')\n    \n    // Wrap in paragraphs (but not HTML blocks)\n    .replace(/^(?!<[h1-6]|<div|<blockquote|<pre|<ul|<ol|<li|__HTML_BLOCK)(.+)/gim, '<p>$1</p>');\n\n  // Restore HTML blocks\n  htmlBlocks.forEach((block, index) => {\n    processedContent = processedContent.replace(`__HTML_BLOCK_${index}__`, block);\n  });\n\n  // Ensure video element has proper attributes for visibility\n  processedContent = processedContent.replace(\n    /<video([^>]*id=\"nsaidAnimationPlayer\"[^>]*)>/g,\n    '<video$1 style=\"display: block !important; width: 100% !important; height: auto !important; min-height: 250px !important; background: #000 !important; opacity: 1 !important; visibility: visible !important; position: relative !important; z-index: 100 !important;\" controls playsinline>'\n  );\n\n  // Debug: Log the processed content to see if video element is present\n  if (processedContent.includes('nsaidAnimationPlayer')) {\n    console.log('ğŸ¬ Video element found in processed content');\n  } else {\n    console.warn('âŒ Video element NOT found in processed content');\n  }\n\n  // Remove test message and ensure clean video container\n  processedContent = processedContent.replace(\n    /<div class=\"nsaid-animation-player\">/g,\n    '<div class=\"nsaid-animation-player\">'\n  );\n\n  return processedContent;\n}\n\nexport default function NSAIDContent({ content }: NSAIDContentProps) {\n  // è·å–ç¿»è¯‘å‡½æ•°\n  const { t } = useAppTranslations('nsaidContent');\n  \n  // Component rendering - reduced logging for production\n\n  useEffect(() => {\n    // Initialize component effects\n\n    // Force remove any filters on mount and periodically\n    const removeFilters = () => {\n      // Target all possible video-related elements\n      const selectors = [\n        'video',\n        '[id*=\"nsaid\"]',\n        '[class*=\"animation\"]',\n        '[class*=\"video\"]',\n        '[class*=\"player\"]',\n        '.nsaid-animation-player',\n        '#nsaidAnimationPlayer',\n        '.video-player-container'\n      ];\n\n      selectors.forEach(selector => {\n        const elements = document.querySelectorAll(selector);\n        elements.forEach(el => {\n          const element = el as HTMLElement;\n          // Remove all possible filter properties to eliminate gray overlay\n          element.style.setProperty('filter', 'none', 'important');\n          element.style.setProperty('-webkit-filter', 'none', 'important');\n          element.style.setProperty('-moz-filter', 'none', 'important');\n          element.style.setProperty('-ms-filter', 'none', 'important');\n          element.style.setProperty('-o-filter', 'none', 'important');\n          element.style.setProperty('opacity', '1', 'important');\n          // Keep video background black for better contrast\n          if (element.tagName.toLowerCase() === 'video') {\n            element.style.setProperty('background', '#000000', 'important');\n          } else {\n            element.style.setProperty('background', 'transparent', 'important');\n          }\n        });\n      });\n    };\n\n    // Remove filters immediately and periodically\n    removeFilters();\n    const filterInterval = setInterval(removeFilters, 500);\n\n    // Add CSS styles to head\n    const style = document.createElement('style');\n    style.textContent = `\n      .nsaid-animation-player {\n        margin: 2rem 0;\n        padding: 1.5rem;\n        background: #f8fafc;\n        border-radius: 0.75rem;\n        border: 1px solid #e2e8f0;\n        display: block !important;\n        visibility: visible !important;\n        position: relative !important;\n        z-index: 1 !important;\n      }\n      .animation-container {\n        max-width: 100%;\n        display: block !important;\n        visibility: visible !important;\n        position: relative !important;\n      }\n      .video-player-container {\n        margin-bottom: 1rem;\n        display: block !important;\n        visibility: visible !important;\n        position: relative !important;\n        min-height: 300px !important;\n        background: #000 !important;\n        border-radius: 0.5rem !important;\n      }\n      .animation-video {\n        width: 100% !important;\n        height: auto !important;\n        min-height: 250px !important;\n        border-radius: 0.5rem !important;\n        background: #000000 !important;\n        filter: none !important;\n        opacity: 1 !important;\n        -webkit-filter: none !important;\n        -moz-filter: none !important;\n        -ms-filter: none !important;\n        -o-filter: none !important;\n        position: relative !important;\n        z-index: 10 !important;\n        display: block !important;\n        visibility: visible !important;\n        object-fit: contain !important;\n      }\n\n      .animation-video::before,\n      .animation-video::after {\n        display: none !important;\n        content: none !important;\n      }\n\n      .video-player-container {\n        position: relative !important;\n        background: transparent !important;\n        filter: none !important;\n        opacity: 1 !important;\n      }\n\n      .video-player-container::before,\n      .video-player-container::after {\n        display: none !important;\n        content: none !important;\n      }\n\n      /* Remove any potential overlay effects */\n      .video-player-container > *:not(.animation-video) {\n        display: none !important;\n      }\n\n      /* Ensure video is always visible and clear */\n      video, .animation-video {\n        filter: none !important;\n        opacity: 1 !important;\n        background: #000 !important;\n        position: relative !important;\n        z-index: 100 !important;\n      }\n      .animation-video::-webkit-media-controls {\n        display: flex !important;\n        opacity: 1 !important;\n      }\n      .animation-video::-webkit-media-controls-panel {\n        display: flex !important;\n        opacity: 1 !important;\n        background: rgba(0, 0, 0, 0.8) !important;\n      }\n      .animation-video::-webkit-media-controls-play-button {\n        display: block !important;\n        opacity: 1 !important;\n        background-color: #3b82f6 !important;\n        border-radius: 50% !important;\n      }\n      .narration-section {\n        margin: 1rem 0;\n        padding: 1rem;\n        background: white;\n        border-radius: 0.5rem;\n        border: 1px solid #e2e8f0;\n      }\n      .scene-title {\n        font-size: 1.125rem;\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 0.5rem;\n      }\n      .narration-text {\n        color: #6b7280;\n        line-height: 1.5;\n      }\n      .navigation-controls {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-top: 1rem;\n      }\n      .nav-button {\n        padding: 0.5rem 1rem !important;\n        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;\n        color: white !important;\n        border: none !important;\n        border-radius: 0.375rem !important;\n        cursor: pointer !important;\n        font-weight: 500 !important;\n        transition: all 0.2s ease !important;\n        box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3) !important;\n      }\n      .nav-button:hover:not(:disabled) {\n        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important;\n        transform: translateY(-1px) !important;\n        box-shadow: 0 4px 8px rgba(59, 130, 246, 0.4) !important;\n      }\n      .nav-button:disabled {\n        background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%) !important;\n        cursor: not-allowed !important;\n        opacity: 0.6 !important;\n        transform: none !important;\n        box-shadow: 0 1px 2px rgba(156, 163, 175, 0.3) !important;\n      }\n      .nav-button:not(:disabled) {\n        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;\n      }\n      .scene-indicator {\n        color: #6b7280;\n        font-size: 0.875rem;\n      }\n      .nsaid-calculator {\n        margin: 2rem auto;\n        padding: 1.5rem;\n        background: white;\n        border-radius: 0.75rem;\n        border: 1px solid #e2e8f0;\n        max-width: 480px;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n      .calculator-container {\n        width: 100%;\n      }\n      .calculator-title {\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 1rem;\n        text-align: center;\n      }\n      .calculator-form {\n        display: flex;\n        flex-direction: column;\n        gap: 0.375rem;\n      }\n      .form-group {\n        margin-bottom: 0.25rem;\n      }\n      .form-label {\n        display: block;\n        font-weight: 500;\n        color: #374151;\n        margin-bottom: 0.25rem;\n        font-size: 0.875rem;\n      }\n      .form-select, .form-input {\n        width: 100%;\n        padding: 0.625rem;\n        border: 1px solid #d1d5db;\n        border-radius: 0.375rem;\n        font-size: 0.9375rem;\n        box-sizing: border-box;\n      }\n      .form-select:focus, .form-input:focus {\n        outline: none;\n        border-color: #3b82f6;\n        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n      }\n      .calculate-button {\n        width: 100% !important;\n        padding: 0.875rem 1.5rem !important;\n        background: #1e40af !important;\n        background-color: #1e40af !important;\n        background-image: none !important;\n        color: #ffffff !important;\n        border: 3px solid #1d4ed8 !important;\n        border-radius: 0.5rem !important;\n        font-weight: 800 !important;\n        cursor: pointer !important;\n        margin: 0.75rem 0 1rem 0 !important;\n        transition: all 0.3s ease !important;\n        display: block !important;\n        text-align: center !important;\n        font-size: 1.125rem !important;\n        box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4) !important;\n        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;\n        letter-spacing: 0.05em !important;\n        position: relative !important;\n        overflow: hidden !important;\n        text-transform: uppercase !important;\n        z-index: 10 !important;\n      }\n      .calculate-button:hover {\n        background: #1e3a8a !important;\n        background-color: #1e3a8a !important;\n        background-image: none !important;\n        transform: translateY(-2px) !important;\n        box-shadow: 0 6px 20px rgba(30, 64, 175, 0.5) !important;\n        border-color: #1e3a8a !important;\n        color: #ffffff !important;\n      }\n      .calculate-button:active {\n        background: #1e3a8a !important;\n        background-color: #1e3a8a !important;\n        background-image: none !important;\n        transform: translateY(0) !important;\n        box-shadow: 0 2px 8px rgba(30, 64, 175, 0.4) !important;\n        color: #ffffff !important;\n      }\n      .dose-result {\n        margin-top: 1rem;\n        padding: 1rem;\n        background: white;\n        border-radius: 0.5rem;\n        border: 1px solid #e2e8f0;\n      }\n      .dose-result.hidden {\n        display: none;\n      }\n      .result-title {\n        font-size: 1.125rem;\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 0.75rem;\n      }\n      .result-content p {\n        margin-bottom: 0.5rem;\n        color: #374151;\n      }\n      .result-notes {\n        font-size: 0.875rem;\n        color: #6b7280;\n        font-style: italic;\n      }\n      .disclaimer {\n        margin-top: 0.5rem;\n        padding: 1rem;\n        background: #fef3c7;\n        border: 1px solid #f59e0b;\n        border-radius: 0.5rem;\n        font-size: 0.875rem;\n        color: #92400e;\n        display: flex;\n        align-items: flex-start;\n        gap: 0.5rem;\n      }\n      .disclaimer i {\n        flex-shrink: 0;\n        width: 1rem;\n        height: 1rem;\n        margin-top: 0.125rem;\n      }\n\n      /* æœºåˆ¶å›¾è¡¨æ ·å¼ */\n      .mechanism-diagram {\n        background: #f8fafc;\n        border: 2px solid #e2e8f0;\n        border-radius: 0.5rem;\n        padding: 1.5rem;\n        margin: 1.5rem 0;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n      }\n      .mechanism-diagram p {\n        margin: 0.25rem 0;\n        color: #1f2937;\n      }\n\n      /* æ²»ç–—æ­¥éª¤æ ·å¼ */\n      .treatment-steps {\n        background: #f0f9ff;\n        border-left: 4px solid #3b82f6;\n        padding: 1.5rem;\n        margin: 1rem 0;\n        border-radius: 0 0.5rem 0.5rem 0;\n      }\n      .treatment-steps p {\n        margin: 1rem 0;\n        color: #1f2937;\n        line-height: 1.6;\n      }\n      .treatment-steps p:first-child {\n        margin-top: 0;\n      }\n      .treatment-steps p:last-child {\n        margin-bottom: 0;\n      }\n\n      /* æ²»ç–—æ¨èæ ·å¼ */\n      .treatment-recommendation {\n        background: #f0fdf4;\n        border: 1px solid #bbf7d0;\n        border-radius: 0.5rem;\n        padding: 1rem;\n        margin: 0.75rem 0;\n      }\n      .treatment-recommendation p {\n        margin: 0;\n        color: #166534;\n        line-height: 1.6;\n      }\n\n      /* å“åº”å¼è®¾è®¡ */\n      @media (max-width: 768px) {\n        .nsaid-calculator {\n          margin: 1rem auto;\n          padding: 1rem;\n          max-width: calc(100% - 2rem);\n        }\n        .calculator-title {\n          font-size: 1.125rem;\n          margin-bottom: 0.75rem;\n        }\n        .calculator-form {\n          gap: 0.375rem;\n        }\n        .form-group {\n          margin-bottom: 0;\n        }\n        .form-label {\n          font-size: 0.8125rem;\n          margin-bottom: 0.1875rem;\n        }\n        .form-select, .form-input {\n          padding: 0.5rem;\n          font-size: 0.875rem;\n        }\n        .calculate-button {\n          padding: 0.75rem 1rem !important;\n          font-size: 1rem !important;\n          margin: 0.625rem 0 0.75rem 0 !important;\n          background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;\n          color: white !important;\n          border: 2px solid #2563eb !important;\n          box-shadow: 0 3px 10px rgba(59, 130, 246, 0.25) !important;\n        }\n        .disclaimer {\n          padding: 0.75rem;\n          font-size: 0.8125rem;\n        }\n      }\n\n      @media (max-width: 480px) {\n        .nsaid-calculator {\n          padding: 0.75rem;\n          margin: 0.75rem auto;\n        }\n        .calculator-title {\n          font-size: 1rem;\n          margin-bottom: 0.5rem;\n        }\n        .form-label {\n          font-size: 0.75rem;\n          margin-bottom: 0.125rem;\n        }\n        .form-select, .form-input {\n          padding: 0.5rem;\n          font-size: 0.8125rem;\n        }\n        .calculate-button {\n          padding: 0.625rem 0.875rem !important;\n          font-size: 0.9375rem !important;\n          margin: 0.5rem 0 0.625rem 0 !important;\n          background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;\n          color: white !important;\n          border: 1.5px solid #2563eb !important;\n          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2) !important;\n        }\n      }\n\n      /* å¼ºåˆ¶ç§»é™¤æ‰€æœ‰å¯èƒ½çš„ç°è‰²æ»¤é•œå’Œè¦†ç›–å±‚ */\n      * {\n        filter: none !important;\n        -webkit-filter: none !important;\n        -moz-filter: none !important;\n        -ms-filter: none !important;\n        -o-filter: none !important;\n      }\n\n      /* ç‰¹åˆ«é’ˆå¯¹è§†é¢‘å’ŒåŠ¨ç”»å…ƒç´  */\n      video, .animation-video, #nsaidAnimationPlayer {\n        filter: none !important;\n        -webkit-filter: none !important;\n        -moz-filter: none !important;\n        -ms-filter: none !important;\n        -o-filter: none !important;\n        opacity: 1 !important;\n        background: #000 !important;\n        position: relative !important;\n        z-index: 1000 !important;\n      }\n\n      /* ç§»é™¤ä»»ä½•å¯èƒ½çš„è¦†ç›–å±‚ */\n      div[style*=\"filter\"],\n      div[style*=\"opacity\"],\n      div[class*=\"overlay\"],\n      div[class*=\"backdrop\"],\n      .video-overlay,\n      .video-backdrop {\n        display: none !important;\n        visibility: hidden !important;\n        opacity: 0 !important;\n        filter: none !important;\n      }\n\n      /* ç¡®ä¿è§†é¢‘å®¹å™¨æ¸…æ´ */\n      .video-player-container,\n      .animation-container {\n        filter: none !important;\n        opacity: 1 !important;\n        background: transparent !important;\n        position: relative !important;\n      }\n\n      /* ç§»é™¤ä»»ä½•ä¼ªå…ƒç´ è¦†ç›– */\n      *::before,\n      *::after {\n        filter: none !important;\n        opacity: 1 !important;\n      }\n    `;\n    document.head.appendChild(style);\n\n    return () => {\n      clearInterval(filterInterval);\n      if (document.head.contains(style)) {\n        document.head.removeChild(style);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    // Add a small delay to ensure DOM elements are rendered\n    console.log('ğŸ”§ NSAIDContent component initialized, external script will handle events');\n\n    const timer = setTimeout(() => {\n      // NSAID Calculator functionality\n      const calculateButton = document.getElementById('calculate-dose-button');\n\n      if (calculateButton) {\n        // å¼ºåˆ¶è®¾ç½®æŒ‰é’®æ ·å¼\n        const btn = calculateButton as HTMLButtonElement;\n        btn.style.setProperty('background', '#1e40af', 'important');\n        btn.style.setProperty('background-color', '#1e40af', 'important');\n        btn.style.setProperty('background-image', 'none', 'important');\n        btn.style.setProperty('color', '#ffffff', 'important');\n        btn.style.setProperty('border', '2px solid #1d4ed8', 'important');\n        btn.style.setProperty('border-radius', '0.5rem', 'important');\n        btn.style.setProperty('padding', '0.5rem 1rem', 'important');\n        btn.style.setProperty('font-weight', '700', 'important');\n        btn.style.setProperty('cursor', 'pointer', 'important');\n        btn.style.setProperty('opacity', '1', 'important');\n        btn.style.setProperty('pointer-events', 'auto', 'important');\n        btn.style.setProperty('z-index', '100', 'important');\n        btn.style.setProperty('position', 'relative', 'important');\n        btn.style.setProperty('display', 'inline-block', 'important');\n        btn.style.setProperty('width', '100%', 'important');\n\n        console.log('âœ… Calculate button found and styled, event handling delegated to external script');\n      }\n\n      // Simple video player initialization based on original code\n      const videoPlayer = document.getElementById('nsaidAnimationPlayer') as HTMLVideoElement;\n      const prevButton = document.getElementById('nsaidPrevButton');\n      const nextButton = document.getElementById('nsaidNextButton');\n      const sceneIndicator = document.getElementById('nsaidSceneIndicator');\n      const sceneTitle = document.getElementById('nsaidSceneTitle');\n      const narrationText = document.getElementById('nsaidNarrationText');\n\n      console.log('ğŸ¬ Animation controls found:', {\n        videoPlayer: !!videoPlayer,\n        prevButton: !!prevButton,\n        nextButton: !!nextButton,\n        sceneIndicator: !!sceneIndicator,\n        sceneTitle: !!sceneTitle,\n        narrationText: !!narrationText\n      });\n\n      let currentSceneIndex = 0;\n\n      // Simple scene data structure matching original working code\n      const scenes = [\n        {\n          id: 1,\n          title: t('scenes.scene1.title'),\n          videoUrl: \"https://v3.fal.media/files/monkey/OMrBMAEeA1my97zJzH64q_output.mp4\",\n          narration: t('scenes.scene1.narration')\n        },\n        {\n          id: 2,\n          title: t('scenes.scene2.title'),\n          text: t('scenes.scene2.text'),\n          videoUrl: 'https://v3.fal.media/files/panda/DJlINSBKErKOTTRW4scwG_output.mp4'\n        },\n        {\n          id: 3,\n          title: t('scenes.scene3.title'),\n          text: t('scenes.scene3.text'),\n          videoUrl: 'https://v3.fal.media/files/monkey/sRVoOWjzmaoyzF7cure1m_output.mp4'\n        },\n        {\n          id: 4,\n          title: t('scenes.scene4.title'),\n          text: t('scenes.scene4.text'),\n          videoUrl: 'https://v3.fal.media/files/lion/O4Ys7oYqfMg3M0jR80mhw_output.mp4'\n        },\n        {\n          id: 5,\n          title: t('scenes.scene5.title'),\n          text: t('scenes.scene5.text'),\n          videoUrl: 'https://v3.fal.media/files/elephant/ejMBtuanCnJ9v_RH-3gXc_output.mp4'\n        },\n        {\n          id: 6,\n          title: t('scenes.scene6.title'),\n          text: t('scenes.scene6.text'),\n          videoUrl: 'https://v3.fal.media/files/lion/_wrFzYC89XCXhT08_ldCQ_output.mp4'\n        },\n        {\n          id: 7,\n          title: t('scenes.scene7.title'),\n          text: t('scenes.scene7.text'),\n          videoUrl: 'https://v3.fal.media/files/zebra/-3fM_hp6Ze7ceOdKospQ-_output.mp4'\n        },\n        {\n          id: 8,\n          title: t('scenes.scene8.title'),\n          text: t('scenes.scene8.text'),\n          videoUrl: 'https://v3.fal.media/files/koala/-0hQKGQ9lIMGoyG_jRw2H_output.mp4'\n        },\n        {\n          id: 9,\n          title: t('scenes.scene9.title'),\n          text: t('scenes.scene9.text'),\n          videoUrl: 'https://v3.fal.media/files/monkey/OMrBMAEeA1my97zJzH64q_output.mp4'\n        },\n        {\n          id: 10,\n          title: t('scenes.scene10.title'),\n          text: t('scenes.scene10.text'),\n          videoUrl: 'https://v3.fal.media/files/panda/DJlINSBKErKOTTRW4scwG_output.mp4'\n        },\n        {\n          id: 11,\n          title: t('scenes.scene11.title'),\n          text: t('scenes.scene11.text'),\n          videoUrl: 'https://v3.fal.media/files/monkey/sRVoOWjzmaoyzF7cure1m_output.mp4'\n        }\n      ];\n\n      // Simple scene loading function based on original working code\n      function loadScene(index: number) {\n        if (index < 0 || index >= scenes.length) {\n          console.error('Scene index out of bounds:', index);\n          return;\n        }\n\n        currentSceneIndex = index;\n        const scene = scenes[currentSceneIndex];\n\n        // Update UI elements\n        if (sceneTitle) sceneTitle.textContent = scene.title;\n        if (narrationText) narrationText.textContent = scene.text || scene.narration || '';\n        if (sceneIndicator) sceneIndicator.textContent = t('ui.sceneIndicator', { current: scene.id, total: scenes.length });\n\n        // Load video\n        if (videoPlayer && scene.videoUrl) {\n          videoPlayer.src = scene.videoUrl;\n          videoPlayer.load();\n\n          // ä»…åœ¨ç”¨æˆ·äº¤äº’åå°è¯•æ’­æ”¾ï¼Œé¿å… AudioContext/Autoplay è­¦å‘Š\n          const tryPlay = () => {\n            videoPlayer.play().catch(() => {});\n            videoPlayer.removeEventListener('pointerdown', tryPlay);\n            document.removeEventListener('pointerdown', tryPlay);\n          };\n          document.addEventListener('pointerdown', tryPlay, { once: true });\n        }\n\n        // Update navigation buttons\n        if (prevButton) (prevButton as HTMLButtonElement).disabled = currentSceneIndex === 0;\n        if (nextButton) (nextButton as HTMLButtonElement).disabled = currentSceneIndex === scenes.length - 1;\n      }\n\n      // Simple navigation functions\n      function playNextScene() {\n        currentSceneIndex++;\n        if (currentSceneIndex >= scenes.length) {\n          currentSceneIndex = 0; // Loop back to first scene\n        }\n        loadScene(currentSceneIndex);\n      }\n\n      function playPrevScene() {\n        currentSceneIndex--;\n        if (currentSceneIndex < 0) {\n          currentSceneIndex = scenes.length - 1; // Loop back to last scene\n        }\n        loadScene(currentSceneIndex);\n      }\n\n      // Set up event listeners based on original working code\n      if (videoPlayer) {\n        // Video ended - auto advance to next scene\n        videoPlayer.addEventListener('ended', () => {\n          playNextScene();\n        });\n\n        // Video error handling\n        videoPlayer.addEventListener('error', (e) => {\n          console.error('Video error:', e);\n          if (narrationText) narrationText.textContent = t('ui.videoErrorDescription');\n          if (sceneTitle) sceneTitle.textContent = t('ui.videoError');\n        });\n      }\n\n      // Button event listeners\n      if (prevButton) {\n        prevButton.addEventListener('click', () => {\n          playPrevScene();\n        });\n      }\n\n      if (nextButton) {\n        nextButton.addEventListener('click', () => {\n          playNextScene();\n        });\n      }\n\n      // Initialize with first scene\n      if (scenes.length > 0) {\n        loadScene(0);\n      } else {\n        if (sceneTitle) sceneTitle.textContent = t('ui.noScenes');\n        if (narrationText) narrationText.textContent = t('ui.noScenesDescription');\n        if (prevButton) (prevButton as HTMLButtonElement).disabled = true;\n        if (nextButton) (nextButton as HTMLButtonElement).disabled = true;\n        if (sceneIndicator) sceneIndicator.textContent = t('ui.sceneIndicator', { current: 0, total: 0 });\n      }\n\n      // Enhanced video player setup with debugging\n      if (videoPlayer) {\n        videoPlayer.controls = true;\n        videoPlayer.style.width = '100%';\n        videoPlayer.style.height = 'auto';\n        videoPlayer.style.minHeight = '250px';\n        videoPlayer.style.background = '#000';\n        videoPlayer.style.display = 'block';\n\n        console.log('âœ… Video player initialized successfully');\n        console.log('ğŸ¬ Video player details:', {\n          element: videoPlayer,\n          src: videoPlayer.src,\n          currentSrc: videoPlayer.currentSrc,\n          controls: videoPlayer.controls,\n          style: {\n            display: videoPlayer.style.display,\n            width: videoPlayer.style.width,\n            height: videoPlayer.style.height,\n            visibility: videoPlayer.style.visibility\n          },\n          parentElement: videoPlayer.parentElement,\n          offsetWidth: videoPlayer.offsetWidth,\n          offsetHeight: videoPlayer.offsetHeight\n        });\n\n        // Force video to be visible\n        videoPlayer.style.setProperty('display', 'block', 'important');\n        videoPlayer.style.setProperty('visibility', 'visible', 'important');\n        videoPlayer.style.setProperty('opacity', '1', 'important');\n\n      } else {\n        console.error('âŒ Video player element not found!');\n        // Try to find any video elements on the page\n        const allVideos = document.querySelectorAll('video');\n        console.log('ğŸ” All video elements found:', allVideos.length);\n        allVideos.forEach((video, index) => {\n          console.log(`Video ${index}:`, {\n            id: video.id,\n            className: video.className,\n            src: video.src,\n            parentElement: video.parentElement\n          });\n        });\n      }\n\n\n\n    }, 100); // Small delay to ensure DOM is ready\n\n    return () => {\n      clearTimeout(timer);\n      // styleIntervalä¼šåœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†\n    };\n  }, []);\n\n  return (\n    <>\n      <style jsx>{`\n        :global(.nsaid-active-button) {\n          background: #1e40af !important;\n          color: #ffffff !important;\n          cursor: pointer !important;\n          opacity: 1 !important;\n          pointer-events: auto !important;\n          border: 2px solid #1d4ed8 !important;\n          padding: 0.625rem 1.25rem !important;\n          border-radius: 0.5rem !important;\n          font-weight: 700 !important;\n          transform: none !important;\n          transition: all 0.2s !important;\n          box-shadow: 0 2px 8px rgba(30, 64, 175, 0.3) !important;\n          outline: none !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;\n          letter-spacing: 0.025em !important;\n        }\n\n        :global(.nsaid-active-button:hover) {\n          background: #1e3a8a !important;\n          transform: translateY(-1px) !important;\n          box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4) !important;\n        }\n\n        :global(.nsaid-disabled-button) {\n          background: #374151 !important;\n          color: #ffffff !important;\n          cursor: not-allowed !important;\n          opacity: 0.7 !important;\n          pointer-events: none !important;\n          border: 2px solid #4b5563 !important;\n          padding: 0.625rem 1.25rem !important;\n          border-radius: 0.5rem !important;\n          font-weight: 700 !important;\n          transform: none !important;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n          outline: none !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;\n          letter-spacing: 0.025em !important;\n        }\n\n        :global(#nsaidNextButton) {\n          background: #1e40af !important;\n          color: #ffffff !important;\n          cursor: pointer !important;\n          opacity: 1 !important;\n          pointer-events: auto !important;\n          border: 2px solid #1d4ed8 !important;\n          padding: 0.625rem 1.25rem !important;\n          border-radius: 0.5rem !important;\n          font-weight: 700 !important;\n          transform: none !important;\n          transition: all 0.2s !important;\n          box-shadow: 0 2px 8px rgba(30, 64, 175, 0.3) !important;\n          outline: none !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;\n          letter-spacing: 0.025em !important;\n        }\n\n        :global(#nsaidNextButton:hover) {\n          background: #1e3a8a !important;\n          transform: translateY(-1px) !important;\n          box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4) !important;\n        }\n\n        :global(#nsaidPrevButton) {\n          background: #374151 !important;\n          color: #ffffff !important;\n          cursor: not-allowed !important;\n          opacity: 0.7 !important;\n          pointer-events: none !important;\n          border: 2px solid #4b5563 !important;\n          padding: 0.625rem 1.25rem !important;\n          border-radius: 0.5rem !important;\n          font-weight: 700 !important;\n          transform: none !important;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n          outline: none !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;\n          letter-spacing: 0.025em !important;\n        }\n\n        :global(#nsaidAnimationPlayer) {\n          display: block !important;\n          width: 100% !important;\n          height: auto !important;\n          border-radius: 0.5rem !important;\n          opacity: 1 !important;\n          position: relative !important;\n          z-index: 100 !important;\n        }\n\n        /* åŸºç¡€è§†é¢‘æ ·å¼ */\n        :global(.nsaid-animation-player) {\n          position: relative !important;\n          width: 100% !important;\n          height: auto !important;\n          border-radius: 0.5rem !important;\n          overflow: hidden !important;\n        }\n\n        /* å¼ºåˆ¶æŒ‰é’®æ ·å¼ - ä½¿ç”¨æ›´é«˜ä¼˜å…ˆçº§é€‰æ‹©å™¨ */\n        :global(.calculate-button),\n        :global(button.calculate-button),\n        :global(.nsaid-controls button),\n        :global(.nsaid-controls .btn),\n        :global(button[class*=\"nsaid\"]),\n        :global(.btn[class*=\"nsaid\"]),\n        :global(#calculate-dose-button),\n        :global(button#calculate-dose-button) {\n          background: #1e40af !important;\n          background-color: #1e40af !important;\n          background-image: none !important;\n          color: #ffffff !important;\n          border: 2px solid #1d4ed8 !important;\n          border-radius: 0.5rem !important;\n          padding: 0.625rem 1.25rem !important;\n          font-weight: 700 !important;\n          cursor: pointer !important;\n          transition: all 0.2s !important;\n          opacity: 1 !important;\n          pointer-events: auto !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;\n          letter-spacing: 0.025em !important;\n          box-shadow: 0 2px 8px rgba(30, 64, 175, 0.3) !important;\n          z-index: 10 !important;\n          position: relative !important;\n          display: inline-block !important;\n          text-decoration: none !important;\n        }\n\n        /* ç‰¹åˆ«é’ˆå¯¹è®¡ç®—æŒ‰é’®çš„å¼ºåˆ¶æ ·å¼ */\n        :global(#calculate-dose-button) {\n          background: #1e40af !important;\n          background-color: #1e40af !important;\n          background-image: none !important;\n          color: #ffffff !important;\n          border: 2px solid #1d4ed8 !important;\n          border-radius: 0.5rem !important;\n          padding: 0.5rem 1rem !important;\n          font-weight: 700 !important;\n          cursor: pointer !important;\n          transition: all 0.2s !important;\n          opacity: 1 !important;\n          pointer-events: auto !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;\n          letter-spacing: 0.025em !important;\n          box-shadow: 0 2px 8px rgba(30, 64, 175, 0.3) !important;\n          z-index: 100 !important;\n          position: relative !important;\n          display: inline-block !important;\n          text-decoration: none !important;\n          width: 100% !important;\n        }\n\n        /* æŒ‰é’®æ‚¬åœæ•ˆæœ */\n        :global(.nsaid-controls button:hover),\n        :global(.nsaid-controls .btn:hover) {\n          background: #1e3a8a !important;\n          transform: translateY(-1px) !important;\n          box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4) !important;\n        }\n\n        /* ç¦ç”¨çŠ¶æ€æŒ‰é’® */\n        :global(.nsaid-controls button:disabled),\n        :global(.nsaid-controls .btn:disabled) {\n          background: #374151 !important;\n          color: #ffffff !important;\n          cursor: not-allowed !important;\n          opacity: 0.7 !important;\n          pointer-events: none !important;\n          border: 2px solid #4b5563 !important;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n        }\n\n        /* åœºæ™¯æè¿°åŒºåŸŸèƒŒæ™¯ä¿®å¤ */\n        :global(.nsaid-scene-description),\n        :global([class*=\"scene\"]),\n        :global([class*=\"description\"]) {\n          background: white !important;\n          background-color: white !important;\n          color: #374151 !important;\n        }\n      `}</style>\n      <div\n        className=\"nsaid-article-content\"\n        dangerouslySetInnerHTML={{\n          __html: processNSAIDContent(content)\n        }}\n      />\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/NSAIDContentSimple.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/NSAIDInteractive.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is defined but never used.","line":10,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":50}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport Script from 'next/script';\n\ninterface NSAIDInteractiveProps {\n  locale: 'en' | 'zh';\n}\n\nexport default function NSAIDInteractive({ locale }: NSAIDInteractiveProps) {\n  const [isClient, setIsClient] = useState(false);\n\n  useEffect(() => {\n    console.log('ğŸ”§ NSAIDInteractive component mounted');\n    setIsClient(true);\n\n    // Load the CSS file dynamically\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = '/styles/nsaid-interactive.css';\n    document.head.appendChild(link);\n\n    console.log('âœ… CSS file loaded');\n\n    return () => {\n      // Cleanup: remove the CSS link when component unmounts\n      if (document.head.contains(link)) {\n        document.head.removeChild(link);\n      }\n    };\n  }, []);\n\n  // Only render scripts on client side to avoid preloading\n  if (!isClient) {\n    return null;\n  }\n\n  return (\n    <>\n      <Script\n        src=\"https://unpkg.com/lucide@latest\"\n        strategy=\"lazyOnload\"\n        onLoad={() => console.log('âœ… Lucide script loaded')}\n        onError={(e) => console.error('âŒ Lucide script failed:', e)}\n      />\n      <Script\n        src=\"/scripts/nsaid-interactive.js\"\n        strategy=\"lazyOnload\"\n        onLoad={() => console.log('âœ… NSAID interactive script loaded')}\n        onError={(e) => console.error('âŒ NSAID interactive script failed:', e)}\n      />\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/NavigationTabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":11,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useTranslations } from 'next-intl';\nimport Link from 'next/link';\n\ninterface NavigationTabsProps {\n  locale: string;\n}\n\nexport default function NavigationTabs({ locale }: NavigationTabsProps) {\n  const t = useTranslations('navigationTabs');\n\n  return (\n    <section className=\"flex justify-center\">\n      <div className=\"bg-neutral-100 p-1 rounded-lg inline-flex\">\n        <Link\n          href={`/${locale}/downloads`}\n          className=\"px-6 py-2 rounded-md text-neutral-700 hover:bg-white hover:shadow-sm transition-all\"\n        >\n          {locale === 'en' ? 'ğŸ“š Articles' : 'ğŸ“š ä¸“ä¸šæ–‡ç« '}\n        </Link>\n        <Link\n          href={`/${locale}/downloads`}\n          className=\"px-6 py-2 rounded-md text-neutral-700 hover:bg-white hover:shadow-sm transition-all\"\n        >\n          {locale === 'en' ? 'ğŸ“¥ PDF Downloads' : 'ğŸ“¥ PDFä¸‹è½½'}\n        </Link>\n      </div>\n    </section>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/NotificationButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/OptimizedMobilePDFCenter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Star' is defined but never used.","line":4,"column":81,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":85},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Zap' is defined but never used.","line":4,"column":87,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":90},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isEmergencyMode' is assigned a value but never used.","line":43,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4395,4398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4395,4398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4469,4472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4469,4472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":195,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":195,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'generateCategoryResources', 'getCategorySubtitle', and 'getCategoryTitle'. Either include them or remove the dependency array.","line":374,"column":7,"nodeType":"ArrayExpression","endLine":374,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [generateCategoryResources, getCategorySubtitle, getCategoryTitle]","fix":{"range":[20583,20594],"text":"[generateCategoryResources, getCategorySubtitle, getCategoryTitle]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'semanticSearch' is assigned a value but never used.","line":377,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":377,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'locale'. Either include it or remove the dependency array.","line":467,"column":6,"nodeType":"ArrayExpression","endLine":467,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [locale, searchTerm]","fix":{"range":[24507,24519],"text":"[locale, searchTerm]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":504,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":504,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26377,26380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26377,26380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 't'. Either include it or remove the dependency array.","line":568,"column":6,"nodeType":"ArrayExpression","endLine":568,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [searchTerm, optimizedCategories, t]","fix":{"range":[28155,28188],"text":"[searchTerm, optimizedCategories, t]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getPriorityColor' is assigned a value but never used.","line":594,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":594,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getPDFFilename' is assigned a value but never used.","line":649,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":649,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categoryColor' is defined but never used.","line":713,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":713,"endColumn":50}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Search, Clock, AlertCircle, Brain, TrendingUp, Download, ExternalLink, Star, Zap, Eye } from 'lucide-react';\nimport { useTranslations } from 'next-intl';\nimport { Locale } from '@/i18n';\nimport { PDF_RESOURCES, getPDFResourceById } from '@/config/pdfResources';\nimport { SITE_CONFIG } from '@/config/site.config';\n\ninterface OptimizedMobilePDFCenterProps {\n  locale: Locale;\n}\n\ninterface Resource {\n  type: 'article' | 'pdf';\n  title: string;\n  readTime?: string;\n  icon?: string;\n  size?: string;\n  priority: 'highest' | 'high' | 'medium' | 'low';\n  tags: string[];\n  id: string;\n  slug?: string;\n}\n\ninterface Category {\n  id: string;\n  title: string;\n  subtitle: string;\n  icon: React.ReactNode;\n  color: string;\n  bgColor: string;\n  borderColor: string;\n  priority: string;\n  loadPriority: number;\n  resources: Resource[];\n}\n\nconst OptimizedMobilePDFCenter: React.FC<OptimizedMobilePDFCenterProps> = ({ locale }) => {\n  const [activeCategory, setActiveCategory] = useState('immediate');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loadedCategories, setLoadedCategories] = useState(['immediate']); // æ¸è¿›å¼åŠ è½½\n  const [isEmergencyMode, setIsEmergencyMode] = useState(false);\n  const [currentPlaceholderIndex, setCurrentPlaceholderIndex] = useState(0);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  // è·å–ç¿»è¯‘å‡½æ•° - ä½¿ç”¨æ­£ç¡®çš„ç¿»è¯‘é”®\n  const t = useTranslations('simplePdfCenter');\n  const articlesT = useTranslations('articlesPage.categories');\n\n  // æ™ºèƒ½æœç´¢æç¤ºå…³é”®è¯ - åŸºäº6ä¸ªæ ¸å¿ƒå…³é”®è¯å’Œç”¨æˆ·å¸¸ç”¨æœç´¢è¯\n  const searchSuggestions = useMemo(() => {\n    if (locale === 'zh') {\n      return [\n        // 6ä¸ªæ ¸å¿ƒå…³é”®è¯ï¼ˆç”¨æˆ·æœ€å¸¸æœç´¢ä½†å®¹æ˜“å¤±è´¥ï¼‰\n        \"çƒ­æ•·\", \"æ•·çƒ­æ°´è¢‹\", \"æš–å®å®\", \"æŒ‰æ‘©\", \"æ‰è‚šå­\", \"æ­¢ç—›è¯\",\n        // ä¸“ä¸šæœ¯è¯­ï¼ˆå†…å®¹å®é™…æ ‡ç­¾ï¼‰\n        \"çƒ­ç–—æ³•\", \"ç©´ä½æŒ‰å‹\", \"NSAID\", \"å¸ƒæ´›èŠ¬\", \"è˜æ™®ç”Ÿ\",\n        // ç—‡çŠ¶æè¿°\n        \"ç—›ç»\", \"ç»æœŸç–¼ç—›\", \"è…¹éƒ¨ç–¼ç—›\", \"è…°é…¸èƒŒç—›\", \"å¤´ç—›\",\n        // è§£å†³æ–¹æ¡ˆ\n        \"å¿«é€Ÿç¼“è§£\", \"ç´§æ€¥å¤„ç†\", \"é¢„é˜²æªæ–½\", \"è¥å…»è°ƒç†\", \"è¿åŠ¨ç–—æ³•\"\n      ];\n    } else {\n      return [\n        // 6ä¸ªæ ¸å¿ƒå…³é”®è¯çš„è‹±æ–‡ç‰ˆæœ¬\n        \"heat therapy\", \"hot water bottle\", \"warm patch\", \"massage\", \"belly rub\", \"painkiller\",\n        // ä¸“ä¸šæœ¯è¯­\n        \"heat treatment\", \"acupressure\", \"NSAID\", \"ibuprofen\", \"naproxen\",\n        // ç—‡çŠ¶æè¿°\n        \"menstrual pain\", \"period pain\", \"abdominal pain\", \"back pain\", \"headache\",\n        // è§£å†³æ–¹æ¡ˆ\n        \"quick relief\", \"emergency care\", \"prevention\", \"nutrition\", \"exercise\"\n      ];\n    }\n  }, [locale]);\n\n  // åŠ¨æ€å ä½ç¬¦æ–‡æœ¬\n  const dynamicPlaceholder = useMemo(() => {\n    const placeholders = [\n      locale === 'zh' ? 'æœç´¢èµ„æº...' : 'Search resources...',\n      locale === 'zh' ? `è¯•è¯•\"${searchSuggestions[currentPlaceholderIndex]}\"` : `Try \"${searchSuggestions[currentPlaceholderIndex]}\"`,\n      locale === 'zh' ? 'çƒ­æ•·ã€æŒ‰æ‘©ã€æ­¢ç—›è¯...' : 'Heat therapy, massage, pain relief...',\n      locale === 'zh' ? 'ç—›ç»ã€ç»æœŸç–¼ç—›ã€å¿«é€Ÿç¼“è§£...' : 'Menstrual pain, period pain, quick relief...'\n    ];\n    return placeholders[currentPlaceholderIndex % placeholders.length];\n  }, [currentPlaceholderIndex, searchSuggestions, locale]);\n\n  // å ä½ç¬¦è½®æ’­æ•ˆæœ\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentPlaceholderIndex(prev => (prev + 1) % searchSuggestions.length);\n    }, 3000); // æ¯3ç§’åˆ‡æ¢ä¸€æ¬¡\n\n    return () => clearInterval(interval);\n  }, [searchSuggestions.length]);\n\n  // æœç´¢å»ºè®®è¿‡æ»¤\n  const filteredSuggestions = useMemo(() => {\n    if (!searchTerm || searchTerm.length < 1) return [];\n    \n    return searchSuggestions\n      .filter(suggestion => \n        suggestion.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        searchTerm.toLowerCase().includes(suggestion.toLowerCase())\n      )\n      .slice(0, 6); // æœ€å¤šæ˜¾ç¤º6ä¸ªå»ºè®®\n  }, [searchTerm, searchSuggestions]);\n\n  // ç±»åˆ«æ ‡é¢˜ç¿»è¯‘ - ä½¿ç”¨æ­£ç¡®çš„ç¿»è¯‘é”®\n  const getCategoryTitle = (key: string) => {\n    const titles = {\n      immediate: t('categories.immediate'),\n      preparation: t('categories.preparation'),\n      learning: t('categories.learning'),\n      longterm: t('categories.management')\n    };\n    return titles[key as keyof typeof titles] || key;\n  };\n\n  const getCategorySubtitle = (key: string) => {\n    const subtitles = {\n      immediate: t('subtitles.immediate'),\n      preparation: t('subtitles.preparation'),\n      learning: t('subtitles.learning'),\n      longterm: t('subtitles.management')\n    };\n    return subtitles[key as keyof typeof subtitles] || key;\n  };\n\n  // ä»ç»Ÿä¸€é…ç½®è·å–PDFèµ„æºå¹¶è½¬æ¢ä¸ºç»„ä»¶æ ¼å¼\n  const convertPDFToResource = (pdfResource: any): Resource => {\n    // æ ¹æ®è¯­è¨€è·å–æ­£ç¡®çš„æ ‡é¢˜\n    const getTitle = (pdfResource: any) => {\n      if (pdfResource.versions && pdfResource.versions[locale]) {\n        return pdfResource.versions[locale].title;\n      }\n      return pdfResource.title || pdfResource.titleKey || (locale === 'zh' ? 'PDFèµ„æº' : 'PDF Resource');\n    };\n\n    // æ ¹æ®PDFç±»å‹è®¾ç½®ä¸åŒçš„æ ‡ç­¾\n    const getPDFTags = (id: string): string[] => {\n      const tagMap: Record<string, string[]> = {\n        // çƒ­æ•·ç›¸å…³\n        'pain-tracking-form': [t('tags.heatTherapy'), t('tags.heatTherapyMethod'), t('tags.heatTherapyTreatment'), t('tags.warmWaterBottle'), t('tags.warmPatch'), t('tags.pain'), t('tags.relief')],\n        'campus-emergency-checklist': [t('tags.heatTherapy'), t('tags.heatTherapyMethod'), t('tags.emergency'), t('tags.pain'), t('tags.relief')],\n        'specific-menstrual-pain-management-guide': [t('tags.heatTherapy'), t('tags.heatTherapyMethod'), t('tags.management'), t('tags.relief')],\n        \n        // æŒ‰æ‘©ç›¸å…³\n        'natural-therapy-assessment': [t('tags.massage'), t('tags.acupressure'), t('tags.bellyRub'), t('tags.abdominalMassage'), t('tags.menstrualMassage'), t('tags.painMassage')],\n        'hormone-testing-guide': [t('tags.massage'), t('tags.acupressure'), t('tags.medical'), t('tags.examination')],\n        'nutritional-analysis': [t('tags.massage'), t('tags.acupressure'), t('tags.nutrition'), t('tags.health')],\n        'exercise-program': [t('tags.massage'), t('tags.acupressure'), t('tags.exercise'), t('tags.exercise')],\n        \n        // æ­¢ç—›è¯ç›¸å…³\n        'reading-list-pdf': [t('tags.painkiller'), t('tags.nsaid'), t('tags.medication'), t('tags.learning'), t('tags.management'), t('tags.communication')],\n        'herbal-tea-guide': [t('tags.painkiller'), t('tags.medication'), t('tags.medication'), t('tags.medication'), t('tags.communication')],\n        'personal-profile-template': [t('tags.painkiller'), t('tags.medication'), t('tags.management'), t('tags.record'), t('tags.communication')],\n        'anti-inflammatory-guide': [t('tags.painkiller'), t('tags.nsaid'), t('tags.medication'), t('tags.medication'), t('tags.communication')],\n        \n        // å…¶ä»–\n        'healthy-habits-checklist': [t('tags.nutrition'), t('tags.health'), t('tags.habit'), t('tags.preparation')],\n        'menstrual-cycle-nutrition-plan': [t('tags.nutrition'), t('tags.diet'), t('tags.plan'), t('tags.preparation')],\n        'magnesium-gut-health-guide': [t('tags.nutrition'), t('tags.health'), t('tags.learning')],\n        'zhan-zhuang-baduanjin-illustrated-guide': [t('tags.exercise'), t('tags.exercise'), t('tags.baduanjin'), t('tags.preparation')]\n      };\n      \n      return tagMap[id] || [t('tags.pain'), t('tags.relief')];\n    };\n\n    return {\n      type: 'pdf' as const,\n      title: getTitle(pdfResource), // ç›´æ¥ä½¿ç”¨PDFæ ‡é¢˜\n      icon: pdfResource.icon,\n      size: `${pdfResource.fileSize}KB`,\n      priority: pdfResource.featured ? 'highest' : 'high',\n      tags: getPDFTags(pdfResource.id), // ä½¿ç”¨åŠ¨æ€æ ‡ç­¾\n      id: pdfResource.id\n    };\n  };\n\n  // åˆ›å»ºæ–‡ç« èµ„æºçš„ç¿»è¯‘å‡½æ•° - ä½¿ç”¨æ­£ç¡®çš„ç¿»è¯‘é”®\n  const createArticleResource = (\n    categoryKey: string,\n    articleKey: string,\n    readTimeMinutes: number,\n    priority: 'highest' | 'high' | 'medium' | 'low',\n    tags: string[],\n    slug: string\n  ): Resource => {\n    // ä½¿ç”¨å®‰å…¨çš„ç¿»è¯‘å‡½æ•°ï¼Œå¦‚æœç¿»è¯‘é”®ä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼\n    let title: string;\n    try {\n      title = articlesT(`${categoryKey}.articles.${articleKey}`);\n    } catch (error) {\n      // å¦‚æœç¿»è¯‘é”®ä¸å­˜åœ¨ï¼Œä½¿ç”¨slugä½œä¸ºæ ‡é¢˜\n      title = slug.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n    }\n    \n    return {\n    type: 'article' as const,\n      title,\n    readTime: locale === 'zh' ? `${readTimeMinutes}åˆ†é’Ÿ` : `${readTimeMinutes} min read`,\n    priority,\n    tags,\n    id: slug,\n    slug\n    };\n  };\n\n  // è®¡ç®—æ¯ä¸ªåˆ†ç±»çš„å®é™…èµ„æºæ•°é‡\n  const getCategoryResourceCount = (categoryId: string) => {\n    const totalResources = SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources;\n    // æŒ‰æ¯”ä¾‹åˆ†é…èµ„æºåˆ°å„ä¸ªåˆ†ç±»\n    const distribution = {\n      immediate: Math.round(totalResources * 0.25), // 25%\n      preparation: Math.round(totalResources * 0.25), // 25%\n      learning: Math.round(totalResources * 0.35), // 35%\n      management: Math.round(totalResources * 0.15) // 15%\n    };\n    return distribution[categoryId as keyof typeof distribution] || 0;\n  };\n\n  // åŠ¨æ€ç”Ÿæˆåˆ†ç±»èµ„æº\n  const generateCategoryResources = (categoryId: string) => {\n    const targetCount = getCategoryResourceCount(categoryId);\n    const baseResources = {\n      immediate: [\n        createArticleResource('immediateRelief', 'fiveMinuteRelief', 5, 'highest', [t('tags.pain'), t('tags.relief'), t('tags.quick')], '5-minute-period-pain-relief'),\n        createArticleResource('understandingEducation', 'painDifferential', 25, 'highest', [t('tags.examination'), t('tags.health'), t('tags.diagnosis')], 'menstrual-pain-vs-other-abdominal-pain-guide'),\n        createArticleResource('immediateRelief', 'heatTherapy', 8, 'high', [t('tags.heatTherapy'), t('tags.method'), t('tags.science')], 'heat-therapy-complete-guide'),\n        createArticleResource('naturalTherapies', 'physicalTherapy', 12, 'high', [t('tags.pain'), t('tags.health'), t('tags.relief')], 'menstrual-back-pain-comprehensive-care-guide'),\n        createArticleResource('naturalTherapies', 'traditionalMethods', 12, 'high', [t('tags.medication'), t('tags.medication'), t('tags.relief')], 'ginger-menstrual-pain-relief-guide'),\n        ...PDF_RESOURCES.filter(pdf =>\n          ['pain-tracking-form', 'campus-emergency-checklist', 'specific-menstrual-pain-management-guide'].includes(pdf.id)\n        ).map(convertPDFToResource)\n      ],\n      preparation: [\n        createArticleResource('nutritionHealth', 'preventiveCare', 22, 'highest', [t('tags.prevention'), t('tags.cycle'), t('tags.evidenceBased')], 'menstrual-preventive-care-complete-plan'),\n        createArticleResource('nutritionHealth', 'sleepQuality', 20, 'highest', [t('tags.health'), t('tags.plan'), t('tags.health')], 'comprehensive-menstrual-sleep-quality-guide'),\n        createArticleResource('nutritionHealth', 'stressManagement', 22, 'highest', [t('tags.management'), t('tags.health'), t('tags.management')], 'menstrual-stress-management-complete-guide'),\n        createArticleResource('naturalTherapies', 'zhanZhuang', 18, 'high', [t('tags.exercise'), t('tags.baduanjin'), t('tags.relief')], 'zhan-zhuang-baduanjin-for-menstrual-pain-relief'),\n        ...PDF_RESOURCES.filter(pdf =>\n          ['healthy-habits-checklist', 'menstrual-cycle-nutrition-plan', 'magnesium-gut-health-guide', 'zhan-zhuang-baduanjin-illustrated-guide'].includes(pdf.id)\n        ).map(convertPDFToResource)\n      ],\n      learning: [\n        createArticleResource('understandingEducation', 'lifecycleAnalysis', 24, 'highest', [t('tags.cycle'), t('tags.cycle'), t('tags.management')], 'womens-lifecycle-menstrual-pain-analysis'),\n        createArticleResource('understandingEducation', 'researchProgress2024', 18, 'highest', [t('tags.evidenceBased'), t('tags.research'), t('tags.medication'), t('tags.painkiller'), t('tags.nsaid')], 'menstrual-pain-research-progress-2024'),\n        createArticleResource('medicalGuidance', 'nsaidProfessionalGuide', 25, 'highest', [t('tags.nsaid'), t('tags.painkiller'), t('tags.medication'), t('tags.medication'), t('tags.medication')], 'nsaid-menstrual-pain-professional-guide'),\n        {\n          type: 'article' as const,\n          title: locale === 'zh' ? 'ç—›ç»å®‰å…¨ç”¨è¯å…¨æŒ‡å—ï¼šå¸ƒæ´›èŠ¬/è˜æ™®ç”Ÿç­‰NSAIDsä½¿ç”¨è§„èŒƒ' : 'Complete Safe Medication Guide for Dysmenorrhea: Ibuprofen/Naproxen and Other NSAIDs Usage Guidelines',\n          readTime: locale === 'zh' ? '20åˆ†é’Ÿ' : '20 min read',\n          priority: 'highest' as const,\n          tags: [t('tags.nsaid'), t('tags.painkiller'), t('tags.ibuprofen'), t('tags.medication'), t('tags.medication'), t('tags.medication')],\n          id: 'medication-guide',\n          slug: 'medication-guide'\n        },\n        createArticleResource('understandingEducation', 'painDifferential', 25, 'highest', [t('tags.diagnosis'), t('tags.diagnosis'), t('tags.emergency')], 'menstrual-pain-vs-other-abdominal-pain-guide'),\n        createArticleResource('understandingEducation', 'understandingCycle', 25, 'high', [t('tags.cycle'), t('tags.education'), t('tags.knowledge')], 'understanding-your-cycle'),\n        createArticleResource('understandingEducation', 'insuranceCoverage', 25, 'high', [t('tags.medical'), t('tags.medical'), t('tags.medical'), t('tags.communication')], 'us-menstrual-pain-insurance-coverage-guide'),\n        createArticleResource('medicalGuidance', 'whenToSeeDoctor', 10, 'highest', [t('tags.seeDoctor'), t('tags.emergency'), t('tags.health'), t('tags.communication')], 'when-to-see-doctor-period-pain'),\n        createArticleResource('medicalGuidance', 'medicalCare', 15, 'high', [t('tags.medical'), t('tags.health'), t('tags.guide'), t('tags.communication')], 'when-to-seek-medical-care-comprehensive-guide'),\n        ...PDF_RESOURCES.filter(pdf =>\n          ['natural-therapy-assessment', 'hormone-testing-guide', 'nutritional-analysis', 'exercise-program'].includes(pdf.id)\n        ).map(convertPDFToResource)\n      ],\n      management: [\n        createArticleResource('specializedGuides', 'readingList', 35, 'medium', ['ç»¼åˆ', 'å› ç´ ', 'å½±å“'], 'recommended-reading-list'),\n        createArticleResource('naturalTherapies', 'herbalTea', 15, 'low', ['è‰è¯', 'èŒ¶', 'é…æ–¹'], 'herbal-tea-menstrual-pain-relief'),\n        createArticleResource('naturalTherapies', 'traditionalMethods', 25, 'low', ['å…¨çƒ', 'ä¼ ç»Ÿ', 'ç°ä»£'], 'global-traditional-menstrual-pain-relief'),\n        createArticleResource('understandingEducation', 'understandingCycle', 20, 'medium', ['æ¡£æ¡ˆ', 'è®°å½•', 'ç®¡ç†'], 'personal-menstrual-health-profile')\n      ]\n    };\n\n    const resources = baseResources[categoryId as keyof typeof baseResources] || [];\n    const additionalResources: Resource[] = [];\n    \n    // å¦‚æœåŸºç¡€èµ„æºæ•°é‡ä¸è¶³ï¼Œæ·»åŠ æ›´å¤šèµ„æºæ¥è¾¾åˆ°ç›®æ ‡æ•°é‡\n    if (resources.length < targetCount) {\n      const allArticles = [\n        createArticleResource('immediateRelief', 'fiveMinuteRelief', 5, 'highest', [t('tags.pain'), t('tags.relief'), t('tags.quick')], '5-minute-period-pain-relief'),\n        createArticleResource('understandingEducation', 'painDifferential', 25, 'highest', [t('tags.examination'), t('tags.health'), t('tags.diagnosis')], 'menstrual-pain-vs-other-abdominal-pain-guide'),\n        createArticleResource('immediateRelief', 'heatTherapy', 8, 'high', [t('tags.heatTherapy'), t('tags.method'), t('tags.science')], 'heat-therapy-complete-guide'),\n        createArticleResource('naturalTherapies', 'physicalTherapy', 12, 'high', [t('tags.pain'), t('tags.health'), t('tags.relief')], 'menstrual-back-pain-comprehensive-care-guide'),\n        createArticleResource('naturalTherapies', 'traditionalMethods', 12, 'high', [t('tags.medication'), t('tags.medication'), t('tags.relief')], 'ginger-menstrual-pain-relief-guide'),\n        createArticleResource('nutritionHealth', 'preventiveCare', 22, 'highest', [t('tags.prevention'), t('tags.cycle'), t('tags.evidenceBased')], 'menstrual-preventive-care-complete-plan'),\n        createArticleResource('nutritionHealth', 'sleepQuality', 20, 'highest', [t('tags.health'), t('tags.plan'), t('tags.health')], 'comprehensive-menstrual-sleep-quality-guide'),\n        createArticleResource('nutritionHealth', 'stressManagement', 22, 'highest', [t('tags.management'), t('tags.health'), t('tags.management')], 'menstrual-stress-management-complete-guide'),\n        createArticleResource('naturalTherapies', 'zhanZhuang', 18, 'high', [t('tags.exercise'), t('tags.baduanjin'), t('tags.relief')], 'zhan-zhuang-baduanjin-for-menstrual-pain-relief'),\n        createArticleResource('understandingEducation', 'lifecycleAnalysis', 24, 'highest', [t('tags.cycle'), t('tags.cycle'), t('tags.management')], 'womens-lifecycle-menstrual-pain-analysis'),\n        createArticleResource('understandingEducation', 'researchProgress2024', 18, 'highest', [t('tags.evidenceBased'), t('tags.research'), t('tags.medication'), t('tags.painkiller'), t('tags.nsaid')], 'menstrual-pain-research-progress-2024'),\n        createArticleResource('medicalGuidance', 'nsaidProfessionalGuide', 25, 'highest', [t('tags.nsaid'), t('tags.painkiller'), t('tags.medication'), t('tags.medication'), t('tags.medication')], 'nsaid-menstrual-pain-professional-guide'),\n        createArticleResource('understandingEducation', 'painDifferential', 25, 'highest', [t('tags.diagnosis'), t('tags.diagnosis'), t('tags.emergency')], 'menstrual-pain-vs-other-abdominal-pain-guide'),\n        createArticleResource('understandingEducation', 'understandingCycle', 25, 'high', [t('tags.cycle'), t('tags.education'), t('tags.knowledge')], 'understanding-your-cycle'),\n        createArticleResource('understandingEducation', 'insuranceCoverage', 25, 'high', [t('tags.medical'), t('tags.medical'), t('tags.medical'), t('tags.communication')], 'us-menstrual-pain-insurance-coverage-guide'),\n        createArticleResource('medicalGuidance', 'whenToSeeDoctor', 10, 'highest', [t('tags.seeDoctor'), t('tags.emergency'), t('tags.health'), t('tags.communication')], 'when-to-see-doctor-period-pain'),\n        createArticleResource('medicalGuidance', 'medicalCare', 15, 'high', [t('tags.medical'), t('tags.health'), t('tags.guide'), t('tags.communication')], 'when-to-seek-medical-care-comprehensive-guide'),\n        createArticleResource('specializedGuides', 'readingList', 35, 'medium', ['ç»¼åˆ', 'å› ç´ ', 'å½±å“'], 'recommended-reading-list'),\n        createArticleResource('naturalTherapies', 'herbalTea', 15, 'low', ['è‰è¯', 'èŒ¶', 'é…æ–¹'], 'herbal-tea-menstrual-pain-relief'),\n        createArticleResource('naturalTherapies', 'traditionalMethods', 25, 'low', ['å…¨çƒ', 'ä¼ ç»Ÿ', 'ç°ä»£'], 'global-traditional-menstrual-pain-relief'),\n        createArticleResource('understandingEducation', 'understandingCycle', 20, 'medium', ['æ¡£æ¡ˆ', 'è®°å½•', 'ç®¡ç†'], 'personal-menstrual-health-profile')\n      ];\n      \n      // æ·»åŠ PDFèµ„æº\n      const allPDFs = PDF_RESOURCES.map(convertPDFToResource);\n      \n      // åˆå¹¶æ‰€æœ‰èµ„æº\n      const allResources = [...allArticles, ...allPDFs];\n      \n      // é€‰æ‹©é¢å¤–çš„èµ„æºæ¥è¾¾åˆ°ç›®æ ‡æ•°é‡ - ä½¿ç”¨ç¨³å®šçš„æ’åºé¿å…æ°´åˆé”™è¯¯\n      const needed = targetCount - resources.length;\n      // ä½¿ç”¨ç¨³å®šçš„æ’åºè€Œä¸æ˜¯éšæœºæ’åºï¼Œé¿å…æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¸ä¸€è‡´\n      const sorted = allResources\n        .filter(resource => resource.id) // è¿‡æ»¤æ‰æ²¡æœ‰idçš„èµ„æº\n        .sort((a, b) => a.id!.localeCompare(b.id!));\n      additionalResources.push(...sorted.slice(0, needed));\n    }\n    \n    return [...resources, ...additionalResources].slice(0, targetCount);\n  };\n\n  // ä¼˜åŒ–åçš„å†…å®¹åˆ†ç±» - ä½¿ç”¨åŠ¨æ€ç”Ÿæˆçš„èµ„æºï¼Œä½¿ç”¨useMemoç¼“å­˜é¿å…æ°´åˆé”™è¯¯\n  const optimizedCategories: Record<string, Category> = useMemo(() => ({\n    immediate: {\n      id: 'immediate',\n      title: getCategoryTitle('immediate'),\n      subtitle: getCategorySubtitle('immediate'),\n      icon: <AlertCircle className=\"w-6 h-6\" />,\n      color: 'from-red-500 to-red-600',\n      bgColor: 'bg-red-50',\n      borderColor: 'border-red-200',\n      priority: 'critical',\n      loadPriority: 1,\n      resources: generateCategoryResources('immediate')\n    },\n    preparation: {\n      id: 'preparation',\n      title: getCategoryTitle('preparation'),\n      subtitle: getCategorySubtitle('preparation'),\n      icon: <Clock className=\"w-6 h-6\" />,\n      color: 'from-orange-500 to-orange-600',\n      bgColor: 'bg-orange-50',\n      borderColor: 'border-orange-200',\n      priority: 'important',\n      loadPriority: 2,\n      resources: generateCategoryResources('preparation')\n    },\n    learning: {\n      id: 'learning',\n      title: getCategoryTitle('learning'),\n      subtitle: getCategorySubtitle('learning'),\n      icon: <Brain className=\"w-6 h-6\" />,\n      color: 'from-blue-500 to-blue-600',\n      bgColor: 'bg-blue-50',\n      borderColor: 'border-blue-200',\n      priority: 'normal',\n      loadPriority: 3,\n      resources: generateCategoryResources('learning')\n    },\n    management: {\n      id: 'management',\n      title: getCategoryTitle('longterm'),\n      subtitle: getCategorySubtitle('longterm'),\n      icon: <TrendingUp className=\"w-6 h-6\" />,\n      color: 'from-green-500 to-green-600',\n      bgColor: 'bg-green-50',\n      borderColor: 'border-green-200',\n      priority: 'low',\n      loadPriority: 4,\n      resources: generateCategoryResources('management')\n    }\n  }), [locale, t]);\n\n  // æ™ºèƒ½æœç´¢ç®—æ³•\n  const semanticSearch = useMemo(() => {\n    const urgentKeywords = locale === 'zh' ? [\n      // 6ä¸ªæ ¸å¿ƒå…³é”®è¯åŠå…¶åŒä¹‰è¯\n      \"çƒ­æ•·\", \"æ•·çƒ­æ°´è¢‹\", \"æš–å®å®\", \"æŒ‰æ‘©\", \"æ‰è‚šå­\", \"æ­¢ç—›è¯\",\n      // ä¸“ä¸šæœ¯è¯­æ˜ å°„\n      \"çƒ­ç–—æ³•\", \"çƒ­ç–—\", \"æ¸©çƒ­ç–—æ³•\", \"çƒ­æ•·ç–—æ³•\", \"çƒ­æ•·æ²»ç–—\",\n      // æŒ‰æ‘©ç›¸å…³\n      \"ç©´ä½æŒ‰å‹\", \"è‚Œè‚‰æ”¾æ¾\", \"è…¹éƒ¨æŒ‰æ‘©\", \"ç»æœŸæŒ‰æ‘©\", \"ç–¼ç—›æŒ‰æ‘©\",\n      // è¯ç‰©ç›¸å…³\n      \"NSAID\", \"éç”¾ä½“æŠ—ç‚è¯\", \"å¸ƒæ´›èŠ¬\", \"å¯¹ä¹™é…°æ°¨åŸºé…š\", \"æ­¢ç—›è¯ç‰©\",\n      // å…¶ä»–ç´§æ€¥ç›¸å…³è¯æ±‡\n      \"ç–¼\", \"ç—›\", \"ç°åœ¨\", \"é©¬ä¸Š\", \"ç¼“è§£\", \"å¿«é€Ÿ\", \"ç«‹å³\", \"ç´§æ€¥\", \"æ€¥\", \"ç–¼å¾—å‰å®³\"\n    ] : [\n      // 6ä¸ªæ ¸å¿ƒå…³é”®è¯çš„è‹±æ–‡ç‰ˆæœ¬\n      \"heat therapy\", \"hot water bottle\", \"warm patch\", \"massage\", \"belly rub\", \"painkiller\",\n      // ä¸“ä¸šæœ¯è¯­\n      \"heat treatment\", \"thermal therapy\", \"warm therapy\", \"heat application\", \"heat therapy treatment\",\n      // æŒ‰æ‘©ç›¸å…³\n      \"acupressure\", \"muscle relaxation\", \"abdominal massage\", \"menstrual massage\", \"pain massage\",\n      // è¯ç‰©ç›¸å…³\n      \"NSAID\", \"non-steroidal anti-inflammatory\", \"ibuprofen\", \"acetaminophen\", \"pain medication\",\n      // å…¶ä»–ç´§æ€¥ç›¸å…³è¯æ±‡\n      \"hurt\", \"pain\", \"now\", \"immediately\", \"relief\", \"quick\", \"urgent\", \"severe\", \"bad pain\"\n    ];\n    \n    const preparationKeywords = locale === 'zh' ? [\n      \"è¥å…»\", \"é¥®é£Ÿ\", \"è¿åŠ¨\", \"ä¹ æƒ¯\", \"å‡†å¤‡\", \"é¢„é˜²\", \"è®¡åˆ’\", \"æå‰\", \"å…»ç”Ÿ\", \"å¥åº·\", \"é”»ç‚¼\", \"ç‘œä¼½\", \"å…«æ®µé”¦\",\n      // çƒ­æ•·ç›¸å…³å‡†å¤‡\n      \"çƒ­æ•·å‡†å¤‡\", \"çƒ­æ•·å·¥å…·\", \"çƒ­æ•·ç”¨å“\", \"æš–å®å®å‡†å¤‡\",\n      // æŒ‰æ‘©ç›¸å…³å‡†å¤‡\n      \"æŒ‰æ‘©å‡†å¤‡\", \"æŒ‰æ‘©å·¥å…·\", \"æŒ‰æ‘©æŠ€å·§\", \"æŒ‰æ‘©å­¦ä¹ \"\n    ] : [\n      \"nutrition\", \"diet\", \"exercise\", \"habits\", \"preparation\", \"prevention\", \"planning\", \"advance\", \"wellness\", \"health\", \"workout\", \"yoga\", \"baduanjin\",\n      // çƒ­æ•·ç›¸å…³å‡†å¤‡\n      \"heat therapy preparation\", \"heat therapy tools\", \"heat therapy supplies\", \"warm patch preparation\",\n      // æŒ‰æ‘©ç›¸å…³å‡†å¤‡\n      \"massage preparation\", \"massage tools\", \"massage techniques\", \"massage learning\"\n    ];\n    \n    const learningKeywords = locale === 'zh' ? [\n      \"åŒ»ç”Ÿ\", \"åŒ»å­¦\", \"å°±åŒ»\", \"å‘¨æœŸ\", \"äº†è§£\", \"æŒ‡å—\", \"æ•™è‚²\", \"çŸ¥è¯†\", \"å­¦ä¹ \", \"ç ”ç©¶\", \"ç§‘å­¦\", \"å¾ªè¯\", \"è¯Šæ–­\", \"æ£€æŸ¥\",\n      // çƒ­æ•·å­¦ä¹ \n      \"çƒ­æ•·æ–¹æ³•\", \"çƒ­æ•·æŠ€å·§\", \"çƒ­æ•·åŸç†\", \"çƒ­æ•·å­¦ä¹ \",\n      // æŒ‰æ‘©å­¦ä¹ \n      \"æŒ‰æ‘©æ–¹æ³•\", \"æŒ‰æ‘©æŠ€å·§\", \"æŒ‰æ‘©åŸç†\", \"æŒ‰æ‘©å­¦ä¹ \",\n      // è¯ç‰©å­¦ä¹ \n      \"è¯ç‰©çŸ¥è¯†\", \"ç”¨è¯æŒ‡å—\", \"è¯ç‰©å¯¹æ¯”\", \"ç”¨è¯å­¦ä¹ \"\n    ] : [\n      \"doctor\", \"medical\", \"healthcare\", \"cycle\", \"understanding\", \"guide\", \"education\", \"knowledge\", \"learning\", \"research\", \"science\", \"evidence-based\", \"diagnosis\", \"examination\",\n      // çƒ­æ•·å­¦ä¹ \n      \"heat therapy methods\", \"heat therapy techniques\", \"heat therapy principles\", \"heat therapy learning\",\n      // æŒ‰æ‘©å­¦ä¹ \n      \"massage methods\", \"massage techniques\", \"massage principles\", \"massage learning\",\n      // è¯ç‰©å­¦ä¹ \n      \"medication knowledge\", \"medication guide\", \"medication comparison\", \"medication learning\"\n    ];\n    \n    const managementKeywords = locale === 'zh' ? [\n      \"é•¿æœŸ\", \"ç®¡ç†\", \"ç”Ÿæ´»\", \"æ¡£æ¡ˆ\", \"è®°å½•\", \"æŒç»­\", \"è·Ÿè¸ª\", \"ç›‘æµ‹\", \"åˆ†æ\", \"æŠ¥å‘Š\", \"æ¨¡æ¿\",\n      // çƒ­æ•·ç®¡ç†\n      \"çƒ­æ•·ç®¡ç†\", \"çƒ­æ•·è®°å½•\", \"çƒ­æ•·è®¡åˆ’\", \"çƒ­æ•·è·Ÿè¸ª\",\n      // æŒ‰æ‘©ç®¡ç†\n      \"æŒ‰æ‘©ç®¡ç†\", \"æŒ‰æ‘©è®°å½•\", \"æŒ‰æ‘©è®¡åˆ’\", \"æŒ‰æ‘©è·Ÿè¸ª\",\n      // è¯ç‰©ç®¡ç†\n      \"ç”¨è¯ç®¡ç†\", \"ç”¨è¯è®°å½•\", \"ç”¨è¯è®¡åˆ’\", \"ç”¨è¯è·Ÿè¸ª\"\n    ] : [\n      \"long-term\", \"management\", \"lifestyle\", \"profile\", \"records\", \"continuous\", \"tracking\", \"monitoring\", \"analysis\", \"reports\", \"templates\",\n      // çƒ­æ•·ç®¡ç†\n      \"heat therapy management\", \"heat therapy records\", \"heat therapy planning\", \"heat therapy tracking\",\n      // æŒ‰æ‘©ç®¡ç†\n      \"massage management\", \"massage records\", \"massage planning\", \"massage tracking\",\n      // è¯ç‰©ç®¡ç†\n      \"medication management\", \"medication records\", \"medication planning\", \"medication tracking\"\n    ];\n\n    if (!searchTerm) return null;\n\n    const term = searchTerm.toLowerCase();\n\n    if (urgentKeywords.some(keyword => term.includes(keyword))) {\n      return { category: 'immediate', boost: true };\n    } else if (preparationKeywords.some(keyword => term.includes(keyword))) {\n      return { category: 'preparation', boost: false };\n    } else if (learningKeywords.some(keyword => term.includes(keyword))) {\n      return { category: 'learning', boost: false };\n    } else if (managementKeywords.some(keyword => term.includes(keyword))) {\n      return { category: 'management', boost: false };\n    }\n\n    return null;\n  }, [searchTerm]);\n\n  // å†…å®¹æœç´¢é€»è¾‘ - æœç´¢èµ„æºæ ‡é¢˜ã€æ ‡ç­¾ç­‰\n  // æ™ºèƒ½å†…å®¹æœç´¢åŠŸèƒ½ - æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œè¯­ä¹‰ç†è§£\n  const contentSearch = useMemo(() => {\n    if (!searchTerm) return null;\n\n    const term = searchTerm.toLowerCase();\n    const allResources = Object.values(optimizedCategories).flatMap(category => category.resources);\n\n    // å®šä¹‰åŒä¹‰è¯æ˜ å°„è¡¨\n    const synonymMap: Record<string, string[]> = {\n      [t('tags.heatTherapy')]: [t('tags.heatTherapyMethod'), t('tags.heatTherapyTreatment'), t('tags.heatTherapyTreatment2'), t('tags.warmWaterBottle'), t('tags.warmPatch')],\n      [t('tags.massage')]: [t('tags.acupressure'), t('tags.muscleRelaxation'), t('tags.abdominalMassage'), t('tags.menstrualMassage'), t('tags.painMassage'), t('tags.bellyRub')],\n      [t('tags.painkiller')]: [t('tags.nsaid'), t('tags.antiInflammatoryDrug'), t('tags.ibuprofen'), t('tags.acetaminophen'), t('tags.painMedication'), t('tags.medication')],\n      [t('tags.warmPatch')]: [t('tags.heatTherapy'), t('tags.heatTherapyMethod'), t('tags.heatTherapyTreatment')],\n      [t('tags.bellyRub')]: [t('tags.massage'), t('tags.abdominalMassage'), t('tags.menstrualMassage'), t('tags.painMassage')],\n      [t('tags.warmWaterBottle')]: [t('tags.heatTherapy'), t('tags.heatTherapyMethod'), t('tags.heatTherapyTreatment')]\n    };\n\n    // è·å–æœç´¢è¯çš„æ‰€æœ‰åŒä¹‰è¯\n    const getSynonyms = (searchTerm: string): string[] => {\n      const synonyms: string[] = [searchTerm];\n      for (const [key, values] of Object.entries(synonymMap)) {\n        if (key.includes(searchTerm) || searchTerm.includes(key)) {\n          synonyms.push(...values);\n        }\n        if (values.some(v => v.includes(searchTerm) || searchTerm.includes(v))) {\n          synonyms.push(key, ...values);\n        }\n      }\n      return [...new Set(synonyms)]; // å»é‡\n    };\n\n    const synonyms = getSynonyms(term);\n    \n    // è®¡ç®—èµ„æºç›¸å…³æ€§è¯„åˆ† - ä¿®å¤è¯„åˆ†ç®—æ³•\n    const calculateRelevanceScore = (resource: any): number => {\n      const searchableText = [\n        resource.title,\n        resource.tags.join(' '),\n        resource.type\n      ].join(' ').toLowerCase();\n\n      let score = 0;\n      let maxPossibleScore = 0;\n      \n      // ç²¾ç¡®åŒ¹é…å¾—åˆ†æœ€é«˜ (100åˆ†)\n      if (searchableText.includes(term)) {\n        score += 100;\n        maxPossibleScore = 100;\n      } else {\n        // åŒä¹‰è¯åŒ¹é… (80åˆ†)\n        let synonymMatch = false;\n        synonyms.forEach(synonym => {\n          if (searchableText.includes(synonym.toLowerCase())) {\n            score += 80;\n            synonymMatch = true;\n          }\n        });\n        \n        if (synonymMatch) {\n          maxPossibleScore = 80;\n        } else {\n          // éƒ¨åˆ†åŒ¹é… (30åˆ†)\n          if (term.length >= 2) {\n            for (let i = 0; i <= term.length - 2; i++) {\n              const substring = term.substring(i, i + 2);\n              if (searchableText.includes(substring)) {\n                score += 30;\n                maxPossibleScore = 30;\n                break;\n              }\n            }\n          }\n          \n          // æ ‡ç­¾åŒ¹é… (20åˆ†)\n          resource.tags.forEach((tag: string) => {\n            const tagLower = tag.toLowerCase();\n            if (tagLower.includes(term) || term.includes(tagLower)) {\n              score += 20;\n              if (maxPossibleScore < 20) maxPossibleScore = 20;\n            }\n          });\n        }\n      }\n      \n      // ç¡®ä¿åˆ†æ•°ä¸è¶…è¿‡100\n      return Math.min(score, 100);\n    };\n\n    // è¿‡æ»¤å¹¶è¯„åˆ†\n    const scoredResources = allResources\n      .map(resource => ({\n        ...resource,\n        relevanceScore: calculateRelevanceScore(resource)\n      }))\n      .filter(resource => resource.relevanceScore > 0)\n      .sort((a, b) => b.relevanceScore - a.relevanceScore);\n\n    return scoredResources;\n  }, [searchTerm, optimizedCategories]);\n\n  // æ¸è¿›å¼åŠ è½½\n  useEffect(() => {\n    if (activeCategory && !loadedCategories.includes(activeCategory)) {\n      setLoadedCategories(prev => [...prev, activeCategory]);\n    }\n  }, [activeCategory, loadedCategories]);\n\n  // ç´§æ€¥æ¨¡å¼æ£€æµ‹\n  useEffect(() => {\n    const urgentTerms = locale === 'zh' ? [\n      'ç–¼', 'ç—›', 'ç°åœ¨', 'é©¬ä¸Š', 'ç´§æ€¥', 'æ€¥', 'ä¸¥é‡', 'å‰å®³',\n      'çƒ­æ•·', 'æŒ‰æ‘©', 'æ­¢ç—›è¯', 'ç¼“è§£', 'å¿«é€Ÿ', 'ç«‹å³'\n    ] : [\n      'hurt', 'pain', 'now', 'immediately', 'urgent', 'severe', 'bad',\n      'heat therapy', 'massage', 'painkiller', 'relief', 'quick', 'immediate'\n    ];\n    const isUrgent = urgentTerms.some(term => searchTerm.toLowerCase().includes(term.toLowerCase()));\n    setIsEmergencyMode(isUrgent);\n    \n    if (isUrgent && activeCategory !== 'immediate') {\n      setActiveCategory('immediate');\n    }\n  }, [searchTerm, activeCategory, locale]);\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'highest': return 'border-red-500 bg-red-50';\n      case 'high': return 'border-orange-500 bg-orange-50';\n      case 'medium': return 'border-yellow-500 bg-yellow-50';\n      default: return 'border-gray-300 bg-gray-50';\n    }\n  };\n\n  const getPriorityBadge = (priority: string) => {\n    const badges = {\n      highest: {\n        text: t('labels.topPick'),\n        color: 'bg-red-500 text-white'\n      },\n      high: {\n        text: t('labels.recommended'),\n        color: 'bg-orange-500 text-white'\n      },\n      medium: {\n        text: t('labels.important'),\n        color: 'bg-yellow-500 text-white'\n      },\n      low: {\n        text: t('labels.optional'),\n        color: 'bg-gray-500 text-white'\n      }\n    };\n    return badges[priority as keyof typeof badges] || badges.low;\n  };\n\n  // å¿«é€Ÿç­›é€‰æ ‡ç­¾ - æ ¹æ®è¯­è¨€åŠ¨æ€ç”Ÿæˆ\n  const quickFilters = useMemo(() => {\n    if (locale === 'zh') {\n      return [\n        { key: 'ç–¼ç—›', label: 'ç–¼ç—›', category: 'immediate' },\n        { key: 'ç¼“è§£', label: 'ç¼“è§£', category: 'immediate' },\n        { key: 'è¥å…»', label: 'è¥å…»', category: 'preparation' },\n        { key: 'è¿åŠ¨', label: 'è¿åŠ¨', category: 'preparation' },\n        { key: 'åŒ»å­¦', label: 'åŒ»å­¦', category: 'learning' },\n        { key: 'æ²Ÿé€š', label: 'æ²Ÿé€š', category: 'learning' }\n      ];\n    } else {\n      return [\n        { key: 'pain', label: 'Pain', category: 'immediate' },\n        { key: 'relief', label: 'Relief', category: 'immediate' },\n        { key: 'nutrition', label: 'Nutrition', category: 'preparation' },\n        { key: 'exercise', label: 'Exercise', category: 'preparation' },\n        { key: 'medical', label: 'Medical', category: 'learning' },\n        { key: 'communication', label: 'Communication', category: 'learning' }\n      ];\n    }\n  }, [locale]);\n\n  // PDFæ–‡ä»¶åè·å– - ä»ç»Ÿä¸€é…ç½®è·å–\n  const getPDFFilename = (resourceId: string): string => {\n    // ç›´æ¥ä½¿ç”¨resourceIdï¼Œå› ä¸ºPDFèµ„æºå·²ç»ä½¿ç”¨äº†é…ç½®æ–‡ä»¶ä¸­çš„æ­£ç¡®ID\n    const resource = getPDFResourceById(resourceId);\n    return resource?.filename || `${resourceId}.pdf`;\n  };\n\n  // å¤„ç†HTMLæ ¼å¼PDFä¸‹è½½\n  const handlePDFDownload = (resourceId: string) => {\n    // ä¸‹è½½HTMLæ ¼å¼çš„PDFå†…å®¹ï¼Œæä¾›æ›´å¥½çš„å±å¹•é˜…è¯»ä½“éªŒ\n    const htmlFilename = `${resourceId}.html`;\n    const url = `/pdf-files/${htmlFilename}`;\n\n    console.log(`ä¸‹è½½HTMLæ ¼å¼PDF: ${resourceId} -> ${htmlFilename}`);\n\n    // åˆ›å»ºä¸´æ—¶é“¾æ¥è¿›è¡Œä¸‹è½½\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = htmlFilename;\n    link.target = '_blank';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // å¤„ç†åˆ†äº«åŠŸèƒ½\n  const handleShare = async (resource: Resource) => {\n    const shareText = locale === 'zh'\n      ? `æ¨èè¿™ä¸ªæœ‰ç”¨çš„ç»æœŸå¥åº·èµ„æºï¼š${resource.title}`\n      : `Check out this helpful menstrual health resource: ${resource.title}`;\n\n    const shareData = {\n      title: `Period Hub - ${resource.title}`,\n      text: shareText,\n      url: window.location.href\n    };\n\n    try {\n      if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n        await navigator.share(shareData);\n      } else {\n        // é™çº§åˆ°å¤åˆ¶é“¾æ¥\n        await navigator.clipboard.writeText(window.location.href);\n        alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');\n      }\n    } catch (error) {\n      console.error('åˆ†äº«å¤±è´¥:', error);\n      // é™çº§åˆ°å¤åˆ¶é“¾æ¥\n      try {\n        await navigator.clipboard.writeText(window.location.href);\n        alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');\n      } catch (clipboardError) {\n        console.error('å¤åˆ¶å¤±è´¥:', clipboardError);\n      }\n    }\n  };\n\n  // å¤„ç†é¢„è§ˆåŠŸèƒ½\n  const handlePreview = (resourceId: string) => {\n    // ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„èµ„æºIDï¼ˆä¸éœ€è¦æ˜ å°„ï¼Œå› ä¸ºPDFèµ„æºå·²ç»ä½¿ç”¨äº†æ­£ç¡®çš„IDï¼‰\n    console.log(`é¢„è§ˆPDF: ${resourceId}`);\n    window.location.href = `/${locale}/downloads/preview/${resourceId}`;\n  };\n\n  // èµ„æºå¡ç‰‡ç»„ä»¶\n  const ResourceCard = ({ resource, categoryColor }: { resource: Resource; categoryColor: string }) => {\n    const badge = getPriorityBadge(resource.priority);\n\n    return (\n      <div className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${badge.color}`}>\n            {badge.text}\n          </div>\n          {resource.type === 'article' && (\n            <div className=\"flex items-center text-xs text-gray-500\">\n              <Clock className=\"w-3 h-3 mr-1\" />\n              {resource.readTime}\n            </div>\n          )}\n          {resource.type === 'pdf' && (\n            <div className=\"flex items-center text-xs text-gray-500\">\n              <Download className=\"w-3 h-3 mr-1\" />\n              {resource.size}\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-start mb-3\">\n          {resource.type === 'pdf' && (\n            <div className=\"text-2xl mr-3 flex-shrink-0\">{resource.icon}</div>\n          )}\n          <h3 className=\"font-semibold text-gray-900 text-sm leading-tight line-clamp-2\">\n            {resource.title}\n          </h3>\n        </div>\n\n        <div className=\"flex gap-2\">\n          {resource.type === 'article' ? (\n            <a\n              href={`/${locale}/articles/${resource.slug}`}\n              className=\"flex-1 bg-purple-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors text-center block\"\n            >\n              {t('actions.readArticle')}\n            </a>\n          ) : (\n            <>\n              <button\n                onClick={() => handlePreview(resource.id!)}\n                className=\"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center\"\n              >\n                <Eye className=\"w-3 h-3 mr-1\" />\n                {t('actions.preview')}\n              </button>\n              <button\n                onClick={() => handlePDFDownload(resource.id!)}\n                className=\"px-3 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors flex items-center justify-center\"\n                title={t('actions.downloadHtmlPdf')}\n              >\n                <Download className=\"w-3 h-3\" />\n              </button>\n              <button\n                onClick={() => handleShare(resource)}\n                className=\"px-3 py-2 border border-gray-200 rounded-lg text-sm text-gray-600 hover:bg-gray-50 transition-colors\"\n                title={t('actions.share')}\n              >\n                <ExternalLink className=\"w-3 h-3\" />\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // åˆ†ç±»åŒºåŸŸç»„ä»¶\n  const CategorySection = ({ category }: { category: Category }) => (\n    <div className={`${category.bgColor} rounded-2xl p-6 mb-6`}>\n      <div className=\"flex items-center mb-4\">\n        <div className={`w-12 h-12 rounded-xl bg-gradient-to-r ${category.color} flex items-center justify-center text-white mr-4 shadow-lg`}>\n          {category.icon}\n        </div>\n        <div className=\"flex-1\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-1\">{category.title}</h2>\n          <p className=\"text-gray-600 text-sm\">{category.subtitle}</p>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-2xl font-bold text-gray-900\">{getCategoryResourceCount(category.id)}</div>\n          <div className=\"text-xs text-gray-500\">{locale === 'zh' ? 'ä¸ªèµ„æº' : 'resources'}</div>\n        </div>\n      </div>\n\n      <div className=\"grid gap-3\">\n        {category.resources\n          .sort((a, b) => {\n            const priorityOrder = { highest: 0, high: 1, medium: 2, low: 3 };\n            return priorityOrder[a.priority] - priorityOrder[b.priority];\n          })\n          .slice(0, activeCategory === category.id ? undefined : 3)\n          .map((resource, index) => (\n            <ResourceCard key={index} resource={resource} categoryColor={category.color} />\n          ))}\n      </div>\n\n      {activeCategory !== category.id && getCategoryResourceCount(category.id) > 3 && (\n        <button\n          onClick={() => setActiveCategory(category.id)}\n          className=\"w-full mt-4 py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-purple-300 hover:text-purple-600 transition-colors\"\n        >\n          {locale === 'zh' ? `æŸ¥çœ‹å…¨éƒ¨ ${getCategoryResourceCount(category.id)} ä¸ªèµ„æº â†’` : `View all ${getCategoryResourceCount(category.id)} resources â†’`}\n        </button>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* ç§»åŠ¨ç«¯ä¼˜åŒ–æ ·å¼ */}\n      <style jsx>{`\n        @media (max-width: 640px) {\n          button, a[role=\"button\"] {\n            min-height: 44px; /* è§¦æ‘¸å‹å¥½ */\n          }\n          \n          h1 { line-height: 1.2; }\n          h2, h3 { line-height: 1.3; }\n          \n          img {\n            max-width: 100%;\n            height: auto;\n          }\n        }\n        \n        /* è¶…å°å±å¹•ä¼˜åŒ– */\n        @media (max-width: 375px) {\n          h1 { font-size: 1.5rem; }\n          h2 { font-size: 1.25rem; }\n        }\n      `}</style>\n      \n      {/* Main Content */}\n      <div className=\"px-4 py-6 max-w-md mx-auto\">\n\n        {/* Emergency Decision Tree */}\n        <div className=\"bg-gradient-to-br from-pink-50 to-purple-50 p-6 rounded-2xl mb-6 border border-pink-100\">\n          <h2 className=\"text-lg font-bold text-gray-800 mb-4 text-center\">\n            {locale === 'zh' ? 'æˆ‘ç°åœ¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ' : 'What help do I need now?'}\n          </h2>\n          <div className=\"space-y-3\">\n            {Object.values(optimizedCategories).map((category) => (\n              <button\n                key={category.id}\n                onClick={() => setActiveCategory(category.id)}\n                className={`w-full p-4 rounded-xl text-left transition-all duration-200 border-2 ${\n                  activeCategory === category.id\n                    ? `bg-gradient-to-r ${category.color} text-white border-transparent shadow-lg scale-105`\n                    : `${category.bgColor} ${category.borderColor} text-gray-700 hover:shadow-md hover:scale-102`\n                }`}\n              >\n                <div className=\"flex items-center\">\n                  <div className={`p-2 rounded-lg mr-3 ${\n                    activeCategory === category.id\n                      ? 'bg-white/20'\n                      : `bg-gradient-to-r ${category.color} text-white`\n                  }`}>\n                    {category.icon}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"font-semibold text-base\">{category.title}</div>\n                    <div className={`text-sm ${\n                      activeCategory === category.id ? 'text-white/80' : 'text-gray-500'\n                    }`}>\n                      {category.subtitle}\n                    </div>\n                  </div>\n                  <div className={`text-xl font-bold ${\n                    activeCategory === category.id ? 'text-white' : 'text-gray-600'\n                  }`}>\n                    {getCategoryResourceCount(category.id)}\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Search Box */}\n        <div className=\"mb-6\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder={dynamicPlaceholder}\n              value={searchTerm}\n              onChange={(e) => {\n                setSearchTerm(e.target.value);\n                setShowSuggestions(e.target.value.length > 0);\n              }}\n              onFocus={() => setShowSuggestions(searchTerm.length > 0)}\n              onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\n              className=\"w-full pl-10 pr-4 py-3 text-base border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none bg-white transition-all duration-300\"\n            />\n            \n            {/* æœç´¢å»ºè®®ä¸‹æ‹‰æ¡† */}\n            {showSuggestions && filteredSuggestions.length > 0 && (\n              <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto\">\n                <div className=\"p-2\">\n                  <div className=\"text-xs text-gray-500 mb-2 px-2\">\n                    {locale === 'zh' ? 'æ¨èæœç´¢è¯' : 'Suggested keywords'}\n                  </div>\n                  {filteredSuggestions.map((suggestion, index) => (\n                    <button\n                      key={index}\n                      onClick={() => {\n                        setSearchTerm(suggestion);\n                        setShowSuggestions(false);\n                      }}\n                      className=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-700 rounded-lg transition-colors flex items-center\"\n                    >\n                      <Search className=\"w-3 h-3 mr-2 text-gray-400\" />\n                      {suggestion}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* æœç´¢æç¤ºåŒºåŸŸ */}\n          {!searchTerm && (\n            <div className=\"mt-4 p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl border border-purple-100\">\n              <div className=\"text-sm text-gray-600 mb-3\">\n                {locale === 'zh' ? 'ğŸ’¡ çƒ­é—¨æœç´¢è¯' : 'ğŸ’¡ Popular searches'}\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {searchSuggestions.slice(0, 6).map((suggestion, index) => (\n                  <button\n                    key={index}\n                    onClick={() => setSearchTerm(suggestion)}\n                    className=\"px-3 py-1.5 text-xs bg-white text-gray-700 rounded-full border border-gray-200 hover:border-purple-300 hover:text-purple-700 hover:bg-purple-50 transition-all duration-200 shadow-sm\"\n                  >\n                    {suggestion}\n                  </button>\n                ))}\n              </div>\n              <div className=\"text-xs text-gray-500 mt-2\">\n                {locale === 'zh' ? 'ç‚¹å‡»ä»»æ„å…³é”®è¯å¼€å§‹æœç´¢' : 'Click any keyword to start searching'}\n              </div>\n            </div>\n          )}\n\n          {/* Quick Filters */}\n          <div className=\"flex gap-2 mt-3 overflow-x-auto pb-2\">\n            {quickFilters.map((filter) => (\n              <button\n                key={filter.key}\n                onClick={() => {\n                  setSearchTerm(filter.key);\n                  setActiveCategory(filter.category);\n                }}\n                className=\"px-3 py-1 bg-purple-100 text-purple-600 rounded-full text-xs whitespace-nowrap hover:bg-purple-200 transition-colors\"\n              >\n                {filter.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Content Sections */}\n        {searchTerm && contentSearch ? (\n          // æ˜¾ç¤ºæœç´¢ç»“æœ\n          <div className=\"mb-6 pb-20\">\n            <div className=\"bg-blue-50 rounded-2xl p-6 border border-blue-200\">\n              <h2 className=\"text-lg font-bold text-gray-800 mb-4\">\n                {locale === 'zh' ? `æœç´¢ç»“æœ (${contentSearch.length}ä¸ª)` : `Search Results (${contentSearch.length})`}\n              </h2>\n              <div className=\"grid gap-3 max-h-60 sm:max-h-80 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 relative\">\n                {/* æ»šåŠ¨æç¤º */}\n                {contentSearch.length > 2 && (\n                  <div className=\"absolute top-0 right-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-b-lg z-10\">\n                    {locale === 'zh' ? 'å‘ä¸‹æ»šåŠ¨æŸ¥çœ‹æ›´å¤š' : 'Scroll for more'}\n                  </div>\n                )}\n                {contentSearch.map((resource, index) => (\n                  <div key={index} className=\"relative\">\n                    <ResourceCard resource={resource} categoryColor=\"from-blue-500 to-blue-600\" />\n                    {/* ç›¸å…³æ€§è¯„åˆ†å’ŒåŒ¹é…åŸå›  */}\n                    <div className=\"mt-2 flex items-center justify-between text-xs text-gray-600\">\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">\n                          {locale === 'zh' ? `ç›¸å…³æ€§: ${resource.relevanceScore}%` : `Relevance: ${resource.relevanceScore}%`}\n                        </span>\n                        {resource.relevanceScore >= 100 && (\n                          <span className=\"bg-green-100 text-green-800 px-2 py-1 rounded-full\">\n                            {locale === 'zh' ? 'ç²¾ç¡®åŒ¹é…' : 'Exact Match'}\n                          </span>\n                        )}\n                        {resource.relevanceScore >= 80 && resource.relevanceScore < 100 && (\n                          <span className=\"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full\">\n                            {locale === 'zh' ? 'åŒä¹‰è¯åŒ¹é…' : 'Synonym Match'}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                {/* åº•éƒ¨æ¸å˜é®ç½©æç¤º */}\n                {contentSearch.length > 2 && (\n                  <div className=\"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-blue-50 to-transparent pointer-events-none\"></div>\n                )}\n              </div>\n            </div>\n          </div>\n        ) : activeCategory === 'all' ? (\n          Object.values(optimizedCategories).map((category) => (\n            <CategorySection key={category.id} category={category} />\n          ))\n        ) : (\n          <CategorySection category={optimizedCategories[activeCategory]} />\n        )}\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-3 gap-4 mt-8 mb-6\">\n          <div className=\"bg-white rounded-xl p-4 text-center shadow-sm\">\n            <div className=\"text-2xl font-bold text-purple-600 mb-1\">\n              {SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources}\n            </div>\n            <div className=\"text-xs text-gray-600\">{locale === 'zh' ? 'æ€»èµ„æº' : 'Total Resources'}</div>\n          </div>\n          <div className=\"bg-white rounded-xl p-4 text-center shadow-sm\">\n            <div className=\"text-2xl font-bold text-pink-600 mb-1\">{Object.keys(optimizedCategories).length}</div>\n            <div className=\"text-xs text-gray-600\">{locale === 'zh' ? 'åˆ†ç±»' : 'Categories'}</div>\n          </div>\n          <div className=\"bg-white rounded-xl p-4 text-center shadow-sm\">\n            <div className=\"text-2xl font-bold text-green-600 mb-1\">100%</div>\n            <div className=\"text-xs text-gray-600\">{locale === 'zh' ? 'å¾ªè¯' : 'Evidence-Based'}</div>\n          </div>\n        </div>\n\n        {/* CTA */}\n        <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-6 text-white text-center\">\n          <h3 className=\"text-lg font-bold mb-2\">\n            {locale === 'zh' ? 'éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ' : 'Need More Help?'}\n          </h3>\n          <p className=\"text-sm opacity-90 mb-4\">\n            {locale === 'zh' ? 'æ¢ç´¢æˆ‘ä»¬çš„äº’åŠ¨å·¥å…·è·å¾—ä¸ªæ€§åŒ–å»ºè®®' : 'Explore our interactive tools for personalized recommendations'}\n          </p>\n          <a\n            href={`/${locale}/interactive-tools`}\n            className=\"inline-block bg-white text-purple-600 px-6 py-2 rounded-xl font-semibold text-sm hover:bg-gray-50 transition-colors\"\n          >\n            {locale === 'zh' ? 'ä½¿ç”¨äº’åŠ¨å·¥å…·' : 'Use Interactive Tools'}\n          </a>\n        </div>\n      </div>\n\n      {/* Bottom spacer for mobile navigation */}\n      <div className=\"h-20\"></div>\n    </div>\n  );\n};\n\nexport default OptimizedMobilePDFCenter;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PDFCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PDFCenterOptimized.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Star' is defined but never used.","line":4,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tag' is defined but never used.","line":4,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronRight' is defined but never used.","line":4,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":66},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[671,674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[671,674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setFilters' is assigned a value but never used.","line":49,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'filters'. Either exclude it or remove the dependency array.","line":78,"column":6,"nodeType":"ArrayExpression","endLine":78,"endColumn":58,"suggestions":[{"desc":"Update the dependencies array to be: [selectedCategory, searchQuery, maxResults]","fix":{"range":[2315,2367],"text":"[selectedCategory, searchQuery, maxResults]"}}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useMemo } from 'react';\nimport { Search, Filter, Download, Star, Clock, Tag, ChevronRight } from 'lucide-react';\nimport { useTranslations } from 'next-intl';\n// import { PDFResource, PDFCategory } from '../types/pdf';\n// import { PDF_CATEGORIES, PDF_RESOURCES } from '../config/pdfResources';\n\n// ä¸´æ—¶ç±»å‹å®šä¹‰ï¼Œé¿å…æ„å»ºé”™è¯¯\ntype PDFCategory = 'management-tools' | 'health-management' | 'communication-guidance' | 'educational-resources';\ninterface PDFResource {\n  id: string;\n  title: string;\n  description: string;\n  category: PDFCategory;\n  tags: string[];\n  priority: string;\n  downloadUrl: string;\n}\n\n// ä¸´æ—¶ç©ºæ•°æ®ï¼Œé¿å…æ„å»ºé”™è¯¯\nconst PDF_CATEGORIES: any[] = [];\nconst PDF_RESOURCES: PDFResource[] = [];\n\ninterface PDFCenterOptimizedProps {\n  locale: 'zh' | 'en';\n  initialCategory?: PDFCategory;\n  showSearch?: boolean;\n  showFilters?: boolean;\n  maxResults?: number;\n}\n\ninterface PDFFilterOptions {\n  priority?: string;\n  difficulty?: string;\n  type?: string;\n}\n\nexport default function PDFCenterOptimized({\n  locale = 'zh',\n  initialCategory,\n  showSearch = true,\n  showFilters = true,\n  maxResults = 20\n}: PDFCenterOptimizedProps) {\n  const t = useTranslations('pdfCenterOptimized');\n  const [selectedCategory, setSelectedCategory] = useState<PDFCategory | 'all'>(initialCategory || 'all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filters, setFilters] = useState<PDFFilterOptions>({});\n  const [showFilterPanel, setShowFilterPanel] = useState(false);\n\n  // ç­›é€‰å’Œæœç´¢é€»è¾‘\n  const filteredResources = useMemo(() => {\n    let resources = PDF_RESOURCES;\n\n    // åˆ†ç±»ç­›é€‰\n    if (selectedCategory !== 'all') {\n      resources = resources.filter(r => r.category === selectedCategory);\n    }\n\n    // æœç´¢ç­›é€‰\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      resources = resources.filter(r => \n        r.title.toLowerCase().includes(query) ||\n        r.description.toLowerCase().includes(query) ||\n        r.tags.some(tag => tag.toLowerCase().includes(query))\n      );\n    }\n\n    // ä¼˜å…ˆçº§æ’åº\n    resources.sort((a, b) => {\n      const priorityOrder: Record<string, number> = { 'highest': 0, 'high': 1, 'medium': 2, 'low': 3 };\n      return (priorityOrder[a.priority] || 3) - (priorityOrder[b.priority] || 3);\n    });\n\n    return resources.slice(0, maxResults);\n  }, [selectedCategory, searchQuery, filters, maxResults]);\n\n  // è·å–åˆ†ç±»ä¿¡æ¯\n  const getCategoryInfo = (categoryId: PDFCategory) => {\n    return PDF_CATEGORIES.find(cat => cat.id === categoryId);\n  };\n\n  // ä¼˜å…ˆçº§æ ‡ç­¾é¢œè‰²\n  const getPriorityColor = (priority: string) => {\n    const colors = {\n      'highest': 'bg-red-100 text-red-800 border-red-200',\n      'high': 'bg-orange-100 text-orange-800 border-orange-200',\n      'medium': 'bg-yellow-100 text-yellow-800 border-yellow-200',\n      'low': 'bg-gray-100 text-gray-800 border-gray-200'\n    };\n    return colors[priority as keyof typeof colors] || colors.medium;\n  };\n\n  // å¤„ç†ä¸‹è½½\n  const handleDownload = (resource: PDFResource) => {\n    // è¿™é‡Œå¯ä»¥æ·»åŠ ä¸‹è½½ç»Ÿè®¡é€»è¾‘\n    console.log(`Downloading: ${resource.title}`);\n    // å®é™…ä¸‹è½½é€»è¾‘\n    window.open(resource.downloadUrl, '_blank');\n  };\n\n  return (\n    <div className=\"pdf-center-optimized max-w-7xl mx-auto p-4 space-y-6\">\n      {/* å¤´éƒ¨æœç´¢åŒºåŸŸ */}\n      {showSearch && (\n        <div className=\"search-section bg-white rounded-xl shadow-sm border p-4 space-y-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder={t('searchPlaceholder')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n            />\n          </div>\n          \n          {showFilters && (\n            <button\n              onClick={() => setShowFilterPanel(!showFilterPanel)}\n              className=\"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-purple-600 transition-colors\"\n            >\n              <Filter className=\"w-4 h-4\" />\n              {t('filter')}\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* åˆ†ç±»å¯¼èˆª */}\n      <div className=\"category-navigation\">\n        <div className=\"flex gap-2 overflow-x-auto pb-2\">\n          <button\n            onClick={() => setSelectedCategory('all')}\n            className={`flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all ${\n              selectedCategory === 'all'\n                ? 'bg-purple-600 text-white shadow-md'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            {t('all')} ({PDF_RESOURCES.length})\n          </button>\n          \n          {PDF_CATEGORIES.map((category) => (\n            <button\n              key={category.id}\n              onClick={() => setSelectedCategory(category.id)}\n              className={`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${\n                selectedCategory === category.id\n                  ? `${category.bgColor} ${category.color} border ${category.borderColor} shadow-md`\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <span className=\"text-lg\">{category.icon}</span>\n              <span>{locale === 'zh' ? category.name : category.nameEn}</span>\n              <span className=\"text-sm opacity-75\">\n                ({PDF_RESOURCES.filter(r => r.category === category.id).length})\n              </span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* èµ„æºåˆ—è¡¨ */}\n      <div className=\"resources-grid\">\n        {filteredResources.length === 0 ? (\n          <div className=\"text-center py-12 text-gray-500\">\n            <Search className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n            <p>{t('noMatchingResources')}</p>\n          </div>\n        ) : (\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n            {filteredResources.map((resource) => {\n              const categoryInfo = getCategoryInfo(resource.category);\n              \n              return (\n                <div\n                  key={resource.id}\n                  className=\"resource-card bg-white rounded-xl border border-gray-200 hover:border-purple-300 hover:shadow-lg transition-all duration-200 p-6\"\n                >\n                  {/* å¡ç‰‡å¤´éƒ¨ */}\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-2xl\">{categoryInfo?.icon}</span>\n                      <div className=\"flex gap-2\">\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full border ${getPriorityColor(resource.priority)}`}>\n                          {resource.priority.toUpperCase()}\n                        </span>\n\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* æ ‡é¢˜å’Œæè¿° */}\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2 line-clamp-2\">\n                    {resource.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mb-4 line-clamp-3\">\n                    {resource.description}\n                  </p>\n\n                  {/* å…ƒä¿¡æ¯ */}\n                  <div className=\"flex items-center gap-4 text-xs text-gray-500 mb-4\">\n                    <div className=\"flex items-center gap-1\">\n                      <Clock className=\"w-3 h-3\" />\n                      <span>5åˆ†é’Ÿ</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <Download className=\"w-3 h-3\" />\n                      <span>PDF</span>\n                    </div>\n                  </div>\n\n                  {/* æ ‡ç­¾ */}\n                  <div className=\"flex flex-wrap gap-1 mb-4\">\n                    {resource.tags.slice(0, 3).map((tag, index) => (\n                      <span\n                        key={index}\n                        className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-md\"\n                      >\n                        {tag}\n                      </span>\n                    ))}\n                  </div>\n\n                  {/* ä¸‹è½½æŒ‰é’® */}\n                  <button\n                    onClick={() => handleDownload(resource)}\n                    className=\"w-full flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    {t('downloadNow')}\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* åŠ è½½æ›´å¤šæŒ‰é’® */}\n      {filteredResources.length === maxResults && (\n        <div className=\"text-center\">\n          <button className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors\">\n            {t('loadMore')}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PDFGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PDFPreviewContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PageOptimizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PerformanceDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[97,100],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[97,100],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[116,119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[116,119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPerformanceData'. Either include it or remove the dependency array.","line":33,"column":6,"nodeType":"ArrayExpression","endLine":33,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPerformanceData, selectedUrl]","fix":{"range":[701,714],"text":"[fetchPerformanceData, selectedUrl]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface PerformanceData {\n  data: any[];\n  averages: any;\n  total: number;\n  summary: {\n    totalRecords: number;\n    filteredRecords: number;\n    returnedRecords: number;\n  };\n}\n\ninterface MetricAverages {\n  [key: string]: {\n    average: number;\n    min: number;\n    max: number;\n    count: number;\n  };\n}\n\nexport default function PerformanceDashboard() {\n  const [data, setData] = useState<PerformanceData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedUrl, setSelectedUrl] = useState('');\n\n  useEffect(() => {\n    fetchPerformanceData();\n  }, [selectedUrl]);\n\n  const fetchPerformanceData = async () => {\n    try {\n      setLoading(true);\n      const url = selectedUrl ? `/api/performance?url=${encodeURIComponent(selectedUrl)}` : '/api/performance';\n      const response = await fetch(url);\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch performance data');\n      }\n      \n      const result = await response.json();\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unknown error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getGradeColor = (metric: string, value: number) => {\n    const thresholds = {\n      LCP: { good: 2500, poor: 4000 },\n      FID: { good: 100, poor: 300 },\n      CLS: { good: 0.1, poor: 0.25 },\n      FCP: { good: 1800, poor: 3000 },\n      TTFB: { good: 800, poor: 1800 },\n    };\n\n    const threshold = thresholds[metric as keyof typeof thresholds];\n    if (!threshold) return 'text-gray-600';\n\n    if (value <= threshold.good) return 'text-green-600';\n    if (value <= threshold.poor) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  const getGrade = (metric: string, value: number) => {\n    const thresholds = {\n      LCP: { good: 2500, poor: 4000 },\n      FID: { good: 100, poor: 300 },\n      CLS: { good: 0.1, poor: 0.25 },\n      FCP: { good: 1800, poor: 3000 },\n      TTFB: { good: 800, poor: 1800 },\n    };\n\n    const threshold = thresholds[metric as keyof typeof thresholds];\n    if (!threshold) return 'unknown';\n\n    if (value <= threshold.good) return 'Good';\n    if (value <= threshold.poor) return 'Needs Improvement';\n    return 'Poor';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n        <h3 className=\"text-red-800 font-semibold\">Error</h3>\n        <p className=\"text-red-600\">{error}</p>\n        <button\n          onClick={fetchPerformanceData}\n          className=\"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (!data) {\n    return (\n      <div className=\"text-center text-gray-500\">\n        No performance data available\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* è¿‡æ»¤å™¨ */}\n      <div className=\"bg-white rounded-lg shadow p-4\">\n        <div className=\"flex items-center space-x-4\">\n          <label className=\"text-sm font-medium text-gray-700\">\n            Filter by URL:\n          </label>\n          <input\n            type=\"text\"\n            value={selectedUrl}\n            onChange={(e) => setSelectedUrl(e.target.value)}\n            placeholder=\"Enter URL to filter...\"\n            className=\"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm\"\n          />\n          <button\n            onClick={() => setSelectedUrl('')}\n            className=\"bg-gray-200 text-gray-700 px-3 py-2 rounded-md text-sm hover:bg-gray-300\"\n          >\n            Clear\n          </button>\n        </div>\n      </div>\n\n      {/* æ‘˜è¦ç»Ÿè®¡ */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <h3 className=\"text-sm font-medium text-gray-500\">Total Records</h3>\n          <p className=\"text-2xl font-bold text-gray-900\">{data.summary.totalRecords}</p>\n        </div>\n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <h3 className=\"text-sm font-medium text-gray-500\">Filtered Records</h3>\n          <p className=\"text-2xl font-bold text-gray-900\">{data.summary.filteredRecords}</p>\n        </div>\n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <h3 className=\"text-sm font-medium text-gray-500\">Returned Records</h3>\n          <p className=\"text-2xl font-bold text-gray-900\">{data.summary.returnedRecords}</p>\n        </div>\n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <h3 className=\"text-sm font-medium text-gray-500\">Last Updated</h3>\n          <p className=\"text-sm text-gray-900\">\n            {data.data.length > 0 \n              ? new Date(data.data[0].timestamp).toLocaleString()\n              : 'N/A'\n            }\n          </p>\n        </div>\n      </div>\n\n      {/* å¹³å‡æ€§èƒ½æŒ‡æ ‡ */}\n      {data.averages && Object.keys(data.averages).length > 0 && (\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Average Performance Metrics</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {Object.entries(data.averages).map(([metric, stats]) => {\n              const typedStats = stats as MetricAverages[string];\n              return (\n              <div key={metric} className=\"border border-gray-200 rounded-lg p-4\">\n                <h3 className=\"font-medium text-gray-900 mb-2\">{metric}</h3>\n                <div className=\"space-y-1 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Average:</span>\n                    <span className={getGradeColor(metric, typedStats.average)}>\n                      {typedStats.average.toFixed(0)}ms\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Min:</span>\n                    <span className=\"text-gray-900\">{typedStats.min.toFixed(0)}ms</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Max:</span>\n                    <span className=\"text-gray-900\">{typedStats.max.toFixed(0)}ms</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Count:</span>\n                    <span className=\"text-gray-900\">{typedStats.count}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Grade:</span>\n                    <span className={getGradeColor(metric, typedStats.average)}>\n                      {getGrade(metric, typedStats.average)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* æœ€è¿‘è®°å½• */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Recent Performance Records</h2>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Timestamp\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  URL\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  LCP\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  FID\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  CLS\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  FCP\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  TTFB\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {data.data.slice(0, 20).map((record, index) => (\n                <tr key={index} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {new Date(record.timestamp).toLocaleString()}\n                  </td>\n                  <td className=\"px-6 py-4 text-sm text-gray-900 max-w-xs truncate\">\n                    {record.url}\n                  </td>\n                  {['LCP', 'FID', 'CLS', 'FCP', 'TTFB'].map(metric => (\n                    <td key={metric} className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                      {record.metrics[metric] ? (\n                        <span className={getGradeColor(metric, record.metrics[metric])}>\n                          {record.metrics[metric].toFixed(0)}ms\n                        </span>\n                      ) : (\n                        <span className=\"text-gray-400\">-</span>\n                      )}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PerformanceIntegration.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/PerformanceMonitor.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1125,1128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1125,1128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { PerformanceMonitor, trackPageLoad, trackRouteChange } from '@/lib/performance-monitor';\n\ninterface PerformanceMonitorProps {\n  enabled?: boolean;\n  showConsole?: boolean;\n}\n\nexport default function PerformanceMonitorComponent({ \n  enabled = true, \n  showConsole = false \n}: PerformanceMonitorProps) {\n  useEffect(() => {\n    if (!enabled || typeof window === 'undefined') return;\n\n    // åˆå§‹åŒ–æ€§èƒ½ç›‘æ§\n    trackPageLoad();\n    trackRouteChange();\n\n    // å®šæœŸæ£€æŸ¥æ€§èƒ½æŒ‡æ ‡\n    const interval = setInterval(() => {\n      const monitor = PerformanceMonitor.getInstance();\n      const metrics = monitor.getMetrics();\n      \n      if (showConsole && Object.keys(metrics).length > 0) {\n        console.log('ğŸ“Š Current Performance Metrics:', metrics);\n      }\n    }, 5000);\n\n    return () => {\n      clearInterval(interval);\n      const monitor = PerformanceMonitor.getInstance();\n      monitor.disconnect();\n    };\n  }, [enabled, showConsole]);\n\n  return null; // è¿™æ˜¯ä¸€ä¸ªæ— UIç»„ä»¶\n}\n\n// æ€§èƒ½æŒ‡æ ‡æ˜¾ç¤ºç»„ä»¶\nexport function PerformanceMetricsDisplay() {\n  const [metrics, setMetrics] = useState<any>({});\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const monitor = PerformanceMonitor.getInstance();\n    \n    const updateMetrics = () => {\n      setMetrics(monitor.getMetrics());\n    };\n\n    // åˆå§‹æ›´æ–°\n    updateMetrics();\n\n    // å®šæœŸæ›´æ–°\n    const interval = setInterval(updateMetrics, 2000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (!isVisible || Object.keys(metrics).length === 0) {\n    return (\n      <button\n        onClick={() => setIsVisible(true)}\n        className=\"fixed bottom-4 right-4 bg-blue-600 text-white px-3 py-2 rounded-lg text-sm shadow-lg z-50\"\n      >\n        ğŸ“Š Performance\n      </button>\n    );\n  }\n\n  return (\n    <div className=\"fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 max-w-xs hidden sm:block\">\n      <div className=\"flex justify-between items-center mb-2\">\n        <h3 className=\"font-semibold text-gray-800\">Performance Metrics</h3>\n        <button\n          onClick={() => setIsVisible(false)}\n          className=\"text-gray-500 hover:text-gray-700 min-h-[44px] min-w-[44px] flex items-center justify-center\"\n        >\n          Ã—\n        </button>\n      </div>\n      \n      <div className=\"space-y-2 text-sm\">\n        {Object.entries(metrics).map(([name, value]) => {\n          const monitor = PerformanceMonitor.getInstance();\n          const grade = monitor.getPerformanceGrade(name, value as number);\n          const gradeColor = {\n            good: 'text-green-600',\n            'needs-improvement': 'text-yellow-600',\n            poor: 'text-red-600'\n          }[grade];\n\n          return (\n            <div key={name} className=\"flex justify-between\">\n              <span className=\"font-medium\">{name}:</span>\n              <span className={`${gradeColor}`}>\n                {typeof value === 'number' ? `${value.toFixed(0)}ms` : String(value)}\n                <span className=\"ml-1 text-xs\">({grade})</span>\n              </span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ReadingProgress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/RelatedArticles.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/SEODashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/SearchAndFilter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":9},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":205,"column":50,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7066,7068],"text":" &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7066,7068],"text":" &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7066,7068],"text":" &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7066,7068],"text":" &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":205,"column":81,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7098,7101],"text":"&quot;: "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7098,7101],"text":"&ldquo;: "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7098,7101],"text":"&#34;: "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7098,7101],"text":"&rdquo;: "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Search, Filter, X, Grid, List } from 'lucide-react';\nimport { PDFCategoryInfo, Locale } from '@/types/pdf';\n\ninterface SearchAndFilterProps {\n  locale: Locale;\n  categories: PDFCategoryInfo[];\n  searchQuery: string;\n  selectedCategory: string;\n  viewMode: 'grid' | 'list';\n  onSearchChange: (query: string) => void;\n  onCategoryChange: (category: string) => void;\n  onViewModeChange: (mode: 'grid' | 'list') => void;\n  totalResults: number;\n  t: (key: string) => string;\n}\n\nexport default function SearchAndFilter({\n  locale,\n  categories,\n  searchQuery,\n  selectedCategory,\n  viewMode,\n  onSearchChange,\n  onCategoryChange,\n  onViewModeChange,\n  totalResults,\n  t\n}: SearchAndFilterProps) {\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  const [localSearchQuery, setLocalSearchQuery] = useState(searchQuery);\n\n  // é˜²æŠ–æœç´¢\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      onSearchChange(localSearchQuery);\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, [localSearchQuery, onSearchChange]);\n\n  const handleClearSearch = () => {\n    setLocalSearchQuery('');\n    onSearchChange('');\n  };\n\n  const handleClearFilters = () => {\n    setLocalSearchQuery('');\n    onSearchChange('');\n    onCategoryChange('all');\n    setIsFilterOpen(false);\n  };\n\n  const hasActiveFilters = searchQuery || selectedCategory !== 'all';\n\n  return (\n    <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 mb-8\">\n      {/* æœç´¢æ  */}\n      <div className=\"flex items-center gap-4 mb-4\">\n        <div className=\"flex-1 relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n          <input\n            type=\"text\"\n            value={localSearchQuery}\n            onChange={(e) => setLocalSearchQuery(e.target.value)}\n            placeholder={t('pdfCenter.search.placeholder')}\n            className=\"w-full pl-10 pr-10 py-3 bg-white/50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all\"\n          />\n          {localSearchQuery && (\n            <button\n              onClick={handleClearSearch}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <X className=\"w-4 h-4 text-gray-400\" />\n            </button>\n          )}\n        </div>\n\n        {/* ç­›é€‰æŒ‰é’® */}\n        <button\n          onClick={() => setIsFilterOpen(!isFilterOpen)}\n          className={`\n            flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all\n            ${isFilterOpen || hasActiveFilters\n              ? 'bg-purple-100 text-purple-700 border border-purple-200'\n              : 'bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200'\n            }\n          `}\n        >\n          <Filter className=\"w-5 h-5\" />\n          <span>{t('pdfCenter.filter.title')}</span>\n          {hasActiveFilters && (\n            <div className=\"w-2 h-2 bg-purple-500 rounded-full\" />\n          )}\n        </button>\n\n        {/* è§†å›¾æ¨¡å¼åˆ‡æ¢ */}\n        <div className=\"flex items-center bg-gray-100 rounded-xl p-1\">\n          <button\n            onClick={() => onViewModeChange('grid')}\n            className={`\n              p-2 rounded-lg transition-all\n              ${viewMode === 'grid'\n                ? 'bg-white text-purple-600 shadow-sm'\n                : 'text-gray-600 hover:text-gray-800'\n              }\n            `}\n            title={t('pdfCenter.viewMode.grid')}\n          >\n            <Grid className=\"w-5 h-5\" />\n          </button>\n          <button\n            onClick={() => onViewModeChange('list')}\n            className={`\n              p-2 rounded-lg transition-all\n              ${viewMode === 'list'\n                ? 'bg-white text-purple-600 shadow-sm'\n                : 'text-gray-600 hover:text-gray-800'\n              }\n            `}\n            title={t('pdfCenter.viewMode.list')}\n          >\n            <List className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n\n      {/* ç­›é€‰é¢æ¿ */}\n      {isFilterOpen && (\n        <div className=\"border-t border-gray-200 pt-4 animate-in slide-in-from-top-2 duration-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"font-semibold text-gray-800\">\n              {t('pdfCenter.filter.categories')}\n            </h3>\n            {hasActiveFilters && (\n              <button\n                onClick={handleClearFilters}\n                className=\"text-sm text-purple-600 hover:text-purple-700 font-medium\"\n              >\n                {t('pdfCenter.filter.clearAll')}\n              </button>\n            )}\n          </div>\n\n          {/* åˆ†ç±»ç­›é€‰ */}\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\n            {/* å…¨éƒ¨åˆ†ç±» */}\n            <button\n              onClick={() => onCategoryChange('all')}\n              className={`\n                flex items-center gap-2 p-3 rounded-xl border transition-all text-left\n                ${selectedCategory === 'all'\n                  ? 'bg-purple-50 border-purple-200 text-purple-700'\n                  : 'bg-white/50 border-gray-200 text-gray-700 hover:bg-gray-50'\n                }\n              `}\n            >\n              <span className=\"text-lg\">ğŸ“‹</span>\n              <div>\n                <div className=\"font-medium text-sm\">\n                  {t('pdfCenter.filter.allCategories')}\n                </div>\n                <div className=\"text-xs text-gray-500\">\n                  {totalResults} {t('pdfCenter.filter.items')}\n                </div>\n              </div>\n            </button>\n\n            {/* å„ä¸ªåˆ†ç±» */}\n            {categories.map((category) => (\n              <button\n                key={category.id}\n                onClick={() => onCategoryChange(category.id)}\n                className={`\n                  flex items-center gap-2 p-3 rounded-xl border transition-all text-left\n                  ${selectedCategory === category.id\n                    ? 'bg-purple-50 border-purple-200 text-purple-700'\n                    : 'bg-white/50 border-gray-200 text-gray-700 hover:bg-gray-50'\n                  }\n                `}\n              >\n                <span className=\"text-lg\">{category.icon}</span>\n                <div>\n                  <div className=\"font-medium text-sm\">\n                    {t(category.titleKey)}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {/* è¿™é‡Œå¯ä»¥æ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„æ•°é‡ */}\n                    {t('pdfCenter.filter.category')}\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* ç»“æœç»Ÿè®¡ */}\n      <div className=\"flex items-center justify-between text-sm text-gray-600 mt-4 pt-4 border-t border-gray-200\">\n        <div>\n          {searchQuery ? (\n            <span>\n              {t('pdfCenter.search.resultsFor')} \"<strong>{searchQuery}</strong>\": {totalResults} {t('pdfCenter.search.results')}\n            </span>\n          ) : (\n            <span>\n              {t('pdfCenter.search.showing')} {totalResults} {t('pdfCenter.search.resources')}\n            </span>\n          )}\n        </div>\n\n        {hasActiveFilters && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs\">{t('pdfCenter.filter.activeFilters')}:</span>\n            {searchQuery && (\n              <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs\">\n                {searchQuery}\n                <button onClick={handleClearSearch}>\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </span>\n            )}\n            {selectedCategory !== 'all' && (\n              <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs\">\n                {t(`pdfCenter.categories.${selectedCategory}.title`)}\n                <button onClick={() => onCategoryChange('all')}>\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </span>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/SearchBox.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":40,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":10},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'searchArticles'. Either include it or remove the dependency array.","line":130,"column":6,"nodeType":"ArrayExpression","endLine":130,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [query, articles, searchArticles]","fix":{"range":[3698,3715],"text":"[query, articles, searchArticles]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Search, X } from 'lucide-react';\nimport Link from 'next/link';\nimport { useTranslations } from 'next-intl';\n\n// å®šä¹‰ Article æ¥å£ï¼Œé¿å…å¯¼å…¥ lib/articles\ninterface Article {\n  slug: string;\n  title: string;\n  title_zh?: string;\n  date: string;\n  summary: string;\n  summary_zh?: string;\n  tags: string[];\n  tags_zh?: string[];\n  category: string;\n  category_zh?: string;\n  author: string;\n  featured_image: string;\n  reading_time: string;\n  reading_time_zh?: string;\n  content: string;\n}\n\ninterface SearchBoxProps {\n  articles: Article[];\n  locale: string;\n  placeholder?: string;\n  className?: string;\n}\n\ninterface SearchResult extends Article {\n  matchType: 'title' | 'summary' | 'tag' | 'content';\n  matchText: string;\n}\n\nexport default function SearchBox({ articles, locale, placeholder, className = '' }: SearchBoxProps) {\n  const t = useTranslations('searchBox');\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const searchRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // æœç´¢å‡½æ•°\n  const searchArticles = (searchQuery: string): SearchResult[] => {\n    if (!searchQuery.trim()) return [];\n\n    const query = searchQuery.toLowerCase();\n    const searchResults: SearchResult[] = [];\n\n    articles.forEach(article => {\n      const title = article.title.toLowerCase();\n      const summary = article.summary.toLowerCase();\n      const tags = article.tags.map(tag => tag.toLowerCase());\n      const content = article.content.toLowerCase();\n\n      // æ ‡é¢˜åŒ¹é…ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰\n      if (title.includes(query)) {\n        searchResults.push({\n          ...article,\n          matchType: 'title',\n          matchText: article.title\n        });\n        return;\n      }\n\n      // æ‘˜è¦åŒ¹é…\n      if (summary.includes(query)) {\n        const matchIndex = summary.indexOf(query);\n        const start = Math.max(0, matchIndex - 50);\n        const end = Math.min(summary.length, matchIndex + query.length + 50);\n        const matchText = '...' + article.summary.substring(start, end) + '...';\n        \n        searchResults.push({\n          ...article,\n          matchType: 'summary',\n          matchText\n        });\n        return;\n      }\n\n      // æ ‡ç­¾åŒ¹é…\n      const matchingTag = tags.find(tag => tag.includes(query));\n      if (matchingTag) {\n        searchResults.push({\n          ...article,\n          matchType: 'tag',\n          matchText: article.tags.find(tag => tag.toLowerCase() === matchingTag) || ''\n        });\n        return;\n      }\n\n      // å†…å®¹åŒ¹é…ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰\n      if (content.includes(query)) {\n        const matchIndex = content.indexOf(query);\n        const start = Math.max(0, matchIndex - 100);\n        const end = Math.min(content.length, matchIndex + query.length + 100);\n        const matchText = '...' + article.content.substring(start, end).replace(/[#*]/g, '') + '...';\n        \n        searchResults.push({\n          ...article,\n          matchType: 'content',\n          matchText\n        });\n      }\n    });\n\n    // æŒ‰åŒ¹é…ç±»å‹æ’åºï¼štitle > summary > tag > content\n    const priorityOrder = { title: 4, summary: 3, tag: 2, content: 1 };\n    return searchResults\n      .sort((a, b) => priorityOrder[b.matchType] - priorityOrder[a.matchType])\n      .slice(0, 8); // é™åˆ¶ç»“æœæ•°é‡\n  };\n\n  // å¤„ç†æœç´¢\n  useEffect(() => {\n    if (query.trim()) {\n      const searchResults = searchArticles(query);\n      setResults(searchResults);\n      setIsOpen(true);\n      setSelectedIndex(-1);\n    } else {\n      setResults([]);\n      setIsOpen(false);\n    }\n  }, [query, articles]);\n\n  // å¤„ç†é”®ç›˜å¯¼èˆª\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (!isOpen || results.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev < results.length - 1 ? prev + 1 : 0));\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0 ? prev - 1 : results.length - 1));\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex >= 0 && results[selectedIndex]) {\n          window.location.href = `/${locale}/articles/${results[selectedIndex].slug}`;\n        }\n        break;\n      case 'Escape':\n        setIsOpen(false);\n        setSelectedIndex(-1);\n        inputRef.current?.blur();\n        break;\n    }\n  };\n\n  // ç‚¹å‡»å¤–éƒ¨å…³é—­\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setSelectedIndex(-1);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // æ¸…é™¤æœç´¢\n  const clearSearch = () => {\n    setQuery('');\n    setResults([]);\n    setIsOpen(false);\n    setSelectedIndex(-1);\n    inputRef.current?.focus();\n  };\n\n  // è·å–åŒ¹é…ç±»å‹çš„æ˜¾ç¤ºæ–‡æœ¬\n  const getMatchTypeLabel = (matchType: string) => {\n    const labels = {\n      title: locale === 'en' ? 'Title' : 'æ ‡é¢˜',\n      summary: locale === 'en' ? 'Summary' : 'æ‘˜è¦',\n      tag: locale === 'en' ? 'Tag' : 'æ ‡ç­¾',\n      content: locale === 'en' ? 'Content' : 'å†…å®¹'\n    };\n    return labels[matchType as keyof typeof labels] || '';\n  };\n\n  return (\n    <div ref={searchRef} className={`relative ${className}`}>\n      {/* æœç´¢è¾“å…¥æ¡† */}\n      <div className=\"relative\">\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <Search className=\"h-5 w-5 text-gray-400\" />\n        </div>\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          onKeyDown={handleKeyDown}\n          onFocus={() => query && setIsOpen(true)}\n          placeholder={placeholder || (locale === 'en' ? 'Search articles...' : 'æœç´¢æ–‡ç« ...')}\n          className=\"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500\"\n        />\n        {query && (\n          <button\n            onClick={clearSearch}\n            className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\n          >\n            <X className=\"h-5 w-5 text-gray-400 hover:text-gray-600\" />\n          </button>\n        )}\n      </div>\n\n      {/* æœç´¢ç»“æœä¸‹æ‹‰æ¡† */}\n      {isOpen && results.length > 0 && (\n        <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto\">\n          {results.map((result, index) => (\n            <Link\n              key={`${result.slug}-${result.matchType}`}\n              href={`/${locale}/articles/${result.slug}`}\n              className={`block px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${\n                index === selectedIndex ? 'bg-pink-50' : ''\n              }`}\n              onClick={() => {\n                setIsOpen(false);\n                setQuery('');\n              }}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1 min-w-0\">\n                  <h4 className=\"text-sm font-medium text-gray-900 truncate\">\n                    {result.title}\n                  </h4>\n                  <p className=\"text-xs text-gray-500 mt-1 line-clamp-2\">\n                    {result.matchText}\n                  </p>\n                  <div className=\"flex items-center mt-2 space-x-2\">\n                    <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${\n                      result.matchType === 'title' ? 'bg-pink-100 text-pink-800' :\n                      result.matchType === 'summary' ? 'bg-blue-100 text-blue-800' :\n                      result.matchType === 'tag' ? 'bg-green-100 text-green-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {getMatchTypeLabel(result.matchType)}\n                    </span>\n                    <span className=\"text-xs text-gray-400\">\n                      {result.reading_time}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n\n      {/* æ— ç»“æœæç¤º */}\n      {isOpen && query && results.length === 0 && (\n        <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4\">\n          <p className=\"text-sm text-gray-500 text-center\">\n            {locale === 'en' ? 'No articles found' : 'æœªæ‰¾åˆ°ç›¸å…³æ–‡ç« '}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/SimplePDFCenter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Share2' is defined but never used.","line":4,"column":67,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":73},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Eye' is defined but never used.","line":4,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":78},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BookOpen' is defined but never used.","line":4,"column":80,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":88},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'generatePDFHTML' is assigned a value but never used.","line":344,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":344,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CategorySection' is assigned a value but never used.","line":1264,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":1264,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1264,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1264,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52082,52085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52082,52085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1341,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1341,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[55505,55508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[55505,55508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { Search, Clock, AlertCircle, Brain, TrendingUp, Download, Share2, Eye, BookOpen } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport { useTranslations } from 'next-intl';\nimport { Locale } from '@/i18n';\nimport { SITE_CONFIG } from '@/config/site.config';\nimport { PDF_RESOURCES } from '@/config/pdfResources';\n\ninterface SimplePDFCenterProps {\n  locale: Locale;\n}\n\ninterface Resource {\n  id: string;\n  title: string;\n  type: 'article' | 'pdf';\n  readTime?: string;\n  category: string;\n  keywords?: string;\n  description?: string;\n}\n\nconst SimplePDFCenter: React.FC<SimplePDFCenterProps> = ({ locale }) => {\n  const [activeCategory, setActiveCategory] = useState('immediate');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loadingStates, setLoadingStates] = useState<Record<string, boolean>>({});\n  const [isEmergencyMode, setIsEmergencyMode] = useState(false);\n  const router = useRouter();\n  \n  // ğŸŒ ç¿»è¯‘ç³»ç»Ÿ\n  const t = useTranslations('simplePdfCenter');\n  \n  // ğŸš¨ ç´§æ€¥å…³é”®è¯æ£€æµ‹ç³»ç»Ÿ\n  const urgentKeywords = [\n    \"ç–¼\", \"ç—›\", \"ç°åœ¨\", \"é©¬ä¸Š\", \"ç¼“è§£\", \"ç´§æ€¥\", \"æ€¥\", \"å¿«\", \"ç«‹å³\", \"ç«‹åˆ»\",\n    \"çƒ­æ•·\", \"æ•·çƒ­æ°´è¢‹\", \"æš–å®å®\", \"æŒ‰æ‘©\", \"æ‰è‚šå­\", \"æ­¢ç—›è¯\",\n    \"çƒ­ç–—æ³•\", \"çƒ­ç–—\", \"æ¸©çƒ­ç–—æ³•\", \"çƒ­æ•·ç–—æ³•\", \"çƒ­æ•·æ²»ç–—\",\n    \"ç–¼ç—›\", \"ç—›ç»\", \"ç»æœŸç–¼ç—›\", \"æœˆç»ç—›\", \"ç”Ÿç†ç—›\"\n  ];\n  \n  // ğŸ” 6ä¸ªç”¨æˆ·æœç´¢å…³é”®è¯æ˜ å°„ç³»ç»Ÿ\n  const userSearchKeywords = {\n    [t('simplePdfCenter.userSearchKeywords.heatTherapy.keyword')]: { \n      targetContent: t('simplePdfCenter.userSearchKeywords.heatTherapy.targetContent'), \n      category: 'immediate', \n      priority: 'high',\n      autoRedirect: true\n    },\n    [t('simplePdfCenter.userSearchKeywords.warmWaterBottle.keyword')]: { \n      targetContent: t('simplePdfCenter.userSearchKeywords.warmWaterBottle.targetContent'), \n      category: 'immediate', \n      priority: 'high',\n      autoRedirect: true\n    },\n    [t('simplePdfCenter.userSearchKeywords.warmPatch.keyword')]: { \n      targetContent: t('simplePdfCenter.userSearchKeywords.warmPatch.targetContent'), \n      category: 'immediate', \n      priority: 'high',\n      autoRedirect: true\n    },\n    [t('simplePdfCenter.userSearchKeywords.massage.keyword')]: { \n      targetContent: t('simplePdfCenter.userSearchKeywords.massage.targetContent'), \n      category: 'immediate', \n      priority: 'high',\n      autoRedirect: true\n    },\n    [t('simplePdfCenter.userSearchKeywords.bellyMassage.keyword')]: { \n      targetContent: t('simplePdfCenter.userSearchKeywords.bellyMassage.targetContent'), \n      category: 'immediate', \n      priority: 'high',\n      autoRedirect: true\n    },\n    [t('simplePdfCenter.userSearchKeywords.painkiller.keyword')]: { \n      targetContent: t('simplePdfCenter.userSearchKeywords.painkiller.targetContent'), \n      category: 'immediate', \n      priority: 'high',\n      autoRedirect: true\n    }\n  };\n\n  // ğŸš¨ ç´§æ€¥æ¨¡å¼æ£€æµ‹å‡½æ•°\n  const detectEmergencyMode = (searchTerm: string) => {\n    const hasUrgentKeyword = urgentKeywords.some(keyword => \n      searchTerm.toLowerCase().includes(keyword.toLowerCase())\n    );\n    \n    if (hasUrgentKeyword && !isEmergencyMode) {\n      setIsEmergencyMode(true);\n      setActiveCategory('immediate');\n      console.log(t('simplePdfCenter.consoleMessages.emergencyModeActivated'));\n    } else if (!hasUrgentKeyword && isEmergencyMode) {\n      setIsEmergencyMode(false);\n    }\n  };\n\n  // ğŸ” æ™ºèƒ½æœç´¢å¤„ç†å‡½æ•°\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setSearchTerm(value);\n    \n    // æ£€æµ‹ç´§æ€¥æ¨¡å¼\n    detectEmergencyMode(value);\n    \n    // æ£€æŸ¥6ä¸ªå…³é”®è¯æ˜ å°„\n    if (value.trim()) {\n      const matchedKeyword = Object.keys(userSearchKeywords).find(keyword => \n        value.toLowerCase().includes(keyword.toLowerCase())\n      );\n      \n      if (matchedKeyword) {\n        const mapping = userSearchKeywords[matchedKeyword as keyof typeof userSearchKeywords];\n        if (mapping.autoRedirect) {\n          setActiveCategory(mapping.category);\n          console.log(`ğŸ¯ è‡ªåŠ¨è·³è½¬åˆ°åˆ†ç±»: ${mapping.category} - ${mapping.targetContent}`);\n        }\n      }\n    }\n  };\n  \n  // è®¡ç®—æ€»èµ„æºæ•°\n  const totalResources = SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources;\n\n  // ğŸš€ Phase 1: ä¿®å¤åçš„æ–‡ç« IDåˆ°slugæ˜ å°„è¡¨ï¼ˆåŸºäºå®é™…æ–‡ä»¶ï¼‰\n  const articleIdToSlugMap: Record<string, string> = {\n    // å³æ—¶ç¼“è§£ç±»æ–‡ç«  (7ç¯‡) - åŸºäºå®é™…èµ„æºå®šä¹‰\n    'immediate-1': '5-minute-period-pain-relief',                    // 5åˆ†é’Ÿå¿«é€Ÿç¼“è§£ç—›ç»æŠ€å·§\n    'immediate-2': 'heat-therapy-complete-guide',                    // çƒ­ç–—å®Œæ•´æŒ‡å—\n    'immediate-3': 'menstrual-pain-vs-other-abdominal-pain-guide',   // ç»æœŸç–¼ç—›ä¸å…¶ä»–è…¹ç—›é‰´åˆ«æŒ‡å—\n    'immediate-4': 'natural-physical-therapy-comprehensive-guide',   // è‡ªç„¶ç‰©ç†ç–—æ³•ç»¼åˆæŒ‡å—\n    'immediate-5': 'ginger-menstrual-pain-relief-guide',            // ç”Ÿå§œç»æœŸç–¼ç—›ç¼“è§£æŒ‡å—\n    'immediate-6': 'nsaid-menstrual-pain-professional-guide',       // éç”¾ä½“æŠ—ç‚è¯ä¸“ä¸šæŒ‡å—\n    'immediate-7': 'specific-menstrual-pain-management-guide',      // ç‰¹å®šç—›ç»ç®¡ç†æŒ‡å—\n\n    // è®¡åˆ’å‡†å¤‡ç±»æ–‡ç«  (7ç¯‡) - åŸºäºå®é™…èµ„æºå®šä¹‰\n    'preparation-1': 'menstrual-preventive-care-complete-plan',     // ç»æœŸé¢„é˜²æ€§æŠ¤ç†å®Œå…¨æ–¹æ¡ˆ\n    'preparation-2': 'comprehensive-menstrual-sleep-quality-guide', // ç»æœŸç¡çœ è´¨é‡å…¨é¢æ”¹å–„æŒ‡å—\n    'preparation-3': 'menstrual-stress-management-complete-guide',  // ç»æœŸå‹åŠ›ç®¡ç†å®Œå…¨æŒ‡å—\n    'preparation-4': 'zhan-zhuang-baduanjin-for-menstrual-pain-relief', // ç«™æ¡©å…«æ®µé”¦ç»æœŸç–¼ç—›ç¼“è§£\n    'preparation-5': 'anti-inflammatory-diet-period-pain',          // æŠ—ç‚é¥®é£Ÿä¸ç»æœŸç–¼ç—›\n    'preparation-6': 'magnesium-gut-health-comprehensive-guide',    // é•ä¸è‚ é“å¥åº·ç»¼åˆæŒ‡å—\n    'preparation-7': 'period-friendly-recipes',                     // ç»æœŸå‹å¥½é£Ÿè°±\n\n    // æ·±å…¥äº†è§£ç±»æ–‡ç«  (13ç¯‡) - åŸºäºå®é™…èµ„æºå®šä¹‰\n    'learning-1': 'womens-lifecycle-menstrual-pain-analysis',       // å¥³æ€§ç”Ÿå‘½å‘¨æœŸç—›ç»ç‰¹ç‚¹å…¨è§£æ\n    'learning-2': 'menstrual-pain-research-progress-2024',          // 2024å¹´ç—›ç»ç ”ç©¶è¿›å±•æŠ¥å‘Š\n    'learning-3': 'understanding-your-cycle',                       // äº†è§£æ‚¨çš„ç”Ÿç†å‘¨æœŸ\n    'learning-4': 'us-menstrual-pain-insurance-coverage-guide',     // ç¾å›½ç—›ç»æ²»ç–—åŒ»ç–—ä¿é™©è¦†ç›–æŒ‡å—\n    'learning-5': 'hidden-culprits-of-menstrual-pain',             // ç»æœŸç–¼ç—›çš„éšè—å…ƒå‡¶\n    'learning-6': 'menstrual-pain-faq-expert-answers',             // ç»æœŸç–¼ç—›å¸¸è§é—®é¢˜ä¸“å®¶è§£ç­”\n    'learning-7': 'when-to-see-doctor-period-pain',                // ä½•æ—¶å°±åŒ»ï¼šç»æœŸç–¼ç—›è­¦ç¤ºä¿¡å·\n    'learning-8': 'when-to-seek-medical-care-comprehensive-guide', // ä½•æ—¶å¯»æ±‚åŒ»ç–—æŠ¤ç†ç»¼åˆæŒ‡å—\n    'learning-9': 'comprehensive-medical-guide-to-dysmenorrhea',   // ç—›ç»ç»¼åˆåŒ»å­¦æŒ‡å—\n    'learning-10': 'menstrual-pain-complications-management',      // ç»æœŸç–¼ç—›å¹¶å‘ç—‡ç®¡ç†\n    'learning-11': 'comprehensive-iud-guide',                      // å®«å†…èŠ‚è‚²å™¨ç»¼åˆæŒ‡å—\n    'learning-12': 'menstrual-pain-medical-guide',                 // å¾ªè¯åŒ»å­¦ç—›ç»æŒ‡å—\n    'learning-13': 'essential-oils-aromatherapy-menstrual-pain-guide', // ç²¾æ²¹èŠ³ç–—ç»æœŸç–¼ç—›æŒ‡å—\n\n    // é•¿æœŸç®¡ç†ç±»æ–‡ç«  (9ç¯‡) - åŸºäºå®é™…èµ„æºå®šä¹‰\n    'management-1': 'long-term-healthy-lifestyle-guide',           // é•¿æœŸç®¡ç†ç­–ç•¥\n    'management-2': 'comprehensive-menstrual-sleep-quality-guide', // ç”Ÿæ´»æ–¹å¼ä¼˜åŒ–\n    'management-3': 'personal-menstrual-health-profile',           // å¥åº·ç›‘æµ‹ç³»ç»Ÿ\n    'management-4': 'menstrual-preventive-care-complete-plan',     // é¢„é˜²æªæ–½å®æ–½\n    'management-5': 'comprehensive-report-non-medical-factors-menstrual-pain', // å¯æŒç»­å®è·µæ–¹æ³•\n    'management-6': 'global-traditional-menstrual-pain-relief',    // ç¤¾åŒºæ”¯æŒç½‘ç»œ\n    'management-7': 'comprehensive-medical-guide-to-dysmenorrhea', // ä¸“ä¸šæŒ‡å¯¼æœåŠ¡\n    'management-8': 'period-pain-simulator-accuracy-analysis',     // æŠ€æœ¯é›†æˆåº”ç”¨\n    'management-9': 'medication-vs-natural-remedies-menstrual-pain' // è´¨é‡æŒç»­æ”¹è¿›\n  };\n\n  const handleArticleRead = (articleId: string) => {\n    setLoadingStates(prev => ({ ...prev, [articleId]: true }));\n\n    // ä½¿ç”¨æ˜ å°„è¡¨è·å–æ­£ç¡®çš„slug\n    const slug = articleIdToSlugMap[articleId];\n\n    if (!slug) {\n      console.error(`No slug found for article ID: ${articleId}`);\n      setLoadingStates(prev => ({ ...prev, [articleId]: false }));\n      return;\n    }\n\n    try {\n      router.push(`/${locale}/articles/${slug}`);\n    } catch (error) {\n      console.error('Navigation error:', error);\n      setLoadingStates(prev => ({ ...prev, [articleId]: false }));\n    }\n  };\n\n  // ğŸ”§ PDF IDæ˜ å°„ï¼šSimplePDFCenter ID -> é¢„è§ˆç³»ç»Ÿæ”¯æŒçš„ID (æ‰©å±•åˆ°30ä¸ªPDF)\n  const pdfIdToPreviewIdMap: Record<string, string> = {\n    // å³æ—¶ç¼“è§£PDF (7ä¸ªï¼š3ä¸ªç°æœ‰ + 4ä¸ªæ–°å¢)\n    'immediate-pdf-1': 'pain-tracking-form',                    // ç–¼ç—›è¿½è¸ªè¡¨æ ¼\n    'immediate-pdf-2': 'campus-emergency-checklist',           // æ ¡å›­ç´§æ€¥æ£€æŸ¥æ¸…å•\n    'immediate-pdf-3': 'specific-menstrual-pain-management-guide', // ç‰¹å®šç—›ç»ç®¡ç†æŒ‡å—PDF\n    'immediate-pdf-4': 'emergency-pain-relief-card',           // ç´§æ€¥ç–¼ç—›ç¼“è§£å¡ç‰‡\n    'immediate-pdf-5': '5-minute-relief-checklist',            // 5åˆ†é’Ÿå¿«é€Ÿç¼“è§£æ£€æŸ¥æ¸…å•\n    'immediate-pdf-6': 'heat-therapy-guide-pdf',               // çƒ­ç–—å®Œæ•´æŒ‡å—PDFç‰ˆ\n    'immediate-pdf-7': 'workplace-relief-toolkit',             // èŒåœºç–¼ç—›ç¼“è§£å·¥å…·åŒ…\n\n    // è®¡åˆ’å‡†å¤‡PDF (7ä¸ªï¼š4ä¸ªç°æœ‰ + 3ä¸ªæ–°å¢)\n    'preparation-pdf-1': 'healthy-habits-checklist',           // å¥åº·ä¹ æƒ¯æ£€æŸ¥æ¸…å•\n    'preparation-pdf-2': 'menstrual-cycle-nutrition-plan',     // ç»æœŸè¥å…»è®¡åˆ’\n    'preparation-pdf-3': 'magnesium-gut-health-menstrual-pain-guide',         // é•ä¸è‚ é“å¥åº·æŒ‡å—\n    'preparation-pdf-4': 'zhan-zhuang-baduanjin-illustrated-guide', // ç«™æ¡©å…«æ®µé”¦å›¾è§£æŒ‡å—\n    'preparation-pdf-5': 'monthly-preparation-planner',        // æœˆåº¦å‡†å¤‡è®¡åˆ’è¡¨\n    'preparation-pdf-6': 'stress-management-workbook',         // å‹åŠ›ç®¡ç†å·¥ä½œå†Œ\n    'preparation-pdf-7': 'sleep-quality-improvement-guide',    // ç¡çœ è´¨é‡æ”¹å–„æŒ‡å—\n\n    // å­¦ä¹ ç†è§£PDF (10ä¸ªï¼š6ä¸ªç°æœ‰ + 4ä¸ªæ–°å¢)\n    'learning-pdf-1': 'natural-therapy-assessment',            // è‡ªç„¶ç–—æ³•è¯„ä¼°è¡¨\n    'learning-pdf-2': 'menstrual-pain-complications-management', // ç—›ç»å¹¶å‘ç—‡ç®¡ç†\n    'learning-pdf-3': 'teacher-health-manual',                 // æ•™å¸ˆå¥åº·æ‰‹å†Œ\n    'learning-pdf-4': 'teacher-collaboration-handbook',        // æ•™å¸ˆåä½œæ‰‹å†Œ\n    'learning-pdf-5': 'parent-communication-guide',            // å®¶é•¿æ²Ÿé€šæŒ‡å—\n    'learning-pdf-6': 'pain-tracking-form',                    // ç¾å›½ä¿é™©å¿«é€Ÿå‚è€ƒå¡ (å¤ç”¨)\n    'learning-pdf-7': 'menstrual-cycle-education-guide',       // æœˆç»å‘¨æœŸæ•™è‚²æŒ‡å—\n    'learning-pdf-8': 'pain-research-summary-2024',            // 2024ç—›ç»ç ”ç©¶æ‘˜è¦\n    'learning-pdf-9': 'medical-consultation-preparation',      // å°±åŒ»å’¨è¯¢å‡†å¤‡æŒ‡å—\n    'learning-pdf-10': 'global-health-perspectives',           // å…¨çƒå¥åº·è§†è§’æŠ¥å‘Š\n\n    // é•¿æœŸç®¡ç†PDF (6ä¸ªï¼šå…¨æ–°åˆ†ç±»)\n    'management-pdf-1': 'long-term-health-planner',            // é•¿æœŸå¥åº·è§„åˆ’å¸ˆ\n    'management-pdf-2': 'personal-health-journal',             // ä¸ªäººå¥åº·æ—¥è®°æ¨¡æ¿\n    'management-pdf-3': 'nutrition-meal-planning-kit',         // è¥å…»è†³é£Ÿè§„åˆ’å·¥å…·åŒ…\n    'management-pdf-4': 'exercise-routine-builder',            // è¿åŠ¨è®¡åˆ’æ„å»ºå™¨\n    'management-pdf-5': 'lifestyle-assessment-toolkit',        // ç”Ÿæ´»æ–¹å¼è¯„ä¼°å·¥å…·åŒ…\n    'management-pdf-6': 'sustainable-health-strategies'        // å¯æŒç»­å¥åº·ç­–ç•¥æŒ‡å—\n  };\n\n  const handlePDFPreview = (pdfId: string) => {\n    setLoadingStates(prev => ({ ...prev, [`${pdfId}-preview`]: true }));\n\n    // ä½¿ç”¨æ˜ å°„è¡¨è·å–æ­£ç¡®çš„é¢„è§ˆID\n    const previewId = pdfIdToPreviewIdMap[pdfId];\n\n    if (!previewId) {\n      console.error(`No preview ID found for PDF: ${pdfId}`);\n      setLoadingStates(prev => ({ ...prev, [`${pdfId}-preview`]: false }));\n      return;\n    }\n\n    try {\n      router.push(`/${locale}/downloads/preview/${previewId}`);\n    } catch (error) {\n      console.error('Preview navigation error:', error);\n      setLoadingStates(prev => ({ ...prev, [`${pdfId}-preview`]: false }));\n    }\n  };\n\n  const handlePDFDownload = async (pdfId: string, title: string) => {\n    setLoadingStates(prev => ({ ...prev, [`${pdfId}-download`]: true }));\n\n    try {\n      // ğŸš€ ä¿®å¤ï¼šä½¿ç”¨å’Œé¢„è§ˆé¡µé¢ç›¸åŒçš„æ˜ å°„é€»è¾‘\n      const previewId = pdfIdToPreviewIdMap[pdfId];\n      \n      if (!previewId) {\n        console.error(`No preview ID found for PDF: ${pdfId}`);\n        alert(t('alerts.resourceMappingError'));\n        return;\n      }\n\n      // æ„å»ºHTMLæ–‡ä»¶è·¯å¾„ï¼ˆä½¿ç”¨å’Œé¢„è§ˆé¡µé¢ç›¸åŒçš„é€»è¾‘ï¼‰\n      let htmlFilename = `${previewId}.html`;\n      if (locale === 'en' && !htmlFilename.includes('-en')) {\n        htmlFilename = htmlFilename.replace('.html', '-en.html');\n      }\n      \n      const fetchUrl = `/pdf-files/${htmlFilename}`;\n      console.log(`æ­£åœ¨è·å–PDFå†…å®¹: ${fetchUrl}`);\n\n      // ä»æœåŠ¡å™¨è·å–å®é™…HTMLå†…å®¹\n      const response = await fetch(fetchUrl);\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch PDF content: ${response.status} ${response.statusText}`);\n      }\n\n      const htmlContent = await response.text();\n      \n      // éªŒè¯å†…å®¹ä¸ä¸ºç©º\n      if (!htmlContent || htmlContent.trim().length < 100) {\n        throw new Error('PDF content is empty or too short');\n      }\n\n      // åˆ›å»ºä¸‹è½½\n      const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });\n      const url = URL.createObjectURL(blob);\n\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `${title.replace(/[^a-zA-Z0-9\\u4e00-\\u9fff]/g, '-')}.html`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n\n      console.log(`PDFä¸‹è½½æˆåŠŸ: ${title}`);\n\n    } catch (error) {\n      console.error(t('simplePdfCenter.consoleMessages.pdfDownloadError'), error);\n      alert(t('alerts.downloadFailed'));\n    } finally {\n      setLoadingStates(prev => ({ ...prev, [`${pdfId}-download`]: false }));\n    }\n  };\n\n  const handleShare = async (resourceId: string, title: string, type: 'article' | 'pdf') => {\n    const baseUrl = window.location.origin;\n    const shareUrl = type === 'article'\n      ? `${baseUrl}/${locale}/articles/${resourceId.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`\n      : `${baseUrl}/${locale}/downloads/preview/${resourceId}`;\n\n    const shareData = {\n      title: title,\n      text: locale === 'zh' ? `æ¥è‡ª Period Hub çš„èµ„æºï¼š${title}` : `Resource from Period Hub: ${title}`,\n      url: shareUrl\n    };\n\n    try {\n      if (navigator.share && navigator.canShare(shareData)) {\n        await navigator.share(shareData);\n      } else {\n        // é™çº§åˆ°å¤åˆ¶é“¾æ¥\n        await navigator.clipboard.writeText(shareUrl);\n        alert(t('alerts.linkCopied'));\n      }\n    } catch (error) {\n      console.error('Share error:', error);\n      // æœ€åçš„é™çº§æ–¹æ¡ˆ\n      try {\n        await navigator.clipboard.writeText(shareUrl);\n        alert(t('alerts.linkCopied'));\n      } catch (clipboardError) {\n        console.error('Clipboard error:', clipboardError);\n      }\n    }\n  };\n\n  // ç”ŸæˆPDFçš„HTMLå†…å®¹ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰\n  const generatePDFHTML = (pdfId: string, title: string, locale: string) => {\n    return `\n<!DOCTYPE html>\n<html lang=\"${locale}\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${title} - Period Hub</title>\n    <style>\n        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; margin: 40px; }\n        .header { border-bottom: 2px solid #9333ea; padding-bottom: 20px; margin-bottom: 30px; }\n        .title { color: #9333ea; font-size: 24px; font-weight: bold; }\n        .content { max-width: 800px; }\n        @media print { body { margin: 20px; } }\n        @media (max-width: 768px) { body { margin: 20px; } .title { font-size: 20px; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1 class=\"title\">${title}</h1>\n        <p>${t('share.source')}</p>\n    </div>\n    <div class=\"content\">\n        <p>${t('share.underDevelopment')}</p>\n        <p>${t('share.moreInfo')} <a href=\"https://periodhub.health\">periodhub.health</a></p>\n    </div>\n</body>\n</html>`;\n  };\n\n  // ğŸ”¥ åº”ç”¨ç±»å‹å®‰å…¨çš„ç¿»è¯‘æ ¸å¿ƒ - æ¶ˆé™¤ç¡¬ç¼–ç \n  const getCategoryTitle = (key: string) => {\n    const titles = {\n      immediate: t('categories.immediate'),\n      preparation: t('categories.preparation'),\n      learning: t('categories.learning'),\n      management: t('categories.management')\n    };\n    return titles[key as keyof typeof titles] || key;\n  };\n\n  const getCategorySubtitle = (key: string) => {\n    const subtitles = {\n      immediate: t('subtitles.immediate'),\n      preparation: t('subtitles.preparation'),\n      learning: t('subtitles.learning'),\n      management: t('subtitles.management')\n    };\n    return subtitles[key as keyof typeof subtitles] || key;\n  };\n\n  // ğŸš€ é˜¶æ®µ1ï¼šå³æ—¶ç¼“è§£ç±»èµ„æºæ•°æ®ç”Ÿæˆå™¨\n  const generateImmediateResources = () => {\n    const articles = [\n        {\n          id: 'immediate-1',\n        title: t('immediate.articles.quickRelief.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.quickRelief.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.quickRelief.keywords'),\n        description: t('immediate.articles.quickRelief.description')\n        },\n        {\n          id: 'immediate-2',\n        title: t('immediate.articles.heatTherapy.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.heatTherapy.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.heatTherapy.keywords'),\n        description: t('immediate.articles.heatTherapy.description')\n        },\n        {\n          id: 'immediate-3',\n        title: t('immediate.articles.painVsOther.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.painVsOther.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.painVsOther.keywords'),\n        description: t('immediate.articles.painVsOther.description')\n        },\n        {\n          id: 'immediate-4',\n        title: t('immediate.articles.naturalTherapy.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.naturalTherapy.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.naturalTherapy.keywords'),\n        description: t('immediate.articles.naturalTherapy.description')\n        },\n        {\n          id: 'immediate-5',\n        title: t('immediate.articles.gingerRelief.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.gingerRelief.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.gingerRelief.keywords'),\n        description: t('immediate.articles.gingerRelief.description')\n        },\n        {\n          id: 'immediate-6',\n        title: t('immediate.articles.nsaidGuide.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.nsaidGuide.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.nsaidGuide.keywords'),\n        description: t('immediate.articles.nsaidGuide.description')\n        },\n        {\n          id: 'immediate-7',\n        title: t('immediate.articles.specificManagement.title'),\n          type: 'article' as const,\n        readTime: t('immediate.articles.specificManagement.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.articles.specificManagement.keywords'),\n        description: t('immediate.articles.specificManagement.description')\n      }\n    ];\n\n    const pdfs = [\n        {\n          id: 'immediate-pdf-1',\n        title: t('immediate.pdfs.painTrackingForm.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.painTrackingForm.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.painTrackingForm.keywords'),\n        description: t('immediate.pdfs.painTrackingForm.description')\n        },\n        {\n          id: 'immediate-pdf-2',\n        title: t('immediate.pdfs.campusChecklist.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.campusChecklist.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.campusChecklist.keywords'),\n        description: t('immediate.pdfs.campusChecklist.description')\n        },\n        {\n          id: 'immediate-pdf-3',\n        title: t('immediate.pdfs.specificPainManagementPdf.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.specificPainManagementPdf.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.specificPainManagementPdf.keywords'),\n        description: t('immediate.pdfs.specificPainManagementPdf.description')\n        },\n        {\n          id: 'immediate-pdf-4',\n        title: t('immediate.pdfs.emergencyPainReliefCard.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.emergencyPainReliefCard.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.emergencyPainReliefCard.keywords'),\n        description: t('immediate.pdfs.emergencyPainReliefCard.description')\n        },\n        {\n          id: 'immediate-pdf-5',\n        title: t('immediate.pdfs.fiveMinuteReliefChecklist.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.fiveMinuteReliefChecklist.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.fiveMinuteReliefChecklist.keywords'),\n        description: t('immediate.pdfs.fiveMinuteReliefChecklist.description')\n        },\n        {\n          id: 'immediate-pdf-6',\n        title: t('immediate.pdfs.heatTherapyGuidePdf.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.heatTherapyGuidePdf.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.heatTherapyGuidePdf.keywords'),\n        description: t('immediate.pdfs.heatTherapyGuidePdf.description')\n        },\n        {\n          id: 'immediate-pdf-7',\n        title: t('immediate.pdfs.workplaceReliefToolkit.title'),\n          type: 'pdf' as const,\n        readTime: t('immediate.pdfs.workplaceReliefToolkit.readTime'),\n          category: 'immediate',\n        keywords: t('immediate.pdfs.workplaceReliefToolkit.keywords'),\n        description: t('immediate.pdfs.workplaceReliefToolkit.description')\n      }\n    ];\n\n    return [...articles, ...pdfs];\n  };\n\n  // ğŸš€ é˜¶æ®µ2ï¼šè®¡åˆ’å‡†å¤‡ç±»èµ„æºæ•°æ®ç”Ÿæˆå™¨\n  const generatePreparationResources = () => {\n    const articles = [\n        {\n          id: 'preparation-1',\n        title: t('preparation.articles.preventiveCare.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.preventiveCare.readTime'),\n        category: 'preparation',\n        keywords: t('preparation.articles.preventiveCare.keywords'),\n        description: t('preparation.articles.preventiveCare.description')\n        },\n        {\n          id: 'preparation-2',\n        title: t('preparation.articles.sleepQuality.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.sleepQuality.readTime'),\n        category: 'preparation',\n        keywords: t('preparation.articles.sleepQuality.keywords'),\n        description: t('preparation.articles.sleepQuality.description')\n        },\n        {\n          id: 'preparation-3',\n        title: t('preparation.articles.stressManagement.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.stressManagement.readTime'),\n        category: 'preparation',\n        keywords: t('preparation.articles.stressManagement.keywords'),\n        description: t('preparation.articles.stressManagement.description')\n        },\n        {\n          id: 'preparation-4',\n        title: t('preparation.articles.baduanjinExercise.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.baduanjinExercise.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.articles.baduanjinExercise.keywords'),\n        description: t('preparation.articles.baduanjinExercise.description')\n        },\n        {\n          id: 'preparation-5',\n        title: t('preparation.articles.antiInflammatoryDiet.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.antiInflammatoryDiet.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.articles.antiInflammatoryDiet.keywords'),\n        description: t('preparation.articles.antiInflammatoryDiet.description')\n        },\n        {\n          id: 'preparation-6',\n        title: t('preparation.articles.magnesiumGutHealth.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.magnesiumGutHealth.readTime'),\n        category: 'preparation',\n        keywords: t('preparation.articles.magnesiumGutHealth.keywords'),\n        description: t('preparation.articles.magnesiumGutHealth.description')\n        },\n        {\n          id: 'preparation-7',\n        title: t('preparation.articles.periodFriendlyRecipes.title'),\n          type: 'article' as const,\n        readTime: t('preparation.articles.periodFriendlyRecipes.readTime'),\n        category: 'preparation',\n        keywords: t('preparation.articles.periodFriendlyRecipes.keywords'),\n        description: t('preparation.articles.periodFriendlyRecipes.description')\n      }\n    ];\n\n    const pdfs = [\n        {\n          id: 'preparation-pdf-1',\n        title: t('preparation.pdfs.healthyHabitsChecklist.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.healthyHabitsChecklist.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.healthyHabitsChecklist.keywords'),\n        description: t('preparation.pdfs.healthyHabitsChecklist.description')\n        },\n        {\n          id: 'preparation-pdf-2',\n        title: t('preparation.pdfs.nutritionPlan.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.nutritionPlan.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.nutritionPlan.keywords'),\n        description: t('preparation.pdfs.nutritionPlan.description')\n        },\n        {\n          id: 'preparation-pdf-3',\n        title: t('preparation.pdfs.magnesiumGuide.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.magnesiumGuide.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.magnesiumGuide.keywords'),\n        description: t('preparation.pdfs.magnesiumGuide.description')\n        },\n        {\n          id: 'preparation-pdf-4',\n        title: t('preparation.pdfs.baduanjinGuide.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.baduanjinGuide.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.baduanjinGuide.keywords'),\n        description: t('preparation.pdfs.baduanjinGuide.description')\n        },\n        {\n          id: 'preparation-pdf-5',\n        title: t('preparation.pdfs.monthlyPlanner.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.monthlyPlanner.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.monthlyPlanner.keywords'),\n        description: t('preparation.pdfs.monthlyPlanner.description')\n        },\n        {\n          id: 'preparation-pdf-6',\n        title: t('preparation.pdfs.stressWorkbook.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.stressWorkbook.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.stressWorkbook.keywords'),\n        description: t('preparation.pdfs.stressWorkbook.description')\n        },\n        {\n          id: 'preparation-pdf-7',\n        title: t('preparation.pdfs.sleepGuide.title'),\n          type: 'pdf' as const,\n        readTime: t('preparation.pdfs.sleepGuide.readTime'),\n          category: 'preparation',\n        keywords: t('preparation.pdfs.sleepGuide.keywords'),\n        description: t('preparation.pdfs.sleepGuide.description')\n      }\n    ];\n\n    return [...articles, ...pdfs];\n  };\n\n  // ğŸš€ é˜¶æ®µ3ï¼šå­¦ä¹ ç†è§£ç±»èµ„æºæ•°æ®ç”Ÿæˆå™¨\n  const generateLearningResources = () => {\n    const articles = [\n      {\n        id: 'learning-1',\n        title: t('learning.articles.lifecycleAnalysis.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.lifecycleAnalysis.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.lifecycleAnalysis.keywords'),\n        description: t('learning.articles.lifecycleAnalysis.description')\n      },\n      {\n        id: 'learning-2',\n        title: t('learning.articles.painMechanism.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.painMechanism.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.painMechanism.keywords'),\n        description: t('learning.articles.painMechanism.description')\n      },\n      {\n        id: 'learning-3',\n        title: t('learning.articles.hormoneBalance.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.hormoneBalance.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.hormoneBalance.keywords'),\n        description: t('learning.articles.hormoneBalance.description')\n      },\n      {\n        id: 'learning-4',\n        title: t('learning.articles.nutritionScience.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.nutritionScience.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.nutritionScience.keywords'),\n        description: t('learning.articles.nutritionScience.description')\n      },\n      {\n        id: 'learning-5',\n        title: t('learning.articles.exerciseTherapy.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.exerciseTherapy.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.exerciseTherapy.keywords'),\n        description: t('learning.articles.exerciseTherapy.description')\n      },\n      {\n        id: 'learning-6',\n        title: t('learning.articles.psychologicalFactors.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.psychologicalFactors.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.psychologicalFactors.keywords'),\n        description: t('learning.articles.psychologicalFactors.description')\n      },\n      {\n        id: 'learning-7',\n        title: t('learning.articles.medicalResearch.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.medicalResearch.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.medicalResearch.keywords'),\n        description: t('learning.articles.medicalResearch.description')\n      },\n      {\n        id: 'learning-8',\n        title: t('learning.articles.traditionalMedicine.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.traditionalMedicine.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.traditionalMedicine.keywords'),\n        description: t('learning.articles.traditionalMedicine.description')\n      },\n      {\n        id: 'learning-9',\n        title: t('learning.articles.globalPerspectives.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.globalPerspectives.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.globalPerspectives.keywords'),\n        description: t('learning.articles.globalPerspectives.description')\n      },\n      {\n        id: 'learning-10',\n        title: t('learning.articles.technologyInnovation.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.technologyInnovation.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.technologyInnovation.keywords'),\n        description: t('learning.articles.technologyInnovation.description')\n      },\n      {\n        id: 'learning-11',\n        title: t('learning.articles.communicationSkills.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.communicationSkills.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.communicationSkills.keywords'),\n        description: t('learning.articles.communicationSkills.description')\n      },\n      {\n        id: 'learning-12',\n        title: t('learning.articles.selfCareStrategies.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.selfCareStrategies.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.selfCareStrategies.keywords'),\n        description: t('learning.articles.selfCareStrategies.description')\n      },\n      {\n        id: 'learning-13',\n        title: t('learning.articles.longTermManagement.title'),\n        type: 'article' as const,\n        readTime: t('learning.articles.longTermManagement.readTime'),\n        category: 'learning',\n        keywords: t('learning.articles.longTermManagement.keywords'),\n        description: t('learning.articles.longTermManagement.description')\n      }\n    ];\n\n    const pdfs = [\n      {\n        id: 'learning-pdf-1',\n        title: t('learning.pdfs.naturalTherapyAssessment.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.naturalTherapyAssessment.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.naturalTherapyAssessment.keywords'),\n        description: t('learning.pdfs.naturalTherapyAssessment.description')\n      },\n      {\n        id: 'learning-pdf-2',\n        title: t('learning.pdfs.hormoneTestingGuide.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.hormoneTestingGuide.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.hormoneTestingGuide.keywords'),\n        description: t('learning.pdfs.hormoneTestingGuide.description')\n      },\n      {\n        id: 'learning-pdf-3',\n        title: t('learning.pdfs.nutritionalAnalysis.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.nutritionalAnalysis.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.nutritionalAnalysis.keywords'),\n        description: t('learning.pdfs.nutritionalAnalysis.description')\n      },\n      {\n        id: 'learning-pdf-4',\n        title: t('learning.pdfs.exerciseProgram.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.exerciseProgram.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.exerciseProgram.keywords'),\n        description: t('learning.pdfs.exerciseProgram.description')\n      },\n      {\n        id: 'learning-pdf-5',\n        title: t('learning.pdfs.psychologicalAssessment.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.psychologicalAssessment.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.psychologicalAssessment.keywords'),\n        description: t('learning.pdfs.psychologicalAssessment.description')\n      },\n      {\n        id: 'learning-pdf-6',\n        title: t('learning.pdfs.researchSummary.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.researchSummary.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.researchSummary.keywords'),\n        description: t('learning.pdfs.researchSummary.description')\n      },\n      {\n        id: 'learning-pdf-7',\n        title: t('learning.pdfs.cycleEducationGuide.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.cycleEducationGuide.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.cycleEducationGuide.keywords'),\n        description: t('learning.pdfs.cycleEducationGuide.description')\n      },\n      {\n        id: 'learning-pdf-8',\n        title: t('learning.pdfs.consultationPreparation.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.consultationPreparation.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.consultationPreparation.keywords'),\n        description: t('learning.pdfs.consultationPreparation.description')\n      },\n      {\n        id: 'learning-pdf-9',\n        title: t('learning.pdfs.globalHealthReport.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.globalHealthReport.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.globalHealthReport.keywords'),\n        description: t('learning.pdfs.globalHealthReport.description')\n      },\n      {\n        id: 'learning-pdf-10',\n        title: t('learning.pdfs.technologyGuide.title'),\n        type: 'pdf' as const,\n        readTime: t('learning.pdfs.technologyGuide.readTime'),\n        category: 'learning',\n        keywords: t('learning.pdfs.technologyGuide.keywords'),\n        description: t('learning.pdfs.technologyGuide.description')\n      }\n    ];\n\n    return [...articles, ...pdfs];\n  };\n\n  // ğŸš€ é˜¶æ®µ4ï¼šé•¿æœŸç®¡ç†ç±»èµ„æºæ•°æ®ç”Ÿæˆå™¨\n  const generateManagementResources = () => {\n    const articles = [\n      {\n        id: 'management-1',\n        title: t('management.articles.longTermStrategy.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.longTermStrategy.readTime'),\n        category: 'management',\n        keywords: t('management.articles.longTermStrategy.keywords'),\n        description: t('management.articles.longTermStrategy.description')\n      },\n      {\n        id: 'management-2',\n        title: t('management.articles.lifestyleOptimization.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.lifestyleOptimization.readTime'),\n        category: 'management',\n        keywords: t('management.articles.lifestyleOptimization.keywords'),\n        description: t('management.articles.lifestyleOptimization.description')\n      },\n      {\n        id: 'management-3',\n        title: t('management.articles.healthMonitoring.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.healthMonitoring.readTime'),\n        category: 'management',\n        keywords: t('management.articles.healthMonitoring.keywords'),\n        description: t('management.articles.healthMonitoring.description')\n      },\n      {\n        id: 'management-4',\n        title: t('management.articles.preventiveMeasures.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.preventiveMeasures.readTime'),\n        category: 'management',\n        keywords: t('management.articles.preventiveMeasures.keywords'),\n        description: t('management.articles.preventiveMeasures.description')\n      },\n      {\n        id: 'management-5',\n        title: t('management.articles.sustainablePractices.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.sustainablePractices.readTime'),\n        category: 'management',\n        keywords: t('management.articles.sustainablePractices.keywords'),\n        description: t('management.articles.sustainablePractices.description')\n      },\n      {\n        id: 'management-6',\n        title: t('management.articles.communitySupport.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.communitySupport.readTime'),\n        category: 'management',\n        keywords: t('management.articles.communitySupport.keywords'),\n        description: t('management.articles.communitySupport.description')\n      },\n      {\n        id: 'management-7',\n        title: t('management.articles.professionalGuidance.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.professionalGuidance.readTime'),\n        category: 'management',\n        keywords: t('management.articles.professionalGuidance.keywords'),\n        description: t('management.articles.professionalGuidance.description')\n      },\n      {\n        id: 'management-8',\n        title: t('management.articles.technologyIntegration.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.technologyIntegration.readTime'),\n        category: 'management',\n        keywords: t('management.articles.technologyIntegration.keywords'),\n        description: t('management.articles.technologyIntegration.description')\n      },\n      {\n        id: 'management-9',\n        title: t('management.articles.qualityImprovement.title'),\n        type: 'article' as const,\n        readTime: t('management.articles.qualityImprovement.readTime'),\n        category: 'management',\n        keywords: t('management.articles.qualityImprovement.keywords'),\n        description: t('management.articles.qualityImprovement.description')\n      }\n    ];\n\n    const pdfs = [\n      {\n        id: 'management-pdf-1',\n        title: t('management.pdfs.managementPlan.title'),\n        type: 'pdf' as const,\n        readTime: t('management.pdfs.managementPlan.readTime'),\n        category: 'management',\n        keywords: t('management.pdfs.managementPlan.keywords'),\n        description: t('management.pdfs.managementPlan.description')\n      },\n      {\n        id: 'management-pdf-2',\n        title: t('management.pdfs.lifestyleGuide.title'),\n        type: 'pdf' as const,\n        readTime: t('management.pdfs.lifestyleGuide.readTime'),\n        category: 'management',\n        keywords: t('management.pdfs.lifestyleGuide.keywords'),\n        description: t('management.pdfs.lifestyleGuide.description')\n      },\n      {\n        id: 'management-pdf-3',\n        title: t('management.pdfs.monitoringTools.title'),\n        type: 'pdf' as const,\n        readTime: t('management.pdfs.monitoringTools.readTime'),\n        category: 'management',\n        keywords: t('management.pdfs.monitoringTools.keywords'),\n        description: t('management.pdfs.monitoringTools.description')\n      },\n      {\n        id: 'management-pdf-4',\n        title: t('management.pdfs.preventionChecklist.title'),\n        type: 'pdf' as const,\n        readTime: t('management.pdfs.preventionChecklist.readTime'),\n        category: 'management',\n        keywords: t('management.pdfs.preventionChecklist.keywords'),\n        description: t('management.pdfs.preventionChecklist.description')\n      },\n      {\n        id: 'management-pdf-5',\n        title: t('management.pdfs.sustainabilityGuide.title'),\n        type: 'pdf' as const,\n        readTime: t('management.pdfs.sustainabilityGuide.readTime'),\n        category: 'management',\n        keywords: t('management.pdfs.sustainabilityGuide.keywords'),\n        description: t('management.pdfs.sustainabilityGuide.description')\n      },\n      {\n        id: 'management-pdf-6',\n        title: t('management.pdfs.communityResources.title'),\n        type: 'pdf' as const,\n        readTime: t('management.pdfs.communityResources.readTime'),\n        category: 'management',\n        keywords: t('management.pdfs.communityResources.keywords'),\n        description: t('management.pdfs.communityResources.description')\n      }\n    ];\n\n    return [...articles, ...pdfs];\n  };\n\n  // ğŸš€ å®Œæ•´çš„èµ„æºæ•°æ® - åŸºäºå®é™…éœ€æ±‚çš„49ä¸ªèµ„æº\n  // è®¡ç®—æ¯ä¸ªåˆ†ç±»çš„å®é™…èµ„æºæ•°é‡\n  const getCategoryResourceCount = (categoryId: string): number => {\n    // PDFåˆ†ç±»åˆ°SimplePDFCenteråˆ†ç±»çš„æ˜ å°„\n    const pdfCategoryMapping = {\n      'immediate': ['management-tools', 'health-management'],\n      'preparation': ['health-management', 'educational-resources'],\n      'learning': ['educational-resources', 'communication-guidance'],\n      'management': ['management-tools', 'communication-guidance']\n    };\n    \n    // è®¡ç®—è¯¥åˆ†ç±»çš„æ–‡ç« æ•°é‡ï¼ˆåŸºäºç¡¬ç¼–ç çš„åˆ†ç±»èµ„æºï¼‰\n    const categoryArticles = categories[categoryId as keyof typeof categories]?.resources?.length || 0;\n    \n    // è®¡ç®—è¯¥åˆ†ç±»çš„PDFæ•°é‡\n    const mappedCategories = pdfCategoryMapping[categoryId as keyof typeof pdfCategoryMapping] || [];\n    const categoryPDFs = PDF_RESOURCES.filter(pdf => \n      mappedCategories.includes(pdf.category)\n    ).length;\n    \n    return categoryArticles + categoryPDFs;\n  };\n\n  const categories = {\n    immediate: {\n      id: 'immediate',\n      title: getCategoryTitle('immediate'),\n      subtitle: getCategorySubtitle('immediate'),\n      icon: <AlertCircle className=\"w-6 h-6\" />,\n      color: 'from-red-500 to-red-600',\n      bgColor: 'bg-red-50',\n      borderColor: 'border-red-200',\n      resources: generateImmediateResources(),\n      resourceCount: getCategoryResourceCount('immediate')\n    },\n    preparation: {\n      id: 'preparation',\n      title: getCategoryTitle('preparation'),\n      subtitle: getCategorySubtitle('preparation'),\n      icon: <Clock className=\"w-6 h-6\" />,\n      color: 'from-orange-500 to-orange-600',\n      bgColor: 'bg-orange-50',\n      borderColor: 'border-orange-200',\n      resources: generatePreparationResources(),\n      resourceCount: getCategoryResourceCount('preparation')\n    },\n    learning: {\n      id: 'learning',\n      title: getCategoryTitle('learning'),\n      subtitle: getCategorySubtitle('learning'),\n      icon: <Brain className=\"w-6 h-6\" />,\n      color: 'from-blue-500 to-blue-600',\n      bgColor: 'bg-blue-50',\n      borderColor: 'border-blue-200',\n      resources: generateLearningResources(),\n      resourceCount: getCategoryResourceCount('learning')\n    },\n    management: {\n      id: 'management',\n      title: getCategoryTitle('management'),\n      subtitle: getCategorySubtitle('management'),\n      icon: <TrendingUp className=\"w-6 h-6\" />,\n      color: 'from-green-500 to-green-600',\n      bgColor: 'bg-green-50',\n      borderColor: 'border-green-200',\n      resources: generateManagementResources(),\n      resourceCount: getCategoryResourceCount('management')\n    }\n  };\n\n  // ğŸ” å¢å¼ºçš„æœç´¢è¿‡æ»¤é€»è¾‘ - æ”¯æŒç´§æ€¥å…³é”®è¯å’Œ6ä¸ªç”¨æˆ·å…³é”®è¯\n  const searchResources = (searchTerm: string): Resource[] => {\n    if (!searchTerm.trim()) return [];\n    \n    const term = searchTerm.toLowerCase();\n    // ä½¿ç”¨æ‰€æœ‰å®é™…èµ„æºè¿›è¡Œæœç´¢ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç çš„åˆ†ç±»èµ„æº\n    const allResources: Resource[] = [\n      ...Object.values(categories).flatMap(cat => cat.resources as Resource[]),\n      // æ·»åŠ æ‰€æœ‰PDFèµ„æº\n      ...PDF_RESOURCES.map(pdf => ({\n        id: pdf.id,\n        title: pdf.title,\n        type: 'pdf' as const,\n        readTime: 'PDF',\n        category: pdf.category || 'immediate',\n        keywords: '',\n        description: pdf.description || ''\n      }))\n    ];\n    \n    // è‹±æ–‡å…³é”®è¯æ˜ å°„åˆ°ä¸­æ–‡å…³é”®è¯\n    const englishToChineseKeywords = {\n      'hot compress': t('simplePdfCenter.englishToChineseKeywords.hotCompress'),\n      'warm bag': t('simplePdfCenter.englishToChineseKeywords.warmBag'),\n      'warm baby': t('simplePdfCenter.englishToChineseKeywords.warmBaby'),\n      'massage': t('simplePdfCenter.englishToChineseKeywords.massage'),\n      'belly massage': t('simplePdfCenter.englishToChineseKeywords.bellyMassage'),\n      'painkillers': t('simplePdfCenter.englishToChineseKeywords.painkillers')\n    };\n    \n    // è·å–å¯¹åº”çš„ä¸­æ–‡å…³é”®è¯ï¼ˆå¦‚æœæœç´¢çš„æ˜¯è‹±æ–‡ï¼‰\n    const chineseKeyword = englishToChineseKeywords[term as keyof typeof englishToChineseKeywords];\n    \n    return allResources.filter((resource: Resource) => {\n      // æœç´¢æ ‡é¢˜\n      const titleMatch = resource.title.toLowerCase().includes(term);\n      \n      // æœç´¢å…³é”®è¯ - ä¿®å¤ï¼šæ£€æŸ¥å…³é”®è¯å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æœç´¢è¯\n      const keywordMatch = resource.keywords?.toLowerCase().includes(term) || false;\n      \n      // æœç´¢æè¿°\n      const descriptionMatch = resource.description?.toLowerCase().includes(term) || false;\n      \n      // ç´§æ€¥å…³é”®è¯åŒ¹é… - ä¿®å¤ï¼šç›´æ¥åŒ¹é…æœç´¢è¯\n      const urgentMatch = urgentKeywords.some(keyword => \n        term.includes(keyword.toLowerCase()) && (\n          resource.title.toLowerCase().includes(keyword.toLowerCase()) ||\n          resource.keywords?.toLowerCase().includes(keyword.toLowerCase())\n        )\n      );\n      \n      // ç”¨æˆ·æœç´¢å…³é”®è¯åŒ¹é… - ä¿®å¤ï¼šæ”¯æŒä¸­è‹±æ–‡å…³é”®è¯æ˜ å°„\n      const userKeywordMatch = Object.keys(userSearchKeywords).some(keyword => {\n        // æ£€æŸ¥æœç´¢è¯æ˜¯å¦åŒ…å«ä¸­æ–‡å…³é”®è¯\n        const chineseMatch = term.includes(keyword.toLowerCase()) && (\n          resource.title.toLowerCase().includes(keyword.toLowerCase()) ||\n          resource.keywords?.toLowerCase().includes(keyword.toLowerCase())\n        );\n        \n        // æ£€æŸ¥æœç´¢è¯æ˜¯å¦åŒ…å«å¯¹åº”çš„è‹±æ–‡å…³é”®è¯\n        const englishMatch = chineseKeyword && keyword === chineseKeyword && (\n          resource.title.toLowerCase().includes(term) ||\n          resource.keywords?.toLowerCase().includes(term)\n        );\n        \n        return chineseMatch || englishMatch;\n      });\n      \n      return titleMatch || keywordMatch || descriptionMatch || urgentMatch || userKeywordMatch;\n    });\n  };\n\n  // ğŸ¨ Phase 1: ç§»åŠ¨ä¼˜å…ˆçš„ResourceCardç»„ä»¶\n  const ResourceCard = ({ resource }: { resource: Resource }) => {\n    const isLoading = (action: string) => loadingStates[`${resource.id}${action ? `-${action}` : ''}`] || false;\n\n    return (\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 lg:p-6 hover:shadow-md transition-shadow duration-200\">\n        <div className=\"flex flex-col space-y-2 sm:space-y-3\">\n          <div className=\"flex items-start justify-between gap-2\">\n            <h3 className=\"text-base sm:text-lg lg:text-xl font-semibold text-gray-900 leading-tight flex-1\">\n              {resource.title}\n            </h3>\n            <span className=\"text-xs sm:text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full whitespace-nowrap flex-shrink-0\">\n              {resource.readTime}\n            </span>\n          </div>\n          \n          {resource.description && (\n            <p className=\"text-xs sm:text-sm text-gray-600 leading-relaxed\">\n              {resource.description}\n            </p>\n          )}\n          \n          {resource.keywords && (\n            <div className=\"flex flex-wrap gap-1\">\n              <span className=\"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full\">\n                {resource.keywords}\n              </span>\n            </div>\n          )}\n          \n          <div className=\"flex flex-wrap gap-1.5 sm:gap-2 pt-2\">\n            {resource.type === 'article' ? (\n              <button\n                onClick={() => handleArticleRead(resource.id)}\n                disabled={isLoading('read')}\n                className=\"flex items-center justify-center space-x-1 px-2 sm:px-3 py-2 bg-blue-600 text-white text-xs sm:text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-h-[44px] touch-manipulation flex-1 sm:flex-none\"\n                aria-label={t('simplePdfCenter.ariaLabels.readArticle')}\n              >\n                {isLoading('read') ? (\n                  <div className=\"w-3 h-3 sm:w-4 sm:h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <span>{t('ui.buttons.read')}</span>\n                )}\n              </button>\n            ) : (\n              <button\n                onClick={() => handlePDFPreview(resource.id)}\n                disabled={isLoading('preview')}\n                className=\"flex items-center justify-center space-x-1 px-2 sm:px-3 py-2 bg-green-600 text-white text-xs sm:text-sm font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-h-[44px] touch-manipulation flex-1 sm:flex-none\"\n                aria-label={t('simplePdfCenter.ariaLabels.previewPdf')}\n              >\n                {isLoading('preview') ? (\n                  <div className=\"w-3 h-3 sm:w-4 sm:h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <span>{t('ui.buttons.preview')}</span>\n                )}\n              </button>\n            )}\n            \n            <button\n              onClick={() => handleShare(resource.id, resource.title, resource.type)}\n              className=\"flex items-center justify-center space-x-1 px-2 sm:px-3 py-2 bg-gray-600 text-white text-xs sm:text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors min-h-[44px] touch-manipulation flex-1 sm:flex-none\"\n              aria-label={t('simplePdfCenter.ariaLabels.shareResource')}\n            >\n              <span className=\"hidden sm:inline\">{t('ui.buttons.share')}</span>\n              <span className=\"sm:hidden\">åˆ†äº«</span>\n            </button>\n            \n            {resource.type === 'pdf' && (\n              <button\n                onClick={() => handlePDFDownload(resource.id, resource.title)}\n                disabled={isLoading('download')}\n                className=\"flex items-center justify-center space-x-1 px-2 py-2 bg-gray-100 text-gray-700 text-xs font-medium rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-h-[44px] touch-manipulation flex-1 sm:flex-none\"\n                aria-label={t('simplePdfCenter.ariaLabels.downloadPdf')}\n              >\n                {isLoading('download') ? (\n                  <div className=\"w-3 h-3 sm:w-4 sm:h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                )}\n                <span className=\"hidden sm:inline\">{t('ui.buttons.download')}</span>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const CategorySection = ({ category }: { category: any }) => (\n    <div className=\"mb-6 sm:mb-8\">\n      <div className=\"flex items-center mb-4 px-2\">\n        <div className={`p-1.5 sm:p-2 rounded-lg ${category.bgColor} ${category.borderColor} border`}>\n          <div className={`text-white ${category.color.includes('from-') ? 'bg-gradient-to-r ' + category.color : category.color}`}>\n            {category.icon}\n          </div>\n        </div>\n        <div className=\"ml-3\">\n          <h2 className=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">{category.title}</h2>\n          <p className=\"text-xs sm:text-sm text-gray-600\">{category.subtitle}</p>\n        </div>\n      </div>\n      \n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6\">\n        {category.resources.map((resource: Resource) => (\n          <ResourceCard key={resource.id} resource={resource} />\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8\">\n        {/* é¡µé¢æ ‡é¢˜ */}\n        <div className=\"text-center mb-6 sm:mb-8\">\n          <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 sm:mb-4 px-2\">\n            {t('title')}\n          </h1>\n          <p className=\"text-base sm:text-lg text-gray-600 max-w-2xl mx-auto px-4\">\n            {t('description')}\n          </p>\n        </div>\n\n        {/* ç´§æ€¥æ¨¡å¼æç¤º */}\n        {isEmergencyMode && (\n          <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n            <div className=\"flex items-center space-x-2\">\n              <AlertCircle className=\"w-5 h-5 text-red-600\" />\n              <p className=\"text-red-800 font-medium\">\n                {t('simplePdfCenter.emergencyMode.message')}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* æœç´¢æ¡† - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        <div className=\"mb-6 sm:mb-8\">\n          <div className=\"relative max-w-2xl mx-auto px-2\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5\" />\n            <input\n              type=\"text\"\n              placeholder={t('ui.placeholder', { totalResources })}\n              value={searchTerm}\n              onChange={handleSearchChange}\n              className={`w-full pl-9 sm:pl-10 pr-4 py-2.5 sm:py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base sm:text-lg touch-manipulation ${\n                isEmergencyMode \n                  ? 'border-red-300 bg-red-50 focus:ring-red-500' \n                  : 'border-gray-300'\n              }`}\n              aria-label={t('ui.ariaLabel')}\n            />\n          </div>\n          <p className=\"text-center text-xs sm:text-sm text-gray-500 mt-2 px-4\">\n            <span className=\"hidden sm:inline\">{t('ui.searchHints.desktop')}</span>\n            <span className=\"sm:hidden\">{t('ui.searchHints.mobile')}</span>\n          </p>\n        </div>\n\n        {/* æˆ‘ç°åœ¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿæ¿å— - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        <div className=\"mb-6 sm:mb-8\">\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6 text-center\">\n            <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 mb-4 px-2\">\n              {t('helpSection.title')}\n            </h2>\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4\">\n              {Object.values(categories).map((category: any) => (\n                <button\n                  key={category.id}\n                  onClick={() => setActiveCategory(category.id)}\n                  className={`p-3 sm:p-4 rounded-lg border-2 transition-all duration-200 min-h-[120px] sm:min-h-[140px] touch-manipulation ${\n                    activeCategory === category.id\n                      ? `${category.borderColor} border-opacity-100 bg-gradient-to-br ${category.bgColor} text-white`\n                      : 'border-gray-200 hover:border-gray-300 bg-white text-gray-700 hover:shadow-md'\n                  }`}\n                >\n                  <div className=\"flex flex-col items-center space-y-2 h-full justify-between\">\n                    <div className={`p-1.5 sm:p-2 rounded-lg ${category.bgColor} ${category.borderColor} border`}>\n                      <div className={`text-white ${category.color.includes('from-') ? 'bg-gradient-to-r ' + category.color : category.color}`}>\n                        {category.icon}\n                      </div>\n                    </div>\n                    <div className=\"text-center flex-1 flex flex-col justify-center\">\n                      <h3 className=\"font-semibold text-xs sm:text-sm leading-tight\">{category.title}</h3>\n                      <p className=\"text-xs opacity-80 mt-1 hidden sm:block\">{category.subtitle}</p>\n                    </div>\n                    <div className=\"text-sm sm:text-lg font-bold\">{category.resourceCount}</div>\n                  </div>\n                </button>\n              ))}\n            </div>\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <p className=\"text-sm text-gray-600 mb-2\">{t('helpSection.needMoreHelp')}</p>\n              <button\n                onClick={() => router.push(`/${locale}/interactive-tools`)}\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                {t('helpSection.exploreTools')}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* ç»Ÿè®¡ä¿¡æ¯ - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        <div className=\"grid grid-cols-3 gap-2 sm:gap-4 mb-6 sm:mb-8\">\n          <div className=\"bg-white p-3 sm:p-4 rounded-lg shadow-sm text-center\">\n            <div className=\"text-lg sm:text-2xl font-bold text-blue-600\">{totalResources}</div>\n            <div className=\"text-xs sm:text-sm text-gray-600 leading-tight\">{t('ui.stats.totalResources')}</div>\n          </div>\n          <div className=\"bg-white p-3 sm:p-4 rounded-lg shadow-sm text-center\">\n            <div className=\"text-lg sm:text-2xl font-bold text-green-600\">4</div>\n            <div className=\"text-xs sm:text-sm text-gray-600 leading-tight\">{t('ui.stats.categories')}</div>\n          </div>\n          <div className=\"bg-white p-3 sm:p-4 rounded-lg shadow-sm text-center\">\n            <div className=\"text-lg sm:text-2xl font-bold text-purple-600\">100%</div>\n            <div className=\"text-xs sm:text-sm text-gray-600 leading-tight\">{t('ui.stats.evidenceBased')}</div>\n          </div>\n        </div>\n\n        {/* æœç´¢ç»“æœæˆ–åˆ†ç±»å±•ç¤º - ç§»åŠ¨ç«¯ä¼˜åŒ– */}\n        {searchTerm ? (\n          <div>\n            <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 mb-4 px-2\">\n              {t('ui.searchResults.title')}\n            </h2>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6\">\n              {searchResources(searchTerm).map((resource: Resource) => (\n                <ResourceCard key={resource.id} resource={resource} />\n              ))}\n            </div>\n            {searchResources(searchTerm).length === 0 && (\n              <div className=\"text-center py-6 sm:py-8 px-4\">\n                <p className=\"text-gray-500 mb-2 text-sm sm:text-base\">{t('ui.searchResults.noResults')}</p>\n                <p className=\"text-xs sm:text-sm text-gray-400\">{t('ui.searchResults.suggestions')}</p>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div>\n            {/* æ˜¾ç¤ºå½“å‰é€‰ä¸­åˆ†ç±»çš„æ‰€æœ‰èµ„æº */}\n            {(() => {\n              const currentCategory = categories[activeCategory as keyof typeof categories];\n              if (!currentCategory) return null;\n              \n              // PDFåˆ†ç±»åˆ°SimplePDFCenteråˆ†ç±»çš„æ˜ å°„\n              const pdfCategoryMapping = {\n                'immediate': ['management-tools', 'health-management'],\n                'preparation': ['health-management', 'educational-resources'],\n                'learning': ['educational-resources', 'communication-guidance'],\n                'management': ['management-tools', 'communication-guidance']\n              };\n              \n              // è·å–è¯¥åˆ†ç±»çš„æ‰€æœ‰å®é™…èµ„æºï¼ˆåŒ…æ‹¬æ–‡ç« å’ŒPDFï¼‰\n              const categoryResources = [\n                ...currentCategory.resources,\n                ...PDF_RESOURCES\n                  .filter(pdf => {\n                    const mappedCategories = pdfCategoryMapping[activeCategory as keyof typeof pdfCategoryMapping] || [];\n                    return mappedCategories.includes(pdf.category);\n                  })\n                  .map(pdf => ({\n                    id: pdf.id,\n                    title: pdf.title,\n                    type: 'pdf' as const,\n                    readTime: 'PDF',\n                    category: activeCategory,\n                    keywords: '',\n                    description: pdf.description || ''\n                  }))\n              ];\n              \n              return (\n                <div className=\"mb-6 sm:mb-8\">\n                  <div className=\"flex items-center mb-4 px-2\">\n                    <div className={`p-1.5 sm:p-2 rounded-lg ${currentCategory.bgColor} ${currentCategory.borderColor} border`}>\n                      <div className={`text-white ${currentCategory.color.includes('from-') ? 'bg-gradient-to-r ' + currentCategory.color : currentCategory.color}`}>\n                        {currentCategory.icon}\n                      </div>\n                    </div>\n                    <div className=\"ml-3\">\n                      <h2 className=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900\">{currentCategory.title}</h2>\n                      <p className=\"text-xs sm:text-sm text-gray-600\">{currentCategory.subtitle}</p>\n                    </div>\n                    <div className=\"ml-auto text-sm sm:text-base font-semibold text-gray-500\">\n                      {categoryResources.length} ä¸ªèµ„æº\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6\">\n                    {categoryResources.map((resource: Resource) => (\n                      <ResourceCard key={resource.id} resource={resource} />\n                    ))}\n                  </div>\n                </div>\n              );\n            })()}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SimplePDFCenter;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/StructuredData.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[239,242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[239,242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":118,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2945,2948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2945,2948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"interface StructuredDataData {\n  title: string;\n  description: string;\n  url: string;\n  image?: string;\n  author?: string;\n  datePublished?: string;\n  dateModified?: string;\n  // å…è®¸æ‰©å±•å­—æ®µï¼ˆå¦‚ localeã€keywords ç­‰ï¼‰ï¼Œé¿å…æ„å»ºæ—¶çš„â€œå¤šä½™å±æ€§â€æŠ¥é”™\n  [key: string]: any;\n}\n\ntype StructuredDataType =\n  | 'Article'\n  | 'WebPage'\n  | 'Organization'\n  | 'Person'\n  | 'Product'\n  | 'medicalWebPage'\n  | 'healthTopicPage';\n\n// å…¼å®¹ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š\n// 1) <StructuredData type=\"...\" title=\"...\" description=\"...\" url=\"...\" />\n// 2) <StructuredData type=\"...\" data={{ title, description, url, ... }} />\ntype StructuredDataProps =\n  | ({ type: StructuredDataType } & StructuredDataData)\n  | ({ type: StructuredDataType; data: StructuredDataData });\n\nexport default function StructuredData(props: StructuredDataProps) {\n  const normalized: { type: StructuredDataType } & StructuredDataData =\n    'data' in props ? { type: props.type, ...props.data } : props;\n\n  const data = generateStructuredData(normalized);\n  return <StructuredDataScript data={data} />;\n}\n\nexport function generateStructuredData(\n  props: { type: StructuredDataType } & StructuredDataData\n) {\n  const baseData = {\n    '@context': 'https://schema.org',\n    '@type': props.type,\n    name: props.title,\n    description: props.description,\n    url: props.url,\n    image: props.image,\n  };\n\n  // æ ¹æ®ç±»å‹æ·»åŠ ç‰¹å®šå­—æ®µ\n  switch (props.type) {\n    case 'Article':\n      return {\n        ...baseData,\n        author: {\n          '@type': 'Person',\n          name: props.author || 'PeriodHub Team'\n        },\n        publisher: {\n          '@type': 'Organization',\n          name: 'PeriodHub',\n          logo: {\n            '@type': 'ImageObject',\n            url: '/logo.png'\n          }\n        },\n        datePublished: props.datePublished,\n        dateModified: props.dateModified || props.datePublished,\n        mainEntityOfPage: {\n          '@type': 'WebPage',\n          '@id': props.url\n        }\n      };\n      \n    case 'Organization':\n      return {\n        ...baseData,\n        '@type': 'Organization',\n        logo: '/logo.png',\n        contactPoint: {\n          '@type': 'ContactPoint',\n          telephone: '+1-555-0123',\n          contactType: 'customer service'\n        },\n        sameAs: [\n          'https://twitter.com/periodhub',\n          'https://facebook.com/periodhub'\n        ]\n      };\n      \n    case 'medicalWebPage':\n      return {\n        ...baseData,\n        '@type': 'MedicalWebPage',\n        medicalAudience: 'Patient',\n        about: {\n          '@type': 'MedicalCondition',\n          name: props.title\n        }\n      };\n    \n    case 'healthTopicPage':\n      return {\n        ...baseData,\n        '@type': 'MedicalWebPage',\n        medicalAudience: 'Patient',\n        about: {\n          '@type': 'MedicalTopic',\n          name: props.title,\n          description: props.description\n        }\n      };\n      \n    default:\n      return baseData;\n  }\n}\n\nexport function StructuredDataScript({ data }: { data: any }) {\n  return (\n    <script\n      type=\"application/ld+json\"\n      dangerouslySetInnerHTML={{\n        __html: JSON.stringify(data, null, 2)\n      }}\n    />\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/TableOfContents.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ToolsCollectionButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/UserSuccessStories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/WebVitalsReporter.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[865,868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[865,868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[895,898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[895,898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n'use client';\n\nimport { useEffect } from 'react';\n\ninterface Metric {\n  name: string;\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n  delta: number;\n  id: string;\n}\n\nexport function WebVitalsReporter() {\n  useEffect(() => {\n    // ä½¿ç”¨web-vitalsåº“è¿›è¡ŒCore Web Vitalsç›‘æ§\n    import('web-vitals').then((webVitals) => {\n      // æ³¨æ„ï¼šè·³è¿‡å·²åºŸå¼ƒçš„FIDï¼Œä½¿ç”¨æ–°çš„API\n      webVitals.onCLS(sendToAnalytics);\n      webVitals.onFCP(sendToAnalytics);\n      webVitals.onLCP(sendToAnalytics);\n      webVitals.onTTFB(sendToAnalytics);\n      \n      // INPç°åœ¨æœ‰å®˜æ–¹æ”¯æŒ\n      webVitals.onINP(sendToAnalytics);\n    }).catch(error => {\n      console.warn('Failed to load web-vitals:', error);\n    });\n  }, []);\n\n  function sendToAnalytics(metric: Metric) {\n    // è·³è¿‡å·²åºŸå¼ƒçš„FIDæŒ‡æ ‡\n    if (metric.name === 'FID') return;\n    \n    // å‘é€åˆ°åˆ†ææœåŠ¡\n    if (typeof window !== 'undefined' && (window as any).gtag) {\n      (window as any).gtag('event', metric.name, {\n        event_category: 'Web Vitals',\n        event_label: metric.id,\n        value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),\n        non_interaction: true,\n      });\n    }\n    \n    // æ§åˆ¶å°è¾“å‡ºï¼ˆå¼€å‘ç¯å¢ƒï¼‰\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`ğŸ“Š ${metric.name}: ${metric.value} (${metric.rating})`);\n    }\n    \n    // å‘é€åˆ°è‡ªå®šä¹‰åˆ†æç«¯ç‚¹\n    fetch('/api/analytics/web-vitals', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(metric),\n    }).catch(console.error);\n  }\n\n\n  return null;\n}\n\n// æ€§èƒ½ä¼˜åŒ–Hook\nexport function usePerformanceOptimization() {\n  useEffect(() => {\n    // é¢„åŠ è½½å…³é”®èµ„æº\n    const criticalResources = [\n      '/api/user/profile',\n      '/api/period/current'\n    ];\n    \n    criticalResources.forEach(resource => {\n      const link = document.createElement('link');\n      link.rel = 'prefetch';\n      link.href = resource;\n      document.head.appendChild(link);\n    });\n    \n    // å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const img = entry.target as HTMLImageElement;\n          if (img.dataset.src) {\n            img.src = img.dataset.src;\n            img.removeAttribute('data-src');\n            observer.unobserve(img);\n          }\n        }\n      });\n    });\n    \n    document.querySelectorAll('img[data-src]').forEach(img => {\n      observer.observe(img);\n    });\n    \n    return () => observer.disconnect();\n  }, []);\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/advanced/AppProvider.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'preferences.accessibility', 'preferences.fontSize', 'preferences.privacy.analytics', 'preferences.theme', and 'recordPageLoadTime'. Either include them or remove the dependency array.","line":43,"column":6,"nodeType":"ArrayExpression","endLine":43,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [preferences.accessibility, preferences.fontSize, preferences.privacy.analytics, preferences.theme, recordPageLoadTime]","fix":{"range":[1105,1107],"text":"[preferences.accessibility, preferences.fontSize, preferences.privacy.analytics, preferences.theme, recordPageLoadTime]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2735,2738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2735,2738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, ReactNode } from 'react';\nimport { ErrorBoundary } from './ErrorBoundary';\nimport { ToastContainer } from './ToastSystem';\nimport { ModalManager } from './ModalSystem';\nimport { useAppStore } from '@/lib/stores/appStore';\nimport { performanceMonitor } from '@/lib/performance/monitor';\n\ninterface AppProviderProps {\n  children: ReactNode;\n}\n\n// åº”ç”¨çº§åˆ«çš„Providerç»„ä»¶\nexport const AppProvider: React.FC<AppProviderProps> = ({ children }) => {\n  const preferences = useAppStore(state => state.preferences);\n  const recordPageLoadTime = useAppStore(state => state.recordPageLoadTime);\n\n  // åˆå§‹åŒ–åº”ç”¨\n  useEffect(() => {\n    // è®°å½•é¡µé¢åŠ è½½æ—¶é—´\n    const loadTime = performance.now();\n    recordPageLoadTime(loadTime);\n\n    // åº”ç”¨ä¸»é¢˜\n    applyTheme(preferences.theme);\n\n    // åº”ç”¨å­—ä½“å¤§å°\n    applyFontSize(preferences.fontSize);\n\n    // åº”ç”¨å¯è®¿é—®æ€§è®¾ç½®\n    applyAccessibilitySettings(preferences.accessibility);\n\n    // å¯ç”¨æ€§èƒ½ç›‘æ§\n    if (preferences.privacy.analytics) {\n      performanceMonitor.setEnabled(true);\n    }\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      performanceMonitor.cleanup();\n    };\n  }, []);\n\n  // ç›‘å¬åå¥½è®¾ç½®å˜åŒ–\n  useEffect(() => {\n    applyTheme(preferences.theme);\n  }, [preferences.theme]);\n\n  useEffect(() => {\n    applyFontSize(preferences.fontSize);\n  }, [preferences.fontSize]);\n\n  useEffect(() => {\n    applyAccessibilitySettings(preferences.accessibility);\n  }, [preferences.accessibility]);\n\n  useEffect(() => {\n    performanceMonitor.setEnabled(preferences.privacy.analytics);\n  }, [preferences.privacy.analytics]);\n\n  return (\n    <ErrorBoundary level=\"critical\">\n      <div className=\"app-container\">\n        {children}\n        <ToastContainer />\n        <ModalManager />\n      </div>\n    </ErrorBoundary>\n  );\n};\n\n// åº”ç”¨ä¸»é¢˜\nfunction applyTheme(theme: 'light' | 'dark' | 'system') {\n  const root = document.documentElement;\n  \n  if (theme === 'system') {\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n    theme = prefersDark ? 'dark' : 'light';\n  }\n\n  root.classList.remove('light', 'dark');\n  root.classList.add(theme);\n  \n  // æ›´æ–°metaæ ‡ç­¾\n  const metaTheme = document.querySelector('meta[name=\"theme-color\"]');\n  if (metaTheme) {\n    metaTheme.setAttribute('content', theme === 'dark' ? '#1f2937' : '#ffffff');\n  }\n}\n\n// åº”ç”¨å­—ä½“å¤§å°\nfunction applyFontSize(fontSize: 'small' | 'medium' | 'large') {\n  const root = document.documentElement;\n  \n  root.classList.remove('text-sm', 'text-base', 'text-lg');\n  \n  switch (fontSize) {\n    case 'small':\n      root.classList.add('text-sm');\n      break;\n    case 'large':\n      root.classList.add('text-lg');\n      break;\n    default:\n      root.classList.add('text-base');\n  }\n}\n\n// åº”ç”¨å¯è®¿é—®æ€§è®¾ç½®\nfunction applyAccessibilitySettings(settings: any) {\n  const root = document.documentElement;\n  \n  // é«˜å¯¹æ¯”åº¦\n  if (settings.highContrast) {\n    root.classList.add('high-contrast');\n  } else {\n    root.classList.remove('high-contrast');\n  }\n  \n  // å‡å°‘åŠ¨ç”»\n  if (settings.reduceMotion) {\n    root.classList.add('reduce-motion');\n  } else {\n    root.classList.remove('reduce-motion');\n  }\n  \n  // å¤§å­—ä½“\n  if (settings.largeText) {\n    root.classList.add('large-text');\n  } else {\n    root.classList.remove('large-text');\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/advanced/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/advanced/ModalSystem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/advanced/SearchSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":4,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SortAsc' is defined but never used.","line":4,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SortDesc' is defined but never used.","line":4,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Bookmark' is defined but never used.","line":4,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":63},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":61,"column":27,"nodeType":"Identifier","endLine":61,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3769,3772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3769,3772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3779,3782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3779,3782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { Search, X, Filter, SortAsc, SortDesc, Clock, Bookmark } from 'lucide-react';\n\n// æœç´¢ç»“æœç±»å‹\nexport interface SearchResult {\n  id: string;\n  title: string;\n  content: string;\n  type: 'article' | 'tool' | 'therapy' | 'guide';\n  category?: string;\n  tags?: string[];\n  url: string;\n  score?: number;\n  lastModified?: string;\n}\n\n// æœç´¢è¿‡æ»¤å™¨\nexport interface SearchFilters {\n  type?: string[];\n  category?: string[];\n  tags?: string[];\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n}\n\n// æ’åºé€‰é¡¹\nexport type SortOption = 'relevance' | 'date' | 'title' | 'type';\nexport type SortDirection = 'asc' | 'desc';\n\n// æœç´¢é…ç½®\nexport interface SearchConfig {\n  placeholder?: string;\n  showFilters?: boolean;\n  showSort?: boolean;\n  showHistory?: boolean;\n  maxResults?: number;\n  debounceMs?: number;\n}\n\n// æœç´¢Hook\nexport const useSearch = (\n  searchFunction: (query: string, filters: SearchFilters) => Promise<SearchResult[]>,\n  config: SearchConfig = {}\n) => {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [filters, setFilters] = useState<SearchFilters>({});\n  const [sortBy, setSortBy] = useState<SortOption>('relevance');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [searchHistory, setSearchHistory] = useState<string[]>([]);\n\n  const { debounceMs = 300 } = config;\n\n  // é˜²æŠ–æœç´¢\n  const debouncedSearch = useCallback(\n    debounce(async (searchQuery: string, searchFilters: SearchFilters) => {\n      if (!searchQuery.trim()) {\n        setResults([]);\n        return;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const searchResults = await searchFunction(searchQuery, searchFilters);\n        setResults(searchResults);\n        \n        // æ·»åŠ åˆ°æœç´¢å†å²\n        if (searchQuery.trim() && !searchHistory.includes(searchQuery)) {\n          setSearchHistory(prev => [searchQuery, ...prev.slice(0, 9)]); // ä¿ç•™æœ€è¿‘10æ¡\n        }\n      } catch (err) {\n        setError('æœç´¢å¤±è´¥ï¼Œè¯·é‡è¯•');\n        console.error('Search error:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    }, debounceMs),\n    [searchFunction, debounceMs, searchHistory]\n  );\n\n  // æ‰§è¡Œæœç´¢\n  useEffect(() => {\n    debouncedSearch(query, filters);\n  }, [query, filters, debouncedSearch]);\n\n  // æ’åºç»“æœ\n  const sortedResults = useMemo(() => {\n    const sorted = [...results].sort((a, b) => {\n      let comparison = 0;\n\n      switch (sortBy) {\n        case 'relevance':\n          comparison = (b.score || 0) - (a.score || 0);\n          break;\n        case 'date':\n          comparison = new Date(b.lastModified || 0).getTime() - new Date(a.lastModified || 0).getTime();\n          break;\n        case 'title':\n          comparison = a.title.localeCompare(b.title);\n          break;\n        case 'type':\n          comparison = a.type.localeCompare(b.type);\n          break;\n      }\n\n      return sortDirection === 'asc' ? comparison : -comparison;\n    });\n\n    return config.maxResults ? sorted.slice(0, config.maxResults) : sorted;\n  }, [results, sortBy, sortDirection, config.maxResults]);\n\n  const clearSearch = useCallback(() => {\n    setQuery('');\n    setResults([]);\n    setError(null);\n  }, []);\n\n  const clearHistory = useCallback(() => {\n    setSearchHistory([]);\n  }, []);\n\n  return {\n    query,\n    setQuery,\n    results: sortedResults,\n    filters,\n    setFilters,\n    sortBy,\n    setSortBy,\n    sortDirection,\n    setSortDirection,\n    isLoading,\n    error,\n    searchHistory,\n    clearSearch,\n    clearHistory,\n  };\n};\n\n// é˜²æŠ–å‡½æ•°\nfunction debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n// æœç´¢æ¡†ç»„ä»¶\ninterface SearchBoxProps {\n  value: string;\n  onChange: (value: string) => void;\n  onClear: () => void;\n  placeholder?: string;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport const SearchBox: React.FC<SearchBoxProps> = ({\n  value,\n  onChange,\n  onClear,\n  placeholder = 'æœç´¢...',\n  isLoading = false,\n  className = '',\n}) => {\n  return (\n    <div className={`relative ${className}`}>\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n        <input\n          type=\"text\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder={placeholder}\n          className=\"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n        />\n        {value && (\n          <button\n            onClick={onClear}\n            className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        )}\n      </div>\n      \n      {isLoading && (\n        <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"></div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// æœç´¢ç»“æœç»„ä»¶\ninterface SearchResultsProps {\n  results: SearchResult[];\n  isLoading: boolean;\n  error: string | null;\n  onResultClick?: (result: SearchResult) => void;\n  className?: string;\n}\n\nexport const SearchResults: React.FC<SearchResultsProps> = ({\n  results,\n  isLoading,\n  error,\n  onResultClick,\n  className = '',\n}) => {\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'article':\n        return 'ğŸ“„';\n      case 'tool':\n        return 'ğŸ”§';\n      case 'therapy':\n        return 'ğŸŒ¿';\n      case 'guide':\n        return 'ğŸ“–';\n      default:\n        return 'ğŸ“';\n    }\n  };\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'article':\n        return 'æ–‡ç« ';\n      case 'tool':\n        return 'å·¥å…·';\n      case 'therapy':\n        return 'ç–—æ³•';\n      case 'guide':\n        return 'æŒ‡å—';\n      default:\n        return 'å†…å®¹';\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className={`space-y-4 ${className}`}>\n        {[...Array(3)].map((_, index) => (\n          <div key={index} className=\"animate-pulse\">\n            <div className=\"bg-gray-200 h-4 rounded w-3/4 mb-2\"></div>\n            <div className=\"bg-gray-200 h-3 rounded w-full mb-1\"></div>\n            <div className=\"bg-gray-200 h-3 rounded w-2/3\"></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={`text-center py-8 ${className}`}>\n        <div className=\"text-red-500 mb-2\">âŒ</div>\n        <p className=\"text-red-600\">{error}</p>\n      </div>\n    );\n  }\n\n  if (results.length === 0) {\n    return (\n      <div className={`text-center py-8 ${className}`}>\n        <div className=\"text-gray-400 mb-2\">ğŸ”</div>\n        <p className=\"text-gray-500\">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç»“æœ</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {results.map((result) => (\n        <div\n          key={result.id}\n          onClick={() => onResultClick?.(result)}\n          className=\"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:shadow-md transition-all duration-200 cursor-pointer\"\n        >\n          <div className=\"flex items-start space-x-3\">\n            <div className=\"text-2xl\">{getTypeIcon(result.type)}</div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <h3 className=\"text-lg font-semibold text-gray-900 truncate\">\n                  {result.title}\n                </h3>\n                <span className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded\">\n                  {getTypeLabel(result.type)}\n                </span>\n              </div>\n              \n              <p className=\"text-gray-600 text-sm line-clamp-2 mb-2\">\n                {result.content}\n              </p>\n              \n              <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                {result.category && (\n                  <span>åˆ†ç±»: {result.category}</span>\n                )}\n                {result.lastModified && (\n                  <span className=\"flex items-center space-x-1\">\n                    <Clock className=\"w-3 h-3\" />\n                    <span>{new Date(result.lastModified).toLocaleDateString()}</span>\n                  </span>\n                )}\n                {result.score && (\n                  <span>ç›¸å…³åº¦: {Math.round(result.score * 100)}%</span>\n                )}\n              </div>\n              \n              {result.tags && result.tags.length > 0 && (\n                <div className=\"flex flex-wrap gap-1 mt-2\">\n                  {result.tags.slice(0, 3).map((tag) => (\n                    <span\n                      key={tag}\n                      className=\"px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded\"\n                    >\n                      {tag}\n                    </span>\n                  ))}\n                  {result.tags.length > 3 && (\n                    <span className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded\">\n                      +{result.tags.length - 3}\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n// æœç´¢å†å²ç»„ä»¶\ninterface SearchHistoryProps {\n  history: string[];\n  onSelect: (query: string) => void;\n  onClear: () => void;\n  className?: string;\n}\n\nexport const SearchHistory: React.FC<SearchHistoryProps> = ({\n  history,\n  onSelect,\n  onClear,\n  className = '',\n}) => {\n  if (history.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className={`bg-white border border-gray-200 rounded-lg p-4 ${className}`}>\n      <div className=\"flex items-center justify-between mb-3\">\n        <h4 className=\"text-sm font-medium text-gray-700 flex items-center space-x-1\">\n          <Clock className=\"w-4 h-4\" />\n          <span>æœç´¢å†å²</span>\n        </h4>\n        <button\n          onClick={onClear}\n          className=\"text-xs text-gray-500 hover:text-gray-700\"\n        >\n          æ¸…é™¤\n        </button>\n      </div>\n      \n      <div className=\"space-y-1\">\n        {history.map((query, index) => (\n          <button\n            key={index}\n            onClick={() => onSelect(query)}\n            className=\"w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded transition-colors\"\n          >\n            {query}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/advanced/ToastSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useToasts' is defined but never used.","line":4,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { createContext, useContext, useState, useCallback, ReactNode, useEffect } from 'react';\nimport { useAppStore, useToasts } from '@/lib/stores/appStore';\nimport { X, CheckCircle, AlertCircle, Info, AlertTriangle } from 'lucide-react';\n\n// Toastç±»å‹\nexport interface Toast {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title?: string;\n  message: string;\n  duration?: number;\n  closable?: boolean;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n\n// Toastä¸Šä¸‹æ–‡\ninterface ToastContextType {\n  toasts: Toast[];\n  addToast: (toast: Omit<Toast, 'id'>) => string;\n  removeToast: (id: string) => void;\n  clearToasts: () => void;\n}\n\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\n\n// Toast Provider\nexport const ToastProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [toasts, setToasts] = useState<Toast[]>([]);\n\n  const addToast = useCallback((toast: Omit<Toast, 'id'>) => {\n    const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    const newToast: Toast = {\n      id,\n      duration: 5000,\n      closable: true,\n      ...toast\n    };\n\n    setToasts(prev => [...prev, newToast]);\n\n    // è®°å½•åˆ°åº”ç”¨çŠ¶æ€\n    const { recordToastAction } = useAppStore.getState();\n    recordToastAction({\n      action: 'add',\n      toastId: id,\n      toastType: newToast.type,\n      timestamp: new Date().toISOString()\n    });\n\n    return id;\n  }, []);\n\n  const removeToast = useCallback((id: string) => {\n    setToasts(prev => prev.filter(toast => toast.id !== id));\n\n    // è®°å½•åˆ°åº”ç”¨çŠ¶æ€\n    const { recordToastAction } = useAppStore.getState();\n    recordToastAction({\n      action: 'remove',\n      toastId: id,\n      timestamp: new Date().toISOString()\n    });\n  }, []);\n\n  const clearToasts = useCallback(() => {\n    setToasts([]);\n  }, []);\n\n  return (\n    <ToastContext.Provider value={{ toasts, addToast, removeToast, clearToasts }}>\n      {children}\n      <ToastContainer />\n    </ToastContext.Provider>\n  );\n};\n\n// ä½¿ç”¨Toast Hook\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n};\n\n// Toastå®¹å™¨\nexport const ToastContainer: React.FC = () => {\n  const { toasts, removeToast } = useToast();\n\n  if (toasts.length === 0) return null;\n\n  return (\n    <div className=\"fixed top-4 right-2 sm:right-4 z-50 space-y-2 max-w-sm\">\n      {toasts.map((toast) => (\n        <ToastItem key={toast.id} toast={toast} onRemove={removeToast} />\n      ))}\n    </div>\n  );\n};\n\n// Toasté¡¹ç›®\ninterface ToastItemProps {\n  toast: Toast;\n  onRemove: (id: string) => void;\n}\n\nconst ToastItem: React.FC<ToastItemProps> = ({ toast, onRemove }) => {\n  const { duration = 5000 } = toast;\n\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(() => {\n        onRemove(toast.id);\n      }, duration);\n\n      return () => clearTimeout(timer);\n    }\n  }, [toast.id, duration, onRemove]);\n\n  const getIcon = () => {\n    switch (toast.type) {\n      case 'success':\n        return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-500\" />;\n      case 'info':\n        return <Info className=\"w-5 h-5 text-blue-500\" />;\n      default:\n        return <Info className=\"w-5 h-5 text-blue-500\" />;\n    }\n  };\n\n  const getTypeClasses = () => {\n    switch (toast.type) {\n      case 'success':\n        return 'border-green-200 bg-green-50 text-green-800';\n      case 'error':\n        return 'border-red-200 bg-red-50 text-red-800';\n      case 'warning':\n        return 'border-yellow-200 bg-yellow-50 text-yellow-800';\n      case 'info':\n        return 'border-blue-200 bg-blue-50 text-blue-800';\n      default:\n        return 'border-gray-200 bg-gray-50 text-gray-800';\n    }\n  };\n\n  return (\n    <div\n      className={`flex items-start space-x-3 p-4 rounded-lg border shadow-lg max-w-sm ${getTypeClasses()}`}\n      role=\"alert\"\n    >\n      <div className=\"flex-shrink-0 mt-0.5\">\n        {getIcon()}\n      </div>\n      \n      <div className=\"flex-1 min-w-0\">\n        {toast.title && (\n          <h4 className=\"text-sm font-medium mb-1\">{toast.title}</h4>\n        )}\n        <p className=\"text-sm\">{toast.message}</p>\n        \n        {toast.action && (\n          <button\n            onClick={toast.action.onClick}\n            className=\"mt-2 text-sm font-medium underline hover:no-underline\"\n          >\n            {toast.action.label}\n          </button>\n        )}\n      </div>\n      \n      {toast.closable && (\n        <button\n          onClick={() => onRemove(toast.id)}\n          className=\"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      )}\n    </div>\n  );\n};\n\n// ä¾¿æ·çš„Toastå‡½æ•°\nexport const showToast = {\n  success: (message: string, title?: string) => {\n    // è¿™é‡Œéœ€è¦è®¿é—®Toastä¸Šä¸‹æ–‡ï¼Œå®é™…ä½¿ç”¨æ—¶åº”è¯¥é€šè¿‡useToast hook\n    console.log('Success toast:', { message, title });\n  },\n  error: (message: string, title?: string) => {\n    console.log('Error toast:', { message, title });\n  },\n  warning: (message: string, title?: string) => {\n    console.log('Warning toast:', { message, title });\n  },\n  info: (message: string, title?: string) => {\n    console.log('Info toast:', { message, title });\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/analytics/GA4Provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/articles/CostCalculator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/articles/FormulaCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/articles/StepByStepFormula.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/layout/Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/pdf-id-mapping.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/pdf/ArticlesPDFSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/pdf/DownloadsPDFGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/pdf/PDFCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDownload' is assigned a value but never used.","line":29,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'alternateLanguageLabel' is assigned a value but never used.","line":33,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":31}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * PDFå¡ç‰‡ç»„ä»¶\n * PDF Card Component\n */\n\n'use client';\n\nimport React from 'react';\nimport { LocalizedPDFResource, Locale } from '@/types/pdf';\nimport { getAlternateLanguageLabel, trackPDFDownload, formatFileSize } from '@/utils/pdfHelpers';\nimport DownloadButton from '@/components/DownloadButton';\nimport { useTranslations } from 'next-intl';\n\ninterface PDFCardProps {\n  resource: LocalizedPDFResource;\n  locale: Locale;\n  showDetails?: boolean;\n  className?: string;\n}\n\nexport default function PDFCard({ \n  resource, \n  locale, \n  showDetails = true,\n  className = ''\n}: PDFCardProps) {\n  const t = useTranslations('pdfCardPdf');\n  \n  const handleDownload = () => {\n    trackPDFDownload(resource.id, locale);\n  };\n\n  const alternateLanguageLabel = getAlternateLanguageLabel(locale);\n\n  return (\n    <div className={`bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-white/20 ${className}`}>\n      {/* å›¾æ ‡å’Œæ ‡é¢˜ */}\n      <div className=\"flex items-start gap-4 mb-4\">\n        <div className=\"text-4xl flex-shrink-0\">\n          {resource.icon}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-2 leading-tight\">\n            {resource.title}\n          </h3>\n          {showDetails && (\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              {resource.description}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* æ–‡ä»¶ä¿¡æ¯ */}\n      {showDetails && resource.fileSize && (\n        <div className=\"flex items-center gap-2 mb-4 text-xs text-gray-500\">\n          <span className=\"inline-flex items-center gap-1\">\n            <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n            </svg>\n            PDF\n          </span>\n          <span>â€¢</span>\n          <span>{formatFileSize(resource.fileSize)}</span>\n          {resource.featured && (\n            <>\n              <span>â€¢</span>\n              <span className=\"inline-flex items-center gap-1 text-purple-600 font-medium\">\n                <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                </svg>\n                ç‰¹è‰²\n              </span>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* ä¸‹è½½æŒ‰é’®åŒºåŸŸ */}\n      <div className=\"flex flex-col sm:flex-row gap-3\">\n        {/* ä¸»ä¸‹è½½æŒ‰é’® */}\n        <DownloadButton\n          filename={resource.localizedFilename}\n          className=\"flex-1\"\n        />\n\n        {/* æ›¿ä»£è¯­è¨€æŒ‰é’® */}\n        <DownloadButton\n          filename={resource.alternateFilename}\n          className=\"bg-white/50 hover:bg-white/70 text-gray-700 border border-gray-200\"\n        />\n      </div>\n\n      {/* æ›´æ–°æ—¶é—´ */}\n      {showDetails && resource.updatedAt && (\n        <div className=\"mt-4 pt-3 border-t border-gray-100\">\n          <p className=\"text-xs text-gray-400\">\n            {t('updated')}\n            {new Date(resource.updatedAt).toLocaleDateString(\n              t('locale'),\n              {\n                year: 'numeric',\n                month: 'short',\n                day: 'numeric'\n              }\n            )}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/tools/BreathingExerciseTool.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'phases'. Either include it or remove the dependency array.","line":68,"column":6,"nodeType":"ArrayExpression","endLine":68,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [isActive, phase, phases]","fix":{"range":[1707,1724],"text":"[isActive, phase, phases]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface BreathingExerciseToolProps {\n  locale?: string;\n}\n\nexport default function BreathingExerciseTool({ locale = 'zh' }: BreathingExerciseToolProps) {\n  const [isActive, setIsActive] = useState(false);\n  const [phase, setPhase] = useState<'inhale' | 'hold' | 'exhale' | 'pause'>('inhale');\n  const [timeLeft, setTimeLeft] = useState(4);\n  const [cycle, setCycle] = useState(0);\n\n  const phases = {\n    inhale: { duration: 4, next: 'hold' as const },\n    hold: { duration: 7, next: 'exhale' as const },\n    exhale: { duration: 8, next: 'pause' as const },\n    pause: { duration: 2, next: 'inhale' as const }\n  };\n\n  const texts = {\n    zh: {\n      inhale: 'å¸æ°”',\n      hold: 'å±æ¯',\n      exhale: 'å‘¼æ°”',\n      pause: 'æš‚åœ',\n      start: 'å¼€å§‹ç»ƒä¹ ',\n      stop: 'åœæ­¢ç»ƒä¹ ',\n      cycles: 'å®Œæˆå‘¨æœŸ'\n    },\n    en: {\n      inhale: 'Inhale',\n      hold: 'Hold',\n      exhale: 'Exhale',\n      pause: 'Pause',\n      start: 'Start Practice',\n      stop: 'Stop Practice',\n      cycles: 'Cycles Completed'\n    }\n  };\n\n  const t = texts[locale as keyof typeof texts] || texts.zh;\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n\n    if (isActive) {\n      interval = setInterval(() => {\n        setTimeLeft((prev) => {\n          if (prev <= 1) {\n            const currentPhase = phases[phase];\n            const nextPhase = currentPhase.next;\n            setPhase(nextPhase);\n            \n            if (nextPhase === 'inhale') {\n              setCycle(c => c + 1);\n            }\n            \n            return phases[nextPhase].duration;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    }\n\n    return () => clearInterval(interval);\n  }, [isActive, phase]);\n\n  const startExercise = () => {\n    setIsActive(true);\n    setPhase('inhale');\n    setTimeLeft(4);\n    setCycle(0);\n  };\n\n  const stopExercise = () => {\n    setIsActive(false);\n    setPhase('inhale');\n    setTimeLeft(4);\n  };\n\n  return (\n    <div className=\"bg-blue-50 rounded-xl p-6 text-center\">\n      <div className=\"mb-6\">\n        <div className={`w-32 h-32 mx-auto rounded-full border-4 flex items-center justify-center transition-all duration-1000 ${\n          isActive ? 'border-blue-500 bg-blue-100' : 'border-gray-300 bg-gray-100'\n        }`}>\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-blue-700\">\n              {timeLeft}\n            </div>\n            <div className=\"text-sm text-blue-600\">\n              {t[phase]}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mb-4\">\n        <div className=\"text-lg font-semibold text-gray-700\">\n          {t.cycles}: {cycle}\n        </div>\n      </div>\n\n      <button\n        onClick={isActive ? stopExercise : startExercise}\n        className={`px-6 py-3 rounded-lg font-medium transition-colors ${\n          isActive\n            ? 'bg-red-500 hover:bg-red-600 text-white'\n            : 'bg-blue-500 hover:bg-blue-600 text-white'\n        }`}\n      >\n        {isActive ? t.stop : t.start}\n      </button>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/tools/ConstitutionTestTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is assigned a value but never used.","line":16,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":54}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { useTranslations } from 'next-intl';\n\ninterface ConstitutionTestToolProps {\n  locale?: string;\n}\n\ninterface Question {\n  id: string;\n  question: string;\n  options: { value: string; label: string; score: number }[];\n}\n\nexport default function ConstitutionTestTool({ locale = 'zh' }: ConstitutionTestToolProps) {\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [answers, setAnswers] = useState<Record<string, number>>({});\n  const [showResult, setShowResult] = useState(false);\n  const t = useTranslations('constitutionTest');\n\n  const questions: Question[] = [\n    {\n      id: 'energy',\n      question: t('questions.energy.question'),\n      options: [\n        { value: 'high', label: t('questions.energy.options.high'), score: 3 },\n        { value: 'medium', label: t('questions.energy.options.medium'), score: 2 },\n        { value: 'low', label: t('questions.energy.options.low'), score: 1 }\n      ]\n    },\n    {\n      id: 'cold_tolerance',\n      question: t('questions.coldTolerance.question'),\n      options: [\n        { value: 'good', label: t('questions.coldTolerance.options.good'), score: 3 },\n        { value: 'normal', label: t('questions.coldTolerance.options.normal'), score: 2 },\n        { value: 'poor', label: t('questions.coldTolerance.options.poor'), score: 1 }\n      ]\n    },\n    {\n      id: 'digestion',\n      question: t('questions.digestion.question'),\n      options: [\n        { value: 'good', label: t('questions.digestion.options.good'), score: 3 },\n        { value: 'normal', label: t('questions.digestion.options.normal'), score: 2 },\n        { value: 'poor', label: t('questions.digestion.options.poor'), score: 1 }\n      ]\n    }\n  ];\n\n  const handleAnswer = (score: number) => {\n    const newAnswers = { ...answers, [questions[currentQuestion].id]: score };\n    setAnswers(newAnswers);\n\n    if (currentQuestion < questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    } else {\n      setShowResult(true);\n    }\n  };\n\n  const getResult = () => {\n    const totalScore = Object.values(answers).reduce((sum, score) => sum + score, 0);\n    const maxScore = questions.length * 3;\n    const percentage = (totalScore / maxScore) * 100;\n\n    if (percentage >= 80) {\n      return { type: t('results.yang.type'), description: t('results.yang.description') };\n    } else if (percentage >= 60) {\n      return { type: t('results.balanced.type'), description: t('results.balanced.description') };\n    } else {\n      return { type: t('results.yin.type'), description: t('results.yin.description') };\n    }\n  };\n\n  const resetTest = () => {\n    setCurrentQuestion(0);\n    setAnswers({});\n    setShowResult(false);\n  };\n\n  if (showResult) {\n    const result = getResult();\n    return (\n      <div className=\"bg-green-50 rounded-xl p-6\">\n        <h3 className=\"text-xl font-bold text-green-700 mb-4\">\n          {t('testResult')}\n        </h3>\n        <div className=\"mb-4\">\n          <div className=\"text-lg font-semibold text-green-600\">{result.type}</div>\n          <div className=\"text-gray-700 mt-2\">{result.description}</div>\n        </div>\n        <button\n          onClick={resetTest}\n          className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg\"\n        >\n          {t('retakeTest')}\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-purple-50 rounded-xl p-6\">\n      <div className=\"mb-4\">\n        <div className=\"text-sm text-purple-600 mb-2\">\n          {t('progress', { current: currentQuestion + 1, total: questions.length })}\n        </div>\n        <div className=\"w-full bg-purple-200 rounded-full h-2\">\n          <div \n            className=\"bg-purple-500 h-2 rounded-full transition-all duration-300\"\n            style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}\n          ></div>\n        </div>\n      </div>\n\n      <h3 className=\"text-lg font-semibold text-purple-700 mb-4\">\n        {questions[currentQuestion].question}\n      </h3>\n\n      <div className=\"space-y-3\">\n        {questions[currentQuestion].options.map((option) => (\n          <button\n            key={option.value}\n            onClick={() => handleAnswer(option.score)}\n            className=\"w-full text-left p-3 bg-white border border-purple-200 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-colors\"\n          >\n            {option.label}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ui/OptimizedImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/analytics/ga4-config.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2567,2570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2567,2570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2660,2663],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2660,2663],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2690,2693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2690,2693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/analytics/ga4-config.ts\n\nexport const GA4_CONFIG = {\n  // GA4 æµ‹é‡ID (éœ€è¦æ›¿æ¢ä¸ºå®é™…çš„ID)\n  MEASUREMENT_ID: process.env.NEXT_PUBLIC_GA4_MEASUREMENT_ID || 'G-XXXXXXXXXX',\n  \n  // æ˜¯å¦å¯ç”¨GA4\n  ENABLED: process.env.NODE_ENV === 'production',\n  \n  // è‡ªå®šä¹‰äº‹ä»¶é…ç½®\n  EVENTS: {\n    // é¡µé¢æµè§ˆ\n    PAGE_VIEW: 'page_view',\n    \n    // ç”¨æˆ·äº¤äº’\n    CLICK: 'click',\n    SCROLL: 'scroll',\n    SEARCH: 'search',\n    \n    // å†…å®¹äº¤äº’\n    PDF_DOWNLOAD: 'pdf_download',\n    PDF_PREVIEW: 'pdf_preview',\n    ARTICLE_READ: 'article_read',\n    TOOL_USAGE: 'tool_usage',\n    \n    // è½¬åŒ–äº‹ä»¶\n    SUBSCRIBE: 'subscribe',\n    CONTACT: 'contact',\n    SHARE: 'share',\n    \n    // ç”¨æˆ·è¡Œä¸º\n    SESSION_START: 'session_start',\n    SESSION_END: 'session_end',\n    USER_REGISTRATION: 'user_registration'\n  },\n  \n  // è‡ªå®šä¹‰ç»´åº¦\n  CUSTOM_DIMENSIONS: {\n    USER_TYPE: 'user_type',\n    CONTENT_CATEGORY: 'content_category',\n    LANGUAGE: 'language',\n    DEVICE_TYPE: 'device_type'\n  },\n  \n  // è‡ªå®šä¹‰æŒ‡æ ‡\n  CUSTOM_METRICS: {\n    SESSION_DURATION: 'session_duration',\n    PAGE_SCROLL_DEPTH: 'page_scroll_depth',\n    CONTENT_ENGAGEMENT: 'content_engagement'\n  }\n};\n\n// GA4 åˆå§‹åŒ–è„šæœ¬\nexport const GA4_INIT_SCRIPT = `\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', '${GA4_CONFIG.MEASUREMENT_ID}', {\n    page_title: document.title,\n    page_location: window.location.href,\n    custom_map: {\n      'custom_dimension1': '${GA4_CONFIG.CUSTOM_DIMENSIONS.USER_TYPE}',\n      'custom_dimension2': '${GA4_CONFIG.CUSTOM_DIMENSIONS.CONTENT_CATEGORY}',\n      'custom_dimension3': '${GA4_CONFIG.CUSTOM_DIMENSIONS.LANGUAGE}',\n      'custom_dimension4': '${GA4_CONFIG.CUSTOM_DIMENSIONS.DEVICE_TYPE}'\n    }\n  });\n`;\n\n// GA4 äº‹ä»¶è¿½è¸ªå·¥å…·\nexport class GA4Tracker {\n  private static instance: GA4Tracker;\n  private isInitialized = false;\n\n  static getInstance(): GA4Tracker {\n    if (!GA4Tracker.instance) {\n      GA4Tracker.instance = new GA4Tracker();\n    }\n    return GA4Tracker.instance;\n  }\n\n  init(): void {\n    if (typeof window !== 'undefined' && GA4_CONFIG.ENABLED) {\n      // æ³¨å…¥GA4è„šæœ¬\n      const script = document.createElement('script');\n      script.async = true;\n      script.src = `https://www.googletagmanager.com/gtag/js?id=${GA4_CONFIG.MEASUREMENT_ID}`;\n      document.head.appendChild(script);\n\n      // æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬\n      const initScript = document.createElement('script');\n      initScript.innerHTML = GA4_INIT_SCRIPT;\n      document.head.appendChild(initScript);\n\n      this.isInitialized = true;\n    }\n  }\n\n  trackEvent(eventName: string, parameters: Record<string, any> = {}): void {\n    if (typeof window !== 'undefined' && this.isInitialized && (window as any).gtag) {\n      (window as any).gtag('event', eventName, parameters);\n    }\n  }\n\n  trackPageView(pageTitle: string, pageLocation: string): void {\n    this.trackEvent(GA4_CONFIG.EVENTS.PAGE_VIEW, {\n      page_title: pageTitle,\n      page_location: pageLocation\n    });\n  }\n\n  trackPDFDownload(resourceId: string, resourceName: string, language: string): void {\n    this.trackEvent(GA4_CONFIG.EVENTS.PDF_DOWNLOAD, {\n      resource_id: resourceId,\n      resource_name: resourceName,\n      language: language,\n      content_category: 'pdf'\n    });\n  }\n\n  trackSearch(query: string, resultsCount: number): void {\n    this.trackEvent(GA4_CONFIG.EVENTS.SEARCH, {\n      search_term: query,\n      results_count: resultsCount\n    });\n  }\n\n  trackToolUsage(toolName: string, action: string): void {\n    this.trackEvent(GA4_CONFIG.EVENTS.TOOL_USAGE, {\n      tool_name: toolName,\n      action: action\n    });\n  }\n\n  trackSubscribe(email: string, source: string): void {\n    this.trackEvent(GA4_CONFIG.EVENTS.SUBSCRIBE, {\n      email: email,\n      source: source\n    });\n  }\n}\n\nexport default GA4Tracker; ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/analytics/web-vitals.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[358,361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[358,361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[437,440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[437,440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Web Vitalsåˆ†æå™¨\nexport interface WebVitalsReport {\n  FCP: number;\n  LCP: number;\n  INP: number; // æ›´æ–°ï¼šFID â†’ INP (2024å¹´3æœˆæ›´æ–°)\n  CLS: number;\n  TTFB: number;\n  score: number;\n}\n\nexport class WebVitalsAnalyzer {\n  private vitals: WebVitalsReport[] = [];\n\n  recordVitals(vitals: WebVitalsReport): void {\n    this.vitals.push(vitals);\n  }\n\n  getAverageMetrics(): any {\n    return this.getAverageVitals();\n  }\n\n  getPerformanceRating(metrics: any): { score: number; grade: string } {\n    const score = Math.round(metrics.score || 85);\n    let grade = 'è‰¯å¥½';\n    if (score >= 90) grade = 'ä¼˜ç§€';\n    else if (score >= 75) grade = 'è‰¯å¥½';\n    else if (score >= 60) grade = 'ä¸€èˆ¬';\n    else grade = 'éœ€æ”¹è¿›';\n    \n    return { score, grade };\n  }\n\n  getAverageVitals(): WebVitalsReport {\n    if (this.vitals.length === 0) {\n      return {\n        FCP: 0,\n        LCP: 0,\n        INP: 0, // æ›´æ–°ï¼šFID â†’ INP\n        CLS: 0,\n        TTFB: 0,\n        score: 85\n      };\n    }\n\n    const sum = this.vitals.reduce((acc, curr) => ({\n      FCP: acc.FCP + curr.FCP,\n      LCP: acc.LCP + curr.LCP,\n      INP: acc.INP + curr.INP, // æ›´æ–°ï¼šFID â†’ INP\n      CLS: acc.CLS + curr.CLS,\n      TTFB: acc.TTFB + curr.TTFB,\n      score: acc.score + curr.score\n    }));\n\n    const count = this.vitals.length;\n    return {\n      FCP: sum.FCP / count,\n      LCP: sum.LCP / count,\n      INP: sum.INP / count, // æ›´æ–°ï¼šFID â†’ INP\n      CLS: sum.CLS / count,\n      TTFB: sum.TTFB / count,\n      score: sum.score / count\n    };\n  }\n\n  generateReport(): string {\n    const avg = this.getAverageVitals();\n    return JSON.stringify(avg, null, 2);\n  }\n}\n\n// å¯¼å‡ºå…¼å®¹åç§°\nexport const webVitalsTracker = new WebVitalsAnalyzer();\nexport default WebVitalsAnalyzer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/api/client.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[171,174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[171,174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[432,435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[432,435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[699,702],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[699,702],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1166,1169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1166,1169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1319,1322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1319,1322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1327,1330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1327,1330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1746,1749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1746,1749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1754,1757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1754,1757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3285,3288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3285,3288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3604,3607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3604,3607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":282,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":282,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6873,6876],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6873,6876],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":290,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":290,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7106,7109],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7106,7109],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7140,7143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7140,7143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":298,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7332,7335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7332,7335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":300,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":300,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7366,7369],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7366,7369],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7560,7563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7560,7563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":313,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7753,7756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7753,7756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":315,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7787,7790],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7787,7790],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { performanceMonitor } from '../performance/monitor';\nimport { useAppStore } from '../stores/appStore';\n\n// APIå“åº”ç±»å‹\nexport interface ApiResponse<T = any> {\n  data: T;\n  success: boolean;\n  message?: string;\n  error?: string;\n  timestamp: string;\n  requestId: string;\n}\n\n// APIé”™è¯¯ç±»å‹\nexport class ApiError extends Error {\n  constructor(\n    public status: number,\n    public statusText: string,\n    public data?: any,\n    public requestId?: string\n  ) {\n    super(`API Error ${status}: ${statusText}`);\n    this.name = 'ApiError';\n  }\n}\n\n// è¯·æ±‚é…ç½®\nexport interface RequestConfig {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: Record<string, string>;\n  body?: any;\n  timeout?: number;\n  retries?: number;\n  retryDelay?: number;\n  cache?: 'no-cache' | 'reload' | 'force-cache' | 'only-if-cached';\n  signal?: AbortSignal;\n}\n\n// ç¼“å­˜é…ç½®\ninterface CacheConfig {\n  ttl: number; // ç”Ÿå­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n  key: string;\n}\n\n// ç¼“å­˜é¡¹\ninterface CacheItem<T> {\n  data: T;\n  timestamp: number;\n  ttl: number;\n}\n\n// APIå®¢æˆ·ç«¯ç±»\nclass ApiClient {\n  private baseUrl: string;\n  private defaultHeaders: Record<string, string>;\n  private cache: Map<string, CacheItem<any>> = new Map();\n  private requestInterceptors: Array<(config: RequestConfig) => RequestConfig> = [];\n  private responseInterceptors: Array<(response: any) => any> = [];\n\n  constructor(baseUrl: string = '') {\n    this.baseUrl = baseUrl;\n    this.defaultHeaders = {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n    };\n  }\n\n  // æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨\n  public addRequestInterceptor(interceptor: (config: RequestConfig) => RequestConfig) {\n    this.requestInterceptors.push(interceptor);\n  }\n\n  // æ·»åŠ å“åº”æ‹¦æˆªå™¨\n  public addResponseInterceptor(interceptor: (response: any) => any) {\n    this.responseInterceptors.push(interceptor);\n  }\n\n  // è®¾ç½®é»˜è®¤å¤´éƒ¨\n  public setDefaultHeader(key: string, value: string) {\n    this.defaultHeaders[key] = value;\n  }\n\n  // ç”Ÿæˆè¯·æ±‚ID\n  private generateRequestId(): string {\n    return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  // ç¼“å­˜ç®¡ç†\n  private getCacheKey(url: string, config: RequestConfig): string {\n    return `${config.method || 'GET'}_${url}_${JSON.stringify(config.body || {})}`;\n  }\n\n  private getFromCache<T>(key: string): T | null {\n    const item = this.cache.get(key);\n    if (!item) return null;\n\n    const now = Date.now();\n    if (now - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return item.data;\n  }\n\n  private setCache<T>(key: string, data: T, ttl: number) {\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      ttl,\n    });\n  }\n\n  // æ¸…ç†è¿‡æœŸç¼“å­˜\n  private cleanExpiredCache() {\n    const now = Date.now();\n    for (const [key, item] of this.cache.entries()) {\n      if (now - item.timestamp > item.ttl) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  // é‡è¯•é€»è¾‘\n  private async withRetry<T>(\n    fn: () => Promise<T>,\n    retries: number = 3,\n    delay: number = 1000\n  ): Promise<T> {\n    try {\n      return await fn();\n    } catch (error) {\n      if (retries > 0 && this.shouldRetry(error)) {\n        await this.delay(delay);\n        return this.withRetry(fn, retries - 1, delay * 2);\n      }\n      throw error;\n    }\n  }\n\n  // åˆ¤æ–­æ˜¯å¦åº”è¯¥é‡è¯•\n  private shouldRetry(error: any): boolean {\n    if (error instanceof ApiError) {\n      // 5xxé”™è¯¯æˆ–ç½‘ç»œé”™è¯¯é‡è¯•\n      return error.status >= 500 || error.status === 0;\n    }\n    return false;\n  }\n\n  // å»¶è¿Ÿå‡½æ•°\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  // ä¸»è¦è¯·æ±‚æ–¹æ³•\n  public async request<T = any>(\n    url: string,\n    config: RequestConfig = {},\n    cacheConfig?: CacheConfig\n  ): Promise<ApiResponse<T>> {\n    const requestId = this.generateRequestId();\n    const startTime = performance.now();\n\n    try {\n      // åº”ç”¨è¯·æ±‚æ‹¦æˆªå™¨\n      let finalConfig = { ...config };\n      for (const interceptor of this.requestInterceptors) {\n        finalConfig = interceptor(finalConfig);\n      }\n\n      // æ£€æŸ¥ç¼“å­˜\n      if (cacheConfig && (finalConfig.method === 'GET' || !finalConfig.method)) {\n        const cacheKey = this.getCacheKey(url, finalConfig);\n        const cachedData = this.getFromCache<ApiResponse<T>>(cacheKey);\n        if (cachedData) {\n          return cachedData;\n        }\n      }\n\n      // æ„å»ºè¯·æ±‚\n      const fullUrl = url.startsWith('http') ? url : `${this.baseUrl}${url}`;\n      const headers = { ...this.defaultHeaders, ...finalConfig.headers };\n      \n      const fetchConfig: RequestInit = {\n        method: finalConfig.method || 'GET',\n        headers,\n        cache: finalConfig.cache,\n        signal: finalConfig.signal,\n      };\n\n      if (finalConfig.body && finalConfig.method !== 'GET') {\n        fetchConfig.body = typeof finalConfig.body === 'string' \n          ? finalConfig.body \n          : JSON.stringify(finalConfig.body);\n      }\n\n      // è®¾ç½®è¶…æ—¶\n      const timeoutSignal = finalConfig.timeout \n        ? AbortSignal.timeout(finalConfig.timeout)\n        : undefined;\n\n      if (timeoutSignal) {\n        fetchConfig.signal = timeoutSignal;\n      }\n\n      // æ‰§è¡Œè¯·æ±‚ï¼ˆå¸¦é‡è¯•ï¼‰\n      const response = await this.withRetry(\n        () => fetch(fullUrl, fetchConfig),\n        finalConfig.retries || 3,\n        finalConfig.retryDelay || 1000\n      );\n\n      const endTime = performance.now();\n\n      // è®°å½•æ€§èƒ½\n      performanceMonitor.recordApiCall(\n        fullUrl,\n        finalConfig.method || 'GET',\n        startTime,\n        endTime,\n        response.status,\n        parseInt(response.headers.get('content-length') || '0')\n      );\n\n      // å¤„ç†å“åº”\n      if (!response.ok) {\n        const errorData = await response.text();\n        throw new ApiError(\n          response.status,\n          response.statusText,\n          errorData,\n          requestId\n        );\n      }\n\n      const responseData = await response.json();\n      \n      // æ„å»ºæ ‡å‡†å“åº”\n      const apiResponse: ApiResponse<T> = {\n        data: responseData,\n        success: true,\n        timestamp: new Date().toISOString(),\n        requestId,\n      };\n\n      // åº”ç”¨å“åº”æ‹¦æˆªå™¨\n      let finalResponse = apiResponse;\n      for (const interceptor of this.responseInterceptors) {\n        finalResponse = interceptor(finalResponse);\n      }\n\n      // ç¼“å­˜å“åº”\n      if (cacheConfig && (finalConfig.method === 'GET' || !finalConfig.method)) {\n        const cacheKey = this.getCacheKey(url, finalConfig);\n        this.setCache(cacheKey, finalResponse, cacheConfig.ttl);\n      }\n\n      return finalResponse;\n\n    } catch (error) {\n      const endTime = performance.now();\n      \n      // è®°å½•é”™è¯¯æ€§èƒ½\n      performanceMonitor.recordApiCall(\n        url,\n        config.method || 'GET',\n        startTime,\n        endTime,\n        error instanceof ApiError ? error.status : 0\n      );\n\n      // æ›´æ–°åº”ç”¨çŠ¶æ€\n      useAppStore.getState().incrementErrorCount();\n\n      throw error;\n    }\n  }\n\n  // ä¾¿æ·æ–¹æ³•\n  public async get<T = any>(\n    url: string,\n    config?: Omit<RequestConfig, 'method'>,\n    cacheConfig?: CacheConfig\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(url, { ...config, method: 'GET' }, cacheConfig);\n  }\n\n  public async post<T = any>(\n    url: string,\n    data?: any,\n    config?: Omit<RequestConfig, 'method' | 'body'>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(url, { ...config, method: 'POST', body: data });\n  }\n\n  public async put<T = any>(\n    url: string,\n    data?: any,\n    config?: Omit<RequestConfig, 'method' | 'body'>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(url, { ...config, method: 'PUT', body: data });\n  }\n\n  public async delete<T = any>(\n    url: string,\n    config?: Omit<RequestConfig, 'method'>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(url, { ...config, method: 'DELETE' });\n  }\n\n  public async patch<T = any>(\n    url: string,\n    data?: any,\n    config?: Omit<RequestConfig, 'method' | 'body'>\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(url, { ...config, method: 'PATCH', body: data });\n  }\n\n  // æ¸…ç†ç¼“å­˜\n  public clearCache() {\n    this.cache.clear();\n  }\n\n  // è·å–ç¼“å­˜ç»Ÿè®¡\n  public getCacheStats() {\n    this.cleanExpiredCache();\n    return {\n      size: this.cache.size,\n      keys: Array.from(this.cache.keys()),\n    };\n  }\n}\n\n// åˆ›å»ºé»˜è®¤å®¢æˆ·ç«¯å®ä¾‹\nexport const apiClient = new ApiClient();\n\n// è®¾ç½®é»˜è®¤æ‹¦æˆªå™¨\napiClient.addRequestInterceptor((config) => {\n  // æ·»åŠ è®¤è¯å¤´éƒ¨ï¼ˆå¦‚æœéœ€è¦ï¼‰\n  const token = localStorage.getItem('auth_token');\n  if (token) {\n    config.headers = {\n      ...config.headers,\n      'Authorization': `Bearer ${token}`,\n    };\n  }\n  return config;\n});\n\napiClient.addResponseInterceptor((response) => {\n  // å¯ä»¥åœ¨è¿™é‡Œå¤„ç†å…¨å±€å“åº”é€»è¾‘\n  return response;\n});\n\n// React Hook\nexport const useApiClient = () => {\n  return {\n    client: apiClient,\n    get: apiClient.get.bind(apiClient),\n    post: apiClient.post.bind(apiClient),\n    put: apiClient.put.bind(apiClient),\n    delete: apiClient.delete.bind(apiClient),\n    patch: apiClient.patch.bind(apiClient),\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/articles.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categoryKey' is assigned a value but never used.","line":163,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":163,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tagsKey' is assigned a value but never used.","line":173,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":173,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categoryKey' is assigned a value but never used.","line":222,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":222,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tagsKey' is assigned a value but never used.","line":233,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":233,"endColumn":16}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from 'fs';\nimport path from 'path';\nimport matter from 'gray-matter';\n\nexport interface Article {\n  slug: string;\n  title: string;\n  title_zh?: string;\n  date: string;\n  summary: string;\n  summary_zh?: string;\n  tags: string[];\n  tags_zh?: string[];\n  category: string;\n  category_zh?: string;\n  author: string;\n  featured_image: string;\n  reading_time: string;\n  reading_time_zh?: string;\n  content: string;\n  seo_title?: string;\n  seo_title_zh?: string;\n  seo_description?: string;\n  seo_description_zh?: string;\n  canonical_url?: string;\n  schema_type?: string;\n}\n\nconst articlesDirectory = path.join(process.cwd(), 'content/articles');\n\n// é€’å½’æ‰«æç›®å½•è·å–æ‰€æœ‰markdownæ–‡ä»¶\nfunction scanDirectoryRecursively(dir: string, basePath: string = ''): string[] {\n  const files: string[] = [];\n  \n  try {\n    const items = fs.readdirSync(dir);\n    \n    for (const item of items) {\n      const itemPath = path.join(dir, item);\n      const relativePath = basePath ? `${basePath}/${item}` : item;\n      const stat = fs.statSync(itemPath);\n      \n      if (stat.isDirectory()) {\n        // é€’å½’æ‰«æå­ç›®å½•\n        const subFiles = scanDirectoryRecursively(itemPath, relativePath);\n        files.push(...subFiles);\n      } else if (item.endsWith('.md')) {\n        // æ·»åŠ markdownæ–‡ä»¶\n        const slug = relativePath.replace('.md', '');\n        files.push(slug);\n      }\n    }\n  } catch (error) {\n    console.warn(`æ‰«æç›®å½•å¤±è´¥: ${dir}`, error);\n  }\n  \n  return files;\n}\n\nexport function getAllArticles(locale: string = 'en'): Article[] {\n  try {\n    const articlesPath = locale === 'zh'\n      ? path.join(articlesDirectory, 'zh')\n      : path.join(articlesDirectory, 'en');\n\n    if (!fs.existsSync(articlesPath)) {\n      return [];\n    }\n\n    // ä½¿ç”¨é€’å½’æ‰«æè·å–æ‰€æœ‰æ–‡ç« slug\n    const articleSlugs = scanDirectoryRecursively(articlesPath);\n    \n    const articles = articleSlugs\n      .map(slug => getArticleBySlug(slug, locale))\n      .filter(article => article !== null) as Article[];\n\n    // Sort articles by date (newest first)\n    return articles.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n  } catch (error) {\n    console.error('Error reading articles:', error);\n    return [];\n  }\n}\n\n// Slugæ˜ å°„è¡¨ - å¤„ç†URL slugä¸å®é™…æ–‡ä»¶åçš„æ˜ å°„\nconst slugMapping: Record<string, string> = {\n  // IndexNowç´¢å¼•é—®é¢˜ä¿®å¤æ˜ å°„\n  'personal-health-profile': 'personal-menstrual-health-profile', // ä¸»URLï¼Œä¿ç•™æ˜ å°„\n  'pain-complications-management': 'menstrual-pain-complications-management',\n  // æ³¨æ„ï¼šhealth-tracking-and-analysis å·²é€šè¿‡301é‡å®šå‘åˆ° personal-health-profile\n  'evidence-based-pain-guidance': 'menstrual-pain-medical-guide',\n  'sustainable-health-management': 'menstrual-preventive-care-complete-plan',\n  'anti-inflammatory-diet-guide': 'anti-inflammatory-diet-period-pain',\n  'iud-comprehensive-guide': 'comprehensive-iud-guide',\n  // å…¶ä»–å¯èƒ½çš„æ˜ å°„\n  'long-term-healthy-lifestyle-guide': 'long-term-healthy-lifestyle-guide', // æ–°åˆ›å»ºçš„æ–‡ä»¶\n};\n\nexport function getArticleBySlug(slug: string, locale: string = 'en'): Article | null {\n  try {\n    const articlesPath = locale === 'zh'\n      ? path.join(articlesDirectory, 'zh')\n      : path.join(articlesDirectory, 'en');\n\n    // é¦–å…ˆå°è¯•ç›´æ¥æ˜ å°„çš„slug\n    const actualSlug = slugMapping[slug] || slug;\n    let fullPath = path.join(articlesPath, `${actualSlug}.md`);\n\n    // å¦‚æœæ˜ å°„çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°è¯•åŸå§‹slug\n    if (!fs.existsSync(fullPath)) {\n      fullPath = path.join(articlesPath, `${slug}.md`);\n    }\n\n    // å¦‚æœç›´æ¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°è¯•å­ç›®å½•ç»“æ„\n    if (!fs.existsSync(fullPath)) {\n      // å¤„ç†å­ç›®å½•ç»“æ„ï¼Œå¦‚ pain-management/understanding-dysmenorrhea\n      const slugParts = slug.split('/');\n      if (slugParts.length > 1) {\n        const subDirPath = path.join(articlesPath, ...slugParts.slice(0, -1));\n        const fileName = `${slugParts[slugParts.length - 1]}.md`;\n        fullPath = path.join(subDirPath, fileName);\n      }\n    }\n\n    if (!fs.existsSync(fullPath)) {\n      return null;\n    }\n\n    const fileContents = fs.readFileSync(fullPath, 'utf8');\n    const { data, content } = matter(fileContents);\n\n    return {\n      slug,\n      title: data.title || '',\n      title_zh: data.title_zh,\n      date: data.date || data.publishDate || '',\n      summary: data.summary || '',\n      summary_zh: data.summary_zh,\n      tags: data.tags || [],\n      tags_zh: data.tags_zh,\n      category: data.category || '',\n      category_zh: data.category_zh,\n      author: data.author || '',\n      featured_image: data.featured_image || '',\n      reading_time: data.reading_time || '',\n      reading_time_zh: data.reading_time_zh,\n      content,\n      seo_title: data.seo_title,\n      seo_title_zh: data.seo_title_zh,\n      seo_description: data.seo_description,\n      seo_description_zh: data.seo_description_zh,\n      canonical_url: data.canonical_url,\n      schema_type: data.schema_type,\n    };\n  } catch (error) {\n    console.error(`Error reading article ${slug}:`, error);\n    return null;\n  }\n}\n\nexport function getArticlesByCategory(category: string, locale: string = 'en'): Article[] {\n  const articles = getAllArticles(locale);\n  const categoryKey = locale === 'zh' ? 'category_zh' : 'category';\n  \n  return articles.filter(article => {\n    const articleCategory = locale === 'zh' ? article.category_zh : article.category;\n    return articleCategory === category;\n  });\n}\n\nexport function getArticlesByTag(tag: string, locale: string = 'en'): Article[] {\n  const articles = getAllArticles(locale);\n  const tagsKey = locale === 'zh' ? 'tags_zh' : 'tags';\n  \n  return articles.filter(article => {\n    const articleTags = locale === 'zh' ? article.tags_zh : article.tags;\n    return articleTags?.includes(tag);\n  });\n}\n\nexport function getFeaturedArticles(locale: string = 'en', limit: number = 3): Article[] {\n  const articles = getAllArticles(locale);\n  return articles.slice(0, limit);\n}\n\nexport function getRelatedArticles(currentSlug: string, locale: string = 'en', limit: number = 3): Article[] {\n  const currentArticle = getArticleBySlug(currentSlug, locale);\n  if (!currentArticle) return [];\n\n  const allArticles = getAllArticles(locale);\n  const otherArticles = allArticles.filter(article => article.slug !== currentSlug);\n\n  // Score articles based on shared tags and category\n  const scoredArticles = otherArticles.map(article => {\n    let score = 0;\n    \n    // Same category gets higher score\n    const currentCategory = locale === 'zh' ? currentArticle.category_zh : currentArticle.category;\n    const articleCategory = locale === 'zh' ? article.category_zh : article.category;\n    if (currentCategory === articleCategory) {\n      score += 3;\n    }\n\n    // Shared tags get points\n    const currentTags = locale === 'zh' ? currentArticle.tags_zh : currentArticle.tags;\n    const articleTags = locale === 'zh' ? article.tags_zh : article.tags;\n    const sharedTags = currentTags?.filter(tag => articleTags?.includes(tag)) || [];\n    score += sharedTags.length;\n\n    return { article, score };\n  });\n\n  // Sort by score and return top articles\n  return scoredArticles\n    .sort((a, b) => b.score - a.score)\n    .slice(0, limit)\n    .map(item => item.article);\n}\n\nexport function getAllCategories(locale: string = 'en'): string[] {\n  const articles = getAllArticles(locale);\n  const categoryKey = locale === 'zh' ? 'category_zh' : 'category';\n  \n  const categories = articles.map(article => {\n    return locale === 'zh' ? article.category_zh : article.category;\n  }).filter(Boolean) as string[];\n\n  return [...new Set(categories)];\n}\n\nexport function getAllTags(locale: string = 'en'): string[] {\n  const articles = getAllArticles(locale);\n  const tagsKey = locale === 'zh' ? 'tags_zh' : 'tags';\n  \n  const allTags = articles.flatMap(article => {\n    return locale === 'zh' ? article.tags_zh : article.tags;\n  }).filter(Boolean) as string[];\n\n  return [...new Set(allTags)];\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/cache/manager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[658,661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[658,661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'priority' is assigned a value but never used.","line":67,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":62},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4084,4087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4084,4087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":278,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5935,5938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5935,5938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// ç¼“å­˜é¡¹æ¥å£\ninterface CacheItem<T> {\n  data: T;\n  timestamp: number;\n  ttl: number;\n  accessCount: number;\n  lastAccessed: number;\n  tags?: string[];\n}\n\n// ç¼“å­˜é…ç½®\ninterface CacheConfig {\n  maxSize: number; // æœ€å¤§ç¼“å­˜é¡¹æ•°é‡\n  defaultTTL: number; // é»˜è®¤ç”Ÿå­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n  cleanupInterval: number; // æ¸…ç†é—´éš”ï¼ˆæ¯«ç§’ï¼‰\n  enableCompression: boolean; // æ˜¯å¦å¯ç”¨å‹ç¼©\n  enablePersistence: boolean; // æ˜¯å¦æŒä¹…åŒ–åˆ°localStorage\n}\n\n// ç¼“å­˜ç»Ÿè®¡\ninterface CacheStats {\n  size: number;\n  hits: number;\n  misses: number;\n  hitRate: number;\n  memoryUsage: number;\n  oldestItem: number;\n  newestItem: number;\n}\n\n// é«˜çº§ç¼“å­˜ç®¡ç†å™¨\nexport class AdvancedCacheManager {\n  private cache = new Map<string, CacheItem<any>>();\n  private stats = {\n    hits: 0,\n    misses: 0,\n  };\n  private cleanupTimer?: NodeJS.Timeout;\n  private config: CacheConfig;\n\n  constructor(config: Partial<CacheConfig> = {}) {\n    this.config = {\n      maxSize: 1000,\n      defaultTTL: 5 * 60 * 1000, // 5åˆ†é’Ÿ\n      cleanupInterval: 60 * 1000, // 1åˆ†é’Ÿ\n      enableCompression: false,\n      enablePersistence: true,\n      ...config,\n    };\n\n    this.startCleanupTimer();\n    this.loadFromPersistence();\n  }\n\n  // è®¾ç½®ç¼“å­˜é¡¹\n  set<T>(\n    key: string,\n    data: T,\n    options: {\n      ttl?: number;\n      tags?: string[];\n      priority?: 'low' | 'normal' | 'high';\n    } = {}\n  ): void {\n    const { ttl = this.config.defaultTTL, tags = [], priority = 'normal' } = options;\n    \n    const now = Date.now();\n    const item: CacheItem<T> = {\n      data: this.config.enableCompression ? this.compress(data) as T : data,\n      timestamp: now,\n      ttl,\n      accessCount: 0,\n      lastAccessed: now,\n      tags,\n    };\n\n    // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œæ ¹æ®LRUç­–ç•¥ç§»é™¤é¡¹ç›®\n    if (this.cache.size >= this.config.maxSize) {\n      this.evictLRU();\n    }\n\n    this.cache.set(key, item);\n    this.saveToPersistence();\n  }\n\n  // è·å–ç¼“å­˜é¡¹\n  get<T>(key: string): T | null {\n    const item = this.cache.get(key);\n    \n    if (!item) {\n      this.stats.misses++;\n      return null;\n    }\n\n    const now = Date.now();\n    \n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    if (now - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      this.stats.misses++;\n      return null;\n    }\n\n    // æ›´æ–°è®¿é—®ç»Ÿè®¡\n    item.accessCount++;\n    item.lastAccessed = now;\n    this.stats.hits++;\n\n    const data = this.config.enableCompression ? this.decompress(item.data) : item.data;\n    return data;\n  }\n\n  // æ£€æŸ¥ç¼“å­˜é¡¹æ˜¯å¦å­˜åœ¨ä¸”æœªè¿‡æœŸ\n  has(key: string): boolean {\n    const item = this.cache.get(key);\n    if (!item) return false;\n\n    const now = Date.now();\n    if (now - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      return false;\n    }\n\n    return true;\n  }\n\n  // åˆ é™¤ç¼“å­˜é¡¹\n  delete(key: string): boolean {\n    const result = this.cache.delete(key);\n    this.saveToPersistence();\n    return result;\n  }\n\n  // æ ¹æ®æ ‡ç­¾åˆ é™¤ç¼“å­˜é¡¹\n  deleteByTag(tag: string): number {\n    let deletedCount = 0;\n    \n    for (const [key, item] of this.cache.entries()) {\n      if (item.tags?.includes(tag)) {\n        this.cache.delete(key);\n        deletedCount++;\n      }\n    }\n\n    this.saveToPersistence();\n    return deletedCount;\n  }\n\n  // æ¸…ç©ºæ‰€æœ‰ç¼“å­˜\n  clear(): void {\n    this.cache.clear();\n    this.stats.hits = 0;\n    this.stats.misses = 0;\n    this.saveToPersistence();\n  }\n\n  // è·å–ç¼“å­˜ç»Ÿè®¡\n  getStats(): CacheStats {\n    const now = Date.now();\n    let oldestItem = now;\n    let newestItem = 0;\n    let memoryUsage = 0;\n\n    for (const item of this.cache.values()) {\n      oldestItem = Math.min(oldestItem, item.timestamp);\n      newestItem = Math.max(newestItem, item.timestamp);\n      memoryUsage += this.estimateSize(item);\n    }\n\n    const totalRequests = this.stats.hits + this.stats.misses;\n    const hitRate = totalRequests > 0 ? (this.stats.hits / totalRequests) * 100 : 0;\n\n    return {\n      size: this.cache.size,\n      hits: this.stats.hits,\n      misses: this.stats.misses,\n      hitRate: Math.round(hitRate * 100) / 100,\n      memoryUsage,\n      oldestItem: oldestItem === now ? 0 : oldestItem,\n      newestItem,\n    };\n  }\n\n  // è·å–æ‰€æœ‰ç¼“å­˜é”®\n  keys(): string[] {\n    return Array.from(this.cache.keys());\n  }\n\n  // è·å–ç¼“å­˜é¡¹ä¿¡æ¯ï¼ˆä¸æ›´æ–°è®¿é—®ç»Ÿè®¡ï¼‰\n  inspect(key: string): CacheItem<any> | null {\n    return this.cache.get(key) || null;\n  }\n\n  // æ›´æ–°ç¼“å­˜é¡¹çš„TTL\n  touch(key: string, newTTL?: number): boolean {\n    const item = this.cache.get(key);\n    if (!item) return false;\n\n    if (newTTL !== undefined) {\n      item.ttl = newTTL;\n    }\n    item.timestamp = Date.now();\n    \n    this.saveToPersistence();\n    return true;\n  }\n\n  // æ‰¹é‡æ“ä½œ\n  mget<T>(keys: string[]): Record<string, T | null> {\n    const result: Record<string, T | null> = {};\n    for (const key of keys) {\n      result[key] = this.get<T>(key);\n    }\n    return result;\n  }\n\n  mset<T>(items: Record<string, T>, options?: { ttl?: number; tags?: string[] }): void {\n    for (const [key, data] of Object.entries(items)) {\n      this.set(key, data, options);\n    }\n  }\n\n  // LRUæ·˜æ±°ç­–ç•¥\n  private evictLRU(): void {\n    let lruKey = '';\n    let lruTime = Date.now();\n\n    for (const [key, item] of this.cache.entries()) {\n      if (item.lastAccessed < lruTime) {\n        lruTime = item.lastAccessed;\n        lruKey = key;\n      }\n    }\n\n    if (lruKey) {\n      this.cache.delete(lruKey);\n    }\n  }\n\n  // æ¸…ç†è¿‡æœŸé¡¹\n  private cleanup(): void {\n    const now = Date.now();\n    const expiredKeys: string[] = [];\n\n    for (const [key, item] of this.cache.entries()) {\n      if (now - item.timestamp > item.ttl) {\n        expiredKeys.push(key);\n      }\n    }\n\n    for (const key of expiredKeys) {\n      this.cache.delete(key);\n    }\n\n    if (expiredKeys.length > 0) {\n      this.saveToPersistence();\n    }\n  }\n\n  // å¯åŠ¨æ¸…ç†å®šæ—¶å™¨\n  private startCleanupTimer(): void {\n    this.cleanupTimer = setInterval(() => {\n      this.cleanup();\n    }, this.config.cleanupInterval);\n  }\n\n  // åœæ­¢æ¸…ç†å®šæ—¶å™¨\n  private stopCleanupTimer(): void {\n    if (this.cleanupTimer) {\n      clearInterval(this.cleanupTimer);\n      this.cleanupTimer = undefined;\n    }\n  }\n\n  // ä¼°ç®—ç¼“å­˜é¡¹å¤§å°\n  private estimateSize(item: CacheItem<any>): number {\n    try {\n      return JSON.stringify(item).length * 2; // ç²—ç•¥ä¼°ç®—ï¼ˆUTF-16ï¼‰\n    } catch {\n      return 0;\n    }\n  }\n\n  // å‹ç¼©æ•°æ®ï¼ˆç®€å•çš„JSONå­—ç¬¦ä¸²å‹ç¼©ï¼‰\n  private compress<T>(data: T): string {\n    try {\n      return JSON.stringify(data);\n    } catch {\n      return '';\n    }\n  }\n\n  // è§£å‹æ•°æ®\n  private decompress<T>(compressed: string): T {\n    try {\n      return JSON.parse(compressed);\n    } catch {\n      return null as T;\n    }\n  }\n\n  // æŒä¹…åŒ–åˆ°localStorage\n  private saveToPersistence(): void {\n    if (!this.config.enablePersistence || typeof window === 'undefined') {\n      return;\n    }\n\n    try {\n      const serialized = JSON.stringify({\n        cache: Array.from(this.cache.entries()),\n        stats: this.stats,\n        timestamp: Date.now(),\n      });\n      localStorage.setItem('advanced-cache', serialized);\n    } catch (error) {\n      console.warn('Failed to save cache to localStorage:', error);\n    }\n  }\n\n  // ä»localStorageåŠ è½½\n  private loadFromPersistence(): void {\n    if (!this.config.enablePersistence || typeof window === 'undefined') {\n      return;\n    }\n\n    try {\n      const serialized = localStorage.getItem('advanced-cache');\n      if (!serialized) return;\n\n      const data = JSON.parse(serialized);\n      const now = Date.now();\n\n      // æ£€æŸ¥æ•°æ®æ˜¯å¦å¤ªæ—§ï¼ˆè¶…è¿‡1å¤©ï¼‰\n      if (now - data.timestamp > 24 * 60 * 60 * 1000) {\n        localStorage.removeItem('advanced-cache');\n        return;\n      }\n\n      // æ¢å¤ç¼“å­˜é¡¹ï¼ˆè·³è¿‡è¿‡æœŸçš„ï¼‰\n      for (const [key, item] of data.cache) {\n        if (now - item.timestamp <= item.ttl) {\n          this.cache.set(key, item);\n        }\n      }\n\n      // æ¢å¤ç»Ÿè®¡\n      this.stats = data.stats || { hits: 0, misses: 0 };\n    } catch (error) {\n      console.warn('Failed to load cache from localStorage:', error);\n      localStorage.removeItem('advanced-cache');\n    }\n  }\n\n  // é”€æ¯ç¼“å­˜ç®¡ç†å™¨\n  destroy(): void {\n    this.stopCleanupTimer();\n    this.clear();\n  }\n}\n\n// åˆ›å»ºé»˜è®¤ç¼“å­˜å®ä¾‹\nexport const cacheManager = new AdvancedCacheManager({\n  maxSize: 500,\n  defaultTTL: 10 * 60 * 1000, // 10åˆ†é’Ÿ\n  cleanupInterval: 2 * 60 * 1000, // 2åˆ†é’Ÿ\n  enablePersistence: true,\n});\n\n// React Hook\nexport const useCache = () => {\n  return {\n    get: cacheManager.get.bind(cacheManager),\n    set: cacheManager.set.bind(cacheManager),\n    has: cacheManager.has.bind(cacheManager),\n    delete: cacheManager.delete.bind(cacheManager),\n    clear: cacheManager.clear.bind(cacheManager),\n    getStats: cacheManager.getStats.bind(cacheManager),\n    deleteByTag: cacheManager.deleteByTag.bind(cacheManager),\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/canonical-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/content-optimizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/data-analytics/core/DataPipeline.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3651,3654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3651,3654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3993,3996],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3993,3996],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4491,4494],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4491,4494],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":294,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":294,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ip' is defined but never used.","line":364,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":364,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":364,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9888,9891],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9888,9891],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":374,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10091,10094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10091,10094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { EventCollector } from './EventCollector';\nimport { MetricsEngine } from './MetricsEngine';\nimport { \n  EnhancedUserEvent, \n  DataPipelineStatus, \n  DashboardData,\n  CoreMetrics,\n  MetricsResult\n} from '../types/analytics.types';\n\n/**\n * æ•°æ®å¤„ç†ç®¡é“\n * è´Ÿè´£åè°ƒäº‹ä»¶æ”¶é›†ã€æ•°æ®å¤„ç†å’ŒæŒ‡æ ‡è®¡ç®—\n */\nexport class DataPipeline {\n  private eventCollector: EventCollector;\n  private metricsEngine: MetricsEngine;\n  private pipelineStatus: DataPipelineStatus;\n  private processingInterval: NodeJS.Timeout | null = null;\n  private isProcessing: boolean = false;\n\n  constructor() {\n    this.eventCollector = new EventCollector();\n    this.metricsEngine = new MetricsEngine();\n    \n    this.pipelineStatus = {\n      name: 'Period Hub Analytics Pipeline',\n      status: 'idle',\n      lastRun: new Date(),\n      nextRun: new Date(Date.now() + 24 * 60 * 60 * 1000), // 24å°æ—¶å\n      processedRecords: 0,\n      failedRecords: 0,\n      processingDuration: 0,\n      error: undefined\n    };\n  }\n\n  /**\n   * å¯åŠ¨æ•°æ®å¤„ç†ç®¡é“\n   */\n  async start(): Promise<void> {\n    if (this.processingInterval) {\n      throw new Error('æ•°æ®å¤„ç†ç®¡é“å·²ç»åœ¨è¿è¡Œä¸­');\n    }\n\n    console.log('ğŸš€ å¯åŠ¨ Period Hub æ•°æ®åˆ†æç®¡é“');\n    \n    // ç«‹å³æ‰§è¡Œä¸€æ¬¡å¤„ç†\n    await this.processPipeline();\n    \n    // è®¾ç½®å®šæ—¶å¤„ç†ï¼ˆæ¯24å°æ—¶ä¸€æ¬¡ï¼‰\n    this.processingInterval = setInterval(async () => {\n      await this.processPipeline();\n    }, 24 * 60 * 60 * 1000);\n\n    console.log('âœ… æ•°æ®å¤„ç†ç®¡é“å¯åŠ¨æˆåŠŸ');\n  }\n\n  /**\n   * åœæ­¢æ•°æ®å¤„ç†ç®¡é“\n   */\n  async stop(): Promise<void> {\n    if (this.processingInterval) {\n      clearInterval(this.processingInterval);\n      this.processingInterval = null;\n    }\n\n    if (this.isProcessing) {\n      console.log('â³ ç­‰å¾…å½“å‰å¤„ç†å®Œæˆ...');\n      // ç­‰å¾…å½“å‰å¤„ç†å®Œæˆ\n      while (this.isProcessing) {\n        await new Promise(resolve => setTimeout(resolve, 100));\n      }\n    }\n\n    this.pipelineStatus.status = 'idle';\n    console.log('ğŸ›‘ æ•°æ®å¤„ç†ç®¡é“å·²åœæ­¢');\n  }\n\n  /**\n   * æ‰‹åŠ¨è§¦å‘æ•°æ®å¤„ç†\n   */\n  async processPipeline(): Promise<void> {\n    if (this.isProcessing) {\n      console.log('âš ï¸ ç®¡é“æ­£åœ¨å¤„ç†ä¸­ï¼Œè·³è¿‡æ­¤æ¬¡æ‰§è¡Œ');\n      return;\n    }\n\n    this.isProcessing = true;\n    const startTime = Date.now();\n    \n    try {\n      console.log('ğŸ“Š å¼€å§‹æ•°æ®å¤„ç†...');\n      this.pipelineStatus.status = 'processing';\n      this.pipelineStatus.lastRun = new Date();\n\n      // æ­¥éª¤1: æ”¶é›†å’Œå¤„ç†äº‹ä»¶æ•°æ®\n      await this.collectAndProcessEvents();\n\n      // æ­¥éª¤2: è®¡ç®—æ ¸å¿ƒæŒ‡æ ‡\n      await this.calculateMetrics();\n\n      // æ­¥éª¤3: ç”Ÿæˆä»ªè¡¨æ¿æ•°æ®\n      await this.generateDashboardData();\n\n      // æ­¥éª¤4: æ•°æ®è´¨é‡æ£€æŸ¥\n      await this.performDataQualityChecks();\n\n      // æ›´æ–°çŠ¶æ€\n      this.pipelineStatus.status = 'completed';\n      this.pipelineStatus.processingDuration = Date.now() - startTime;\n      this.pipelineStatus.nextRun = new Date(Date.now() + 24 * 60 * 60 * 1000);\n      this.pipelineStatus.error = undefined;\n\n      console.log(`âœ… æ•°æ®å¤„ç†å®Œæˆï¼Œè€—æ—¶: ${this.pipelineStatus.processingDuration}ms`);\n      \n    } catch (error) {\n      this.pipelineStatus.status = 'failed';\n      this.pipelineStatus.error = error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯';\n      this.pipelineStatus.processingDuration = Date.now() - startTime;\n      \n      console.error('âŒ æ•°æ®å¤„ç†å¤±è´¥:', error);\n      throw error;\n    } finally {\n      this.isProcessing = false;\n    }\n  }\n\n  /**\n   * æ”¶é›†å’Œå¤„ç†äº‹ä»¶æ•°æ®\n   */\n  private async collectAndProcessEvents(): Promise<void> {\n    try {\n      console.log('ğŸ“¥ æ”¶é›†äº‹ä»¶æ•°æ®...');\n      \n      // è·å–å¾…å¤„ç†çš„äº‹ä»¶\n      const events = await this.eventCollector.getCollectedEvents();\n      \n      if (events.length === 0) {\n        console.log('â„¹ï¸ æ²¡æœ‰æ–°çš„äº‹ä»¶éœ€è¦å¤„ç†');\n        return;\n      }\n\n      console.log(`ğŸ“‹ æ”¶é›†åˆ° ${events.length} ä¸ªäº‹ä»¶`);\n      \n      // å¤„ç†æ¯ä¸ªäº‹ä»¶\n      const processedEvents: EnhancedUserEvent[] = [];\n      const failedEvents: any[] = [];\n\n      for (const event of events) {\n        try {\n          const enhancedEvent = await this.enhanceEvent(event);\n          processedEvents.push(enhancedEvent);\n          \n          // æ·»åŠ åˆ°æŒ‡æ ‡å¼•æ“\n          this.metricsEngine.addEvent(enhancedEvent);\n          \n        } catch (error) {\n          console.error('å¤„ç†äº‹ä»¶å¤±è´¥:', (event as any).id || 'unknown_event', error);\n          failedEvents.push({ event, error });\n        }\n      }\n\n      // æ›´æ–°ç»Ÿè®¡\n      this.pipelineStatus.processedRecords += processedEvents.length;\n      this.pipelineStatus.failedRecords += failedEvents.length;\n\n      console.log(`âœ… æˆåŠŸå¤„ç† ${processedEvents.length} ä¸ªäº‹ä»¶ï¼Œå¤±è´¥ ${failedEvents.length} ä¸ª`);\n      \n    } catch (error) {\n      console.error('âŒ äº‹ä»¶æ”¶é›†å¤±è´¥:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * å¢å¼ºäº‹ä»¶æ•°æ®\n   */\n  private async enhanceEvent(event: any): Promise<EnhancedUserEvent> {\n    // åŸºç¡€äº‹ä»¶è½¬æ¢\n    const enhancedEvent: EnhancedUserEvent = {\n      id: event.id || this.generateEventId(),\n      type: event.type || 'user_action',\n      timestamp: event.timestamp || new Date(),\n      data: event.data || {},\n      severity: event.severity || 'low',\n      source: event.source || 'web_app',\n      correlationId: event.correlationId,\n      userId: event.userId || 'anonymous',\n      sessionId: event.sessionId || this.generateSessionId(),\n      userAgent: event.userAgent,\n      referrer: event.referrer,\n      location: event.location,\n      device: event.device\n    };\n\n    // åœ°ç†ä½ç½®å¢å¼ºï¼ˆåŸºäºIPåœ°å€ï¼‰\n    if (!enhancedEvent.location && event.ip) {\n      enhancedEvent.location = await this.getLocationFromIP(event.ip);\n    }\n\n    // è®¾å¤‡ä¿¡æ¯å¢å¼º\n    if (!enhancedEvent.device && enhancedEvent.userAgent) {\n      enhancedEvent.device = this.parseDeviceInfo(enhancedEvent.userAgent);\n    }\n\n    // æ•°æ®éªŒè¯\n    this.validateEvent(enhancedEvent);\n\n    return enhancedEvent;\n  }\n\n  /**\n   * è®¡ç®—æ ¸å¿ƒæŒ‡æ ‡\n   */\n  private async calculateMetrics(): Promise<void> {\n    try {\n      console.log('ğŸ“ˆ è®¡ç®—æ ¸å¿ƒæŒ‡æ ‡...');\n      \n      const metrics = await this.metricsEngine.calculateAllMetrics();\n      \n      console.log('ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡è®¡ç®—å®Œæˆ:');\n      console.log(`  - æ—¥æ´»è·ƒç”¨æˆ·æ•°: ${metrics.dailyActiveUsers}`);\n      console.log(`  - ç”¨æˆ·ç•™å­˜ç‡: ${metrics.userRetentionRate.toFixed(2)}%`);\n      console.log(`  - å¹³å°ä½¿ç”¨æ·±åº¦: ${metrics.platformEngagementDepth.toFixed(2)} åˆ†é’Ÿ`);\n      console.log(`  - æ–°ç”¨æˆ·è·å–æˆæœ¬: Â¥${metrics.newUserAcquisitionCost.toFixed(2)}`);\n      console.log(`  - ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼: Â¥${metrics.userLifetimeValue.toFixed(2)}`);\n      \n    } catch (error) {\n      console.error('âŒ æŒ‡æ ‡è®¡ç®—å¤±è´¥:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * ç”Ÿæˆä»ªè¡¨æ¿æ•°æ®\n   */\n  private async generateDashboardData(): Promise<void> {\n    try {\n      console.log('ğŸ“Š ç”Ÿæˆä»ªè¡¨æ¿æ•°æ®...');\n      \n      const dashboardData = await this.metricsEngine.getDashboardData();\n      \n      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šå°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“æˆ–ç¼“å­˜\n      console.log('âœ… ä»ªè¡¨æ¿æ•°æ®ç”Ÿæˆå®Œæˆ');\n      console.log(`  - æ€»ç”¨æˆ·æ•°: ${dashboardData.userActivity.totalUsers}`);\n      console.log(`  - æ´»è·ƒç”¨æˆ·: ${dashboardData.userActivity.activeUsers}`);\n      console.log(`  - æ€»ä¸‹è½½é‡: ${dashboardData.resourceUsage.totalDownloads}`);\n      console.log(`  - æ€»æµè§ˆé‡: ${dashboardData.resourceUsage.totalViews}`);\n      \n    } catch (error) {\n      console.error('âŒ ä»ªè¡¨æ¿æ•°æ®ç”Ÿæˆå¤±è´¥:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * æ•°æ®è´¨é‡æ£€æŸ¥\n   */\n  private async performDataQualityChecks(): Promise<void> {\n    try {\n      console.log('ğŸ” æ‰§è¡Œæ•°æ®è´¨é‡æ£€æŸ¥...');\n      \n      const eventHistory = this.metricsEngine.getEventHistory();\n      const checks = [];\n\n      // æ£€æŸ¥1: æ•°æ®å®Œæ•´æ€§\n      const incompleteEvents = eventHistory.filter(event => \n        !event.userId || !event.timestamp || !event.type\n      );\n      if (incompleteEvents.length > 0) {\n        checks.push(`å‘ç° ${incompleteEvents.length} ä¸ªä¸å®Œæ•´çš„äº‹ä»¶`);\n      }\n\n      // æ£€æŸ¥2: æ•°æ®æ—¶æ•ˆæ€§\n      const outdatedEvents = eventHistory.filter(event => {\n        const daysDiff = (Date.now() - event.timestamp.getTime()) / (24 * 60 * 60 * 1000);\n        return daysDiff > 90; // è¶…è¿‡90å¤©çš„æ•°æ®\n      });\n      if (outdatedEvents.length > 0) {\n        checks.push(`å‘ç° ${outdatedEvents.length} ä¸ªè¿‡æœŸäº‹ä»¶`);\n      }\n\n      // æ£€æŸ¥3: å¼‚å¸¸å€¼æ£€æµ‹\n      const userEventCounts = new Map<string, number>();\n      eventHistory.forEach(event => {\n        userEventCounts.set(event.userId, (userEventCounts.get(event.userId) || 0) + 1);\n      });\n      \n      const avgEventsPerUser = Array.from(userEventCounts.values())\n        .reduce((sum, count) => sum + count, 0) / userEventCounts.size;\n      \n      const anomalousUsers = Array.from(userEventCounts.entries())\n        .filter(([_, count]) => count > avgEventsPerUser * 10);\n      \n      if (anomalousUsers.length > 0) {\n        checks.push(`å‘ç° ${anomalousUsers.length} ä¸ªå¼‚å¸¸æ´»è·ƒç”¨æˆ·`);\n      }\n\n      if (checks.length === 0) {\n        console.log('âœ… æ•°æ®è´¨é‡æ£€æŸ¥é€šè¿‡');\n      } else {\n        console.log('âš ï¸ æ•°æ®è´¨é‡æ£€æŸ¥å‘ç°é—®é¢˜:');\n        checks.forEach(check => console.log(`  - ${check}`));\n      }\n      \n    } catch (error) {\n      console.error('âŒ æ•°æ®è´¨é‡æ£€æŸ¥å¤±è´¥:', error);\n      // è´¨é‡æ£€æŸ¥å¤±è´¥ä¸åº”è¯¥é˜»æ­¢ç®¡é“ç»§ç»­è¿è¡Œ\n    }\n  }\n\n  /**\n   * è·å–ç®¡é“çŠ¶æ€\n   */\n  getStatus(): DataPipelineStatus {\n    return { ...this.pipelineStatus };\n  }\n\n  /**\n   * è·å–å®æ—¶æŒ‡æ ‡\n   */\n  async getRealTimeMetrics(): Promise<CoreMetrics> {\n    return await this.metricsEngine.calculateAllMetrics();\n  }\n\n  /**\n   * è·å–ä»ªè¡¨æ¿æ•°æ®\n   */\n  async getDashboardData(): Promise<DashboardData> {\n    return await this.metricsEngine.getDashboardData();\n  }\n\n  /**\n   * è·å–æŒ‡æ ‡è¶‹åŠ¿\n   */\n  async getMetricsTrend(metricName: keyof CoreMetrics, days: number = 7): Promise<MetricsResult[]> {\n    return await this.metricsEngine.getMetricsTrend(metricName, days);\n  }\n\n  /**\n   * æ‰‹åŠ¨æ·»åŠ äº‹ä»¶\n   */\n  async addEvent(event: Partial<EnhancedUserEvent>): Promise<void> {\n    try {\n      const enhancedEvent = await this.enhanceEvent(event);\n      this.metricsEngine.addEvent(enhancedEvent);\n      console.log(`âœ… äº‹ä»¶æ·»åŠ æˆåŠŸ: ${enhancedEvent.id}`);\n    } catch (error) {\n      console.error('âŒ äº‹ä»¶æ·»åŠ å¤±è´¥:', error);\n      throw error;\n    }\n  }\n\n  // ç§æœ‰è¾…åŠ©æ–¹æ³•\n  private generateEventId(): string {\n    return `event_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private async getLocationFromIP(ip: string): Promise<any> {\n    // ç®€åŒ–çš„åœ°ç†ä½ç½®è§£æ\n    // å®é™…åº”ç”¨ä¸­å¯ä»¥ä½¿ç”¨ GeoIP æ•°æ®åº“æˆ– API\n    return {\n      country: 'CN',\n      city: 'Unknown',\n      timezone: 'Asia/Shanghai'\n    };\n  }\n\n  private parseDeviceInfo(userAgent: string): any {\n    // ç®€åŒ–çš„è®¾å¤‡ä¿¡æ¯è§£æ\n    const isMobile = /Mobile|Android|iPhone|iPad/i.test(userAgent);\n    const isTablet = /iPad|Tablet/i.test(userAgent);\n    \n    return {\n      type: isTablet ? 'tablet' : isMobile ? 'mobile' : 'desktop',\n      os: this.extractOS(userAgent),\n      browser: this.extractBrowser(userAgent)\n    };\n  }\n\n  private extractOS(userAgent: string): string {\n    if (/Windows/i.test(userAgent)) return 'Windows';\n    if (/Mac OS/i.test(userAgent)) return 'macOS';\n    if (/Android/i.test(userAgent)) return 'Android';\n    if (/iPhone|iPad/i.test(userAgent)) return 'iOS';\n    if (/Linux/i.test(userAgent)) return 'Linux';\n    return 'Unknown';\n  }\n\n  private extractBrowser(userAgent: string): string {\n    if (/Chrome/i.test(userAgent)) return 'Chrome';\n    if (/Firefox/i.test(userAgent)) return 'Firefox';\n    if (/Safari/i.test(userAgent)) return 'Safari';\n    if (/Edge/i.test(userAgent)) return 'Edge';\n    return 'Unknown';\n  }\n\n  private validateEvent(event: EnhancedUserEvent): void {\n    if (!event.id) throw new Error('äº‹ä»¶IDä¸èƒ½ä¸ºç©º');\n    if (!event.userId) throw new Error('ç”¨æˆ·IDä¸èƒ½ä¸ºç©º');\n    if (!event.timestamp) throw new Error('æ—¶é—´æˆ³ä¸èƒ½ä¸ºç©º');\n    if (!event.type) throw new Error('äº‹ä»¶ç±»å‹ä¸èƒ½ä¸ºç©º');\n  }\n}\n\n// å¯¼å‡ºå•ä¾‹å®ä¾‹\nexport const dataPipeline = new DataPipeline(); ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/data-analytics/core/EventCollector.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1275,1278],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1275,1278],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2808,2811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2808,2811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'metadata' is defined but never used.","line":591,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":591,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":695,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":695,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16538,16541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16538,16541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":700,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":700,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16688,16691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16688,16691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":728,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":728,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17300,17303],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17300,17303],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * äº‹ä»¶æ”¶é›†ç³»ç»Ÿ\n * ä¸“é—¨è¿½è¸ªPeriod Hubçš„5ä¸ªæ ¸å¿ƒæŒ‡æ ‡\n */\n\nexport interface UserEvent {\n  userId: string;\n  sessionId: string;\n  eventType: EventType;\n  timestamp: number;\n  data: EventData;\n  metadata: EventMetadata;\n}\n\nexport type EventType = \n  // DAUç›¸å…³äº‹ä»¶\n  | 'session_start'\n  | 'session_end'\n  | 'page_view'\n  \n  // ç•™å­˜ç‡ç›¸å…³äº‹ä»¶\n  | 'user_first_visit'\n  | 'user_return'\n  | 'user_registration'\n  \n  // ä½¿ç”¨æ·±åº¦ç›¸å…³äº‹ä»¶\n  | 'content_view'\n  | 'search_performed'\n  | 'pdf_download'\n  | 'tool_usage'\n  | 'content_share'\n  | 'content_bookmark'\n  \n  // è·å®¢æˆæœ¬ç›¸å…³äº‹ä»¶\n  | 'user_acquisition'\n  | 'traffic_source'\n  | 'conversion_goal'\n  \n  // ç”Ÿå‘½å‘¨æœŸä»·å€¼ç›¸å…³äº‹ä»¶\n  | 'user_engagement'\n  | 'value_action'\n  | 'feedback_submitted';\n\nexport interface EventData {\n  // é¡µé¢ç›¸å…³\n  pageUrl?: string;\n  pageTitle?: string;\n  referrer?: string;\n  \n  // æœç´¢ç›¸å…³\n  searchQuery?: string;\n  searchResults?: number;\n  searchClickPosition?: number;\n  \n  // å†…å®¹ç›¸å…³\n  contentId?: string;\n  contentType?: 'article' | 'pdf' | 'tool' | 'page';\n  contentCategory?: string;\n  \n  // ç”¨æˆ·è¡Œä¸º\n  sessionDuration?: number;\n  scrollDepth?: number;\n  clickCount?: number;\n  \n  // è·å®¢ç›¸å…³\n  trafficSource?: string;\n  campaign?: string;\n  medium?: string;\n  \n  // ä»·å€¼ç›¸å…³\n  actionValue?: number;\n  engagementScore?: number;\n  \n  // æ‰©å±•æ•°æ®\n  customData?: Record<string, any>;\n}\n\nexport interface EventMetadata {\n  userAgent: string;\n  deviceType: 'desktop' | 'mobile' | 'tablet';\n  platform: string;\n  language: string;\n  timezone: string;\n  screenResolution?: string;\n  ipAddress?: string;\n  location?: {\n    country?: string;\n    region?: string;\n    city?: string;\n  };\n}\n\nexport interface DAUMetrics {\n  date: string;\n  activeUsers: number;\n  newUsers: number;\n  returningUsers: number;\n  weeklyGrowth: number;\n  monthlyGrowth: number;\n}\n\nexport interface RetentionMetrics {\n  cohort: string; // é˜Ÿåˆ—æ—¥æœŸ\n  day1Retention: number;\n  day7Retention: number;\n  day30Retention: number;\n  totalUsers: number;\n  retainedUsers: {\n    day1: number;\n    day7: number;\n    day30: number;\n  };\n}\n\nexport interface EngagementMetrics {\n  date: string;\n  avgSessionDuration: number;\n  avgPagesPerSession: number;\n  avgSearchesPerUser: number;\n  avgPDFDownloadsPerUser: number;\n  returnVisitRate: number;\n  engagementScore: number;\n}\n\nexport interface AcquisitionMetrics {\n  date: string;\n  totalCost: number;\n  newUsers: number;\n  costPerUser: number;\n  channelBreakdown: {\n    channel: string;\n    users: number;\n    cost: number;\n    cpa: number;\n  }[];\n  efficiency: number;\n}\n\nexport interface LTVMetrics {\n  date: string;\n  avgLTV: number;\n  valueSegments: {\n    segment: string;\n    userCount: number;\n    avgValue: number;\n    percentage: number;\n  }[];\n  projectedValue: number;\n  valueDrivers: string[];\n}\n\nexport class EventCollector {\n  private events: UserEvent[] = [];\n  private dailyMetrics: Map<string, any> = new Map();\n  private sessionStore: Map<string, SessionData> = new Map();\n\n  constructor() {\n    this.initializeCollector();\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·äº‹ä»¶\n   */\n  recordEvent(event: Omit<UserEvent, 'timestamp'>): void {\n    const fullEvent: UserEvent = {\n      ...event,\n      timestamp: Date.now()\n    };\n\n    this.events.push(fullEvent);\n    this.processEventForMetrics(fullEvent);\n    \n    // é™åˆ¶å†…å­˜ä¸­çš„äº‹ä»¶æ•°é‡\n    if (this.events.length > 10000) {\n      this.events = this.events.slice(-5000);\n    }\n  }\n\n  /**\n   * è®°å½•é¡µé¢è®¿é—®ï¼ˆDAUå…³é”®äº‹ä»¶ï¼‰\n   */\n  recordPageView(\n    userId: string, \n    sessionId: string, \n    pageUrl: string, \n    metadata: EventMetadata\n  ): void {\n    this.recordEvent({\n      userId,\n      sessionId,\n      eventType: 'page_view',\n      data: {\n        pageUrl,\n        pageTitle: this.extractPageTitle(pageUrl)\n      },\n      metadata\n    });\n\n    // æ›´æ–°ä¼šè¯ä¿¡æ¯\n    this.updateSession(userId, sessionId, metadata);\n  }\n\n  /**\n   * è®°å½•æœç´¢è¡Œä¸ºï¼ˆä½¿ç”¨æ·±åº¦å…³é”®äº‹ä»¶ï¼‰\n   */\n  recordSearch(\n    userId: string,\n    sessionId: string,\n    searchQuery: string,\n    resultsCount: number,\n    metadata: EventMetadata\n  ): void {\n    this.recordEvent({\n      userId,\n      sessionId,\n      eventType: 'search_performed',\n      data: {\n        searchQuery,\n        searchResults: resultsCount\n      },\n      metadata\n    });\n  }\n\n  /**\n   * è®°å½•PDFä¸‹è½½ï¼ˆä½¿ç”¨æ·±åº¦å…³é”®äº‹ä»¶ï¼‰\n   */\n  recordPDFDownload(\n    userId: string,\n    sessionId: string,\n    contentId: string,\n    contentCategory: string,\n    metadata: EventMetadata\n  ): void {\n    this.recordEvent({\n      userId,\n      sessionId,\n      eventType: 'pdf_download',\n      data: {\n        contentId,\n        contentType: 'pdf',\n        contentCategory,\n        actionValue: 1 // PDFä¸‹è½½ä»·å€¼æƒé‡\n      },\n      metadata\n    });\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·è·å®¢ä¿¡æ¯\n   */\n  recordUserAcquisition(\n    userId: string,\n    sessionId: string,\n    trafficSource: string,\n    campaign?: string,\n    cost?: number,\n    metadata?: EventMetadata\n  ): void {\n    this.recordEvent({\n      userId,\n      sessionId,\n      eventType: 'user_acquisition',\n      data: {\n        trafficSource,\n        campaign,\n        actionValue: cost\n      },\n      metadata: metadata || this.getDefaultMetadata()\n    });\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·ä»·å€¼è¡Œä¸º\n   */\n  recordValueAction(\n    userId: string,\n    sessionId: string,\n    actionType: string,\n    value: number,\n    metadata: EventMetadata\n  ): void {\n    this.recordEvent({\n      userId,\n      sessionId,\n      eventType: 'value_action',\n      data: {\n        customData: { actionType },\n        actionValue: value,\n        engagementScore: this.calculateEngagementScore(actionType, value)\n      },\n      metadata\n    });\n  }\n\n  /**\n   * è®¡ç®—DAUæŒ‡æ ‡\n   */\n  calculateDAUMetrics(date: string): DAUMetrics {\n    const dayStart = new Date(date);\n    dayStart.setHours(0, 0, 0, 0);\n    const dayEnd = new Date(date);\n    dayEnd.setHours(23, 59, 59, 999);\n\n    const dayEvents = this.events.filter(event => \n      event.timestamp >= dayStart.getTime() && \n      event.timestamp <= dayEnd.getTime()\n    );\n\n    const activeUsers = new Set(dayEvents.map(e => e.userId)).size;\n    \n    // è®¡ç®—æ–°ç”¨æˆ·ï¼ˆé¦–æ¬¡è®¿é—®ï¼‰\n    const newUserEvents = dayEvents.filter(e => e.eventType === 'user_first_visit');\n    const newUsers = new Set(newUserEvents.map(e => e.userId)).size;\n    \n    const returningUsers = activeUsers - newUsers;\n\n    // è®¡ç®—å¢é•¿ç‡ï¼ˆéœ€è¦å†å²æ•°æ®ï¼‰\n    const weekAgo = new Date(dayStart);\n    weekAgo.setDate(weekAgo.getDate() - 7);\n    const weekAgoMetrics = this.getStoredMetrics('dau', weekAgo.toISOString().split('T')[0]);\n    const weeklyGrowth = weekAgoMetrics ? \n      ((activeUsers - weekAgoMetrics.activeUsers) / weekAgoMetrics.activeUsers) * 100 : 0;\n\n    const monthAgo = new Date(dayStart);\n    monthAgo.setDate(monthAgo.getDate() - 30);\n    const monthAgoMetrics = this.getStoredMetrics('dau', monthAgo.toISOString().split('T')[0]);\n    const monthlyGrowth = monthAgoMetrics ? \n      ((activeUsers - monthAgoMetrics.activeUsers) / monthAgoMetrics.activeUsers) * 100 : 0;\n\n    const metrics: DAUMetrics = {\n      date,\n      activeUsers,\n      newUsers,\n      returningUsers,\n      weeklyGrowth,\n      monthlyGrowth\n    };\n\n    this.storeMetrics('dau', date, metrics);\n    return metrics;\n  }\n\n  /**\n   * è®¡ç®—ç”¨æˆ·ç•™å­˜ç‡\n   */\n  calculateRetentionMetrics(cohortDate: string): RetentionMetrics {\n    const cohortStart = new Date(cohortDate);\n    cohortStart.setHours(0, 0, 0, 0);\n    const cohortEnd = new Date(cohortDate);\n    cohortEnd.setHours(23, 59, 59, 999);\n\n    // è·å–é˜Ÿåˆ—ç”¨æˆ·ï¼ˆå½“æ—¥æ–°ç”¨æˆ·ï¼‰\n    const cohortUsers = new Set(\n      this.events\n        .filter(e => \n          e.eventType === 'user_first_visit' &&\n          e.timestamp >= cohortStart.getTime() && \n          e.timestamp <= cohortEnd.getTime()\n        )\n        .map(e => e.userId)\n    );\n\n    const totalUsers = cohortUsers.size;\n    if (totalUsers === 0) {\n      return {\n        cohort: cohortDate,\n        day1Retention: 0,\n        day7Retention: 0,\n        day30Retention: 0,\n        totalUsers: 0,\n        retainedUsers: { day1: 0, day7: 0, day30: 0 }\n      };\n    }\n\n    // è®¡ç®—å„æ—¶æœŸç•™å­˜\n    const day1Retained = this.calculateRetentionForPeriod(cohortUsers, cohortStart, 1);\n    const day7Retained = this.calculateRetentionForPeriod(cohortUsers, cohortStart, 7);\n    const day30Retained = this.calculateRetentionForPeriod(cohortUsers, cohortStart, 30);\n\n    const metrics: RetentionMetrics = {\n      cohort: cohortDate,\n      day1Retention: (day1Retained / totalUsers) * 100,\n      day7Retention: (day7Retained / totalUsers) * 100,\n      day30Retention: (day30Retained / totalUsers) * 100,\n      totalUsers,\n      retainedUsers: {\n        day1: day1Retained,\n        day7: day7Retained,\n        day30: day30Retained\n      }\n    };\n\n    this.storeMetrics('retention', cohortDate, metrics);\n    return metrics;\n  }\n\n  /**\n   * è®¡ç®—ä½¿ç”¨æ·±åº¦æŒ‡æ ‡\n   */\n  calculateEngagementMetrics(date: string): EngagementMetrics {\n    const dayStart = new Date(date);\n    dayStart.setHours(0, 0, 0, 0);\n    const dayEnd = new Date(date);\n    dayEnd.setHours(23, 59, 59, 999);\n\n    const dayEvents = this.events.filter(event => \n      event.timestamp >= dayStart.getTime() && \n      event.timestamp <= dayEnd.getTime()\n    );\n\n    // æŒ‰ç”¨æˆ·åˆ†ç»„ç»Ÿè®¡\n    const userStats = new Map<string, {\n      sessionDuration: number;\n      pageViews: number;\n      searches: number;\n      downloads: number;\n      sessions: Set<string>;\n    }>();\n\n    dayEvents.forEach(event => {\n      const userId = event.userId;\n      const stats = userStats.get(userId) || {\n        sessionDuration: 0,\n        pageViews: 0,\n        searches: 0,\n        downloads: 0,\n        sessions: new Set()\n      };\n\n      stats.sessions.add(event.sessionId);\n\n      switch (event.eventType) {\n        case 'page_view':\n          stats.pageViews++;\n          break;\n        case 'search_performed':\n          stats.searches++;\n          break;\n        case 'pdf_download':\n          stats.downloads++;\n          break;\n        case 'session_end':\n          stats.sessionDuration += event.data.sessionDuration || 0;\n          break;\n      }\n\n      userStats.set(userId, stats);\n    });\n\n    const userCount = userStats.size;\n    if (userCount === 0) {\n      return {\n        date,\n        avgSessionDuration: 0,\n        avgPagesPerSession: 0,\n        avgSearchesPerUser: 0,\n        avgPDFDownloadsPerUser: 0,\n        returnVisitRate: 0,\n        engagementScore: 0\n      };\n    }\n\n    // è®¡ç®—å¹³å‡å€¼\n    let totalSessionDuration = 0;\n    let totalPageViews = 0;\n    let totalSearches = 0;\n    let totalDownloads = 0;\n    let totalSessions = 0;\n    let returningUsers = 0;\n\n    for (const [userId, stats] of userStats) {\n      totalSessionDuration += stats.sessionDuration;\n      totalPageViews += stats.pageViews;\n      totalSearches += stats.searches;\n      totalDownloads += stats.downloads;\n      totalSessions += stats.sessions.size;\n      \n      // æ£€æŸ¥æ˜¯å¦ä¸ºå›è®¿ç”¨æˆ·\n      if (this.isReturningUser(userId, dayStart)) {\n        returningUsers++;\n      }\n    }\n\n    const avgSessionDuration = totalSessionDuration / userCount;\n    const avgPagesPerSession = totalSessions > 0 ? totalPageViews / totalSessions : 0;\n    const avgSearchesPerUser = totalSearches / userCount;\n    const avgPDFDownloadsPerUser = totalDownloads / userCount;\n    const returnVisitRate = (returningUsers / userCount) * 100;\n    \n    // è®¡ç®—ç»¼åˆå‚ä¸åº¦è¯„åˆ†\n    const engagementScore = this.calculateOverallEngagementScore({\n      sessionDuration: avgSessionDuration,\n      pagesPerSession: avgPagesPerSession,\n      searchesPerUser: avgSearchesPerUser,\n      downloadsPerUser: avgPDFDownloadsPerUser,\n      returnRate: returnVisitRate\n    });\n\n    const metrics: EngagementMetrics = {\n      date,\n      avgSessionDuration,\n      avgPagesPerSession,\n      avgSearchesPerUser,\n      avgPDFDownloadsPerUser,\n      returnVisitRate,\n      engagementScore\n    };\n\n    this.storeMetrics('engagement', date, metrics);\n    return metrics;\n  }\n\n  /**\n   * è·å–æ‰€æœ‰æ ¸å¿ƒæŒ‡æ ‡\n   */\n  getAllCoreMetrics(date: string) {\n    return {\n      dau: this.calculateDAUMetrics(date),\n      retention: this.calculateRetentionMetrics(date),\n      engagement: this.calculateEngagementMetrics(date),\n      // acquisition å’Œ ltv éœ€è¦é¢å¤–çš„æˆæœ¬å’Œä»·å€¼æ•°æ®\n    };\n  }\n\n  /**\n   * è·å–äº‹ä»¶ç»Ÿè®¡\n   */\n  getEventStats(): {\n    totalEvents: number;\n    eventsByType: Record<string, number>;\n    recentEvents: UserEvent[];\n  } {\n    const eventsByType: Record<string, number> = {};\n    \n    this.events.forEach(event => {\n      eventsByType[event.eventType] = (eventsByType[event.eventType] || 0) + 1;\n    });\n\n    return {\n      totalEvents: this.events.length,\n      eventsByType,\n      recentEvents: this.events.slice(-10)\n    };\n  }\n\n  /**\n   * è·å–æ”¶é›†åˆ°çš„äº‹ä»¶\n   * ç”¨äºæ•°æ®å¤„ç†ç®¡é“\n   */\n  getCollectedEvents(): UserEvent[] {\n    return [...this.events];\n  }\n\n  /**\n   * æ¸…é™¤å·²å¤„ç†çš„äº‹ä»¶\n   */\n  clearProcessedEvents(): void {\n    this.events = [];\n  }\n\n  /**\n   * è·å–æœ€è¿‘çš„äº‹ä»¶\n   */\n  getRecentEvents(limit: number = 100): UserEvent[] {\n    return this.events.slice(-limit);\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  private initializeCollector(): void {\n    console.log('ğŸ“Š EventCollector initialized for core metrics tracking');\n  }\n\n  private processEventForMetrics(event: UserEvent): void {\n    // å®æ—¶å¤„ç†äº‹ä»¶ï¼Œæ›´æ–°å†…å­˜ä¸­çš„æŒ‡æ ‡\n    const today = new Date().toISOString().split('T')[0];\n    \n    // æ ¹æ®äº‹ä»¶ç±»å‹æ›´æ–°ç›¸åº”æŒ‡æ ‡\n    switch (event.eventType) {\n      case 'page_view':\n        this.updateDAUMetrics(today, event.userId);\n        break;\n      case 'user_first_visit':\n        this.updateRetentionMetrics(today, event.userId);\n        break;\n      // å…¶ä»–äº‹ä»¶ç±»å‹...\n    }\n  }\n\n  private updateSession(userId: string, sessionId: string, metadata: EventMetadata): void {\n    const session = this.sessionStore.get(sessionId) || {\n      userId,\n      sessionId,\n      startTime: Date.now(),\n      lastActivity: Date.now(),\n      pageViews: 0,\n      events: []\n    };\n\n    session.lastActivity = Date.now();\n    session.pageViews++;\n    this.sessionStore.set(sessionId, session);\n  }\n\n  private calculateRetentionForPeriod(\n    cohortUsers: Set<string>, \n    cohortStart: Date, \n    days: number\n  ): number {\n    const targetStart = new Date(cohortStart);\n    targetStart.setDate(targetStart.getDate() + days);\n    targetStart.setHours(0, 0, 0, 0);\n    \n    const targetEnd = new Date(targetStart);\n    targetEnd.setHours(23, 59, 59, 999);\n\n    const activeUsersInPeriod = new Set(\n      this.events\n        .filter(e => \n          e.timestamp >= targetStart.getTime() && \n          e.timestamp <= targetEnd.getTime()\n        )\n        .map(e => e.userId)\n    );\n\n    let retainedCount = 0;\n    for (const userId of cohortUsers) {\n      if (activeUsersInPeriod.has(userId)) {\n        retainedCount++;\n      }\n    }\n\n    return retainedCount;\n  }\n\n  private isReturningUser(userId: string, currentDate: Date): boolean {\n    const firstVisit = this.events.find(e => \n      e.userId === userId && e.eventType === 'user_first_visit'\n    );\n    \n    if (!firstVisit) return false;\n    \n    const firstVisitDate = new Date(firstVisit.timestamp);\n    return firstVisitDate < currentDate;\n  }\n\n  private calculateEngagementScore(actionType: string, value: number): number {\n    // ç®€åŒ–çš„å‚ä¸åº¦è¯„åˆ†ç®—æ³•\n    const weights = {\n      'pdf_download': 3,\n      'search': 2,\n      'page_view': 1,\n      'share': 4,\n      'bookmark': 3\n    };\n    \n    const weight = weights[actionType as keyof typeof weights] || 1;\n    return Math.min(weight * value, 10);\n  }\n\n  private calculateOverallEngagementScore(metrics: {\n    sessionDuration: number;\n    pagesPerSession: number;\n    searchesPerUser: number;\n    downloadsPerUser: number;\n    returnRate: number;\n  }): number {\n    // ç»¼åˆå‚ä¸åº¦è¯„åˆ†ç®—æ³•\n    const durationScore = Math.min(metrics.sessionDuration / 300, 1) * 25; // 5åˆ†é’Ÿä¸ºæ»¡åˆ†\n    const pageScore = Math.min(metrics.pagesPerSession / 5, 1) * 20; // 5é¡µä¸ºæ»¡åˆ†\n    const searchScore = Math.min(metrics.searchesPerUser / 3, 1) * 20; // 3æ¬¡æœç´¢ä¸ºæ»¡åˆ†\n    const downloadScore = Math.min(metrics.downloadsPerUser / 2, 1) * 20; // 2æ¬¡ä¸‹è½½ä¸ºæ»¡åˆ†\n    const returnScore = Math.min(metrics.returnRate / 100, 1) * 15; // 100%å›è®¿ä¸ºæ»¡åˆ†\n\n    return Math.round(durationScore + pageScore + searchScore + downloadScore + returnScore);\n  }\n\n  private updateDAUMetrics(date: string, userId: string): void {\n    // å®æ—¶æ›´æ–°DAUç»Ÿè®¡\n    const key = `dau_${date}`;\n    const existing = this.dailyMetrics.get(key) || { users: new Set(), newUsers: new Set() };\n    existing.users.add(userId);\n    this.dailyMetrics.set(key, existing);\n  }\n\n  private updateRetentionMetrics(date: string, userId: string): void {\n    // å®æ—¶æ›´æ–°ç•™å­˜ç»Ÿè®¡\n    const key = `retention_${date}`;\n    const existing = this.dailyMetrics.get(key) || { newUsers: new Set() };\n    existing.newUsers.add(userId);\n    this.dailyMetrics.set(key, existing);\n  }\n\n  private storeMetrics(type: string, date: string, metrics: any): void {\n    const key = `${type}_${date}`;\n    this.dailyMetrics.set(key, metrics);\n  }\n\n  private getStoredMetrics(type: string, date: string): any {\n    const key = `${type}_${date}`;\n    return this.dailyMetrics.get(key);\n  }\n\n  private extractPageTitle(pageUrl: string): string {\n    // ä»URLæå–é¡µé¢æ ‡é¢˜çš„ç®€å•å®ç°\n    const urlParts = pageUrl.split('/');\n    return urlParts[urlParts.length - 1] || 'Home';\n  }\n\n  private getDefaultMetadata(): EventMetadata {\n    return {\n      userAgent: 'Unknown',\n      deviceType: 'desktop',\n      platform: 'Unknown',\n      language: 'zh',\n      timezone: 'Asia/Shanghai'\n    };\n  }\n}\n\ninterface SessionData {\n  userId: string;\n  sessionId: string;\n  startTime: number;\n  lastActivity: number;\n  pageViews: number;\n  events: any[];\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/data-analytics/core/MetricsEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CORE_METRICS_LABELS' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[340,343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[340,343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":132,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":132,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":136,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":66},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":396,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":396,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11580,11583],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11580,11583],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":404,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":404,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11811,11814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11811,11814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":447,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":447,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12952,12955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12952,12955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { \n  CoreMetrics, \n  MetricsResult, \n  EnhancedUserEvent, \n  MetricsEngineConfig,\n  DashboardData,\n  DEFAULT_METRICS_WEIGHTS,\n  CORE_METRICS_LABELS\n} from '../types/analytics.types';\n\n/**\n * æ ¸å¿ƒæŒ‡æ ‡è®¡ç®—å¼•æ“\n * ä¸“é—¨ä¸ºå•äººè¿è¥çš„Period Hubè®¾è®¡\n */\nexport class MetricsEngine {\n  private config: MetricsEngineConfig;\n  private cache: Map<string, { data: any; timestamp: Date }> = new Map();\n  private eventHistory: EnhancedUserEvent[] = [];\n  private isCalculating: boolean = false;\n\n  constructor(config: Partial<MetricsEngineConfig> = {}) {\n    this.config = {\n      calculationInterval: 24 * 60 * 60, // 24å°æ—¶\n      historyWindowDays: 30,\n      enableRealTimeCalculation: true,\n      cacheTtl: 60 * 60, // 1å°æ—¶\n      metricsWeights: DEFAULT_METRICS_WEIGHTS,\n      ...config\n    };\n  }\n\n  /**\n   * è®¡ç®—æ‰€æœ‰æ ¸å¿ƒæŒ‡æ ‡\n   */\n  async calculateAllMetrics(): Promise<CoreMetrics> {\n    if (this.isCalculating) {\n      // å¦‚æœæ­£åœ¨è®¡ç®—ï¼Œè¿”å›ç¼“å­˜ç»“æœ\n      return this.getCachedMetrics() || this.getDefaultMetrics();\n    }\n\n    this.isCalculating = true;\n    \n    try {\n      const now = new Date();\n      const windowStart = new Date(now.getTime() - this.config.historyWindowDays * 24 * 60 * 60 * 1000);\n      \n      // è·å–æ—¶é—´çª—å£å†…çš„äº‹ä»¶\n      const events = this.getEventsInWindow(windowStart, now);\n      \n      // å¹¶è¡Œè®¡ç®—æ‰€æœ‰æŒ‡æ ‡\n      const [\n        dailyActiveUsers,\n        userRetentionRate,\n        platformEngagementDepth,\n        newUserAcquisitionCost,\n        userLifetimeValue\n      ] = await Promise.all([\n        this.calculateDailyActiveUsers(events),\n        this.calculateUserRetentionRate(events),\n        this.calculatePlatformEngagementDepth(events),\n        this.calculateNewUserAcquisitionCost(events),\n        this.calculateUserLifetimeValue(events)\n      ]);\n\n      const metrics: CoreMetrics = {\n        dailyActiveUsers,\n        userRetentionRate,\n        platformEngagementDepth,\n        newUserAcquisitionCost,\n        userLifetimeValue\n      };\n\n      // ç¼“å­˜ç»“æœ\n      this.cacheMetrics(metrics);\n      \n      return metrics;\n    } finally {\n      this.isCalculating = false;\n    }\n  }\n\n  /**\n   * 1. è®¡ç®—æ—¥æ´»è·ƒç”¨æˆ·æ•°\n   * åŸºäºç”¨æˆ·è®¿é—®äº‹ä»¶ç»Ÿè®¡\n   */\n  private async calculateDailyActiveUsers(events: EnhancedUserEvent[]): Promise<number> {\n    const today = new Date();\n    const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n    const todayEnd = new Date(todayStart.getTime() + 24 * 60 * 60 * 1000);\n\n    // ç»Ÿè®¡ä»Šå¤©çš„å”¯ä¸€ç”¨æˆ·\n    const activeUsers = new Set<string>();\n    \n    events.forEach(event => {\n      if (event.timestamp >= todayStart && event.timestamp < todayEnd) {\n        if (event.type === 'user_action' || event.type === 'resource_accessed') {\n          activeUsers.add(event.userId);\n        }\n      }\n    });\n\n    return activeUsers.size;\n  }\n\n  /**\n   * 2. è®¡ç®—ç”¨æˆ·ç•™å­˜ç‡\n   * åŸºäºç”¨æˆ·é¦–æ¬¡è®¿é—®å’Œå›è®¿è®¡ç®—\n   */\n  private async calculateUserRetentionRate(events: EnhancedUserEvent[]): Promise<number> {\n    const userFirstVisit = new Map<string, Date>();\n    const userLastVisit = new Map<string, Date>();\n\n    // ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„é¦–æ¬¡å’Œæœ€åè®¿é—®æ—¶é—´\n    events.forEach(event => {\n      if (event.type === 'user_action' || event.type === 'resource_accessed') {\n        const userId = event.userId;\n        const timestamp = event.timestamp;\n\n        if (!userFirstVisit.has(userId) || timestamp < userFirstVisit.get(userId)!) {\n          userFirstVisit.set(userId, timestamp);\n        }\n        \n        if (!userLastVisit.has(userId) || timestamp > userLastVisit.get(userId)!) {\n          userLastVisit.set(userId, timestamp);\n        }\n      }\n    });\n\n    // è®¡ç®—7å¤©ç•™å­˜ç‡\n    const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n    const newUsersSevenDaysAgo = Array.from(userFirstVisit.entries())\n      .filter(([_, firstVisit]) => firstVisit >= sevenDaysAgo);\n\n    if (newUsersSevenDaysAgo.length === 0) return 0;\n\n    const retainedUsers = newUsersSevenDaysAgo.filter(([userId, _]) => {\n      const lastVisit = userLastVisit.get(userId);\n      return lastVisit && lastVisit > sevenDaysAgo;\n    });\n\n    return (retainedUsers.length / newUsersSevenDaysAgo.length) * 100;\n  }\n\n  /**\n   * 3. è®¡ç®—å¹³å°ä½¿ç”¨æ·±åº¦\n   * åŸºäºç”¨æˆ·è¡Œä¸ºçš„ç»¼åˆè¯„åˆ†ï¼ˆåˆ†é’Ÿï¼‰\n   */\n  private async calculatePlatformEngagementDepth(events: EnhancedUserEvent[]): Promise<number> {\n    const userEngagement = new Map<string, number>();\n\n    events.forEach(event => {\n      const userId = event.userId;\n      let score = 0;\n\n      // æ ¹æ®ä¸åŒäº‹ä»¶ç±»å‹ç»™åˆ†\n      switch (event.type) {\n        case 'resource_accessed':\n          score = 1; // è®¿é—®èµ„æº 1åˆ†\n          break;\n        case 'search_performed':\n          score = 2; // æœç´¢ 2åˆ†\n          break;\n        case 'resource_created':\n          score = 5; // åˆ›å»ºèµ„æº 5åˆ†\n          break;\n        case 'user_action':\n          // æ ¹æ®å…·ä½“è¡Œä¸ºç»†åˆ†\n          if (event.data.action === 'download') score = 3; // ä¸‹è½½ 3åˆ†\n          if (event.data.action === 'preview') score = 1; // é¢„è§ˆ 1åˆ†\n          if (event.data.action === 'rating') score = 2; // è¯„åˆ† 2åˆ†\n          break;\n        default:\n          score = 0.5; // å…¶ä»–è¡Œä¸º 0.5åˆ†\n      }\n\n      userEngagement.set(userId, (userEngagement.get(userId) || 0) + score);\n    });\n\n    // è®¡ç®—å¹³å‡ä½¿ç”¨æ·±åº¦ï¼ˆè½¬æ¢ä¸ºåˆ†é’Ÿï¼‰\n    const totalEngagement = Array.from(userEngagement.values()).reduce((sum, score) => sum + score, 0);\n    const averageEngagement = userEngagement.size > 0 ? totalEngagement / userEngagement.size : 0;\n    \n    // å‡è®¾æ¯åˆ†ç­‰äº1åˆ†é’Ÿçš„æ·±åº¦å‚ä¸\n    return Math.round(averageEngagement * 100) / 100;\n  }\n\n  /**\n   * 4. è®¡ç®—æ–°ç”¨æˆ·è·å–æˆæœ¬\n   * åŸºäºè¥é”€æŠ•å…¥å’Œæ–°ç”¨æˆ·æ•°é‡ï¼ˆç®€åŒ–è®¡ç®—ï¼‰\n   */\n  private async calculateNewUserAcquisitionCost(events: EnhancedUserEvent[]): Promise<number> {\n    const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n    const newUsers = new Set<string>();\n\n    // ç»Ÿè®¡30å¤©å†…çš„æ–°ç”¨æˆ·\n    events.forEach(event => {\n      if (event.timestamp >= thirtyDaysAgo && event.type === 'user_action') {\n        newUsers.add(event.userId);\n      }\n    });\n\n    // ç®€åŒ–è®¡ç®—ï¼šå‡è®¾æ¯ä¸ªæ–°ç”¨æˆ·çš„è·å–æˆæœ¬ä¸ºå›ºå®šå€¼\n    // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè¿æ¥åˆ°è¥é”€æ•°æ®\n    const assumedMonthlyCost = 100; // å‡è®¾æ¯æœˆæŠ•å…¥100å…ƒ\n    return newUsers.size > 0 ? assumedMonthlyCost / newUsers.size : 0;\n  }\n\n  /**\n   * 5. è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼\n   * åŸºäºç”¨æˆ·è¡Œä¸ºå’Œå‚ä¸åº¦è®¡ç®—\n   */\n  private async calculateUserLifetimeValue(events: EnhancedUserEvent[]): Promise<number> {\n    const userActions = new Map<string, number>();\n    const userFirstVisit = new Map<string, Date>();\n    const userLastVisit = new Map<string, Date>();\n\n    // ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„è¡Œä¸ºå’Œè®¿é—®æ—¶é—´\n    events.forEach(event => {\n      if (event.type === 'user_action' || event.type === 'resource_accessed') {\n        const userId = event.userId;\n        const timestamp = event.timestamp;\n\n        // ç»Ÿè®¡è¡Œä¸ºæ¬¡æ•°\n        userActions.set(userId, (userActions.get(userId) || 0) + 1);\n\n        // è®°å½•è®¿é—®æ—¶é—´\n        if (!userFirstVisit.has(userId)) {\n          userFirstVisit.set(userId, timestamp);\n        }\n        userLastVisit.set(userId, timestamp);\n      }\n    });\n\n    // è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„ä»·å€¼\n    let totalValue = 0;\n    userActions.forEach((actionCount, userId) => {\n      const firstVisit = userFirstVisit.get(userId);\n      const lastVisit = userLastVisit.get(userId);\n      \n      if (firstVisit && lastVisit) {\n        const daysActive = Math.max(1, Math.ceil((lastVisit.getTime() - firstVisit.getTime()) / (24 * 60 * 60 * 1000)));\n        const engagementScore = actionCount / daysActive; // æ—¥å‡å‚ä¸åº¦\n        \n        // ç®€åŒ–çš„ä»·å€¼è®¡ç®—ï¼šå‚ä¸åº¦ * æ´»è·ƒå¤©æ•° * å•ä½ä»·å€¼\n        const userValue = engagementScore * Math.min(daysActive, 365) * 0.5; // å‡è®¾æ¯ä¸ªå‚ä¸è¡Œä¸ºä»·å€¼0.5å…ƒ\n        totalValue += userValue;\n      }\n    });\n\n    return userActions.size > 0 ? Math.round(totalValue / userActions.size * 100) / 100 : 0;\n  }\n\n  /**\n   * è·å–æŒ‡æ ‡è¶‹åŠ¿\n   */\n  async getMetricsTrend(metricName: keyof CoreMetrics, days: number = 7): Promise<MetricsResult[]> {\n    const results: MetricsResult[] = [];\n    const now = new Date();\n\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);\n      const cacheKey = `${metricName}_${date.toISOString().split('T')[0]}`;\n      \n      let result = this.getFromCache(cacheKey);\n      if (!result) {\n        // è¿™é‡Œåº”è¯¥ä»å†å²æ•°æ®ä¸­è®¡ç®—ï¼Œæš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n        const currentValue = await this.calculateSingleMetric(metricName);\n        const previousValue = currentValue * (0.9 + Math.random() * 0.2); // æ¨¡æ‹Ÿå†å²å˜åŒ–\n        \n        result = {\n          metricName,\n          currentValue,\n          previousValue,\n          changeRate: ((currentValue - previousValue) / previousValue) * 100,\n          trend: currentValue > previousValue ? 'increasing' : \n                 currentValue < previousValue ? 'decreasing' : 'stable',\n          calculatedAt: date,\n          timeWindow: {\n            start: new Date(date.getTime() - 24 * 60 * 60 * 1000),\n            end: date\n          }\n        };\n        \n        this.setCache(cacheKey, result);\n      }\n      \n      results.push(result);\n    }\n\n    return results;\n  }\n\n  /**\n   * è·å–ä»ªè¡¨æ¿æ•°æ®\n   */\n  async getDashboardData(): Promise<DashboardData> {\n    const coreMetrics = await this.calculateAllMetrics();\n    const metricsHistory = await this.getMetricsTrend('dailyActiveUsers', 7);\n    \n    return {\n      coreMetrics,\n      metricsHistory,\n      userActivity: {\n        totalUsers: this.getTotalUsers(),\n        activeUsers: coreMetrics.dailyActiveUsers,\n        newUsers: this.getNewUsers(),\n        returningUsers: Math.max(0, coreMetrics.dailyActiveUsers - this.getNewUsers())\n      },\n      resourceUsage: {\n        totalDownloads: this.getTotalDownloads(),\n        totalViews: this.getTotalViews(),\n        popularResources: this.getPopularResources()\n      },\n      systemHealth: {\n        status: 'healthy',\n        uptime: process.uptime(),\n        responseTime: this.getAverageResponseTime(),\n        errorRate: this.getErrorRate()\n      },\n      lastUpdated: new Date()\n    };\n  }\n\n  /**\n   * æ·»åŠ äº‹ä»¶åˆ°å†å²è®°å½•\n   */\n  addEvent(event: EnhancedUserEvent): void {\n    this.eventHistory.push(event);\n    \n    // é™åˆ¶å†å²è®°å½•å¤§å°\n    if (this.eventHistory.length > 10000) {\n      this.eventHistory = this.eventHistory.slice(-5000);\n    }\n\n    // å¦‚æœå¯ç”¨äº†å®æ—¶è®¡ç®—ï¼Œæ¸…é™¤ç›¸å…³ç¼“å­˜\n    if (this.config.enableRealTimeCalculation) {\n      this.clearMetricsCache();\n    }\n  }\n\n  /**\n   * è·å–äº‹ä»¶å†å²\n   */\n  getEventHistory(): EnhancedUserEvent[] {\n    return [...this.eventHistory];\n  }\n\n  // ç§æœ‰è¾…åŠ©æ–¹æ³•\n  private getEventsInWindow(start: Date, end: Date): EnhancedUserEvent[] {\n    return this.eventHistory.filter(event => \n      event.timestamp >= start && event.timestamp <= end\n    );\n  }\n\n  private async calculateSingleMetric(metricName: keyof CoreMetrics): Promise<number> {\n    const events = this.getEventsInWindow(\n      new Date(Date.now() - this.config.historyWindowDays * 24 * 60 * 60 * 1000),\n      new Date()\n    );\n\n    switch (metricName) {\n      case 'dailyActiveUsers':\n        return this.calculateDailyActiveUsers(events);\n      case 'userRetentionRate':\n        return this.calculateUserRetentionRate(events);\n      case 'platformEngagementDepth':\n        return this.calculatePlatformEngagementDepth(events);\n      case 'newUserAcquisitionCost':\n        return this.calculateNewUserAcquisitionCost(events);\n      case 'userLifetimeValue':\n        return this.calculateUserLifetimeValue(events);\n      default:\n        return 0;\n    }\n  }\n\n  private getCachedMetrics(): CoreMetrics | null {\n    const cached = this.getFromCache('all_metrics');\n    return cached || null;\n  }\n\n  private cacheMetrics(metrics: CoreMetrics): void {\n    this.setCache('all_metrics', metrics);\n  }\n\n  private getDefaultMetrics(): CoreMetrics {\n    return {\n      dailyActiveUsers: 0,\n      userRetentionRate: 0,\n      platformEngagementDepth: 0,\n      newUserAcquisitionCost: 0,\n      userLifetimeValue: 0\n    };\n  }\n\n  private getFromCache(key: string): any {\n    const cached = this.cache.get(key);\n    if (cached && (Date.now() - cached.timestamp.getTime()) < this.config.cacheTtl * 1000) {\n      return cached.data;\n    }\n    return null;\n  }\n\n  private setCache(key: string, data: any): void {\n    this.cache.set(key, { data, timestamp: new Date() });\n  }\n\n  private clearMetricsCache(): void {\n    Array.from(this.cache.keys()).forEach(key => {\n      if (key.includes('metrics') || key.includes('_')) {\n        this.cache.delete(key);\n      }\n    });\n  }\n\n  // æ¨¡æ‹Ÿæ•°æ®æ–¹æ³•ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¿æ¥åˆ°çœŸå®æ•°æ®æºï¼‰\n  private getTotalUsers(): number {\n    return new Set(this.eventHistory.map(e => e.userId)).size;\n  }\n\n  private getNewUsers(): number {\n    const today = new Date();\n    const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n    const newUsers = new Set<string>();\n    \n    this.eventHistory.forEach(event => {\n      if (event.timestamp >= todayStart && event.type === 'user_action') {\n        newUsers.add(event.userId);\n      }\n    });\n    \n    return newUsers.size;\n  }\n\n  private getTotalDownloads(): number {\n    return this.eventHistory.filter(e => \n      e.type === 'user_action' && e.data.action === 'download'\n    ).length;\n  }\n\n  private getTotalViews(): number {\n    return this.eventHistory.filter(e => \n      e.type === 'resource_accessed'\n    ).length;\n  }\n\n  private getPopularResources(): any[] {\n    const resourceStats = new Map<string, { downloads: number; views: number }>();\n    \n    this.eventHistory.forEach(event => {\n      if (event.data.resourceId) {\n        const resourceId = event.data.resourceId;\n        const stats = resourceStats.get(resourceId) || { downloads: 0, views: 0 };\n        \n        if (event.type === 'user_action' && event.data.action === 'download') {\n          stats.downloads++;\n        } else if (event.type === 'resource_accessed') {\n          stats.views++;\n        }\n        \n        resourceStats.set(resourceId, stats);\n      }\n    });\n\n    return Array.from(resourceStats.entries())\n      .map(([resourceId, stats]) => ({\n        resourceId,\n        title: `èµ„æº ${resourceId}`,\n        downloads: stats.downloads,\n        views: stats.views\n      }))\n      .sort((a, b) => (b.downloads + b.views) - (a.downloads + a.views))\n      .slice(0, 5);\n  }\n\n  private getAverageResponseTime(): number {\n    // æ¨¡æ‹Ÿå“åº”æ—¶é—´\n    return Math.round(50 + Math.random() * 100);\n  }\n\n  private getErrorRate(): number {\n    // æ¨¡æ‹Ÿé”™è¯¯ç‡\n    return Math.round(Math.random() * 5 * 100) / 100;\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/data-analytics/types/analytics.types.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SupportedLanguage' is defined but never used.","line":4,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceCategory' is defined but never used.","line":5,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AnalyticsData' is defined but never used.","line":7,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[688,691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[688,691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/data-analytics/types/analytics.types.ts\n\n// åŸºç¡€ç±»å‹å®šä¹‰\ntype SupportedLanguage = 'zh' | 'en' | 'es' | 'fr';\ntype ResourceCategory = 'immediate-relief' | 'preparation' | 'learning' | 'management' | 'assessment' | 'template';\n\ninterface AnalyticsData {\n  downloadCount: number;\n  viewCount: number;\n  shareCount?: number;\n  rating: number;\n  reviewCount?: number;\n  lastAccessedAt?: Date;\n  popularityScore?: number;\n}\n\ninterface SystemEvent {\n  id: string;\n  type: 'resource_created' | 'resource_updated' | 'resource_deleted' | \n        'resource_accessed' | 'search_performed' | 'error_occurred' |\n        'user_action' | 'system_maintenance';\n  timestamp: Date;\n  data: Record<string, any>;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  source: string;\n  correlationId?: string;\n}\n\n/**\n * æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ç±»å‹\n */\nexport interface CoreMetrics {\n  /** æ—¥æ´»è·ƒç”¨æˆ·æ•° */\n  dailyActiveUsers: number;\n  /** ç”¨æˆ·ç•™å­˜ç‡ */\n  userRetentionRate: number;\n  /** å¹³å°ä½¿ç”¨æ·±åº¦ */\n  platformEngagementDepth: number;\n  /** æ–°ç”¨æˆ·è·å–æˆæœ¬ */\n  newUserAcquisitionCost: number;\n  /** ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ */\n  userLifetimeValue: number;\n}\n\n/**\n * æŒ‡æ ‡è®¡ç®—ç»“æœ\n */\nexport interface MetricsResult {\n  /** æŒ‡æ ‡åç§° */\n  metricName: keyof CoreMetrics;\n  /** å½“å‰å€¼ */\n  currentValue: number;\n  /** ä¸ŠæœŸå€¼ */\n  previousValue: number;\n  /** å˜åŒ–ç‡ */\n  changeRate: number;\n  /** è¶‹åŠ¿ */\n  trend: 'increasing' | 'decreasing' | 'stable';\n  /** è®¡ç®—æ—¶é—´ */\n  calculatedAt: Date;\n  /** æ•°æ®æ—¶é—´çª—å£ */\n  timeWindow: {\n    start: Date;\n    end: Date;\n  };\n}\n\n/**\n * ç”¨æˆ·è¡Œä¸ºäº‹ä»¶æ‰©å±•\n */\nexport interface EnhancedUserEvent extends SystemEvent {\n  /** ç”¨æˆ·ID */\n  userId: string;\n  /** ä¼šè¯ID */\n  sessionId: string;\n  /** ç”¨æˆ·ä»£ç† */\n  userAgent?: string;\n  /** å¼•ç”¨é¡µé¢ */\n  referrer?: string;\n  /** åœ°ç†ä½ç½® */\n  location?: {\n    country?: string;\n    city?: string;\n    timezone?: string;\n  };\n  /** è®¾å¤‡ä¿¡æ¯ */\n  device?: {\n    type: 'desktop' | 'mobile' | 'tablet';\n    os?: string;\n    browser?: string;\n  };\n}\n\n/**\n * ä»ªè¡¨æ¿æ•°æ®\n */\nexport interface DashboardData {\n  /** æ ¸å¿ƒæŒ‡æ ‡ */\n  coreMetrics: CoreMetrics;\n  /** æŒ‡æ ‡ç»“æœå†å² */\n  metricsHistory: MetricsResult[];\n  /** ç”¨æˆ·æ´»åŠ¨ç»Ÿè®¡ */\n  userActivity: {\n    totalUsers: number;\n    activeUsers: number;\n    newUsers: number;\n    returningUsers: number;\n  };\n  /** èµ„æºä½¿ç”¨ç»Ÿè®¡ */\n  resourceUsage: {\n    totalDownloads: number;\n    totalViews: number;\n    popularResources: {\n      resourceId: string;\n      title: string;\n      downloads: number;\n      views: number;\n    }[];\n  };\n  /** ç³»ç»Ÿå¥åº·çŠ¶æ€ */\n  systemHealth: {\n    status: 'healthy' | 'warning' | 'critical';\n    uptime: number;\n    responseTime: number;\n    errorRate: number;\n  };\n  /** æ›´æ–°æ—¶é—´ */\n  lastUpdated: Date;\n}\n\n/**\n * æ•°æ®å¤„ç†ç®¡é“çŠ¶æ€\n */\nexport interface DataPipelineStatus {\n  /** ç®¡é“åç§° */\n  name: string;\n  /** å½“å‰çŠ¶æ€ */\n  status: 'idle' | 'processing' | 'completed' | 'failed';\n  /** æœ€åè¿è¡Œæ—¶é—´ */\n  lastRun: Date;\n  /** ä¸‹æ¬¡è¿è¡Œæ—¶é—´ */\n  nextRun: Date;\n  /** å¤„ç†çš„è®°å½•æ•° */\n  processedRecords: number;\n  /** å¤±è´¥çš„è®°å½•æ•° */\n  failedRecords: number;\n  /** å¤„ç†æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ */\n  processingDuration: number;\n  /** é”™è¯¯ä¿¡æ¯ */\n  error?: string;\n}\n\n/**\n * æŒ‡æ ‡è®¡ç®—å¼•æ“é…ç½®\n */\nexport interface MetricsEngineConfig {\n  /** è®¡ç®—é—´éš”ï¼ˆç§’ï¼‰ */\n  calculationInterval: number;\n  /** å†å²æ•°æ®çª—å£ï¼ˆå¤©ï¼‰ */\n  historyWindowDays: number;\n  /** æ˜¯å¦å¯ç”¨å®æ—¶è®¡ç®— */\n  enableRealTimeCalculation: boolean;\n  /** ç¼“å­˜TTLï¼ˆç§’ï¼‰ */\n  cacheTtl: number;\n  /** æŒ‡æ ‡æƒé‡é…ç½® */\n  metricsWeights: {\n    [K in keyof CoreMetrics]: number;\n  };\n}\n\n// å¸¸é‡å®šä¹‰\nexport const CORE_METRICS_LABELS: Record<keyof CoreMetrics, string> = {\n  dailyActiveUsers: 'æ—¥æ´»è·ƒç”¨æˆ·æ•°',\n  userRetentionRate: 'ç”¨æˆ·ç•™å­˜ç‡',\n  platformEngagementDepth: 'å¹³å°ä½¿ç”¨æ·±åº¦',\n  newUserAcquisitionCost: 'æ–°ç”¨æˆ·è·å–æˆæœ¬',\n  userLifetimeValue: 'ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼'\n};\n\nexport const METRICS_UNITS: Record<keyof CoreMetrics, string> = {\n  dailyActiveUsers: 'äºº',\n  userRetentionRate: '%',\n  platformEngagementDepth: 'åˆ†',\n  newUserAcquisitionCost: 'å…ƒ',\n  userLifetimeValue: 'å…ƒ'\n};\n\nexport const DEFAULT_METRICS_WEIGHTS: MetricsEngineConfig['metricsWeights'] = {\n  dailyActiveUsers: 0.25,\n  userRetentionRate: 0.25,\n  platformEngagementDepth: 0.20,\n  newUserAcquisitionCost: 0.15,\n  userLifetimeValue: 0.15\n}; ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/dateValidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/dynamic-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/hydration-prevention.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/internal-links.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tags' is assigned a value but never used.","line":43,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å†…éƒ¨é“¾æ¥ä¼˜åŒ–å·¥å…·\nexport class InternalLinkOptimizer {\n  private static keywordToPageMap = {\n    // æ ¸å¿ƒå…³é”®è¯æ˜ å°„\n    'ç—›ç»ç¼“è§£': '/zh/articles/5-minute-period-pain-relief',\n    'çƒ­æ•·ç–—æ³•': '/zh/articles/heat-therapy-complete-guide',\n    'è‡ªç„¶ç–—æ³•': '/zh/articles/natural-physical-therapy-comprehensive-guide',\n    'æœˆç»å¥åº·': '/zh/health-guide',\n    'ç»æœŸç®¡ç†': '/zh/interactive-tools',\n    'ç—‡çŠ¶è¯„ä¼°': '/zh/interactive-tools/symptom-assessment',\n    'ç–¼ç—›è¿½è¸ª': '/zh/interactive-tools/pain-tracker',\n    \n    // è‹±æ–‡å…³é”®è¯\n    'period pain relief': '/en/articles/5-minute-period-pain-relief',\n    'heat therapy': '/en/articles/heat-therapy-complete-guide',\n    'natural remedies': '/en/articles/natural-physical-therapy-comprehensive-guide',\n    'menstrual health': '/en/health-guide',\n    'period management': '/en/interactive-tools',\n  };\n\n  static generateInternalLinks(content: string, currentPath: string): string {\n    let optimizedContent = content;\n    \n    Object.entries(this.keywordToPageMap).forEach(([keyword, targetPath]) => {\n      // é¿å…é“¾æ¥åˆ°å½“å‰é¡µé¢\n      if (targetPath === currentPath) return;\n      \n      // åˆ›å»ºé“¾æ¥çš„æ­£åˆ™è¡¨è¾¾å¼\n      const regex = new RegExp(`\\\\b${keyword}\\\\b`, 'gi');\n      \n      // åªæ›¿æ¢ç¬¬ä¸€æ¬¡å‡ºç°çš„å…³é”®è¯\n      let hasReplaced = false;\n      optimizedContent = optimizedContent.replace(regex, (match) => {\n        if (hasReplaced) return match;\n        hasReplaced = true;\n        return `<a href=\"${targetPath}\" class=\"internal-link text-purple-600 hover:text-purple-800 underline\">${match}</a>`;\n      });\n    });\n    \n    return optimizedContent;\n  }\n\n  static getRelatedPages(currentPath: string, tags: string[] = []): Array<{title: string, path: string, description: string}> {\n    const relatedPages = [];\n    \n    // åŸºäºè·¯å¾„çš„ç›¸å…³é¡µé¢æ¨è\n    if (currentPath.includes('/articles/')) {\n      relatedPages.push(\n        { title: 'äº¤äº’å·¥å…·', path: '/interactive-tools', description: 'ä½¿ç”¨æˆ‘ä»¬çš„å¥åº·è¯„ä¼°å·¥å…·' },\n        { title: 'å¥åº·æŒ‡å—', path: '/health-guide', description: 'å…¨é¢çš„å¥åº·ç®¡ç†æŒ‡å—' }\n      );\n    }\n    \n    if (currentPath.includes('/interactive-tools/')) {\n      relatedPages.push(\n        { title: 'ä¸“ä¸šæ–‡ç« ', path: '/articles', description: 'æ·±å…¥äº†è§£æœˆç»å¥åº·çŸ¥è¯†' },\n        { title: 'åœºæ™¯è§£å†³æ–¹æ¡ˆ', path: '/scenario-solutions', description: 'é’ˆå¯¹ç‰¹å®šæƒ…å†µçš„è§£å†³æ–¹æ¡ˆ' }\n      );\n    }\n    \n    return relatedPages;\n  }\n}\n\n// é¢åŒ…å±‘å¯¼èˆªç»„ä»¶\nexport interface BreadcrumbItem {\n  label: string;\n  href?: string;\n}\n\nexport function generateBreadcrumbs(pathname: string, locale: string): BreadcrumbItem[] {\n  const segments = pathname.split('/').filter(Boolean);\n  const breadcrumbs: BreadcrumbItem[] = [\n    { label: locale === 'zh' ? 'é¦–é¡µ' : 'Home', href: `/${locale}` }\n  ];\n  \n  let currentPath = `/${locale}`;\n  \n  for (let i = 1; i < segments.length; i++) {\n    const segment = segments[i];\n    currentPath += `/${segment}`;\n    \n    // æœ€åä¸€ä¸ªæ®µä¸éœ€è¦é“¾æ¥\n    const isLast = i === segments.length - 1;\n    \n    breadcrumbs.push({\n      label: formatSegmentLabel(segment, locale),\n      href: isLast ? undefined : currentPath\n    });\n  }\n  \n  return breadcrumbs;\n}\n\nfunction formatSegmentLabel(segment: string, locale: string): string {\n  const labelMap: Record<string, Record<string, string>> = {\n    zh: {\n      'articles': 'æ–‡ç« ',\n      'interactive-tools': 'äº¤äº’å·¥å…·',\n      'health-guide': 'å¥åº·æŒ‡å—',\n      'scenario-solutions': 'åœºæ™¯è§£å†³æ–¹æ¡ˆ',\n      'natural-therapies': 'è‡ªç„¶ç–—æ³•',\n      'teen-health': 'é’å°‘å¹´å¥åº·'\n    },\n    en: {\n      'articles': 'Articles',\n      'interactive-tools': 'Interactive Tools',\n      'health-guide': 'Health Guide',\n      'scenario-solutions': 'Scenario Solutions',\n      'natural-therapies': 'Natural Therapies',\n      'teen-health': 'Teen Health'\n    }\n  };\n  \n  return labelMap[locale]?.[segment] || segment.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/AnalyticsEngine.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PainAnalytics' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Pattern' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendPoint' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":348,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13100,13103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13100,13103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":352,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":352,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13210,13213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13210,13213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// AnalyticsEngine Test Suite\n// Comprehensive tests for pattern recognition, statistical analysis, and insights generation\n\nimport { AnalyticsEngine } from '../analytics/AnalyticsEngine';\nimport {\n  PainRecord,\n  PainAnalytics,\n  Pattern,\n  TrendPoint,\n  PainType,\n  MenstrualStatus,\n  Symptom\n} from '../../types/pain-tracker';\n\ndescribe('AnalyticsEngine', () => {\n  let analyticsEngine: AnalyticsEngine;\n  let mockRecords: PainRecord[];\n\n  beforeEach(() => {\n    analyticsEngine = new AnalyticsEngine();\n    \n    // Create mock pain records for testing\n    mockRecords = [\n      {\n        id: '1',\n        date: '2024-01-01',\n        time: '10:00',\n        painLevel: 8,\n        painTypes: ['cramping', 'aching'] as PainType[],\n        locations: ['lower_abdomen'],\n        symptoms: ['nausea', 'fatigue'] as Symptom[],\n        menstrualStatus: 'day_1' as MenstrualStatus,\n        medications: [{ name: 'ibuprofen', dosage: '400mg', timing: 'during pain' }],\n        effectiveness: 7,\n        lifestyleFactors: [],\n        notes: 'Severe cramping in the morning',\n        createdAt: new Date('2024-01-01T10:00:00Z'),\n        updatedAt: new Date('2024-01-01T10:00:00Z')\n      },\n      {\n        id: '2',\n        date: '2024-01-02',\n        time: '14:30',\n        painLevel: 6,\n        painTypes: ['cramping'] as PainType[],\n        locations: ['lower_abdomen', 'lower_back'],\n        symptoms: ['bloating'] as Symptom[],\n        menstrualStatus: 'day_2_3' as MenstrualStatus,\n        medications: [{ name: 'ibuprofen', dosage: '400mg', timing: 'during pain' }],\n        effectiveness: 8,\n        lifestyleFactors: [],\n        notes: 'Better than yesterday',\n        createdAt: new Date('2024-01-02T14:30:00Z'),\n        updatedAt: new Date('2024-01-02T14:30:00Z')\n      },\n      {\n        id: '3',\n        date: '2024-01-03',\n        time: '09:15',\n        painLevel: 4,\n        painTypes: ['aching'] as PainType[],\n        locations: ['lower_back'],\n        symptoms: ['fatigue'] as Symptom[],\n        menstrualStatus: 'day_2_3' as MenstrualStatus,\n        medications: [{ name: 'acetaminophen', dosage: '500mg', timing: 'during pain' }],\n        effectiveness: 6,\n        lifestyleFactors: [],\n        notes: 'Mild discomfort',\n        createdAt: new Date('2024-01-03T09:15:00Z'),\n        updatedAt: new Date('2024-01-03T09:15:00Z')\n      },\n      {\n        id: '4',\n        date: '2024-01-15',\n        time: '16:00',\n        painLevel: 3,\n        painTypes: ['pressure'] as PainType[],\n        locations: ['lower_abdomen'],\n        symptoms: ['mood_changes'] as Symptom[],\n        menstrualStatus: 'mid_cycle' as MenstrualStatus,\n        medications: [],\n        effectiveness: 0,\n        lifestyleFactors: [],\n        notes: 'Ovulation pain',\n        createdAt: new Date('2024-01-15T16:00:00Z'),\n        updatedAt: new Date('2024-01-15T16:00:00Z')\n      },\n      {\n        id: '5',\n        date: '2024-01-28',\n        time: '11:30',\n        painLevel: 7,\n        painTypes: ['cramping', 'sharp'] as PainType[],\n        locations: ['lower_abdomen', 'pelvis'],\n        symptoms: ['nausea', 'headache'] as Symptom[],\n        menstrualStatus: 'before_period' as MenstrualStatus,\n        medications: [{ name: 'ibuprofen', dosage: '600mg', timing: 'preventive' }],\n        effectiveness: 9,\n        lifestyleFactors: [],\n        notes: 'Pre-menstrual pain',\n        createdAt: new Date('2024-01-28T11:30:00Z'),\n        updatedAt: new Date('2024-01-28T11:30:00Z')\n      }\n    ];\n  });\n\n  describe('calculateAnalytics', () => {\n    it('should calculate correct analytics for valid records', () => {\n      const analytics = analyticsEngine.calculateAnalytics(mockRecords);\n\n      expect(analytics).toBeDefined();\n      expect(analytics.totalRecords).toBe(5);\n      expect(analytics.averagePainLevel).toBe(5.6); // (8+6+4+3+7)/5\n      expect(analytics.commonPainTypes).toHaveLength(4);\n      expect(analytics.effectiveTreatments).toHaveLength(1); // Only ibuprofen meets minimum usage requirement\n      expect(analytics.cyclePatterns).toHaveLength(4);\n      expect(analytics.trendData).toHaveLength(5);\n      expect(analytics.insights).toBeInstanceOf(Array);\n      expect(analytics.dateRange.start).toBeInstanceOf(Date);\n      expect(analytics.dateRange.end).toBeInstanceOf(Date);\n    });\n\n    it('should return empty analytics for empty records', () => {\n      const analytics = analyticsEngine.calculateAnalytics([]);\n\n      expect(analytics.totalRecords).toBe(0);\n      expect(analytics.averagePainLevel).toBe(0);\n      expect(analytics.commonPainTypes).toHaveLength(0);\n      expect(analytics.effectiveTreatments).toHaveLength(0);\n      expect(analytics.cyclePatterns).toHaveLength(0);\n      expect(analytics.trendData).toHaveLength(0);\n      expect(analytics.insights).toContain('No data available yet. Start tracking your pain to see analytics and insights.');\n    });\n\n    it('should calculate pain type frequency correctly', () => {\n      const analytics = analyticsEngine.calculateAnalytics(mockRecords);\n      \n      // Cramping appears 3 times, aching 2 times, sharp 1 time, pressure 1 time\n      // Total pain types: 7\n      const crampingType = analytics.commonPainTypes.find(type => type.type === 'cramping');\n      expect(crampingType).toBeDefined();\n      expect(crampingType!.count).toBe(3);\n      expect(crampingType!.percentage).toBeCloseTo(42.9, 1); // 3/7 * 100\n    });\n\n    it('should calculate treatment effectiveness correctly', () => {\n      const analytics = analyticsEngine.calculateAnalytics(mockRecords);\n      \n      const ibuprofenTreatment = analytics.effectiveTreatments.find(t => t.treatment === 'Ibuprofen');\n      expect(ibuprofenTreatment).toBeDefined();\n      expect(ibuprofenTreatment!.usageCount).toBe(3);\n      expect(ibuprofenTreatment!.averageEffectiveness).toBeCloseTo(8.0, 1); // (7+8+9)/3\n      expect(ibuprofenTreatment!.successRate).toBeCloseTo(100, 1); // All >= 7\n    });\n\n    it('should calculate cycle patterns correctly', () => {\n      const analytics = analyticsEngine.calculateAnalytics(mockRecords);\n      \n      const day1Pattern = analytics.cyclePatterns.find(p => p.phase === 'day_1');\n      expect(day1Pattern).toBeDefined();\n      expect(day1Pattern!.averagePainLevel).toBe(8);\n      expect(day1Pattern!.frequency).toBe(1);\n      expect(day1Pattern!.commonSymptoms).toContain('nausea');\n      expect(day1Pattern!.commonSymptoms).toContain('fatigue');\n    });\n  });\n\n  describe('identifyPatterns', () => {\n    it('should identify menstrual patterns', () => {\n      const patterns = analyticsEngine.identifyPatterns(mockRecords);\n      \n      const menstrualPattern = patterns.find(p => p.type === 'menstrual_cycle');\n      expect(menstrualPattern).toBeDefined();\n      expect(menstrualPattern!.confidence).toBeGreaterThan(0);\n      expect(menstrualPattern!.recommendations).toBeInstanceOf(Array);\n      expect(menstrualPattern!.recommendations.length).toBeGreaterThan(0);\n    });\n\n    it('should identify treatment patterns', () => {\n      const patterns = analyticsEngine.identifyPatterns(mockRecords);\n      \n      const treatmentPattern = patterns.find(p => p.type === 'treatment_response');\n      expect(treatmentPattern).toBeDefined();\n      expect(treatmentPattern!.confidence).toBeGreaterThan(0);\n    });\n\n    it('should return empty array for insufficient data', () => {\n      const patterns = analyticsEngine.identifyPatterns([mockRecords[0], mockRecords[1]]);\n      expect(patterns).toHaveLength(0);\n    });\n\n    it('should sort patterns by confidence', () => {\n      const patterns = analyticsEngine.identifyPatterns(mockRecords);\n      \n      for (let i = 1; i < patterns.length; i++) {\n        expect(patterns[i - 1].confidence).toBeGreaterThanOrEqual(patterns[i].confidence);\n      }\n    });\n  });\n\n  describe('generateInsights', () => {\n    it('should generate insights for high pain levels', () => {\n      const highPainRecords = mockRecords.map(record => ({\n        ...record,\n        painLevel: 8\n      }));\n      \n      const analytics = analyticsEngine.calculateAnalytics(highPainRecords);\n      const insights = analyticsEngine.generateInsights(analytics);\n      \n      expect(insights.some(insight => \n        insight.includes('high') && insight.includes('healthcare provider')\n      )).toBe(true);\n    });\n\n    it('should generate insights for low pain levels', () => {\n      const lowPainRecords = mockRecords.map(record => ({\n        ...record,\n        painLevel: 2\n      }));\n      \n      const analytics = analyticsEngine.calculateAnalytics(lowPainRecords);\n      const insights = analyticsEngine.generateInsights(analytics);\n      \n      expect(insights.some(insight => \n        insight.includes('low') && insight.includes('working well')\n      )).toBe(true);\n    });\n\n    it('should generate insights for effective treatments', () => {\n      const analytics = analyticsEngine.calculateAnalytics(mockRecords);\n      const insights = analyticsEngine.generateInsights(analytics);\n      \n      expect(insights.some(insight => \n        insight.includes('Ibuprofen') && insight.includes('effectiveness')\n      )).toBe(true);\n    });\n\n    it('should generate insights for data completeness', () => {\n      const analytics = analyticsEngine.calculateAnalytics(mockRecords);\n      const insights = analyticsEngine.generateInsights(analytics);\n      \n      expect(insights.some(insight => \n        insight.includes('tracking') || insight.includes('data')\n      )).toBe(true);\n    });\n  });\n\n  describe('predictTrends', () => {\n    it('should return empty array for insufficient data', () => {\n      const predictions = analyticsEngine.predictTrends([mockRecords[0]]);\n      expect(predictions).toHaveLength(0);\n    });\n\n    it('should generate 7-day predictions for sufficient data', () => {\n      // Create more records to meet minimum requirement\n      const extendedRecords = [...mockRecords];\n      for (let i = 0; i < 10; i++) {\n        extendedRecords.push({\n          ...mockRecords[0],\n          id: `extra_${i}`,\n          date: `2024-02-${String(i + 1).padStart(2, '0')}`,\n          painLevel: 5 + Math.random() * 3\n        });\n      }\n      \n      const predictions = analyticsEngine.predictTrends(extendedRecords);\n      expect(predictions).toHaveLength(7);\n      \n      predictions.forEach(prediction => {\n        expect(prediction.date).toBeDefined();\n        expect(prediction.painLevel).toBeGreaterThanOrEqual(0);\n        expect(prediction.painLevel).toBeLessThanOrEqual(10);\n      });\n    });\n\n    it('should generate predictions with valid dates', () => {\n      const extendedRecords = [...mockRecords];\n      for (let i = 0; i < 10; i++) {\n        extendedRecords.push({\n          ...mockRecords[0],\n          id: `extra_${i}`,\n          date: `2024-02-${String(i + 1).padStart(2, '0')}`,\n          painLevel: 5\n        });\n      }\n      \n      const predictions = analyticsEngine.predictTrends(extendedRecords);\n      const lastRecordDate = new Date(extendedRecords[extendedRecords.length - 1].date);\n      \n      predictions.forEach((prediction, index) => {\n        const predictionDate = new Date(prediction.date);\n        const expectedDate = new Date(lastRecordDate);\n        expectedDate.setDate(expectedDate.getDate() + index + 1);\n        \n        expect(predictionDate.toDateString()).toBe(expectedDate.toDateString());\n      });\n    });\n  });\n\n  describe('calculateCorrelations', () => {\n    it('should return empty array for insufficient data', () => {\n      const correlations = analyticsEngine.calculateCorrelations([mockRecords[0]]);\n      expect(correlations).toHaveLength(0);\n    });\n\n    it('should calculate menstrual pain correlation', () => {\n      const correlations = analyticsEngine.calculateCorrelations(mockRecords);\n      \n      const menstrualCorrelation = correlations.find(c => \n        c.factor1 === 'Menstrual Phase' && c.factor2 === 'Pain Level'\n      );\n      \n      if (menstrualCorrelation) {\n        expect(menstrualCorrelation.correlation).toBeGreaterThanOrEqual(-1);\n        expect(menstrualCorrelation.correlation).toBeLessThanOrEqual(1);\n        expect(menstrualCorrelation.significance).toBeGreaterThanOrEqual(0);\n        expect(menstrualCorrelation.significance).toBeLessThanOrEqual(1);\n        expect(menstrualCorrelation.description).toBeDefined();\n      }\n    });\n\n    it('should sort correlations by significance', () => {\n      const correlations = analyticsEngine.calculateCorrelations(mockRecords);\n      \n      for (let i = 1; i < correlations.length; i++) {\n        expect(correlations[i - 1].significance).toBeGreaterThanOrEqual(correlations[i].significance);\n      }\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle invalid data gracefully', () => {\n      const invalidRecords = [\n        {\n          ...mockRecords[0],\n          painLevel: NaN\n        }\n      ] as PainRecord[];\n      \n      expect(() => {\n        analyticsEngine.calculateAnalytics(invalidRecords);\n      }).not.toThrow();\n    });\n\n    it('should handle null/undefined records', () => {\n      expect(() => {\n        analyticsEngine.calculateAnalytics(null as any);\n      }).toThrow();\n      \n      expect(() => {\n        analyticsEngine.calculateAnalytics(undefined as any);\n      }).toThrow();\n    });\n\n    it('should handle empty arrays gracefully', () => {\n      expect(() => {\n        const analytics = analyticsEngine.calculateAnalytics([]);\n        const patterns = analyticsEngine.identifyPatterns([]);\n        const insights = analyticsEngine.generateInsights(analytics);\n        const predictions = analyticsEngine.predictTrends([]);\n        const correlations = analyticsEngine.calculateCorrelations([]);\n        \n        expect(analytics).toBeDefined();\n        expect(patterns).toHaveLength(0);\n        expect(insights).toBeInstanceOf(Array);\n        expect(predictions).toHaveLength(0);\n        expect(correlations).toHaveLength(0);\n      }).not.toThrow();\n    });\n  });\n\n  describe('data validation', () => {\n    it('should handle records with missing optional fields', () => {\n      const minimalRecord: PainRecord = {\n        id: 'minimal',\n        date: '2024-01-01',\n        time: '10:00',\n        painLevel: 5,\n        painTypes: ['cramping'] as PainType[],\n        locations: ['lower_abdomen'],\n        symptoms: [] as Symptom[],\n        menstrualStatus: 'day_1' as MenstrualStatus,\n        medications: [],\n        effectiveness: 0,\n        lifestyleFactors: [],\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      expect(() => {\n        analyticsEngine.calculateAnalytics([minimalRecord]);\n      }).not.toThrow();\n    });\n\n    it('should handle extreme pain levels', () => {\n      const extremeRecords = [\n        { ...mockRecords[0], painLevel: 0 },\n        { ...mockRecords[1], painLevel: 10 }\n      ];\n      \n      const analytics = analyticsEngine.calculateAnalytics(extremeRecords);\n      expect(analytics.averagePainLevel).toBe(5);\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/ExportManager.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MedicalSummary' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":217,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":217,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8228,8231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8228,8231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8407,8410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8407,8410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":271,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10158,10161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10158,10161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":278,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10440,10443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10440,10443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'createMockAnalyticsEngine' is defined but never used.","line":348,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":348,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'validateHTMLStructure' is defined but never used.","line":354,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":354,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'countOccurrences' is defined but never used.","line":364,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":364,"endColumn":26}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ExportManager Test Suite\n// Comprehensive tests for medical report export functionality\n\nimport { ExportManager } from '../export/ExportManager';\nimport { AnalyticsEngine } from '../analytics/AnalyticsEngine';\nimport {\n  PainRecord,\n  PainAnalytics,\n  ExportOptions,\n  MedicalSummary,\n  PainType,\n  PainLocation,\n  Symptom,\n  MenstrualStatus\n} from '../../../types/pain-tracker';\n\ndescribe('ExportManager', () => {\n  let exportManager: ExportManager;\n  let mockRecords: PainRecord[];\n  let mockAnalytics: PainAnalytics;\n  let mockExportOptions: ExportOptions;\n\n  beforeEach(() => {\n    exportManager = new ExportManager();\n    \n    // Create mock pain records\n    mockRecords = [\n      {\n        id: '1',\n        date: '2024-01-01',\n        time: '10:00',\n        painLevel: 7,\n        painTypes: ['cramping' as PainType],\n        locations: ['lower_abdomen' as PainLocation],\n        symptoms: ['nausea' as Symptom],\n        menstrualStatus: 'day_1' as MenstrualStatus,\n        medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'morning', notes: '' }],\n        effectiveness: 8,\n        lifestyleFactors: [],\n        notes: 'Severe cramping in the morning',\n        createdAt: new Date('2024-01-01T10:00:00Z'),\n        updatedAt: new Date('2024-01-01T10:00:00Z')\n      },\n      {\n        id: '2',\n        date: '2024-01-02',\n        time: '14:30',\n        painLevel: 5,\n        painTypes: ['aching' as PainType],\n        locations: ['lower_back' as PainLocation],\n        symptoms: ['fatigue' as Symptom],\n        menstrualStatus: 'day_2_3' as MenstrualStatus,\n        medications: [{ name: 'Acetaminophen', dosage: '500mg', timing: 'afternoon', notes: '' }],\n        effectiveness: 6,\n        lifestyleFactors: [],\n        notes: 'Lower back pain, feeling tired',\n        createdAt: new Date('2024-01-02T14:30:00Z'),\n        updatedAt: new Date('2024-01-02T14:30:00Z')\n      }\n    ];\n\n    // Create mock analytics\n    mockAnalytics = {\n      averagePainLevel: 6.0,\n      totalRecords: 2,\n      commonPainTypes: [\n        { type: 'cramping' as PainType, count: 1, percentage: 50.0 },\n        { type: 'aching' as PainType, count: 1, percentage: 50.0 }\n      ],\n      effectiveTreatments: [\n        { treatment: 'Ibuprofen', averageEffectiveness: 8.0, usageCount: 1, successRate: 100.0 },\n        { treatment: 'Acetaminophen', averageEffectiveness: 6.0, usageCount: 1, successRate: 60.0 }\n      ],\n      cyclePatterns: [\n        { phase: 'day_1' as MenstrualStatus, averagePainLevel: 7.0, commonSymptoms: ['nausea' as Symptom], frequency: 1 },\n        { phase: 'day_2_3' as MenstrualStatus, averagePainLevel: 5.0, commonSymptoms: ['fatigue' as Symptom], frequency: 1 }\n      ],\n      trendData: [\n        { date: '2024-01-01', painLevel: 7, menstrualPhase: 'day_1' as MenstrualStatus },\n        { date: '2024-01-02', painLevel: 5, menstrualPhase: 'day_2_3' as MenstrualStatus }\n      ],\n      insights: [\n        'Average pain level is moderate (6.0/10)',\n        'Ibuprofen shows high effectiveness (100% success rate)',\n        'Pain levels are highest during day 1 of menstrual cycle'\n      ],\n      dateRange: {\n        start: new Date('2024-01-01'),\n        end: new Date('2024-01-02')\n      }\n    };\n\n    // Create mock export options\n    mockExportOptions = {\n      format: 'html',\n      dateRange: {\n        start: new Date('2024-01-01'),\n        end: new Date('2024-01-02')\n      },\n      includeCharts: true,\n      includeSummary: true,\n      includeInsights: true\n    };\n  });\n\n  describe('generateMedicalSummary', () => {\n    it('should generate comprehensive medical summary', () => {\n      const summary = exportManager.generateMedicalSummary(mockRecords, mockAnalytics);\n\n      expect(summary).toBeDefined();\n      expect(summary.patientSummary).toContain('2 recorded entries');\n      expect(summary.patientSummary).toContain('6.0 out of 10');\n      expect(summary.painCharacteristics.averageLevel).toBe(6.0);\n      expect(summary.treatmentHistory.totalTreatments).toBe(2);\n      expect(summary.menstrualPatterns.identifiedPatterns).toBe(2);\n      expect(summary.clinicalInsights).toEqual(mockAnalytics.insights);\n      expect(summary.recommendations).toBeDefined();\n      expect(summary.recommendations.length).toBeGreaterThan(0);\n    });\n\n    it('should handle empty records gracefully', () => {\n      const emptyAnalytics: PainAnalytics = {\n        averagePainLevel: 0,\n        totalRecords: 0,\n        commonPainTypes: [],\n        effectiveTreatments: [],\n        cyclePatterns: [],\n        trendData: [],\n        insights: [],\n        dateRange: { start: new Date(), end: new Date() }\n      };\n\n      const summary = exportManager.generateMedicalSummary([], emptyAnalytics);\n\n      expect(summary).toBeDefined();\n      expect(summary.patientSummary).toContain('0 recorded entries');\n      expect(summary.treatmentHistory.totalTreatments).toBe(0);\n      expect(summary.menstrualPatterns.highestPainPhase).toBeNull();\n    });\n\n    it('should generate appropriate clinical recommendations', () => {\n      // Test high pain level recommendation\n      const highPainAnalytics = { ...mockAnalytics, averagePainLevel: 8.5 };\n      const summary = exportManager.generateMedicalSummary(mockRecords, highPainAnalytics);\n\n      const highPainRec = summary.recommendations.find(r => r.category === 'Pain Management');\n      expect(highPainRec).toBeDefined();\n      expect(highPainRec?.priority).toBe('high');\n    });\n  });\n\n  describe('exportToHTML', () => {\n    it('should generate valid HTML report', async () => {\n      const htmlReport = await exportManager.exportToHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(htmlReport).toBeDefined();\n      expect(htmlReport).toContain('<!DOCTYPE html>');\n      expect(htmlReport).toContain('Pain Tracking Medical Report');\n      expect(htmlReport).toContain('Executive Summary');\n      expect(htmlReport).toContain('Patient Summary');\n      expect(htmlReport).toContain('Pain Characteristics');\n      expect(htmlReport).toContain('Treatment History');\n      expect(htmlReport).toContain('Clinical Recommendations');\n      expect(htmlReport).toContain('6.0/10'); // Average pain level\n      expect(htmlReport).toContain('Ibuprofen'); // Treatment name\n    });\n\n    it('should include charts when requested', async () => {\n      const optionsWithCharts = { ...mockExportOptions, includeCharts: true };\n      const htmlReport = await exportManager.exportToHTML(mockRecords, mockAnalytics, optionsWithCharts);\n\n      expect(htmlReport).toContain('Data Visualizations');\n    });\n\n    it('should exclude charts when not requested', async () => {\n      const optionsWithoutCharts = { ...mockExportOptions, includeCharts: false };\n      const htmlReport = await exportManager.exportToHTML(mockRecords, mockAnalytics, optionsWithoutCharts);\n\n      expect(htmlReport).not.toContain('Data Visualizations');\n    });\n\n    it('should handle empty records with appropriate message', async () => {\n      await expect(exportManager.exportToHTML([], mockAnalytics, mockExportOptions))\n        .rejects.toThrow('No data available for export');\n    });\n\n    it('should filter records by date range', async () => {\n      const restrictedOptions = {\n        ...mockExportOptions,\n        dateRange: {\n          start: new Date('2024-01-01'),\n          end: new Date('2024-01-01')\n        }\n      };\n\n      const htmlReport = await exportManager.exportToHTML(mockRecords, mockAnalytics, restrictedOptions);\n      \n      // Should only include records from Jan 1st\n      expect(htmlReport).toContain('2024-01-01');\n      // Should not include records from Jan 2nd in the detailed table\n      const jan2Matches = (htmlReport.match(/2024-01-02/g) || []).length;\n      expect(jan2Matches).toBeLessThanOrEqual(1); // May appear in date range display\n    });\n  });\n\n  describe('exportToPDF', () => {\n    // Note: PDF export tests would require a more complex setup with jsdom or similar\n    // For now, we'll test the basic functionality\n    \n    it('should attempt to generate PDF', async () => {\n      // Mock window.open for testing\n      const mockWindow = {\n        document: {\n          write: jest.fn(),\n          close: jest.fn()\n        },\n        onload: null as any,\n        print: jest.fn(),\n        close: jest.fn()\n      };\n\n      global.window = {\n        ...global.window,\n        open: jest.fn().mockReturnValue(mockWindow)\n      } as any;\n\n      try {\n        const pdfBlob = await exportManager.exportToPDF(mockRecords, mockAnalytics, mockExportOptions);\n        expect(pdfBlob).toBeInstanceOf(Blob);\n      } catch (error) {\n        // PDF generation may fail in test environment, which is expected\n        expect(error).toBeDefined();\n      }\n    });\n  });\n\n  describe('generateReportHTML', () => {\n    it('should generate complete HTML structure', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('<html lang=\"en\">');\n      expect(html).toContain('<head>');\n      expect(html).toContain('<body>');\n      expect(html).toContain('</html>');\n      expect(html).toContain('report-container');\n      expect(html).toContain('report-header');\n      expect(html).toContain('report-footer');\n    });\n\n    it('should include CSS styles', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('<style>');\n      expect(html).toContain('font-family');\n      expect(html).toContain('.report-container');\n      expect(html).toContain('.summary-card');\n    });\n\n    it('should include medical disclaimer', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('Medical Disclaimer');\n      expect(html).toContain('self-reported data');\n      expect(html).toContain('Privacy Notice');\n      expect(html).toContain('sensitive health information');\n    });\n  });\n\n  describe('error handling', () => {\n    it('should throw PainTrackerError for invalid data', async () => {\n      const invalidRecords = null as any;\n      \n      await expect(exportManager.exportToHTML(invalidRecords, mockAnalytics, mockExportOptions))\n        .rejects.toThrow('No data available for export');\n    });\n\n    it('should handle analytics engine errors gracefully', () => {\n      const invalidAnalytics = null as any;\n      \n      expect(() => exportManager.generateMedicalSummary(mockRecords, invalidAnalytics))\n        .toThrow();\n    });\n  });\n\n  describe('data formatting', () => {\n    it('should format pain levels correctly', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('6.0/10'); // Average pain level\n      expect(html).toContain('7/10'); // Individual record pain level\n      expect(html).toContain('5/10'); // Individual record pain level\n    });\n\n    it('should format dates correctly', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('Jan 1, 2024');\n      expect(html).toContain('Jan 2, 2024');\n    });\n\n    it('should format menstrual status correctly', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('Day 1');\n      expect(html).toContain('Days 2-3');\n    });\n\n    it('should format pain types correctly', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('cramping');\n      expect(html).toContain('aching');\n    });\n  });\n\n  describe('report completeness', () => {\n    it('should include all required sections', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      const requiredSections = [\n        'Executive Summary',\n        'Patient Summary',\n        'Pain Characteristics',\n        'Treatment History',\n        'Menstrual Cycle Patterns',\n        'Clinical Insights',\n        'Clinical Recommendations',\n        'Detailed Pain Records'\n      ];\n\n      requiredSections.forEach(section => {\n        expect(html).toContain(section);\n      });\n    });\n\n    it('should include metadata', async () => {\n      const html = await exportManager.generateReportHTML(mockRecords, mockAnalytics, mockExportOptions);\n\n      expect(html).toContain('Generated:');\n      expect(html).toContain('Period:');\n      expect(html).toContain('Total Records:');\n      expect(html).toContain('Period Hub Pain Tracker');\n    });\n  });\n});\n\n// Helper function to create mock analytics engine\nfunction createMockAnalyticsEngine(): AnalyticsEngine {\n  const engine = new AnalyticsEngine();\n  return engine;\n}\n\n// Helper function to validate HTML structure\nfunction validateHTMLStructure(html: string): boolean {\n  const hasDoctype = html.includes('<!DOCTYPE html>');\n  const hasHtmlTag = html.includes('<html') && html.includes('</html>');\n  const hasHead = html.includes('<head>') && html.includes('</head>');\n  const hasBody = html.includes('<body>') && html.includes('</body>');\n  \n  return hasDoctype && hasHtmlTag && hasHead && hasBody;\n}\n\n// Helper function to count occurrences of a string in HTML\nfunction countOccurrences(html: string, searchString: string): number {\n  return (html.match(new RegExp(searchString, 'g')) || []).length;\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/LocalStorageAdapter.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1695,1698],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1695,1698],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5585,5588],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5585,5588],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":208,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6604,6607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6604,6607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LocalStorageAdapter Unit Tests\n// Comprehensive test suite for local storage operations\n\nimport LocalStorageAdapter from '../storage/LocalStorageAdapter';\nimport { STORAGE_KEYS } from '../../../types/pain-tracker';\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n  length: 0,\n  key: jest.fn()\n};\n\nObject.defineProperty(global, 'localStorage', {\n  value: mockLocalStorage\n});\n\n// Mock navigator.storage\nObject.defineProperty(global, 'navigator', {\n  value: {\n    storage: {\n      estimate: jest.fn().mockResolvedValue({\n        usage: 1024,\n        quota: 5 * 1024 * 1024\n      })\n    }\n  }\n});\n\ndescribe('LocalStorageAdapter', () => {\n  let adapter: LocalStorageAdapter;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    adapter = new LocalStorageAdapter();\n  });\n\n  describe('save', () => {\n    it('should save data to localStorage', async () => {\n      const testData = [{ id: '1', name: 'test' }];\n      \n      await adapter.save(STORAGE_KEYS.PAIN_RECORDS, testData);\n      \n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.PAIN_RECORDS,\n        JSON.stringify(testData)\n      );\n    });\n\n    it('should handle save errors gracefully', async () => {\n      const testData = [{ id: '1', name: 'test' }];\n      mockLocalStorage.setItem.mockImplementation(() => {\n        throw new Error('Storage quota exceeded');\n      });\n      \n      await expect(adapter.save(STORAGE_KEYS.PAIN_RECORDS, testData))\n        .rejects.toThrow('Failed to save data to localStorage');\n    });\n\n    it('should handle circular references in data', async () => {\n      const circularData: any = { id: '1' };\n      circularData.self = circularData;\n      \n      await expect(adapter.save(STORAGE_KEYS.PAIN_RECORDS, circularData))\n        .rejects.toThrow('Failed to save data to localStorage');\n    });\n  });\n\n  describe('load', () => {\n    it('should load data from localStorage', async () => {\n      const testData = [{ id: '1', name: 'test' }];\n      mockLocalStorage.getItem.mockReturnValue(JSON.stringify(testData));\n      \n      const result = await adapter.load(STORAGE_KEYS.PAIN_RECORDS);\n      \n      expect(mockLocalStorage.getItem).toHaveBeenCalledWith(STORAGE_KEYS.PAIN_RECORDS);\n      expect(result).toEqual(testData);\n    });\n\n    it('should return null for non-existent data', async () => {\n      mockLocalStorage.getItem.mockReturnValue(null);\n      \n      const result = await adapter.load(STORAGE_KEYS.PAIN_RECORDS);\n      \n      expect(result).toBeNull();\n    });\n\n    it('should handle corrupted JSON data', async () => {\n      mockLocalStorage.getItem.mockReturnValue('invalid json');\n      \n      await expect(adapter.load(STORAGE_KEYS.PAIN_RECORDS))\n        .rejects.toThrow('Failed to load data from localStorage');\n    });\n\n    it('should handle localStorage access errors', async () => {\n      mockLocalStorage.getItem.mockImplementation(() => {\n        throw new Error('localStorage not available');\n      });\n      \n      await expect(adapter.load(STORAGE_KEYS.PAIN_RECORDS))\n        .rejects.toThrow('Failed to load data from localStorage');\n    });\n  });\n\n  describe('remove', () => {\n    it('should remove data from localStorage', async () => {\n      await adapter.remove(STORAGE_KEYS.PAIN_RECORDS);\n      \n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith(STORAGE_KEYS.PAIN_RECORDS);\n    });\n\n    it('should handle remove errors gracefully', async () => {\n      mockLocalStorage.removeItem.mockImplementation(() => {\n        throw new Error('Remove failed');\n      });\n      \n      await expect(adapter.remove(STORAGE_KEYS.PAIN_RECORDS))\n        .rejects.toThrow('Failed to remove data from localStorage');\n    });\n  });\n\n  describe('clear', () => {\n    it('should clear all pain tracker data', async () => {\n      await adapter.clear();\n      \n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith(STORAGE_KEYS.PAIN_RECORDS);\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith(STORAGE_KEYS.USER_PREFERENCES);\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith(STORAGE_KEYS.SCHEMA_VERSION);\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith(STORAGE_KEYS.METADATA);\n    });\n\n    it('should handle clear errors gracefully', async () => {\n      mockLocalStorage.removeItem.mockImplementation(() => {\n        throw new Error('Clear failed');\n      });\n      \n      await expect(adapter.clear())\n        .rejects.toThrow('Failed to clear localStorage');\n    });\n  });\n\n  describe('getSize', () => {\n    it('should calculate storage size correctly', async () => {\n      const testData = JSON.stringify([{ id: '1', name: 'test' }]);\n      mockLocalStorage.getItem\n        .mockReturnValueOnce(testData)\n        .mockReturnValueOnce('{}')\n        .mockReturnValueOnce('1')\n        .mockReturnValueOnce('{}');\n      \n      const size = await adapter.getSize();\n      \n      expect(size).toBe(testData.length + 2 + 1 + 2); // Sum of all data lengths\n    });\n\n    it('should handle missing data when calculating size', async () => {\n      mockLocalStorage.getItem.mockReturnValue(null);\n      \n      const size = await adapter.getSize();\n      \n      expect(size).toBe(0);\n    });\n  });\n\n  describe('isAvailable', () => {\n    it('should return true when localStorage is available', () => {\n      expect(adapter.isAvailable()).toBe(true);\n    });\n\n    it('should return false when localStorage is not available', () => {\n      const originalLocalStorage = global.localStorage;\n      delete (global as any).localStorage;\n      \n      const newAdapter = new LocalStorageAdapter();\n      expect(newAdapter.isAvailable()).toBe(false);\n      \n      global.localStorage = originalLocalStorage;\n    });\n\n    it('should return false when localStorage throws errors', () => {\n      const originalSetItem = mockLocalStorage.setItem;\n      mockLocalStorage.setItem.mockImplementation(() => {\n        throw new Error('localStorage disabled');\n      });\n      \n      const newAdapter = new LocalStorageAdapter();\n      expect(newAdapter.isAvailable()).toBe(false);\n      \n      mockLocalStorage.setItem = originalSetItem;\n    });\n  });\n\n  describe('getQuotaInfo', () => {\n    it('should return quota information', async () => {\n      const quotaInfo = await adapter.getQuotaInfo();\n      \n      expect(quotaInfo).toEqual({\n        usage: 1024,\n        quota: 5 * 1024 * 1024,\n        available: 5 * 1024 * 1024 - 1024\n      });\n    });\n\n    it('should handle quota API not available', async () => {\n      delete (global.navigator as any).storage;\n      \n      const quotaInfo = await adapter.getQuotaInfo();\n      \n      expect(quotaInfo).toEqual({\n        usage: 0,\n        quota: 0,\n        available: 0\n      });\n    });\n\n    it('should handle quota API errors', async () => {\n      global.navigator.storage!.estimate = jest.fn().mockRejectedValue(new Error('Quota error'));\n      \n      const quotaInfo = await adapter.getQuotaInfo();\n      \n      expect(quotaInfo).toEqual({\n        usage: 0,\n        quota: 0,\n        available: 0\n      });\n    });\n  });\n\n  describe('createAutoBackup', () => {\n    it('should create automatic backup', async () => {\n      const testData = [{ id: '1', name: 'test' }];\n      mockLocalStorage.getItem.mockReturnValue(JSON.stringify(testData));\n      \n      await adapter.createAutoBackup();\n      \n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        expect.stringMatching(/^pain_tracker_backup_\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/),\n        expect.any(String)\n      );\n    });\n\n    it('should handle backup creation errors', async () => {\n      mockLocalStorage.getItem.mockImplementation(() => {\n        throw new Error('Backup failed');\n      });\n      \n      await expect(adapter.createAutoBackup())\n        .rejects.toThrow('Failed to create automatic backup');\n    });\n\n    it('should limit number of backups', async () => {\n      // Mock existing backups\n      mockLocalStorage.key\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-01T10:00:00')\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-02T10:00:00')\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-03T10:00:00')\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-04T10:00:00')\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-05T10:00:00')\n        .mockReturnValueOnce(null);\n      \n      mockLocalStorage.length = 5;\n      mockLocalStorage.getItem.mockReturnValue('{}');\n      \n      await adapter.createAutoBackup();\n      \n      // Should remove oldest backup\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('pain_tracker_backup_2024-01-01T10:00:00');\n    });\n  });\n\n  describe('listBackups', () => {\n    it('should list available backups', async () => {\n      mockLocalStorage.key\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-01T10:00:00')\n        .mockReturnValueOnce('pain_tracker_backup_2024-01-02T10:00:00')\n        .mockReturnValueOnce('other_key')\n        .mockReturnValueOnce(null);\n      \n      mockLocalStorage.length = 3;\n      \n      const backups = await adapter.listBackups();\n      \n      expect(backups).toEqual([\n        'pain_tracker_backup_2024-01-02T10:00:00',\n        'pain_tracker_backup_2024-01-01T10:00:00'\n      ]);\n    });\n\n    it('should return empty array when no backups exist', async () => {\n      mockLocalStorage.length = 0;\n      \n      const backups = await adapter.listBackups();\n      \n      expect(backups).toEqual([]);\n    });\n  });\n\n  describe('restoreFromBackup', () => {\n    it('should restore data from backup', async () => {\n      const backupData = {\n        records: [{ id: '1', name: 'test' }],\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {}\n      };\n      \n      mockLocalStorage.getItem.mockReturnValue(JSON.stringify(backupData));\n      \n      await adapter.restoreFromBackup('pain_tracker_backup_2024-01-01T10:00:00');\n      \n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.PAIN_RECORDS,\n        JSON.stringify(backupData.records)\n      );\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.USER_PREFERENCES,\n        JSON.stringify(backupData.preferences)\n      );\n    });\n\n    it('should handle non-existent backup', async () => {\n      mockLocalStorage.getItem.mockReturnValue(null);\n      \n      await expect(adapter.restoreFromBackup('non_existent_backup'))\n        .rejects.toThrow('Backup not found');\n    });\n\n    it('should handle corrupted backup data', async () => {\n      mockLocalStorage.getItem.mockReturnValue('invalid json');\n      \n      await expect(adapter.restoreFromBackup('corrupted_backup'))\n        .rejects.toThrow('Failed to restore from backup');\n    });\n  });\n\n  describe('cleanupOldBackups', () => {\n    it('should remove backups older than retention period', async () => {\n      const oldDate = new Date();\n      oldDate.setDate(oldDate.getDate() - 31); // 31 days old\n      \n      const recentDate = new Date();\n      recentDate.setDate(recentDate.getDate() - 1); // 1 day old\n      \n      mockLocalStorage.key\n        .mockReturnValueOnce(`pain_tracker_backup_${oldDate.toISOString()}`)\n        .mockReturnValueOnce(`pain_tracker_backup_${recentDate.toISOString()}`)\n        .mockReturnValueOnce(null);\n      \n      mockLocalStorage.length = 2;\n      \n      await adapter.cleanupOldBackups();\n      \n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith(\n        `pain_tracker_backup_${oldDate.toISOString()}`\n      );\n      expect(mockLocalStorage.removeItem).not.toHaveBeenCalledWith(\n        `pain_tracker_backup_${recentDate.toISOString()}`\n      );\n    });\n  });\n\n  describe('export', () => {\n    it('should export all data', async () => {\n      const records = [{ id: '1', name: 'test' }];\n      const preferences = { theme: 'light' };\n      const metadata = { version: '1.0' };\n      \n      mockLocalStorage.getItem\n        .mockReturnValueOnce(JSON.stringify(records))\n        .mockReturnValueOnce(JSON.stringify(preferences))\n        .mockReturnValueOnce('1')\n        .mockReturnValueOnce(JSON.stringify(metadata));\n      \n      const exportData = await adapter.export();\n      \n      expect(exportData).toEqual({\n        records,\n        preferences,\n        schemaVersion: 1,\n        metadata,\n        exportDate: expect.any(Date)\n      });\n    });\n\n    it('should handle missing data during export', async () => {\n      mockLocalStorage.getItem.mockReturnValue(null);\n      \n      const exportData = await adapter.export();\n      \n      expect(exportData).toEqual({\n        records: [],\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {},\n        exportDate: expect.any(Date)\n      });\n    });\n  });\n\n  describe('restore', () => {\n    it('should restore data from export', async () => {\n      const importData = {\n        records: [{ id: '1', name: 'test' }],\n        preferences: { theme: 'light' },\n        schemaVersion: 1,\n        metadata: { version: '1.0' }\n      };\n      \n      await adapter.restore(JSON.stringify(importData));\n      \n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.PAIN_RECORDS,\n        JSON.stringify(importData.records)\n      );\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.USER_PREFERENCES,\n        JSON.stringify(importData.preferences)\n      );\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.SCHEMA_VERSION,\n        '1'\n      );\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n        STORAGE_KEYS.METADATA,\n        JSON.stringify(importData.metadata)\n      );\n    });\n\n    it('should handle invalid restore data', async () => {\n      await expect(adapter.restore('invalid json'))\n        .rejects.toThrow('Failed to restore data');\n    });\n\n    it('should handle missing required fields in restore data', async () => {\n      const invalidData = { invalid: 'data' };\n      \n      await expect(adapter.restore(JSON.stringify(invalidData)))\n        .rejects.toThrow('Invalid restore data format');\n    });\n  });\n\n  describe('migration support', () => {\n    it('should handle schema version updates', async () => {\n      mockLocalStorage.getItem.mockReturnValue('0'); // Old schema version\n      \n      const currentVersion = await adapter.load(STORAGE_KEYS.SCHEMA_VERSION);\n      expect(currentVersion).toBe('0');\n      \n      await adapter.save(STORAGE_KEYS.SCHEMA_VERSION, 1);\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(STORAGE_KEYS.SCHEMA_VERSION, '1');\n    });\n  });\n\n  describe('error recovery', () => {\n    it('should attempt recovery on storage errors', async () => {\n      let callCount = 0;\n      mockLocalStorage.setItem.mockImplementation(() => {\n        callCount++;\n        if (callCount === 1) {\n          throw new Error('Temporary error');\n        }\n        return undefined;\n      });\n      \n      // Should retry and succeed on second attempt\n      await adapter.save(STORAGE_KEYS.PAIN_RECORDS, []);\n      expect(mockLocalStorage.setItem).toHaveBeenCalledTimes(2);\n    });\n\n    it('should fail after max retry attempts', async () => {\n      mockLocalStorage.setItem.mockImplementation(() => {\n        throw new Error('Persistent error');\n      });\n      \n      await expect(adapter.save(STORAGE_KEYS.PAIN_RECORDS, []))\n        .rejects.toThrow('Failed to save data to localStorage');\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/PainDataManager.integration.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LocalStorageAdapter' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ValidationService' is defined but never used.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STORAGE_KEYS' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'record1' is assigned a value but never used.","line":196,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":196,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'record2' is assigned a value but never used.","line":197,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":197,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'record3' is assigned a value but never used.","line":202,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":202,"endColumn":20}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// PainDataManager Integration Tests\n// Tests for complete workflows and real-world scenarios\n\nimport PainDataManager from '../data/PainDataManager';\nimport LocalStorageAdapter from '../storage/LocalStorageAdapter';\nimport ValidationService from '../validation/ValidationService';\nimport {\n  PainRecord,\n  STORAGE_KEYS\n} from '../../../types/pain-tracker';\n\n// Mock localStorage for integration tests\nconst mockLocalStorage = {\n  data: {} as Record<string, string>,\n  getItem: jest.fn((key: string) => mockLocalStorage.data[key] || null),\n  setItem: jest.fn((key: string, value: string) => {\n    mockLocalStorage.data[key] = value;\n  }),\n  removeItem: jest.fn((key: string) => {\n    delete mockLocalStorage.data[key];\n  }),\n  clear: jest.fn(() => {\n    mockLocalStorage.data = {};\n  }),\n  length: 0,\n  key: jest.fn()\n};\n\nObject.defineProperty(global, 'localStorage', {\n  value: mockLocalStorage\n});\n\n// Mock navigator.storage\nObject.defineProperty(global, 'navigator', {\n  value: {\n    storage: {\n      estimate: jest.fn().mockResolvedValue({\n        usage: 1024,\n        quota: 5 * 1024 * 1024\n      })\n    }\n  }\n});\n\ndescribe('PainDataManager Integration Tests', () => {\n  let dataManager: PainDataManager;\n\n  const sampleRecords = [\n    {\n      date: '2024-01-15',\n      time: '09:00',\n      painLevel: 7,\n      painTypes: ['cramping', 'aching'] as const,\n      locations: ['lower_abdomen'] as const,\n      symptoms: ['nausea'] as const,\n      menstrualStatus: 'day_1' as const,\n      medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n      effectiveness: 8,\n      lifestyleFactors: [{ factor: 'stress_level' as const, value: 6 }],\n      notes: 'Morning pain, severe cramping'\n    },\n    {\n      date: '2024-01-16',\n      time: '14:30',\n      painLevel: 5,\n      painTypes: ['aching'] as const,\n      locations: ['lower_back'] as const,\n      symptoms: ['fatigue'] as const,\n      menstrualStatus: 'day_2_3' as const,\n      medications: [{ name: 'Acetaminophen', dosage: '500mg', timing: 'before pain' }],\n      effectiveness: 6,\n      lifestyleFactors: [{ factor: 'sleep_hours' as const, value: 7 }],\n      notes: 'Afternoon discomfort'\n    },\n    {\n      date: '2024-01-17',\n      time: '20:00',\n      painLevel: 3,\n      painTypes: ['pressure'] as const,\n      locations: ['pelvis'] as const,\n      symptoms: ['bloating'] as const,\n      menstrualStatus: 'day_2_3' as const,\n      medications: [{ name: 'Heat therapy', dosage: '', timing: 'during pain' }],\n      effectiveness: 7,\n      lifestyleFactors: [{ factor: 'activity_level' as const, value: 4 }],\n      notes: 'Evening mild discomfort'\n    }\n  ];\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockLocalStorage.clear();\n    dataManager = new PainDataManager();\n  });\n\n  describe('Complete Pain Tracking Workflow', () => {\n    it('should handle a complete pain tracking session', async () => {\n      // Save multiple records\n      const savedRecords: PainRecord[] = [];\n      for (const record of sampleRecords) {\n        const saved = await dataManager.saveRecord(record);\n        savedRecords.push(saved);\n        expect(saved.id).toBeDefined();\n        expect(saved.createdAt).toBeInstanceOf(Date);\n        expect(saved.updatedAt).toBeInstanceOf(Date);\n      }\n\n      // Verify all records are saved\n      const allRecords = await dataManager.getAllRecords();\n      expect(allRecords).toHaveLength(3);\n\n      // Test filtering by date range\n      const dateRangeRecords = await dataManager.getRecordsByDateRange(\n        new Date('2024-01-15'),\n        new Date('2024-01-16')\n      );\n      expect(dateRangeRecords).toHaveLength(2);\n\n      // Test filtering by pain level\n      const highPainRecords = await dataManager.getRecordsByPainLevel(6);\n      expect(highPainRecords).toHaveLength(1);\n      expect(highPainRecords[0].painLevel).toBe(7);\n\n      // Test search functionality\n      const searchResults = await dataManager.searchRecords('cramping');\n      expect(searchResults).toHaveLength(1);\n      expect(searchResults[0].painTypes).toContain('cramping');\n\n      // Test statistics calculation\n      const stats = await dataManager.getDataStatistics();\n      expect(stats.totalRecords).toBe(3);\n      expect(stats.averagePainLevel).toBe(5.0); // (7 + 5 + 3) / 3 = 5\n      expect(stats.dateRange.start).toEqual(new Date('2024-01-15'));\n      expect(stats.dateRange.end).toEqual(new Date('2024-01-17'));\n    });\n\n    it('should handle record updates and maintain data integrity', async () => {\n      // Save initial record\n      const initialRecord = await dataManager.saveRecord(sampleRecords[0]);\n      \n      // Update the record\n      const updates = {\n        painLevel: 8,\n        notes: 'Updated: Pain increased',\n        effectiveness: 9\n      };\n      \n      const updatedRecord = await dataManager.updateRecord(initialRecord.id, updates);\n      \n      expect(updatedRecord.painLevel).toBe(8);\n      expect(updatedRecord.notes).toBe('Updated: Pain increased');\n      expect(updatedRecord.effectiveness).toBe(9);\n      expect(updatedRecord.updatedAt.getTime()).toBeGreaterThanOrEqual(updatedRecord.createdAt.getTime());\n      \n      // Verify the update persisted\n      const retrievedRecord = await dataManager.getRecord(initialRecord.id);\n      expect(retrievedRecord?.painLevel).toBe(8);\n      expect(retrievedRecord?.notes).toBe('Updated: Pain increased');\n    });\n\n    it('should handle data export and import correctly', async () => {\n      // Save some records\n      for (const record of sampleRecords) {\n        await dataManager.saveRecord(record);\n      }\n\n      // Export data\n      const exportedData = await dataManager.exportData();\n      expect(exportedData.records).toHaveLength(3);\n      expect(exportedData.schemaVersion).toBeDefined();\n      expect(exportedData.lastBackup).toBeInstanceOf(Date);\n\n      // Clear all data\n      await dataManager.clearAllData();\n      \n      // Verify data is cleared\n      const emptyRecords = await dataManager.getAllRecords();\n      expect(emptyRecords).toHaveLength(0);\n\n      // Import the data back\n      await dataManager.importData(exportedData);\n      \n      // Verify data is restored\n      const restoredRecords = await dataManager.getAllRecords();\n      expect(restoredRecords).toHaveLength(3);\n      \n      // Verify record integrity\n      const firstRecord = restoredRecords.find(r => r.painLevel === 7);\n      expect(firstRecord).toBeDefined();\n      expect(firstRecord?.painTypes).toContain('cramping');\n      expect(firstRecord?.notes).toBe('Morning pain, severe cramping');\n    });\n\n    it('should handle data cleanup and optimization', async () => {\n      // Create some duplicate records with different times to avoid duplicate detection\n      const record1 = await dataManager.saveRecord(sampleRecords[0]);\n      const record2 = await dataManager.saveRecord({\n        ...sampleRecords[0],\n        time: '09:01', // Different time to avoid duplicate detection\n        notes: 'Different notes but same core data'\n      });\n      const record3 = await dataManager.saveRecord(sampleRecords[1]);\n\n      // Verify we have 3 records\n      let allRecords = await dataManager.getAllRecords();\n      expect(allRecords).toHaveLength(3);\n\n      // Perform cleanup\n      const cleanupResult = await dataManager.performDataCleanup();\n      \n      // Since we made the records different, no duplicates should be removed\n      expect(cleanupResult.removedRecords).toBe(0);\n      \n      // Verify cleanup worked\n      allRecords = await dataManager.getAllRecords();\n      expect(allRecords).toHaveLength(3);\n      \n      // Verify all records remain\n      const painLevels = allRecords.map(r => r.painLevel).sort();\n      expect(painLevels).toEqual([5, 7, 7]);\n    });\n\n    it('should handle error scenarios gracefully', async () => {\n      // Test saving invalid record\n      const invalidRecord = {\n        ...sampleRecords[0],\n        painLevel: 15 // Invalid pain level\n      };\n\n      await expect(dataManager.saveRecord(invalidRecord))\n        .rejects.toThrow('Record validation failed');\n\n      // Test updating non-existent record\n      await expect(dataManager.updateRecord('nonexistent', { painLevel: 5 }))\n        .rejects.toThrow('Record not found');\n\n      // Test deleting non-existent record\n      await expect(dataManager.deleteRecord('nonexistent'))\n        .rejects.toThrow('Record not found');\n\n      // Verify no data corruption occurred\n      const allRecords = await dataManager.getAllRecords();\n      expect(allRecords).toHaveLength(0);\n    });\n\n    it('should maintain data consistency across multiple operations', async () => {\n      // Perform sequential operations to avoid race conditions\n      const savedRecords: PainRecord[] = [];\n      for (const record of sampleRecords) {\n        const saved = await dataManager.saveRecord(record);\n        savedRecords.push(saved);\n      }\n\n      expect(savedRecords).toHaveLength(3);\n      expect(savedRecords.every(r => r.id)).toBe(true);\n\n      // Update multiple records sequentially\n      const updatedRecords: PainRecord[] = [];\n      for (let i = 0; i < savedRecords.length; i++) {\n        const updated = await dataManager.updateRecord(savedRecords[i].id, { painLevel: i + 1 });\n        updatedRecords.push(updated);\n      }\n\n      expect(updatedRecords[0].painLevel).toBe(1);\n      expect(updatedRecords[1].painLevel).toBe(2);\n      expect(updatedRecords[2].painLevel).toBe(3);\n\n      // Verify final state\n      const finalRecords = await dataManager.getAllRecords();\n      expect(finalRecords).toHaveLength(3);\n      \n      const painLevels = finalRecords.map(r => r.painLevel).sort();\n      expect(painLevels).toEqual([1, 2, 3]);\n    });\n\n    it('should handle large datasets efficiently', async () => {\n      // Create a larger dataset with valid dates\n      const largeDataset = [];\n      for (let i = 0; i < 20; i++) { // Reduced size for faster tests\n        const dayOfMonth = (i % 28) + 1; // Valid days 1-28\n        largeDataset.push({\n          ...sampleRecords[i % 3],\n          date: `2024-01-${String(dayOfMonth).padStart(2, '0')}`,\n          time: `${String((i % 24)).padStart(2, '0')}:${String((i * 15) % 60).padStart(2, '0')}`,\n          painLevel: (i % 10) + 1,\n          notes: `Record ${i + 1}`\n        });\n      }\n\n      // Save all records\n      const startTime = Date.now();\n      for (const record of largeDataset) {\n        await dataManager.saveRecord(record);\n      }\n      const saveTime = Date.now() - startTime;\n\n      // Verify all records saved\n      const allRecords = await dataManager.getAllRecords();\n      expect(allRecords).toHaveLength(20);\n\n      // Test filtering performance\n      const filterStartTime = Date.now();\n      const highPainRecords = await dataManager.getRecordsByPainLevel(8);\n      const filterTime = Date.now() - filterStartTime;\n\n      expect(highPainRecords.length).toBeGreaterThan(0);\n      \n      // Basic performance checks (should complete within reasonable time)\n      expect(saveTime).toBeLessThan(5000); // 5 seconds\n      expect(filterTime).toBeLessThan(100); // 100ms\n\n      // Test search performance\n      const searchStartTime = Date.now();\n      const searchResults = await dataManager.searchRecords('Record');\n      const searchTime = Date.now() - searchStartTime;\n\n      expect(searchResults).toHaveLength(20);\n      expect(searchTime).toBeLessThan(200); // 200ms\n    });\n  });\n\n  describe('Data Persistence', () => {\n    it('should persist data across manager instances', async () => {\n      // Save data with first instance\n      const firstManager = new PainDataManager();\n      await firstManager.saveRecord(sampleRecords[0]);\n      \n      // Create new instance and verify data persists\n      const secondManager = new PainDataManager();\n      const records = await secondManager.getAllRecords();\n      \n      expect(records).toHaveLength(1);\n      expect(records[0].painLevel).toBe(7);\n      expect(records[0].notes).toBe('Morning pain, severe cramping');\n    });\n\n    it('should handle storage quota scenarios', async () => {\n      // Mock storage quota exceeded\n      const originalSetItem = mockLocalStorage.setItem;\n      mockLocalStorage.setItem = jest.fn(() => {\n        const error = new DOMException('QuotaExceededError', 'QuotaExceededError');\n        Object.defineProperty(error, 'code', { value: 22 });\n        throw error;\n      });\n\n      await expect(dataManager.saveRecord(sampleRecords[0]))\n        .rejects.toThrow('Storage quota exceeded');\n\n      // Restore original function\n      mockLocalStorage.setItem = originalSetItem;\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/PainDataManager.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":456,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":456,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16075,16078],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16075,16078],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":458,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16182,16185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16182,16185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// PainDataManager Unit Tests\n// Comprehensive test suite for core data management functionality\nimport PainDataManager from '../data/PainDataManager';\nimport LocalStorageAdapter from '../storage/LocalStorageAdapter';\nimport ValidationService from '../validation/ValidationService';\nimport {\n  PainRecord,\n  PainTrackerError,\n  STORAGE_KEYS\n} from '../../../types/pain-tracker';\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n  length: 0,\n  key: jest.fn()\n};\n\nObject.defineProperty(global, 'localStorage', {\n  value: mockLocalStorage\n});\n\n// Mock navigator.storage\nObject.defineProperty(global, 'navigator', {\n  value: {\n    storage: {\n      estimate: jest.fn().mockResolvedValue({\n        usage: 1024,\n        quota: 5 * 1024 * 1024\n      })\n    }\n  }\n});\n\ndescribe('PainDataManager', () => {\n  let dataManager: PainDataManager;\n  let mockStorage: LocalStorageAdapter;\n  let mockValidation: ValidationService;\n\n  const sampleRecord = {\n    date: '2024-01-15',\n    time: '14:30',\n    painLevel: 7,\n    painTypes: ['cramping', 'aching'] as const,\n    locations: ['lower_abdomen', 'lower_back'] as const,\n    symptoms: ['nausea', 'fatigue'] as const,\n    menstrualStatus: 'day_2_3' as const,\n    medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n    effectiveness: 8,\n    lifestyleFactors: [\n      { factor: 'stress_level' as const, value: 6 },\n      { factor: 'sleep_hours' as const, value: 7 }\n    ],\n    notes: 'Severe cramping in the morning'\n  };\n\n  const samplePainRecord: PainRecord = {\n    ...sampleRecord,\n    id: 'test_id_123',\n    createdAt: new Date('2024-01-15T14:30:00Z'),\n    updatedAt: new Date('2024-01-15T14:30:00Z')\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockLocalStorage.getItem.mockReturnValue(null);\n    \n    mockStorage = new LocalStorageAdapter();\n    mockValidation = new ValidationService();\n    dataManager = new PainDataManager(mockStorage, mockValidation);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('saveRecord', () => {\n    it('should save a valid record successfully', async () => {\n      // Mock validation to return valid\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: true,\n        errors: [],\n        warnings: []\n      });\n\n      // Mock storage operations\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([]);\n      jest.spyOn(mockStorage, 'save').mockResolvedValue();\n      jest.spyOn(mockValidation, 'checkForDuplicates').mockReturnValue(false);\n\n      const result = await dataManager.saveRecord(sampleRecord);\n\n      expect(result).toMatchObject({\n        ...sampleRecord,\n        id: expect.any(String),\n        createdAt: expect.any(Date),\n        updatedAt: expect.any(Date)\n      });\n\n      expect(mockValidation.validateRecord).toHaveBeenCalledWith(sampleRecord);\n      expect(mockStorage.createAutoBackup).toHaveBeenCalled();\n      expect(mockStorage.save).toHaveBeenCalledWith(\n        STORAGE_KEYS.PAIN_RECORDS,\n        expect.arrayContaining([expect.objectContaining(sampleRecord)])\n      );\n    });\n\n    it('should throw validation error for invalid record', async () => {\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: false,\n        errors: [{ field: 'painLevel', message: 'Invalid pain level', code: 'OUT_OF_RANGE' }],\n        warnings: []\n      });\n\n      await expect(dataManager.saveRecord(sampleRecord)).rejects.toThrow(PainTrackerError);\n      await expect(dataManager.saveRecord(sampleRecord)).rejects.toThrow('Record validation failed');\n    });\n\n    it('should throw error for duplicate record', async () => {\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: true,\n        errors: [],\n        warnings: []\n      });\n\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([samplePainRecord]);\n      jest.spyOn(mockValidation, 'checkForDuplicates').mockReturnValue(true);\n\n      await expect(dataManager.saveRecord(sampleRecord)).rejects.toThrow(PainTrackerError);\n      await expect(dataManager.saveRecord(sampleRecord)).rejects.toThrow('Duplicate record detected');\n    });\n\n    it('should handle storage errors gracefully', async () => {\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: true,\n        errors: [],\n        warnings: []\n      });\n\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([]);\n      jest.spyOn(mockStorage, 'save').mockRejectedValue(new Error('Storage full'));\n      jest.spyOn(mockValidation, 'checkForDuplicates').mockReturnValue(false);\n\n      await expect(dataManager.saveRecord(sampleRecord)).rejects.toThrow(PainTrackerError);\n      await expect(dataManager.saveRecord(sampleRecord)).rejects.toThrow('Failed to save pain record');\n    });\n  });\n\n  describe('updateRecord', () => {\n    it('should update an existing record successfully', async () => {\n      const updates = { painLevel: 5, notes: 'Updated notes' };\n      \n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([samplePainRecord]);\n      jest.spyOn(mockStorage, 'save').mockResolvedValue();\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: true,\n        errors: [],\n        warnings: []\n      });\n\n      const result = await dataManager.updateRecord('test_id_123', updates);\n\n      expect(result).toMatchObject({\n        ...samplePainRecord,\n        ...updates,\n        updatedAt: expect.any(Date)\n      });\n\n      expect(mockStorage.save).toHaveBeenCalledWith(\n        STORAGE_KEYS.PAIN_RECORDS,\n        expect.arrayContaining([expect.objectContaining(updates)])\n      );\n    });\n\n    it('should throw error when record not found', async () => {\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([]);\n\n      await expect(dataManager.updateRecord('nonexistent_id', { painLevel: 5 }))\n        .rejects.toThrow(PainTrackerError);\n      await expect(dataManager.updateRecord('nonexistent_id', { painLevel: 5 }))\n        .rejects.toThrow('Record not found');\n    });\n\n    it('should throw validation error for invalid updates', async () => {\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([samplePainRecord]);\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: false,\n        errors: [{ field: 'painLevel', message: 'Invalid pain level', code: 'OUT_OF_RANGE' }],\n        warnings: []\n      });\n\n      await expect(dataManager.updateRecord('test_id_123', { painLevel: 15 }))\n        .rejects.toThrow(PainTrackerError);\n      await expect(dataManager.updateRecord('test_id_123', { painLevel: 15 }))\n        .rejects.toThrow('Updated record validation failed');\n    });\n  });\n\n  describe('deleteRecord', () => {\n    it('should delete an existing record successfully', async () => {\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([samplePainRecord]);\n      jest.spyOn(mockStorage, 'save').mockResolvedValue();\n\n      await dataManager.deleteRecord('test_id_123');\n\n      expect(mockStorage.save).toHaveBeenCalledWith(STORAGE_KEYS.PAIN_RECORDS, []);\n    });\n\n    it('should throw error when record not found', async () => {\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([]);\n\n      await expect(dataManager.deleteRecord('nonexistent_id'))\n        .rejects.toThrow(PainTrackerError);\n      await expect(dataManager.deleteRecord('nonexistent_id'))\n        .rejects.toThrow('Record not found');\n    });\n  });\n\n  describe('getRecord', () => {\n    it('should retrieve an existing record by ID', async () => {\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([samplePainRecord]);\n\n      const result = await dataManager.getRecord('test_id_123');\n\n      expect(result).toEqual(samplePainRecord);\n    });\n\n    it('should return null for non-existent record', async () => {\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([]);\n\n      const result = await dataManager.getRecord('nonexistent_id');\n\n      expect(result).toBeNull();\n    });\n  });\n\n  describe('getAllRecords', () => {\n    it('should retrieve all records', async () => {\n      const records = [samplePainRecord];\n      jest.spyOn(mockStorage, 'load').mockResolvedValue(records);\n\n      const result = await dataManager.getAllRecords();\n\n      expect(result).toEqual(records);\n    });\n\n    it('should return empty array when no records exist', async () => {\n      jest.spyOn(mockStorage, 'load').mockResolvedValue(null);\n\n      const result = await dataManager.getAllRecords();\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle storage errors', async () => {\n      jest.spyOn(mockStorage, 'load').mockRejectedValue(new Error('Storage error'));\n\n      await expect(dataManager.getAllRecords()).rejects.toThrow(PainTrackerError);\n      await expect(dataManager.getAllRecords()).rejects.toThrow('Failed to retrieve pain records');\n    });\n  });\n\n  describe('getRecordsByDateRange', () => {\n    it('should filter records by date range', async () => {\n      const record1 = { ...samplePainRecord, id: '1', date: '2024-01-10' };\n      const record2 = { ...samplePainRecord, id: '2', date: '2024-01-15' };\n      const record3 = { ...samplePainRecord, id: '3', date: '2024-01-20' };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2, record3]);\n\n      const startDate = new Date('2024-01-12');\n      const endDate = new Date('2024-01-18');\n      \n      const result = await dataManager.getRecordsByDateRange(startDate, endDate);\n\n      expect(result).toHaveLength(1);\n      expect(result[0].id).toBe('2');\n    });\n\n    it('should return records sorted by date descending', async () => {\n      const record1 = { ...samplePainRecord, id: '1', date: '2024-01-10' };\n      const record2 = { ...samplePainRecord, id: '2', date: '2024-01-20' };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2]);\n\n      const startDate = new Date('2024-01-01');\n      const endDate = new Date('2024-01-31');\n      \n      const result = await dataManager.getRecordsByDateRange(startDate, endDate);\n\n      expect(result[0].id).toBe('2'); // Most recent first\n      expect(result[1].id).toBe('1');\n    });\n  });\n\n  describe('getRecordsByPainLevel', () => {\n    it('should filter records by minimum pain level', async () => {\n      const record1 = { ...samplePainRecord, id: '1', painLevel: 3 };\n      const record2 = { ...samplePainRecord, id: '2', painLevel: 7 };\n      const record3 = { ...samplePainRecord, id: '3', painLevel: 9 };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2, record3]);\n\n      const result = await dataManager.getRecordsByPainLevel(6);\n\n      expect(result).toHaveLength(2);\n      expect(result.map(r => r.id)).toEqual(['3', '2']); // Sorted by pain level descending\n    });\n\n    it('should filter records by pain level range', async () => {\n      const record1 = { ...samplePainRecord, id: '1', painLevel: 3 };\n      const record2 = { ...samplePainRecord, id: '2', painLevel: 7 };\n      const record3 = { ...samplePainRecord, id: '3', painLevel: 9 };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2, record3]);\n\n      const result = await dataManager.getRecordsByPainLevel(5, 8);\n\n      expect(result).toHaveLength(1);\n      expect(result[0].id).toBe('2');\n    });\n  });\n\n  describe('getRecordsByMenstrualStatus', () => {\n    it('should filter records by menstrual status', async () => {\n      const record1 = { ...samplePainRecord, id: '1', menstrualStatus: 'day_1' as const };\n      const record2 = { ...samplePainRecord, id: '2', menstrualStatus: 'day_2_3' as const };\n      const record3 = { ...samplePainRecord, id: '3', menstrualStatus: 'day_2_3' as const };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2, record3]);\n\n      const result = await dataManager.getRecordsByMenstrualStatus('day_2_3');\n\n      expect(result).toHaveLength(2);\n      expect(result.map(r => r.id)).toEqual(['2', '3']);\n    });\n  });\n\n  describe('searchRecords', () => {\n    it('should search records by notes', async () => {\n      const record1 = { ...samplePainRecord, id: '1', notes: 'Severe cramping' };\n      const record2 = { ...samplePainRecord, id: '2', notes: 'Mild discomfort' };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2]);\n\n      const result = await dataManager.searchRecords('severe');\n\n      expect(result).toHaveLength(1);\n      expect(result[0].id).toBe('1');\n    });\n\n    it('should search records by pain types', async () => {\n      const record1 = { ...samplePainRecord, id: '1', painTypes: ['cramping'] };\n      const record2 = { ...samplePainRecord, id: '2', painTypes: ['sharp'] };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2]);\n\n      const result = await dataManager.searchRecords('sharp');\n\n      expect(result).toHaveLength(1);\n      expect(result[0].id).toBe('2');\n    });\n\n    it('should search records by medications', async () => {\n      const record1 = { \n        ...samplePainRecord, \n        id: '1', \n        medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }] \n      };\n      const record2 = { \n        ...samplePainRecord, \n        id: '2', \n        medications: [{ name: 'Acetaminophen', dosage: '500mg', timing: 'before pain' }] \n      };\n      \n      jest.spyOn(mockStorage, 'load').mockResolvedValue([record1, record2]);\n\n      const result = await dataManager.searchRecords('ibuprofen');\n\n      expect(result).toHaveLength(1);\n      expect(result[0].id).toBe('1');\n    });\n\n    it('should return all records for empty query', async () => {\n      const records = [samplePainRecord];\n      jest.spyOn(mockStorage, 'load').mockResolvedValue(records);\n\n      const result = await dataManager.searchRecords('');\n\n      expect(result).toEqual(records);\n    });\n  });\n\n  describe('exportData', () => {\n    it('should export all pain tracker data', async () => {\n      const records = [samplePainRecord];\n      const preferences = { theme: 'light' };\n      const metadata = { version: '1.0.0' };\n      const schemaVersion = 1;\n\n      jest.spyOn(mockStorage, 'load')\n        .mockResolvedValueOnce(records)\n        .mockResolvedValueOnce(preferences)\n        .mockResolvedValueOnce(metadata)\n        .mockResolvedValueOnce(schemaVersion);\n\n      const result = await dataManager.exportData();\n\n      expect(result).toMatchObject({\n        records,\n        preferences,\n        metadata,\n        schemaVersion,\n        lastBackup: expect.any(Date)\n      });\n    });\n  });\n\n  describe('importData', () => {\n    it('should import valid data successfully', async () => {\n      const importData = {\n        records: [samplePainRecord],\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {}\n      };\n\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'restore').mockResolvedValue();\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: true,\n        errors: [],\n        warnings: []\n      });\n\n      await dataManager.importData(importData);\n\n      expect(mockStorage.createAutoBackup).toHaveBeenCalled();\n      expect(mockStorage.restore).toHaveBeenCalledWith(JSON.stringify(importData));\n    });\n\n    it('should throw error for invalid import data', async () => {\n      const invalidData = { invalid: 'data' };\n\n      await expect(dataManager.importData(invalidData as any))\n        .rejects.toThrow(PainTrackerError);\n      await expect(dataManager.importData(invalidData as any))\n        .rejects.toThrow('Invalid import data format');\n    });\n\n    it('should throw error for invalid records in import data', async () => {\n      const importData = {\n        records: [{ ...samplePainRecord, painLevel: 15 }], // Invalid pain level\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {}\n      };\n\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockValidation, 'validateRecord').mockReturnValue({\n        isValid: false,\n        errors: [{ field: 'painLevel', message: 'Invalid pain level', code: 'OUT_OF_RANGE' }],\n        warnings: []\n      });\n\n      await expect(dataManager.importData(importData))\n        .rejects.toThrow(PainTrackerError);\n      await expect(dataManager.importData(importData))\n        .rejects.toThrow('Import data contains invalid records');\n    });\n  });\n\n  describe('clearAllData', () => {\n    it('should clear all data successfully', async () => {\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'clear').mockResolvedValue();\n\n      await dataManager.clearAllData();\n\n      expect(mockStorage.createAutoBackup).toHaveBeenCalled();\n      expect(mockStorage.clear).toHaveBeenCalled();\n    });\n  });\n\n  describe('getDataStatistics', () => {\n    it('should calculate statistics for existing records', async () => {\n      const records = [\n        { ...samplePainRecord, id: '1', date: '2024-01-10', painLevel: 5 },\n        { ...samplePainRecord, id: '2', date: '2024-01-15', painLevel: 7 },\n        { ...samplePainRecord, id: '3', date: '2024-01-20', painLevel: 3 }\n      ];\n\n      jest.spyOn(mockStorage, 'load').mockResolvedValue(records);\n      jest.spyOn(mockStorage, 'getSize').mockResolvedValue(1024);\n\n      const result = await dataManager.getDataStatistics();\n\n      expect(result).toMatchObject({\n        totalRecords: 3,\n        dateRange: {\n          start: new Date('2024-01-10'),\n          end: new Date('2024-01-20')\n        },\n        averagePainLevel: 5.0,\n        storageSize: 1024\n      });\n    });\n\n    it('should handle empty records', async () => {\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([]);\n      jest.spyOn(mockStorage, 'getSize').mockResolvedValue(0);\n\n      const result = await dataManager.getDataStatistics();\n\n      expect(result).toMatchObject({\n        totalRecords: 0,\n        dateRange: { start: null, end: null },\n        averagePainLevel: 0,\n        storageSize: 0\n      });\n    });\n  });\n\n  describe('performDataCleanup', () => {\n    it('should remove duplicate records', async () => {\n      const duplicateRecord1 = { \n        ...samplePainRecord, \n        id: '1', \n        date: '2024-01-15', \n        time: '14:30', \n        painLevel: 7 \n      };\n      const duplicateRecord2 = { \n        ...samplePainRecord, \n        id: '2', \n        date: '2024-01-15', \n        time: '14:30', \n        painLevel: 7 \n      };\n      const uniqueRecord = { \n        ...samplePainRecord, \n        id: '3', \n        date: '2024-01-16', \n        time: '10:00', \n        painLevel: 5 \n      };\n\n      jest.spyOn(mockStorage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(mockStorage, 'load').mockResolvedValue([duplicateRecord1, duplicateRecord2, uniqueRecord]);\n      jest.spyOn(mockStorage, 'save').mockResolvedValue();\n      jest.spyOn(mockStorage, 'cleanupOldBackups').mockResolvedValue();\n      jest.spyOn(mockStorage, 'getSize').mockResolvedValue(512);\n\n      const result = await dataManager.performDataCleanup();\n\n      expect(result.removedRecords).toBe(1);\n      expect(result.optimizedSize).toBe(512);\n      expect(mockStorage.save).toHaveBeenCalledWith(\n        STORAGE_KEYS.PAIN_RECORDS,\n        expect.arrayContaining([duplicateRecord1, uniqueRecord])\n      );\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/Performance.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/UserWorkflows.integration.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PainRecord' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// User Workflows Integration Tests\n// End-to-end testing of complete user journeys through the pain tracker\n\nimport PainDataManager from '../data/PainDataManager';\nimport LocalStorageAdapter from '../storage/LocalStorageAdapter';\nimport ValidationService from '../validation/ValidationService';\nimport { AnalyticsEngine } from '../analytics/AnalyticsEngine';\nimport { ExportManager } from '../export/ExportManager';\nimport {\n  PainRecord,\n  PainType,\n  MenstrualStatus,\n  Symptom\n} from '../../../types/pain-tracker';\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n  length: 0,\n  key: jest.fn()\n};\n\nObject.defineProperty(global, 'localStorage', {\n  value: mockLocalStorage\n});\n\n// Mock navigator.storage\nObject.defineProperty(global, 'navigator', {\n  value: {\n    storage: {\n      estimate: jest.fn().mockResolvedValue({\n        usage: 1024,\n        quota: 5 * 1024 * 1024\n      })\n    }\n  }\n});\n\n// Mock Chart.js\njest.mock('chart.js', () => ({\n  Chart: {\n    register: jest.fn(),\n  },\n  CategoryScale: jest.fn(),\n  LinearScale: jest.fn(),\n  PointElement: jest.fn(),\n  LineElement: jest.fn(),\n  Title: jest.fn(),\n  Tooltip: jest.fn(),\n  Legend: jest.fn(),\n}));\n\ndescribe('Pain Tracker User Workflows', () => {\n  let dataManager: PainDataManager;\n  let analyticsEngine: AnalyticsEngine;\n  let exportManager: ExportManager;\n  let storage: LocalStorageAdapter;\n  let validation: ValidationService;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockLocalStorage.getItem.mockReturnValue(null);\n    \n    storage = new LocalStorageAdapter();\n    validation = new ValidationService();\n    dataManager = new PainDataManager(storage, validation);\n    analyticsEngine = new AnalyticsEngine();\n    exportManager = new ExportManager();\n  });\n\n  describe('Complete Pain Tracking Workflow', () => {\n    it('should handle complete user journey from recording to export', async () => {\n      // Step 1: User records their first pain entry\n      const firstRecord = {\n        date: '2024-01-15',\n        time: '09:30',\n        painLevel: 8,\n        painTypes: ['cramping', 'aching'] as PainType[],\n        locations: ['lower_abdomen', 'lower_back'],\n        symptoms: ['nausea', 'fatigue'] as Symptom[],\n        menstrualStatus: 'day_1' as MenstrualStatus,\n        medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n        effectiveness: 7,\n        lifestyleFactors: [\n          { factor: 'stress_level' as const, value: 8 },\n          { factor: 'sleep_hours' as const, value: 6 }\n        ],\n        notes: 'Severe cramping started early morning'\n      };\n\n      // Mock storage operations\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'load').mockResolvedValue([]);\n      jest.spyOn(storage, 'save').mockResolvedValue();\n\n      const savedRecord = await dataManager.saveRecord(firstRecord);\n      \n      expect(savedRecord).toMatchObject({\n        ...firstRecord,\n        id: expect.any(String),\n        createdAt: expect.any(Date),\n        updatedAt: expect.any(Date)\n      });\n\n      // Step 2: User adds more records over time\n      const additionalRecords = [\n        {\n          date: '2024-01-16',\n          time: '14:00',\n          painLevel: 6,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: ['bloating'] as Symptom[],\n          menstrualStatus: 'day_2_3' as MenstrualStatus,\n          medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n          effectiveness: 8,\n          lifestyleFactors: [],\n          notes: 'Better than yesterday'\n        },\n        {\n          date: '2024-01-17',\n          time: '11:15',\n          painLevel: 4,\n          painTypes: ['aching'] as PainType[],\n          locations: ['lower_back'],\n          symptoms: ['fatigue'] as Symptom[],\n          menstrualStatus: 'day_2_3' as MenstrualStatus,\n          medications: [{ name: 'Acetaminophen', dosage: '500mg', timing: 'during pain' }],\n          effectiveness: 6,\n          lifestyleFactors: [],\n          notes: 'Mild discomfort'\n        }\n      ];\n\n      const allRecords = [savedRecord];\n      for (const record of additionalRecords) {\n        jest.spyOn(storage, 'load').mockResolvedValue(allRecords);\n        const newRecord = await dataManager.saveRecord(record);\n        allRecords.push(newRecord);\n      }\n\n      expect(allRecords).toHaveLength(3);\n\n      // Step 3: User views their history with filtering\n      jest.spyOn(storage, 'load').mockResolvedValue(allRecords);\n      \n      const allUserRecords = await dataManager.getAllRecords();\n      expect(allUserRecords).toHaveLength(3);\n\n      const highPainRecords = await dataManager.getRecordsByPainLevel(6);\n      expect(highPainRecords).toHaveLength(2);\n\n      const day1Records = await dataManager.getRecordsByMenstrualStatus('day_1');\n      expect(day1Records).toHaveLength(1);\n\n      // Step 4: User generates analytics\n      const analytics = analyticsEngine.calculateAnalytics(allRecords);\n      \n      expect(analytics.totalRecords).toBe(3);\n      expect(analytics.averagePainLevel).toBeCloseTo(6.0, 1);\n      expect(analytics.commonPainTypes.length).toBeGreaterThan(0);\n      expect(analytics.effectiveTreatments.length).toBeGreaterThan(0);\n      expect(analytics.cyclePatterns.length).toBeGreaterThan(0);\n      expect(analytics.insights.length).toBeGreaterThan(0);\n\n      // Step 5: User exports their data\n      const exportOptions = {\n        format: 'html' as const,\n        dateRange: {\n          start: new Date('2024-01-01'),\n          end: new Date('2024-01-31')\n        },\n        includeCharts: true,\n        includeSummary: true,\n        includeInsights: true\n      };\n\n      const exportedHTML = await exportManager.exportToHTML(allRecords, analytics, exportOptions);\n      \n      expect(exportedHTML).toContain('Pain Tracking Report');\n      expect(exportedHTML).toContain('Total Records: 3');\n      expect(exportedHTML).toContain('Average Pain Level');\n      expect(exportedHTML).toContain(firstRecord.notes);\n\n      // Step 6: User updates an existing record\n      const updatedRecord = await dataManager.updateRecord(savedRecord.id, {\n        painLevel: 7,\n        notes: 'Updated: Severe cramping started early morning, improved with medication'\n      });\n\n      expect(updatedRecord.painLevel).toBe(7);\n      expect(updatedRecord.notes).toContain('Updated:');\n      expect(updatedRecord.updatedAt).not.toEqual(updatedRecord.createdAt);\n    });\n\n    it('should handle data backup and recovery workflow', async () => {\n      // Step 1: User creates multiple records\n      const records = [\n        {\n          date: '2024-01-15',\n          time: '09:30',\n          painLevel: 8,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: ['nausea'] as Symptom[],\n          menstrualStatus: 'day_1' as MenstrualStatus,\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: 'First record'\n        },\n        {\n          date: '2024-01-16',\n          time: '10:00',\n          painLevel: 6,\n          painTypes: ['aching'] as PainType[],\n          locations: ['lower_back'],\n          symptoms: ['fatigue'] as Symptom[],\n          menstrualStatus: 'day_2_3' as MenstrualStatus,\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: 'Second record'\n        }\n      ];\n\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'load').mockResolvedValue([]);\n      jest.spyOn(storage, 'save').mockResolvedValue();\n\n      const savedRecords = [];\n      for (const record of records) {\n        jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n        const saved = await dataManager.saveRecord(record);\n        savedRecords.push(saved);\n      }\n\n      // Step 2: User exports data for backup\n      const exportData = await dataManager.exportData();\n      \n      expect(exportData.records).toHaveLength(2);\n      expect(exportData.lastBackup).toBeInstanceOf(Date);\n\n      // Step 3: User clears all data (simulating data loss)\n      jest.spyOn(storage, 'clear').mockResolvedValue();\n      await dataManager.clearAllData();\n\n      // Step 4: User imports data from backup\n      jest.spyOn(storage, 'restore').mockResolvedValue();\n      await dataManager.importData(exportData);\n\n      expect(storage.restore).toHaveBeenCalledWith(JSON.stringify(exportData));\n    });\n\n    it('should handle search and filtering workflow', async () => {\n      // Create diverse records for testing search\n      const searchTestRecords = [\n        {\n          date: '2024-01-15',\n          time: '09:30',\n          painLevel: 8,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: ['nausea'] as Symptom[],\n          menstrualStatus: 'day_1' as MenstrualStatus,\n          medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n          effectiveness: 7,\n          lifestyleFactors: [],\n          notes: 'Severe cramping with nausea'\n        },\n        {\n          date: '2024-01-16',\n          time: '14:00',\n          painLevel: 5,\n          painTypes: ['aching'] as PainType[],\n          locations: ['lower_back'],\n          symptoms: ['headache'] as Symptom[],\n          menstrualStatus: 'day_2_3' as MenstrualStatus,\n          medications: [{ name: 'Acetaminophen', dosage: '500mg', timing: 'during pain' }],\n          effectiveness: 6,\n          lifestyleFactors: [],\n          notes: 'Back pain with headache'\n        },\n        {\n          date: '2024-01-20',\n          time: '16:00',\n          painLevel: 3,\n          painTypes: ['pressure'] as PainType[],\n          locations: ['pelvis'],\n          symptoms: ['mood_changes'] as Symptom[],\n          menstrualStatus: 'mid_cycle' as MenstrualStatus,\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: 'Ovulation discomfort'\n        }\n      ];\n\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'save').mockResolvedValue();\n\n      const savedRecords = [];\n      for (const record of searchTestRecords) {\n        jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n        const saved = await dataManager.saveRecord(record);\n        savedRecords.push(saved);\n      }\n\n      jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n\n      // Test search by notes\n      const nauseaResults = await dataManager.searchRecords('nausea');\n      expect(nauseaResults).toHaveLength(1);\n      expect(nauseaResults[0].notes).toContain('nausea');\n\n      // Test search by pain type\n      const crampingResults = await dataManager.searchRecords('cramping');\n      expect(crampingResults).toHaveLength(1);\n      expect(crampingResults[0].painTypes).toContain('cramping');\n\n      // Test search by medication\n      const ibuprofenResults = await dataManager.searchRecords('ibuprofen');\n      expect(ibuprofenResults).toHaveLength(1);\n      expect(ibuprofenResults[0].medications[0].name).toBe('Ibuprofen');\n\n      // Test date range filtering\n      const dateRangeResults = await dataManager.getRecordsByDateRange(\n        new Date('2024-01-15'),\n        new Date('2024-01-16')\n      );\n      expect(dateRangeResults).toHaveLength(2);\n\n      // Test pain level filtering\n      const highPainResults = await dataManager.getRecordsByPainLevel(6);\n      expect(highPainResults).toHaveLength(1);\n      expect(highPainResults[0].painLevel).toBe(8);\n\n      // Test menstrual status filtering\n      const midCycleResults = await dataManager.getRecordsByMenstrualStatus('mid_cycle');\n      expect(midCycleResults).toHaveLength(1);\n      expect(midCycleResults[0].menstrualStatus).toBe('mid_cycle');\n    });\n\n    it('should handle analytics and insights workflow', async () => {\n      // Create records with patterns for analytics testing\n      const patternRecords = [];\n      \n      // Create a month of records with menstrual cycle pattern\n      for (let day = 1; day <= 30; day++) {\n        let menstrualStatus: MenstrualStatus;\n        let painLevel: number;\n        \n        if (day <= 3) {\n          menstrualStatus = day === 1 ? 'day_1' : 'day_2_3';\n          painLevel = 8 - day; // Decreasing pain\n        } else if (day >= 14 && day <= 16) {\n          menstrualStatus = 'mid_cycle';\n          painLevel = 3; // Ovulation pain\n        } else if (day >= 28) {\n          menstrualStatus = 'before_period';\n          painLevel = 6; // PMS pain\n        } else {\n          menstrualStatus = 'after_period';\n          painLevel = 1; // Minimal pain\n        }\n\n        patternRecords.push({\n          date: `2024-01-${String(day).padStart(2, '0')}`,\n          time: '10:00',\n          painLevel,\n          painTypes: painLevel > 5 ? ['cramping'] as PainType[] : ['aching'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: painLevel > 6 ? ['nausea'] as Symptom[] : [] as Symptom[],\n          menstrualStatus,\n          medications: painLevel > 5 ? [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }] : [],\n          effectiveness: painLevel > 5 ? 8 : 0,\n          lifestyleFactors: [],\n          notes: `Day ${day} of cycle`\n        });\n      }\n\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'save').mockResolvedValue();\n\n      const savedRecords = [];\n      for (const record of patternRecords) {\n        jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n        const saved = await dataManager.saveRecord(record);\n        savedRecords.push(saved);\n      }\n\n      // Generate analytics\n      const analytics = analyticsEngine.calculateAnalytics(savedRecords);\n      \n      expect(analytics.totalRecords).toBe(30);\n      expect(analytics.averagePainLevel).toBeGreaterThan(0);\n      expect(analytics.commonPainTypes.length).toBeGreaterThan(0);\n      expect(analytics.cyclePatterns.length).toBeGreaterThan(0);\n      expect(analytics.trendData.length).toBe(30);\n\n      // Check cycle patterns\n      const day1Pattern = analytics.cyclePatterns.find(p => p.phase === 'day_1');\n      expect(day1Pattern).toBeDefined();\n      expect(day1Pattern!.averagePainLevel).toBe(8);\n\n      const midCyclePattern = analytics.cyclePatterns.find(p => p.phase === 'mid_cycle');\n      expect(midCyclePattern).toBeDefined();\n      expect(midCyclePattern!.averagePainLevel).toBe(3);\n\n      // Generate insights\n      const insights = analyticsEngine.generateInsights(analytics);\n      expect(insights.length).toBeGreaterThan(0);\n      expect(insights.some(insight => insight.includes('cycle'))).toBe(true);\n\n      // Identify patterns\n      const patterns = analyticsEngine.identifyPatterns(savedRecords);\n      expect(patterns.length).toBeGreaterThan(0);\n      expect(patterns.some(pattern => pattern.type === 'menstrual_cycle')).toBe(true);\n\n      // Generate predictions\n      const predictions = analyticsEngine.predictTrends(savedRecords);\n      expect(predictions.length).toBe(7); // 7-day prediction\n      predictions.forEach(prediction => {\n        expect(prediction.painLevel).toBeGreaterThanOrEqual(0);\n        expect(prediction.painLevel).toBeLessThanOrEqual(10);\n      });\n    });\n\n    it('should handle export workflow with different formats', async () => {\n      const exportRecords = [\n        {\n          date: '2024-01-15',\n          time: '09:30',\n          painLevel: 8,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: ['nausea'] as Symptom[],\n          menstrualStatus: 'day_1' as MenstrualStatus,\n          medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n          effectiveness: 7,\n          lifestyleFactors: [],\n          notes: 'Severe cramping'\n        }\n      ];\n\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'load').mockResolvedValue([]);\n      jest.spyOn(storage, 'save').mockResolvedValue();\n\n      const savedRecord = await dataManager.saveRecord(exportRecords[0]);\n      const analytics = analyticsEngine.calculateAnalytics([savedRecord]);\n\n      // Test HTML export\n      const htmlOptions = {\n        format: 'html' as const,\n        dateRange: {\n          start: new Date('2024-01-01'),\n          end: new Date('2024-01-31')\n        },\n        includeCharts: true,\n        includeSummary: true,\n        includeInsights: true\n      };\n\n      const htmlExport = await exportManager.exportToHTML([savedRecord], analytics, htmlOptions);\n      \n      expect(htmlExport).toContain('<!DOCTYPE html>');\n      expect(htmlExport).toContain('Pain Tracking Report');\n      expect(htmlExport).toContain('Severe cramping');\n      expect(htmlExport).toContain('Total Records: 1');\n\n      // Test PDF export\n      const pdfOptions = {\n        format: 'pdf' as const,\n        dateRange: {\n          start: new Date('2024-01-01'),\n          end: new Date('2024-01-31')\n        },\n        includeCharts: false, // Simplified for testing\n        includeSummary: true,\n        includeInsights: true\n      };\n\n      const pdfBlob = await exportManager.exportToPDF([savedRecord], analytics, pdfOptions);\n      \n      expect(pdfBlob).toBeInstanceOf(Blob);\n      expect(pdfBlob.type).toBe('application/pdf');\n\n      // Test medical summary generation\n      const medicalSummary = exportManager.generateMedicalSummary([savedRecord], analytics);\n      \n      expect(medicalSummary.patientSummary).toContain('pain tracking');\n      expect(medicalSummary.keyFindings.length).toBeGreaterThan(0);\n      expect(medicalSummary.recommendations.length).toBeGreaterThan(0);\n      expect(medicalSummary.dataQuality.completeness).toBeGreaterThan(0);\n    });\n\n    it('should handle error scenarios gracefully', async () => {\n      // Test validation errors\n      const invalidRecord = {\n        date: '2024-01-15',\n        time: '09:30',\n        painLevel: 15, // Invalid pain level\n        painTypes: ['cramping'] as PainType[],\n        locations: ['lower_abdomen'],\n        symptoms: [] as Symptom[],\n        menstrualStatus: 'day_1' as MenstrualStatus,\n        medications: [],\n        effectiveness: 0,\n        lifestyleFactors: [],\n        notes: ''\n      };\n\n      await expect(dataManager.saveRecord(invalidRecord))\n        .rejects.toThrow('Record validation failed');\n\n      // Test storage errors\n      jest.spyOn(storage, 'save').mockRejectedValue(new Error('Storage full'));\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'load').mockResolvedValue([]);\n\n      const validRecord = {\n        date: '2024-01-15',\n        time: '09:30',\n        painLevel: 7,\n        painTypes: ['cramping'] as PainType[],\n        locations: ['lower_abdomen'],\n        symptoms: [] as Symptom[],\n        menstrualStatus: 'day_1' as MenstrualStatus,\n        medications: [],\n        effectiveness: 0,\n        lifestyleFactors: [],\n        notes: 'Test record'\n      };\n\n      await expect(dataManager.saveRecord(validRecord))\n        .rejects.toThrow('Failed to save pain record');\n\n      // Test analytics with empty data\n      const emptyAnalytics = analyticsEngine.calculateAnalytics([]);\n      expect(emptyAnalytics.totalRecords).toBe(0);\n      expect(emptyAnalytics.insights).toContain('No data available yet');\n\n      // Test export with no data\n      const emptyExportOptions = {\n        format: 'html' as const,\n        dateRange: {\n          start: new Date('2024-01-01'),\n          end: new Date('2024-01-31')\n        },\n        includeCharts: false,\n        includeSummary: true,\n        includeInsights: true\n      };\n\n      const emptyExport = await exportManager.exportToHTML([], emptyAnalytics, emptyExportOptions);\n      expect(emptyExport).toContain('No pain records found');\n    });\n  });\n\n  describe('Performance and Data Management', () => {\n    it('should handle large datasets efficiently', async () => {\n      // Create a large dataset\n      const largeDataset = [];\n      for (let i = 0; i < 1000; i++) {\n        largeDataset.push({\n          date: `2024-01-${String((i % 30) + 1).padStart(2, '0')}`,\n          time: '10:00',\n          painLevel: Math.floor(Math.random() * 10) + 1,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: [] as Symptom[],\n          menstrualStatus: 'day_1' as MenstrualStatus,\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: `Record ${i}`\n        });\n      }\n\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'save').mockResolvedValue();\n      jest.spyOn(storage, 'load').mockResolvedValue([]);\n\n      // Test that operations complete within reasonable time\n      const startTime = Date.now();\n      \n      // Save first few records to test performance\n      const savedRecords = [];\n      for (let i = 0; i < 10; i++) {\n        jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n        const saved = await dataManager.saveRecord(largeDataset[i]);\n        savedRecords.push(saved);\n      }\n\n      const saveTime = Date.now() - startTime;\n      expect(saveTime).toBeLessThan(5000); // Should complete within 5 seconds\n\n      // Test analytics performance with larger dataset\n      const analyticsStartTime = Date.now();\n      const analytics = analyticsEngine.calculateAnalytics(savedRecords);\n      const analyticsTime = Date.now() - analyticsStartTime;\n      \n      expect(analyticsTime).toBeLessThan(1000); // Should complete within 1 second\n      expect(analytics.totalRecords).toBe(10);\n    });\n\n    it('should handle data cleanup operations', async () => {\n      // Create records with duplicates\n      const recordsWithDuplicates = [\n        {\n          date: '2024-01-15',\n          time: '09:30',\n          painLevel: 7,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: [] as Symptom[],\n          menstrualStatus: 'day_1' as MenstrualStatus,\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: 'Original record'\n        },\n        {\n          date: '2024-01-15',\n          time: '09:30',\n          painLevel: 7,\n          painTypes: ['cramping'] as PainType[],\n          locations: ['lower_abdomen'],\n          symptoms: [] as Symptom[],\n          menstrualStatus: 'day_1' as MenstrualStatus,\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: 'Duplicate record'\n        }\n      ];\n\n      jest.spyOn(storage, 'createAutoBackup').mockResolvedValue();\n      jest.spyOn(storage, 'save').mockResolvedValue();\n      jest.spyOn(storage, 'cleanupOldBackups').mockResolvedValue();\n      jest.spyOn(storage, 'getSize').mockResolvedValue(1024);\n\n      const savedRecords = [];\n      for (const record of recordsWithDuplicates) {\n        jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n        const saved = await dataManager.saveRecord(record);\n        savedRecords.push(saved);\n      }\n\n      // Perform data cleanup\n      jest.spyOn(storage, 'load').mockResolvedValue(savedRecords);\n      const cleanupResult = await dataManager.performDataCleanup();\n\n      expect(cleanupResult.removedRecords).toBeGreaterThanOrEqual(0);\n      expect(cleanupResult.optimizedSize).toBe(1024);\n      expect(storage.cleanupOldBackups).toHaveBeenCalled();\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/ValidationService.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ValidationResult' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2316,2319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2316,2319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2358,2361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2358,2361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2400,2403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2400,2403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4533,4536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4533,4536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5009,5012],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5009,5012],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5485,5488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5485,5488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5970,5973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5970,5973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":268,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8582,8585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8582,8585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":419,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":419,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13520,13523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13520,13523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13594,13597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13594,13597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":477,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":477,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15524,15527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15524,15527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":483,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":483,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15729,15732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15729,15732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":490,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":490,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15987,15990],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15987,15990],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ValidationService Unit Tests\n// Comprehensive test suite for data validation functionality\n\nimport ValidationService from '../validation/ValidationService';\nimport {\n  PainRecord,\n  ValidationResult,\n  PainType,\n  MenstrualStatus,\n  Symptom\n} from '../../../types/pain-tracker';\n\ndescribe('ValidationService', () => {\n  let validationService: ValidationService;\n\n  const validRecord = {\n    date: '2024-01-15',\n    time: '14:30',\n    painLevel: 7,\n    painTypes: ['cramping', 'aching'] as PainType[],\n    locations: ['lower_abdomen', 'lower_back'],\n    symptoms: ['nausea', 'fatigue'] as Symptom[],\n    menstrualStatus: 'day_2_3' as MenstrualStatus,\n    medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n    effectiveness: 8,\n    lifestyleFactors: [\n      { factor: 'stress_level' as const, value: 6 },\n      { factor: 'sleep_hours' as const, value: 7 }\n    ],\n    notes: 'Severe cramping in the morning'\n  };\n\n  beforeEach(() => {\n    validationService = new ValidationService();\n  });\n\n  describe('validateRecord', () => {\n    it('should validate a correct record', () => {\n      const result = validationService.validateRecord(validRecord);\n      \n      expect(result.isValid).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.warnings).toHaveLength(0);\n    });\n\n    it('should reject record with invalid pain level', () => {\n      const invalidRecord = { ...validRecord, painLevel: 15 };\n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'painLevel',\n        message: 'Pain level must be between 0 and 10',\n        code: 'OUT_OF_RANGE'\n      });\n    });\n\n    it('should reject record with negative pain level', () => {\n      const invalidRecord = { ...validRecord, painLevel: -1 };\n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'painLevel',\n        message: 'Pain level must be between 0 and 10',\n        code: 'OUT_OF_RANGE'\n      });\n    });\n\n    it('should reject record with missing required fields', () => {\n      const invalidRecord = { ...validRecord };\n      delete (invalidRecord as any).date;\n      delete (invalidRecord as any).time;\n      delete (invalidRecord as any).painLevel;\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'date',\n        message: 'Date is required',\n        code: 'REQUIRED'\n      });\n      expect(result.errors).toContainEqual({\n        field: 'time',\n        message: 'Time is required',\n        code: 'REQUIRED'\n      });\n      expect(result.errors).toContainEqual({\n        field: 'painLevel',\n        message: 'Pain level is required',\n        code: 'REQUIRED'\n      });\n    });\n\n    it('should reject record with invalid date format', () => {\n      const invalidRecord = { ...validRecord, date: 'invalid-date' };\n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'date',\n        message: 'Date must be in YYYY-MM-DD format',\n        code: 'INVALID_FORMAT'\n      });\n    });\n\n    it('should reject record with future date', () => {\n      const futureDate = new Date();\n      futureDate.setDate(futureDate.getDate() + 1);\n      const invalidRecord = { \n        ...validRecord, \n        date: futureDate.toISOString().split('T')[0] \n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'date',\n        message: 'Date cannot be in the future',\n        code: 'INVALID_DATE'\n      });\n    });\n\n    it('should reject record with invalid time format', () => {\n      const invalidRecord = { ...validRecord, time: '25:70' };\n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'time',\n        message: 'Time must be in HH:MM format',\n        code: 'INVALID_FORMAT'\n      });\n    });\n\n    it('should reject record with invalid pain types', () => {\n      const invalidRecord = { \n        ...validRecord, \n        painTypes: ['invalid_type'] as any \n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'painTypes',\n        message: 'Invalid pain type: invalid_type',\n        code: 'INVALID_OPTION'\n      });\n    });\n\n    it('should reject record with invalid locations', () => {\n      const invalidRecord = { \n        ...validRecord, \n        locations: ['invalid_location'] as any \n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'locations',\n        message: 'Invalid location: invalid_location',\n        code: 'INVALID_OPTION'\n      });\n    });\n\n    it('should reject record with invalid symptoms', () => {\n      const invalidRecord = { \n        ...validRecord, \n        symptoms: ['invalid_symptom'] as any \n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'symptoms',\n        message: 'Invalid symptom: invalid_symptom',\n        code: 'INVALID_OPTION'\n      });\n    });\n\n    it('should reject record with invalid menstrual status', () => {\n      const invalidRecord = { \n        ...validRecord, \n        menstrualStatus: 'invalid_status' as any \n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'menstrualStatus',\n        message: 'Invalid menstrual status: invalid_status',\n        code: 'INVALID_OPTION'\n      });\n    });\n\n    it('should reject record with invalid effectiveness rating', () => {\n      const invalidRecord = { ...validRecord, effectiveness: 15 };\n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'effectiveness',\n        message: 'Effectiveness rating must be between 0 and 10',\n        code: 'OUT_OF_RANGE'\n      });\n    });\n\n    it('should reject record with notes too long', () => {\n      const longNotes = 'a'.repeat(1001);\n      const invalidRecord = { ...validRecord, notes: longNotes };\n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'notes',\n        message: 'Notes must be 1000 characters or less',\n        code: 'TOO_LONG'\n      });\n    });\n\n    it('should generate warnings for potential issues', () => {\n      const recordWithWarnings = { \n        ...validRecord, \n        painLevel: 9,\n        medications: []\n      };\n      \n      const result = validationService.validateRecord(recordWithWarnings);\n      \n      expect(result.isValid).toBe(true);\n      expect(result.warnings).toContainEqual({\n        field: 'painLevel',\n        message: 'High pain level (9/10) - consider consulting healthcare provider',\n        code: 'HIGH_PAIN_LEVEL'\n      });\n      expect(result.warnings).toContainEqual({\n        field: 'medications',\n        message: 'No medications recorded for high pain level',\n        code: 'NO_TREATMENT_HIGH_PAIN'\n      });\n    });\n\n    it('should validate medication structure', () => {\n      const invalidRecord = { \n        ...validRecord, \n        medications: [{ name: '', dosage: '400mg', timing: 'during pain' }]\n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'medications',\n        message: 'Medication name is required',\n        code: 'REQUIRED'\n      });\n    });\n\n    it('should validate lifestyle factors structure', () => {\n      const invalidRecord = { \n        ...validRecord, \n        lifestyleFactors: [{ factor: 'invalid_factor' as any, value: 5 }]\n      };\n      \n      const result = validationService.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'lifestyleFactors',\n        message: 'Invalid lifestyle factor: invalid_factor',\n        code: 'INVALID_OPTION'\n      });\n    });\n  });\n\n  describe('checkForDuplicates', () => {\n    const existingRecords: PainRecord[] = [\n      {\n        ...validRecord,\n        id: 'existing_1',\n        date: '2024-01-15',\n        time: '14:30',\n        painLevel: 7,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      }\n    ];\n\n    it('should detect exact duplicate', () => {\n      const newRecord = {\n        date: '2024-01-15',\n        time: '14:30',\n        painLevel: 7,\n        painTypes: ['cramping', 'aching'] as PainType[],\n        locations: ['lower_abdomen', 'lower_back'],\n        symptoms: ['nausea', 'fatigue'] as Symptom[],\n        menstrualStatus: 'day_2_3' as MenstrualStatus,\n        medications: [{ name: 'Ibuprofen', dosage: '400mg', timing: 'during pain' }],\n        effectiveness: 8,\n        lifestyleFactors: [],\n        notes: 'Severe cramping in the morning'\n      };\n\n      const isDuplicate = validationService.checkForDuplicates(newRecord, existingRecords);\n      expect(isDuplicate).toBe(true);\n    });\n\n    it('should not detect duplicate for different date', () => {\n      const newRecord = { ...validRecord, date: '2024-01-16' };\n      const isDuplicate = validationService.checkForDuplicates(newRecord, existingRecords);\n      expect(isDuplicate).toBe(false);\n    });\n\n    it('should not detect duplicate for different time', () => {\n      const newRecord = { ...validRecord, time: '15:30' };\n      const isDuplicate = validationService.checkForDuplicates(newRecord, existingRecords);\n      expect(isDuplicate).toBe(false);\n    });\n\n    it('should not detect duplicate for different pain level', () => {\n      const newRecord = { ...validRecord, painLevel: 5 };\n      const isDuplicate = validationService.checkForDuplicates(newRecord, existingRecords);\n      expect(isDuplicate).toBe(false);\n    });\n\n    it('should handle empty existing records', () => {\n      const isDuplicate = validationService.checkForDuplicates(validRecord, []);\n      expect(isDuplicate).toBe(false);\n    });\n  });\n\n  describe('validateImportData', () => {\n    it('should validate correct import data structure', () => {\n      const importData = {\n        records: [validRecord],\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {}\n      };\n\n      const result = validationService.validateImportData(importData);\n      expect(result.isValid).toBe(true);\n      expect(result.errors).toHaveLength(0);\n    });\n\n    it('should reject import data with missing records', () => {\n      const importData = {\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {}\n      };\n\n      const result = validationService.validateImportData(importData);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'records',\n        message: 'Records array is required',\n        code: 'REQUIRED'\n      });\n    });\n\n    it('should reject import data with invalid schema version', () => {\n      const importData = {\n        records: [],\n        preferences: {},\n        schemaVersion: 'invalid',\n        metadata: {}\n      };\n\n      const result = validationService.validateImportData(importData);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'schemaVersion',\n        message: 'Schema version must be a number',\n        code: 'INVALID_TYPE'\n      });\n    });\n\n    it('should reject import data with invalid records', () => {\n      const importData = {\n        records: [{ ...validRecord, painLevel: 15 }],\n        preferences: {},\n        schemaVersion: 1,\n        metadata: {}\n      };\n\n      const result = validationService.validateImportData(importData);\n      expect(result.isValid).toBe(false);\n      expect(result.errors.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('sanitizeInput', () => {\n    it('should sanitize HTML in notes', () => {\n      const maliciousInput = '<script>alert(\"xss\")</script>Normal text';\n      const sanitized = validationService.sanitizeInput(maliciousInput);\n      expect(sanitized).toBe('Normal text');\n      expect(sanitized).not.toContain('<script>');\n    });\n\n    it('should preserve safe text', () => {\n      const safeInput = 'This is safe text with numbers 123 and symbols !@#';\n      const sanitized = validationService.sanitizeInput(safeInput);\n      expect(sanitized).toBe(safeInput);\n    });\n\n    it('should handle empty input', () => {\n      const sanitized = validationService.sanitizeInput('');\n      expect(sanitized).toBe('');\n    });\n\n    it('should handle null/undefined input', () => {\n      expect(validationService.sanitizeInput(null as any)).toBe('');\n      expect(validationService.sanitizeInput(undefined as any)).toBe('');\n    });\n  });\n\n  describe('validateDateRange', () => {\n    it('should validate correct date range', () => {\n      const startDate = new Date('2024-01-01');\n      const endDate = new Date('2024-01-31');\n      \n      const result = validationService.validateDateRange(startDate, endDate);\n      expect(result.isValid).toBe(true);\n      expect(result.errors).toHaveLength(0);\n    });\n\n    it('should reject range where start date is after end date', () => {\n      const startDate = new Date('2024-01-31');\n      const endDate = new Date('2024-01-01');\n      \n      const result = validationService.validateDateRange(startDate, endDate);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'dateRange',\n        message: 'Start date must be before end date',\n        code: 'INVALID_RANGE'\n      });\n    });\n\n    it('should reject range that is too large', () => {\n      const startDate = new Date('2020-01-01');\n      const endDate = new Date('2024-12-31');\n      \n      const result = validationService.validateDateRange(startDate, endDate);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'dateRange',\n        message: 'Date range cannot exceed 2 years',\n        code: 'RANGE_TOO_LARGE'\n      });\n    });\n\n    it('should handle invalid date objects', () => {\n      const invalidDate = new Date('invalid');\n      const validDate = new Date('2024-01-01');\n      \n      const result = validationService.validateDateRange(invalidDate, validDate);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContainEqual({\n        field: 'startDate',\n        message: 'Invalid start date',\n        code: 'INVALID_DATE'\n      });\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle null record gracefully', () => {\n      expect(() => {\n        validationService.validateRecord(null as any);\n      }).toThrow('Record is required for validation');\n    });\n\n    it('should handle undefined record gracefully', () => {\n      expect(() => {\n        validationService.validateRecord(undefined as any);\n      }).toThrow('Record is required for validation');\n    });\n\n    it('should handle malformed record gracefully', () => {\n      const malformedRecord = 'not an object';\n      expect(() => {\n        validationService.validateRecord(malformedRecord as any);\n      }).toThrow('Record must be an object');\n    });\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/__tests__/integration.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1905,1908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1905,1908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2000,2003],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2000,2003],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Integration Test for Enhanced Pain Tracker Data Models and Storage\n// Verifies that all components work together correctly\n\nimport {\n  createPainTrackerServices,\n  PainRecord,\n  CURRENT_SCHEMA_VERSION,\n  STORAGE_KEYS\n} from '../index';\n\ndescribe('Enhanced Pain Tracker Integration', () => {\n  let services: ReturnType<typeof createPainTrackerServices>;\n\n  beforeEach(() => {\n    // Clear localStorage before each test\n    Object.values(STORAGE_KEYS).forEach(key => {\n      localStorage.removeItem(key);\n    });\n    \n    services = createPainTrackerServices();\n  });\n\n  afterEach(() => {\n    // Clean up after each test\n    Object.values(STORAGE_KEYS).forEach(key => {\n      localStorage.removeItem(key);\n    });\n  });\n\n  describe('Data Model Validation', () => {\n    it('should validate a complete pain record', () => {\n      const testRecord: Partial<PainRecord> = {\n        date: '2024-01-15',\n        time: '14:30',\n        painLevel: 7,\n        painTypes: ['cramping', 'sharp'],\n        locations: ['lower_abdomen', 'lower_back'],\n        symptoms: ['nausea', 'fatigue'],\n        menstrualStatus: 'day_2_3',\n        medications: [\n          {\n            name: 'Ibuprofen',\n            dosage: '400mg',\n            timing: 'during pain'\n          }\n        ],\n        effectiveness: 8,\n        lifestyleFactors: [\n          {\n            factor: 'stress_level',\n            value: 6\n          }\n        ],\n        notes: 'Severe cramping in the morning'\n      };\n\n      const result = services.validation.validateRecord(testRecord);\n      \n      expect(result.isValid).toBe(true);\n      expect(result.errors).toHaveLength(0);\n    });\n\n    it('should identify validation errors', () => {\n      const invalidRecord: Partial<PainRecord> = {\n        date: '2025-12-31', // Future date\n        time: '25:00', // Invalid time\n        painLevel: 15, // Out of range\n        painTypes: ['invalid_type'] as any,\n        locations: [],\n        symptoms: [],\n        menstrualStatus: 'invalid_status' as any\n      };\n\n      const result = services.validation.validateRecord(invalidRecord);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors.length).toBeGreaterThan(0);\n      \n      // Check for specific error types\n      const errorCodes = result.errors.map(e => e.code);\n      expect(errorCodes).toContain('INVALID_DATE');\n      expect(errorCodes).toContain('INVALID_FORMAT');\n      expect(errorCodes).toContain('OUT_OF_RANGE');\n    });\n  });\n\n  describe('Storage Operations', () => {\n    it('should initialize storage with default values', async () => {\n      const schemaVersion = await services.storage.load(STORAGE_KEYS.SCHEMA_VERSION);\n      const preferences = await services.storage.load(STORAGE_KEYS.USER_PREFERENCES);\n      const records = await services.storage.load(STORAGE_KEYS.PAIN_RECORDS);\n\n      expect(schemaVersion).toBe(CURRENT_SCHEMA_VERSION);\n      expect(preferences).toBeDefined();\n      expect(preferences.defaultMedications).toEqual([]);\n      expect(records).toEqual([]);\n    });\n\n    it('should save and load data correctly', async () => {\n      const testData = { test: 'data', number: 42 };\n      \n      await services.storage.save('test_key', testData);\n      const loadedData = await services.storage.load('test_key');\n      \n      expect(loadedData).toEqual(testData);\n    });\n\n    it('should handle storage quota checks', async () => {\n      const quotaInfo = await services.storage.getQuotaUsage();\n      \n      expect(quotaInfo).toHaveProperty('used');\n      expect(quotaInfo).toHaveProperty('available');\n      expect(typeof quotaInfo.used).toBe('number');\n      expect(typeof quotaInfo.available).toBe('number');\n    });\n\n    it('should create and restore backups', async () => {\n      // Save some test data\n      const testRecords = [\n        {\n          id: 'test1',\n          date: '2024-01-15',\n          time: '14:30',\n          painLevel: 7,\n          painTypes: ['cramping'],\n          locations: ['lower_abdomen'],\n          symptoms: ['nausea'],\n          menstrualStatus: 'day_2_3',\n          medications: [],\n          effectiveness: 0,\n          lifestyleFactors: [],\n          notes: 'Test record',\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }\n      ];\n      \n      await services.storage.save(STORAGE_KEYS.PAIN_RECORDS, testRecords);\n      \n      // Create backup\n      const backupData = await services.storage.backup();\n      expect(backupData).toBeDefined();\n      expect(typeof backupData).toBe('string');\n      \n      // Clear data\n      await services.storage.clear();\n      \n      // Restore from backup\n      await services.storage.restore(backupData);\n      \n      // Verify data was restored\n      const restoredRecords = await services.storage.load(STORAGE_KEYS.PAIN_RECORDS);\n      expect(restoredRecords).toHaveLength(1);\n      expect(restoredRecords[0].id).toBe('test1');\n    });\n  });\n\n  describe('Migration System', () => {\n    it('should detect when migration is needed', () => {\n      const isNeeded = services.migration.isMigrationNeeded(0);\n      expect(isNeeded).toBe(true);\n      \n      const isNotNeeded = services.migration.isMigrationNeeded(CURRENT_SCHEMA_VERSION);\n      expect(isNotNeeded).toBe(false);\n    });\n\n    it('should create migration plan', () => {\n      const plan = services.migration.getMigrationPlan(0, 1);\n      \n      expect(plan.fromVersion).toBe(0);\n      expect(plan.toVersion).toBe(1);\n      expect(plan.migrations).toHaveLength(1);\n      expect(plan.migrations[0].version).toBe(1);\n    });\n\n    it('should migrate legacy data to current version', async () => {\n      const legacyData = [\n        {\n          id: 'legacy1',\n          date: '2024-01-15',\n          intensity: 7,\n          menstrualStatus: 'during',\n          symptoms: ['nausea', 'headache'],\n          treatments: ['Ibuprofen'],\n          effectiveness: 8,\n          notes: 'Legacy record'\n        }\n      ];\n\n      const plan = services.migration.getMigrationPlan(0, 1);\n      const migratedData = await services.migration.executeMigrationPlan(legacyData, plan);\n      \n      expect(migratedData).toBeDefined();\n      expect(migratedData.schemaVersion).toBe(1);\n      expect(migratedData.records).toHaveLength(1);\n      \n      const migratedRecord = migratedData.records[0];\n      expect(migratedRecord.id).toBe('legacy1');\n      expect(migratedRecord.painLevel).toBe(7);\n      expect(migratedRecord.menstrualStatus).toBe('day_1'); // 'during' -> 'day_1'\n      expect(migratedRecord.symptoms).toContain('nausea');\n      expect(migratedRecord.medications).toHaveLength(1);\n      expect(migratedRecord.medications[0].name).toBe('Ibuprofen');\n    });\n  });\n\n  describe('Service Integration', () => {\n    it('should work together for complete workflow', async () => {\n      // 1. Create a new record\n      const newRecord: Partial<PainRecord> = {\n        date: '2024-01-15',\n        time: '14:30',\n        painLevel: 7,\n        painTypes: ['cramping'],\n        locations: ['lower_abdomen'],\n        symptoms: ['nausea'],\n        menstrualStatus: 'day_2_3',\n        medications: [\n          {\n            name: 'Ibuprofen',\n            dosage: '400mg',\n            timing: 'during pain'\n          }\n        ],\n        effectiveness: 8,\n        lifestyleFactors: [],\n        notes: 'Integration test record'\n      };\n\n      // 2. Validate the record\n      const validationResult = services.validation.validateRecord(newRecord);\n      expect(validationResult.isValid).toBe(true);\n\n      // 3. Save to storage\n      const records = await services.storage.load(STORAGE_KEYS.PAIN_RECORDS) || [];\n      const completeRecord: PainRecord = {\n        ...newRecord as PainRecord,\n        id: `record_${Date.now()}`,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      records.push(completeRecord);\n      await services.storage.save(STORAGE_KEYS.PAIN_RECORDS, records);\n\n      // 4. Verify storage\n      const savedRecords = await services.storage.load(STORAGE_KEYS.PAIN_RECORDS);\n      expect(savedRecords).toHaveLength(1);\n      expect(savedRecords[0].painLevel).toBe(7);\n\n      // 5. Create backup\n      const backup = await services.storage.backup();\n      expect(backup).toBeDefined();\n\n      // 6. Test migration system readiness\n      const currentVersion = await services.storage.load(STORAGE_KEYS.SCHEMA_VERSION);\n      expect(currentVersion).toBe(CURRENT_SCHEMA_VERSION);\n      expect(services.migration.isMigrationNeeded(currentVersion)).toBe(false);\n    });\n  });\n});\n\n// Mock localStorage for testing environment\nconst localStorageMock = (() => {\n  let store: { [key: string]: string } = {};\n\n  return {\n    getItem: (key: string) => store[key] || null,\n    setItem: (key: string, value: string) => {\n      store[key] = value.toString();\n    },\n    removeItem: (key: string) => {\n      delete store[key];\n    },\n    clear: () => {\n      store = {};\n    }\n  };\n})();\n\n// Set up localStorage mock\nObject.defineProperty(global, 'localStorage', {\n  value: localStorageMock\n});\n\n// Mock navigator.storage for quota testing\nObject.defineProperty(global, 'navigator', {\n  value: {\n    estimate: () => Promise.resolve({\n      usage: 1024,\n      quota: 5 * 1024 * 1024\n    })\n  }\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/AnalyticsEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PatternType' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":312,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":312,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'records' is defined but never used.","line":428,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":428,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'records' is defined but never used.","line":572,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":572,"endColumn":49}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// AnalyticsEngine - Pattern Recognition and Statistical Analysis Service\n// Provides comprehensive analytics, pattern identification, and insights for pain tracking data\n\nimport {\n  PainRecord,\n  PainAnalytics,\n  PainTypeFrequency,\n  TreatmentEffectiveness,\n  CyclePattern,\n  TrendPoint,\n  Pattern,\n  PatternType,\n  CorrelationResult,\n  AnalyticsEngineInterface,\n  MenstrualStatus,\n  PainType,\n  Symptom,\n  PainTrackerError\n} from '../../../types/pain-tracker';\n\nexport class AnalyticsEngine implements AnalyticsEngineInterface {\n  \n  /**\n   * Calculate comprehensive analytics from pain records\n   */\n  calculateAnalytics(records: PainRecord[]): PainAnalytics {\n    try {\n      if (records.length === 0) {\n        return this.getEmptyAnalytics();\n      }\n\n      // Sort records by date for trend analysis\n      const sortedRecords = this.sortRecordsByDate(records);\n      \n      // Calculate basic statistics\n      const averagePainLevel = this.calculateAveragePainLevel(records);\n      const commonPainTypes = this.calculatePainTypeFrequency(records);\n      const effectiveTreatments = this.calculateTreatmentEffectiveness(records);\n      const cyclePatterns = this.calculateCyclePatterns(records);\n      const trendData = this.generateTrendData(sortedRecords);\n      \n      // Generate insights\n      const insights = this.generateInsights({\n        averagePainLevel,\n        totalRecords: records.length,\n        commonPainTypes,\n        effectiveTreatments,\n        cyclePatterns,\n        trendData,\n        insights: [],\n        dateRange: this.getDateRange(records)\n      });\n\n      return {\n        averagePainLevel,\n        totalRecords: records.length,\n        commonPainTypes,\n        effectiveTreatments,\n        cyclePatterns,\n        trendData,\n        insights,\n        dateRange: this.getDateRange(records)\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to calculate analytics',\n        'CHART_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Identify patterns in pain records\n   */\n  identifyPatterns(records: PainRecord[]): Pattern[] {\n    try {\n      const patterns: Pattern[] = [];\n\n      if (records.length < 3) {\n        return patterns; // Need minimum data for pattern recognition\n      }\n\n      // Identify menstrual cycle patterns\n      patterns.push(...this.identifyMenstrualPatterns(records));\n      \n      // Identify treatment response patterns\n      patterns.push(...this.identifyTreatmentPatterns(records));\n      \n      // Identify lifestyle correlation patterns\n      patterns.push(...this.identifyLifestylePatterns(records));\n      \n      // Identify seasonal patterns\n      patterns.push(...this.identifySeasonalPatterns(records));\n      \n      // Identify trigger patterns\n      patterns.push(...this.identifyTriggerPatterns(records));\n\n      return patterns.sort((a, b) => b.confidence - a.confidence);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to identify patterns',\n        'CHART_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Generate automated insights based on analytics\n   */\n  generateInsights(analytics: PainAnalytics): string[] {\n    const insights: string[] = [];\n\n    try {\n      // Pain level insights\n      if (analytics.averagePainLevel > 7) {\n        insights.push('Your average pain level is high (>7). Consider discussing pain management strategies with your healthcare provider.');\n      } else if (analytics.averagePainLevel < 3) {\n        insights.push('Your average pain level is relatively low. Your current management approach appears to be working well.');\n      }\n\n      // Pain type insights\n      if (analytics.commonPainTypes.length > 0) {\n        const mostCommon = analytics.commonPainTypes[0];\n        if (mostCommon.percentage > 60) {\n          insights.push(`${this.formatPainType(mostCommon.type)} is your most common pain type (${mostCommon.percentage.toFixed(1)}%). This consistency may help with targeted treatment.`);\n        }\n      }\n\n      // Treatment effectiveness insights\n      const effectiveTreatments = analytics.effectiveTreatments.filter(t => t.successRate > 70);\n      if (effectiveTreatments.length > 0) {\n        const best = effectiveTreatments[0];\n        insights.push(`${best.treatment} shows high effectiveness (${best.successRate.toFixed(1)}% success rate). Consider using this as a primary treatment option.`);\n      }\n\n      // Cycle pattern insights\n      const highPainPhases = analytics.cyclePatterns.filter(p => p.averagePainLevel > 6);\n      if (highPainPhases.length > 0) {\n        const phases = highPainPhases.map(p => this.formatMenstrualStatus(p.phase)).join(', ');\n        insights.push(`Pain levels are highest during: ${phases}. Consider preventive measures during these phases.`);\n      }\n\n      // Trend insights\n      if (analytics.trendData.length >= 5) {\n        const trendDirection = this.analyzeTrend(analytics.trendData);\n        if (trendDirection === 'improving') {\n          insights.push('Your pain levels show an improving trend over time. Keep up your current management approach.');\n        } else if (trendDirection === 'worsening') {\n          insights.push('Your pain levels show a concerning upward trend. Consider consulting with your healthcare provider.');\n        }\n      }\n\n      // Data completeness insights\n      if (analytics.totalRecords < 10) {\n        insights.push('Continue tracking to build a more comprehensive picture of your pain patterns. More data will enable better insights.');\n      } else if (analytics.totalRecords > 50) {\n        insights.push('You have excellent tracking consistency! This comprehensive data provides valuable insights for pain management.');\n      }\n\n      return insights;\n    } catch (error) {\n      console.error('Error generating insights:', error);\n      return ['Unable to generate insights at this time. Please try again later.'];\n    }\n  }\n\n  /**\n   * Predict future trends based on historical data\n   */\n  predictTrends(records: PainRecord[]): TrendPoint[] {\n    try {\n      if (records.length < 10) {\n        return []; // Need sufficient data for prediction\n      }\n\n      const sortedRecords = this.sortRecordsByDate(records);\n      const recentRecords = sortedRecords.slice(-30); // Last 30 records\n      \n      // Simple linear regression for trend prediction\n      const trendData = this.generateTrendData(recentRecords);\n      const slope = this.calculateTrendSlope(trendData);\n      \n      // Generate predictions for next 7 days\n      const predictions: TrendPoint[] = [];\n      const lastDate = new Date(sortedRecords[sortedRecords.length - 1].date);\n      const lastPainLevel = sortedRecords[sortedRecords.length - 1].painLevel;\n      \n      for (let i = 1; i <= 7; i++) {\n        const futureDate = new Date(lastDate);\n        futureDate.setDate(futureDate.getDate() + i);\n        \n        const predictedPainLevel = Math.max(0, Math.min(10, lastPainLevel + (slope * i)));\n        \n        predictions.push({\n          date: futureDate.toISOString().split('T')[0],\n          painLevel: Math.round(predictedPainLevel * 10) / 10\n        });\n      }\n\n      return predictions;\n    } catch (error) {\n      console.error('Error predicting trends:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Calculate correlations between different factors\n   */\n  calculateCorrelations(records: PainRecord[]): CorrelationResult[] {\n    try {\n      const correlations: CorrelationResult[] = [];\n\n      if (records.length < 10) {\n        return correlations; // Need sufficient data for correlation analysis\n      }\n\n      // Pain level vs menstrual phase correlation\n      const menstrualCorrelation = this.calculateMenstrualPainCorrelation(records);\n      if (menstrualCorrelation.significance > 0.5) {\n        correlations.push(menstrualCorrelation);\n      }\n\n      // Pain level vs lifestyle factors correlation\n      const lifestyleCorrelations = this.calculateLifestyleCorrelations(records);\n      correlations.push(...lifestyleCorrelations.filter(c => c.significance > 0.3));\n\n      // Treatment effectiveness correlations\n      const treatmentCorrelations = this.calculateTreatmentCorrelations(records);\n      correlations.push(...treatmentCorrelations.filter(c => c.significance > 0.4));\n\n      return correlations.sort((a, b) => b.significance - a.significance);\n    } catch (error) {\n      console.error('Error calculating correlations:', error);\n      return [];\n    }\n  }\n\n  // Private helper methods\n\n  private getEmptyAnalytics(): PainAnalytics {\n    return {\n      averagePainLevel: 0,\n      totalRecords: 0,\n      commonPainTypes: [],\n      effectiveTreatments: [],\n      cyclePatterns: [],\n      trendData: [],\n      insights: ['No data available yet. Start tracking your pain to see analytics and insights.'],\n      dateRange: {\n        start: new Date(),\n        end: new Date()\n      }\n    };\n  }\n\n  private sortRecordsByDate(records: PainRecord[]): PainRecord[] {\n    return [...records].sort((a, b) => \n      new Date(a.date).getTime() - new Date(b.date).getTime()\n    );\n  }\n\n  private calculateAveragePainLevel(records: PainRecord[]): number {\n    if (records.length === 0) return 0;\n    \n    const total = records.reduce((sum, record) => sum + record.painLevel, 0);\n    return Math.round((total / records.length) * 10) / 10;\n  }\n\n  private calculatePainTypeFrequency(records: PainRecord[]): PainTypeFrequency[] {\n    const typeCount = new Map<PainType, number>();\n    let totalTypes = 0;\n\n    records.forEach(record => {\n      record.painTypes.forEach(type => {\n        typeCount.set(type, (typeCount.get(type) || 0) + 1);\n        totalTypes++;\n      });\n    });\n\n    return Array.from(typeCount.entries())\n      .map(([type, count]) => ({\n        type,\n        count,\n        percentage: Math.round((count / totalTypes) * 1000) / 10\n      }))\n      .sort((a, b) => b.count - a.count);\n  }\n\n  private calculateTreatmentEffectiveness(records: PainRecord[]): TreatmentEffectiveness[] {\n    const treatmentStats = new Map<string, { total: number; effective: number; effectivenessSum: number }>();\n\n    records.forEach(record => {\n      record.medications.forEach(medication => {\n        const key = medication.name.toLowerCase();\n        const stats = treatmentStats.get(key) || { total: 0, effective: 0, effectivenessSum: 0 };\n        \n        stats.total++;\n        stats.effectivenessSum += record.effectiveness;\n        \n        if (record.effectiveness >= 7) {\n          stats.effective++;\n        }\n        \n        treatmentStats.set(key, stats);\n      });\n    });\n\n    return Array.from(treatmentStats.entries())\n      .filter(([_, stats]) => stats.total >= 2) // Minimum usage for meaningful statistics\n      .map(([treatment, stats]) => ({\n        treatment: this.capitalizeFirstLetter(treatment),\n        averageEffectiveness: Math.round((stats.effectivenessSum / stats.total) * 10) / 10,\n        usageCount: stats.total,\n        successRate: Math.round((stats.effective / stats.total) * 1000) / 10\n      }))\n      .sort((a, b) => b.successRate - a.successRate);\n  }\n\n  private calculateCyclePatterns(records: PainRecord[]): CyclePattern[] {\n    const phaseStats = new Map<MenstrualStatus, { painLevels: number[]; symptoms: Symptom[] }>();\n\n    records.forEach(record => {\n      const stats = phaseStats.get(record.menstrualStatus) || { painLevels: [], symptoms: [] };\n      stats.painLevels.push(record.painLevel);\n      stats.symptoms.push(...record.symptoms);\n      phaseStats.set(record.menstrualStatus, stats);\n    });\n\n    return Array.from(phaseStats.entries())\n      .map(([phase, stats]) => {\n        const averagePainLevel = stats.painLevels.reduce((sum, level) => sum + level, 0) / stats.painLevels.length;\n        const symptomCounts = this.countSymptoms(stats.symptoms);\n        const commonSymptoms = symptomCounts.slice(0, 3).map(s => s.symptom);\n\n        return {\n          phase,\n          averagePainLevel: Math.round(averagePainLevel * 10) / 10,\n          commonSymptoms,\n          frequency: stats.painLevels.length\n        };\n      })\n      .sort((a, b) => b.averagePainLevel - a.averagePainLevel);\n  }\n\n  private generateTrendData(records: PainRecord[]): TrendPoint[] {\n    return records.map(record => ({\n      date: record.date,\n      painLevel: record.painLevel,\n      menstrualPhase: record.menstrualStatus\n    }));\n  }\n\n  private getDateRange(records: PainRecord[]): { start: Date; end: Date } {\n    if (records.length === 0) {\n      const now = new Date();\n      return { start: now, end: now };\n    }\n\n    const dates = records.map(r => new Date(r.date));\n    return {\n      start: new Date(Math.min(...dates.map(d => d.getTime()))),\n      end: new Date(Math.max(...dates.map(d => d.getTime())))\n    };\n  }\n\n  private identifyMenstrualPatterns(records: PainRecord[]): Pattern[] {\n    const patterns: Pattern[] = [];\n    \n    // Analyze pain levels across menstrual phases\n    const cyclePatterns = this.calculateCyclePatterns(records);\n    const highPainPhases = cyclePatterns.filter(p => p.averagePainLevel > 6);\n    \n    if (highPainPhases.length > 0) {\n      patterns.push({\n        type: 'menstrual_cycle',\n        description: `Pain levels are consistently higher during ${highPainPhases.map(p => this.formatMenstrualStatus(p.phase)).join(', ')}`,\n        confidence: Math.min(0.9, highPainPhases.length / cyclePatterns.length),\n        recommendations: [\n          'Consider preventive pain management before high-pain phases',\n          'Track additional symptoms during these phases',\n          'Discuss hormonal factors with your healthcare provider'\n        ]\n      });\n    }\n\n    return patterns;\n  }\n\n  private identifyTreatmentPatterns(records: PainRecord[]): Pattern[] {\n    const patterns: Pattern[] = [];\n    const treatments = this.calculateTreatmentEffectiveness(records);\n    \n    const highlyEffective = treatments.filter(t => t.successRate > 80 && t.usageCount >= 3);\n    const ineffective = treatments.filter(t => t.successRate < 30 && t.usageCount >= 3);\n    \n    if (highlyEffective.length > 0) {\n      patterns.push({\n        type: 'treatment_response',\n        description: `${highlyEffective[0].treatment} shows consistently high effectiveness (${highlyEffective[0].successRate}% success rate)`,\n        confidence: Math.min(0.9, highlyEffective[0].usageCount / 10),\n        recommendations: [\n          `Consider using ${highlyEffective[0].treatment} as your primary treatment`,\n          'Keep this medication readily available',\n          'Note the timing and dosage that works best'\n        ]\n      });\n    }\n\n    if (ineffective.length > 0) {\n      patterns.push({\n        type: 'treatment_response',\n        description: `${ineffective[0].treatment} shows low effectiveness (${ineffective[0].successRate}% success rate)`,\n        confidence: Math.min(0.8, ineffective[0].usageCount / 10),\n        recommendations: [\n          `Consider alternatives to ${ineffective[0].treatment}`,\n          'Discuss other treatment options with your healthcare provider',\n          'Track what works better for comparison'\n        ]\n      });\n    }\n\n    return patterns;\n  }\n\n  private identifyLifestylePatterns(records: PainRecord[]): Pattern[] {\n    const patterns: Pattern[] = [];\n    \n    // This would require more complex analysis of lifestyle factors\n    // For now, return basic patterns based on available data\n    \n    return patterns;\n  }\n\n  private identifySeasonalPatterns(records: PainRecord[]): Pattern[] {\n    const patterns: Pattern[] = [];\n    \n    if (records.length < 20) return patterns; // Need sufficient data across seasons\n    \n    const monthlyPain = new Map<number, number[]>();\n    \n    records.forEach(record => {\n      const month = new Date(record.date).getMonth();\n      const painLevels = monthlyPain.get(month) || [];\n      painLevels.push(record.painLevel);\n      monthlyPain.set(month, painLevels);\n    });\n    \n    const monthlyAverages = Array.from(monthlyPain.entries())\n      .map(([month, levels]) => ({\n        month,\n        average: levels.reduce((sum, level) => sum + level, 0) / levels.length,\n        count: levels.length\n      }))\n      .filter(m => m.count >= 3); // Need at least 3 records per month\n    \n    if (monthlyAverages.length >= 6) {\n      const sortedByPain = monthlyAverages.sort((a, b) => b.average - a.average);\n      const highestMonth = sortedByPain[0];\n      const lowestMonth = sortedByPain[sortedByPain.length - 1];\n      \n      if (highestMonth.average - lowestMonth.average > 2) {\n        patterns.push({\n          type: 'seasonal_pattern',\n          description: `Pain levels tend to be higher in ${this.getMonthName(highestMonth.month)} (avg: ${highestMonth.average.toFixed(1)}) compared to ${this.getMonthName(lowestMonth.month)} (avg: ${lowestMonth.average.toFixed(1)})`,\n          confidence: 0.7,\n          recommendations: [\n            'Consider seasonal factors that might affect your pain',\n            'Plan preventive measures during high-pain months',\n            'Track weather, stress, or other seasonal changes'\n          ]\n        });\n      }\n    }\n    \n    return patterns;\n  }\n\n  private identifyTriggerPatterns(records: PainRecord[]): Pattern[] {\n    const patterns: Pattern[] = [];\n    \n    // Analyze common combinations of symptoms and pain levels\n    const symptomPainMap = new Map<string, number[]>();\n    \n    records.forEach(record => {\n      record.symptoms.forEach(symptom => {\n        const painLevels = symptomPainMap.get(symptom) || [];\n        painLevels.push(record.painLevel);\n        symptomPainMap.set(symptom, painLevels);\n      });\n    });\n    \n    const symptomAnalysis = Array.from(symptomPainMap.entries())\n      .map(([symptom, painLevels]) => ({\n        symptom,\n        averagePain: painLevels.reduce((sum, level) => sum + level, 0) / painLevels.length,\n        frequency: painLevels.length\n      }))\n      .filter(s => s.frequency >= 3)\n      .sort((a, b) => b.averagePain - a.averagePain);\n    \n    if (symptomAnalysis.length > 0 && symptomAnalysis[0].averagePain > 7) {\n      patterns.push({\n        type: 'trigger_identification',\n        description: `${this.formatSymptom(symptomAnalysis[0].symptom as Symptom)} is associated with higher pain levels (avg: ${symptomAnalysis[0].averagePain.toFixed(1)})`,\n        confidence: Math.min(0.8, symptomAnalysis[0].frequency / records.length),\n        recommendations: [\n          `Monitor for early signs of ${this.formatSymptom(symptomAnalysis[0].symptom as Symptom)}`,\n          'Consider preventive measures when this symptom appears',\n          'Discuss this pattern with your healthcare provider'\n        ]\n      });\n    }\n    \n    return patterns;\n  }\n\n  private analyzeTrend(trendData: TrendPoint[]): 'improving' | 'worsening' | 'stable' {\n    if (trendData.length < 5) return 'stable';\n    \n    const slope = this.calculateTrendSlope(trendData);\n    \n    if (slope < -0.1) return 'improving';\n    if (slope > 0.1) return 'worsening';\n    return 'stable';\n  }\n\n  private calculateTrendSlope(trendData: TrendPoint[]): number {\n    if (trendData.length < 2) return 0;\n    \n    const n = trendData.length;\n    let sumX = 0, sumY = 0, sumXY = 0, sumXX = 0;\n    \n    trendData.forEach((point, index) => {\n      const x = index;\n      const y = point.painLevel;\n      sumX += x;\n      sumY += y;\n      sumXY += x * y;\n      sumXX += x * x;\n    });\n    \n    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);\n    return isNaN(slope) ? 0 : slope;\n  }\n\n  private calculateMenstrualPainCorrelation(records: PainRecord[]): CorrelationResult {\n    // Simplified correlation calculation\n    const phaseValues = new Map<MenstrualStatus, number>();\n    const phases: MenstrualStatus[] = ['before_period', 'day_1', 'day_2_3', 'day_4_plus', 'after_period', 'mid_cycle', 'irregular'];\n    \n    phases.forEach((phase, index) => {\n      phaseValues.set(phase, index);\n    });\n    \n    const phaseNumbers = records.map(r => phaseValues.get(r.menstrualStatus) || 0);\n    const painLevels = records.map(r => r.painLevel);\n    \n    const correlation = this.calculatePearsonCorrelation(phaseNumbers, painLevels);\n    \n    return {\n      factor1: 'Menstrual Phase',\n      factor2: 'Pain Level',\n      correlation: correlation,\n      significance: Math.abs(correlation),\n      description: `${Math.abs(correlation) > 0.5 ? 'Strong' : 'Moderate'} correlation between menstrual phase and pain level`\n    };\n  }\n\n  private calculateLifestyleCorrelations(records: PainRecord[]): CorrelationResult[] {\n    // This would require more detailed lifestyle factor analysis\n    // For now, return empty array as lifestyle factors need more complex implementation\n    return [];\n  }\n\n  private calculateTreatmentCorrelations(records: PainRecord[]): CorrelationResult[] {\n    const correlations: CorrelationResult[] = [];\n    \n    // Analyze correlation between treatment timing and effectiveness\n    const treatmentData = records\n      .filter(r => r.medications.length > 0)\n      .map(r => ({\n        painLevel: r.painLevel,\n        effectiveness: r.effectiveness,\n        treatmentCount: r.medications.length\n      }));\n    \n    if (treatmentData.length >= 10) {\n      const painLevels = treatmentData.map(d => d.painLevel);\n      const effectiveness = treatmentData.map(d => d.effectiveness);\n      \n      const correlation = this.calculatePearsonCorrelation(painLevels, effectiveness);\n      \n      correlations.push({\n        factor1: 'Initial Pain Level',\n        factor2: 'Treatment Effectiveness',\n        correlation: correlation,\n        significance: Math.abs(correlation),\n        description: correlation < -0.3 ? 'Higher initial pain levels may reduce treatment effectiveness' : 'No strong correlation between initial pain and treatment effectiveness'\n      });\n    }\n    \n    return correlations;\n  }\n\n  private calculatePearsonCorrelation(x: number[], y: number[]): number {\n    if (x.length !== y.length || x.length === 0) return 0;\n    \n    const n = x.length;\n    const sumX = x.reduce((sum, val) => sum + val, 0);\n    const sumY = y.reduce((sum, val) => sum + val, 0);\n    const sumXY = x.reduce((sum, val, i) => sum + val * y[i], 0);\n    const sumXX = x.reduce((sum, val) => sum + val * val, 0);\n    const sumYY = y.reduce((sum, val) => sum + val * val, 0);\n    \n    const numerator = n * sumXY - sumX * sumY;\n    const denominator = Math.sqrt((n * sumXX - sumX * sumX) * (n * sumYY - sumY * sumY));\n    \n    return denominator === 0 ? 0 : numerator / denominator;\n  }\n\n  private countSymptoms(symptoms: Symptom[]): { symptom: Symptom; count: number }[] {\n    const counts = new Map<Symptom, number>();\n    \n    symptoms.forEach(symptom => {\n      counts.set(symptom, (counts.get(symptom) || 0) + 1);\n    });\n    \n    return Array.from(counts.entries())\n      .map(([symptom, count]) => ({ symptom, count }))\n      .sort((a, b) => b.count - a.count);\n  }\n\n  private formatPainType(type: PainType): string {\n    return type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  private formatMenstrualStatus(status: MenstrualStatus): string {\n    const statusMap: Record<MenstrualStatus, string> = {\n      'before_period': 'Before Period',\n      'day_1': 'Day 1',\n      'day_2_3': 'Days 2-3',\n      'day_4_plus': 'Day 4+',\n      'after_period': 'After Period',\n      'mid_cycle': 'Mid-Cycle',\n      'irregular': 'Irregular'\n    };\n    return statusMap[status] || status;\n  }\n\n  private formatSymptom(symptom: Symptom): string {\n    const symptomMap: Record<Symptom, string> = {\n      'nausea': 'Nausea',\n      'vomiting': 'Vomiting',\n      'diarrhea': 'Diarrhea',\n      'headache': 'Headache',\n      'fatigue': 'Fatigue',\n      'mood_changes': 'Mood Changes',\n      'bloating': 'Bloating',\n      'breast_tenderness': 'Breast Tenderness'\n    };\n    return symptomMap[symptom] || symptom;\n  }\n\n  private capitalizeFirstLetter(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private getMonthName(monthIndex: number): string {\n    const months = [\n      'January', 'February', 'March', 'April', 'May', 'June',\n      'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n    return months[monthIndex] || 'Unknown';\n  }\n}\n\nexport default AnalyticsEngine;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/ChartUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PainAnalytics' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":271,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6463,6466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6463,6466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":401,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":401,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9800,9803],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9800,9803],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":471,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":471,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11467,11470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11467,11470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ChartUtils - Utility functions for Chart.js configuration and data formatting\n// Provides responsive chart configurations and data transformation utilities\n\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  Filler\n} from 'chart.js';\n\nimport {\n  PainRecord,\n  PainAnalytics,\n  TrendPoint,\n  PainTypeFrequency,\n  CyclePattern,\n  MenstrualStatus\n} from '../../../types/pain-tracker';\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  Filler\n);\n\nexport interface ChartColors {\n  primary: string;\n  secondary: string;\n  success: string;\n  warning: string;\n  danger: string;\n  info: string;\n  light: string;\n  dark: string;\n}\n\nexport const CHART_COLORS: ChartColors = {\n  primary: '#3B82F6',\n  secondary: '#6B7280',\n  success: '#10B981',\n  warning: '#F59E0B',\n  danger: '#EF4444',\n  info: '#06B6D4',\n  light: '#F3F4F6',\n  dark: '#1F2937'\n};\n\nexport const PAIN_LEVEL_COLORS = [\n  '#10B981', // 0-2: Green (Low)\n  '#10B981',\n  '#10B981',\n  '#F59E0B', // 3-5: Yellow (Moderate)\n  '#F59E0B',\n  '#F59E0B',\n  '#EF4444', // 6-8: Red (High)\n  '#EF4444',\n  '#EF4444',\n  '#7C2D12', // 9-10: Dark Red (Severe)\n  '#7C2D12'\n];\n\nexport const MENSTRUAL_PHASE_COLORS: Record<MenstrualStatus, string> = {\n  'before_period': '#8B5CF6',\n  'day_1': '#EF4444',\n  'day_2_3': '#F97316',\n  'day_4_plus': '#F59E0B',\n  'after_period': '#10B981',\n  'mid_cycle': '#06B6D4',\n  'irregular': '#6B7280'\n};\n\nexport class ChartUtils {\n  \n  /**\n   * Get responsive chart options for mobile and desktop\n   */\n  static getResponsiveOptions(isMobile: boolean = false) {\n    return {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          position: isMobile ? 'bottom' as const : 'top' as const,\n          labels: {\n            padding: isMobile ? 10 : 20,\n            font: {\n              size: isMobile ? 12 : 14\n            }\n          }\n        },\n        tooltip: {\n          backgroundColor: 'rgba(0, 0, 0, 0.8)',\n          titleColor: '#ffffff',\n          bodyColor: '#ffffff',\n          borderColor: CHART_COLORS.primary,\n          borderWidth: 1,\n          cornerRadius: 8,\n          displayColors: true,\n          padding: 12,\n          callbacks: {}\n        }\n      },\n      scales: {\n        x: {\n          grid: {\n            display: true,\n            color: 'rgba(0, 0, 0, 0.1)'\n          },\n          ticks: {\n            font: {\n              size: isMobile ? 10 : 12\n            },\n            maxRotation: isMobile ? 45 : 0\n          }\n        },\n        y: {\n          grid: {\n            display: true,\n            color: 'rgba(0, 0, 0, 0.1)'\n          },\n          ticks: {\n            font: {\n              size: isMobile ? 10 : 12\n            }\n          }\n        }\n      },\n      elements: {\n        point: {\n          radius: isMobile ? 3 : 4,\n          hoverRadius: isMobile ? 5 : 6\n        },\n        line: {\n          borderWidth: isMobile ? 2 : 3,\n          tension: 0.1\n        }\n      }\n    };\n  }\n\n  /**\n   * Format pain trend data for line chart\n   */\n  static formatPainTrendData(trendData: TrendPoint[], isMobile: boolean = false) {\n    const labels = trendData.map(point => {\n      const date = new Date(point.date);\n      return isMobile \n        ? date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n        : date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: '2-digit' });\n    });\n\n    const painLevels = trendData.map(point => point.painLevel);\n    const backgroundColors = painLevels.map(level => PAIN_LEVEL_COLORS[Math.floor(level)]);\n\n    return {\n      labels,\n      datasets: [\n        {\n          label: 'Pain Level',\n          data: painLevels,\n          borderColor: CHART_COLORS.primary,\n          backgroundColor: 'rgba(59, 130, 246, 0.1)',\n          pointBackgroundColor: backgroundColors,\n          pointBorderColor: backgroundColors,\n          pointBorderWidth: 2,\n          fill: true,\n          tension: 0.1\n        }\n      ]\n    };\n  }\n\n  /**\n   * Format pain distribution data for bar chart\n   */\n  static formatPainDistributionData(records: PainRecord[]) {\n    const distribution = Array(11).fill(0);\n    \n    records.forEach(record => {\n      distribution[record.painLevel]++;\n    });\n\n    const labels = distribution.map((_, index) => index.toString());\n    const backgroundColors = labels.map((_, index) => PAIN_LEVEL_COLORS[index]);\n\n    return {\n      labels,\n      datasets: [\n        {\n          label: 'Number of Records',\n          data: distribution,\n          backgroundColor: backgroundColors,\n          borderColor: backgroundColors.map(color => color.replace('0.6', '1')),\n          borderWidth: 1\n        }\n      ]\n    };\n  }\n\n  /**\n   * Format pain type frequency data for doughnut chart\n   */\n  static formatPainTypeData(painTypes: PainTypeFrequency[]) {\n    const labels = painTypes.map(type => this.formatPainType(type.type));\n    const data = painTypes.map(type => type.percentage);\n    \n    const colors = [\n      CHART_COLORS.primary,\n      CHART_COLORS.secondary,\n      CHART_COLORS.success,\n      CHART_COLORS.warning,\n      CHART_COLORS.danger,\n      CHART_COLORS.info\n    ];\n\n    return {\n      labels,\n      datasets: [\n        {\n          label: 'Pain Type Distribution',\n          data,\n          backgroundColor: colors.slice(0, labels.length),\n          borderColor: colors.slice(0, labels.length).map(color => color.replace('0.6', '1')),\n          borderWidth: 2,\n          hoverOffset: 4\n        }\n      ]\n    };\n  }\n\n  /**\n   * Format menstrual cycle pattern data for bar chart\n   */\n  static formatCyclePatternData(cyclePatterns: CyclePattern[]) {\n    const labels = cyclePatterns.map(pattern => this.formatMenstrualStatus(pattern.phase));\n    const data = cyclePatterns.map(pattern => pattern.averagePainLevel);\n    const backgroundColors = cyclePatterns.map(pattern => MENSTRUAL_PHASE_COLORS[pattern.phase]);\n\n    return {\n      labels,\n      datasets: [\n        {\n          label: 'Average Pain Level',\n          data,\n          backgroundColor: backgroundColors,\n          borderColor: backgroundColors,\n          borderWidth: 1\n        }\n      ]\n    };\n  }\n\n  /**\n   * Format treatment effectiveness data for horizontal bar chart\n   */\n  static formatTreatmentEffectivenessData(treatments: any[]) {\n    const labels = treatments.map(treatment => treatment.treatment);\n    const data = treatments.map(treatment => treatment.successRate);\n    \n    return {\n      labels,\n      datasets: [\n        {\n          label: 'Success Rate (%)',\n          data,\n          backgroundColor: data.map(rate => {\n            if (rate >= 80) return CHART_COLORS.success;\n            if (rate >= 60) return CHART_COLORS.warning;\n            return CHART_COLORS.danger;\n          }),\n          borderColor: data.map(rate => {\n            if (rate >= 80) return CHART_COLORS.success;\n            if (rate >= 60) return CHART_COLORS.warning;\n            return CHART_COLORS.danger;\n          }),\n          borderWidth: 1\n        }\n      ]\n    };\n  }\n\n  /**\n   * Get chart options for pain trend chart\n   */\n  static getPainTrendOptions(isMobile: boolean = false) {\n    return {\n      ...this.getResponsiveOptions(isMobile),\n      plugins: {\n        ...this.getResponsiveOptions(isMobile).plugins,\n        title: {\n          display: true,\n          text: 'Pain Level Trend Over Time',\n          font: {\n            size: isMobile ? 14 : 16,\n            weight: 'bold' as const\n          }\n        }\n      },\n      scales: {\n        ...this.getResponsiveOptions(isMobile).scales,\n        y: {\n          ...this.getResponsiveOptions(isMobile).scales.y,\n          min: 0,\n          max: 10,\n          title: {\n            display: true,\n            text: 'Pain Level (0-10)'\n          }\n        },\n        x: {\n          ...this.getResponsiveOptions(isMobile).scales.x,\n          title: {\n            display: true,\n            text: 'Date'\n          }\n        }\n      }\n    };\n  }\n\n  /**\n   * Get chart options for pain distribution chart\n   */\n  static getPainDistributionOptions(isMobile: boolean = false) {\n    return {\n      ...this.getResponsiveOptions(isMobile),\n      plugins: {\n        ...this.getResponsiveOptions(isMobile).plugins,\n        title: {\n          display: true,\n          text: 'Pain Level Distribution',\n          font: {\n            size: isMobile ? 14 : 16,\n            weight: 'bold' as const\n          }\n        }\n      },\n      scales: {\n        ...this.getResponsiveOptions(isMobile).scales,\n        y: {\n          ...this.getResponsiveOptions(isMobile).scales.y,\n          beginAtZero: true,\n          title: {\n            display: true,\n            text: 'Number of Records'\n          }\n        },\n        x: {\n          ...this.getResponsiveOptions(isMobile).scales.x,\n          title: {\n            display: true,\n            text: 'Pain Level'\n          }\n        }\n      }\n    };\n  }\n\n  /**\n   * Get chart options for pain type doughnut chart\n   */\n  static getPainTypeOptions(isMobile: boolean = false) {\n    return {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          position: isMobile ? 'bottom' as const : 'right' as const,\n          labels: {\n            padding: isMobile ? 10 : 20,\n            font: {\n              size: isMobile ? 12 : 14\n            }\n          }\n        },\n        title: {\n          display: true,\n          text: 'Pain Type Distribution',\n          font: {\n            size: isMobile ? 14 : 16,\n            weight: 'bold' as const\n          }\n        },\n        tooltip: {\n          callbacks: {\n            label: function(context: any) {\n              return `${context.label}: ${context.parsed}%`;\n            }\n          }\n        }\n      }\n    };\n  }\n\n  /**\n   * Get chart options for cycle pattern chart\n   */\n  static getCyclePatternOptions(isMobile: boolean = false) {\n    return {\n      ...this.getResponsiveOptions(isMobile),\n      plugins: {\n        ...this.getResponsiveOptions(isMobile).plugins,\n        title: {\n          display: true,\n          text: 'Pain Levels by Menstrual Phase',\n          font: {\n            size: isMobile ? 14 : 16,\n            weight: 'bold' as const\n          }\n        }\n      },\n      scales: {\n        ...this.getResponsiveOptions(isMobile).scales,\n        y: {\n          ...this.getResponsiveOptions(isMobile).scales.y,\n          min: 0,\n          max: 10,\n          title: {\n            display: true,\n            text: 'Average Pain Level'\n          }\n        },\n        x: {\n          ...this.getResponsiveOptions(isMobile).scales.x,\n          title: {\n            display: true,\n            text: 'Menstrual Phase'\n          }\n        }\n      }\n    };\n  }\n\n  /**\n   * Get chart options for treatment effectiveness chart\n   */\n  static getTreatmentEffectivenessOptions(isMobile: boolean = false) {\n    return {\n      indexAxis: 'y' as const,\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          display: false\n        },\n        title: {\n          display: true,\n          text: 'Treatment Effectiveness',\n          font: {\n            size: isMobile ? 14 : 16,\n            weight: 'bold' as const\n          }\n        },\n        tooltip: {\n          callbacks: {\n            label: function(context: any) {\n              return `Success Rate: ${context.parsed.x}%`;\n            }\n          }\n        }\n      },\n      scales: {\n        x: {\n          beginAtZero: true,\n          max: 100,\n          title: {\n            display: true,\n            text: 'Success Rate (%)'\n          },\n          grid: {\n            display: true,\n            color: 'rgba(0, 0, 0, 0.1)'\n          }\n        },\n        y: {\n          grid: {\n            display: false\n          },\n          ticks: {\n            font: {\n              size: isMobile ? 10 : 12\n            }\n          }\n        }\n      }\n    };\n  }\n\n  /**\n   * Calculate chart dimensions based on container and mobile status\n   */\n  static getChartDimensions(containerWidth: number, isMobile: boolean = false) {\n    const aspectRatio = isMobile ? 1.2 : 2;\n    const height = Math.min(containerWidth / aspectRatio, isMobile ? 300 : 400);\n    \n    return {\n      width: containerWidth,\n      height: Math.max(height, isMobile ? 250 : 300)\n    };\n  }\n\n  /**\n   * Format pain type for display\n   */\n  private static formatPainType(type: string): string {\n    return type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  /**\n   * Format menstrual status for display\n   */\n  private static formatMenstrualStatus(status: MenstrualStatus): string {\n    const statusMap: Record<MenstrualStatus, string> = {\n      'before_period': 'Before Period',\n      'day_1': 'Day 1',\n      'day_2_3': 'Days 2-3',\n      'day_4_plus': 'Day 4+',\n      'after_period': 'After Period',\n      'mid_cycle': 'Mid-Cycle',\n      'irregular': 'Irregular'\n    };\n    return statusMap[status] || status;\n  }\n\n  /**\n   * Generate color palette for dynamic data\n   */\n  static generateColorPalette(count: number): string[] {\n    const baseColors = Object.values(CHART_COLORS);\n    const colors: string[] = [];\n    \n    for (let i = 0; i < count; i++) {\n      colors.push(baseColors[i % baseColors.length]);\n    }\n    \n    return colors;\n  }\n\n  /**\n   * Check if device is mobile based on screen width\n   */\n  static isMobileDevice(): boolean {\n    if (typeof window === 'undefined') return false;\n    return window.innerWidth < 768;\n  }\n\n  /**\n   * Format date for chart labels\n   */\n  static formatDateForChart(date: Date, isMobile: boolean = false): string {\n    if (isMobile) {\n      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    }\n    return date.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric', \n      year: '2-digit' \n    });\n  }\n\n  /**\n   * Get empty chart data for loading states\n   */\n  static getEmptyChartData(type: 'line' | 'bar' | 'doughnut') {\n    const emptyData = {\n      labels: [],\n      datasets: []\n    };\n\n    switch (type) {\n      case 'line':\n        return {\n          ...emptyData,\n          datasets: [{\n            label: 'No Data',\n            data: [],\n            borderColor: CHART_COLORS.secondary,\n            backgroundColor: 'rgba(107, 114, 128, 0.1)'\n          }]\n        };\n      case 'bar':\n        return {\n          ...emptyData,\n          datasets: [{\n            label: 'No Data',\n            data: [],\n            backgroundColor: CHART_COLORS.light,\n            borderColor: CHART_COLORS.secondary\n          }]\n        };\n      case 'doughnut':\n        return {\n          ...emptyData,\n          datasets: [{\n            label: 'No Data',\n            data: [],\n            backgroundColor: [CHART_COLORS.light],\n            borderColor: [CHART_COLORS.secondary]\n          }]\n        };\n      default:\n        return emptyData;\n    }\n  }\n}\n\nexport default ChartUtils;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/components/AnalyticsDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/components/CyclePatternChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2407,2410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2407,2410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2499,2502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2499,2502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// CyclePatternChart - Bar chart component for displaying pain levels by menstrual phase\n// Shows average pain levels across different menstrual cycle phases with color coding\n\nimport React, { useMemo, useEffect, useState } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { CyclePattern, PainTrackerError } from '../../../../types/pain-tracker';\nimport ChartUtils from '../ChartUtils';\n\ninterface CyclePatternChartProps {\n  cyclePatterns: CyclePattern[];\n  className?: string;\n  height?: number;\n  showTitle?: boolean;\n  onError?: (error: Error) => void;\n}\n\nexport const CyclePatternChart: React.FC<CyclePatternChartProps> = ({\n  cyclePatterns,\n  className = '',\n  height,\n  showTitle = true,\n  onError\n}) => {\n  const [isMobile, setIsMobile] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check for mobile device on mount and window resize\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(ChartUtils.isMobileDevice());\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    // Simulate loading delay for smooth rendering\n    const timer = setTimeout(() => setIsLoading(false), 100);\n\n    return () => {\n      window.removeEventListener('resize', checkMobile);\n      clearTimeout(timer);\n    };\n  }, []);\n\n  // Memoized chart data\n  const chartData = useMemo(() => {\n    try {\n      if (!cyclePatterns || cyclePatterns.length === 0) {\n        return ChartUtils.getEmptyChartData('bar');\n      }\n\n      return ChartUtils.formatCyclePatternData(cyclePatterns);\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to format cycle pattern chart data',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getEmptyChartData('bar');\n    }\n  }, [cyclePatterns, onError]);\n\n  // Memoized chart options\n  const chartOptions = useMemo(() => {\n    try {\n      const options = ChartUtils.getCyclePatternOptions(isMobile);\n      \n      // Override title display if showTitle is false\n      if (!showTitle && options.plugins?.title) {\n        options.plugins.title.display = false;\n      }\n\n      // Enhanced tooltip for better context\n      if (options.plugins?.tooltip) {\n        options.plugins.tooltip.callbacks = {\n          title: function(context: any) {\n            return context[0].label;\n          },\n          label: function(context: any) {\n            const painLevel = context.parsed.y;\n            const pattern = cyclePatterns[context.dataIndex];\n            const frequency = pattern?.frequency || 0;\n            return [\n              `Average Pain: ${painLevel.toFixed(1)}/10`,\n              `Records: ${frequency}`,\n              `Common Symptoms: ${pattern?.commonSymptoms.slice(0, 2).join(', ') || 'None'}`\n            ];\n          }\n        };\n      }\n\n      return options;\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to configure cycle pattern chart options',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getResponsiveOptions(isMobile);\n    }\n  }, [isMobile, showTitle, cyclePatterns, onError]);\n\n  // Calculate container height\n  const containerHeight = useMemo(() => {\n    if (height) return height;\n    return isMobile ? 300 : 400;\n  }, [height, isMobile]);\n\n  // Calculate cycle pattern statistics\n  const cycleStats = useMemo(() => {\n    if (!cyclePatterns || cyclePatterns.length === 0) return null;\n\n    const sortedByPain = [...cyclePatterns].sort((a, b) => b.averagePainLevel - a.averagePainLevel);\n    const highestPain = sortedByPain[0];\n    const lowestPain = sortedByPain[sortedByPain.length - 1];\n    const totalRecords = cyclePatterns.reduce((sum, pattern) => sum + pattern.frequency, 0);\n    \n    return {\n      highestPain,\n      lowestPain,\n      totalRecords,\n      phasesTracked: cyclePatterns.length\n    };\n  }, [cyclePatterns]);\n\n  // Format menstrual status for display\n  const formatMenstrualStatus = (status: string): string => {\n    const statusMap: Record<string, string> = {\n      'before_period': 'Before Period',\n      'day_1': 'Day 1',\n      'day_2_3': 'Days 2-3',\n      'day_4_plus': 'Day 4+',\n      'after_period': 'After Period',\n      'mid_cycle': 'Mid-Cycle',\n      'irregular': 'Irregular'\n    };\n    return statusMap[status] || status;\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"flex flex-col items-center space-y-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <p className=\"text-sm text-gray-600\">Loading chart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-red-50 border border-red-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-red-600 mb-2\">\n            <svg className=\"w-8 h-8 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-red-700 font-medium\">Chart Error</p>\n          <p className=\"text-xs text-red-600 mt-1\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty data state\n  if (!cyclePatterns || cyclePatterns.length === 0) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-gray-400 mb-2\">\n            <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0v-4a4 4 0 118 0v4z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-gray-600 font-medium\">No Cycle Pattern Data</p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Track pain across different menstrual phases to see patterns\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Render chart\n  return (\n    <div className={`relative ${className}`}>\n      <div style={{ height: containerHeight }}>\n        <Bar \n          data={chartData} \n          options={chartOptions}\n          aria-label=\"Menstrual cycle pattern chart showing average pain levels by cycle phase\"\n          role=\"img\"\n        />\n      </div>\n      \n      {/* Chart summary for screen readers */}\n      <div className=\"sr-only\">\n        <p>\n          Menstrual cycle pattern chart showing {cyclePatterns.length} different phases. \n          {cycleStats && (\n            <>\n              Highest pain phase: {formatMenstrualStatus(cycleStats.highestPain.phase)} with average {cycleStats.highestPain.averagePainLevel.toFixed(1)}/10.\n              Lowest pain phase: {formatMenstrualStatus(cycleStats.lowestPain.phase)} with average {cycleStats.lowestPain.averagePainLevel.toFixed(1)}/10.\n              Total records: {cycleStats.totalRecords}.\n            </>\n          )}\n        </p>\n      </div>\n\n      {/* Optional statistics summary below chart */}\n      {cycleStats && !isMobile && (\n        <div className=\"mt-4 text-xs text-gray-600 bg-gray-50 p-3 rounded-lg\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <span className=\"font-medium\">Highest Pain:</span> {formatMenstrualStatus(cycleStats.highestPain.phase)} ({cycleStats.highestPain.averagePainLevel.toFixed(1)}/10)\n            </div>\n            <div>\n              <span className=\"font-medium\">Lowest Pain:</span> {formatMenstrualStatus(cycleStats.lowestPain.phase)} ({cycleStats.lowestPain.averagePainLevel.toFixed(1)}/10)\n            </div>\n          </div>\n          <div className=\"mt-2 pt-2 border-t border-gray-200\">\n            <span className=\"font-medium\">Phases Tracked:</span> {cycleStats.phasesTracked} | \n            <span className=\"font-medium ml-2\">Total Records:</span> {cycleStats.totalRecords}\n          </div>\n        </div>\n      )}\n\n      {/* Mobile-friendly phase breakdown */}\n      {isMobile && cyclePatterns.length > 0 && (\n        <div className=\"mt-4 space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-700\">Phase Breakdown:</h4>\n          {cyclePatterns.slice(0, 4).map((pattern) => (\n            <div key={pattern.phase} className=\"flex justify-between items-center text-sm bg-white p-2 rounded border\">\n              <span>{formatMenstrualStatus(pattern.phase)}</span>\n              <div className=\"text-right\">\n                <div className=\"font-medium\">{pattern.averagePainLevel.toFixed(1)}/10</div>\n                <div className=\"text-xs text-gray-500\">{pattern.frequency} records</div>\n              </div>\n            </div>\n          ))}\n          {cyclePatterns.length > 4 && (\n            <div className=\"text-xs text-gray-500 text-center\">\n              +{cyclePatterns.length - 4} more phases\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CyclePatternChart;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/components/PainDistributionChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2365,2368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2365,2368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2473,2476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2473,2476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// PainDistributionChart - Bar chart component for displaying pain level distribution\n// Shows frequency of each pain level (0-10) with color-coded bars\n\nimport React, { useMemo, useEffect, useState } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { PainRecord, PainTrackerError } from '../../../../types/pain-tracker';\nimport ChartUtils from '../ChartUtils';\n\ninterface PainDistributionChartProps {\n  records: PainRecord[];\n  className?: string;\n  height?: number;\n  showTitle?: boolean;\n  onError?: (error: Error) => void;\n}\n\nexport const PainDistributionChart: React.FC<PainDistributionChartProps> = ({\n  records,\n  className = '',\n  height,\n  showTitle = true,\n  onError\n}) => {\n  const [isMobile, setIsMobile] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check for mobile device on mount and window resize\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(ChartUtils.isMobileDevice());\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    // Simulate loading delay for smooth rendering\n    const timer = setTimeout(() => setIsLoading(false), 100);\n\n    return () => {\n      window.removeEventListener('resize', checkMobile);\n      clearTimeout(timer);\n    };\n  }, []);\n\n  // Memoized chart data\n  const chartData = useMemo(() => {\n    try {\n      if (!records || records.length === 0) {\n        return ChartUtils.getEmptyChartData('bar');\n      }\n\n      return ChartUtils.formatPainDistributionData(records);\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to format distribution chart data',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getEmptyChartData('bar');\n    }\n  }, [records, onError]);\n\n  // Memoized chart options\n  const chartOptions = useMemo(() => {\n    try {\n      const options = ChartUtils.getPainDistributionOptions(isMobile);\n      \n      // Override title display if showTitle is false\n      if (!showTitle && options.plugins?.title) {\n        options.plugins.title.display = false;\n      }\n\n      // Add custom tooltip for better context\n      if (options.plugins?.tooltip) {\n        options.plugins.tooltip.callbacks = {\n          title: function(context: any) {\n            return `Pain Level ${context[0].label}`;\n          },\n          label: function(context: any) {\n            const count = context.parsed.y;\n            const total = records.length;\n            const percentage = total > 0 ? ((count / total) * 100).toFixed(1) : '0';\n            return `${count} records (${percentage}%)`;\n          }\n        };\n      }\n\n      return options;\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to configure distribution chart options',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getResponsiveOptions(isMobile);\n    }\n  }, [isMobile, showTitle, records.length, onError]);\n\n  // Calculate container height\n  const containerHeight = useMemo(() => {\n    if (height) return height;\n    return isMobile ? 300 : 400;\n  }, [height, isMobile]);\n\n  // Calculate distribution statistics\n  const distributionStats = useMemo(() => {\n    if (!records || records.length === 0) return null;\n\n    const distribution = Array(11).fill(0);\n    records.forEach(record => {\n      distribution[record.painLevel]++;\n    });\n\n    const mostCommonLevel = distribution.indexOf(Math.max(...distribution));\n    const leastCommonLevel = distribution.indexOf(Math.min(...distribution.filter(count => count > 0)));\n    \n    return {\n      mostCommon: { level: mostCommonLevel, count: distribution[mostCommonLevel] },\n      leastCommon: { level: leastCommonLevel, count: distribution[leastCommonLevel] },\n      totalRecords: records.length\n    };\n  }, [records]);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"flex flex-col items-center space-y-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <p className=\"text-sm text-gray-600\">Loading chart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-red-50 border border-red-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-red-600 mb-2\">\n            <svg className=\"w-8 h-8 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-red-700 font-medium\">Chart Error</p>\n          <p className=\"text-xs text-red-600 mt-1\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty data state\n  if (!records || records.length === 0) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-gray-400 mb-2\">\n            <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-gray-600 font-medium\">No Distribution Data</p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Track your pain levels to see distribution patterns\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Render chart\n  return (\n    <div className={`relative ${className}`}>\n      <div style={{ height: containerHeight }}>\n        <Bar \n          data={chartData} \n          options={chartOptions}\n          aria-label=\"Pain level distribution chart showing frequency of each pain level\"\n          role=\"img\"\n        />\n      </div>\n      \n      {/* Chart summary for screen readers */}\n      <div className=\"sr-only\">\n        <p>\n          Pain distribution chart showing {records.length} total records. \n          {distributionStats && (\n            <>\n              Most common pain level: {distributionStats.mostCommon.level} ({distributionStats.mostCommon.count} records).\n              {distributionStats.leastCommon.count > 0 && (\n                <> Least common pain level: {distributionStats.leastCommon.level} ({distributionStats.leastCommon.count} records).</>\n              )}\n            </>\n          )}\n        </p>\n      </div>\n\n      {/* Optional statistics summary below chart */}\n      {distributionStats && !isMobile && (\n        <div className=\"mt-4 text-xs text-gray-600 bg-gray-50 p-3 rounded-lg\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <span className=\"font-medium\">Most Common:</span> Level {distributionStats.mostCommon.level} ({distributionStats.mostCommon.count} times)\n            </div>\n            {distributionStats.leastCommon.count > 0 && (\n              <div>\n                <span className=\"font-medium\">Least Common:</span> Level {distributionStats.leastCommon.level} ({distributionStats.leastCommon.count} times)\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PainDistributionChart;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/components/PainTrendChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/components/PainTypeChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2391,2394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2391,2394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2586,2589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2586,2589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// PainTypeChart - Doughnut chart component for displaying pain type distribution\n// Shows percentage breakdown of different pain types with responsive design\n\nimport React, { useMemo, useEffect, useState } from 'react';\nimport { Doughnut } from 'react-chartjs-2';\nimport { PainTypeFrequency, PainTrackerError } from '../../../../types/pain-tracker';\nimport ChartUtils from '../ChartUtils';\n\ninterface PainTypeChartProps {\n  painTypes: PainTypeFrequency[];\n  className?: string;\n  height?: number;\n  showTitle?: boolean;\n  showLegend?: boolean;\n  onError?: (error: Error) => void;\n}\n\nexport const PainTypeChart: React.FC<PainTypeChartProps> = ({\n  painTypes,\n  className = '',\n  height,\n  showTitle = true,\n  showLegend = true,\n  onError\n}) => {\n  const [isMobile, setIsMobile] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check for mobile device on mount and window resize\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(ChartUtils.isMobileDevice());\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    // Simulate loading delay for smooth rendering\n    const timer = setTimeout(() => setIsLoading(false), 100);\n\n    return () => {\n      window.removeEventListener('resize', checkMobile);\n      clearTimeout(timer);\n    };\n  }, []);\n\n  // Memoized chart data\n  const chartData = useMemo(() => {\n    try {\n      if (!painTypes || painTypes.length === 0) {\n        return ChartUtils.getEmptyChartData('doughnut');\n      }\n\n      return ChartUtils.formatPainTypeData(painTypes);\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to format pain type chart data',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getEmptyChartData('doughnut');\n    }\n  }, [painTypes, onError]);\n\n  // Memoized chart options\n  const chartOptions = useMemo(() => {\n    try {\n      const options = ChartUtils.getPainTypeOptions(isMobile);\n      \n      // Override title display if showTitle is false\n      if (!showTitle && options.plugins?.title) {\n        options.plugins.title.display = false;\n      }\n\n      // Override legend display if showLegend is false\n      if (!showLegend && options.plugins?.legend) {\n        (options.plugins.legend as any).display = false;\n      }\n\n      // Enhanced tooltip for better context\n      if (options.plugins?.tooltip) {\n        options.plugins.tooltip.callbacks = {\n          label: function(context: any) {\n            const percentage = context.parsed;\n            const count = painTypes[context.dataIndex]?.count || 0;\n            return `${percentage}% (${count} occurrences)`;\n          }\n        };\n      }\n\n      return options;\n    } catch (err) {\n      const error = new PainTrackerError(\n        'Failed to configure pain type chart options',\n        'CHART_ERROR',\n        err\n      );\n      setError(error.message);\n      onError?.(error);\n      return ChartUtils.getResponsiveOptions(isMobile);\n    }\n  }, [isMobile, showTitle, showLegend, painTypes, onError]);\n\n  // Calculate container height\n  const containerHeight = useMemo(() => {\n    if (height) return height;\n    return isMobile ? 300 : 350;\n  }, [height, isMobile]);\n\n  // Calculate pain type statistics\n  const painTypeStats = useMemo(() => {\n    if (!painTypes || painTypes.length === 0) return null;\n\n    const totalOccurrences = painTypes.reduce((sum, type) => sum + type.count, 0);\n    const mostCommon = painTypes[0];\n    const leastCommon = painTypes[painTypes.length - 1];\n    \n    return {\n      mostCommon,\n      leastCommon,\n      totalOccurrences,\n      uniqueTypes: painTypes.length\n    };\n  }, [painTypes]);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"flex flex-col items-center space-y-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <p className=\"text-sm text-gray-600\">Loading chart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-red-50 border border-red-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-red-600 mb-2\">\n            <svg className=\"w-8 h-8 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-red-700 font-medium\">Chart Error</p>\n          <p className=\"text-xs text-red-600 mt-1\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty data state\n  if (!painTypes || painTypes.length === 0) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg ${className}`}\n        style={{ height: containerHeight }}\n      >\n        <div className=\"text-center p-4\">\n          <div className=\"text-gray-400 mb-2\">\n            <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\n            </svg>\n          </div>\n          <p className=\"text-sm text-gray-600 font-medium\">No Pain Type Data</p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Record pain types to see distribution patterns\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Format pain type name for display\n  const formatPainType = (type: string): string => {\n    return type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n\n  // Render chart\n  return (\n    <div className={`relative ${className}`}>\n      <div style={{ height: containerHeight }}>\n        <Doughnut \n          data={chartData} \n          options={chartOptions}\n          aria-label=\"Pain type distribution chart showing percentage breakdown of different pain types\"\n          role=\"img\"\n        />\n      </div>\n      \n      {/* Chart summary for screen readers */}\n      <div className=\"sr-only\">\n        <p>\n          Pain type distribution chart showing {painTypes.length} different pain types. \n          {painTypeStats && (\n            <>\n              Most common: {formatPainType(painTypeStats.mostCommon.type)} at {painTypeStats.mostCommon.percentage.toFixed(1)}%.\n              Least common: {formatPainType(painTypeStats.leastCommon.type)} at {painTypeStats.leastCommon.percentage.toFixed(1)}%.\n              Total occurrences: {painTypeStats.totalOccurrences}.\n            </>\n          )}\n        </p>\n      </div>\n\n      {/* Optional statistics summary below chart */}\n      {painTypeStats && !isMobile && showLegend && (\n        <div className=\"mt-4 text-xs text-gray-600 bg-gray-50 p-3 rounded-lg\">\n          <div className=\"grid grid-cols-1 gap-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"font-medium\">Most Common:</span> \n              <span>{formatPainType(painTypeStats.mostCommon.type)} ({painTypeStats.mostCommon.percentage.toFixed(1)}%)</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"font-medium\">Total Types:</span> \n              <span>{painTypeStats.uniqueTypes} different types</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"font-medium\">Total Occurrences:</span> \n              <span>{painTypeStats.totalOccurrences}</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mobile-friendly legend when chart legend is hidden */}\n      {!showLegend && painTypes.length > 0 && (\n        <div className=\"mt-4 grid grid-cols-1 gap-2\">\n          {painTypes.slice(0, 5).map((painType, index) => (\n            <div key={painType.type} className=\"flex items-center justify-between text-sm\">\n              <div className=\"flex items-center space-x-2\">\n                <div \n                  className=\"w-3 h-3 rounded-full\"\n                  style={{ backgroundColor: chartData.datasets[0].backgroundColor[index] }}\n                ></div>\n                <span>{formatPainType(painType.type)}</span>\n              </div>\n              <span className=\"font-medium\">{painType.percentage.toFixed(1)}%</span>\n            </div>\n          ))}\n          {painTypes.length > 5 && (\n            <div className=\"text-xs text-gray-500 text-center mt-2\">\n              +{painTypes.length - 5} more types\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PainTypeChart;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/analytics/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/data/PainDataManager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ValidationResult' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":531,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":531,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14385,14388],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14385,14388],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":542,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":542,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14620,14623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14620,14623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// PainDataManager - Core Data Management Service\n// Provides comprehensive CRUD operations, filtering, querying, and data management for pain records\n\nimport {\n  PainRecord,\n  PainDataManagerInterface,\n  StoredData,\n  MenstrualStatus,\n  PainTrackerError,\n  ValidationResult,\n  STORAGE_KEYS\n} from '../../../types/pain-tracker';\n\nimport LocalStorageAdapter from '../storage/LocalStorageAdapter';\nimport ValidationService from '../validation/ValidationService';\n\nexport class PainDataManager implements PainDataManagerInterface {\n  private storage: LocalStorageAdapter;\n  private validation: ValidationService;\n\n  constructor(\n    storage?: LocalStorageAdapter,\n    validation?: ValidationService\n  ) {\n    this.storage = storage || new LocalStorageAdapter();\n    this.validation = validation || new ValidationService();\n  }\n\n  /**\n   * Save a new pain record with validation and error handling\n   */\n  async saveRecord(record: Omit<PainRecord, 'id' | 'createdAt' | 'updatedAt'>): Promise<PainRecord> {\n    try {\n      // Validate the record\n      const validationResult = this.validation.validateRecord(record);\n      if (!validationResult.isValid) {\n        throw new PainTrackerError(\n          'Record validation failed',\n          'VALIDATION_ERROR',\n          validationResult.errors\n        );\n      }\n\n      // Create backup before modifying data\n      await this.storage.createAutoBackup();\n\n      // Load existing records\n      const existingRecords = await this.getAllRecords();\n\n      // Create new record with generated ID and timestamps\n      const newRecord: PainRecord = {\n        ...record,\n        id: this.generateId(),\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n\n      // Check for duplicates\n      if (this.validation.checkForDuplicates(newRecord, existingRecords)) {\n        throw new PainTrackerError(\n          'Duplicate record detected',\n          'VALIDATION_ERROR',\n          { message: 'A similar record already exists for this date and time' }\n        );\n      }\n\n      // Add to records array\n      const updatedRecords = [...existingRecords, newRecord];\n\n      // Save to storage\n      await this.storage.save(STORAGE_KEYS.PAIN_RECORDS, updatedRecords);\n\n      return newRecord;\n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      throw new PainTrackerError(\n        'Failed to save pain record',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Update an existing pain record\n   */\n  async updateRecord(id: string, updates: Partial<PainRecord>): Promise<PainRecord> {\n    try {\n      // Create backup before modifying data\n      await this.storage.createAutoBackup();\n\n      // Load existing records\n      const existingRecords = await this.getAllRecords();\n      \n      // Find the record to update\n      const recordIndex = existingRecords.findIndex(record => record.id === id);\n      if (recordIndex === -1) {\n        throw new PainTrackerError(\n          'Record not found',\n          'VALIDATION_ERROR',\n          { id }\n        );\n      }\n\n      // Create updated record\n      const updatedRecord: PainRecord = {\n        ...existingRecords[recordIndex],\n        ...updates,\n        id, // Ensure ID cannot be changed\n        updatedAt: new Date()\n      };\n\n      // Validate the updated record\n      const validationResult = this.validation.validateRecord(updatedRecord);\n      if (!validationResult.isValid) {\n        throw new PainTrackerError(\n          'Updated record validation failed',\n          'VALIDATION_ERROR',\n          validationResult.errors\n        );\n      }\n\n      // Update the record in the array\n      const updatedRecords = [...existingRecords];\n      updatedRecords[recordIndex] = updatedRecord;\n\n      // Save to storage\n      await this.storage.save(STORAGE_KEYS.PAIN_RECORDS, updatedRecords);\n\n      return updatedRecord;\n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      throw new PainTrackerError(\n        'Failed to update pain record',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Delete a pain record by ID\n   */\n  async deleteRecord(id: string): Promise<void> {\n    try {\n      // Create backup before modifying data\n      await this.storage.createAutoBackup();\n\n      // Load existing records\n      const existingRecords = await this.getAllRecords();\n      \n      // Find the record to delete\n      const recordIndex = existingRecords.findIndex(record => record.id === id);\n      if (recordIndex === -1) {\n        throw new PainTrackerError(\n          'Record not found',\n          'VALIDATION_ERROR',\n          { id }\n        );\n      }\n\n      // Remove the record from the array\n      const updatedRecords = existingRecords.filter(record => record.id !== id);\n\n      // Save to storage\n      await this.storage.save(STORAGE_KEYS.PAIN_RECORDS, updatedRecords);\n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      throw new PainTrackerError(\n        'Failed to delete pain record',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get a single pain record by ID\n   */\n  async getRecord(id: string): Promise<PainRecord | null> {\n    try {\n      const records = await this.getAllRecords();\n      return records.find(record => record.id === id) || null;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to retrieve pain record',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get all pain records\n   */\n  async getAllRecords(): Promise<PainRecord[]> {\n    try {\n      const records = await this.storage.load(STORAGE_KEYS.PAIN_RECORDS);\n      \n      if (!records) {\n        return [];\n      }\n\n      // Ensure all records have proper Date objects\n      return records.map(this.deserializeRecord);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to retrieve pain records',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get pain records within a specific date range\n   */\n  async getRecordsByDateRange(start: Date, end: Date): Promise<PainRecord[]> {\n    try {\n      const allRecords = await this.getAllRecords();\n      \n      return allRecords.filter(record => {\n        const recordDate = new Date(record.date);\n        return recordDate >= start && recordDate <= end;\n      }).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to retrieve records by date range',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get pain records by pain level range\n   */\n  async getRecordsByPainLevel(minLevel: number, maxLevel?: number): Promise<PainRecord[]> {\n    try {\n      const allRecords = await this.getAllRecords();\n      const max = maxLevel !== undefined ? maxLevel : 10;\n      \n      return allRecords.filter(record => \n        record.painLevel >= minLevel && record.painLevel <= max\n      ).sort((a, b) => b.painLevel - a.painLevel);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to retrieve records by pain level',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get pain records by menstrual status\n   */\n  async getRecordsByMenstrualStatus(status: MenstrualStatus): Promise<PainRecord[]> {\n    try {\n      const allRecords = await this.getAllRecords();\n      \n      return allRecords.filter(record => \n        record.menstrualStatus === status\n      ).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to retrieve records by menstrual status',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Search pain records by text query\n   */\n  async searchRecords(query: string): Promise<PainRecord[]> {\n    try {\n      const allRecords = await this.getAllRecords();\n      const searchTerm = query.toLowerCase().trim();\n      \n      if (!searchTerm) {\n        return allRecords;\n      }\n\n      return allRecords.filter(record => {\n        // Search in notes\n        if (record.notes && record.notes.toLowerCase().includes(searchTerm)) {\n          return true;\n        }\n\n        // Search in pain types\n        if (record.painTypes.some(type => type.toLowerCase().includes(searchTerm))) {\n          return true;\n        }\n\n        // Search in locations\n        if (record.locations.some(location => location.toLowerCase().includes(searchTerm))) {\n          return true;\n        }\n\n        // Search in symptoms\n        if (record.symptoms.some(symptom => symptom.toLowerCase().includes(searchTerm))) {\n          return true;\n        }\n\n        // Search in medications\n        if (record.medications.some(med => med.name.toLowerCase().includes(searchTerm))) {\n          return true;\n        }\n\n        // Search in menstrual status\n        if (record.menstrualStatus.toLowerCase().includes(searchTerm)) {\n          return true;\n        }\n\n        return false;\n      }).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to search pain records',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Export all pain tracker data\n   */\n  async exportData(): Promise<StoredData> {\n    try {\n      const records = await this.getAllRecords();\n      const preferences = await this.storage.load(STORAGE_KEYS.USER_PREFERENCES);\n      const metadata = await this.storage.load(STORAGE_KEYS.METADATA);\n      const schemaVersion = await this.storage.load(STORAGE_KEYS.SCHEMA_VERSION);\n\n      return {\n        records,\n        preferences,\n        schemaVersion,\n        lastBackup: new Date(),\n        metadata\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to export data',\n        'EXPORT_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Import pain tracker data\n   */\n  async importData(data: StoredData): Promise<void> {\n    try {\n      // Validate imported data\n      if (!this.validateImportData(data)) {\n        throw new PainTrackerError(\n          'Invalid import data format',\n          'VALIDATION_ERROR'\n        );\n      }\n\n      // Create backup before importing\n      await this.storage.createAutoBackup();\n\n      // Validate each record\n      const validationErrors: string[] = [];\n      data.records.forEach((record, index) => {\n        const validationResult = this.validation.validateRecord(record);\n        if (!validationResult.isValid) {\n          validationErrors.push(`Record ${index + 1}: ${validationResult.errors.map(e => e.message).join(', ')}`);\n        }\n      });\n\n      if (validationErrors.length > 0) {\n        throw new PainTrackerError(\n          'Import data contains invalid records',\n          'VALIDATION_ERROR',\n          validationErrors\n        );\n      }\n\n      // Import the data\n      await this.storage.restore(JSON.stringify(data));\n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      throw new PainTrackerError(\n        'Failed to import data',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Clear all pain tracker data\n   */\n  async clearAllData(): Promise<void> {\n    try {\n      // Create backup before clearing\n      await this.storage.createAutoBackup();\n      \n      // Clear all data\n      await this.storage.clear();\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to clear all data',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get data statistics\n   */\n  async getDataStatistics(): Promise<{\n    totalRecords: number;\n    dateRange: { start: Date | null; end: Date | null };\n    averagePainLevel: number;\n    storageSize: number;\n  }> {\n    try {\n      const records = await this.getAllRecords();\n      const storageSize = await this.storage.getSize();\n\n      if (records.length === 0) {\n        return {\n          totalRecords: 0,\n          dateRange: { start: null, end: null },\n          averagePainLevel: 0,\n          storageSize\n        };\n      }\n\n      const sortedRecords = records.sort((a, b) => \n        new Date(a.date).getTime() - new Date(b.date).getTime()\n      );\n\n      const totalPainLevel = records.reduce((sum, record) => sum + record.painLevel, 0);\n      const averagePainLevel = totalPainLevel / records.length;\n\n      return {\n        totalRecords: records.length,\n        dateRange: {\n          start: new Date(sortedRecords[0].date),\n          end: new Date(sortedRecords[sortedRecords.length - 1].date)\n        },\n        averagePainLevel: Math.round(averagePainLevel * 10) / 10,\n        storageSize\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to get data statistics',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Perform data cleanup and optimization\n   */\n  async performDataCleanup(): Promise<{\n    removedRecords: number;\n    optimizedSize: number;\n  }> {\n    try {\n      // Create backup before cleanup\n      await this.storage.createAutoBackup();\n\n      const records = await this.getAllRecords();\n      const initialCount = records.length;\n\n      // Remove duplicate records (same date, time, and pain level)\n      const uniqueRecords = records.filter((record, index, array) => {\n        return array.findIndex(r => \n          r.date === record.date && \n          r.time === record.time && \n          r.painLevel === record.painLevel\n        ) === index;\n      });\n\n      // Save cleaned records\n      await this.storage.save(STORAGE_KEYS.PAIN_RECORDS, uniqueRecords);\n\n      // Clean up old backups\n      await this.storage.cleanupOldBackups();\n\n      const finalSize = await this.storage.getSize();\n\n      return {\n        removedRecords: initialCount - uniqueRecords.length,\n        optimizedSize: finalSize\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to perform data cleanup',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Generate a unique ID for new records\n   */\n  private generateId(): string {\n    return `pain_record_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Deserialize a record to ensure proper Date objects\n   */\n  private deserializeRecord(record: any): PainRecord {\n    return {\n      ...record,\n      createdAt: new Date(record.createdAt),\n      updatedAt: new Date(record.updatedAt)\n    };\n  }\n\n  /**\n   * Validate imported data structure\n   */\n  private validateImportData(data: any): data is StoredData {\n    return (\n      data &&\n      typeof data === 'object' &&\n      Array.isArray(data.records) &&\n      typeof data.preferences === 'object' &&\n      typeof data.schemaVersion === 'number'\n    );\n  }\n}\n\nexport default PainDataManager;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/export/ChartRenderer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3196,3199],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3196,3199],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4775,4778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4775,4778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6128,6131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6128,6131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":236,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7495,7498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7495,7498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":385,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11194,11197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11194,11197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ChartRenderer - Service for rendering charts as images for export\n// Converts Chart.js charts to base64 images for inclusion in medical reports\n\nimport { PainAnalytics, TrendPoint, PainTypeFrequency, CyclePattern } from '../../../types/pain-tracker';\nimport ChartUtils from '../analytics/ChartUtils';\n\nexport interface ChartImageData {\n  trendChart?: string;\n  distributionChart?: string;\n  painTypeChart?: string;\n  cyclePatternChart?: string;\n}\n\nexport class ChartRenderer {\n  private static readonly CHART_WIDTH = 800;\n  private static readonly CHART_HEIGHT = 400;\n  private static readonly CHART_BACKGROUND = '#ffffff';\n\n  /**\n   * Render all charts as base64 images for export\n   */\n  static async renderChartsForExport(analytics: PainAnalytics): Promise<ChartImageData> {\n    try {\n      const chartImages: ChartImageData = {};\n\n      // Render pain trend chart\n      if (analytics.trendData && analytics.trendData.length > 0) {\n        chartImages.trendChart = await this.renderTrendChart(analytics.trendData);\n      }\n\n      // Render pain distribution chart\n      if (analytics.totalRecords > 0) {\n        chartImages.distributionChart = await this.renderDistributionChart(analytics);\n      }\n\n      // Render pain type chart\n      if (analytics.commonPainTypes && analytics.commonPainTypes.length > 0) {\n        chartImages.painTypeChart = await this.renderPainTypeChart(analytics.commonPainTypes);\n      }\n\n      // Render cycle pattern chart\n      if (analytics.cyclePatterns && analytics.cyclePatterns.length > 0) {\n        chartImages.cyclePatternChart = await this.renderCyclePatternChart(analytics.cyclePatterns);\n      }\n\n      return chartImages;\n    } catch (error) {\n      console.error('Error rendering charts for export:', error);\n      return {};\n    }\n  }\n\n  /**\n   * Render pain trend chart as base64 image\n   */\n  private static async renderTrendChart(trendData: TrendPoint[]): Promise<string> {\n    return new Promise((resolve, reject) => {\n      try {\n        // Create canvas element\n        const canvas = document.createElement('canvas');\n        canvas.width = this.CHART_WIDTH;\n        canvas.height = this.CHART_HEIGHT;\n        const ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          reject(new Error('Failed to get canvas context'));\n          return;\n        }\n\n        // Set white background\n        ctx.fillStyle = this.CHART_BACKGROUND;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        // Import Chart.js dynamically\n        import('chart.js').then(({ Chart }) => {\n          const chartData = ChartUtils.formatPainTrendData(trendData, false);\n          const chartOptions = {\n            ...ChartUtils.getPainTrendOptions(false),\n            responsive: false,\n            maintainAspectRatio: false,\n            animation: false,\n            plugins: {\n              ...ChartUtils.getPainTrendOptions(false).plugins,\n              legend: {\n                ...ChartUtils.getPainTrendOptions(false).plugins?.legend,\n                display: true\n              }\n            }\n          };\n\n          const chart = new Chart(ctx, {\n            type: 'line',\n            data: chartData,\n            options: chartOptions as any\n          });\n\n          // Wait for chart to render, then convert to base64\n          setTimeout(() => {\n            const base64Image = canvas.toDataURL('image/png');\n            chart.destroy();\n            resolve(base64Image);\n          }, 500);\n        }).catch(reject);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Render pain distribution chart as base64 image\n   */\n  private static async renderDistributionChart(analytics: PainAnalytics): Promise<string> {\n    return new Promise((resolve, reject) => {\n      try {\n        // Create mock records for distribution calculation\n        const mockRecords = this.createMockRecordsFromAnalytics(analytics);\n        \n        const canvas = document.createElement('canvas');\n        canvas.width = this.CHART_WIDTH;\n        canvas.height = this.CHART_HEIGHT;\n        const ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          reject(new Error('Failed to get canvas context'));\n          return;\n        }\n\n        ctx.fillStyle = this.CHART_BACKGROUND;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        import('chart.js').then(({ Chart }) => {\n          const chartData = ChartUtils.formatPainDistributionData(mockRecords);\n          const chartOptions = {\n            ...ChartUtils.getPainDistributionOptions(false),\n            responsive: false,\n            maintainAspectRatio: false,\n            animation: false\n          };\n\n          const chart = new Chart(ctx, {\n            type: 'bar',\n            data: chartData,\n            options: chartOptions as any\n          });\n\n          setTimeout(() => {\n            const base64Image = canvas.toDataURL('image/png');\n            chart.destroy();\n            resolve(base64Image);\n          }, 500);\n        }).catch(reject);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Render pain type chart as base64 image\n   */\n  private static async renderPainTypeChart(painTypes: PainTypeFrequency[]): Promise<string> {\n    return new Promise((resolve, reject) => {\n      try {\n        const canvas = document.createElement('canvas');\n        canvas.width = this.CHART_WIDTH;\n        canvas.height = this.CHART_HEIGHT;\n        const ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          reject(new Error('Failed to get canvas context'));\n          return;\n        }\n\n        ctx.fillStyle = this.CHART_BACKGROUND;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        import('chart.js').then(({ Chart }) => {\n          const chartData = ChartUtils.formatPainTypeData(painTypes);\n          const chartOptions = {\n            ...ChartUtils.getPainTypeOptions(false),\n            responsive: false,\n            maintainAspectRatio: false,\n            animation: false\n          };\n\n          const chart = new Chart(ctx, {\n            type: 'doughnut',\n            data: chartData,\n            options: chartOptions as any\n          });\n\n          setTimeout(() => {\n            const base64Image = canvas.toDataURL('image/png');\n            chart.destroy();\n            resolve(base64Image);\n          }, 500);\n        }).catch(reject);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Render cycle pattern chart as base64 image\n   */\n  private static async renderCyclePatternChart(cyclePatterns: CyclePattern[]): Promise<string> {\n    return new Promise((resolve, reject) => {\n      try {\n        const canvas = document.createElement('canvas');\n        canvas.width = this.CHART_WIDTH;\n        canvas.height = this.CHART_HEIGHT;\n        const ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          reject(new Error('Failed to get canvas context'));\n          return;\n        }\n\n        ctx.fillStyle = this.CHART_BACKGROUND;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        import('chart.js').then(({ Chart }) => {\n          const chartData = ChartUtils.formatCyclePatternData(cyclePatterns);\n          const chartOptions = {\n            ...ChartUtils.getCyclePatternOptions(false),\n            responsive: false,\n            maintainAspectRatio: false,\n            animation: false\n          };\n\n          const chart = new Chart(ctx, {\n            type: 'bar',\n            data: chartData,\n            options: chartOptions as any\n          });\n\n          setTimeout(() => {\n            const base64Image = canvas.toDataURL('image/png');\n            chart.destroy();\n            resolve(base64Image);\n          }, 500);\n        }).catch(reject);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Generate chart HTML for inclusion in reports\n   */\n  static generateChartsHTML(chartImages: ChartImageData): string {\n    const charts = [];\n\n    if (chartImages.trendChart) {\n      charts.push(`\n        <div class=\"chart-container\">\n          <h4>Pain Trend Over Time</h4>\n          <img src=\"${chartImages.trendChart}\" alt=\"Pain trend chart showing pain levels over time\" class=\"chart-image\" />\n        </div>\n      `);\n    }\n\n    if (chartImages.distributionChart) {\n      charts.push(`\n        <div class=\"chart-container\">\n          <h4>Pain Level Distribution</h4>\n          <img src=\"${chartImages.distributionChart}\" alt=\"Pain level distribution chart\" class=\"chart-image\" />\n        </div>\n      `);\n    }\n\n    if (chartImages.painTypeChart) {\n      charts.push(`\n        <div class=\"chart-container\">\n          <h4>Pain Type Distribution</h4>\n          <img src=\"${chartImages.painTypeChart}\" alt=\"Pain type distribution chart\" class=\"chart-image\" />\n        </div>\n      `);\n    }\n\n    if (chartImages.cyclePatternChart) {\n      charts.push(`\n        <div class=\"chart-container\">\n          <h4>Menstrual Cycle Patterns</h4>\n          <img src=\"${chartImages.cyclePatternChart}\" alt=\"Menstrual cycle pain patterns chart\" class=\"chart-image\" />\n        </div>\n      `);\n    }\n\n    if (charts.length === 0) {\n      return `\n        <section class=\"section\">\n          <h2>Data Visualizations</h2>\n          <div class=\"no-charts-message\">\n            <p>Charts could not be generated for this report. Please view the data visualizations in the application.</p>\n          </div>\n        </section>\n      `;\n    }\n\n    return `\n      <section class=\"section\">\n        <h2>Data Visualizations</h2>\n        <div class=\"charts-grid\">\n          ${charts.join('')}\n        </div>\n      </section>\n    `;\n  }\n\n  /**\n   * Get CSS styles for chart images in reports\n   */\n  static getChartCSS(): string {\n    return `\n      .charts-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n        gap: 30px;\n        margin-top: 20px;\n      }\n\n      .chart-container {\n        background: white;\n        border: 1px solid #e5e7eb;\n        border-radius: 10px;\n        padding: 20px;\n        text-align: center;\n      }\n\n      .chart-container h4 {\n        color: #374151;\n        font-size: 16px;\n        font-weight: 600;\n        margin-bottom: 15px;\n      }\n\n      .chart-image {\n        max-width: 100%;\n        height: auto;\n        border-radius: 6px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      }\n\n      .no-charts-message {\n        background: #f9fafb;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        padding: 30px;\n        text-align: center;\n      }\n\n      .no-charts-message p {\n        color: #6b7280;\n        font-size: 14px;\n        margin: 0;\n      }\n\n      @media print {\n        .charts-grid {\n          grid-template-columns: 1fr;\n          gap: 20px;\n        }\n        \n        .chart-image {\n          max-height: 300px;\n        }\n      }\n\n      @media (max-width: 768px) {\n        .charts-grid {\n          grid-template-columns: 1fr;\n        }\n      }\n    `;\n  }\n\n  /**\n   * Create mock records from analytics data for chart rendering\n   * This is a helper method to generate sample data when actual records aren't available\n   */\n  private static createMockRecordsFromAnalytics(analytics: PainAnalytics): any[] {\n    const mockRecords = [];\n    \n    // Generate distribution based on trend data\n    if (analytics.trendData && analytics.trendData.length > 0) {\n      return analytics.trendData.map(point => ({\n        painLevel: point.painLevel,\n        date: point.date\n      }));\n    }\n\n    // Generate mock data based on average pain level\n    const avgPain = analytics.averagePainLevel;\n    const totalRecords = analytics.totalRecords;\n    \n    for (let i = 0; i < Math.min(totalRecords, 100); i++) {\n      // Generate pain levels around the average with some variation\n      const variation = (Math.random() - 0.5) * 4; // Â±2 variation\n      const painLevel = Math.max(0, Math.min(10, Math.round(avgPain + variation)));\n      \n      mockRecords.push({\n        painLevel,\n        date: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)).toISOString().split('T')[0]\n      });\n    }\n\n    return mockRecords;\n  }\n\n  /**\n   * Check if browser supports canvas rendering\n   */\n  static isCanvasSupported(): boolean {\n    try {\n      const canvas = document.createElement('canvas');\n      return !!(canvas.getContext && canvas.getContext('2d'));\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get fallback chart HTML when rendering is not supported\n   */\n  static getFallbackChartsHTML(): string {\n    return `\n      <section class=\"section\">\n        <h2>Data Visualizations</h2>\n        <div class=\"charts-fallback\">\n          <div class=\"fallback-message\">\n            <h4>Charts Not Available</h4>\n            <p>Chart rendering is not supported in this environment. Please view the interactive charts in the application for data visualization.</p>\n          </div>\n        </div>\n      </section>\n    `;\n  }\n}\n\nexport default ChartRenderer;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/export/ExportManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7113,7116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7113,7116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":221,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7496,7499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7496,7499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7825,7828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7825,7828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8346,8349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8346,8349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":331,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":331,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11320,11323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11320,11323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ExportManager - Medical Report Export Service\n// Generates professional medical reports in HTML and PDF formats for healthcare provider sharing\n\nimport {\n  PainRecord,\n  PainAnalytics,\n  PainTrackerError,\n  ExportOptions,\n  MedicalSummary,\n  TreatmentEffectiveness,\n  CyclePattern\n} from '../../../types/pain-tracker';\nimport { AnalyticsEngine } from '../analytics/AnalyticsEngine';\nimport { ReportTemplate } from './ReportTemplate';\n\nexport interface ExportManagerInterface {\n  exportToHTML(records: PainRecord[], analytics: PainAnalytics, options: ExportOptions): Promise<string>;\n  exportToPDF(records: PainRecord[], analytics: PainAnalytics, options: ExportOptions): Promise<Blob>;\n  generateMedicalSummary(records: PainRecord[], analytics: PainAnalytics): MedicalSummary;\n  generateReportHTML(records: PainRecord[], analytics: PainAnalytics, options: ExportOptions): Promise<string>;\n}\n\nexport class ExportManager implements ExportManagerInterface {\n  private analyticsEngine: AnalyticsEngine;\n\n  constructor(analyticsEngine?: AnalyticsEngine) {\n    this.analyticsEngine = analyticsEngine || new AnalyticsEngine();\n  }\n\n  /**\n   * Export pain data to HTML format\n   */\n  async exportToHTML(\n    records: PainRecord[], \n    analytics: PainAnalytics, \n    options: ExportOptions\n  ): Promise<string> {\n    try {\n      if (!records || records.length === 0) {\n        throw new PainTrackerError(\n          'No data available for export',\n          'EXPORT_ERROR',\n          { recordCount: 0 }\n        );\n      }\n\n      const filteredRecords = this.filterRecordsByDateRange(records, options.dateRange);\n      const reportHTML = this.generateReportHTML(filteredRecords, analytics, options);\n      \n      return reportHTML;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to export data to HTML',\n        'EXPORT_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Export pain data to PDF format\n   */\n  async exportToPDF(\n    records: PainRecord[], \n    analytics: PainAnalytics, \n    options: ExportOptions\n  ): Promise<Blob> {\n    try {\n      const htmlContent = await this.exportToHTML(records, analytics, options);\n      \n      // Use browser's print functionality to generate PDF\n      // This maintains consistency with existing PDF generation approach\n      const printWindow = window.open('', '_blank');\n      if (!printWindow) {\n        throw new PainTrackerError(\n          'Unable to open print window for PDF generation',\n          'EXPORT_ERROR'\n        );\n      }\n\n      printWindow.document.write(htmlContent);\n      printWindow.document.close();\n      \n      // Return a promise that resolves when PDF is ready\n      return new Promise((resolve, reject) => {\n        printWindow.onload = () => {\n          try {\n            printWindow.print();\n            \n            // Create a blob representation for consistency\n            const blob = new Blob([htmlContent], { type: 'text/html' });\n            resolve(blob);\n            \n            // Close the print window after a delay\n            setTimeout(() => {\n              printWindow.close();\n            }, 1000);\n          } catch (error) {\n            reject(new PainTrackerError(\n              'Failed to generate PDF',\n              'EXPORT_ERROR',\n              error\n            ));\n          }\n        };\n      });\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to export data to PDF',\n        'EXPORT_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Generate medical summary from pain data\n   */\n  generateMedicalSummary(records: PainRecord[], analytics: PainAnalytics): MedicalSummary {\n    try {\n      const dateRange = this.getDateRange(records);\n      const patterns = this.analyticsEngine.identifyPatterns(records);\n      \n      return {\n        patientSummary: this.generatePatientSummary(records, analytics),\n        painCharacteristics: this.generatePainCharacteristics(analytics),\n        treatmentHistory: this.generateTreatmentHistory(analytics.effectiveTreatments),\n        menstrualPatterns: this.generateMenstrualPatterns(analytics.cyclePatterns),\n        identifiedPatterns: patterns.map(p => ({\n          type: p.type,\n          description: p.description,\n          confidence: p.confidence,\n          recommendations: p.recommendations\n        })),\n        clinicalInsights: analytics.insights,\n        recommendations: this.generateClinicalRecommendations(records, analytics),\n        reportMetadata: {\n          generatedDate: new Date(),\n          dateRange,\n          totalRecords: records.length,\n          reportVersion: '1.0'\n        }\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to generate medical summary',\n        'EXPORT_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Generate complete HTML report\n   */\n  async generateReportHTML(\n    records: PainRecord[], \n    analytics: PainAnalytics, \n    options: ExportOptions\n  ): Promise<string> {\n    try {\n      const medicalSummary = this.generateMedicalSummary(records, analytics);\n      return await ReportTemplate.generateMedicalReportHTML(records, analytics, medicalSummary, options);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to generate report HTML',\n        'EXPORT_ERROR',\n        error\n      );\n    }\n  }\n\n  // Private helper methods\n\n  private filterRecordsByDateRange(records: PainRecord[], dateRange: { start: Date; end: Date }): PainRecord[] {\n    return records.filter(record => {\n      const recordDate = new Date(record.date);\n      return recordDate >= dateRange.start && recordDate <= dateRange.end;\n    });\n  }\n\n  private getDateRange(records: PainRecord[]): { start: Date; end: Date } {\n    if (records.length === 0) {\n      const now = new Date();\n      return { start: now, end: now };\n    }\n\n    const dates = records.map(r => new Date(r.date));\n    return {\n      start: new Date(Math.min(...dates.map(d => d.getTime()))),\n      end: new Date(Math.max(...dates.map(d => d.getTime())))\n    };\n  }\n\n  private generatePatientSummary(records: PainRecord[], analytics: PainAnalytics): string {\n    const dateRange = this.getDateRange(records);\n    const trackingDays = Math.ceil((dateRange.end.getTime() - dateRange.start.getTime()) / (1000 * 60 * 60 * 24));\n    \n    return `\n      <p>Patient has been tracking pain symptoms for ${trackingDays} days with ${records.length} recorded entries. \n      The average pain level during this period was ${analytics.averagePainLevel.toFixed(1)} out of 10, \n      indicating ${this.getPainLevelDescription(analytics.averagePainLevel).toLowerCase()} pain levels.</p>\n      \n      <p>Pain tracking shows ${analytics.commonPainTypes.length > 0 ? \n        `primary pain type as ${analytics.commonPainTypes[0].type.replace('_', ' ')} (${analytics.commonPainTypes[0].percentage.toFixed(1)}% of records)` : \n        'varied pain types'} with ${analytics.cyclePatterns.length > 0 ? \n        'identifiable menstrual cycle correlations' : \n        'no clear menstrual cycle patterns identified'}.</p>\n    `;\n  }\n\n  private generatePainCharacteristics(analytics: PainAnalytics): any {\n    return {\n      averageLevel: analytics.averagePainLevel,\n      levelDescription: this.getPainLevelDescription(analytics.averagePainLevel),\n      commonTypes: analytics.commonPainTypes.slice(0, 3),\n      frequencyDistribution: this.calculatePainFrequencyDistribution(analytics.trendData)\n    };\n  }\n\n  private generateTreatmentHistory(treatments: TreatmentEffectiveness[]): any {\n    return {\n      totalTreatments: treatments.length,\n      mostEffective: treatments.slice(0, 3),\n      averageEffectiveness: treatments.length > 0 ? \n        treatments.reduce((sum, t) => sum + t.averageEffectiveness, 0) / treatments.length : 0\n    };\n  }\n\n  private generateMenstrualPatterns(patterns: CyclePattern[]): any {\n    return {\n      identifiedPatterns: patterns.length,\n      highestPainPhase: patterns.length > 0 ? \n        patterns.reduce((prev, current) => prev.averagePainLevel > current.averagePainLevel ? prev : current) : null,\n      phaseAnalysis: patterns.map(p => ({\n        phase: p.phase,\n        averagePain: p.averagePainLevel,\n        frequency: p.frequency,\n        commonSymptoms: p.commonSymptoms\n      }))\n    };\n  }\n\n  private generateClinicalRecommendations(records: PainRecord[], analytics: PainAnalytics): any[] {\n    const recommendations = [];\n\n    // High pain level recommendation\n    if (analytics.averagePainLevel > 7) {\n      recommendations.push({\n        category: 'Pain Management',\n        description: 'Average pain levels are high (>7/10). Consider comprehensive pain management evaluation and potential adjustment of current treatment approach.',\n        priority: 'high',\n        timeframe: 'Immediate'\n      });\n    }\n\n    // Treatment effectiveness recommendation\n    if (analytics.effectiveTreatments.length > 0) {\n      const bestTreatment = analytics.effectiveTreatments[0];\n      if (bestTreatment.successRate > 70) {\n        recommendations.push({\n          category: 'Treatment Optimization',\n          description: `${bestTreatment.treatment} shows high effectiveness (${bestTreatment.successRate.toFixed(1)}% success rate). Consider this as primary treatment option.`,\n          priority: 'medium',\n          timeframe: 'Next appointment'\n        });\n      }\n    }\n\n    // Cycle pattern recommendation\n    if (analytics.cyclePatterns.length > 0) {\n      const highPainPhases = analytics.cyclePatterns.filter(p => p.averagePainLevel > 6);\n      if (highPainPhases.length > 0) {\n        recommendations.push({\n          category: 'Cycle Management',\n          description: `Pain levels are consistently higher during ${highPainPhases.map(p => this.formatMenstrualStatus(p.phase)).join(', ')}. Consider preventive measures during these phases.`,\n          priority: 'medium',\n          timeframe: 'Ongoing'\n        });\n      }\n    }\n\n    // Data tracking recommendation\n    if (records.length < 10) {\n      recommendations.push({\n        category: 'Data Collection',\n        description: 'Continue consistent pain tracking to build a more comprehensive picture for clinical assessment.',\n        priority: 'low',\n        timeframe: 'Ongoing'\n      });\n    }\n\n    return recommendations;\n  }\n\n  private getPainLevelDescription(level: number): string {\n    if (level >= 8) return 'Severe';\n    if (level >= 6) return 'High';\n    if (level >= 4) return 'Moderate';\n    if (level >= 2) return 'Mild';\n    return 'Minimal';\n  }\n\n  private formatMenstrualStatus(status: string): string {\n    const statusMap: Record<string, string> = {\n      'before_period': 'Before Period',\n      'day_1': 'Day 1',\n      'day_2_3': 'Days 2-3',\n      'day_4_plus': 'Day 4+',\n      'after_period': 'After Period',\n      'mid_cycle': 'Mid-Cycle',\n      'irregular': 'Irregular'\n    };\n    return statusMap[status] || status;\n  }\n\n  private formatDateRange(dateRange: { start: Date; end: Date }): string {\n    const startStr = dateRange.start.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n    const endStr = dateRange.end.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n    return `${startStr} - ${endStr}`;\n  }\n\n  private calculatePainFrequencyDistribution(trendData: any[]): Record<string, number> {\n    const distribution: Record<string, number> = {};\n    \n    trendData.forEach(point => {\n      const level = Math.floor(point.painLevel);\n      const key = `${level}-${level + 1}`;\n      distribution[key] = (distribution[key] || 0) + 1;\n    });\n\n    return distribution;\n  }\n\n\n}\n\nexport default ExportManager;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/export/ReportTemplate.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChartImageData' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5883,5886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5883,5886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":171,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6598,6601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6598,6601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7102,7105],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7102,7105],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7944,7947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7944,7947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":226,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8814,8817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8814,8817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":252,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9844,9847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9844,9847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11594,11597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11594,11597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ReportTemplate - Medical Report HTML Template Generator\n// Creates professional medical report templates consistent with existing PDF center styling\n\nimport { PainRecord, PainAnalytics, MedicalSummary, ExportOptions } from '../../../types/pain-tracker';\nimport { ChartRenderer, ChartImageData } from './ChartRenderer';\n\nexport class ReportTemplate {\n  \n  /**\n   * Generate complete medical report HTML\n   */\n  static async generateMedicalReportHTML(\n    records: PainRecord[],\n    analytics: PainAnalytics,\n    medicalSummary: MedicalSummary,\n    options: ExportOptions\n  ): Promise<string> {\n    const reportDate = new Date().toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n\n    // Render charts if requested and supported\n    let chartsHTML = '';\n    if (options.includeCharts) {\n      if (ChartRenderer.isCanvasSupported()) {\n        try {\n          const chartImages = await ChartRenderer.renderChartsForExport(analytics);\n          chartsHTML = ChartRenderer.generateChartsHTML(chartImages);\n        } catch (error) {\n          console.error('Failed to render charts:', error);\n          chartsHTML = ChartRenderer.getFallbackChartsHTML();\n        }\n      } else {\n        chartsHTML = ChartRenderer.getFallbackChartsHTML();\n      }\n    }\n\n    return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Pain Tracking Medical Report</title>\n    <style>\n        ${this.getReportCSS()}\n        ${ChartRenderer.getChartCSS()}\n    </style>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"report-container\">\n        ${this.generateReportHeader(reportDate, options, records.length)}\n        ${this.generateExecutiveSummary(analytics)}\n        ${this.generatePatientSummary(medicalSummary.patientSummary)}\n        ${this.generatePainCharacteristics(medicalSummary.painCharacteristics)}\n        ${this.generateTreatmentHistory(medicalSummary.treatmentHistory)}\n        ${this.generateMenstrualPatterns(medicalSummary.menstrualPatterns)}\n        ${this.generateClinicalInsights(medicalSummary.clinicalInsights)}\n        ${this.generateRecommendations(medicalSummary.recommendations)}\n        ${chartsHTML}\n        ${this.generateDetailedRecords(records)}\n        ${this.generateReportFooter(reportDate)}\n    </div>\n</body>\n</html>`;\n  }\n\n  /**\n   * Generate report header section\n   */\n  private static generateReportHeader(reportDate: string, options: ExportOptions, recordCount: number): string {\n    return `\n    <header class=\"report-header\">\n        <div class=\"header-content\">\n            <div class=\"header-left\">\n                <h1>Pain Tracking Medical Report</h1>\n                <div class=\"report-subtitle\">Comprehensive Pain Management Analysis</div>\n            </div>\n            <div class=\"header-right\">\n                <div class=\"report-logo\">\n                    <div class=\"logo-icon\">ğŸ“Š</div>\n                    <div class=\"logo-text\">Period Hub</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"report-meta\">\n            <div class=\"meta-item\">\n                <span class=\"meta-label\">Generated:</span>\n                <span class=\"meta-value\">${reportDate}</span>\n            </div>\n            <div class=\"meta-item\">\n                <span class=\"meta-label\">Period:</span>\n                <span class=\"meta-value\">${this.formatDateRange(options.dateRange)}</span>\n            </div>\n            <div class=\"meta-item\">\n                <span class=\"meta-label\">Total Records:</span>\n                <span class=\"meta-value\">${recordCount}</span>\n            </div>\n        </div>\n    </header>`;\n  }\n\n  /**\n   * Generate executive summary section\n   */\n  private static generateExecutiveSummary(analytics: PainAnalytics): string {\n    return `\n    <section class=\"section executive-summary\">\n        <h2>Executive Summary</h2>\n        <div class=\"summary-grid\">\n            <div class=\"summary-card primary\">\n                <div class=\"card-icon\">ğŸ“ˆ</div>\n                <h3>Average Pain Level</h3>\n                <div class=\"metric\">${analytics.averagePainLevel.toFixed(1)}/10</div>\n                <p class=\"metric-description\">${this.getPainLevelDescription(analytics.averagePainLevel)}</p>\n            </div>\n            <div class=\"summary-card secondary\">\n                <div class=\"card-icon\">ğŸ¯</div>\n                <h3>Most Common Pain Type</h3>\n                <div class=\"metric\">${analytics.commonPainTypes[0]?.type.replace('_', ' ') || 'N/A'}</div>\n                <p class=\"metric-description\">${analytics.commonPainTypes[0]?.percentage.toFixed(1) || 0}% of records</p>\n            </div>\n            <div class=\"summary-card success\">\n                <div class=\"card-icon\">ğŸ’Š</div>\n                <h3>Most Effective Treatment</h3>\n                <div class=\"metric\">${analytics.effectiveTreatments[0]?.treatment || 'N/A'}</div>\n                <p class=\"metric-description\">${analytics.effectiveTreatments[0]?.successRate.toFixed(1) || 0}% success rate</p>\n            </div>\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate patient summary section\n   */\n  private static generatePatientSummary(patientSummary: string): string {\n    return `\n    <section class=\"section\">\n        <h2>Patient Summary</h2>\n        <div class=\"patient-summary-content\">\n            <div class=\"summary-text\">\n                ${patientSummary}\n            </div>\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate pain characteristics section\n   */\n  private static generatePainCharacteristics(characteristics: any): string {\n    return `\n    <section class=\"section\">\n        <h2>Pain Characteristics</h2>\n        <div class=\"characteristics-grid\">\n            <div class=\"characteristic-card\">\n                <h4>Pain Intensity</h4>\n                <div class=\"characteristic-value\">\n                    <span class=\"value-number\">${characteristics.averageLevel.toFixed(1)}/10</span>\n                    <span class=\"value-label\">${characteristics.levelDescription}</span>\n                </div>\n            </div>\n            <div class=\"characteristic-card\">\n                <h4>Common Pain Types</h4>\n                <div class=\"pain-types-list\">\n                    ${characteristics.commonTypes.slice(0, 3).map((type: any) => `\n                        <div class=\"pain-type-item\">\n                            <span class=\"type-name\">${type.type.replace('_', ' ')}</span>\n                            <span class=\"type-percentage\">${type.percentage.toFixed(1)}%</span>\n                        </div>\n                    `).join('')}\n                </div>\n            </div>\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate treatment history section\n   */\n  private static generateTreatmentHistory(treatmentHistory: any): string {\n    return `\n    <section class=\"section\">\n        <h2>Treatment History</h2>\n        <div class=\"treatment-overview\">\n            <div class=\"treatment-stats\">\n                <div class=\"stat-item\">\n                    <span class=\"stat-number\">${treatmentHistory.totalTreatments}</span>\n                    <span class=\"stat-label\">Treatments Tracked</span>\n                </div>\n                <div class=\"stat-item\">\n                    <span class=\"stat-number\">${treatmentHistory.averageEffectiveness.toFixed(1)}/10</span>\n                    <span class=\"stat-label\">Average Effectiveness</span>\n                </div>\n            </div>\n        </div>\n        \n        <h4>Most Effective Treatments</h4>\n        <div class=\"treatment-effectiveness-list\">\n            ${treatmentHistory.mostEffective.map((treatment: any) => `\n                <div class=\"treatment-item\">\n                    <div class=\"treatment-info\">\n                        <span class=\"treatment-name\">${treatment.treatment}</span>\n                        <span class=\"treatment-usage\">${treatment.usageCount} uses</span>\n                    </div>\n                    <div class=\"treatment-metrics\">\n                        <div class=\"effectiveness-bar\">\n                            <div class=\"effectiveness-fill\" style=\"width: ${treatment.successRate}%\"></div>\n                        </div>\n                        <span class=\"effectiveness-rate\">${treatment.successRate.toFixed(1)}%</span>\n                    </div>\n                </div>\n            `).join('')}\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate menstrual patterns section\n   */\n  private static generateMenstrualPatterns(patterns: any): string {\n    if (!patterns.highestPainPhase) {\n      return `\n      <section class=\"section\">\n          <h2>Menstrual Cycle Patterns</h2>\n          <div class=\"no-data-message\">\n              <p>Insufficient data to identify menstrual cycle patterns. Continue tracking to build pattern recognition.</p>\n          </div>\n      </section>`;\n    }\n\n    return `\n    <section class=\"section\">\n        <h2>Menstrual Cycle Patterns</h2>\n        <div class=\"patterns-overview\">\n            <div class=\"pattern-highlight\">\n                <h4>Highest Pain Phase</h4>\n                <div class=\"phase-info\">\n                    <span class=\"phase-name\">${this.formatMenstrualStatus(patterns.highestPainPhase.phase)}</span>\n                    <span class=\"phase-pain\">${patterns.highestPainPhase.averagePainLevel.toFixed(1)}/10 average</span>\n                </div>\n            </div>\n        </div>\n        \n        <h4>Phase Analysis</h4>\n        <div class=\"phase-analysis-grid\">\n            ${patterns.phaseAnalysis.map((phase: any) => `\n                <div class=\"phase-card\">\n                    <div class=\"phase-header\">\n                        <span class=\"phase-name\">${this.formatMenstrualStatus(phase.phase)}</span>\n                        <span class=\"phase-pain-level pain-level-${Math.floor(phase.averagePain)}\">${phase.averagePain.toFixed(1)}/10</span>\n                    </div>\n                    <div class=\"phase-details\">\n                        <span class=\"phase-frequency\">${phase.frequency} records</span>\n                        ${phase.commonSymptoms.length > 0 ? `\n                            <div class=\"phase-symptoms\">\n                                ${phase.commonSymptoms.slice(0, 2).map((symptom: string) => `\n                                    <span class=\"symptom-tag\">${symptom.replace('_', ' ')}</span>\n                                `).join('')}\n                            </div>\n                        ` : ''}\n                    </div>\n                </div>\n            `).join('')}\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate clinical insights section\n   */\n  private static generateClinicalInsights(insights: string[]): string {\n    return `\n    <section class=\"section\">\n        <h2>Clinical Insights</h2>\n        <div class=\"insights-container\">\n            ${insights.map((insight, index) => `\n                <div class=\"insight-item\">\n                    <div class=\"insight-number\">${index + 1}</div>\n                    <div class=\"insight-content\">\n                        <p>${insight}</p>\n                    </div>\n                </div>\n            `).join('')}\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate recommendations section\n   */\n  private static generateRecommendations(recommendations: any[]): string {\n    return `\n    <section class=\"section\">\n        <h2>Clinical Recommendations</h2>\n        <div class=\"recommendations-container\">\n            ${recommendations.map(rec => `\n                <div class=\"recommendation-card priority-${rec.priority}\">\n                    <div class=\"recommendation-header\">\n                        <h4>${rec.category}</h4>\n                        <div class=\"priority-badge priority-${rec.priority}\">\n                            ${rec.priority.toUpperCase()} PRIORITY\n                        </div>\n                    </div>\n                    <div class=\"recommendation-content\">\n                        <p>${rec.description}</p>\n                        <div class=\"recommendation-timeframe\">\n                            <strong>Timeframe:</strong> ${rec.timeframe}\n                        </div>\n                    </div>\n                </div>\n            `).join('')}\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate charts section placeholder\n   */\n  private static generateChartsSection(): string {\n    return `\n    <section class=\"section\">\n        <h2>Data Visualizations</h2>\n        <div class=\"charts-container\">\n            <div class=\"chart-placeholder\">\n                <div class=\"chart-icon\">ğŸ“Š</div>\n                <h4>Pain Trend Over Time</h4>\n                <p>Chart showing pain levels throughout the tracking period</p>\n            </div>\n            <div class=\"chart-placeholder\">\n                <div class=\"chart-icon\">ğŸ“ˆ</div>\n                <h4>Pain Level Distribution</h4>\n                <p>Frequency distribution of recorded pain levels</p>\n            </div>\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate detailed records section\n   */\n  private static generateDetailedRecords(records: PainRecord[]): string {\n    const displayRecords = records.slice(0, 50); // Limit to first 50 records for readability\n    \n    return `\n    <section class=\"section\">\n        <h2>Detailed Pain Records</h2>\n        <div class=\"records-table-container\">\n            <table class=\"records-table\">\n                <thead>\n                    <tr>\n                        <th>Date</th>\n                        <th>Time</th>\n                        <th>Pain Level</th>\n                        <th>Type</th>\n                        <th>Location</th>\n                        <th>Menstrual Status</th>\n                        <th>Treatments</th>\n                        <th>Effectiveness</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${displayRecords.map(record => `\n                        <tr>\n                            <td>${new Date(record.date).toLocaleDateString()}</td>\n                            <td>${record.time}</td>\n                            <td class=\"pain-level pain-level-${Math.floor(record.painLevel)}\">${record.painLevel}/10</td>\n                            <td>${record.painTypes.map(t => t.replace('_', ' ')).join(', ')}</td>\n                            <td>${record.locations.map(l => l.replace('_', ' ')).join(', ')}</td>\n                            <td>${this.formatMenstrualStatus(record.menstrualStatus)}</td>\n                            <td>${record.medications.map(m => m.name).join(', ')}</td>\n                            <td class=\"effectiveness-rating\">${record.effectiveness}/10</td>\n                        </tr>\n                    `).join('')}\n                </tbody>\n            </table>\n            ${records.length > 50 ? `\n                <div class=\"table-note\">\n                    <p>Showing first 50 of ${records.length} records. Complete data available in source application.</p>\n                </div>\n            ` : ''}\n        </div>\n    </section>`;\n  }\n\n  /**\n   * Generate report footer\n   */\n  private static generateReportFooter(reportDate: string): string {\n    return `\n    <footer class=\"report-footer\">\n        <div class=\"footer-content\">\n            <div class=\"disclaimer\">\n                <h4>Important Medical Disclaimer</h4>\n                <p>This report is generated from patient self-reported data and should be used as supplementary information for clinical assessment. It does not replace professional medical diagnosis or treatment recommendations.</p>\n            </div>\n            <div class=\"privacy-notice\">\n                <h4>Privacy Notice</h4>\n                <p>This report contains sensitive health information. Please handle according to applicable privacy regulations (HIPAA, GDPR, etc.).</p>\n            </div>\n            <div class=\"generated-info\">\n                <p>Generated by Period Hub Pain Tracker on ${reportDate}</p>\n                <p>Report Version 1.0 | For Healthcare Provider Use</p>\n            </div>\n        </div>\n    </footer>`;\n  }\n\n  // Helper methods\n\n  private static formatDateRange(dateRange: { start: Date; end: Date }): string {\n    const startStr = dateRange.start.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n    const endStr = dateRange.end.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n    return `${startStr} - ${endStr}`;\n  }\n\n  private static getPainLevelDescription(level: number): string {\n    if (level >= 8) return 'Severe Pain';\n    if (level >= 6) return 'High Pain';\n    if (level >= 4) return 'Moderate Pain';\n    if (level >= 2) return 'Mild Pain';\n    return 'Minimal Pain';\n  }\n\n  private static formatMenstrualStatus(status: string): string {\n    const statusMap: Record<string, string> = {\n      'before_period': 'Before Period',\n      'day_1': 'Day 1',\n      'day_2_3': 'Days 2-3',\n      'day_4_plus': 'Day 4+',\n      'after_period': 'After Period',\n      'mid_cycle': 'Mid-Cycle',\n      'irregular': 'Irregular'\n    };\n    return statusMap[status] || status;\n  }\n\n  /**\n   * Get comprehensive CSS styles for medical report\n   * Consistent with existing PDF center styling\n   */\n  private static getReportCSS(): string {\n    return `\n      /* Medical Report Styles - Consistent with Period Hub PDF Center */\n      * {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n      }\n\n      body {\n        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        line-height: 1.6;\n        color: #1f2937;\n        background: #ffffff;\n        font-size: 14px;\n      }\n\n      .report-container {\n        max-width: 210mm;\n        margin: 0 auto;\n        padding: 20mm;\n        background: white;\n        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n      }\n\n      /* Header Styles - Matching PDF Center Design */\n      .report-header {\n        border-bottom: 3px solid #7c3aed;\n        padding-bottom: 25px;\n        margin-bottom: 35px;\n        background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);\n        border-radius: 12px;\n        padding: 25px;\n        margin-bottom: 35px;\n      }\n\n      .header-content {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        margin-bottom: 20px;\n      }\n\n      .header-left h1 {\n        background: linear-gradient(135deg, #7c3aed 0%, #ec4899 100%);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;\n        background-clip: text;\n        font-size: 32px;\n        font-weight: 700;\n        margin-bottom: 5px;\n        letter-spacing: -0.5px;\n      }\n\n      .report-subtitle {\n        color: #6b7280;\n        font-size: 16px;\n        font-weight: 500;\n      }\n\n      .header-right {\n        text-align: right;\n      }\n\n      .report-logo {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        color: #7c3aed;\n        font-weight: 600;\n      }\n\n      .logo-icon {\n        font-size: 24px;\n      }\n\n      .logo-text {\n        font-size: 18px;\n        font-weight: 600;\n      }\n\n      .report-meta {\n        display: flex;\n        gap: 40px;\n        flex-wrap: wrap;\n      }\n\n      .meta-item {\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n      }\n\n      .meta-label {\n        font-size: 12px;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        font-weight: 500;\n      }\n\n      .meta-value {\n        font-size: 14px;\n        color: #1f2937;\n        font-weight: 600;\n      }\n\n      /* Section Styles */\n      .section {\n        margin-bottom: 35px;\n        page-break-inside: avoid;\n      }\n\n      .section h2 {\n        color: #1f2937;\n        font-size: 22px;\n        font-weight: 600;\n        margin-bottom: 20px;\n        border-bottom: 2px solid #f3f4f6;\n        padding-bottom: 8px;\n        position: relative;\n      }\n\n      .section h2::before {\n        content: '';\n        position: absolute;\n        bottom: -2px;\n        left: 0;\n        width: 60px;\n        height: 2px;\n        background: #e11d48;\n      }\n\n      /* Executive Summary */\n      .executive-summary {\n        background: linear-gradient(135deg, #fef7ff 0%, #f0f9ff 100%);\n        border-radius: 12px;\n        padding: 25px;\n        margin-bottom: 40px;\n      }\n\n      .summary-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n        gap: 20px;\n        margin-top: 20px;\n      }\n\n      .summary-card {\n        background: white;\n        border-radius: 10px;\n        padding: 25px;\n        text-align: center;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n        border: 1px solid #e5e7eb;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .summary-card::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 4px;\n      }\n\n      .summary-card.primary::before { background: #e11d48; }\n      .summary-card.secondary::before { background: #3b82f6; }\n      .summary-card.success::before { background: #10b981; }\n\n      .card-icon {\n        font-size: 24px;\n        margin-bottom: 10px;\n      }\n\n      .summary-card h3 {\n        font-size: 14px;\n        color: #6b7280;\n        margin-bottom: 12px;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        font-weight: 500;\n      }\n\n      .metric {\n        font-size: 28px;\n        font-weight: 700;\n        color: #1f2937;\n        margin-bottom: 8px;\n      }\n\n      .metric-description {\n        font-size: 13px;\n        color: #6b7280;\n        font-weight: 500;\n      }\n\n      /* Patient Summary */\n      .patient-summary-content {\n        background: #fef7ff;\n        border-left: 4px solid #e11d48;\n        padding: 25px;\n        border-radius: 8px;\n      }\n\n      .summary-text {\n        font-size: 15px;\n        line-height: 1.7;\n        color: #374151;\n      }\n\n      /* Characteristics */\n      .characteristics-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        gap: 25px;\n      }\n\n      .characteristic-card {\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 10px;\n        padding: 20px;\n      }\n\n      .characteristic-card h4 {\n        color: #374151;\n        margin-bottom: 15px;\n        font-size: 16px;\n        font-weight: 600;\n      }\n\n      .characteristic-value {\n        display: flex;\n        align-items: baseline;\n        gap: 10px;\n        margin-bottom: 15px;\n      }\n\n      .value-number {\n        font-size: 24px;\n        font-weight: 700;\n        color: #e11d48;\n      }\n\n      .value-label {\n        font-size: 14px;\n        color: #6b7280;\n        font-weight: 500;\n      }\n\n      .pain-types-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .pain-type-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 12px;\n        background: white;\n        border-radius: 6px;\n        border: 1px solid #e5e7eb;\n      }\n\n      .type-name {\n        font-weight: 500;\n        color: #374151;\n        text-transform: capitalize;\n      }\n\n      .type-percentage {\n        font-weight: 600;\n        color: #e11d48;\n        font-size: 13px;\n      }\n\n      /* Treatment History */\n      .treatment-overview {\n        background: #f0fdf4;\n        border-radius: 10px;\n        padding: 20px;\n        margin-bottom: 25px;\n      }\n\n      .treatment-stats {\n        display: flex;\n        gap: 40px;\n        justify-content: center;\n      }\n\n      .stat-item {\n        text-align: center;\n      }\n\n      .stat-number {\n        display: block;\n        font-size: 24px;\n        font-weight: 700;\n        color: #16a34a;\n        margin-bottom: 4px;\n      }\n\n      .stat-label {\n        font-size: 13px;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .treatment-effectiveness-list {\n        display: flex;\n        flex-direction: column;\n        gap: 15px;\n      }\n\n      .treatment-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 15px;\n        background: #f8fafc;\n        border-radius: 8px;\n        border: 1px solid #e2e8f0;\n      }\n\n      .treatment-info {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n      }\n\n      .treatment-name {\n        font-weight: 600;\n        color: #374151;\n        font-size: 15px;\n      }\n\n      .treatment-usage {\n        font-size: 12px;\n        color: #6b7280;\n      }\n\n      .treatment-metrics {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .effectiveness-bar {\n        width: 100px;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        overflow: hidden;\n      }\n\n      .effectiveness-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #10b981, #16a34a);\n        border-radius: 4px;\n        transition: width 0.3s ease;\n      }\n\n      .effectiveness-rate {\n        font-weight: 600;\n        color: #16a34a;\n        font-size: 14px;\n        min-width: 45px;\n      }\n\n      /* Menstrual Patterns */\n      .patterns-overview {\n        background: #fef3f2;\n        border-radius: 10px;\n        padding: 20px;\n        margin-bottom: 25px;\n      }\n\n      .pattern-highlight h4 {\n        color: #dc2626;\n        margin-bottom: 10px;\n        font-size: 16px;\n      }\n\n      .phase-info {\n        display: flex;\n        align-items: center;\n        gap: 15px;\n      }\n\n      .phase-name {\n        font-weight: 600;\n        color: #374151;\n        font-size: 16px;\n      }\n\n      .phase-pain {\n        color: #dc2626;\n        font-weight: 600;\n        font-size: 14px;\n      }\n\n      .phase-analysis-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n      }\n\n      .phase-card {\n        background: white;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        padding: 15px;\n      }\n\n      .phase-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 10px;\n      }\n\n      .phase-card .phase-name {\n        font-size: 14px;\n        font-weight: 600;\n        color: #374151;\n      }\n\n      .phase-pain-level {\n        font-size: 13px;\n        font-weight: 600;\n        padding: 2px 6px;\n        border-radius: 4px;\n      }\n\n      .pain-level-0, .pain-level-1, .pain-level-2 { \n        background: #dcfce7; color: #16a34a; \n      }\n      .pain-level-3, .pain-level-4, .pain-level-5 { \n        background: #fef3c7; color: #d97706; \n      }\n      .pain-level-6, .pain-level-7, .pain-level-8 { \n        background: #fee2e2; color: #dc2626; \n      }\n      .pain-level-9, .pain-level-10 { \n        background: #fecaca; color: #991b1b; \n      }\n\n      .phase-details {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .phase-frequency {\n        font-size: 12px;\n        color: #6b7280;\n      }\n\n      .phase-symptoms {\n        display: flex;\n        gap: 4px;\n        flex-wrap: wrap;\n      }\n\n      .symptom-tag {\n        background: #e0e7ff;\n        color: #3730a3;\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 10px;\n        font-weight: 500;\n        text-transform: capitalize;\n      }\n\n      /* Clinical Insights */\n      .insights-container {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n      }\n\n      .insight-item {\n        display: flex;\n        gap: 15px;\n        background: #eff6ff;\n        border-left: 4px solid #3b82f6;\n        padding: 20px;\n        border-radius: 8px;\n      }\n\n      .insight-number {\n        background: #3b82f6;\n        color: white;\n        width: 24px;\n        height: 24px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        font-weight: 600;\n        flex-shrink: 0;\n      }\n\n      .insight-content p {\n        color: #374151;\n        line-height: 1.6;\n        margin: 0;\n      }\n\n      /* Recommendations */\n      .recommendations-container {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n      }\n\n      .recommendation-card {\n        border-radius: 10px;\n        padding: 20px;\n        border: 1px solid;\n        position: relative;\n      }\n\n      .recommendation-card.priority-high {\n        background: #fef2f2;\n        border-color: #fecaca;\n      }\n\n      .recommendation-card.priority-medium {\n        background: #fffbeb;\n        border-color: #fed7aa;\n      }\n\n      .recommendation-card.priority-low {\n        background: #f0fdf4;\n        border-color: #bbf7d0;\n      }\n\n      .recommendation-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        margin-bottom: 12px;\n      }\n\n      .recommendation-header h4 {\n        color: #374151;\n        font-size: 16px;\n        font-weight: 600;\n        margin: 0;\n      }\n\n      .priority-badge {\n        padding: 4px 8px;\n        border-radius: 4px;\n        font-size: 10px;\n        font-weight: 600;\n        letter-spacing: 0.5px;\n      }\n\n      .priority-badge.priority-high {\n        background: #dc2626;\n        color: white;\n      }\n\n      .priority-badge.priority-medium {\n        background: #d97706;\n        color: white;\n      }\n\n      .priority-badge.priority-low {\n        background: #16a34a;\n        color: white;\n      }\n\n      .recommendation-content p {\n        color: #374151;\n        line-height: 1.6;\n        margin-bottom: 10px;\n      }\n\n      .recommendation-timeframe {\n        font-size: 13px;\n        color: #6b7280;\n      }\n\n      /* Charts Section */\n      .charts-container {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        gap: 25px;\n      }\n\n      .chart-placeholder {\n        background: #f8fafc;\n        border: 2px dashed #cbd5e1;\n        border-radius: 10px;\n        padding: 40px;\n        text-align: center;\n        color: #64748b;\n      }\n\n      .chart-icon {\n        font-size: 32px;\n        margin-bottom: 15px;\n      }\n\n      .chart-placeholder h4 {\n        color: #374151;\n        margin-bottom: 8px;\n        font-size: 16px;\n      }\n\n      .chart-placeholder p {\n        font-size: 14px;\n        color: #6b7280;\n      }\n\n      /* Records Table */\n      .records-table-container {\n        overflow-x: auto;\n        background: white;\n        border-radius: 10px;\n        border: 1px solid #e5e7eb;\n      }\n\n      .records-table {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 13px;\n      }\n\n      .records-table th,\n      .records-table td {\n        padding: 12px 8px;\n        text-align: left;\n        border-bottom: 1px solid #f3f4f6;\n      }\n\n      .records-table th {\n        background: #f9fafb;\n        font-weight: 600;\n        color: #374151;\n        font-size: 12px;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .records-table tbody tr:hover {\n        background: #f9fafb;\n      }\n\n      .records-table .pain-level {\n        font-weight: 600;\n        text-align: center;\n      }\n\n      .effectiveness-rating {\n        font-weight: 600;\n        text-align: center;\n        color: #16a34a;\n      }\n\n      .table-note {\n        padding: 15px;\n        background: #f9fafb;\n        border-top: 1px solid #e5e7eb;\n        text-align: center;\n      }\n\n      .table-note p {\n        font-size: 12px;\n        color: #6b7280;\n        margin: 0;\n      }\n\n      .no-data-message {\n        background: #f9fafb;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        padding: 30px;\n        text-align: center;\n      }\n\n      .no-data-message p {\n        color: #6b7280;\n        font-size: 14px;\n        margin: 0;\n      }\n\n      /* Footer */\n      .report-footer {\n        border-top: 2px solid #f3f4f6;\n        padding-top: 30px;\n        margin-top: 50px;\n      }\n\n      .footer-content {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 30px;\n        margin-bottom: 25px;\n      }\n\n      .disclaimer,\n      .privacy-notice {\n        background: #fef7ff;\n        padding: 20px;\n        border-radius: 8px;\n        border: 1px solid #f3e8ff;\n      }\n\n      .disclaimer h4,\n      .privacy-notice h4 {\n        color: #7c2d12;\n        font-size: 14px;\n        margin-bottom: 8px;\n        font-weight: 600;\n      }\n\n      .disclaimer p,\n      .privacy-notice p {\n        font-size: 12px;\n        color: #6b7280;\n        line-height: 1.5;\n        margin: 0;\n      }\n\n      .generated-info {\n        text-align: center;\n        padding-top: 20px;\n        border-top: 1px solid #f3f4f6;\n      }\n\n      .generated-info p {\n        font-size: 12px;\n        color: #6b7280;\n        margin: 4px 0;\n      }\n\n      /* Print Styles */\n      @media print {\n        .report-container {\n          margin: 0;\n          padding: 15mm;\n          box-shadow: none;\n        }\n        \n        .section {\n          page-break-inside: avoid;\n        }\n        \n        .summary-grid {\n          grid-template-columns: repeat(3, 1fr);\n        }\n        \n        .characteristics-grid,\n        .phase-analysis-grid {\n          grid-template-columns: repeat(2, 1fr);\n        }\n        \n        .footer-content {\n          grid-template-columns: 1fr;\n          gap: 15px;\n        }\n      }\n\n      /* Mobile Responsive */\n      @media (max-width: 768px) {\n        .report-container {\n          padding: 15px;\n        }\n        \n        .header-content {\n          flex-direction: column;\n          gap: 15px;\n        }\n        \n        .report-meta {\n          flex-direction: column;\n          gap: 10px;\n        }\n        \n        .summary-grid {\n          grid-template-columns: 1fr;\n        }\n        \n        .characteristics-grid,\n        .phase-analysis-grid {\n          grid-template-columns: 1fr;\n        }\n        \n        .footer-content {\n          grid-template-columns: 1fr;\n        }\n      }\n    `;\n  }\n}\n\nexport default ReportTemplate;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/migration/MigrationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PainRecord' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2073,2076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2073,2076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2108,2111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2108,2111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4065,4068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4065,4068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4165,4168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4165,4168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6053,6056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6053,6056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7449,7452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7449,7452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":270,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8161,8164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8161,8164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":278,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8413,8416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8413,8416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":280,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":280,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":288,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":288,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8603,8606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8603,8606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9173,9176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9173,9176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":322,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":322,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9599,9602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9599,9602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":331,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":331,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9853,9856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9853,9856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":340,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":340,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10132,10135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10132,10135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":381,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":381,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11404,11407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11404,11407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":415,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":415,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12373,12376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12373,12376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":483,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":483,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14215,14218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14215,14218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":483,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":483,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14223,14226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14223,14226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":514,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":514,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14985,14988],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14985,14988],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":514,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":514,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14991,14994],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14991,14994],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":515,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":515,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15018,15021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15018,15021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// MigrationService - Enhanced Pain Tracker Data Migration System\n// Handles schema versioning and data migration between different versions\n\nimport {\n  PainRecord,\n  StoredData,\n  Migration,\n  MigrationPlan,\n  PainTrackerError,\n  CURRENT_SCHEMA_VERSION\n} from '../../../types/pain-tracker';\n\nexport class MigrationService {\n  private migrations: Map<string, Migration> = new Map();\n\n  constructor() {\n    this.initializeMigrations();\n  }\n\n  /**\n   * Initialize all available migrations\n   */\n  private initializeMigrations(): void {\n    // Migration from version 0 (legacy) to version 1 (enhanced)\n    this.registerMigration({\n      version: 1,\n      description: 'Migrate from legacy pain tracker to enhanced version',\n      up: this.migrateLegacyToV1.bind(this),\n      down: this.migrateV1ToLegacy.bind(this),\n      validate: this.validateV1Data.bind(this)\n    });\n\n    // Future migrations will be added here\n    // Example:\n    // this.registerMigration({\n    //   version: 2,\n    //   description: 'Add new fields for version 2',\n    //   up: this.migrateV1ToV2.bind(this),\n    //   down: this.migrateV2ToV1.bind(this),\n    //   validate: this.validateV2Data.bind(this)\n    // });\n  }\n\n  /**\n   * Register a new migration\n   */\n  registerMigration(migration: Migration): void {\n    const key = `v${migration.version}`;\n    this.migrations.set(key, migration);\n  }\n\n  /**\n   * Get migration plan for upgrading from one version to another\n   */\n  getMigrationPlan(fromVersion: number, toVersion: number): MigrationPlan {\n    const migrations: Migration[] = [];\n\n    for (let version = fromVersion + 1; version <= toVersion; version++) {\n      const migration = this.migrations.get(`v${version}`);\n      if (migration) {\n        migrations.push(migration);\n      } else {\n        throw new PainTrackerError(\n          `No migration found for version ${version}`,\n          'MIGRATION_ERROR'\n        );\n      }\n    }\n\n    return {\n      fromVersion,\n      toVersion,\n      migrations\n    };\n  }\n\n  /**\n   * Execute migration plan\n   */\n  async executeMigrationPlan(data: any, plan: MigrationPlan): Promise<any> {\n    let migratedData = data;\n\n    try {\n      for (const migration of plan.migrations) {\n        console.log(`Executing migration: ${migration.description}`);\n        \n        // Create backup before migration\n        const backup = JSON.parse(JSON.stringify(migratedData));\n        \n        try {\n          // Execute migration\n          migratedData = migration.up(migratedData);\n          \n          // Validate migrated data\n          if (!migration.validate(migratedData)) {\n            throw new Error('Migration validation failed');\n          }\n          \n          console.log(`Migration to version ${migration.version} completed successfully`);\n        } catch (error) {\n          console.error(`Migration to version ${migration.version} failed:`, error);\n          \n          // Attempt rollback\n          try {\n            migratedData = migration.down(backup);\n            console.log(`Rollback to previous version successful`);\n          } catch (rollbackError) {\n            console.error('Rollback failed:', rollbackError);\n          }\n          \n          throw new PainTrackerError(\n            `Migration to version ${migration.version} failed: ${error}`,\n            'MIGRATION_ERROR',\n            { originalError: error, backup }\n          );\n        }\n      }\n\n      return migratedData;\n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      throw new PainTrackerError(\n        'Migration plan execution failed',\n        'MIGRATION_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Check if migration is needed\n   */\n  isMigrationNeeded(currentVersion: number): boolean {\n    return currentVersion < CURRENT_SCHEMA_VERSION;\n  }\n\n  /**\n   * Get current schema version\n   */\n  getCurrentVersion(): number {\n    return CURRENT_SCHEMA_VERSION;\n  }\n\n  /**\n   * Migrate from legacy pain tracker (version 0) to enhanced version 1\n   */\n  private migrateLegacyToV1(legacyData: any): StoredData {\n    try {\n      // Handle different legacy data formats\n      let legacyRecords: any[] = [];\n      \n      if (Array.isArray(legacyData)) {\n        // Direct array of records\n        legacyRecords = legacyData;\n      } else if (legacyData && Array.isArray(legacyData.records)) {\n        // Wrapped in records property\n        legacyRecords = legacyData.records;\n      } else if (legacyData && legacyData.painEntries) {\n        // Old format with painEntries\n        legacyRecords = legacyData.painEntries;\n      } else {\n        // No legacy data found\n        legacyRecords = [];\n      }\n\n      // Convert legacy records to new format\n      const migratedRecords = legacyRecords.map((legacyRecord, index) => {\n        const now = new Date();\n        \n        return {\n          id: legacyRecord.id || `migrated_${Date.now()}_${index}`,\n          date: legacyRecord.date || now.toISOString().split('T')[0],\n          time: this.extractTimeFromLegacyRecord(legacyRecord) || '12:00',\n          painLevel: this.normalizePainLevel(legacyRecord.intensity || legacyRecord.painLevel || 0),\n          painTypes: this.migratePainTypes(legacyRecord),\n          locations: this.migrateLocations(legacyRecord),\n          symptoms: this.migrateSymptoms(legacyRecord.symptoms || []),\n          menstrualStatus: this.migrateMenstrualStatus(legacyRecord.menstrualStatus),\n          medications: this.migrateMedications(legacyRecord.treatments || legacyRecord.medications || []),\n          effectiveness: this.normalizeEffectiveness(legacyRecord.effectiveness || 0),\n          lifestyleFactors: this.migrateLifestyleFactors(legacyRecord),\n          notes: legacyRecord.notes || '',\n          createdAt: legacyRecord.createdAt ? new Date(legacyRecord.createdAt) : now,\n          updatedAt: legacyRecord.updatedAt ? new Date(legacyRecord.updatedAt) : now\n        };\n      });\n\n      // Create new data structure\n      const migratedData: StoredData = {\n        records: migratedRecords as any,\n        preferences: {\n          defaultMedications: [],\n          reminderSettings: {\n            enabled: false,\n            frequency: 'daily',\n            time: '20:00'\n          },\n          exportPreferences: {\n            defaultFormat: 'pdf',\n            includeChartsDefault: true,\n            includeSummaryDefault: true,\n            defaultDateRange: 'last_3_months'\n          },\n          privacySettings: {\n            allowAnalytics: true,\n            allowExport: true,\n            dataRetentionMonths: 24,\n            requireConfirmationForDelete: true\n          },\n          displaySettings: {\n            theme: 'auto',\n            language: 'en',\n            dateFormat: 'MM/DD/YYYY',\n            timeFormat: '12h'\n          }\n        },\n        schemaVersion: 1,\n        lastBackup: new Date(),\n        metadata: {\n          createdAt: new Date(),\n          lastModified: new Date(),\n          version: '1.0.0',\n          recordCount: migratedRecords.length,\n          dataSize: 0 // Will be calculated by storage adapter\n        }\n      };\n\n      return migratedData;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to migrate legacy data to version 1',\n        'MIGRATION_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Migrate from enhanced version 1 back to legacy format (rollback)\n   */\n  private migrateV1ToLegacy(v1Data: StoredData): any {\n    try {\n      const legacyRecords = v1Data.records.map(record => ({\n        id: record.id,\n        date: record.date,\n        intensity: record.painLevel,\n        menstrualStatus: this.convertMenstrualStatusToLegacy(record.menstrualStatus),\n        symptoms: record.symptoms,\n        treatments: record.medications.map(med => med.name),\n        effectiveness: record.effectiveness,\n        notes: record.notes\n      }));\n\n      return legacyRecords;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to rollback from version 1 to legacy',\n        'MIGRATION_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Validate version 1 data structure\n   */\n  private validateV1Data(data: any): boolean {\n    try {\n      return (\n        data &&\n        typeof data === 'object' &&\n        Array.isArray(data.records) &&\n        typeof data.preferences === 'object' &&\n        data.schemaVersion === 1 &&\n        data.records.every((record: any) => this.validateV1Record(record))\n      );\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Validate individual version 1 record\n   */\n  private validateV1Record(record: any): boolean {\n    return (\n      record &&\n      typeof record.id === 'string' &&\n      typeof record.date === 'string' &&\n      typeof record.time === 'string' &&\n      typeof record.painLevel === 'number' &&\n      Array.isArray(record.painTypes) &&\n      Array.isArray(record.locations) &&\n      Array.isArray(record.symptoms) &&\n      Array.isArray(record.medications) &&\n      Array.isArray(record.lifestyleFactors)\n    );\n  }\n\n  /**\n   * Extract time from legacy record (may not have separate time field)\n   */\n  private extractTimeFromLegacyRecord(legacyRecord: any): string {\n    if (legacyRecord.time) {\n      return legacyRecord.time;\n    }\n    \n    if (legacyRecord.createdAt) {\n      const date = new Date(legacyRecord.createdAt);\n      return `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;\n    }\n    \n    return '12:00'; // Default time\n  }\n\n  /**\n   * Normalize pain level to 0-10 scale\n   */\n  private normalizePainLevel(level: any): number {\n    const numLevel = Number(level);\n    if (isNaN(numLevel)) return 0;\n    return Math.max(0, Math.min(10, Math.round(numLevel)));\n  }\n\n  /**\n   * Normalize effectiveness to 0-10 scale\n   */\n  private normalizeEffectiveness(effectiveness: any): number {\n    const numEffectiveness = Number(effectiveness);\n    if (isNaN(numEffectiveness)) return 0;\n    return Math.max(0, Math.min(10, Math.round(numEffectiveness)));\n  }\n\n  /**\n   * Migrate pain types from legacy format\n   */\n  private migratePainTypes(legacyRecord: any): string[] {\n    const painTypes: string[] = [];\n    \n    // Check various legacy fields that might contain pain type info\n    if (legacyRecord.painType) {\n      painTypes.push(this.mapLegacyPainType(legacyRecord.painType));\n    }\n    \n    if (legacyRecord.painTypes && Array.isArray(legacyRecord.painTypes)) {\n      painTypes.push(...legacyRecord.painTypes.map(this.mapLegacyPainType));\n    }\n    \n    // If no pain types found, try to infer from notes or other fields\n    if (painTypes.length === 0 && legacyRecord.notes) {\n      const inferredTypes = this.inferPainTypesFromNotes(legacyRecord.notes);\n      painTypes.push(...inferredTypes);\n    }\n    \n    return [...new Set(painTypes)]; // Remove duplicates\n  }\n\n  /**\n   * Map legacy pain type to new format\n   */\n  private mapLegacyPainType(legacyType: string): string {\n    const mapping: { [key: string]: string } = {\n      'cramping': 'cramping',\n      'dull_pain': 'aching',\n      'sharp_pain': 'sharp',\n      'throbbing': 'throbbing',\n      'burning': 'burning',\n      'pressure': 'pressure',\n      // Add more mappings as needed\n    };\n    \n    return mapping[legacyType] || 'aching'; // Default to aching\n  }\n\n  /**\n   * Migrate locations from legacy format\n   */\n  private migrateLocations(legacyRecord: any): string[] {\n    const locations: string[] = [];\n    \n    if (legacyRecord.location) {\n      locations.push(this.mapLegacyLocation(legacyRecord.location));\n    }\n    \n    if (legacyRecord.locations && Array.isArray(legacyRecord.locations)) {\n      locations.push(...legacyRecord.locations.map(this.mapLegacyLocation));\n    }\n    \n    return [...new Set(locations)]; // Remove duplicates\n  }\n\n  /**\n   * Map legacy location to new format\n   */\n  private mapLegacyLocation(legacyLocation: string): string {\n    const mapping: { [key: string]: string } = {\n      'lower_abdomen': 'lower_abdomen',\n      'lower_back': 'lower_back',\n      'thighs': 'upper_thighs',\n      'pelvis': 'pelvis',\n      'side': 'side',\n      'whole_abdomen': 'whole_abdomen',\n      'other': 'lower_abdomen' // Default mapping\n    };\n    \n    return mapping[legacyLocation] || 'lower_abdomen';\n  }\n\n  /**\n   * Migrate symptoms from legacy format\n   */\n  private migrateSymptoms(legacySymptoms: any[]): string[] {\n    if (!Array.isArray(legacySymptoms)) {\n      return [];\n    }\n    \n    return legacySymptoms.map(symptom => this.mapLegacySymptom(symptom));\n  }\n\n  /**\n   * Map legacy symptom to new format\n   */\n  private mapLegacySymptom(legacySymptom: string): string {\n    const mapping: { [key: string]: string } = {\n      'nausea': 'nausea',\n      'headache': 'headache',\n      'fatigue': 'fatigue',\n      'bloating': 'bloating',\n      'mood_changes': 'mood_changes',\n      'back_pain': 'fatigue', // Map to closest available symptom\n      'vomiting': 'vomiting',\n      'diarrhea': 'diarrhea',\n      'breast_tenderness': 'breast_tenderness'\n    };\n    \n    return mapping[legacySymptom] || 'fatigue';\n  }\n\n  /**\n   * Migrate menstrual status from legacy format\n   */\n  private migrateMenstrualStatus(legacyStatus: string): string {\n    const mapping: { [key: string]: string } = {\n      'before': 'before_period',\n      'during': 'day_1',\n      'after': 'after_period',\n      'none': 'mid_cycle',\n      'before_period': 'before_period',\n      'day_1': 'day_1',\n      'day_2_3': 'day_2_3',\n      'day_4_plus': 'day_4_plus',\n      'after_period': 'after_period',\n      'mid_cycle': 'mid_cycle',\n      'irregular': 'irregular'\n    };\n    \n    return mapping[legacyStatus] || 'mid_cycle';\n  }\n\n  /**\n   * Convert menstrual status back to legacy format\n   */\n  private convertMenstrualStatusToLegacy(status: string): string {\n    const mapping: { [key: string]: string } = {\n      'before_period': 'before',\n      'day_1': 'during',\n      'day_2_3': 'during',\n      'day_4_plus': 'during',\n      'after_period': 'after',\n      'mid_cycle': 'none',\n      'irregular': 'none'\n    };\n    \n    return mapping[status] || 'none';\n  }\n\n  /**\n   * Migrate medications from legacy treatments\n   */\n  private migrateMedications(legacyTreatments: any[]): any[] {\n    if (!Array.isArray(legacyTreatments)) {\n      return [];\n    }\n    \n    return legacyTreatments.map(treatment => {\n      if (typeof treatment === 'string') {\n        return {\n          name: treatment,\n          dosage: '',\n          timing: 'during pain'\n        };\n      } else if (typeof treatment === 'object' && treatment.name) {\n        return {\n          name: treatment.name,\n          dosage: treatment.dosage || '',\n          timing: treatment.timing || 'during pain'\n        };\n      }\n      \n      return {\n        name: 'Unknown medication',\n        dosage: '',\n        timing: 'during pain'\n      };\n    });\n  }\n\n  /**\n   * Migrate lifestyle factors (new in v1, so create defaults)\n   */\n  private migrateLifestyleFactors(legacyRecord: any): any[] {\n    const factors: any[] = [];\n    \n    // Try to extract any lifestyle information from notes or other fields\n    if (legacyRecord.notes) {\n      const stressMatch = legacyRecord.notes.match(/stress.*?(\\d+)/i);\n      if (stressMatch) {\n        factors.push({\n          factor: 'stress_level',\n          value: parseInt(stressMatch[1])\n        });\n      }\n      \n      const sleepMatch = legacyRecord.notes.match(/sleep.*?(\\d+)/i);\n      if (sleepMatch) {\n        factors.push({\n          factor: 'sleep_hours',\n          value: parseInt(sleepMatch[1])\n        });\n      }\n    }\n    \n    return factors;\n  }\n\n  /**\n   * Infer pain types from notes text\n   */\n  private inferPainTypesFromNotes(notes: string): string[] {\n    const types: string[] = [];\n    const lowerNotes = notes.toLowerCase();\n    \n    if (lowerNotes.includes('cramp')) types.push('cramping');\n    if (lowerNotes.includes('sharp')) types.push('sharp');\n    if (lowerNotes.includes('throb')) types.push('throbbing');\n    if (lowerNotes.includes('burn')) types.push('burning');\n    if (lowerNotes.includes('pressure')) types.push('pressure');\n    if (lowerNotes.includes('ache') || lowerNotes.includes('dull')) types.push('aching');\n    \n    return types;\n  }\n}\n\nexport default MigrationService;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/ChartPerformanceOptimizer.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PainRecord' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[398,401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[398,401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[469,472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[469,472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[504,507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[504,507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[579,582],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[579,582],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[697,700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[697,700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[721,724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[721,724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1432,1435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1432,1435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1514,1517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1514,1517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2529,2532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2529,2532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":6,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":9,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2627,2630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2627,2630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3728,3731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3728,3731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3752,3755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3752,3755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":185,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":185,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5685,5688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5685,5688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6080,6083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6080,6083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6215,6218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6215,6218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7967,7970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7967,7970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'chartType' is defined but never used.","line":266,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":266,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7994,7997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7994,7997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":271,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8163,8166],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8163,8166],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":271,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8225,8228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8225,8228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":283,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8617,8620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8617,8620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":283,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8679,8682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8679,8682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":301,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":301,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9340,9343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9340,9343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":301,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":301,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9367,9370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9367,9370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9447,9450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9447,9450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9756,9759],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9756,9759],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9783,9786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9783,9786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":320,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9858,9861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9858,9861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":346,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10541,10544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10541,10544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":346,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10568,10571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10568,10571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":366,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":366,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11192,11195],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11192,11195],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":383,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":383,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11766,11769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11766,11769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":433,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13291,13294],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13291,13294],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":433,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13297,13300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13297,13300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":450,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":450,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13736,13739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13736,13739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":36,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ChartPerformanceOptimizer - Implements chart performance optimizations for large datasets\n// Provides data sampling, virtualization, and rendering optimizations\n\nimport {\n  PainRecord,\n  TrendPoint,\n  ChartOptimizationOptions,\n  ChartPerformanceMetrics,\n  PainTrackerError\n} from '../../../types/pain-tracker';\n\nexport interface ChartPerformanceOptimizerInterface {\n  optimizeDataForChart(data: any[], chartType: string, options?: ChartOptimizationOptions): Promise<any[]>;\n  sampleLargeDataset(data: any[], maxPoints: number, method?: 'uniform' | 'adaptive' | 'importance'): any[];\n  createDataBuckets(data: TrendPoint[], bucketSize: number): TrendPoint[];\n  optimizeChartOptions(baseOptions: any, dataSize: number): any;\n  measureChartPerformance(renderFunction: () => void): ChartPerformanceMetrics;\n  shouldUseVirtualization(dataSize: number, chartType: string): boolean;\n}\n\nexport class ChartPerformanceOptimizer implements ChartPerformanceOptimizerInterface {\n  private performanceThresholds = {\n    small: 50,\n    medium: 200,\n    large: 1000,\n    xlarge: 5000\n  };\n\n  private optimizationSettings = {\n    maxPointsForSmooth: 200,\n    maxPointsForInteractive: 500,\n    maxPointsForStatic: 1000,\n    bucketSizeThreshold: 100,\n    animationDisableThreshold: 500,\n    tooltipOptimizeThreshold: 1000\n  };\n\n  /**\n   * Optimize data for chart rendering based on size and chart type\n   */\n  async optimizeDataForChart(\n    data: any[],\n    chartType: string,\n    options?: ChartOptimizationOptions\n  ): Promise<any[]> {\n    try {\n      const dataSize = data.length;\n      const opts = {\n        maxPoints: this.getMaxPointsForChartType(chartType),\n        samplingMethod: 'adaptive' as const,\n        preserveImportantPoints: true,\n        ...options\n      };\n\n      // No optimization needed for small datasets\n      if (dataSize <= this.performanceThresholds.small) {\n        return data;\n      }\n\n      // Apply appropriate optimization strategy\n      if (dataSize <= this.performanceThresholds.medium) {\n        return this.lightOptimization(data, chartType);\n      } else if (dataSize <= this.performanceThresholds.large) {\n        return this.mediumOptimization(data, chartType, opts);\n      } else {\n        return this.heavyOptimization(data, chartType, opts);\n      }\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to optimize chart data',\n        'CHART_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Sample large datasets using different methods\n   */\n  sampleLargeDataset(\n    data: any[],\n    maxPoints: number,\n    method: 'uniform' | 'adaptive' | 'importance' = 'adaptive'\n  ): any[] {\n    if (data.length <= maxPoints) {\n      return data;\n    }\n\n    switch (method) {\n      case 'uniform':\n        return this.uniformSampling(data, maxPoints);\n      case 'adaptive':\n        return this.adaptiveSampling(data, maxPoints);\n      case 'importance':\n        return this.importanceSampling(data, maxPoints);\n      default:\n        return this.uniformSampling(data, maxPoints);\n    }\n  }\n\n  /**\n   * Create data buckets for aggregation\n   */\n  createDataBuckets(data: TrendPoint[], bucketSize: number): TrendPoint[] {\n    if (data.length <= bucketSize) {\n      return data;\n    }\n\n    const buckets: TrendPoint[] = [];\n    const sortedData = [...data].sort((a, b) => \n      new Date(a.date).getTime() - new Date(b.date).getTime()\n    );\n\n    for (let i = 0; i < sortedData.length; i += bucketSize) {\n      const bucket = sortedData.slice(i, i + bucketSize);\n      const aggregatedPoint = this.aggregateBucket(bucket);\n      buckets.push(aggregatedPoint);\n    }\n\n    return buckets;\n  }\n\n  /**\n   * Optimize chart options based on data size\n   */\n  optimizeChartOptions(baseOptions: any, dataSize: number): any {\n    const optimizedOptions = { ...baseOptions };\n\n    // Disable animations for large datasets\n    if (dataSize > this.optimizationSettings.animationDisableThreshold) {\n      optimizedOptions.animation = false;\n      optimizedOptions.transitions = {\n        active: { animation: { duration: 0 } },\n        resize: { animation: { duration: 0 } }\n      };\n    }\n\n    // Optimize tooltips for very large datasets\n    if (dataSize > this.optimizationSettings.tooltipOptimizeThreshold) {\n      optimizedOptions.plugins = {\n        ...optimizedOptions.plugins,\n        tooltip: {\n          ...optimizedOptions.plugins?.tooltip,\n          enabled: false, // Disable tooltips for performance\n          external: this.createOptimizedTooltip // Use custom lightweight tooltip\n        }\n      };\n    }\n\n    // Optimize scales for large datasets\n    if (dataSize > this.performanceThresholds.large) {\n      optimizedOptions.scales = {\n        ...optimizedOptions.scales,\n        x: {\n          ...optimizedOptions.scales?.x,\n          ticks: {\n            ...optimizedOptions.scales?.x?.ticks,\n            maxTicksLimit: 10, // Limit number of x-axis ticks\n            autoSkip: true,\n            autoSkipPadding: 10\n          }\n        },\n        y: {\n          ...optimizedOptions.scales?.y,\n          ticks: {\n            ...optimizedOptions.scales?.y?.ticks,\n            maxTicksLimit: 8 // Limit number of y-axis ticks\n          }\n        }\n      };\n    }\n\n    // Optimize interaction for large datasets\n    if (dataSize > this.performanceThresholds.medium) {\n      optimizedOptions.interaction = {\n        ...optimizedOptions.interaction,\n        intersect: false,\n        mode: 'nearest'\n      };\n    }\n\n    // Disable point rendering for very large line charts\n    if (dataSize > this.performanceThresholds.large) {\n      if (optimizedOptions.datasets) {\n        optimizedOptions.datasets = optimizedOptions.datasets.map((dataset: any) => ({\n          ...dataset,\n          pointRadius: 0,\n          pointHoverRadius: 3,\n          pointHitRadius: 5\n        }));\n      }\n    }\n\n    return optimizedOptions;\n  }\n\n  /**\n   * Measure chart rendering performance\n   */\n  measureChartPerformance(renderFunction: () => void): ChartPerformanceMetrics {\n    const startTime = performance.now();\n    const startMemory = (performance as any).memory?.usedJSHeapSize || 0;\n\n    renderFunction();\n\n    const endTime = performance.now();\n    const endMemory = (performance as any).memory?.usedJSHeapSize || 0;\n\n    return {\n      renderTime: endTime - startTime,\n      memoryUsed: endMemory - startMemory,\n      timestamp: new Date()\n    };\n  }\n\n  /**\n   * Determine if virtualization should be used\n   */\n  shouldUseVirtualization(dataSize: number, chartType: string): boolean {\n    const thresholds = {\n      line: this.performanceThresholds.large,\n      bar: this.performanceThresholds.medium,\n      scatter: this.performanceThresholds.medium,\n      pie: this.performanceThresholds.small,\n      doughnut: this.performanceThresholds.small\n    };\n\n    const threshold = thresholds[chartType as keyof typeof thresholds] || this.performanceThresholds.medium;\n    return dataSize > threshold;\n  }\n\n  /**\n   * Get progressive loading strategy for large datasets\n   */\n  getProgressiveLoadingStrategy(dataSize: number): {\n    initialLoad: number;\n    batchSize: number;\n    loadDelay: number;\n  } {\n    if (dataSize <= this.performanceThresholds.medium) {\n      return { initialLoad: dataSize, batchSize: 0, loadDelay: 0 };\n    }\n\n    if (dataSize <= this.performanceThresholds.large) {\n      return { initialLoad: 100, batchSize: 50, loadDelay: 100 };\n    }\n\n    return { initialLoad: 50, batchSize: 25, loadDelay: 50 };\n  }\n\n  // Private optimization methods\n\n  private getMaxPointsForChartType(chartType: string): number {\n    const limits = {\n      line: this.optimizationSettings.maxPointsForSmooth,\n      bar: this.optimizationSettings.maxPointsForInteractive,\n      scatter: this.optimizationSettings.maxPointsForInteractive,\n      pie: 20,\n      doughnut: 20,\n      radar: 10\n    };\n\n    return limits[chartType as keyof typeof limits] || this.optimizationSettings.maxPointsForStatic;\n  }\n\n  private lightOptimization(data: any[], chartType: string): any[] {\n    // For medium datasets, just remove unnecessary properties\n    return data.map(point => this.cleanDataPoint(point));\n  }\n\n  private mediumOptimization(data: any[], chartType: string, options: ChartOptimizationOptions): any[] {\n    // Apply sampling if needed\n    const maxPoints = options.maxPoints || this.getMaxPointsForChartType(chartType);\n    let optimizedData = data;\n\n    if (data.length > maxPoints) {\n      optimizedData = this.sampleLargeDataset(data, maxPoints, options.samplingMethod);\n    }\n\n    return optimizedData.map(point => this.cleanDataPoint(point));\n  }\n\n  private heavyOptimization(data: any[], chartType: string, options: ChartOptimizationOptions): any[] {\n    const maxPoints = options.maxPoints || this.getMaxPointsForChartType(chartType);\n    \n    // First, create buckets for aggregation\n    if (chartType === 'line' && data.length > this.performanceThresholds.xlarge) {\n      const bucketSize = Math.ceil(data.length / maxPoints);\n      data = this.createDataBuckets(data as TrendPoint[], bucketSize);\n    }\n\n    // Then apply sampling\n    let optimizedData = this.sampleLargeDataset(data, maxPoints, options.samplingMethod);\n\n    // Clean and optimize data points\n    optimizedData = optimizedData.map(point => this.cleanDataPoint(point));\n\n    return optimizedData;\n  }\n\n  private uniformSampling(data: any[], maxPoints: number): any[] {\n    const step = Math.ceil(data.length / maxPoints);\n    const sampled: any[] = [];\n\n    for (let i = 0; i < data.length; i += step) {\n      sampled.push(data[i]);\n    }\n\n    // Always include the last point\n    if (sampled[sampled.length - 1] !== data[data.length - 1]) {\n      sampled.push(data[data.length - 1]);\n    }\n\n    return sampled;\n  }\n\n  private adaptiveSampling(data: any[], maxPoints: number): any[] {\n    if (data.length <= maxPoints) return data;\n\n    const sampled: any[] = [];\n    const step = data.length / maxPoints;\n    \n    // Always include first point\n    sampled.push(data[0]);\n\n    // Adaptive sampling based on data variance\n    for (let i = 1; i < maxPoints - 1; i++) {\n      const index = Math.floor(i * step);\n      const point = data[index];\n      \n      // Include points with high variance from neighbors\n      if (this.shouldIncludePoint(data, index)) {\n        sampled.push(point);\n      } else {\n        // Use the point at the calculated index\n        sampled.push(data[index]);\n      }\n    }\n\n    // Always include last point\n    sampled.push(data[data.length - 1]);\n\n    return sampled;\n  }\n\n  private importanceSampling(data: any[], maxPoints: number): any[] {\n    if (data.length <= maxPoints) return data;\n\n    // Calculate importance scores for each point\n    const scoredData = data.map((point, index) => ({\n      point,\n      index,\n      importance: this.calculateImportanceScore(data, index)\n    }));\n\n    // Sort by importance and take top points\n    scoredData.sort((a, b) => b.importance - a.importance);\n    const importantPoints = scoredData.slice(0, maxPoints);\n\n    // Sort back by original index to maintain order\n    importantPoints.sort((a, b) => a.index - b.index);\n\n    return importantPoints.map(item => item.point);\n  }\n\n  private shouldIncludePoint(data: any[], index: number): boolean {\n    if (index === 0 || index === data.length - 1) return true;\n\n    const current = data[index];\n    const prev = data[index - 1];\n    const next = data[index + 1];\n\n    // Include points with significant pain level changes\n    if (current.painLevel && prev.painLevel && next.painLevel) {\n      const prevDiff = Math.abs(current.painLevel - prev.painLevel);\n      const nextDiff = Math.abs(next.painLevel - current.painLevel);\n      return prevDiff > 1 || nextDiff > 1;\n    }\n\n    return false;\n  }\n\n  private calculateImportanceScore(data: any[], index: number): number {\n    let score = 0;\n\n    const point = data[index];\n\n    // Higher score for extreme pain levels\n    if (point.painLevel) {\n      if (point.painLevel >= 8 || point.painLevel <= 2) {\n        score += 3;\n      } else if (point.painLevel >= 6 || point.painLevel <= 4) {\n        score += 1;\n      }\n    }\n\n    // Higher score for points with significant changes\n    if (index > 0 && index < data.length - 1) {\n      const prev = data[index - 1];\n      const next = data[index + 1];\n      \n      if (point.painLevel && prev.painLevel && next.painLevel) {\n        const change = Math.abs(point.painLevel - prev.painLevel) + \n                      Math.abs(next.painLevel - point.painLevel);\n        score += change;\n      }\n    }\n\n    // Higher score for first and last points\n    if (index === 0 || index === data.length - 1) {\n      score += 5;\n    }\n\n    return score;\n  }\n\n  private aggregateBucket(bucket: TrendPoint[]): TrendPoint {\n    if (bucket.length === 1) return bucket[0];\n\n    const avgPainLevel = bucket.reduce((sum, point) => sum + point.painLevel, 0) / bucket.length;\n    const middleIndex = Math.floor(bucket.length / 2);\n    const representativePoint = bucket[middleIndex];\n\n    return {\n      ...representativePoint,\n      painLevel: Math.round(avgPainLevel * 10) / 10,\n      // Add metadata about aggregation\n      _aggregated: true,\n      _originalCount: bucket.length\n    } as TrendPoint & { _aggregated: boolean; _originalCount: number };\n  }\n\n  private cleanDataPoint(point: any): any {\n    // Remove unnecessary properties to reduce memory usage\n    const cleaned = { ...point };\n    \n    // Remove internal properties\n    delete cleaned._id;\n    delete cleaned.__v;\n    delete cleaned.metadata;\n    \n    // Round numeric values to reduce precision\n    if (cleaned.painLevel) {\n      cleaned.painLevel = Math.round(cleaned.painLevel * 10) / 10;\n    }\n\n    return cleaned;\n  }\n\n  private createOptimizedTooltip(context: any): void {\n    // Lightweight tooltip implementation for large datasets\n    const tooltipEl = document.getElementById('chartjs-tooltip');\n    if (!tooltipEl) return;\n\n    const tooltip = context.tooltip;\n    if (tooltip.opacity === 0) {\n      tooltipEl.style.opacity = '0';\n      return;\n    }\n\n    // Simple tooltip content\n    const dataPoint = tooltip.dataPoints[0];\n    tooltipEl.innerHTML = `\n      <div style=\"background: rgba(0,0,0,0.8); color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;\">\n        Pain Level: ${dataPoint.parsed.y}/10\n      </div>\n    `;\n\n    tooltipEl.style.opacity = '1';\n    tooltipEl.style.position = 'absolute';\n    tooltipEl.style.left = context.chart.canvas.offsetLeft + tooltip.caretX + 'px';\n    tooltipEl.style.top = context.chart.canvas.offsetTop + tooltip.caretY + 'px';\n    tooltipEl.style.pointerEvents = 'none';\n  }\n}\n\nexport default ChartPerformanceOptimizer;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/DataCleanupService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StoredData' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'records' is defined but never used.","line":324,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":324,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DataCleanupService - Implements data cleanup mechanisms for old records\n// Provides automatic cleanup, archiving, and storage optimization\n\nimport {\n  PainRecord,\n  StoredData,\n  CleanupOptions,\n  CleanupResult,\n  ArchiveOptions,\n  PainTrackerError,\n  STORAGE_KEYS\n} from '../../../types/pain-tracker';\n\nexport interface DataCleanupServiceInterface {\n  performCleanup(options?: CleanupOptions): Promise<CleanupResult>;\n  archiveOldRecords(options: ArchiveOptions): Promise<CleanupResult>;\n  removeOrphanedData(): Promise<CleanupResult>;\n  optimizeStorage(): Promise<CleanupResult>;\n  scheduleAutomaticCleanup(intervalMs: number): void;\n  cancelAutomaticCleanup(): void;\n  getCleanupRecommendations(): Promise<CleanupOptions>;\n}\n\nexport class DataCleanupService implements DataCleanupServiceInterface {\n  private cleanupTimer: NodeJS.Timeout | null = null;\n  private defaultCleanupOptions: CleanupOptions = {\n    maxRecords: 1000,\n    maxAgeMonths: 24,\n    removeDuplicates: true,\n    removeIncompleteRecords: false,\n    archiveOldRecords: true,\n    compactStorage: true\n  };\n\n  /**\n   * Perform comprehensive data cleanup\n   */\n  async performCleanup(options?: CleanupOptions): Promise<CleanupResult> {\n    try {\n      const cleanupOptions = { ...this.defaultCleanupOptions, ...options };\n      const startTime = performance.now();\n      \n      let totalRecordsRemoved = 0;\n      let totalSpaceSaved = 0;\n      const operations: string[] = [];\n\n      // Get initial storage size\n      const initialSize = await this.getStorageSize();\n\n      // Load all records\n      const allRecords = await this.loadAllRecords();\n      const initialRecordCount = allRecords.length;\n\n      let cleanedRecords = [...allRecords];\n\n      // Remove duplicates\n      if (cleanupOptions.removeDuplicates) {\n        const beforeCount = cleanedRecords.length;\n        cleanedRecords = this.removeDuplicateRecords(cleanedRecords);\n        const removed = beforeCount - cleanedRecords.length;\n        if (removed > 0) {\n          totalRecordsRemoved += removed;\n          operations.push(`Removed ${removed} duplicate records`);\n        }\n      }\n\n      // Remove incomplete records\n      if (cleanupOptions.removeIncompleteRecords) {\n        const beforeCount = cleanedRecords.length;\n        cleanedRecords = this.removeIncompleteRecords(cleanedRecords);\n        const removed = beforeCount - cleanedRecords.length;\n        if (removed > 0) {\n          totalRecordsRemoved += removed;\n          operations.push(`Removed ${removed} incomplete records`);\n        }\n      }\n\n      // Archive old records\n      if (cleanupOptions.archiveOldRecords && cleanupOptions.maxAgeMonths) {\n        const archiveResult = await this.archiveRecordsByAge(\n          cleanedRecords,\n          cleanupOptions.maxAgeMonths\n        );\n        cleanedRecords = archiveResult.remainingRecords;\n        if (archiveResult.archivedCount > 0) {\n          operations.push(`Archived ${archiveResult.archivedCount} old records`);\n        }\n      }\n\n      // Limit total number of records\n      if (cleanupOptions.maxRecords && cleanedRecords.length > cleanupOptions.maxRecords) {\n        const excessRecords = cleanedRecords.length - cleanupOptions.maxRecords;\n        // Keep the most recent records\n        cleanedRecords = cleanedRecords\n          .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\n          .slice(0, cleanupOptions.maxRecords);\n        \n        totalRecordsRemoved += excessRecords;\n        operations.push(`Removed ${excessRecords} excess records (keeping ${cleanupOptions.maxRecords} most recent)`);\n      }\n\n      // Save cleaned records\n      await this.saveCleanedRecords(cleanedRecords);\n\n      // Compact storage\n      if (cleanupOptions.compactStorage) {\n        const compactResult = await this.compactStorage();\n        totalSpaceSaved += compactResult.spaceSaved;\n        operations.push(...compactResult.operations);\n      }\n\n      // Remove orphaned data\n      const orphanResult = await this.removeOrphanedData();\n      totalSpaceSaved += orphanResult.spaceSaved;\n      operations.push(...orphanResult.operations);\n\n      // Calculate final metrics\n      const finalSize = await this.getStorageSize();\n      totalSpaceSaved = initialSize - finalSize;\n      const cleanupTime = performance.now() - startTime;\n\n      return {\n        recordsRemoved: totalRecordsRemoved,\n        spaceSaved: totalSpaceSaved,\n        operations,\n        cleanupTime,\n        initialRecordCount,\n        finalRecordCount: cleanedRecords.length,\n        initialStorageSize: initialSize,\n        finalStorageSize: finalSize\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to perform data cleanup',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Archive old records based on age\n   */\n  async archiveOldRecords(options: ArchiveOptions): Promise<CleanupResult> {\n    try {\n      const allRecords = await this.loadAllRecords();\n      const archiveResult = await this.archiveRecordsByAge(allRecords, options.maxAgeMonths);\n      \n      // Save remaining records\n      await this.saveCleanedRecords(archiveResult.remainingRecords);\n\n      return {\n        recordsRemoved: archiveResult.archivedCount,\n        spaceSaved: await this.calculateSpaceSaved(archiveResult.archivedRecords),\n        operations: [`Archived ${archiveResult.archivedCount} records older than ${options.maxAgeMonths} months`],\n        cleanupTime: 0,\n        initialRecordCount: allRecords.length,\n        finalRecordCount: archiveResult.remainingRecords.length,\n        initialStorageSize: 0,\n        finalStorageSize: 0\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to archive old records',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Remove orphaned data and cleanup storage\n   */\n  async removeOrphanedData(): Promise<CleanupResult> {\n    try {\n      const operations: string[] = [];\n      let spaceSaved = 0;\n\n      // Clean up old backup files\n      const backupCleanup = await this.cleanupOldBackups();\n      spaceSaved += backupCleanup.spaceSaved;\n      operations.push(...backupCleanup.operations);\n\n      // Clean up temporary data\n      const tempCleanup = await this.cleanupTemporaryData();\n      spaceSaved += tempCleanup.spaceSaved;\n      operations.push(...tempCleanup.operations);\n\n      // Clean up invalid storage keys\n      const keyCleanup = await this.cleanupInvalidKeys();\n      spaceSaved += keyCleanup.spaceSaved;\n      operations.push(...keyCleanup.operations);\n\n      return {\n        recordsRemoved: 0,\n        spaceSaved,\n        operations,\n        cleanupTime: 0,\n        initialRecordCount: 0,\n        finalRecordCount: 0,\n        initialStorageSize: 0,\n        finalStorageSize: 0\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to remove orphaned data',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Optimize storage by compacting and reorganizing data\n   */\n  async optimizeStorage(): Promise<CleanupResult> {\n    try {\n      const initialSize = await this.getStorageSize();\n      const operations: string[] = [];\n\n      // Compact records storage\n      const records = await this.loadAllRecords();\n      const optimizedRecords = this.optimizeRecordsStructure(records);\n      await this.saveCleanedRecords(optimizedRecords);\n      operations.push('Optimized records structure');\n\n      // Optimize preferences\n      await this.optimizePreferences();\n      operations.push('Optimized user preferences');\n\n      // Optimize metadata\n      await this.optimizeMetadata();\n      operations.push('Optimized metadata');\n\n      const finalSize = await this.getStorageSize();\n      const spaceSaved = initialSize - finalSize;\n\n      return {\n        recordsRemoved: 0,\n        spaceSaved,\n        operations,\n        cleanupTime: 0,\n        initialRecordCount: records.length,\n        finalRecordCount: optimizedRecords.length,\n        initialStorageSize: initialSize,\n        finalStorageSize: finalSize\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to optimize storage',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Schedule automatic cleanup at regular intervals\n   */\n  scheduleAutomaticCleanup(intervalMs: number): void {\n    this.cancelAutomaticCleanup();\n    \n    // Don't start timers in test environment\n    if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') {\n      return;\n    }\n    \n    this.cleanupTimer = setInterval(async () => {\n      try {\n        const recommendations = await this.getCleanupRecommendations();\n        await this.performCleanup(recommendations);\n        console.log('Automatic cleanup completed successfully');\n      } catch (error) {\n        console.error('Automatic cleanup failed:', error);\n      }\n    }, intervalMs);\n  }\n\n  /**\n   * Cancel automatic cleanup\n   */\n  cancelAutomaticCleanup(): void {\n    if (this.cleanupTimer) {\n      clearInterval(this.cleanupTimer);\n      this.cleanupTimer = null;\n    }\n  }\n\n  /**\n   * Get cleanup recommendations based on current data\n   */\n  async getCleanupRecommendations(): Promise<CleanupOptions> {\n    try {\n      const records = await this.loadAllRecords();\n      const storageSize = await this.getStorageSize();\n      const duplicateCount = this.countDuplicateRecords(records);\n      const incompleteCount = this.countIncompleteRecords(records);\n      const oldRecordCount = this.countOldRecords(records, 24);\n\n      const recommendations: CleanupOptions = {\n        ...this.defaultCleanupOptions,\n        removeDuplicates: duplicateCount > 0,\n        removeIncompleteRecords: incompleteCount > 5, // Only if significant number\n        archiveOldRecords: oldRecordCount > 10,\n        compactStorage: storageSize > 1024 * 1024, // 1MB threshold\n        maxRecords: Math.max(500, records.length * 0.8) // Keep 80% of records or minimum 500\n      };\n\n      return recommendations;\n    } catch (error) {\n      console.warn('Failed to get cleanup recommendations, using defaults:', error);\n      return this.defaultCleanupOptions;\n    }\n  }\n\n  // Private helper methods\n\n  private async loadAllRecords(): Promise<PainRecord[]> {\n    // This would load from the actual storage adapter\n    // For now, return empty array - will be integrated with actual data manager\n    return [];\n  }\n\n  private async saveCleanedRecords(records: PainRecord[]): Promise<void> {\n    // This would save to the actual storage adapter\n    // Implementation depends on the storage system\n  }\n\n  private async getStorageSize(): Promise<number> {\n    let totalSize = 0;\n    Object.values(STORAGE_KEYS).forEach(key => {\n      const data = localStorage.getItem(key);\n      if (data) {\n        totalSize += new Blob([data]).size;\n      }\n    });\n    return totalSize;\n  }\n\n  private removeDuplicateRecords(records: PainRecord[]): PainRecord[] {\n    const seen = new Set<string>();\n    return records.filter(record => {\n      // Create a unique key based on date, time, and pain level\n      const key = `${record.date}_${record.time}_${record.painLevel}`;\n      if (seen.has(key)) {\n        return false;\n      }\n      seen.add(key);\n      return true;\n    });\n  }\n\n  private removeIncompleteRecords(records: PainRecord[]): PainRecord[] {\n    return records.filter(record => {\n      // Define what constitutes a complete record\n      return (\n        record.date &&\n        record.time &&\n        record.painLevel !== undefined &&\n        record.painLevel >= 0 &&\n        record.painLevel <= 10 &&\n        record.painTypes.length > 0 &&\n        record.locations.length > 0\n      );\n    });\n  }\n\n  private async archiveRecordsByAge(\n    records: PainRecord[],\n    maxAgeMonths: number\n  ): Promise<{\n    remainingRecords: PainRecord[];\n    archivedRecords: PainRecord[];\n    archivedCount: number;\n  }> {\n    const cutoffDate = new Date();\n    cutoffDate.setMonth(cutoffDate.getMonth() - maxAgeMonths);\n\n    const remainingRecords: PainRecord[] = [];\n    const archivedRecords: PainRecord[] = [];\n\n    records.forEach(record => {\n      const recordDate = new Date(record.date);\n      if (recordDate < cutoffDate) {\n        archivedRecords.push(record);\n      } else {\n        remainingRecords.push(record);\n      }\n    });\n\n    // Save archived records to a separate storage location\n    if (archivedRecords.length > 0) {\n      await this.saveArchivedRecords(archivedRecords);\n    }\n\n    return {\n      remainingRecords,\n      archivedRecords,\n      archivedCount: archivedRecords.length\n    };\n  }\n\n  private async saveArchivedRecords(records: PainRecord[]): Promise<void> {\n    try {\n      const archiveKey = `${STORAGE_KEYS.PAIN_RECORDS}_archive_${Date.now()}`;\n      const archiveData = {\n        records,\n        archivedAt: new Date(),\n        version: '1.0.0'\n      };\n      localStorage.setItem(archiveKey, JSON.stringify(archiveData));\n    } catch (error) {\n      console.warn('Failed to save archived records:', error);\n    }\n  }\n\n  private async compactStorage(): Promise<{ spaceSaved: number; operations: string[] }> {\n    const operations: string[] = [];\n    let spaceSaved = 0;\n\n    try {\n      // Compact each storage key\n      for (const key of Object.values(STORAGE_KEYS)) {\n        const data = localStorage.getItem(key);\n        if (data) {\n          const originalSize = new Blob([data]).size;\n          \n          // Parse and re-stringify to remove extra whitespace\n          const parsedData = JSON.parse(data);\n          const compactedData = JSON.stringify(parsedData);\n          \n          if (compactedData.length < data.length) {\n            localStorage.setItem(key, compactedData);\n            const newSize = new Blob([compactedData]).size;\n            spaceSaved += originalSize - newSize;\n            operations.push(`Compacted ${key}`);\n          }\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to compact storage:', error);\n    }\n\n    return { spaceSaved, operations };\n  }\n\n  private async cleanupOldBackups(): Promise<{ spaceSaved: number; operations: string[] }> {\n    const operations: string[] = [];\n    let spaceSaved = 0;\n\n    try {\n      const backupKeys: string[] = [];\n      \n      // Find all backup keys\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.includes('_backup') || key?.includes('_archive')) {\n          backupKeys.push(key);\n        }\n      }\n\n      // Remove old backups (keep only the most recent 3)\n      const sortedBackups = backupKeys.sort().reverse();\n      const backupsToRemove = sortedBackups.slice(3);\n\n      backupsToRemove.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n        }\n      });\n\n      if (backupsToRemove.length > 0) {\n        operations.push(`Removed ${backupsToRemove.length} old backup files`);\n      }\n    } catch (error) {\n      console.warn('Failed to cleanup old backups:', error);\n    }\n\n    return { spaceSaved, operations };\n  }\n\n  private async cleanupTemporaryData(): Promise<{ spaceSaved: number; operations: string[] }> {\n    const operations: string[] = [];\n    let spaceSaved = 0;\n\n    try {\n      const tempKeys: string[] = [];\n      \n      // Find temporary keys\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && (key.includes('_temp') || key.includes('_cache'))) {\n          tempKeys.push(key);\n        }\n      }\n\n      tempKeys.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n        }\n      });\n\n      if (tempKeys.length > 0) {\n        operations.push(`Removed ${tempKeys.length} temporary data files`);\n      }\n    } catch (error) {\n      console.warn('Failed to cleanup temporary data:', error);\n    }\n\n    return { spaceSaved, operations };\n  }\n\n  private async cleanupInvalidKeys(): Promise<{ spaceSaved: number; operations: string[] }> {\n    const operations: string[] = [];\n    let spaceSaved = 0;\n\n    try {\n      const validKeyPrefixes = Object.values(STORAGE_KEYS);\n      const invalidKeys: string[] = [];\n\n      // Find invalid keys\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('pain_tracker_')) {\n          const isValid = validKeyPrefixes.some(prefix => key.startsWith(prefix));\n          if (!isValid && !key.includes('_backup') && !key.includes('_archive')) {\n            invalidKeys.push(key);\n          }\n        }\n      }\n\n      invalidKeys.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n        }\n      });\n\n      if (invalidKeys.length > 0) {\n        operations.push(`Removed ${invalidKeys.length} invalid storage keys`);\n      }\n    } catch (error) {\n      console.warn('Failed to cleanup invalid keys:', error);\n    }\n\n    return { spaceSaved, operations };\n  }\n\n  private optimizeRecordsStructure(records: PainRecord[]): PainRecord[] {\n    return records.map(record => ({\n      ...record,\n      // Remove empty arrays\n      painTypes: record.painTypes.filter(Boolean),\n      locations: record.locations.filter(Boolean),\n      symptoms: record.symptoms.filter(Boolean),\n      medications: record.medications.filter(med => med.name?.trim()),\n      lifestyleFactors: record.lifestyleFactors?.filter(Boolean) || [],\n      // Trim and clean notes\n      notes: record.notes?.trim() || undefined\n    }));\n  }\n\n  private async optimizePreferences(): Promise<void> {\n    try {\n      const preferences = JSON.parse(localStorage.getItem(STORAGE_KEYS.USER_PREFERENCES) || '{}');\n      \n      // Remove empty or default values\n      const optimizedPreferences = {\n        ...preferences,\n        defaultMedications: preferences.defaultMedications?.filter(Boolean) || []\n      };\n\n      localStorage.setItem(STORAGE_KEYS.USER_PREFERENCES, JSON.stringify(optimizedPreferences));\n    } catch (error) {\n      console.warn('Failed to optimize preferences:', error);\n    }\n  }\n\n  private async optimizeMetadata(): Promise<void> {\n    try {\n      const metadata = JSON.parse(localStorage.getItem(STORAGE_KEYS.METADATA) || '{}');\n      \n      // Keep only essential metadata\n      const optimizedMetadata = {\n        lastModified: metadata.lastModified,\n        recordCount: metadata.recordCount,\n        dataSize: metadata.dataSize,\n        version: metadata.version\n      };\n\n      localStorage.setItem(STORAGE_KEYS.METADATA, JSON.stringify(optimizedMetadata));\n    } catch (error) {\n      console.warn('Failed to optimize metadata:', error);\n    }\n  }\n\n  private countDuplicateRecords(records: PainRecord[]): number {\n    const seen = new Set<string>();\n    let duplicates = 0;\n\n    records.forEach(record => {\n      const key = `${record.date}_${record.time}_${record.painLevel}`;\n      if (seen.has(key)) {\n        duplicates++;\n      } else {\n        seen.add(key);\n      }\n    });\n\n    return duplicates;\n  }\n\n  private countIncompleteRecords(records: PainRecord[]): number {\n    return records.filter(record => \n      !record.date ||\n      !record.time ||\n      record.painLevel === undefined ||\n      record.painLevel < 0 ||\n      record.painLevel > 10 ||\n      record.painTypes.length === 0 ||\n      record.locations.length === 0\n    ).length;\n  }\n\n  private countOldRecords(records: PainRecord[], maxAgeMonths: number): number {\n    const cutoffDate = new Date();\n    cutoffDate.setMonth(cutoffDate.getMonth() - maxAgeMonths);\n\n    return records.filter(record => new Date(record.date) < cutoffDate).length;\n  }\n\n  private async calculateSpaceSaved(records: PainRecord[]): Promise<number> {\n    const dataString = JSON.stringify(records);\n    return new Blob([dataString]).size;\n  }\n}\n\nexport default DataCleanupService;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/DataCompressionService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[339,342],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[339,342],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[423,426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[423,426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1124,1127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1124,1127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2865,2868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2865,2868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":191,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5502,5505],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5502,5505],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":327,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":327,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":383,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":383,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12029,12032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12029,12032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":383,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":383,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12035,12038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12035,12038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":399,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12581,12584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12581,12584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":399,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12587,12590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12587,12590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":412,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":412,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12898,12901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12898,12901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DataCompressionService - Implements data compression for local storage efficiency\n// Provides compression, decompression, and storage optimization\n\nimport {\n  PainRecord,\n  StoredData,\n  CompressionResult,\n  PainTrackerError\n} from '../../../types/pain-tracker';\n\nexport interface DataCompressionServiceInterface {\n  compressData(data: any): Promise<CompressionResult>;\n  decompressData(compressedData: string): Promise<any>;\n  compressRecords(records: PainRecord[]): Promise<string>;\n  decompressRecords(compressedRecords: string): Promise<PainRecord[]>;\n  getCompressionRatio(originalSize: number, compressedSize: number): number;\n  optimizeStorageData(data: StoredData): Promise<StoredData>;\n}\n\nexport class DataCompressionService implements DataCompressionServiceInterface {\n  private compressionLevel: 'none' | 'basic' | 'advanced' = 'basic';\n  private compressionThreshold = 1024; // Only compress data larger than 1KB\n\n  constructor(compressionLevel: 'none' | 'basic' | 'advanced' = 'basic') {\n    this.compressionLevel = compressionLevel;\n  }\n\n  /**\n   * Compress any data object\n   */\n  async compressData(data: any): Promise<CompressionResult> {\n    try {\n      const originalString = JSON.stringify(data);\n      const originalSize = new Blob([originalString]).size;\n\n      // Skip compression for small data\n      if (originalSize < this.compressionThreshold) {\n        return {\n          compressedData: originalString,\n          originalSize,\n          compressedSize: originalSize,\n          compressionRatio: 1,\n          compressionTime: 0,\n          algorithm: 'none'\n        };\n      }\n\n      const startTime = performance.now();\n      let compressedData: string;\n      let algorithm: string;\n\n      switch (this.compressionLevel) {\n        case 'none':\n          compressedData = originalString;\n          algorithm = 'none';\n          break;\n        case 'basic':\n          compressedData = await this.basicCompress(originalString);\n          algorithm = 'basic';\n          break;\n        case 'advanced':\n          compressedData = await this.advancedCompress(originalString);\n          algorithm = 'lz-string';\n          break;\n        default:\n          compressedData = originalString;\n          algorithm = 'none';\n      }\n\n      const compressionTime = performance.now() - startTime;\n      const compressedSize = new Blob([compressedData]).size;\n      const compressionRatio = this.getCompressionRatio(originalSize, compressedSize);\n\n      return {\n        compressedData,\n        originalSize,\n        compressedSize,\n        compressionRatio,\n        compressionTime,\n        algorithm\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to compress data',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Decompress data\n   */\n  async decompressData(compressedData: string): Promise<any> {\n    try {\n      // Try to detect compression algorithm from data format\n      const algorithm = this.detectCompressionAlgorithm(compressedData);\n      \n      let decompressedString: string;\n\n      switch (algorithm) {\n        case 'none':\n          decompressedString = compressedData;\n          break;\n        case 'basic':\n          decompressedString = await this.basicDecompress(compressedData);\n          break;\n        case 'lz-string':\n          decompressedString = await this.advancedDecompress(compressedData);\n          break;\n        default:\n          // Fallback: try to parse as-is\n          decompressedString = compressedData;\n      }\n\n      return JSON.parse(decompressedString);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to decompress data',\n        'DATA_CORRUPTION',\n        error\n      );\n    }\n  }\n\n  /**\n   * Compress pain records specifically\n   */\n  async compressRecords(records: PainRecord[]): Promise<string> {\n    try {\n      // Optimize records before compression\n      const optimizedRecords = this.optimizeRecords(records);\n      const compressionResult = await this.compressData(optimizedRecords);\n      return compressionResult.compressedData;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to compress pain records',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Decompress pain records specifically\n   */\n  async decompressRecords(compressedRecords: string): Promise<PainRecord[]> {\n    try {\n      const decompressedData = await this.decompressData(compressedRecords);\n      return this.deserializeRecords(decompressedData);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to decompress pain records',\n        'DATA_CORRUPTION',\n        error\n      );\n    }\n  }\n\n  /**\n   * Calculate compression ratio\n   */\n  getCompressionRatio(originalSize: number, compressedSize: number): number {\n    if (originalSize === 0) return 1;\n    return Math.round((compressedSize / originalSize) * 100) / 100;\n  }\n\n  /**\n   * Optimize stored data structure\n   */\n  async optimizeStorageData(data: StoredData): Promise<StoredData> {\n    try {\n      return {\n        ...data,\n        records: this.optimizeRecords(data.records),\n        preferences: this.optimizePreferences(data.preferences),\n        metadata: this.optimizeMetadata(data.metadata)\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to optimize storage data',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get compression statistics for monitoring\n   */\n  async getCompressionStats(data: any): Promise<{\n    originalSize: number;\n    compressedSize: number;\n    compressionRatio: number;\n    estimatedSavings: number;\n  }> {\n    const compressionResult = await this.compressData(data);\n    const estimatedSavings = compressionResult.originalSize - compressionResult.compressedSize;\n\n    return {\n      originalSize: compressionResult.originalSize,\n      compressedSize: compressionResult.compressedSize,\n      compressionRatio: compressionResult.compressionRatio,\n      estimatedSavings\n    };\n  }\n\n  // Private compression methods\n\n  private async basicCompress(data: string): Promise<string> {\n    // Basic compression using JSON minification and simple string replacement\n    let compressed = data;\n    \n    // Remove unnecessary whitespace\n    compressed = compressed.replace(/\\s+/g, ' ').trim();\n    \n    // Replace common repeated strings with shorter tokens\n    const replacements = [\n      { pattern: '\"painLevel\":', replacement: '\"pl\":' },\n      { pattern: '\"painTypes\":', replacement: '\"pt\":' },\n      { pattern: '\"locations\":', replacement: '\"loc\":' },\n      { pattern: '\"symptoms\":', replacement: '\"sym\":' },\n      { pattern: '\"menstrualStatus\":', replacement: '\"ms\":' },\n      { pattern: '\"medications\":', replacement: '\"med\":' },\n      { pattern: '\"effectiveness\":', replacement: '\"eff\":' },\n      { pattern: '\"lifestyleFactors\":', replacement: '\"lf\":' },\n      { pattern: '\"createdAt\":', replacement: '\"ca\":' },\n      { pattern: '\"updatedAt\":', replacement: '\"ua\":' },\n      { pattern: '\"notes\":', replacement: '\"n\":' }\n    ];\n\n    replacements.forEach(({ pattern, replacement }) => {\n      compressed = compressed.replace(new RegExp(pattern, 'g'), replacement);\n    });\n\n    return `BASIC:${compressed}`;\n  }\n\n  private async basicDecompress(compressedData: string): Promise<string> {\n    if (!compressedData.startsWith('BASIC:')) {\n      throw new Error('Invalid basic compression format');\n    }\n\n    let decompressed = compressedData.substring(6); // Remove 'BASIC:' prefix\n\n    // Reverse the replacements\n    const replacements = [\n      { pattern: '\"n\":', replacement: '\"notes\":' },\n      { pattern: '\"ua\":', replacement: '\"updatedAt\":' },\n      { pattern: '\"ca\":', replacement: '\"createdAt\":' },\n      { pattern: '\"lf\":', replacement: '\"lifestyleFactors\":' },\n      { pattern: '\"eff\":', replacement: '\"effectiveness\":' },\n      { pattern: '\"med\":', replacement: '\"medications\":' },\n      { pattern: '\"ms\":', replacement: '\"menstrualStatus\":' },\n      { pattern: '\"sym\":', replacement: '\"symptoms\":' },\n      { pattern: '\"loc\":', replacement: '\"locations\":' },\n      { pattern: '\"pt\":', replacement: '\"painTypes\":' },\n      { pattern: '\"pl\":', replacement: '\"painLevel\":' }\n    ];\n\n    replacements.forEach(({ pattern, replacement }) => {\n      decompressed = decompressed.replace(new RegExp(pattern, 'g'), replacement);\n    });\n\n    return decompressed;\n  }\n\n  private async advancedCompress(data: string): Promise<string> {\n    // Advanced compression using LZ-string algorithm\n    // For now, implement a simple dictionary-based compression\n    \n    const dictionary = this.buildCompressionDictionary(data);\n    let compressed = data;\n    \n    // Replace common patterns with dictionary references\n    dictionary.forEach((replacement, pattern) => {\n      compressed = compressed.replace(new RegExp(pattern, 'g'), replacement);\n    });\n\n    // Add dictionary to the beginning of compressed data\n    const dictionaryString = JSON.stringify(Array.from(dictionary.entries()));\n    return `ADVANCED:${dictionaryString}|${compressed}`;\n  }\n\n  private async advancedDecompress(compressedData: string): Promise<string> {\n    if (!compressedData.startsWith('ADVANCED:')) {\n      throw new Error('Invalid advanced compression format');\n    }\n\n    const content = compressedData.substring(9); // Remove 'ADVANCED:' prefix\n    const separatorIndex = content.indexOf('|');\n    \n    if (separatorIndex === -1) {\n      throw new Error('Invalid advanced compression format');\n    }\n\n    const dictionaryString = content.substring(0, separatorIndex);\n    const compressedContent = content.substring(separatorIndex + 1);\n\n    const dictionaryArray = JSON.parse(dictionaryString);\n    const dictionary = new Map(dictionaryArray);\n\n    let decompressed = compressedContent;\n\n    // Reverse the dictionary replacements\n    dictionary.forEach((replacement, pattern) => {\n      decompressed = decompressed.replace(new RegExp(String(replacement), 'g'), String(pattern));\n    });\n\n    return decompressed;\n  }\n\n  private detectCompressionAlgorithm(data: string): string {\n    if (data.startsWith('BASIC:')) return 'basic';\n    if (data.startsWith('ADVANCED:')) return 'lz-string';\n    \n    // Try to parse as JSON to detect uncompressed data\n    try {\n      JSON.parse(data);\n      return 'none';\n    } catch {\n      // If it's not valid JSON, assume it's compressed but unknown format\n      return 'basic';\n    }\n  }\n\n  private buildCompressionDictionary(data: string): Map<string, string> {\n    const dictionary = new Map<string, string>();\n    const patterns = [\n      // Common JSON patterns\n      '{\"id\":\"',\n      '\",\"date\":\"',\n      '\",\"time\":\"',\n      '\",\"painLevel\":',\n      ',\"painTypes\":[',\n      ',\"locations\":[',\n      ',\"symptoms\":[',\n      ',\"menstrualStatus\":\"',\n      ',\"medications\":[',\n      ',\"effectiveness\":',\n      ',\"lifestyleFactors\":[',\n      ',\"notes\":\"',\n      ',\"createdAt\":\"',\n      ',\"updatedAt\":\"',\n      // Common values\n      '\"cramping\"',\n      '\"aching\"',\n      '\"sharp\"',\n      '\"throbbing\"',\n      '\"burning\"',\n      '\"pressure\"',\n      '\"lower_abdomen\"',\n      '\"lower_back\"',\n      '\"upper_thighs\"',\n      '\"pelvis\"',\n      '\"side\"',\n      '\"whole_abdomen\"'\n    ];\n\n    patterns.forEach((pattern, index) => {\n      // Create short replacement tokens\n      const replacement = `Â§${index.toString(36)}Â§`;\n      dictionary.set(pattern, replacement);\n    });\n\n    return dictionary;\n  }\n\n  private optimizeRecords(records: PainRecord[]): PainRecord[] {\n    return records.map(record => ({\n      ...record,\n      // Remove empty arrays and null values\n      painTypes: record.painTypes.filter(Boolean),\n      locations: record.locations.filter(Boolean),\n      symptoms: record.symptoms.filter(Boolean),\n      medications: record.medications.filter(med => med.name && med.name.trim()),\n      lifestyleFactors: record.lifestyleFactors?.filter(Boolean) || [],\n      // Trim notes\n      notes: record.notes?.trim() || undefined\n    }));\n  }\n\n  private optimizePreferences(preferences: any): any {\n    if (!preferences) return preferences;\n\n    return {\n      ...preferences,\n      // Remove empty arrays and default values\n      defaultMedications: preferences.defaultMedications?.filter(Boolean) || [],\n      // Optimize nested objects\n      reminderSettings: preferences.reminderSettings ? {\n        ...preferences.reminderSettings,\n        // Remove disabled reminders\n        ...(preferences.reminderSettings.enabled === false ? {} : preferences.reminderSettings)\n      } : undefined\n    };\n  }\n\n  private optimizeMetadata(metadata: any): any {\n    if (!metadata) return metadata;\n\n    return {\n      ...metadata,\n      // Keep only essential metadata\n      lastModified: metadata.lastModified,\n      recordCount: metadata.recordCount,\n      dataSize: metadata.dataSize,\n      version: metadata.version\n    };\n  }\n\n  private deserializeRecords(data: any): PainRecord[] {\n    if (!Array.isArray(data)) {\n      throw new Error('Invalid records data format');\n    }\n\n    return data.map(record => ({\n      ...record,\n      createdAt: new Date(record.createdAt || record.ca),\n      updatedAt: new Date(record.updatedAt || record.ua),\n      // Ensure arrays are properly initialized\n      painTypes: record.painTypes || record.pt || [],\n      locations: record.locations || record.loc || [],\n      symptoms: record.symptoms || record.sym || [],\n      medications: record.medications || record.med || [],\n      lifestyleFactors: record.lifestyleFactors || record.lf || []\n    }));\n  }\n}\n\nexport default DataCompressionService;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/LazyLoadingService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":228,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6679,6682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6679,6682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":234,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6923,6926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6923,6926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'offset' is defined but never used.","line":322,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":322,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'batchSize' is defined but never used.","line":322,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":322,"endColumn":70}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LazyLoadingService - Implements lazy loading for historical records and charts\n// Provides pagination, virtual scrolling, and progressive data loading\n\nimport {\n  PainRecord,\n  PaginationOptions,\n  LazyLoadResult,\n  PainTrackerError\n} from '../../../types/pain-tracker';\n\nexport interface LazyLoadingServiceInterface {\n  loadRecordsPaginated(options: PaginationOptions): Promise<LazyLoadResult<PainRecord>>;\n  loadRecordsVirtual(startIndex: number, endIndex: number): Promise<PainRecord[]>;\n  preloadNextBatch(currentPage: number, pageSize: number): Promise<void>;\n  clearCache(): void;\n  getCacheStats(): { size: number; hitRate: number };\n}\n\nexport class LazyLoadingService implements LazyLoadingServiceInterface {\n  private cache = new Map<string, PainRecord[]>();\n  private cacheHits = 0;\n  private cacheMisses = 0;\n  private maxCacheSize = 50; // Maximum number of cached pages\n  private preloadBuffer = 2; // Number of pages to preload ahead\n\n  /**\n   * Load records with pagination support\n   */\n  async loadRecordsPaginated(options: PaginationOptions): Promise<LazyLoadResult<PainRecord>> {\n    try {\n      const {\n        page = 1,\n        pageSize = 20,\n        sortBy = 'date',\n        sortOrder = 'desc',\n        filters = {}\n      } = options;\n\n      const cacheKey = this.generateCacheKey(options);\n      \n      // Check cache first\n      if (this.cache.has(cacheKey)) {\n        this.cacheHits++;\n        const cachedRecords = this.cache.get(cacheKey)!;\n        \n        return {\n          data: cachedRecords,\n          pagination: {\n            currentPage: page,\n            pageSize,\n            totalItems: await this.getTotalRecordCount(filters),\n            totalPages: Math.ceil(await this.getTotalRecordCount(filters) / pageSize),\n            hasNextPage: page * pageSize < await this.getTotalRecordCount(filters),\n            hasPreviousPage: page > 1\n          },\n          fromCache: true\n        };\n      }\n\n      this.cacheMisses++;\n\n      // Load records from storage\n      const allRecords = await this.loadAllRecords();\n      \n      // Apply filters\n      const filteredRecords = this.applyFilters(allRecords, filters);\n      \n      // Apply sorting\n      const sortedRecords = this.applySorting(filteredRecords, sortBy, sortOrder);\n      \n      // Apply pagination\n      const startIndex = (page - 1) * pageSize;\n      const endIndex = startIndex + pageSize;\n      const paginatedRecords = sortedRecords.slice(startIndex, endIndex);\n      \n      // Cache the result\n      this.cacheRecords(cacheKey, paginatedRecords);\n      \n      // Preload next batch if needed\n      if (options.preload !== false) {\n        this.preloadNextBatch(page, pageSize).catch(console.warn);\n      }\n\n      return {\n        data: paginatedRecords,\n        pagination: {\n          currentPage: page,\n          pageSize,\n          totalItems: filteredRecords.length,\n          totalPages: Math.ceil(filteredRecords.length / pageSize),\n          hasNextPage: endIndex < filteredRecords.length,\n          hasPreviousPage: page > 1\n        },\n        fromCache: false\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to load paginated records',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Load records for virtual scrolling\n   */\n  async loadRecordsVirtual(startIndex: number, endIndex: number): Promise<PainRecord[]> {\n    try {\n      const cacheKey = `virtual_${startIndex}_${endIndex}`;\n      \n      // Check cache first\n      if (this.cache.has(cacheKey)) {\n        this.cacheHits++;\n        return this.cache.get(cacheKey)!;\n      }\n\n      this.cacheMisses++;\n\n      // Load all records and slice the required range\n      const allRecords = await this.loadAllRecords();\n      const virtualRecords = allRecords.slice(startIndex, endIndex);\n      \n      // Cache the result\n      this.cacheRecords(cacheKey, virtualRecords);\n      \n      return virtualRecords;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to load virtual records',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Preload next batch of records for smoother navigation\n   */\n  async preloadNextBatch(currentPage: number, pageSize: number): Promise<void> {\n    try {\n      const nextPage = currentPage + 1;\n      const preloadOptions: PaginationOptions = {\n        page: nextPage,\n        pageSize,\n        preload: false // Prevent recursive preloading\n      };\n\n      // Only preload if not already cached\n      const cacheKey = this.generateCacheKey(preloadOptions);\n      if (!this.cache.has(cacheKey)) {\n        await this.loadRecordsPaginated(preloadOptions);\n      }\n    } catch (error) {\n      // Preloading failures should not affect main functionality\n      console.warn('Failed to preload next batch:', error);\n    }\n  }\n\n  /**\n   * Clear all cached data\n   */\n  clearCache(): void {\n    this.cache.clear();\n    this.cacheHits = 0;\n    this.cacheMisses = 0;\n  }\n\n  /**\n   * Get cache performance statistics\n   */\n  getCacheStats(): { size: number; hitRate: number } {\n    const totalRequests = this.cacheHits + this.cacheMisses;\n    const hitRate = totalRequests > 0 ? this.cacheHits / totalRequests : 0;\n    \n    return {\n      size: this.cache.size,\n      hitRate: Math.round(hitRate * 100) / 100\n    };\n  }\n\n  /**\n   * Load records in batches to avoid memory issues\n   */\n  async loadRecordsBatch(batchSize: number = 100): Promise<PainRecord[]> {\n    try {\n      const allRecords: PainRecord[] = [];\n      let offset = 0;\n      let hasMore = true;\n\n      while (hasMore) {\n        const batch = await this.loadRecordsBatchFromStorage(offset, batchSize);\n        allRecords.push(...batch);\n        \n        hasMore = batch.length === batchSize;\n        offset += batchSize;\n\n        // Yield control to prevent blocking the UI\n        if (hasMore) {\n          await new Promise(resolve => setTimeout(resolve, 0));\n        }\n      }\n\n      return allRecords;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to load records in batches',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  // Private helper methods\n\n  private generateCacheKey(options: PaginationOptions): string {\n    const { page, pageSize, sortBy, sortOrder, filters } = options;\n    const filterKey = JSON.stringify(filters || {});\n    return `${page}_${pageSize}_${sortBy}_${sortOrder}_${filterKey}`;\n  }\n\n  private async loadAllRecords(): Promise<PainRecord[]> {\n    // This would typically load from the data manager\n    // For now, return empty array - will be integrated with actual data manager\n    return Promise.resolve([]);\n  }\n\n  private async getTotalRecordCount(filters: any = {}): Promise<number> {\n    const allRecords = await this.loadAllRecords();\n    const filteredRecords = this.applyFilters(allRecords, filters);\n    return filteredRecords.length;\n  }\n\n  private applyFilters(records: PainRecord[], filters: any): PainRecord[] {\n    let filteredRecords = [...records];\n\n    // Date range filter\n    if (filters.startDate || filters.endDate) {\n      filteredRecords = filteredRecords.filter(record => {\n        const recordDate = new Date(record.date);\n        if (filters.startDate && recordDate < new Date(filters.startDate)) {\n          return false;\n        }\n        if (filters.endDate && recordDate > new Date(filters.endDate)) {\n          return false;\n        }\n        return true;\n      });\n    }\n\n    // Pain level filter\n    if (filters.minPainLevel !== undefined || filters.maxPainLevel !== undefined) {\n      filteredRecords = filteredRecords.filter(record => {\n        if (filters.minPainLevel !== undefined && record.painLevel < filters.minPainLevel) {\n          return false;\n        }\n        if (filters.maxPainLevel !== undefined && record.painLevel > filters.maxPainLevel) {\n          return false;\n        }\n        return true;\n      });\n    }\n\n    // Menstrual status filter\n    if (filters.menstrualStatus) {\n      filteredRecords = filteredRecords.filter(record => \n        record.menstrualStatus === filters.menstrualStatus\n      );\n    }\n\n    // Text search filter\n    if (filters.searchText) {\n      const searchTerm = filters.searchText.toLowerCase();\n      filteredRecords = filteredRecords.filter(record => {\n        return (\n          record.notes?.toLowerCase().includes(searchTerm) ||\n          record.painTypes.some(type => type.toLowerCase().includes(searchTerm)) ||\n          record.locations.some(location => location.toLowerCase().includes(searchTerm)) ||\n          record.symptoms.some(symptom => symptom.toLowerCase().includes(searchTerm))\n        );\n      });\n    }\n\n    return filteredRecords;\n  }\n\n  private applySorting(records: PainRecord[], sortBy: string, sortOrder: 'asc' | 'desc'): PainRecord[] {\n    return [...records].sort((a, b) => {\n      let comparison = 0;\n\n      switch (sortBy) {\n        case 'date':\n          comparison = new Date(a.date).getTime() - new Date(b.date).getTime();\n          break;\n        case 'painLevel':\n          comparison = a.painLevel - b.painLevel;\n          break;\n        case 'createdAt':\n          comparison = a.createdAt.getTime() - b.createdAt.getTime();\n          break;\n        case 'updatedAt':\n          comparison = a.updatedAt.getTime() - b.updatedAt.getTime();\n          break;\n        default:\n          comparison = 0;\n      }\n\n      return sortOrder === 'desc' ? -comparison : comparison;\n    });\n  }\n\n  private cacheRecords(key: string, records: PainRecord[]): void {\n    // Implement LRU cache eviction if cache is full\n    if (this.cache.size >= this.maxCacheSize) {\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey) this.cache.delete(firstKey);\n    }\n\n    this.cache.set(key, records);\n  }\n\n  private async loadRecordsBatchFromStorage(offset: number, batchSize: number): Promise<PainRecord[]> {\n    // This would load a specific batch from storage\n    // Implementation depends on the storage adapter\n    return Promise.resolve([]);\n  }\n}\n\nexport default LazyLoadingService;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/MemoryManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[777,780],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[777,780],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[823,826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[823,826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":248,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7964,7967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7964,7967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7994,7997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7994,7997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8549,8552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8549,8552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":324,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":324,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10062,10065],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10062,10065],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":336,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":336,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10429,10432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10429,10432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":339,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":339,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10512,10515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10512,10515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":339,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":339,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":506,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":506,"endColumn":21}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// MemoryManager - Implements memory management for chart instances and large data operations\n// Provides memory monitoring, cleanup, and optimization\n\nimport {\n  MemoryUsageInfo,\n  MemoryThresholds,\n  MemoryOptimizationResult,\n  PainTrackerError\n} from '../../../types/pain-tracker';\n\nexport interface MemoryManagerInterface {\n  monitorMemoryUsage(): MemoryUsageInfo;\n  cleanupChartInstances(): Promise<MemoryOptimizationResult>;\n  optimizeDataStructures(): Promise<MemoryOptimizationResult>;\n  scheduleMemoryCleanup(intervalMs: number): void;\n  cancelMemoryCleanup(): void;\n  getMemoryRecommendations(): Promise<string[]>;\n  forceGarbageCollection(): Promise<void>;\n}\n\nexport class MemoryManager implements MemoryManagerInterface {\n  private chartInstances = new Map<string, any>();\n  private dataCache = new Map<string, any>();\n  private cleanupTimer: NodeJS.Timeout | null = null;\n  private memoryThresholds: MemoryThresholds = {\n    warning: 50 * 1024 * 1024, // 50MB\n    critical: 100 * 1024 * 1024, // 100MB\n    maxCacheSize: 20 * 1024 * 1024, // 20MB\n    maxChartInstances: 10\n  };\n\n  private memoryHistory: MemoryUsageInfo[] = [];\n  private maxHistoryLength = 100;\n\n  /**\n   * Monitor current memory usage\n   */\n  monitorMemoryUsage(): MemoryUsageInfo {\n    const memoryInfo = this.getMemoryInfo();\n    \n    // Add to history\n    this.memoryHistory.push(memoryInfo);\n    if (this.memoryHistory.length > this.maxHistoryLength) {\n      this.memoryHistory.shift();\n    }\n\n    // Check for memory pressure\n    if (memoryInfo.usedJSHeapSize > this.memoryThresholds.critical) {\n      console.warn('Critical memory usage detected:', memoryInfo);\n      this.performEmergencyCleanup().catch(console.error);\n    } else if (memoryInfo.usedJSHeapSize > this.memoryThresholds.warning) {\n      console.warn('High memory usage detected:', memoryInfo);\n    }\n\n    return memoryInfo;\n  }\n\n  /**\n   * Clean up chart instances to free memory\n   */\n  async cleanupChartInstances(): Promise<MemoryOptimizationResult> {\n    const startMemory = this.getMemoryInfo();\n    const operations: string[] = [];\n    let instancesDestroyed = 0;\n\n    try {\n      // Destroy old or unused chart instances\n      const instancesToDestroy: string[] = [];\n      \n      this.chartInstances.forEach((instance, id) => {\n        if (this.shouldDestroyChartInstance(instance, id)) {\n          instancesToDestroy.push(id);\n        }\n      });\n\n      // Destroy identified instances\n      for (const id of instancesToDestroy) {\n        const instance = this.chartInstances.get(id);\n        if (instance && typeof instance.destroy === 'function') {\n          instance.destroy();\n          this.chartInstances.delete(id);\n          instancesDestroyed++;\n        }\n      }\n\n      if (instancesDestroyed > 0) {\n        operations.push(`Destroyed ${instancesDestroyed} chart instances`);\n      }\n\n      // Clean up chart-related DOM elements\n      const orphanedElements = this.cleanupOrphanedChartElements();\n      if (orphanedElements > 0) {\n        operations.push(`Removed ${orphanedElements} orphaned chart elements`);\n      }\n\n      // Force garbage collection if available\n      await this.forceGarbageCollection();\n\n      const endMemory = this.getMemoryInfo();\n      const memorySaved = startMemory.usedJSHeapSize - endMemory.usedJSHeapSize;\n\n      return {\n        memorySaved,\n        operations,\n        startMemory: startMemory.usedJSHeapSize,\n        endMemory: endMemory.usedJSHeapSize,\n        optimizationTime: 0\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to cleanup chart instances',\n        'CHART_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Optimize data structures to reduce memory usage\n   */\n  async optimizeDataStructures(): Promise<MemoryOptimizationResult> {\n    const startMemory = this.getMemoryInfo();\n    const operations: string[] = [];\n\n    try {\n      // Clean up data cache\n      const cacheCleanup = await this.cleanupDataCache();\n      operations.push(...cacheCleanup.operations);\n\n      // Optimize stored data structures\n      const dataOptimization = await this.optimizeStoredData();\n      operations.push(...dataOptimization.operations);\n\n      // Clean up event listeners\n      const listenerCleanup = await this.cleanupEventListeners();\n      operations.push(...listenerCleanup.operations);\n\n      // Force garbage collection\n      await this.forceGarbageCollection();\n\n      const endMemory = this.getMemoryInfo();\n      const memorySaved = startMemory.usedJSHeapSize - endMemory.usedJSHeapSize;\n\n      return {\n        memorySaved,\n        operations,\n        startMemory: startMemory.usedJSHeapSize,\n        endMemory: endMemory.usedJSHeapSize,\n        optimizationTime: 0\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to optimize data structures',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Schedule automatic memory cleanup\n   */\n  scheduleMemoryCleanup(intervalMs: number): void {\n    this.cancelMemoryCleanup();\n    \n    // Don't start timers in test environment\n    if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') {\n      return;\n    }\n    \n    this.cleanupTimer = setInterval(async () => {\n      try {\n        const memoryInfo = this.monitorMemoryUsage();\n        \n        // Perform cleanup if memory usage is high\n        if (memoryInfo.usedJSHeapSize > this.memoryThresholds.warning) {\n          await this.cleanupChartInstances();\n          await this.optimizeDataStructures();\n        }\n      } catch (error) {\n        console.error('Automatic memory cleanup failed:', error);\n      }\n    }, intervalMs);\n  }\n\n  /**\n   * Cancel automatic memory cleanup\n   */\n  cancelMemoryCleanup(): void {\n    if (this.cleanupTimer) {\n      clearInterval(this.cleanupTimer);\n      this.cleanupTimer = null;\n    }\n  }\n\n  /**\n   * Get memory optimization recommendations\n   */\n  async getMemoryRecommendations(): Promise<string[]> {\n    const recommendations: string[] = [];\n    const memoryInfo = this.monitorMemoryUsage();\n\n    // Check current memory usage\n    if (memoryInfo.usedJSHeapSize > this.memoryThresholds.critical) {\n      recommendations.push('Critical: Memory usage is very high. Consider reducing data visualization complexity.');\n      recommendations.push('Reduce the number of data points displayed in charts.');\n      recommendations.push('Close unused chart tabs or components.');\n    } else if (memoryInfo.usedJSHeapSize > this.memoryThresholds.warning) {\n      recommendations.push('Warning: Memory usage is elevated. Monitor performance.');\n      recommendations.push('Consider enabling data sampling for large datasets.');\n    }\n\n    // Check chart instances\n    if (this.chartInstances.size > this.memoryThresholds.maxChartInstances) {\n      recommendations.push(`Too many chart instances (${this.chartInstances.size}). Consider destroying unused charts.`);\n    }\n\n    // Check cache size\n    const cacheSize = this.calculateCacheSize();\n    if (cacheSize > this.memoryThresholds.maxCacheSize) {\n      recommendations.push('Data cache is large. Consider clearing cached data.');\n    }\n\n    // Check memory trend\n    if (this.memoryHistory.length >= 5) {\n      const recentMemory = this.memoryHistory.slice(-5);\n      const isIncreasing = this.isMemoryTrendIncreasing(recentMemory);\n      \n      if (isIncreasing) {\n        recommendations.push('Memory usage is trending upward. Monitor for memory leaks.');\n      }\n    }\n\n    // Browser-specific recommendations\n    if (!this.isMemoryAPIAvailable()) {\n      recommendations.push('Memory monitoring is limited in this browser. Consider using Chrome for better memory insights.');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * Force garbage collection if available\n   */\n  async forceGarbageCollection(): Promise<void> {\n    try {\n      // Force garbage collection in development/testing environments\n      if (typeof window !== 'undefined' && (window as any).gc) {\n        (window as any).gc();\n      }\n      \n      // Alternative: trigger garbage collection through memory pressure\n      if (this.isMemoryAPIAvailable()) {\n        // Create temporary memory pressure to trigger GC\n        const tempArray = new Array(1000000).fill(0);\n        tempArray.length = 0;\n      }\n    } catch (error) {\n      // Garbage collection is not available or failed\n      console.warn('Could not force garbage collection:', error);\n    }\n  }\n\n  /**\n   * Register a chart instance for memory management\n   */\n  registerChartInstance(id: string, instance: any): void {\n    // Destroy existing instance if it exists\n    if (this.chartInstances.has(id)) {\n      const existingInstance = this.chartInstances.get(id);\n      if (existingInstance && typeof existingInstance.destroy === 'function') {\n        existingInstance.destroy();\n      }\n    }\n\n    this.chartInstances.set(id, {\n      instance,\n      createdAt: Date.now(),\n      lastAccessed: Date.now()\n    });\n\n    // Enforce maximum number of instances\n    if (this.chartInstances.size > this.memoryThresholds.maxChartInstances) {\n      this.cleanupOldestChartInstance();\n    }\n  }\n\n  /**\n   * Unregister a chart instance\n   */\n  unregisterChartInstance(id: string): void {\n    const instanceData = this.chartInstances.get(id);\n    if (instanceData && instanceData.instance && typeof instanceData.instance.destroy === 'function') {\n      instanceData.instance.destroy();\n    }\n    this.chartInstances.delete(id);\n  }\n\n  /**\n   * Update chart instance access time\n   */\n  updateChartInstanceAccess(id: string): void {\n    const instanceData = this.chartInstances.get(id);\n    if (instanceData) {\n      instanceData.lastAccessed = Date.now();\n    }\n  }\n\n  // Private helper methods\n\n  private getMemoryInfo(): MemoryUsageInfo {\n    const defaultInfo: MemoryUsageInfo = {\n      usedJSHeapSize: 0,\n      totalJSHeapSize: 0,\n      jsHeapSizeLimit: 0,\n      timestamp: new Date(),\n      isEstimated: true\n    };\n\n    if (!this.isMemoryAPIAvailable()) {\n      return defaultInfo;\n    }\n\n    const memory = (performance as any).memory;\n    return {\n      usedJSHeapSize: memory.usedJSHeapSize || 0,\n      totalJSHeapSize: memory.totalJSHeapSize || 0,\n      jsHeapSizeLimit: memory.jsHeapSizeLimit || 0,\n      timestamp: new Date(),\n      isEstimated: false\n    };\n  }\n\n  private isMemoryAPIAvailable(): boolean {\n    return typeof performance !== 'undefined' && \n           (performance as any).memory !== undefined;\n  }\n\n  private shouldDestroyChartInstance(instanceData: any, id: string): boolean {\n    const now = Date.now();\n    const maxAge = 10 * 60 * 1000; // 10 minutes\n    const maxIdleTime = 5 * 60 * 1000; // 5 minutes\n\n    // Destroy if too old\n    if (now - instanceData.createdAt > maxAge) {\n      return true;\n    }\n\n    // Destroy if not accessed recently\n    if (now - instanceData.lastAccessed > maxIdleTime) {\n      return true;\n    }\n\n    // Destroy if instance is invalid\n    if (!instanceData.instance || typeof instanceData.instance.destroy !== 'function') {\n      return true;\n    }\n\n    return false;\n  }\n\n  private cleanupOldestChartInstance(): void {\n    let oldestId: string | null = null;\n    let oldestTime = Date.now();\n\n    this.chartInstances.forEach((instanceData, id) => {\n      if (instanceData.lastAccessed < oldestTime) {\n        oldestTime = instanceData.lastAccessed;\n        oldestId = id;\n      }\n    });\n\n    if (oldestId) {\n      this.unregisterChartInstance(oldestId);\n    }\n  }\n\n  private cleanupOrphanedChartElements(): number {\n    let removedCount = 0;\n\n    try {\n      // Find canvas elements that might be orphaned chart instances\n      const canvasElements = document.querySelectorAll('canvas[id^=\"chart-\"]');\n      \n      canvasElements.forEach(canvas => {\n        const id = canvas.id;\n        if (!this.chartInstances.has(id)) {\n          // This canvas doesn't have a registered instance\n          const parent = canvas.parentElement;\n          if (parent) {\n            parent.removeChild(canvas);\n            removedCount++;\n          }\n        }\n      });\n\n      // Clean up chart.js specific elements\n      const chartjsElements = document.querySelectorAll('.chartjs-render-monitor, .chartjs-size-monitor');\n      chartjsElements.forEach(element => {\n        if (!element.parentElement?.querySelector('canvas')) {\n          element.remove();\n          removedCount++;\n        }\n      });\n    } catch (error) {\n      console.warn('Failed to cleanup orphaned chart elements:', error);\n    }\n\n    return removedCount;\n  }\n\n  private async cleanupDataCache(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    const initialSize = this.dataCache.size;\n\n    // Remove old cache entries\n    const maxAge = 30 * 60 * 1000; // 30 minutes\n    const now = Date.now();\n\n    this.dataCache.forEach((value, key) => {\n      if (value.timestamp && now - value.timestamp > maxAge) {\n        this.dataCache.delete(key);\n      }\n    });\n\n    // Limit cache size\n    const maxCacheEntries = 50;\n    if (this.dataCache.size > maxCacheEntries) {\n      const entries = Array.from(this.dataCache.entries());\n      entries.sort((a, b) => (b[1].timestamp || 0) - (a[1].timestamp || 0));\n      \n      // Keep only the most recent entries\n      this.dataCache.clear();\n      entries.slice(0, maxCacheEntries).forEach(([key, value]) => {\n        this.dataCache.set(key, value);\n      });\n    }\n\n    const removedEntries = initialSize - this.dataCache.size;\n    if (removedEntries > 0) {\n      operations.push(`Cleaned up ${removedEntries} cache entries`);\n    }\n\n    return { operations };\n  }\n\n  private async optimizeStoredData(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n\n    try {\n      // Optimize localStorage data\n      const storageKeys = Object.keys(localStorage);\n      let optimizedKeys = 0;\n\n      storageKeys.forEach(key => {\n        if (key.startsWith('pain_tracker_')) {\n          try {\n            const data = localStorage.getItem(key);\n            if (data) {\n              // Re-stringify to remove extra whitespace\n              const parsed = JSON.parse(data);\n              const optimized = JSON.stringify(parsed);\n              \n              if (optimized.length < data.length) {\n                localStorage.setItem(key, optimized);\n                optimizedKeys++;\n              }\n            }\n          } catch (error) {\n            console.warn(`Failed to optimize storage key ${key}:`, error);\n          }\n        }\n      });\n\n      if (optimizedKeys > 0) {\n        operations.push(`Optimized ${optimizedKeys} storage keys`);\n      }\n    } catch (error) {\n      console.warn('Failed to optimize stored data:', error);\n    }\n\n    return { operations };\n  }\n\n  private async cleanupEventListeners(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n\n    try {\n      // Clean up chart-related event listeners\n      // This is a placeholder - actual implementation would depend on how events are managed\n      operations.push('Cleaned up event listeners');\n    } catch (error) {\n      console.warn('Failed to cleanup event listeners:', error);\n    }\n\n    return { operations };\n  }\n\n  private calculateCacheSize(): number {\n    let totalSize = 0;\n    \n    this.dataCache.forEach(value => {\n      try {\n        const serialized = JSON.stringify(value);\n        totalSize += new Blob([serialized]).size;\n      } catch (error) {\n        // Skip items that can't be serialized\n      }\n    });\n\n    return totalSize;\n  }\n\n  private isMemoryTrendIncreasing(memoryHistory: MemoryUsageInfo[]): boolean {\n    if (memoryHistory.length < 3) return false;\n\n    const recent = memoryHistory.slice(-3);\n    const first = recent[0].usedJSHeapSize;\n    const last = recent[recent.length - 1].usedJSHeapSize;\n\n    // Consider increasing if memory grew by more than 10MB\n    return last - first > 10 * 1024 * 1024;\n  }\n\n  private async performEmergencyCleanup(): Promise<void> {\n    try {\n      // Aggressive cleanup for critical memory situations\n      await this.cleanupChartInstances();\n      await this.optimizeDataStructures();\n      \n      // Clear all caches\n      this.dataCache.clear();\n      \n      // Force garbage collection\n      await this.forceGarbageCollection();\n      \n      console.log('Emergency memory cleanup completed');\n    } catch (error) {\n      console.error('Emergency cleanup failed:', error);\n    }\n  }\n}\n\nexport default MemoryManager;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/PerformanceManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[996,999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[996,999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1069,1072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1069,1072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1274,1277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1274,1277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1345,1348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1345,1348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1389,1392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1389,1392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1413,1416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1413,1416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1565,1568],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1565,1568],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2145,2148],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2145,2148],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2173,2176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2173,2176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3939,3942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3939,3942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4127,4130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4127,4130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4557,4560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4557,4560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4628,4631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4628,4631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4757,4760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4757,4760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4781,4784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4781,4784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5199,5202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5199,5202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// PerformanceManager - Main performance optimization service\n// Integrates all performance optimization services and provides unified interface\n\nimport LazyLoadingService from './LazyLoadingService';\nimport DataCompressionService from './DataCompressionService';\nimport DataCleanupService from './DataCleanupService';\nimport ChartPerformanceOptimizer from './ChartPerformanceOptimizer';\nimport MemoryManager from './MemoryManager';\nimport StorageQuotaManager from './StorageQuotaManager';\n\nimport {\n  PainRecord,\n  PaginationOptions,\n  LazyLoadResult,\n  CleanupOptions,\n  CleanupResult,\n  ChartOptimizationOptions,\n  MemoryUsageInfo,\n  StorageQuotaInfo,\n  PainTrackerError\n} from '../../../types/pain-tracker';\n\nexport interface PerformanceManagerInterface {\n  // Lazy Loading\n  loadRecordsPaginated(options: PaginationOptions): Promise<LazyLoadResult<PainRecord>>;\n  loadRecordsVirtual(startIndex: number, endIndex: number): Promise<PainRecord[]>;\n  \n  // Data Compression\n  compressData(data: any): Promise<string>;\n  decompressData(compressedData: string): Promise<any>;\n  \n  // Data Cleanup\n  performDataCleanup(options?: CleanupOptions): Promise<CleanupResult>;\n  scheduleAutomaticCleanup(intervalMs: number): void;\n  \n  // Chart Performance\n  optimizeChartData(data: any[], chartType: string, options?: ChartOptimizationOptions): Promise<any[]>;\n  optimizeChartOptions(baseOptions: any, dataSize: number): any;\n  \n  // Memory Management\n  monitorMemoryUsage(): MemoryUsageInfo;\n  cleanupMemory(): Promise<void>;\n  registerChartInstance(id: string, instance: any): void;\n  \n  // Storage Quota\n  monitorStorageQuota(): Promise<StorageQuotaInfo>;\n  optimizeStorage(): Promise<void>;\n  \n  // Overall Performance\n  getPerformanceReport(): Promise<PerformanceReport>;\n  optimizeOverallPerformance(): Promise<OverallOptimizationResult>;\n}\n\nexport interface PerformanceReport {\n  memory: MemoryUsageInfo;\n  storage: StorageQuotaInfo;\n  cacheStats: { size: number; hitRate: number };\n  recommendations: string[];\n  performanceScore: number; // 0-100\n  lastOptimization?: Date;\n}\n\nexport interface OverallOptimizationResult {\n  memoryOptimization: any;\n  storageOptimization: any;\n  dataCleanup: CleanupResult;\n  totalTimeSaved: number;\n  performanceImprovement: number;\n  recommendations: string[];\n}\n\nexport class PerformanceManager implements PerformanceManagerInterface {\n  private lazyLoadingService: LazyLoadingService;\n  private compressionService: DataCompressionService;\n  private cleanupService: DataCleanupService;\n  private chartOptimizer: ChartPerformanceOptimizer;\n  private memoryManager: MemoryManager;\n  private quotaManager: StorageQuotaManager;\n\n  private performanceHistory: PerformanceReport[] = [];\n  private maxHistoryLength = 20;\n\n  constructor(options: { enableMonitoring?: boolean } = {}) {\n    this.lazyLoadingService = new LazyLoadingService();\n    this.compressionService = new DataCompressionService();\n    this.cleanupService = new DataCleanupService();\n    this.chartOptimizer = new ChartPerformanceOptimizer();\n    this.memoryManager = new MemoryManager();\n    this.quotaManager = new StorageQuotaManager();\n\n    // Start automatic monitoring only if enabled (default true, but can be disabled for tests)\n    const enableMonitoring = options.enableMonitoring !== false && \n                            typeof process === 'undefined' || \n                            process.env.NODE_ENV !== 'test';\n    \n    if (enableMonitoring) {\n      this.initializePerformanceMonitoring();\n    }\n  }\n\n  // Lazy Loading Methods\n  async loadRecordsPaginated(options: PaginationOptions): Promise<LazyLoadResult<PainRecord>> {\n    return this.lazyLoadingService.loadRecordsPaginated(options);\n  }\n\n  async loadRecordsVirtual(startIndex: number, endIndex: number): Promise<PainRecord[]> {\n    return this.lazyLoadingService.loadRecordsVirtual(startIndex, endIndex);\n  }\n\n  // Data Compression Methods\n  async compressData(data: any): Promise<string> {\n    const result = await this.compressionService.compressData(data);\n    return result.compressedData;\n  }\n\n  async decompressData(compressedData: string): Promise<any> {\n    return this.compressionService.decompressData(compressedData);\n  }\n\n  // Data Cleanup Methods\n  async performDataCleanup(options?: CleanupOptions): Promise<CleanupResult> {\n    return this.cleanupService.performCleanup(options);\n  }\n\n  scheduleAutomaticCleanup(intervalMs: number): void {\n    this.cleanupService.scheduleAutomaticCleanup(intervalMs);\n  }\n\n  // Chart Performance Methods\n  async optimizeChartData(data: any[], chartType: string, options?: ChartOptimizationOptions): Promise<any[]> {\n    return this.chartOptimizer.optimizeDataForChart(data, chartType, options);\n  }\n\n  optimizeChartOptions(baseOptions: any, dataSize: number): any {\n    return this.chartOptimizer.optimizeChartOptions(baseOptions, dataSize);\n  }\n\n  // Memory Management Methods\n  monitorMemoryUsage(): MemoryUsageInfo {\n    return this.memoryManager.monitorMemoryUsage();\n  }\n\n  async cleanupMemory(): Promise<void> {\n    await this.memoryManager.cleanupChartInstances();\n    await this.memoryManager.optimizeDataStructures();\n  }\n\n  registerChartInstance(id: string, instance: any): void {\n    this.memoryManager.registerChartInstance(id, instance);\n  }\n\n  // Storage Quota Methods\n  async monitorStorageQuota(): Promise<StorageQuotaInfo> {\n    return this.quotaManager.monitorQuotaUsage();\n  }\n\n  async optimizeStorage(): Promise<void> {\n    await this.quotaManager.optimizeStorageUsage();\n  }\n\n  // Overall Performance Methods\n  async getPerformanceReport(): Promise<PerformanceReport> {\n    try {\n      const memory = this.monitorMemoryUsage();\n      const storage = await this.monitorStorageQuota();\n      const cacheStats = this.lazyLoadingService.getCacheStats();\n      \n      // Generate recommendations\n      const recommendations = await this.generatePerformanceRecommendations(memory, storage, cacheStats);\n      \n      // Calculate performance score\n      const performanceScore = this.calculatePerformanceScore(memory, storage, cacheStats);\n      \n      const report: PerformanceReport = {\n        memory,\n        storage,\n        cacheStats,\n        recommendations,\n        performanceScore,\n        lastOptimization: this.getLastOptimizationDate()\n      };\n\n      // Add to history\n      this.performanceHistory.push(report);\n      if (this.performanceHistory.length > this.maxHistoryLength) {\n        this.performanceHistory.shift();\n      }\n\n      return report;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to generate performance report',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  async optimizeOverallPerformance(): Promise<OverallOptimizationResult> {\n    const startTime = performance.now();\n    \n    try {\n      // Get initial performance metrics\n      const initialReport = await this.getPerformanceReport();\n      \n      // Perform optimizations in order of impact\n      const memoryOptimization = await this.memoryManager.cleanupChartInstances();\n      const storageOptimization = await this.quotaManager.optimizeStorageUsage();\n      const dataCleanup = await this.cleanupService.performCleanup();\n      \n      // Clear caches to free up memory\n      this.lazyLoadingService.clearCache();\n      \n      // Get final performance metrics\n      const finalReport = await this.getPerformanceReport();\n      \n      const totalTimeSaved = performance.now() - startTime;\n      const performanceImprovement = finalReport.performanceScore - initialReport.performanceScore;\n      \n      // Generate post-optimization recommendations\n      const recommendations = await this.generatePostOptimizationRecommendations(\n        initialReport,\n        finalReport\n      );\n\n      return {\n        memoryOptimization,\n        storageOptimization,\n        dataCleanup,\n        totalTimeSaved,\n        performanceImprovement,\n        recommendations\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to optimize overall performance',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get performance optimization recommendations for large datasets\n   */\n  async getDatasetOptimizationRecommendations(recordCount: number): Promise<string[]> {\n    const recommendations: string[] = [];\n\n    if (recordCount > 1000) {\n      recommendations.push('Enable lazy loading for historical records to improve initial load time');\n      recommendations.push('Use data sampling for charts to improve rendering performance');\n      recommendations.push('Consider archiving records older than 12 months');\n    }\n\n    if (recordCount > 5000) {\n      recommendations.push('Enable aggressive data compression to reduce storage usage');\n      recommendations.push('Implement virtual scrolling for record lists');\n      recommendations.push('Use chart data buckets for trend visualization');\n    }\n\n    if (recordCount > 10000) {\n      recommendations.push('Consider implementing data export and local cleanup');\n      recommendations.push('Enable automatic cleanup of old records');\n      recommendations.push('Use progressive loading for analytics');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * Configure performance settings based on device capabilities\n   */\n  configureForDevice(): void {\n    const memory = this.monitorMemoryUsage();\n    const isLowMemoryDevice = memory.jsHeapSizeLimit < 100 * 1024 * 1024; // Less than 100MB\n    \n    if (isLowMemoryDevice) {\n      // Configure for low-memory devices\n      this.chartOptimizer = new ChartPerformanceOptimizer();\n      this.compressionService = new DataCompressionService('advanced');\n      \n      // Enable aggressive cleanup\n      this.scheduleAutomaticCleanup(5 * 60 * 1000); // Every 5 minutes\n      this.memoryManager.scheduleMemoryCleanup(2 * 60 * 1000); // Every 2 minutes\n    } else {\n      // Configure for high-performance devices\n      this.compressionService = new DataCompressionService('basic');\n      \n      // Less frequent cleanup\n      this.scheduleAutomaticCleanup(30 * 60 * 1000); // Every 30 minutes\n      this.memoryManager.scheduleMemoryCleanup(10 * 60 * 1000); // Every 10 minutes\n    }\n  }\n\n  /**\n   * Emergency performance optimization for critical situations\n   */\n  async emergencyOptimization(): Promise<void> {\n    try {\n      console.warn('Performing emergency performance optimization');\n      \n      // Immediate memory cleanup\n      await this.memoryManager.cleanupChartInstances();\n      await this.memoryManager.forceGarbageCollection();\n      \n      // Clear all caches\n      this.lazyLoadingService.clearCache();\n      \n      // Emergency storage cleanup\n      await this.quotaManager.handleQuotaExceeded();\n      \n      // Aggressive data cleanup\n      const emergencyCleanupOptions: CleanupOptions = {\n        maxRecords: 500,\n        maxAgeMonths: 6,\n        removeDuplicates: true,\n        removeIncompleteRecords: true,\n        archiveOldRecords: true,\n        compactStorage: true\n      };\n      \n      await this.cleanupService.performCleanup(emergencyCleanupOptions);\n      \n      console.log('Emergency optimization completed');\n    } catch (error) {\n      console.error('Emergency optimization failed:', error);\n    }\n  }\n\n  // Private helper methods\n\n  private performanceMonitoringTimer: NodeJS.Timeout | null = null;\n  private emergencyMonitoringTimer: NodeJS.Timeout | null = null;\n\n  private initializePerformanceMonitoring(): void {\n    // Monitor performance every 5 minutes\n    this.performanceMonitoringTimer = setInterval(async () => {\n      try {\n        const report = await this.getPerformanceReport();\n        \n        // Trigger optimizations if performance is poor\n        if (report.performanceScore < 50) {\n          console.warn('Poor performance detected, triggering optimization');\n          await this.optimizeOverallPerformance();\n        }\n      } catch (error) {\n        console.error('Performance monitoring failed:', error);\n      }\n    }, 5 * 60 * 1000);\n\n    // Emergency monitoring every 30 seconds\n    this.emergencyMonitoringTimer = setInterval(() => {\n      const memory = this.monitorMemoryUsage();\n      if (memory.usedJSHeapSize > memory.jsHeapSizeLimit * 0.9) {\n        this.emergencyOptimization().catch(console.error);\n      }\n    }, 30 * 1000);\n  }\n\n  private async generatePerformanceRecommendations(\n    memory: MemoryUsageInfo,\n    storage: StorageQuotaInfo,\n    cacheStats: { size: number; hitRate: number }\n  ): Promise<string[]> {\n    const recommendations: string[] = [];\n\n    // Memory recommendations\n    const memoryRecommendations = await this.memoryManager.getMemoryRecommendations();\n    recommendations.push(...memoryRecommendations);\n\n    // Storage recommendations\n    const storageRecommendations = await this.quotaManager.getStorageRecommendations();\n    recommendations.push(...storageRecommendations);\n\n    // Cache recommendations\n    if (cacheStats.hitRate < 0.5) {\n      recommendations.push('Cache hit rate is low. Consider adjusting cache settings.');\n    }\n\n    if (cacheStats.size > 20) {\n      recommendations.push('Cache size is large. Consider clearing old cache entries.');\n    }\n\n    return recommendations;\n  }\n\n  private calculatePerformanceScore(\n    memory: MemoryUsageInfo,\n    storage: StorageQuotaInfo,\n    cacheStats: { size: number; hitRate: number }\n  ): number {\n    let score = 100;\n\n    // Memory score (0-40 points)\n    const memoryUsageRatio = memory.usedJSHeapSize / memory.jsHeapSizeLimit;\n    if (memoryUsageRatio > 0.9) score -= 40;\n    else if (memoryUsageRatio > 0.7) score -= 25;\n    else if (memoryUsageRatio > 0.5) score -= 10;\n\n    // Storage score (0-30 points)\n    if (storage.usagePercentage > 0.9) score -= 30;\n    else if (storage.usagePercentage > 0.7) score -= 20;\n    else if (storage.usagePercentage > 0.5) score -= 10;\n\n    // Cache score (0-20 points)\n    if (cacheStats.hitRate < 0.3) score -= 20;\n    else if (cacheStats.hitRate < 0.5) score -= 10;\n    else if (cacheStats.hitRate < 0.7) score -= 5;\n\n    // Performance trend score (0-10 points)\n    if (this.performanceHistory.length >= 3) {\n      const recent = this.performanceHistory.slice(-3);\n      const isImproving = recent[2].performanceScore > recent[0].performanceScore;\n      if (!isImproving) score -= 10;\n    }\n\n    return Math.max(0, Math.min(100, score));\n  }\n\n  private getLastOptimizationDate(): Date | undefined {\n    // This would track when optimizations were last performed\n    // For now, return undefined\n    return undefined;\n  }\n\n  private async generatePostOptimizationRecommendations(\n    initialReport: PerformanceReport,\n    finalReport: PerformanceReport\n  ): Promise<string[]> {\n    const recommendations: string[] = [];\n\n    const improvement = finalReport.performanceScore - initialReport.performanceScore;\n\n    if (improvement > 20) {\n      recommendations.push('Significant performance improvement achieved!');\n      recommendations.push('Consider scheduling regular optimizations to maintain performance.');\n    } else if (improvement > 10) {\n      recommendations.push('Good performance improvement achieved.');\n      recommendations.push('Monitor performance trends and optimize as needed.');\n    } else if (improvement > 0) {\n      recommendations.push('Minor performance improvement achieved.');\n      recommendations.push('Consider more aggressive optimization settings.');\n    } else {\n      recommendations.push('No significant performance improvement detected.');\n      recommendations.push('Review data usage patterns and consider manual cleanup.');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * Cleanup all performance services\n   */\n  destroy(): void {\n    // Clear monitoring timers\n    if (this.performanceMonitoringTimer) {\n      clearInterval(this.performanceMonitoringTimer);\n      this.performanceMonitoringTimer = null;\n    }\n    \n    if (this.emergencyMonitoringTimer) {\n      clearInterval(this.emergencyMonitoringTimer);\n      this.emergencyMonitoringTimer = null;\n    }\n\n    // Cleanup services\n    this.cleanupService.cancelAutomaticCleanup();\n    this.memoryManager.cancelMemoryCleanup();\n    this.quotaManager.cancelQuotaMonitoring();\n    this.lazyLoadingService.clearCache();\n  }\n}\n\nexport default PerformanceManager;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/StorageQuotaManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":338,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":338,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11302,11305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11302,11305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// StorageQuotaManager - Implements storage quota monitoring and management\n// Provides quota monitoring, cleanup recommendations, and storage optimization\n\nimport {\n  StorageQuotaInfo,\n  StorageQuotaThresholds,\n  StorageOptimizationResult,\n  PainTrackerError,\n  STORAGE_KEYS\n} from '../../../types/pain-tracker';\n\nexport interface StorageQuotaManagerInterface {\n  getQuotaInfo(): Promise<StorageQuotaInfo>;\n  monitorQuotaUsage(): Promise<StorageQuotaInfo>;\n  optimizeStorageUsage(): Promise<StorageOptimizationResult>;\n  getStorageRecommendations(): Promise<string[]>;\n  scheduleQuotaMonitoring(intervalMs: number): void;\n  cancelQuotaMonitoring(): void;\n  handleQuotaExceeded(): Promise<StorageOptimizationResult>;\n}\n\nexport class StorageQuotaManager implements StorageQuotaManagerInterface {\n  private quotaThresholds: StorageQuotaThresholds = {\n    warning: 0.8, // 80% of quota\n    critical: 0.9, // 90% of quota\n    emergency: 0.95, // 95% of quota\n    minFreeSpace: 5 * 1024 * 1024 // 5MB minimum free space\n  };\n\n  private monitoringTimer: NodeJS.Timeout | null = null;\n  private quotaHistory: StorageQuotaInfo[] = [];\n  private maxHistoryLength = 50;\n\n  /**\n   * Get current storage quota information\n   */\n  async getQuotaInfo(): Promise<StorageQuotaInfo> {\n    try {\n      let quotaInfo: StorageQuotaInfo;\n\n      if ('storage' in navigator && 'estimate' in navigator.storage) {\n        // Use modern Storage API\n        const estimate = await navigator.storage.estimate();\n        quotaInfo = {\n          used: estimate.usage || 0,\n          quota: estimate.quota || this.getFallbackQuota(),\n          available: (estimate.quota || this.getFallbackQuota()) - (estimate.usage || 0),\n          usagePercentage: estimate.quota ? (estimate.usage || 0) / estimate.quota : 0,\n          painTrackerUsage: await this.calculatePainTrackerUsage(),\n          timestamp: new Date(),\n          isEstimated: false\n        };\n      } else {\n        // Fallback for browsers without Storage API\n        const painTrackerUsage = await this.calculatePainTrackerUsage();\n        const fallbackQuota = this.getFallbackQuota();\n        \n        quotaInfo = {\n          used: painTrackerUsage, // We can only estimate our own usage\n          quota: fallbackQuota,\n          available: fallbackQuota - painTrackerUsage,\n          usagePercentage: painTrackerUsage / fallbackQuota,\n          painTrackerUsage,\n          timestamp: new Date(),\n          isEstimated: true\n        };\n      }\n\n      return quotaInfo;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to get storage quota information',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Monitor quota usage and trigger actions if needed\n   */\n  async monitorQuotaUsage(): Promise<StorageQuotaInfo> {\n    const quotaInfo = await this.getQuotaInfo();\n    \n    // Add to history\n    this.quotaHistory.push(quotaInfo);\n    if (this.quotaHistory.length > this.maxHistoryLength) {\n      this.quotaHistory.shift();\n    }\n\n    // Check thresholds and take action\n    if (quotaInfo.usagePercentage >= this.quotaThresholds.emergency) {\n      console.error('Emergency: Storage quota nearly exceeded!', quotaInfo);\n      await this.handleQuotaExceeded();\n    } else if (quotaInfo.usagePercentage >= this.quotaThresholds.critical) {\n      console.warn('Critical: Storage quota usage is very high', quotaInfo);\n      // Trigger automatic optimization\n      this.optimizeStorageUsage().catch(console.error);\n    } else if (quotaInfo.usagePercentage >= this.quotaThresholds.warning) {\n      console.warn('Warning: Storage quota usage is high', quotaInfo);\n    }\n\n    return quotaInfo;\n  }\n\n  /**\n   * Optimize storage usage to free up space\n   */\n  async optimizeStorageUsage(): Promise<StorageOptimizationResult> {\n    const startQuota = await this.getQuotaInfo();\n    const operations: string[] = [];\n    \n    try {\n      // 1. Clean up old backups\n      const backupCleanup = await this.cleanupOldBackups();\n      operations.push(...backupCleanup.operations);\n\n      // 2. Compress data if possible\n      const compressionResult = await this.compressStoredData();\n      operations.push(...compressionResult.operations);\n\n      // 3. Remove duplicate records\n      const deduplicationResult = await this.removeDuplicateData();\n      operations.push(...deduplicationResult.operations);\n\n      // 4. Archive old records\n      const archiveResult = await this.archiveOldData();\n      operations.push(...archiveResult.operations);\n\n      // 5. Clean up temporary data\n      const tempCleanup = await this.cleanupTemporaryData();\n      operations.push(...tempCleanup.operations);\n\n      const endQuota = await this.getQuotaInfo();\n      const spaceSaved = startQuota.used - endQuota.used;\n\n      return {\n        spaceSaved,\n        operations,\n        startUsage: startQuota.used,\n        endUsage: endQuota.used,\n        startPercentage: startQuota.usagePercentage,\n        endPercentage: endQuota.usagePercentage,\n        optimizationTime: 0\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to optimize storage usage',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get storage optimization recommendations\n   */\n  async getStorageRecommendations(): Promise<string[]> {\n    const recommendations: string[] = [];\n    const quotaInfo = await this.getQuotaInfo();\n\n    // Check current usage\n    if (quotaInfo.usagePercentage >= this.quotaThresholds.critical) {\n      recommendations.push('Critical: Storage is nearly full. Immediate action required.');\n      recommendations.push('Delete old pain records or export data to free up space.');\n      recommendations.push('Consider archiving records older than 6 months.');\n    } else if (quotaInfo.usagePercentage >= this.quotaThresholds.warning) {\n      recommendations.push('Warning: Storage usage is high. Consider cleanup.');\n      recommendations.push('Archive old records to free up space.');\n      recommendations.push('Remove duplicate entries if any exist.');\n    }\n\n    // Check pain tracker specific usage\n    const painTrackerPercentage = quotaInfo.painTrackerUsage / quotaInfo.quota;\n    if (painTrackerPercentage > 0.5) {\n      recommendations.push('Pain tracker is using significant storage space.');\n      recommendations.push('Consider exporting old data and removing it from local storage.');\n    }\n\n    // Check for growth trend\n    if (this.quotaHistory.length >= 5) {\n      const recentHistory = this.quotaHistory.slice(-5);\n      const isGrowingFast = this.isStorageGrowingFast(recentHistory);\n      \n      if (isGrowingFast) {\n        recommendations.push('Storage usage is growing rapidly. Monitor data accumulation.');\n      }\n    }\n\n    // Browser-specific recommendations\n    if (quotaInfo.isEstimated) {\n      recommendations.push('Storage monitoring is limited in this browser. Consider using Chrome for better insights.');\n    }\n\n    // Provide specific actions\n    if (recommendations.length > 0) {\n      recommendations.push('');\n      recommendations.push('Recommended actions:');\n      recommendations.push('â€¢ Export data regularly to prevent data loss');\n      recommendations.push('â€¢ Enable automatic cleanup in settings');\n      recommendations.push('â€¢ Review and delete unnecessary records');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * Schedule automatic quota monitoring\n   */\n  scheduleQuotaMonitoring(intervalMs: number): void {\n    this.cancelQuotaMonitoring();\n    \n    // Don't start timers in test environment\n    if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') {\n      return;\n    }\n    \n    this.monitoringTimer = setInterval(async () => {\n      try {\n        await this.monitorQuotaUsage();\n      } catch (error) {\n        console.error('Quota monitoring failed:', error);\n      }\n    }, intervalMs);\n  }\n\n  /**\n   * Cancel automatic quota monitoring\n   */\n  cancelQuotaMonitoring(): void {\n    if (this.monitoringTimer) {\n      clearInterval(this.monitoringTimer);\n      this.monitoringTimer = null;\n    }\n  }\n\n  /**\n   * Handle quota exceeded situation\n   */\n  async handleQuotaExceeded(): Promise<StorageOptimizationResult> {\n    try {\n      // Emergency cleanup - more aggressive than normal optimization\n      const startQuota = await this.getQuotaInfo();\n      const operations: string[] = [];\n\n      // 1. Remove all backups except the most recent\n      const backupCleanup = await this.emergencyBackupCleanup();\n      operations.push(...backupCleanup.operations);\n\n      // 2. Archive records older than 3 months\n      const archiveResult = await this.emergencyArchive(3);\n      operations.push(...archiveResult.operations);\n\n      // 3. Remove all temporary and cache data\n      const cacheCleanup = await this.clearAllCaches();\n      operations.push(...cacheCleanup.operations);\n\n      // 4. Compress remaining data aggressively\n      const compressionResult = await this.aggressiveCompression();\n      operations.push(...compressionResult.operations);\n\n      const endQuota = await this.getQuotaInfo();\n      const spaceSaved = startQuota.used - endQuota.used;\n\n      // If still critical, provide user guidance\n      if (endQuota.usagePercentage >= this.quotaThresholds.critical) {\n        operations.push('Manual intervention required: Export and delete old records');\n      }\n\n      return {\n        spaceSaved,\n        operations,\n        startUsage: startQuota.used,\n        endUsage: endQuota.used,\n        startPercentage: startQuota.usagePercentage,\n        endPercentage: endQuota.usagePercentage,\n        optimizationTime: 0\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to handle quota exceeded situation',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get storage breakdown by category\n   */\n  async getStorageBreakdown(): Promise<{\n    records: number;\n    preferences: number;\n    metadata: number;\n    backups: number;\n    other: number;\n  }> {\n    const breakdown = {\n      records: 0,\n      preferences: 0,\n      metadata: 0,\n      backups: 0,\n      other: 0\n    };\n\n    try {\n      // Calculate size for each category\n      const recordsData = localStorage.getItem(STORAGE_KEYS.PAIN_RECORDS);\n      if (recordsData) {\n        breakdown.records = new Blob([recordsData]).size;\n      }\n\n      const preferencesData = localStorage.getItem(STORAGE_KEYS.USER_PREFERENCES);\n      if (preferencesData) {\n        breakdown.preferences = new Blob([preferencesData]).size;\n      }\n\n      const metadataData = localStorage.getItem(STORAGE_KEYS.METADATA);\n      if (metadataData) {\n        breakdown.metadata = new Blob([metadataData]).size;\n      }\n\n      // Calculate backup sizes\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && (key.includes('_backup') || key.includes('_archive'))) {\n          const data = localStorage.getItem(key);\n          if (data) {\n            breakdown.backups += new Blob([data]).size;\n          }\n        }\n      }\n\n      // Calculate other pain tracker related data\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('pain_tracker_') && \n            !Object.values(STORAGE_KEYS).includes(key as any) &&\n            !key.includes('_backup') && !key.includes('_archive')) {\n          const data = localStorage.getItem(key);\n          if (data) {\n            breakdown.other += new Blob([data]).size;\n          }\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to calculate storage breakdown:', error);\n    }\n\n    return breakdown;\n  }\n\n  // Private helper methods\n\n  private getFallbackQuota(): number {\n    // Fallback quota estimates for different browsers\n    // Chrome: ~10MB for localStorage, Safari: ~5MB, Firefox: ~10MB\n    return 10 * 1024 * 1024; // 10MB fallback\n  }\n\n  private async calculatePainTrackerUsage(): Promise<number> {\n    let totalSize = 0;\n\n    try {\n      // Calculate size of all pain tracker related data\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('pain_tracker_')) {\n          const data = localStorage.getItem(key);\n          if (data) {\n            totalSize += new Blob([data]).size;\n          }\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to calculate pain tracker usage:', error);\n    }\n\n    return totalSize;\n  }\n\n  private isStorageGrowingFast(history: StorageQuotaInfo[]): boolean {\n    if (history.length < 3) return false;\n\n    const first = history[0];\n    const last = history[history.length - 1];\n    const timeDiff = last.timestamp.getTime() - first.timestamp.getTime();\n    const usageDiff = last.used - first.used;\n\n    // Consider fast growth if usage increased by more than 1MB per day\n    const dailyGrowth = (usageDiff / timeDiff) * (24 * 60 * 60 * 1000);\n    return dailyGrowth > 1024 * 1024; // 1MB per day\n  }\n\n  private async cleanupOldBackups(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    let removedCount = 0;\n    let spaceSaved = 0;\n\n    try {\n      const backupKeys: string[] = [];\n      \n      // Find all backup keys\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && (key.includes('_backup') || key.includes('_archive'))) {\n          backupKeys.push(key);\n        }\n      }\n\n      // Keep only the 3 most recent backups\n      const sortedBackups = backupKeys.sort().reverse();\n      const backupsToRemove = sortedBackups.slice(3);\n\n      backupsToRemove.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n          removedCount++;\n        }\n      });\n\n      if (removedCount > 0) {\n        operations.push(`Removed ${removedCount} old backup files (${this.formatBytes(spaceSaved)} saved)`);\n      }\n    } catch (error) {\n      console.warn('Failed to cleanup old backups:', error);\n    }\n\n    return { operations };\n  }\n\n  private async compressStoredData(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    \n    try {\n      // This would integrate with the DataCompressionService\n      // For now, just optimize JSON formatting\n      let totalSaved = 0;\n      \n      Object.values(STORAGE_KEYS).forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          try {\n            const parsed = JSON.parse(data);\n            const compressed = JSON.stringify(parsed); // Remove extra whitespace\n            \n            if (compressed.length < data.length) {\n              localStorage.setItem(key, compressed);\n              totalSaved += data.length - compressed.length;\n            }\n          } catch (error) {\n            console.warn(`Failed to compress data for key ${key}:`, error);\n          }\n        }\n      });\n\n      if (totalSaved > 0) {\n        operations.push(`Compressed stored data (${this.formatBytes(totalSaved)} saved)`);\n      }\n    } catch (error) {\n      console.warn('Failed to compress stored data:', error);\n    }\n\n    return { operations };\n  }\n\n  private async removeDuplicateData(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    \n    try {\n      // This would integrate with the DataCleanupService\n      // For now, just report that deduplication would be performed\n      operations.push('Duplicate data removal would be performed here');\n    } catch (error) {\n      console.warn('Failed to remove duplicate data:', error);\n    }\n\n    return { operations };\n  }\n\n  private async archiveOldData(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    \n    try {\n      // This would integrate with the DataCleanupService\n      // For now, just report that archiving would be performed\n      operations.push('Old data archiving would be performed here');\n    } catch (error) {\n      console.warn('Failed to archive old data:', error);\n    }\n\n    return { operations };\n  }\n\n  private async cleanupTemporaryData(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    let removedCount = 0;\n    let spaceSaved = 0;\n\n    try {\n      const tempKeys: string[] = [];\n      \n      // Find temporary keys\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && (key.includes('_temp') || key.includes('_cache'))) {\n          tempKeys.push(key);\n        }\n      }\n\n      tempKeys.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n          removedCount++;\n        }\n      });\n\n      if (removedCount > 0) {\n        operations.push(`Removed ${removedCount} temporary files (${this.formatBytes(spaceSaved)} saved)`);\n      }\n    } catch (error) {\n      console.warn('Failed to cleanup temporary data:', error);\n    }\n\n    return { operations };\n  }\n\n  private async emergencyBackupCleanup(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    let removedCount = 0;\n    let spaceSaved = 0;\n\n    try {\n      const backupKeys: string[] = [];\n      \n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && (key.includes('_backup') || key.includes('_archive'))) {\n          backupKeys.push(key);\n        }\n      }\n\n      // Keep only the most recent backup\n      const sortedBackups = backupKeys.sort().reverse();\n      const backupsToRemove = sortedBackups.slice(1);\n\n      backupsToRemove.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n          removedCount++;\n        }\n      });\n\n      if (removedCount > 0) {\n        operations.push(`Emergency: Removed ${removedCount} backup files (${this.formatBytes(spaceSaved)} saved)`);\n      }\n    } catch (error) {\n      console.warn('Failed to perform emergency backup cleanup:', error);\n    }\n\n    return { operations };\n  }\n\n  private async emergencyArchive(maxAgeMonths: number): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    \n    try {\n      // This would integrate with DataCleanupService for emergency archiving\n      operations.push(`Emergency: Archive records older than ${maxAgeMonths} months`);\n    } catch (error) {\n      console.warn('Failed to perform emergency archive:', error);\n    }\n\n    return { operations };\n  }\n\n  private async clearAllCaches(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    let removedCount = 0;\n    let spaceSaved = 0;\n\n    try {\n      const cacheKeys: string[] = [];\n      \n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.includes('_cache')) {\n          cacheKeys.push(key);\n        }\n      }\n\n      cacheKeys.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          spaceSaved += new Blob([data]).size;\n          localStorage.removeItem(key);\n          removedCount++;\n        }\n      });\n\n      if (removedCount > 0) {\n        operations.push(`Cleared ${removedCount} cache files (${this.formatBytes(spaceSaved)} saved)`);\n      }\n    } catch (error) {\n      console.warn('Failed to clear caches:', error);\n    }\n\n    return { operations };\n  }\n\n  private async aggressiveCompression(): Promise<{ operations: string[] }> {\n    const operations: string[] = [];\n    \n    try {\n      // This would use advanced compression techniques\n      operations.push('Aggressive compression would be applied here');\n    } catch (error) {\n      console.warn('Failed to perform aggressive compression:', error);\n    }\n\n    return { operations };\n  }\n\n  private formatBytes(bytes: number): string {\n    if (bytes === 0) return '0 Bytes';\n    \n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  }\n}\n\nexport default StorageQuotaManager;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/__tests__/PerformanceManager.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is assigned a value but never used.","line":60,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// PerformanceManager Test Suite\n// Tests for performance optimization functionality\n\nimport { PerformanceManager } from '../PerformanceManager';\nimport { PainRecord, PaginationOptions } from '../../../../types/pain-tracker';\n\n// Mock data for testing\nconst createMockRecord = (id: string, date: string, painLevel: number): PainRecord => ({\n  id,\n  date,\n  time: '14:30',\n  painLevel,\n  painTypes: ['cramping'],\n  locations: ['lower_abdomen'],\n  symptoms: ['nausea'],\n  menstrualStatus: 'day_1',\n  medications: [{ name: 'Ibuprofen', timing: 'during pain' }],\n  effectiveness: 6,\n  lifestyleFactors: [],\n  notes: 'Test record',\n  createdAt: new Date(date),\n  updatedAt: new Date(date)\n});\n\nconst createMockRecords = (count: number): PainRecord[] => {\n  const records: PainRecord[] = [];\n  const startDate = new Date('2024-01-01');\n  \n  for (let i = 0; i < count; i++) {\n    const date = new Date(startDate);\n    date.setDate(startDate.getDate() + i);\n    \n    records.push(createMockRecord(\n      `record_${i}`,\n      date.toISOString().split('T')[0],\n      Math.floor(Math.random() * 10) + 1\n    ));\n  }\n  \n  return records;\n};\n\ndescribe('PerformanceManager', () => {\n  let performanceManager: PerformanceManager;\n\n  beforeEach(() => {\n    performanceManager = new PerformanceManager({ enableMonitoring: false });\n  });\n\n  afterEach(async () => {\n    if (performanceManager) {\n      performanceManager.destroy();\n    }\n    // Wait a bit for cleanup to complete\n    await new Promise(resolve => setTimeout(resolve, 100));\n  });\n\n  describe('Lazy Loading', () => {\n    test('should load records with pagination', async () => {\n      const options: PaginationOptions = {\n        page: 1,\n        pageSize: 10,\n        sortBy: 'date',\n        sortOrder: 'desc'\n      };\n\n      // Note: This test would need actual data manager integration\n      // For now, we're testing the interface\n      expect(performanceManager.loadRecordsPaginated).toBeDefined();\n      expect(typeof performanceManager.loadRecordsPaginated).toBe('function');\n    });\n\n    test('should load records for virtual scrolling', async () => {\n      expect(performanceManager.loadRecordsVirtual).toBeDefined();\n      expect(typeof performanceManager.loadRecordsVirtual).toBe('function');\n    });\n  });\n\n  describe('Data Compression', () => {\n    test('should compress and decompress data', async () => {\n      const testData = { test: 'data', numbers: [1, 2, 3] };\n      \n      const compressed = await performanceManager.compressData(testData);\n      expect(typeof compressed).toBe('string');\n      \n      const decompressed = await performanceManager.decompressData(compressed);\n      expect(decompressed).toEqual(testData);\n    });\n\n    test('should handle large data compression', async () => {\n      const largeData = createMockRecords(1000);\n      \n      const compressed = await performanceManager.compressData(largeData);\n      expect(typeof compressed).toBe('string');\n      expect(compressed.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Chart Performance', () => {\n    test('should optimize chart data for large datasets', async () => {\n      const largeDataset = createMockRecords(5000);\n      \n      const optimized = await performanceManager.optimizeChartData(\n        largeDataset,\n        'line',\n        { maxPoints: 200 }\n      );\n      \n      expect(optimized.length).toBeLessThanOrEqual(200);\n      expect(optimized.length).toBeGreaterThan(0);\n    });\n\n    test('should optimize chart options based on data size', () => {\n      const baseOptions = {\n        animation: true,\n        plugins: {\n          tooltip: { enabled: true }\n        }\n      };\n\n      const optimizedOptions = performanceManager.optimizeChartOptions(baseOptions, 10000);\n      \n      // For large datasets, animations should be disabled\n      expect(optimizedOptions.animation).toBe(false);\n    });\n  });\n\n  describe('Memory Management', () => {\n    test('should monitor memory usage', () => {\n      const memoryInfo = performanceManager.monitorMemoryUsage();\n      \n      expect(memoryInfo).toHaveProperty('usedJSHeapSize');\n      expect(memoryInfo).toHaveProperty('totalJSHeapSize');\n      expect(memoryInfo).toHaveProperty('jsHeapSizeLimit');\n      expect(memoryInfo).toHaveProperty('timestamp');\n      expect(memoryInfo).toHaveProperty('isEstimated');\n    });\n\n    test('should register and manage chart instances', () => {\n      const mockChartInstance = {\n        destroy: jest.fn()\n      };\n\n      performanceManager.registerChartInstance('test-chart', mockChartInstance);\n      \n      // Should not throw error\n      expect(() => {\n        performanceManager.registerChartInstance('test-chart', mockChartInstance);\n      }).not.toThrow();\n    });\n  });\n\n  describe('Storage Quota', () => {\n    test('should monitor storage quota', async () => {\n      const quotaInfo = await performanceManager.monitorStorageQuota();\n      \n      expect(quotaInfo).toHaveProperty('used');\n      expect(quotaInfo).toHaveProperty('quota');\n      expect(quotaInfo).toHaveProperty('available');\n      expect(quotaInfo).toHaveProperty('usagePercentage');\n      expect(quotaInfo).toHaveProperty('painTrackerUsage');\n      expect(quotaInfo).toHaveProperty('timestamp');\n      expect(quotaInfo).toHaveProperty('isEstimated');\n    });\n  });\n\n  describe('Performance Report', () => {\n    test('should generate performance report', async () => {\n      const report = await performanceManager.getPerformanceReport();\n      \n      expect(report).toHaveProperty('memory');\n      expect(report).toHaveProperty('storage');\n      expect(report).toHaveProperty('cacheStats');\n      expect(report).toHaveProperty('recommendations');\n      expect(report).toHaveProperty('performanceScore');\n      \n      expect(typeof report.performanceScore).toBe('number');\n      expect(report.performanceScore).toBeGreaterThanOrEqual(0);\n      expect(report.performanceScore).toBeLessThanOrEqual(100);\n    });\n\n    test('should provide optimization recommendations', async () => {\n      const recommendations = await performanceManager.getDatasetOptimizationRecommendations(5000);\n      \n      expect(Array.isArray(recommendations)).toBe(true);\n      expect(recommendations.length).toBeGreaterThan(0);\n      expect(recommendations.every(rec => typeof rec === 'string')).toBe(true);\n    });\n  });\n\n  describe('Overall Optimization', () => {\n    test('should perform overall optimization', async () => {\n      const result = await performanceManager.optimizeOverallPerformance();\n      \n      expect(result).toHaveProperty('memoryOptimization');\n      expect(result).toHaveProperty('storageOptimization');\n      expect(result).toHaveProperty('dataCleanup');\n      expect(result).toHaveProperty('totalTimeSaved');\n      expect(result).toHaveProperty('performanceImprovement');\n      expect(result).toHaveProperty('recommendations');\n      \n      expect(typeof result.totalTimeSaved).toBe('number');\n      expect(Array.isArray(result.recommendations)).toBe(true);\n    });\n\n    test('should handle emergency optimization', async () => {\n      // Should not throw error\n      await expect(performanceManager.emergencyOptimization()).resolves.not.toThrow();\n    });\n  });\n\n  describe('Device Configuration', () => {\n    test('should configure for device capabilities', () => {\n      // Should not throw error\n      expect(() => {\n        performanceManager.configureForDevice();\n      }).not.toThrow();\n    });\n  });\n\n  describe('Cleanup', () => {\n    test('should cleanup resources on destroy', () => {\n      expect(() => {\n        performanceManager.destroy();\n      }).not.toThrow();\n    });\n  });\n});\n\n// Integration tests\ndescribe('PerformanceManager Integration', () => {\n  test('should handle complete workflow', async () => {\n    const performanceManager = new PerformanceManager({ enableMonitoring: false });\n    \n    try {\n      // Generate performance report\n      const initialReport = await performanceManager.getPerformanceReport();\n      expect(initialReport.performanceScore).toBeGreaterThanOrEqual(0);\n      \n      // Perform optimization\n      const optimizationResult = await performanceManager.optimizeOverallPerformance();\n      expect(optimizationResult.totalTimeSaved).toBeGreaterThanOrEqual(0);\n      \n      // Generate final report\n      const finalReport = await performanceManager.getPerformanceReport();\n      expect(finalReport.performanceScore).toBeGreaterThanOrEqual(0);\n      \n    } finally {\n      performanceManager.destroy();\n      // Wait for cleanup to complete\n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/performance/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/storage/DataIntegrityService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CURRENT_SCHEMA_VERSION' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'parseError' is defined but never used.","line":82,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":82,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4517,4520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4517,4520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":187,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":187,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5739,5742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5739,5742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":289,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8555,8558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8555,8558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":446,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":446,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":465,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":465,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":499,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":499,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":612,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":612,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17317,17320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17317,17320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":618,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":618,"endColumn":19}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DataIntegrityService - Enhanced Pain Tracker Data Integrity and Recovery System\n// Provides data corruption detection, validation, and recovery mechanisms\n\nimport { \n  PainRecord, \n  StoredData, \n  ValidationResult,\n  PainTrackerError,\n  STORAGE_KEYS,\n  CURRENT_SCHEMA_VERSION\n} from '../../../types/pain-tracker';\nimport { ValidationService } from '../validation/ValidationService';\n\nexport interface DataIntegrityReport {\n  isValid: boolean;\n  corruptedRecords: string[];\n  missingFields: string[];\n  invalidData: string[];\n  recoveryOptions: RecoveryOption[];\n  backupAvailable: boolean;\n  lastValidBackup?: Date;\n  totalRecords: number;\n  validRecords: number;\n  corruptionLevel: 'none' | 'minor' | 'moderate' | 'severe';\n}\n\nexport interface RecoveryOption {\n  type: 'repair' | 'restore' | 'partial_recovery' | 'fresh_start';\n  description: string;\n  riskLevel: 'low' | 'medium' | 'high';\n  dataLoss: boolean;\n  estimatedRecovery: number; // percentage of data that can be recovered\n  action: () => Promise<boolean>;\n}\n\nexport interface DataChecksum {\n  recordId: string;\n  checksum: string;\n  timestamp: Date;\n}\n\nexport class DataIntegrityService {\n  private validationService: ValidationService;\n  private checksums: Map<string, string> = new Map();\n\n  constructor() {\n    this.validationService = new ValidationService();\n    this.loadChecksums();\n  }\n\n  /**\n   * Perform comprehensive data integrity check\n   */\n  async checkDataIntegrity(): Promise<DataIntegrityReport> {\n    try {\n      const report: DataIntegrityReport = {\n        isValid: true,\n        corruptedRecords: [],\n        missingFields: [],\n        invalidData: [],\n        recoveryOptions: [],\n        backupAvailable: false,\n        totalRecords: 0,\n        validRecords: 0,\n        corruptionLevel: 'none'\n      };\n\n      // Check if data exists\n      const rawData = localStorage.getItem(STORAGE_KEYS.PAIN_RECORDS);\n      if (!rawData) {\n        report.corruptionLevel = 'none';\n        return report;\n      }\n\n      // Try to parse stored data\n      let records: PainRecord[] = [];\n      try {\n        records = JSON.parse(rawData);\n        if (!Array.isArray(records)) {\n          throw new Error('Data is not an array');\n        }\n      } catch (parseError) {\n        report.isValid = false;\n        report.corruptionLevel = 'severe';\n        report.invalidData.push('Unable to parse stored data');\n        report.recoveryOptions = await this.generateRecoveryOptions(report);\n        return report;\n      }\n\n      report.totalRecords = records.length;\n\n      // Validate each record\n      for (const record of records) {\n        const validationResult = await this.validateRecord(record);\n        \n        if (!validationResult.isValid) {\n          report.isValid = false;\n          report.corruptedRecords.push(record.id || 'unknown');\n          \n          validationResult.errors.forEach(error => {\n            if (error.code === 'REQUIRED_FIELD') {\n              report.missingFields.push(`${record.id}: ${error.field}`);\n            } else {\n              report.invalidData.push(`${record.id}: ${error.message}`);\n            }\n          });\n        } else {\n          report.validRecords++;\n        }\n\n        // Check data integrity with checksums\n        if (record.id && !this.verifyRecordChecksum(record)) {\n          report.corruptedRecords.push(record.id);\n          report.invalidData.push(`${record.id}: Data integrity check failed`);\n        }\n      }\n\n      // Determine corruption level\n      const corruptionPercentage = (report.corruptedRecords.length / report.totalRecords) * 100;\n      if (corruptionPercentage === 0) {\n        report.corruptionLevel = 'none';\n      } else if (corruptionPercentage < 10) {\n        report.corruptionLevel = 'minor';\n      } else if (corruptionPercentage < 50) {\n        report.corruptionLevel = 'moderate';\n      } else {\n        report.corruptionLevel = 'severe';\n      }\n\n      // Check for backup availability\n      report.backupAvailable = await this.isBackupAvailable();\n      if (report.backupAvailable) {\n        report.lastValidBackup = await this.getLastBackupDate();\n      }\n\n      // Generate recovery options\n      report.recoveryOptions = await this.generateRecoveryOptions(report);\n\n      return report;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to check data integrity',\n        'DATA_CORRUPTION',\n        error\n      );\n    }\n  }\n\n  /**\n   * Validate individual record structure and data\n   */\n  private async validateRecord(record: any): Promise<ValidationResult> {\n    try {\n      // Check if record has basic structure\n      if (!record || typeof record !== 'object') {\n        return {\n          isValid: false,\n          errors: [{\n            field: 'record',\n            message: 'Record is not a valid object',\n            code: 'INVALID_FORMAT'\n          }],\n          warnings: []\n        };\n      }\n\n      // Check required fields exist\n      const requiredFields = ['id', 'date', 'time', 'painLevel'];\n      const missingFields = requiredFields.filter(field => \n        record[field] === undefined || record[field] === null\n      );\n\n      if (missingFields.length > 0) {\n        return {\n          isValid: false,\n          errors: missingFields.map(field => ({\n            field,\n            message: `Required field ${field} is missing`,\n            code: 'REQUIRED_FIELD'\n          })),\n          warnings: []\n        };\n      }\n\n      // Use validation service for detailed validation\n      return this.validationService.validateRecord(record);\n    } catch (error) {\n      return {\n        isValid: false,\n        errors: [{\n          field: 'record',\n          message: 'Failed to validate record',\n          code: 'VALIDATION_ERROR' as any\n        }],\n        warnings: []\n      };\n    }\n  }\n\n  /**\n   * Generate recovery options based on corruption report\n   */\n  private async generateRecoveryOptions(report: DataIntegrityReport): Promise<RecoveryOption[]> {\n    const options: RecoveryOption[] = [];\n\n    // Option 1: Repair corrupted records\n    if (report.corruptionLevel === 'minor' || report.corruptionLevel === 'moderate') {\n      options.push({\n        type: 'repair',\n        description: 'Attempt to repair corrupted records by fixing common issues',\n        riskLevel: 'low',\n        dataLoss: false,\n        estimatedRecovery: Math.max(80, 100 - (report.corruptedRecords.length / report.totalRecords) * 100),\n        action: () => this.repairCorruptedRecords()\n      });\n    }\n\n    // Option 2: Restore from backup\n    if (report.backupAvailable) {\n      options.push({\n        type: 'restore',\n        description: `Restore data from backup (${report.lastValidBackup?.toLocaleDateString()})`,\n        riskLevel: 'medium',\n        dataLoss: true,\n        estimatedRecovery: 95,\n        action: () => this.restoreFromBackup()\n      });\n    }\n\n    // Option 3: Partial recovery\n    if (report.validRecords > 0) {\n      options.push({\n        type: 'partial_recovery',\n        description: `Keep ${report.validRecords} valid records and remove corrupted ones`,\n        riskLevel: 'medium',\n        dataLoss: true,\n        estimatedRecovery: (report.validRecords / report.totalRecords) * 100,\n        action: () => this.performPartialRecovery()\n      });\n    }\n\n    // Option 4: Fresh start (last resort)\n    options.push({\n      type: 'fresh_start',\n      description: 'Clear all data and start fresh (export current data first)',\n      riskLevel: 'high',\n      dataLoss: true,\n      estimatedRecovery: 0,\n      action: () => this.performFreshStart()\n    });\n\n    return options;\n  }\n\n  /**\n   * Attempt to repair corrupted records\n   */\n  private async repairCorruptedRecords(): Promise<boolean> {\n    try {\n      const rawData = localStorage.getItem(STORAGE_KEYS.PAIN_RECORDS);\n      if (!rawData) return false;\n\n      const records: PainRecord[] = JSON.parse(rawData);\n      const repairedRecords: PainRecord[] = [];\n\n      for (const record of records) {\n        const repairedRecord = await this.repairRecord(record);\n        if (repairedRecord) {\n          repairedRecords.push(repairedRecord);\n        }\n      }\n\n      // Save repaired records\n      localStorage.setItem(STORAGE_KEYS.PAIN_RECORDS, JSON.stringify(repairedRecords));\n      \n      // Update checksums\n      this.updateChecksums(repairedRecords);\n      \n      return true;\n    } catch (error) {\n      console.error('Failed to repair corrupted records:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Repair individual record\n   */\n  private async repairRecord(record: any): Promise<PainRecord | null> {\n    try {\n      const repaired = { ...record };\n\n      // Generate missing ID\n      if (!repaired.id) {\n        repaired.id = `repaired_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      }\n\n      // Fix missing timestamps\n      if (!repaired.createdAt) {\n        repaired.createdAt = new Date(repaired.date || Date.now());\n      }\n      if (!repaired.updatedAt) {\n        repaired.updatedAt = repaired.createdAt;\n      }\n\n      // Fix invalid pain level\n      if (typeof repaired.painLevel !== 'number' || repaired.painLevel < 0 || repaired.painLevel > 10) {\n        repaired.painLevel = 5; // Default to moderate pain\n      }\n\n      // Fix missing arrays\n      if (!Array.isArray(repaired.painTypes)) {\n        repaired.painTypes = [];\n      }\n      if (!Array.isArray(repaired.locations)) {\n        repaired.locations = [];\n      }\n      if (!Array.isArray(repaired.symptoms)) {\n        repaired.symptoms = [];\n      }\n      if (!Array.isArray(repaired.medications)) {\n        repaired.medications = [];\n      }\n      if (!Array.isArray(repaired.lifestyleFactors)) {\n        repaired.lifestyleFactors = [];\n      }\n\n      // Fix invalid date\n      if (!repaired.date || isNaN(new Date(repaired.date).getTime())) {\n        repaired.date = new Date().toISOString().split('T')[0];\n      }\n\n      // Fix invalid time\n      if (!repaired.time || !/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(repaired.time)) {\n        repaired.time = '12:00';\n      }\n\n      // Validate repaired record\n      const validation = this.validationService.validateRecord(repaired);\n      if (validation.isValid) {\n        return repaired as PainRecord;\n      }\n\n      return null;\n    } catch (error) {\n      console.error('Failed to repair record:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Restore data from backup\n   */\n  private async restoreFromBackup(): Promise<boolean> {\n    try {\n      const backupKey = `${STORAGE_KEYS.PAIN_RECORDS}_backup`;\n      const backupData = localStorage.getItem(backupKey);\n      \n      if (!backupData) return false;\n\n      const backup: StoredData = JSON.parse(backupData);\n      \n      // Validate backup data\n      if (!backup.records || !Array.isArray(backup.records)) {\n        return false;\n      }\n\n      // Restore records\n      localStorage.setItem(STORAGE_KEYS.PAIN_RECORDS, JSON.stringify(backup.records));\n      \n      // Restore preferences if available\n      if (backup.preferences) {\n        localStorage.setItem(STORAGE_KEYS.USER_PREFERENCES, JSON.stringify(backup.preferences));\n      }\n\n      // Update checksums\n      this.updateChecksums(backup.records);\n      \n      return true;\n    } catch (error) {\n      console.error('Failed to restore from backup:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Perform partial recovery by keeping only valid records\n   */\n  private async performPartialRecovery(): Promise<boolean> {\n    try {\n      const rawData = localStorage.getItem(STORAGE_KEYS.PAIN_RECORDS);\n      if (!rawData) return false;\n\n      const records: PainRecord[] = JSON.parse(rawData);\n      const validRecords: PainRecord[] = [];\n\n      for (const record of records) {\n        const validation = await this.validateRecord(record);\n        if (validation.isValid) {\n          validRecords.push(record);\n        }\n      }\n\n      // Save only valid records\n      localStorage.setItem(STORAGE_KEYS.PAIN_RECORDS, JSON.stringify(validRecords));\n      \n      // Update checksums\n      this.updateChecksums(validRecords);\n      \n      return true;\n    } catch (error) {\n      console.error('Failed to perform partial recovery:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Perform fresh start by clearing all data\n   */\n  private async performFreshStart(): Promise<boolean> {\n    try {\n      // Clear all pain tracker data\n      Object.values(STORAGE_KEYS).forEach(key => {\n        localStorage.removeItem(key);\n      });\n\n      // Clear checksums\n      this.checksums.clear();\n      localStorage.removeItem('pain_tracker_checksums');\n\n      return true;\n    } catch (error) {\n      console.error('Failed to perform fresh start:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Check if backup is available\n   */\n  private async isBackupAvailable(): Promise<boolean> {\n    try {\n      const backupKey = `${STORAGE_KEYS.PAIN_RECORDS}_backup`;\n      const backupData = localStorage.getItem(backupKey);\n      return backupData !== null;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Get last backup date\n   */\n  private async getLastBackupDate(): Promise<Date | undefined> {\n    try {\n      const backupKey = `${STORAGE_KEYS.PAIN_RECORDS}_backup`;\n      const backupData = localStorage.getItem(backupKey);\n      \n      if (backupData) {\n        const backup: StoredData = JSON.parse(backupData);\n        return backup.lastBackup ? new Date(backup.lastBackup) : undefined;\n      }\n      \n      return undefined;\n    } catch (error) {\n      return undefined;\n    }\n  }\n\n  /**\n   * Generate checksum for record\n   */\n  private generateChecksum(record: PainRecord): string {\n    try {\n      const data = JSON.stringify({\n        id: record.id,\n        date: record.date,\n        time: record.time,\n        painLevel: record.painLevel,\n        painTypes: record.painTypes,\n        locations: record.locations,\n        symptoms: record.symptoms,\n        menstrualStatus: record.menstrualStatus,\n        medications: record.medications,\n        effectiveness: record.effectiveness,\n        lifestyleFactors: record.lifestyleFactors,\n        notes: record.notes\n      });\n\n      // Simple hash function (for demonstration - in production, use a proper hash function)\n      let hash = 0;\n      for (let i = 0; i < data.length; i++) {\n        const char = data.charCodeAt(i);\n        hash = ((hash << 5) - hash) + char;\n        hash = hash & hash; // Convert to 32-bit integer\n      }\n      \n      return hash.toString(36);\n    } catch (error) {\n      return '';\n    }\n  }\n\n  /**\n   * Verify record checksum\n   */\n  private verifyRecordChecksum(record: PainRecord): boolean {\n    if (!record.id) return false;\n    \n    const storedChecksum = this.checksums.get(record.id);\n    if (!storedChecksum) return true; // No checksum stored, assume valid\n    \n    const currentChecksum = this.generateChecksum(record);\n    return storedChecksum === currentChecksum;\n  }\n\n  /**\n   * Update checksums for records\n   */\n  private updateChecksums(records: PainRecord[]): void {\n    this.checksums.clear();\n    \n    records.forEach(record => {\n      if (record.id) {\n        const checksum = this.generateChecksum(record);\n        this.checksums.set(record.id, checksum);\n      }\n    });\n\n    this.saveChecksums();\n  }\n\n  /**\n   * Load checksums from storage\n   */\n  private loadChecksums(): void {\n    try {\n      const stored = localStorage.getItem('pain_tracker_checksums');\n      if (stored) {\n        const checksumData = JSON.parse(stored);\n        this.checksums = new Map(checksumData);\n      }\n    } catch (error) {\n      console.error('Failed to load checksums:', error);\n      this.checksums.clear();\n    }\n  }\n\n  /**\n   * Save checksums to storage\n   */\n  private saveChecksums(): void {\n    try {\n      const checksumData = Array.from(this.checksums.entries());\n      localStorage.setItem('pain_tracker_checksums', JSON.stringify(checksumData));\n    } catch (error) {\n      console.error('Failed to save checksums:', error);\n    }\n  }\n\n  /**\n   * Add checksum for new record\n   */\n  addRecordChecksum(record: PainRecord): void {\n    if (record.id) {\n      const checksum = this.generateChecksum(record);\n      this.checksums.set(record.id, checksum);\n      this.saveChecksums();\n    }\n  }\n\n  /**\n   * Remove checksum for deleted record\n   */\n  removeRecordChecksum(recordId: string): void {\n    this.checksums.delete(recordId);\n    this.saveChecksums();\n  }\n\n  /**\n   * Export corrupted data for analysis\n   */\n  async exportCorruptedData(): Promise<string> {\n    try {\n      const report = await this.checkDataIntegrity();\n      const rawData = localStorage.getItem(STORAGE_KEYS.PAIN_RECORDS);\n      \n      const exportData = {\n        timestamp: new Date().toISOString(),\n        integrityReport: report,\n        rawData: rawData ? JSON.parse(rawData) : null,\n        checksums: Array.from(this.checksums.entries()),\n        browserInfo: {\n          userAgent: navigator.userAgent,\n          storageQuota: await this.getStorageQuota()\n        }\n      };\n\n      return JSON.stringify(exportData, null, 2);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to export corrupted data',\n        'EXPORT_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get storage quota information\n   */\n  private async getStorageQuota(): Promise<any> {\n    try {\n      if ('storage' in navigator && 'estimate' in navigator.storage) {\n        return await navigator.storage.estimate();\n      }\n      return null;\n    } catch (error) {\n      return null;\n    }\n  }\n}\n\nexport default DataIntegrityService;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/storage/LocalStorageAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UserPreferences' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1869,1872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1869,1872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3268,3271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3268,3271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fromVersion' is defined but never used.","line":346,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":346,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toVersion' is defined but never used.","line":346,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":346,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":346,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9604,9607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9604,9607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":364,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10101,10104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10101,10104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LocalStorageAdapter - Enhanced Pain Tracker Storage System\n// Provides robust local storage with data persistence, migration, and error handling\n\nimport { \n  StoredData, \n  PainRecord, \n  UserPreferences, \n  StorageMetadata,\n  LocalStorageAdapterInterface,\n  PainTrackerError,\n  STORAGE_KEYS,\n  CURRENT_SCHEMA_VERSION,\n  DEFAULT_USER_PREFERENCES\n} from '../../../types/pain-tracker';\n\nexport class LocalStorageAdapter implements LocalStorageAdapterInterface {\n  private compressionEnabled: boolean = true;\n  private encryptionEnabled: boolean = false; // Future enhancement\n\n  constructor() {\n    this.initializeStorage();\n  }\n\n  /**\n   * Initialize storage with default values if not present\n   */\n  private async initializeStorage(): Promise<void> {\n    try {\n      // Check if this is first time initialization\n      const schemaVersion = await this.load(STORAGE_KEYS.SCHEMA_VERSION);\n      \n      if (!schemaVersion) {\n        // First time setup\n        await this.save(STORAGE_KEYS.SCHEMA_VERSION, CURRENT_SCHEMA_VERSION);\n        await this.save(STORAGE_KEYS.USER_PREFERENCES, DEFAULT_USER_PREFERENCES);\n        await this.save(STORAGE_KEYS.PAIN_RECORDS, []);\n        \n        const metadata: StorageMetadata = {\n          createdAt: new Date(),\n          lastModified: new Date(),\n          version: '1.0.0',\n          recordCount: 0,\n          dataSize: 0\n        };\n        await this.save(STORAGE_KEYS.METADATA, metadata);\n      } else if (schemaVersion < CURRENT_SCHEMA_VERSION) {\n        // Migration needed\n        await this.migrateData(schemaVersion, CURRENT_SCHEMA_VERSION);\n      }\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to initialize storage',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Save data to localStorage with compression and error handling\n   */\n  async save(key: string, data: any): Promise<void> {\n    try {\n      const serializedData = JSON.stringify(data);\n      const processedData = this.compressionEnabled \n        ? this.compress(serializedData)\n        : serializedData;\n\n      // Check storage quota before saving\n      const quotaInfo = await this.getQuotaUsage();\n      const dataSize = new Blob([processedData]).size;\n      \n      if (quotaInfo.used + dataSize > quotaInfo.available * 0.9) {\n        throw new PainTrackerError(\n          'Storage quota nearly exceeded',\n          'QUOTA_EXCEEDED',\n          { required: dataSize, available: quotaInfo.available - quotaInfo.used }\n        );\n      }\n\n      localStorage.setItem(key, processedData);\n      \n      // Update metadata if saving records\n      if (key === STORAGE_KEYS.PAIN_RECORDS) {\n        await this.updateMetadata(data);\n      }\n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      if (error instanceof DOMException && error.code === 22) {\n        throw new PainTrackerError(\n          'Storage quota exceeded',\n          'QUOTA_EXCEEDED',\n          error\n        );\n      }\n      \n      throw new PainTrackerError(\n        `Failed to save data for key: ${key}`,\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Load data from localStorage with decompression and error handling\n   */\n  async load(key: string): Promise<any> {\n    try {\n      const rawData = localStorage.getItem(key);\n      \n      if (rawData === null) {\n        return null;\n      }\n\n      const processedData = this.compressionEnabled \n        ? this.decompress(rawData)\n        : rawData;\n\n      return JSON.parse(processedData);\n    } catch (error) {\n      // If data is corrupted, try to recover or return null\n      console.warn(`Failed to load data for key: ${key}`, error);\n      \n      if (key === STORAGE_KEYS.PAIN_RECORDS) {\n        // Try to recover from backup\n        const backupData = await this.loadBackup();\n        if (backupData) {\n          console.log('Recovered data from backup');\n          return backupData.records;\n        }\n      }\n      \n      throw new PainTrackerError(\n        `Failed to load data for key: ${key}`,\n        'DATA_CORRUPTION',\n        error\n      );\n    }\n  }\n\n  /**\n   * Remove data from localStorage\n   */\n  async remove(key: string): Promise<void> {\n    try {\n      localStorage.removeItem(key);\n    } catch (error) {\n      throw new PainTrackerError(\n        `Failed to remove data for key: ${key}`,\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Clear all pain tracker data from localStorage\n   */\n  async clear(): Promise<void> {\n    try {\n      Object.values(STORAGE_KEYS).forEach(key => {\n        localStorage.removeItem(key);\n      });\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to clear storage',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Check if key exists in localStorage\n   */\n  async exists(key: string): Promise<boolean> {\n    return localStorage.getItem(key) !== null;\n  }\n\n  /**\n   * Get total size of pain tracker data in localStorage\n   */\n  async getSize(): Promise<number> {\n    try {\n      let totalSize = 0;\n      \n      Object.values(STORAGE_KEYS).forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          totalSize += new Blob([data]).size;\n        }\n      });\n      \n      return totalSize;\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to calculate storage size',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get storage quota usage information\n   */\n  async getQuotaUsage(): Promise<{ used: number; available: number }> {\n    try {\n      if ('storage' in navigator && 'estimate' in navigator.storage) {\n        const estimate = await navigator.storage.estimate();\n        return {\n          used: estimate.usage || 0,\n          available: estimate.quota || 5 * 1024 * 1024 // 5MB fallback\n        };\n      }\n      \n      // Fallback for browsers without storage API\n      const used = await this.getSize();\n      return {\n        used,\n        available: 5 * 1024 * 1024 // 5MB fallback\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to get quota usage',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Create a backup of all pain tracker data\n   */\n  async backup(): Promise<string> {\n    try {\n      const records = await this.load(STORAGE_KEYS.PAIN_RECORDS) || [];\n      const preferences = await this.load(STORAGE_KEYS.USER_PREFERENCES) || DEFAULT_USER_PREFERENCES;\n      const metadata = await this.load(STORAGE_KEYS.METADATA);\n      \n      const backupData: StoredData = {\n        records,\n        preferences,\n        schemaVersion: CURRENT_SCHEMA_VERSION,\n        lastBackup: new Date(),\n        metadata\n      };\n      \n      return JSON.stringify(backupData, null, 2);\n    } catch (error) {\n      throw new PainTrackerError(\n        'Failed to create backup',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Restore data from backup\n   */\n  async restore(backupData: string): Promise<void> {\n    try {\n      const data: StoredData = JSON.parse(backupData);\n      \n      // Validate backup data structure\n      if (!this.validateBackupData(data)) {\n        throw new PainTrackerError(\n          'Invalid backup data format',\n          'VALIDATION_ERROR'\n        );\n      }\n      \n      // Check if migration is needed\n      if (data.schemaVersion < CURRENT_SCHEMA_VERSION) {\n        await this.migrateBackupData(data);\n      }\n      \n      // Restore data\n      await this.save(STORAGE_KEYS.PAIN_RECORDS, data.records);\n      await this.save(STORAGE_KEYS.USER_PREFERENCES, data.preferences);\n      await this.save(STORAGE_KEYS.SCHEMA_VERSION, data.schemaVersion);\n      \n      if (data.metadata) {\n        await this.save(STORAGE_KEYS.METADATA, data.metadata);\n      }\n      \n    } catch (error) {\n      if (error instanceof PainTrackerError) {\n        throw error;\n      }\n      \n      throw new PainTrackerError(\n        'Failed to restore from backup',\n        'STORAGE_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Migrate data from old schema version to new version\n   */\n  private async migrateData(fromVersion: number, toVersion: number): Promise<void> {\n    try {\n      console.log(`Migrating data from version ${fromVersion} to ${toVersion}`);\n      \n      // Load existing data\n      const records = await this.load(STORAGE_KEYS.PAIN_RECORDS) || [];\n      const preferences = await this.load(STORAGE_KEYS.USER_PREFERENCES) || {};\n      \n      // Apply migrations sequentially\n      let migratedRecords = records;\n      let migratedPreferences = preferences;\n      \n      for (let version = fromVersion; version < toVersion; version++) {\n        const migration = this.getMigration(version, version + 1);\n        if (migration) {\n          migratedRecords = migration.migrateRecords(migratedRecords);\n          migratedPreferences = migration.migratePreferences(migratedPreferences);\n        }\n      }\n      \n      // Save migrated data\n      await this.save(STORAGE_KEYS.PAIN_RECORDS, migratedRecords);\n      await this.save(STORAGE_KEYS.USER_PREFERENCES, migratedPreferences);\n      await this.save(STORAGE_KEYS.SCHEMA_VERSION, toVersion);\n      \n      console.log('Data migration completed successfully');\n    } catch (error) {\n      throw new PainTrackerError(\n        `Failed to migrate data from version ${fromVersion} to ${toVersion}`,\n        'MIGRATION_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Get migration function for specific version transition\n   */\n  private getMigration(fromVersion: number, toVersion: number): any {\n    // Future migrations will be added here\n    // For now, return null as we're at version 1\n    return null;\n  }\n\n  /**\n   * Migrate backup data if needed\n   */\n  private async migrateBackupData(data: StoredData): Promise<void> {\n    // Apply same migration logic as regular data\n    await this.migrateData(data.schemaVersion, CURRENT_SCHEMA_VERSION);\n    data.schemaVersion = CURRENT_SCHEMA_VERSION;\n  }\n\n  /**\n   * Validate backup data structure\n   */\n  private validateBackupData(data: any): data is StoredData {\n    return (\n      data &&\n      typeof data === 'object' &&\n      Array.isArray(data.records) &&\n      typeof data.preferences === 'object' &&\n      typeof data.schemaVersion === 'number'\n    );\n  }\n\n  /**\n   * Load backup data for recovery\n   */\n  private async loadBackup(): Promise<StoredData | null> {\n    try {\n      // Try to load from a backup key if it exists\n      const backupKey = `${STORAGE_KEYS.PAIN_RECORDS}_backup`;\n      const backupData = localStorage.getItem(backupKey);\n      \n      if (backupData) {\n        return JSON.parse(backupData);\n      }\n      \n      return null;\n    } catch (error) {\n      console.warn('Failed to load backup data', error);\n      return null;\n    }\n  }\n\n  /**\n   * Update metadata when records are saved\n   */\n  private async updateMetadata(records: PainRecord[]): Promise<void> {\n    try {\n      const currentMetadata = await this.load(STORAGE_KEYS.METADATA) || {};\n      const dataSize = await this.getSize();\n      \n      const updatedMetadata: StorageMetadata = {\n        ...currentMetadata,\n        lastModified: new Date(),\n        recordCount: records.length,\n        dataSize\n      };\n      \n      await this.save(STORAGE_KEYS.METADATA, updatedMetadata);\n    } catch (error) {\n      console.warn('Failed to update metadata', error);\n      // Don't throw error for metadata update failure\n    }\n  }\n\n  /**\n   * Simple compression using JSON minification\n   * Future enhancement: implement actual compression algorithm\n   */\n  private compress(data: string): string {\n    // For now, just return minified JSON\n    // Future: implement LZ-string or similar compression\n    return data;\n  }\n\n  /**\n   * Simple decompression\n   * Future enhancement: implement actual decompression algorithm\n   */\n  private decompress(data: string): string {\n    // For now, just return the data as-is\n    // Future: implement LZ-string or similar decompression\n    return data;\n  }\n\n  /**\n   * Create automatic backup before major operations\n   */\n  async createAutoBackup(): Promise<void> {\n    try {\n      const backupData = await this.backup();\n      const backupKey = `${STORAGE_KEYS.PAIN_RECORDS}_backup`;\n      localStorage.setItem(backupKey, backupData);\n    } catch (error) {\n      console.warn('Failed to create automatic backup', error);\n      // Don't throw error for backup failure\n    }\n  }\n\n  /**\n   * Clean up old backups to save space\n   */\n  async cleanupOldBackups(): Promise<void> {\n    try {\n      const backupKey = `${STORAGE_KEYS.PAIN_RECORDS}_backup`;\n      const backupData = localStorage.getItem(backupKey);\n      \n      if (backupData) {\n        const backup: StoredData = JSON.parse(backupData);\n        const backupAge = Date.now() - new Date(backup.lastBackup || 0).getTime();\n        const maxAge = 7 * 24 * 60 * 60 * 1000; // 7 days\n        \n        if (backupAge > maxAge) {\n          localStorage.removeItem(backupKey);\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to cleanup old backups', error);\n    }\n  }\n}\n\nexport default LocalStorageAdapter;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pain-tracker/validation/ValidationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ValidationErrorCode' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5729,5732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5729,5732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6180,6183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6180,6183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":233,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6552,6555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6552,6555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6954,6957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6954,6957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8312,8315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8312,8315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":345,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9677,9680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9677,9680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'warnings' is defined but never used.","line":347,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":347,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":384,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10768,10771],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10768,10771],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":405,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":405,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11410,11413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11410,11413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":440,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":440,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12387,12390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12387,12390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":459,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":459,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12940,12943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12940,12943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'warnings' is defined but never used.","line":461,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":461,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":516,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":516,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14730,14733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14730,14733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ValidationService - Enhanced Pain Tracker Validation System\n// Provides comprehensive validation for pain tracker data with detailed error reporting\n\nimport {\n  PainRecord,\n  Medication,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ValidationServiceInterface,\n  ValidationErrorCode,\n  PainTrackerError,\n  VALIDATION_RULES,\n  PainType,\n  PainLocation,\n  Symptom,\n  MenstrualStatus,\n  LifestyleFactor\n} from '../../../types/pain-tracker';\n\nexport class ValidationService implements ValidationServiceInterface {\n  \n  /**\n   * Validate a complete pain record\n   */\n  validateRecord(record: Partial<PainRecord>): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    try {\n      // Validate required fields\n      this.validateRequiredFields(record, errors);\n      \n      // Validate individual fields\n      this.validatePainLevelField(record.painLevel, errors);\n      this.validateDateField(record.date, errors);\n      this.validateTimeField(record.time, errors);\n      this.validatePainTypesField(record.painTypes, errors, warnings);\n      this.validateLocationsField(record.locations, errors, warnings);\n      this.validateSymptomsField(record.symptoms, errors, warnings);\n      this.validateMenstrualStatusField(record.menstrualStatus, errors);\n      this.validateMedicationsField(record.medications, errors, warnings);\n      this.validateEffectivenessField(record.effectiveness, errors);\n      this.validateLifestyleFactorsField(record.lifestyleFactors, errors, warnings);\n      this.validateNotesField(record.notes, errors, warnings);\n\n      // Cross-field validations\n      this.validateCrossFieldLogic(record, errors, warnings);\n\n      return {\n        isValid: errors.length === 0,\n        errors,\n        warnings\n      };\n    } catch (error) {\n      throw new PainTrackerError(\n        'Validation process failed',\n        'VALIDATION_ERROR',\n        error\n      );\n    }\n  }\n\n  /**\n   * Validate pain level (0-10 scale)\n   */\n  validatePainLevel(level: number): boolean {\n    return (\n      typeof level === 'number' &&\n      !isNaN(level) &&\n      level >= VALIDATION_RULES.painLevel.min &&\n      level <= VALIDATION_RULES.painLevel.max\n    );\n  }\n\n  /**\n   * Validate date string (YYYY-MM-DD format)\n   */\n  validateDate(date: string): boolean {\n    if (!date || typeof date !== 'string') {\n      return false;\n    }\n\n    const dateObj = new Date(date);\n    const now = new Date();\n    const minDate = VALIDATION_RULES.date.minDate();\n\n    return (\n      !isNaN(dateObj.getTime()) &&\n      dateObj <= now &&\n      dateObj >= minDate\n    );\n  }\n\n  /**\n   * Validate time string (HH:mm format)\n   */\n  validateTime(time: string): boolean {\n    if (!time || typeof time !== 'string') {\n      return false;\n    }\n\n    return VALIDATION_RULES.time.format.test(time);\n  }\n\n  /**\n   * Validate medication object\n   */\n  validateMedication(medication: Medication): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    if (!medication.name || medication.name.trim().length === 0) {\n      errors.push({\n        field: 'medication.name',\n        message: 'Medication name is required',\n        code: 'REQUIRED_FIELD'\n      });\n    }\n\n    if (medication.name && medication.name.length > VALIDATION_RULES.medicationName.maxLength) {\n      errors.push({\n        field: 'medication.name',\n        message: `Medication name must be less than ${VALIDATION_RULES.medicationName.maxLength} characters`,\n        code: 'OUT_OF_RANGE'\n      });\n    }\n\n    if (medication.dosage && medication.dosage.length > VALIDATION_RULES.medicationDosage.maxLength) {\n      errors.push({\n        field: 'medication.dosage',\n        message: `Medication dosage must be less than ${VALIDATION_RULES.medicationDosage.maxLength} characters`,\n        code: 'OUT_OF_RANGE'\n      });\n    }\n\n    if (!medication.timing || medication.timing.trim().length === 0) {\n      warnings.push({\n        field: 'medication.timing',\n        message: 'Consider specifying when the medication was taken',\n        suggestion: 'Add timing information like \"before pain\", \"during pain\", or \"preventive\"'\n      });\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings\n    };\n  }\n\n  /**\n   * Sanitize user input to prevent XSS and other issues\n   */\n  sanitizeInput(input: string): string {\n    if (!input || typeof input !== 'string') {\n      return '';\n    }\n\n    return input\n      .trim()\n      .replace(/[<>]/g, '') // Remove potential HTML tags\n      .replace(/javascript:/gi, '') // Remove javascript: protocols\n      .replace(/on\\w+=/gi, '') // Remove event handlers\n      .substring(0, 1000); // Limit length\n  }\n\n  /**\n   * Check for duplicate records based on date and time\n   */\n  checkForDuplicates(record: PainRecord, existingRecords: PainRecord[]): boolean {\n    return existingRecords.some(existing => \n      existing.id !== record.id &&\n      existing.date === record.date &&\n      existing.time === record.time\n    );\n  }\n\n  /**\n   * Validate required fields\n   */\n  private validateRequiredFields(record: Partial<PainRecord>, errors: ValidationError[]): void {\n    const requiredFields = [\n      { field: 'painLevel', value: record.painLevel },\n      { field: 'date', value: record.date },\n      { field: 'time', value: record.time }\n    ];\n\n    requiredFields.forEach(({ field, value }) => {\n      if (value === undefined || value === null || value === '') {\n        errors.push({\n          field,\n          message: `${field} is required`,\n          code: 'REQUIRED_FIELD'\n        });\n      }\n    });\n  }\n\n  /**\n   * Validate pain level field\n   */\n  private validatePainLevelField(painLevel: any, errors: ValidationError[]): void {\n    if (painLevel !== undefined && painLevel !== null) {\n      if (!this.validatePainLevel(painLevel)) {\n        errors.push({\n          field: 'painLevel',\n          message: `Pain level must be between ${VALIDATION_RULES.painLevel.min} and ${VALIDATION_RULES.painLevel.max}`,\n          code: 'OUT_OF_RANGE'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate date field\n   */\n  private validateDateField(date: any, errors: ValidationError[]): void {\n    if (date !== undefined && date !== null) {\n      if (!this.validateDate(date)) {\n        errors.push({\n          field: 'date',\n          message: 'Invalid date format or date is in the future',\n          code: 'INVALID_DATE'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate time field\n   */\n  private validateTimeField(time: any, errors: ValidationError[]): void {\n    if (time !== undefined && time !== null) {\n      if (!this.validateTime(time)) {\n        errors.push({\n          field: 'time',\n          message: 'Invalid time format. Use HH:mm format (e.g., 14:30)',\n          code: 'INVALID_FORMAT'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate pain types field\n   */\n  private validatePainTypesField(\n    painTypes: any, \n    errors: ValidationError[], \n    warnings: ValidationWarning[]\n  ): void {\n    if (painTypes !== undefined && painTypes !== null) {\n      if (!Array.isArray(painTypes)) {\n        errors.push({\n          field: 'painTypes',\n          message: 'Pain types must be an array',\n          code: 'INVALID_FORMAT'\n        });\n        return;\n      }\n\n      if (painTypes.length > VALIDATION_RULES.painTypes.maxSelection) {\n        errors.push({\n          field: 'painTypes',\n          message: `Cannot select more than ${VALIDATION_RULES.painTypes.maxSelection} pain types`,\n          code: 'OUT_OF_RANGE'\n        });\n      }\n\n      const invalidTypes = painTypes.filter(type => \n        !VALIDATION_RULES.painTypes.validOptions.includes(type as PainType)\n      );\n\n      if (invalidTypes.length > 0) {\n        errors.push({\n          field: 'painTypes',\n          message: `Invalid pain types: ${invalidTypes.join(', ')}`,\n          code: 'INVALID_FORMAT'\n        });\n      }\n\n      if (painTypes.length === 0) {\n        warnings.push({\n          field: 'painTypes',\n          message: 'Consider selecting pain types to help identify patterns',\n          suggestion: 'Select one or more pain types that best describe your experience'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate locations field\n   */\n  private validateLocationsField(\n    locations: any, \n    errors: ValidationError[], \n    warnings: ValidationWarning[]\n  ): void {\n    if (locations !== undefined && locations !== null) {\n      if (!Array.isArray(locations)) {\n        errors.push({\n          field: 'locations',\n          message: 'Locations must be an array',\n          code: 'INVALID_FORMAT'\n        });\n        return;\n      }\n\n      if (locations.length > VALIDATION_RULES.locations.maxSelection) {\n        errors.push({\n          field: 'locations',\n          message: `Cannot select more than ${VALIDATION_RULES.locations.maxSelection} locations`,\n          code: 'OUT_OF_RANGE'\n        });\n      }\n\n      const invalidLocations = locations.filter(location => \n        !VALIDATION_RULES.locations.validOptions.includes(location as PainLocation)\n      );\n\n      if (invalidLocations.length > 0) {\n        errors.push({\n          field: 'locations',\n          message: `Invalid locations: ${invalidLocations.join(', ')}`,\n          code: 'INVALID_FORMAT'\n        });\n      }\n\n      if (locations.length === 0) {\n        warnings.push({\n          field: 'locations',\n          message: 'Consider specifying pain locations for better tracking',\n          suggestion: 'Select one or more locations where you experience pain'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate symptoms field\n   */\n  private validateSymptomsField(\n    symptoms: any, \n    errors: ValidationError[], \n    warnings: ValidationWarning[]\n  ): void {\n    if (symptoms !== undefined && symptoms !== null) {\n      if (!Array.isArray(symptoms)) {\n        errors.push({\n          field: 'symptoms',\n          message: 'Symptoms must be an array',\n          code: 'INVALID_FORMAT'\n        });\n        return;\n      }\n\n      if (symptoms.length > VALIDATION_RULES.symptoms.maxSelection) {\n        errors.push({\n          field: 'symptoms',\n          message: `Cannot select more than ${VALIDATION_RULES.symptoms.maxSelection} symptoms`,\n          code: 'OUT_OF_RANGE'\n        });\n      }\n\n      const invalidSymptoms = symptoms.filter(symptom => \n        !VALIDATION_RULES.symptoms.validOptions.includes(symptom as Symptom)\n      );\n\n      if (invalidSymptoms.length > 0) {\n        errors.push({\n          field: 'symptoms',\n          message: `Invalid symptoms: ${invalidSymptoms.join(', ')}`,\n          code: 'INVALID_FORMAT'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate menstrual status field\n   */\n  private validateMenstrualStatusField(menstrualStatus: any, errors: ValidationError[]): void {\n    if (menstrualStatus !== undefined && menstrualStatus !== null && menstrualStatus !== '') {\n      const validStatuses: MenstrualStatus[] = [\n        'before_period', 'day_1', 'day_2_3', 'day_4_plus', \n        'after_period', 'mid_cycle', 'irregular'\n      ];\n\n      if (!validStatuses.includes(menstrualStatus as MenstrualStatus)) {\n        errors.push({\n          field: 'menstrualStatus',\n          message: 'Invalid menstrual status',\n          code: 'INVALID_FORMAT'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate medications field\n   */\n  private validateMedicationsField(\n    medications: any, \n    errors: ValidationError[], \n    warnings: ValidationWarning[]\n  ): void {\n    if (medications !== undefined && medications !== null) {\n      if (!Array.isArray(medications)) {\n        errors.push({\n          field: 'medications',\n          message: 'Medications must be an array',\n          code: 'INVALID_FORMAT'\n        });\n        return;\n      }\n\n      medications.forEach((medication, index) => {\n        const result = this.validateMedication(medication);\n        result.errors.forEach(error => {\n          errors.push({\n            ...error,\n            field: `medications[${index}].${error.field.split('.').pop()}`\n          });\n        });\n        result.warnings.forEach(warning => {\n          warnings.push({\n            ...warning,\n            field: `medications[${index}].${warning.field.split('.').pop()}`\n          });\n        });\n      });\n    }\n  }\n\n  /**\n   * Validate effectiveness field\n   */\n  private validateEffectivenessField(effectiveness: any, errors: ValidationError[]): void {\n    if (effectiveness !== undefined && effectiveness !== null) {\n      if (typeof effectiveness !== 'number' || \n          isNaN(effectiveness) || \n          effectiveness < 0 || \n          effectiveness > 10) {\n        errors.push({\n          field: 'effectiveness',\n          message: 'Effectiveness must be a number between 0 and 10',\n          code: 'OUT_OF_RANGE'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate lifestyle factors field\n   */\n  private validateLifestyleFactorsField(\n    lifestyleFactors: any, \n    errors: ValidationError[], \n    warnings: ValidationWarning[]\n  ): void {\n    if (lifestyleFactors !== undefined && lifestyleFactors !== null) {\n      if (!Array.isArray(lifestyleFactors)) {\n        errors.push({\n          field: 'lifestyleFactors',\n          message: 'Lifestyle factors must be an array',\n          code: 'INVALID_FORMAT'\n        });\n        return;\n      }\n\n      lifestyleFactors.forEach((factor: LifestyleFactor, index) => {\n        if (!factor.factor || !factor.value) {\n          errors.push({\n            field: `lifestyleFactors[${index}]`,\n            message: 'Lifestyle factor must have both factor and value',\n            code: 'REQUIRED_FIELD'\n          });\n        }\n\n        // Validate specific factor types\n        if (factor.factor === 'stress_level' || \n            factor.factor === 'diet_quality' || \n            factor.factor === 'activity_level' ||\n            factor.factor === 'hydration') {\n          if (typeof factor.value !== 'number' || \n              factor.value < 1 || \n              factor.value > 10) {\n            errors.push({\n              field: `lifestyleFactors[${index}].value`,\n              message: `${factor.factor} must be a number between 1 and 10`,\n              code: 'OUT_OF_RANGE'\n            });\n          }\n        }\n\n        if (factor.factor === 'sleep_hours') {\n          if (typeof factor.value !== 'number' || \n              factor.value < 0 || \n              factor.value > 24) {\n            errors.push({\n              field: `lifestyleFactors[${index}].value`,\n              message: 'Sleep hours must be a number between 0 and 24',\n              code: 'OUT_OF_RANGE'\n            });\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Validate notes field\n   */\n  private validateNotesField(notes: any, errors: ValidationError[], warnings: ValidationWarning[]): void {\n    if (notes !== undefined && notes !== null) {\n      if (typeof notes !== 'string') {\n        errors.push({\n          field: 'notes',\n          message: 'Notes must be a string',\n          code: 'INVALID_FORMAT'\n        });\n        return;\n      }\n\n      if (notes.length > VALIDATION_RULES.notes.maxLength) {\n        errors.push({\n          field: 'notes',\n          message: `Notes must be less than ${VALIDATION_RULES.notes.maxLength} characters`,\n          code: 'OUT_OF_RANGE'\n        });\n      }\n\n      // Check for potentially sensitive information\n      const sensitivePatterns = [\n        /\\b\\d{3}-\\d{2}-\\d{4}\\b/, // SSN pattern\n        /\\b\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}\\b/, // Credit card pattern\n        /@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/ // Email pattern\n      ];\n\n      if (sensitivePatterns.some(pattern => pattern.test(notes))) {\n        warnings.push({\n          field: 'notes',\n          message: 'Notes may contain sensitive information',\n          suggestion: 'Avoid including personal identifiers, contact information, or financial data'\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate cross-field logic and relationships\n   */\n  private validateCrossFieldLogic(\n    record: Partial<PainRecord>, \n    errors: ValidationError[], \n    warnings: ValidationWarning[]\n  ): void {\n    // Check if effectiveness is provided when medications are listed\n    if (record.medications && record.medications.length > 0 && \n        (record.effectiveness === undefined || record.effectiveness === null)) {\n      warnings.push({\n        field: 'effectiveness',\n        message: 'Consider rating treatment effectiveness when medications are recorded',\n        suggestion: 'Rate how effective the treatments were on a scale of 0-10'\n      });\n    }\n\n    // Check for logical inconsistencies\n    if (record.painLevel === 0 && record.medications && record.medications.length > 0) {\n      warnings.push({\n        field: 'medications',\n        message: 'Medications recorded with no pain level',\n        suggestion: 'Consider if medications were taken preventively or if pain level should be higher'\n      });\n    }\n\n    // Check date/time consistency\n    if (record.date && record.time) {\n      const recordDateTime = new Date(`${record.date}T${record.time}`);\n      const now = new Date();\n      \n      if (recordDateTime > now) {\n        errors.push({\n          field: 'date',\n          message: 'Record date and time cannot be in the future',\n          code: 'INVALID_DATE'\n        });\n      }\n    }\n  }\n}\n\nexport default ValidationService;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/config/default.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/config/pdf-resources-config.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[346,349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[346,349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[485,488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[485,488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4648,4651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4648,4651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4780,4783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4780,4783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":969,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":969,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23686,23689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23686,23689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":979,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":979,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24000,24003],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24000,24003],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// config/resources/pdf-resources.config.ts\n\nimport { PDFResource, ResourceCategory, SupportedLanguage } from '../types/resource-types';\nimport { PDFResourceConfig } from '../types/config-types';\n\n/**\n * PDFèµ„æºç®¡ç†ç³»ç»Ÿé…ç½®\n */\nexport const PDF_RESOURCE_CONFIG: PDFResourceConfig = {\n  // åŸºç¡€ä¿¡æ¯\n  version: '2.0.0',\n  environment: (process.env.NODE_ENV as any) || 'development',\n  lastUpdated: '2024-12-20T00:00:00Z',\n  \n  // å­˜å‚¨é…ç½®\n  storage: {\n    provider: (process.env.PDF_STORAGE_PROVIDER as any) || 'local',\n    basePath: process.env.PDF_BASE_PATH || '/public/pdfs',\n    publicPath: process.env.PDF_PUBLIC_PATH || '/pdfs',\n    cdnUrl: process.env.PDF_CDN_URL,\n    \n    local: {\n      uploadPath: 'public/pdfs',\n      staticPath: '/pdfs',\n      maxFileSize: 50 * 1024 * 1024, // 50MB\n      allowedFormats: ['pdf']\n    },\n    \n    cdn: {\n      enabled: process.env.NODE_ENV === 'production',\n      baseUrl: process.env.CDN_BASE_URL || '',\n      cacheTtl: 86400 // 24å°æ—¶\n    }\n  },\n  \n  // ç¼“å­˜é…ç½®\n  cache: {\n    enabled: true,\n    strategy: 'lru',\n    ttl: 3600, // 1å°æ—¶\n    maxSize: 100,\n    maxMemory: 100 * 1024 * 1024, // 100MB\n    \n    resourceTtl: {\n      resource: 3600,    // 1å°æ—¶\n      search: 1800,      // 30åˆ†é’Ÿ\n      stats: 300,        // 5åˆ†é’Ÿ\n      validation: 7200   // 2å°æ—¶\n    },\n    \n    memory: {\n      checkPeriod: 600,        // 10åˆ†é’Ÿ\n      useClones: false,\n      errorOnMissing: false\n    },\n    \n    warmup: {\n      enabled: true,\n      resources: [\n        'immediate-pain-relief-guide-v2',\n        'heat-therapy-comprehensive-guide',\n        'menstrual-cycle-nutrition-plan'\n      ],\n      categories: ['immediate-relief'],\n      priority: 'high'\n    }\n  },\n  \n  // éªŒè¯é…ç½®\n  validation: {\n    enabled: true,\n    mode: 'strict',\n    \n    file: {\n      maxFileSize: 50 * 1024 * 1024,\n      minFileSize: 1024,\n      allowedFormats: ['pdf'],\n      requireChecksum: false,\n      virusScan: false\n    },\n    \n    content: {\n      requireTitle: true,\n      requireDescription: true,\n      minTitleLength: 5,\n      maxTitleLength: 200,\n      minDescriptionLength: 20,\n      maxDescriptionLength: 1000,\n      requireKeywords: true,\n      minKeywords: 1,\n      maxKeywords: 20,\n      bannedWords: []\n    },\n    \n    quality: {\n      minOverallScore: 5.0,\n      requireAllScores: true,\n      autoCalculateOverall: true,\n      scoreWeights: {\n        content: 0.3,\n        design: 0.2,\n        accuracy: 0.3,\n        usefulness: 0.2\n      }\n    },\n    \n    access: {\n      requireAccessLevel: true,\n      allowedLevels: ['public', 'protected'],\n      requireRegions: false,\n      defaultRegions: ['all']\n    }\n  },\n  \n  // å›½é™…åŒ–é…ç½®\n  i18n: {\n    defaultLanguage: 'zh',\n    supportedLanguages: ['zh', 'en'],\n    fallbackLanguage: 'en',\n    \n    resources: {\n      loadPath: '/locales/{{lng}}/{{ns}}.json',\n      allowMultiLoading: true\n    },\n    \n    interpolation: {\n      escapeValue: false\n    },\n    \n    pluralSeparator: '_',\n    contextSeparator: '_',\n    defaultNS: 'common',\n    ns: ['common', 'pdf-resources', 'errors']\n  },\n  \n  // å®‰å…¨é…ç½®\n  security: {\n    upload: {\n      allowedMimeTypes: ['application/pdf'],\n      maxFileSize: 50 * 1024 * 1024,\n      scanVirus: false,\n      quarantineOnThreat: false,\n      allowExecutables: false\n    },\n    \n    access: {\n      enableRateLimiting: true,\n      rateLimit: {\n        windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ\n        maxRequests: 100,\n        skipSuccessfulRequests: false\n      },\n      \n      cors: {\n        origin: process.env.NODE_ENV === 'production' ? false : true,\n        credentials: true,\n        allowedHeaders: ['Content-Type', 'Authorization', 'X-API-Key'],\n        exposedHeaders: ['X-Total-Count', 'X-Rate-Limit-Remaining']\n      },\n      \n      csp: {\n        enabled: process.env.NODE_ENV === 'production',\n        directives: {\n          'default-src': [\"'self'\"],\n          'img-src': [\"'self'\", 'data:', 'https:'],\n          'script-src': [\"'self'\", \"'unsafe-inline'\"],\n          'style-src': [\"'self'\", \"'unsafe-inline'\"]\n        }\n      }\n    },\n    \n    dataProtection: {\n      encryptSensitiveData: false,\n      hashPasswords: true,\n      saltRounds: 12,\n      anonymizeIPs: true,\n      gdprCompliant: true\n    },\n    \n    api: {\n      requireApiKey: false,\n      apiKeyHeader: 'X-API-Key',\n      enableJWT: false,\n      jwtExpiresIn: '1d'\n    }\n  },\n  \n  // ç›‘æ§é…ç½®\n  monitoring: {\n    enabled: true,\n    \n    performance: {\n      enabled: true,\n      sampleRate: 1.0,\n      trackPageLoads: true,\n      trackAPIRequests: true,\n      slowQueryThreshold: 1000\n    },\n    \n    errorTracking: {\n      enabled: true,\n      service: 'custom',\n      environment: (process.env.NODE_ENV as any) || 'development',\n      sampleRate: 1.0\n    },\n    \n    logging: {\n      enabled: true,\n      level: (process.env.LOG_LEVEL as any) || 'info',\n      format: 'json',\n      destination: 'console'\n    },\n    \n    healthCheck: {\n      enabled: true,\n      endpoint: '/api/health',\n      interval: 30,\n      timeout: 5000,\n      checks: [\n        {\n          name: 'storage',\n          type: 'storage',\n          timeout: 3000,\n          retries: 2\n        },\n        {\n          name: 'cache',\n          type: 'cache',\n          timeout: 1000,\n          retries: 1\n        }\n      ]\n    },\n    \n    metrics: {\n      enabled: true,\n      service: 'custom',\n      pushInterval: 60,\n      customMetrics: [\n        'pdf_downloads',\n        'pdf_previews',\n        'search_queries',\n        'validation_errors'\n      ]\n    }\n  },\n  \n  // åŠŸèƒ½å¼€å…³\n  features: {\n    preview: true,\n    download: true,\n    search: true,\n    analytics: true,\n    comments: false,\n    ratings: true,\n    recommendations: false,\n    collections: false,\n    versioning: true,\n    sharing: false\n  },\n  \n  // é™åˆ¶è®¾ç½®\n  limits: {\n    maxResources: 1000,\n    maxFileSize: 50 * 1024 * 1024,\n    maxPreviewPages: 5,\n    maxSearchResults: 100,\n    maxDownloadsPerDay: 50,\n    maxAPIRequestsPerMinute: 60\n  },\n  \n  // é»˜è®¤å€¼\n  defaults: {\n    language: 'zh',\n    category: 'learning',\n    accessLevel: 'public',\n    cacheTime: 3600,\n    pageSize: 20\n  }\n};\n\n/**\n * å®Œæ•´çš„PDFèµ„æºå®šä¹‰\n */\nexport const PDF_RESOURCES: PDFResource[] = [\n  // ============ å³æ—¶ç¼“è§£ç±» (Immediate Relief) ============\n  {\n    id: 'immediate-pain-relief-guide-v2',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '2.1.0',\n      releaseDate: new Date('2024-01-15'),\n      changelog: 'æ›´æ–°äº†æœ€æ–°çš„ç–¼ç—›ç¼“è§£æŠ€æœ¯å’Œå®‰å…¨æ³¨æ„äº‹é¡¹',\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'immediate-pain-relief-guide-v2.pdf',\n    fileSize: 2457600, // 2.4MB\n    pageCount: 12,\n    language: 'zh',\n    category: 'immediate-relief',\n    tags: ['ç–¼ç—›ç¼“è§£', 'å³æ—¶ç¼“è§£', 'ç´§æ€¥å¤„ç†', 'è‡ªç„¶ç–—æ³•'],\n    createdAt: new Date('2024-01-15'),\n    updatedAt: new Date('2024-12-20'),\n    createdBy: 'system',\n    updatedBy: 'admin',\n    \n    metadata: {\n      title: {\n        zh: '5åˆ†é’Ÿå¿«é€Ÿç¼“è§£ç»æœŸç–¼ç—›æŒ‡å—',\n        en: '5-Minute Quick Period Pain Relief Guide'\n      },\n      description: {\n        zh: 'ä¸“ä¸šåŒ»ç”Ÿæ¨èçš„å¿«é€Ÿç¼“è§£ç»æœŸç–¼ç—›çš„å®ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å‘¼å¸æŠ€å·§ã€æŒ‰æ‘©æ‰‹æ³•ã€çƒ­ç–—æ³•ç­‰å¤šç§å®‰å…¨æœ‰æ•ˆçš„è‡ªç„¶ç–—æ³•ã€‚',\n        en: 'Doctor-recommended practical methods for quick period pain relief, including breathing techniques, massage methods, heat therapy and other safe and effective natural remedies.'\n      },\n      author: 'Dr. Sarah Chen',\n      keywords: ['ç»æœŸç–¼ç—›', 'å¿«é€Ÿç¼“è§£', 'è‡ªç„¶ç–—æ³•', 'å‘¼å¸æŠ€å·§', 'æŒ‰æ‘©'],\n      thumbnail: '/images/thumbnails/immediate-relief.jpg',\n      featured: true,\n      quality: {\n        content: 9,\n        design: 8,\n        accuracy: 10,\n        usefulness: 9,\n        overall: 9.0\n      },\n      difficulty: 'beginner',\n      estimatedReadTime: 8,\n      lastReviewed: new Date('2024-12-15'),\n      reviewedBy: 'Dr. Sarah Chen'\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1, 2, 3],\n        watermark: 'Period Hub - é¢„è§ˆç‰ˆæœ¬',\n        maxPreviewPages: 3\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true,\n        fileFormat: 'pdf'\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['ç–¼ç—›', 'ç¼“è§£', 'å³æ—¶', 'ç»æœŸ', 'æœˆç»', 'å¿«é€Ÿ', '5åˆ†é’Ÿ', 'è‡ªç„¶'],\n        searchableContent: {\n          sections: [\n            {\n              title: 'å‘¼å¸ç¼“è§£æ³•',\n              content: 'æ·±å‘¼å¸æŠ€å·§å¯ä»¥æœ‰æ•ˆç¼“è§£ç»æœŸç–¼ç—›ï¼Œé€šè¿‡è°ƒèŠ‚è‡ªå¾‹ç¥ç»ç³»ç»Ÿæ¥å‡è½»ç—‰æŒ›ã€‚',\n              pageNumber: 3\n            },\n            {\n              title: 'çƒ­ç–—åº”ç”¨',\n              content: 'å±€éƒ¨çƒ­æ•·æ˜¯æœ€å¸¸ç”¨ä¸”æœ‰æ•ˆçš„ç–¼ç—›ç¼“è§£æ–¹æ³•ä¹‹ä¸€ï¼Œæ¸©åº¦æ§åˆ¶åœ¨40-45åº¦æœ€ä½³ã€‚',\n              pageNumber: 5\n            }\n          ]\n        }\n      },\n      interactive: {\n        hasForm: false,\n        hasCalculator: false,\n        hasLinks: true\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 13,\n      requireAuth: false\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      shareCount: 0,\n      rating: 0,\n      reviewCount: 0\n    },\n    \n    relatedResources: [\n      {\n        type: 'follow-up',\n        resourceId: 'heat-therapy-comprehensive-guide',\n        description: 'æ·±å…¥äº†è§£çƒ­ç–—æ³•çš„å®Œæ•´åº”ç”¨'\n      },\n      {\n        type: 'related',\n        resourceId: 'natural-physical-therapy-guide',\n        description: 'æ›´å¤šç‰©ç†ç–—æ³•é€‰æ‹©'\n      }\n    ]\n  },\n\n  {\n    id: 'heat-therapy-comprehensive-guide',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '1.5.0',\n      releaseDate: new Date('2024-01-10'),\n      changelog: 'å¢åŠ äº†å®‰å…¨ä½¿ç”¨æ³¨æ„äº‹é¡¹å’Œå¸¸è§é—®é¢˜è§£ç­”',\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'heat-therapy-guide.pdf',\n    fileSize: 1834752, // 1.8MB\n    pageCount: 8,\n    language: 'zh',\n    category: 'immediate-relief',\n    tags: ['çƒ­ç–—æ³•', 'çƒ­æ•·', 'æ¸©åº¦ç–—æ³•', 'ç–¼ç—›ç¼“è§£'],\n    createdAt: new Date('2024-01-10'),\n    updatedAt: new Date('2024-11-15'),\n    \n    metadata: {\n      title: {\n        zh: 'çƒ­ç–—æ³•å®Œæ•´æŒ‡å—',\n        en: 'Complete Heat Therapy Guide'\n      },\n      description: {\n        zh: 'è¯¦ç»†ä»‹ç»å„ç§çƒ­ç–—æ–¹æ³•åŠå…¶ä½¿ç”¨æŠ€å·§ï¼ŒåŒ…æ‹¬çƒ­æ°´è¢‹ã€ç”µçƒ­æ¯¯ã€çƒ­æ•·è´´ç­‰ä¸åŒçƒ­ç–—å·¥å…·çš„æ­£ç¡®ä½¿ç”¨æ–¹æ³•ã€‚',\n        en: 'Detailed introduction to various heat therapy methods and techniques, including proper use of hot water bottles, heating pads, heat patches and other heat therapy tools.'\n      },\n      author: 'Physical Therapy Team',\n      keywords: ['çƒ­ç–—æ³•', 'çƒ­æ•·', 'æ¸©åº¦æ²»ç–—', 'ç–¼ç—›ç®¡ç†'],\n      featured: false,\n      quality: {\n        content: 8,\n        design: 7,\n        accuracy: 9,\n        usefulness: 8,\n        overall: 8.0\n      },\n      difficulty: 'beginner',\n      estimatedReadTime: 6\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1, 2],\n        maxPreviewPages: 2\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['çƒ­ç–—', 'çƒ­æ•·', 'æ¸©åº¦', 'çƒ­æ°´è¢‹', 'ç”µçƒ­æ¯¯', 'çƒ­æ•·è´´']\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 13\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      rating: 0\n    }\n  },\n\n  {\n    id: 'menstrual-pain-assessment-form',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '1.0.0',\n      releaseDate: new Date('2024-01-20'),\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'menstrual-pain-assessment-form.pdf',\n    fileSize: 956432, // 0.9MB\n    pageCount: 4,\n    language: 'zh',\n    category: 'assessment',\n    tags: ['è¯„ä¼°è¡¨', 'ç–¼ç—›è¯„ä¼°', 'ç—‡çŠ¶è®°å½•', 'åŒ»ç–—è¡¨æ ¼'],\n    createdAt: new Date('2024-01-20'),\n    updatedAt: new Date('2024-01-20'),\n    \n    metadata: {\n      title: {\n        zh: 'ç»æœŸç–¼ç—›è¯„ä¼°è¡¨',\n        en: 'Menstrual Pain Assessment Form'\n      },\n      description: {\n        zh: 'æ ‡å‡†åŒ–çš„ç»æœŸç–¼ç—›è¯„ä¼°è¡¨æ ¼ï¼Œå¸®åŠ©ç”¨æˆ·ç³»ç»Ÿè®°å½•ç–¼ç—›ç—‡çŠ¶ï¼Œä¸ºåŒ»ç–—å’¨è¯¢æä¾›å‡†ç¡®ä¿¡æ¯ã€‚',\n        en: 'Standardized menstrual pain assessment form to help users systematically record pain symptoms and provide accurate information for medical consultation.'\n      },\n      author: 'Medical Team',\n      keywords: ['è¯„ä¼°', 'è¡¨æ ¼', 'ç–¼ç—›è®°å½•', 'ç—‡çŠ¶è·Ÿè¸ª'],\n      featured: false,\n      quality: {\n        content: 8,\n        design: 9,\n        accuracy: 10,\n        usefulness: 9,\n        overall: 9.0\n      },\n      difficulty: 'beginner',\n      estimatedReadTime: 3\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1],\n        maxPreviewPages: 1\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['è¯„ä¼°', 'è¡¨æ ¼', 'è®°å½•', 'ç—‡çŠ¶', 'ç–¼ç—›', 'è¿½è¸ª']\n      },\n      interactive: {\n        hasForm: true,\n        formFields: ['ç–¼ç—›å¼ºåº¦', 'ç–¼ç—›ä½ç½®', 'æŒç»­æ—¶é—´', 'ä¼´éšç—‡çŠ¶', 'ç¼“è§£æ–¹æ³•'],\n        hasCalculator: false,\n        hasLinks: false\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 13\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      rating: 0\n    }\n  },\n\n  // ============ è®¡åˆ’å‡†å¤‡ç±» (Preparation) ============\n  {\n    id: 'menstrual-cycle-nutrition-plan',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '2.0.0',\n      releaseDate: new Date('2024-02-01'),\n      changelog: 'æ–°å¢å­£èŠ‚æ€§é¥®é£Ÿå»ºè®®å’Œä¸ªæ€§åŒ–è¥å…»æ–¹æ¡ˆ',\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'menstrual-cycle-nutrition-plan.pdf',\n    fileSize: 3245678, // 3.2MB\n    pageCount: 16,\n    language: 'zh',\n    category: 'preparation',\n    tags: ['è¥å…»è®¡åˆ’', 'é¥®é£Ÿè°ƒç†', 'ç»æœŸè¥å…»', 'å¥åº·é¥®é£Ÿ'],\n    createdAt: new Date('2024-02-01'),\n    updatedAt: new Date('2024-12-18'),\n    \n    metadata: {\n      title: {\n        zh: 'ç»æœŸè¥å…»ç®¡ç†è®¡åˆ’',\n        en: 'Menstrual Cycle Nutrition Plan'\n      },\n      description: {\n        zh: 'æ ¹æ®æœˆç»å‘¨æœŸä¸åŒé˜¶æ®µçš„ç”Ÿç†ç‰¹ç‚¹ï¼Œåˆ¶å®šç§‘å­¦çš„è¥å…»è¡¥å……è®¡åˆ’ï¼ŒåŒ…å«é£Ÿè°±æ¨èã€è¥å…»ç´ æ­é…å’Œé¥®é£Ÿç¦å¿Œã€‚',\n        en: 'Based on the physiological characteristics of different phases of the menstrual cycle, develop a scientific nutrition supplement plan, including recipe recommendations, nutrient combinations and dietary restrictions.'\n      },\n      author: 'Nutritionist Team',\n      keywords: ['è¥å…»', 'é¥®é£Ÿ', 'ç»æœŸ', 'é£Ÿè°±', 'å¥åº·'],\n      thumbnail: '/images/thumbnails/nutrition-plan.jpg',\n      featured: true,\n      quality: {\n        content: 9,\n        design: 8,\n        accuracy: 9,\n        usefulness: 10,\n        overall: 9.0\n      },\n      difficulty: 'intermediate',\n      estimatedReadTime: 12\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1, 2, 3],\n        maxPreviewPages: 3\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['è¥å…»', 'é¥®é£Ÿ', 'é£Ÿè°±', 'ç»æœŸ', 'å¥åº·', 'è®¡åˆ’', 'ç®¡ç†']\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 13\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      rating: 0\n    }\n  },\n\n  {\n    id: 'magnesium-gut-health-guide',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '1.2.0',\n      releaseDate: new Date('2024-02-10'),\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'magnesium-gut-health-guide.pdf',\n    fileSize: 2156789, // 2.1MB\n    pageCount: 10,\n    language: 'zh',\n    category: 'preparation',\n    tags: ['é•å…ƒç´ ', 'è‚ é“å¥åº·', 'è¥å…»è¡¥å……', 'å¾®é‡å…ƒç´ '],\n    createdAt: new Date('2024-02-10'),\n    updatedAt: new Date('2024-10-12'),\n    \n    metadata: {\n      title: {\n        zh: 'é•ä¸è‚ é“å¥åº·ç»¼åˆæŒ‡å—',\n        en: 'Magnesium and Gut Health Comprehensive Guide'\n      },\n      description: {\n        zh: 'æ·±å…¥è§£æé•å…ƒç´ å¯¹ç»æœŸå¥åº·çš„é‡è¦ä½œç”¨ï¼ŒåŒ…æ‹¬é•çš„æ¥æºã€è¡¥å……æ–¹æ³•ã€ä¸å…¶ä»–è¥å…»ç´ çš„ååŒä½œç”¨ã€‚',\n        en: 'In-depth analysis of the important role of magnesium in menstrual health, including sources of magnesium, supplementation methods, and synergistic effects with other nutrients.'\n      },\n      author: 'Dr. Lisa Wang',\n      keywords: ['é•', 'å¾®é‡å…ƒç´ ', 'è¥å…»è¡¥å……', 'è‚ é“å¥åº·'],\n      featured: false,\n      quality: {\n        content: 8,\n        design: 7,\n        accuracy: 9,\n        usefulness: 8,\n        overall: 8.0\n      },\n      difficulty: 'intermediate',\n      estimatedReadTime: 8\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1, 2],\n        maxPreviewPages: 2\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['é•', 'è‚ é“', 'å¥åº·', 'è¥å…»', 'è¡¥å……', 'å¾®é‡å…ƒç´ ']\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 16\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      rating: 0\n    }\n  },\n\n  // ============ å­¦ä¹ ç†è§£ç±» (Learning) ============\n  {\n    id: 'comprehensive-medical-guide-to-dysmenorrhea',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '3.0.0',\n      releaseDate: new Date('2024-03-01'),\n      changelog: 'æ›´æ–°äº†æœ€æ–°çš„åŒ»å­¦ç ”ç©¶æˆæœå’Œæ²»ç–—æŒ‡å—',\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'comprehensive-medical-guide-dysmenorrhea.pdf',\n    fileSize: 4567890, // 4.5MB\n    pageCount: 24,\n    language: 'zh',\n    category: 'learning',\n    tags: ['ç—›ç»', 'åŒ»å­¦æŒ‡å—', 'ç–¾ç—…ç†è§£', 'æ²»ç–—æ–¹æ³•'],\n    createdAt: new Date('2024-03-01'),\n    updatedAt: new Date('2024-12-10'),\n    \n    metadata: {\n      title: {\n        zh: 'ç—›ç»ç»¼åˆåŒ»å­¦æŒ‡å—',\n        en: 'Comprehensive Medical Guide to Dysmenorrhea'\n      },\n      description: {\n        zh: 'å…¨é¢çš„ç—›ç»åŒ»å­¦æŒ‡å—ï¼Œæ¶µç›–ç—…å› åˆ†æã€è¯Šæ–­æ ‡å‡†ã€æ²»ç–—æ–¹æ¡ˆå’Œé¢„é˜²æªæ–½ï¼ŒåŸºäºæœ€æ–°åŒ»å­¦ç ”ç©¶ç¼–å†™ã€‚',\n        en: 'Comprehensive medical guide to dysmenorrhea, covering etiology analysis, diagnostic criteria, treatment options and preventive measures, written based on the latest medical research.'\n      },\n      author: 'Medical Research Team',\n      keywords: ['ç—›ç»', 'åŒ»å­¦', 'è¯Šæ–­', 'æ²»ç–—', 'é¢„é˜²'],\n      thumbnail: '/images/thumbnails/medical-guide.jpg',\n      featured: true,\n      quality: {\n        content: 10,\n        design: 8,\n        accuracy: 10,\n        usefulness: 9,\n        overall: 9.3\n      },\n      difficulty: 'advanced',\n      estimatedReadTime: 20\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1, 2, 3, 4],\n        maxPreviewPages: 4\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['ç—›ç»', 'åŒ»å­¦', 'æŒ‡å—', 'è¯Šæ–­', 'æ²»ç–—', 'ç—…å› ', 'é¢„é˜²']\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 16\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      rating: 0\n    }\n  },\n\n  // ============ é•¿æœŸç®¡ç†ç±» (Management) ============\n  {\n    id: 'herbal-tea-menstrual-pain-relief',\n    type: 'pdf',\n    status: 'active',\n    version: {\n      version: '1.3.0',\n      releaseDate: new Date('2024-03-15'),\n      isLatest: true,\n      deprecated: false\n    },\n    filename: 'herbal-tea-menstrual-pain-relief.pdf',\n    fileSize: 2987654, // 2.9MB\n    pageCount: 14,\n    language: 'zh',\n    category: 'management',\n    tags: ['è‰è¯èŒ¶', 'ä¸­åŒ»ç–—æ³•', 'å¤©ç„¶ç–—æ³•', 'é•¿æœŸè°ƒç†'],\n    createdAt: new Date('2024-03-15'),\n    updatedAt: new Date('2024-11-20'),\n    \n    metadata: {\n      title: {\n        zh: 'è‰è¯èŒ¶ç»æœŸç–¼ç—›ç¼“è§£æŒ‡å—',\n        en: 'Herbal Tea Guide for Menstrual Pain Relief'\n      },\n      description: {\n        zh: 'ä»‹ç»å„ç§æœ‰æ•ˆçš„è‰è¯èŒ¶é…æ–¹ï¼Œç”¨äºé•¿æœŸè°ƒç†å’Œç¼“è§£ç»æœŸä¸é€‚ï¼ŒåŒ…å«åˆ¶ä½œæ–¹æ³•ã€æœç”¨æ—¶æœºå’Œæ³¨æ„äº‹é¡¹ã€‚',\n        en: 'Introduction to various effective herbal tea formulas for long-term conditioning and relief of menstrual discomfort, including preparation methods, timing of consumption and precautions.'\n      },\n      author: 'Traditional Medicine Expert',\n      keywords: ['è‰è¯èŒ¶', 'ä¸­åŒ»', 'å¤©ç„¶ç–—æ³•', 'è°ƒç†', 'é…æ–¹'],\n      featured: false,\n      quality: {\n        content: 8,\n        design: 7,\n        accuracy: 9,\n        usefulness: 8,\n        overall: 8.0\n      },\n      difficulty: 'intermediate',\n      estimatedReadTime: 10\n    },\n    \n    content: {\n      preview: {\n        enabled: true,\n        pages: [1, 2, 3],\n        maxPreviewPages: 3\n      },\n      download: {\n        enabled: true,\n        requireAuth: false,\n        trackDownloads: true\n      },\n      search: {\n        indexed: true,\n        searchKeywords: ['è‰è¯', 'èŒ¶', 'ä¸­åŒ»', 'å¤©ç„¶', 'ç–—æ³•', 'é…æ–¹', 'è°ƒç†']\n      }\n    },\n    \n    access: {\n      level: 'public',\n      public: true,\n      regions: ['all'],\n      ageRestriction: 16\n    },\n    \n    analytics: {\n      downloadCount: 0,\n      viewCount: 0,\n      rating: 0\n    }\n  }\n];\n\n/**\n * Legacy IDæ˜ å°„ - ç”¨äºå‘åå…¼å®¹\n */\nexport const LEGACY_ID_MAPPING = {\n  // å³æ—¶ç¼“è§£ç±»\n  'immediate-pdf-1': 'immediate-pain-relief-guide-v2',\n  'immediate-pdf-2': 'heat-therapy-comprehensive-guide',\n  'immediate-pdf-3': 'menstrual-pain-assessment-form',\n  \n  // è®¡åˆ’å‡†å¤‡ç±»\n  'preparation-pdf-1': 'healthy-habits-checklist', // éœ€è¦åˆ›å»º\n  'preparation-pdf-2': 'menstrual-cycle-nutrition-plan',\n  'preparation-pdf-3': 'magnesium-gut-health-guide',\n  'preparation-pdf-4': 'zhan-zhuang-baduanjin-guide', // éœ€è¦åˆ›å»º\n  \n  // å­¦ä¹ ç†è§£ç±»\n  'learning-pdf-1': 'natural-therapy-assessment', // éœ€è¦åˆ›å»º\n  'learning-pdf-2': 'menstrual-pain-complications-management', // éœ€è¦åˆ›å»º\n  'learning-pdf-3': 'teacher-health-manual', // éœ€è¦åˆ›å»º\n  'learning-pdf-4': 'teacher-collaboration-handbook', // éœ€è¦åˆ›å»º\n  'learning-pdf-5': 'parent-communication-guide', // éœ€è¦åˆ›å»º\n  'learning-pdf-6': 'us-insurance-quick-reference-card', // éœ€è¦åˆ›å»º\n  \n  // é•¿æœŸç®¡ç†ç±»\n  'management-pdf-1': 'herbal-tea-menstrual-pain-relief',\n  'management-pdf-2': 'global-pain-relief-methods', // éœ€è¦åˆ›å»º\n  'management-pdf-3': 'personal-health-profile-builder', // éœ€è¦åˆ›å»º\n  \n  // æ—§ç‰ˆæœ¬æ–‡ç« æ˜ å°„\n  'immediate-1': 'immediate-pain-relief-guide-v2',\n  'immediate-2': 'heat-therapy-comprehensive-guide',\n  'immediate-3': 'menstrual-pain-assessment-form',\n  'preparation-1': 'menstrual-cycle-nutrition-plan',\n  'preparation-6': 'magnesium-gut-health-guide',\n  'learning-9': 'comprehensive-medical-guide-to-dysmenorrhea',\n  'management-2': 'herbal-tea-menstrual-pain-relief'\n} as const;\n\n/**\n * èµ„æºç±»åˆ«é…ç½®\n */\nexport const CATEGORY_CONFIG = {\n  'immediate-relief': {\n    displayOrder: 1,\n    color: '#ef4444', // red-500\n    icon: 'zap',\n    description: {\n      zh: 'å¿«é€Ÿç¼“è§£ç»æœŸç–¼ç—›çš„å®ç”¨æ–¹æ³•',\n      en: 'Practical methods for quick period pain relief'\n    }\n  },\n  'preparation': {\n    displayOrder: 2,\n    color: '#f59e0b', // amber-500\n    icon: 'calendar',\n    description: {\n      zh: 'ç»æœŸå‰çš„å‡†å¤‡å’Œé¢„é˜²æªæ–½',\n      en: 'Preparation and preventive measures before menstruation'\n    }\n  },\n  'learning': {\n    displayOrder: 3,\n    color: '#3b82f6', // blue-500\n    icon: 'book-open',\n    description: {\n      zh: 'æ·±å…¥ç†è§£ç»æœŸå¥åº·çŸ¥è¯†',\n      en: 'In-depth understanding of menstrual health knowledge'\n    }\n  },\n  'management': {\n    displayOrder: 4,\n    color: '#10b981', // emerald-500\n    icon: 'settings',\n    description: {\n      zh: 'é•¿æœŸçš„ç»æœŸå¥åº·ç®¡ç†',\n      en: 'Long-term menstrual health management'\n    }\n  },\n  'assessment': {\n    displayOrder: 5,\n    color: '#8b5cf6', // violet-500\n    icon: 'clipboard-check',\n    description: {\n      zh: 'ç—‡çŠ¶è¯„ä¼°å’Œè®°å½•å·¥å…·',\n      en: 'Symptom assessment and recording tools'\n    }\n  },\n  'template': {\n    displayOrder: 6,\n    color: '#06b6d4', // cyan-500\n    icon: 'document-text',\n    description: {\n      zh: 'å®ç”¨çš„è¡¨æ ¼å’Œæ¨¡æ¿',\n      en: 'Practical forms and templates'\n    }\n  }\n} as const;\n\n/**\n * è·å–èµ„æºç»Ÿè®¡ä¿¡æ¯\n */\nexport function getResourceStats() {\n  const stats = {\n    totalCount: PDF_RESOURCES.length,\n    totalSize: PDF_RESOURCES.reduce((sum, r) => sum + r.fileSize, 0),\n    averageQuality: PDF_RESOURCES.reduce((sum, r) => sum + r.metadata.quality.overall, 0) / PDF_RESOURCES.length,\n    totalDownloads: PDF_RESOURCES.reduce((sum, r) => sum + r.analytics.downloadCount, 0),\n    totalViews: PDF_RESOURCES.reduce((sum, r) => sum + r.analytics.viewCount, 0),\n    lastUpdated: Math.max(...PDF_RESOURCES.map(r => r.updatedAt.getTime())),\n    \n    byCategory: PDF_RESOURCES.reduce((acc, r) => {\n      acc[r.category] = (acc[r.category] || 0) + 1;\n      return acc;\n    }, {} as any),\n    \n    byLanguage: PDF_RESOURCES.reduce((acc, r) => {\n      acc[r.language] = (acc[r.language] || 0) + 1;\n      return acc;\n    }, {} as Record<SupportedLanguage, number>),\n    \n    byStatus: PDF_RESOURCES.reduce((acc, r) => {\n      acc[r.status] = (acc[r.status] || 0) + 1;\n      return acc;\n    }, {} as any),\n    \n    topResources: {\n      mostDownloaded: PDF_RESOURCES\n        .sort((a, b) => b.analytics.downloadCount - a.analytics.downloadCount)\n        .slice(0, 5)\n        .map(r => ({ resourceId: r.id, count: r.analytics.downloadCount })),\n      \n      highestRated: PDF_RESOURCES\n        .sort((a, b) => b.metadata.quality.overall - a.metadata.quality.overall)\n        .slice(0, 5)\n        .map(r => ({ resourceId: r.id, rating: r.metadata.quality.overall })),\n      \n      mostRecent: PDF_RESOURCES\n        .sort((a, b) => b.updatedAt.getTime() - a.updatedAt.getTime())\n        .slice(0, 5)\n        .map(r => ({ resourceId: r.id, updatedAt: r.updatedAt })),\n      \n      trending: [] // éœ€è¦åŸºäºå®é™…è®¿é—®æ•°æ®è®¡ç®—\n    }\n  };\n  \n  return stats;\n}\n\n/**\n * æ ¹æ®IDè·å–èµ„æº\n */\nexport function getPDFResourceById(id: string): PDFResource | null {\n  // é¦–å…ˆå°è¯•ç›´æ¥æŸ¥æ‰¾\n  let resource = PDF_RESOURCES.find(r => r.id === id);\n  \n  // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°è¯•Legacyæ˜ å°„\n  if (!resource) {\n    const mappedId = LEGACY_ID_MAPPING[id as keyof typeof LEGACY_ID_MAPPING];\n    if (mappedId) {\n      resource = PDF_RESOURCES.find(r => r.id === mappedId);\n    }\n  }\n  \n  return resource || null;\n}\n\n/**\n * æ ¹æ®ç±»åˆ«è·å–èµ„æº\n */\nexport function getPDFResourcesByCategory(category: ResourceCategory): PDFResource[] {\n  return PDF_RESOURCES.filter(r => r.category === category && r.status === 'active');\n}\n\n/**\n * è·å–ç²¾é€‰èµ„æº\n */\nexport function getFeaturedResources(): PDFResource[] {\n  return PDF_RESOURCES.filter(r => r.metadata.featured && r.status === 'active');\n}\n\n/**\n * éªŒè¯Legacyæ˜ å°„çš„å®Œæ•´æ€§\n */\nexport function validateLegacyMappings(): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n  \n  for (const [legacyId, modernId] of Object.entries(LEGACY_ID_MAPPING)) {\n    const resource = getPDFResourceById(modernId);\n    if (!resource) {\n      errors.push(`Legacy mapping ${legacyId} -> ${modernId} points to non-existent resource`);\n    }\n  }\n  \n  return {\n    valid: errors.length === 0,\n    errors\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/core/cache-manager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[226,229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[226,229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[509,512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[509,512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2799,2802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2799,2802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":228,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5004,5007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5004,5007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7461,7464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7461,7464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":364,"column":7,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":364,"endColumn":90},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":366,"column":7,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":366,"endColumn":90},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":473,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":473,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10895,10898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10895,10898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":491,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":491,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11220,11223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11220,11223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":560,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":560,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12347,12350],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12347,12350],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":571,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":571,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12593,12596],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12593,12596],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":584,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":584,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12867,12870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12867,12870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'name' is assigned a value but never used.","line":744,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":744,"endColumn":21}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/core/cache-manager.ts\n\nimport { CacheEntry, CacheStats } from '../types/resource-types';\nimport { CacheConfig, CacheStrategy } from '../types/config-types';\n\n/**\n * ç¼“å­˜ç­–ç•¥æ¥å£\n */\ninterface ICacheStrategy<T = any> {\n  get(key: string): CacheEntry<T> | null;\n  set(key: string, value: T, ttl?: number): void;\n  delete(key: string): boolean;\n  clear(): void;\n  has(key: string): boolean;\n  size(): number;\n  keys(): string[];\n  evict(): void;\n}\n\n/**\n * LRUç¼“å­˜ç­–ç•¥å®ç°\n */\nclass LRUCacheStrategy<T = any> implements ICacheStrategy<T> {\n  private cache = new Map<string, CacheEntry<T>>();\n  private accessOrder = new Map<string, number>();\n  private accessCounter = 0;\n  \n  constructor(private maxSize: number, private defaultTtl: number) {}\n  \n  get(key: string): CacheEntry<T> | null {\n    const entry = this.cache.get(key);\n    if (!entry) return null;\n    \n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    if (entry.expiresAt && new Date() > entry.expiresAt) {\n      this.delete(key);\n      return null;\n    }\n    \n    // æ›´æ–°è®¿é—®è®°å½•\n    entry.accessCount++;\n    entry.lastAccessedAt = new Date();\n    this.accessOrder.set(key, ++this.accessCounter);\n    \n    return entry;\n  }\n  \n  set(key: string, value: T, ttl?: number): void {\n    // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œæ‰§è¡ŒLRUé©±é€\n    if (this.cache.size >= this.maxSize && !this.cache.has(key)) {\n      this.evictLRU();\n    }\n    \n    const now = new Date();\n    const expirationTime = ttl || this.defaultTtl;\n    const expiresAt = new Date(now.getTime() + expirationTime * 1000);\n    \n    const entry: CacheEntry<T> = {\n      key,\n      value,\n      createdAt: now,\n      expiresAt,\n      accessCount: 1,\n      lastAccessedAt: now,\n      size: this.calculateSize(value)\n    };\n    \n    this.cache.set(key, entry);\n    this.accessOrder.set(key, ++this.accessCounter);\n  }\n  \n  delete(key: string): boolean {\n    this.accessOrder.delete(key);\n    return this.cache.delete(key);\n  }\n  \n  clear(): void {\n    this.cache.clear();\n    this.accessOrder.clear();\n    this.accessCounter = 0;\n  }\n  \n  has(key: string): boolean {\n    return this.cache.has(key);\n  }\n  \n  size(): number {\n    return this.cache.size;\n  }\n  \n  keys(): string[] {\n    return Array.from(this.cache.keys());\n  }\n  \n  evict(): void {\n    this.evictLRU();\n  }\n  \n  private evictLRU(): void {\n    let oldestKey: string | null = null;\n    let oldestAccess = Infinity;\n    \n    for (const [key, accessTime] of this.accessOrder) {\n      if (accessTime < oldestAccess) {\n        oldestAccess = accessTime;\n        oldestKey = key;\n      }\n    }\n    \n    if (oldestKey) {\n      this.delete(oldestKey);\n    }\n  }\n  \n  private calculateSize(value: T): number {\n    try {\n      return JSON.stringify(value).length * 2; // ç²—ç•¥ä¼°ç®—Unicodeå­—ç¬¦å ç”¨\n    } catch {\n      return 1024; // é»˜è®¤1KB\n    }\n  }\n}\n\n/**\n * LFUç¼“å­˜ç­–ç•¥å®ç°\n */\nclass LFUCacheStrategy<T = any> implements ICacheStrategy<T> {\n  private cache = new Map<string, CacheEntry<T>>();\n  private frequencies = new Map<string, number>();\n  \n  constructor(private maxSize: number, private defaultTtl: number) {}\n  \n  get(key: string): CacheEntry<T> | null {\n    const entry = this.cache.get(key);\n    if (!entry) return null;\n    \n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    if (entry.expiresAt && new Date() > entry.expiresAt) {\n      this.delete(key);\n      return null;\n    }\n    \n    // æ›´æ–°è®¿é—®é¢‘ç‡\n    entry.accessCount++;\n    entry.lastAccessedAt = new Date();\n    this.frequencies.set(key, (this.frequencies.get(key) || 0) + 1);\n    \n    return entry;\n  }\n  \n  set(key: string, value: T, ttl?: number): void {\n    if (this.cache.size >= this.maxSize && !this.cache.has(key)) {\n      this.evictLFU();\n    }\n    \n    const now = new Date();\n    const expirationTime = ttl || this.defaultTtl;\n    const expiresAt = new Date(now.getTime() + expirationTime * 1000);\n    \n    const entry: CacheEntry<T> = {\n      key,\n      value,\n      createdAt: now,\n      expiresAt,\n      accessCount: 1,\n      lastAccessedAt: now,\n      size: this.calculateSize(value)\n    };\n    \n    this.cache.set(key, entry);\n    this.frequencies.set(key, 1);\n  }\n  \n  delete(key: string): boolean {\n    this.frequencies.delete(key);\n    return this.cache.delete(key);\n  }\n  \n  clear(): void {\n    this.cache.clear();\n    this.frequencies.clear();\n  }\n  \n  has(key: string): boolean {\n    return this.cache.has(key);\n  }\n  \n  size(): number {\n    return this.cache.size;\n  }\n  \n  keys(): string[] {\n    return Array.from(this.cache.keys());\n  }\n  \n  evict(): void {\n    this.evictLFU();\n  }\n  \n  private evictLFU(): void {\n    let leastFrequentKey: string | null = null;\n    let minFrequency = Infinity;\n    \n    for (const [key, frequency] of this.frequencies) {\n      if (frequency < minFrequency) {\n        minFrequency = frequency;\n        leastFrequentKey = key;\n      }\n    }\n    \n    if (leastFrequentKey) {\n      this.delete(leastFrequentKey);\n    }\n  }\n  \n  private calculateSize(value: T): number {\n    try {\n      return JSON.stringify(value).length * 2;\n    } catch {\n      return 1024;\n    }\n  }\n}\n\n/**\n * TTLç¼“å­˜ç­–ç•¥å®ç°\n */\nclass TTLCacheStrategy<T = any> implements ICacheStrategy<T> {\n  private cache = new Map<string, CacheEntry<T>>();\n  private timers = new Map<string, NodeJS.Timeout>();\n  \n  constructor(private maxSize: number, private defaultTtl: number) {}\n  \n  get(key: string): CacheEntry<T> | null {\n    const entry = this.cache.get(key);\n    if (!entry) return null;\n    \n    // TTLç­–ç•¥ä¸éœ€è¦æ£€æŸ¥è¿‡æœŸï¼Œç”±å®šæ—¶å™¨è‡ªåŠ¨æ¸…ç†\n    entry.accessCount++;\n    entry.lastAccessedAt = new Date();\n    \n    return entry;\n  }\n  \n  set(key: string, value: T, ttl?: number): void {\n    // æ¸…é™¤ç°æœ‰å®šæ—¶å™¨\n    const existingTimer = this.timers.get(key);\n    if (existingTimer) {\n      clearTimeout(existingTimer);\n    }\n    \n    if (this.cache.size >= this.maxSize && !this.cache.has(key)) {\n      this.evictOldest();\n    }\n    \n    const now = new Date();\n    const expirationTime = ttl || this.defaultTtl;\n    const expiresAt = new Date(now.getTime() + expirationTime * 1000);\n    \n    const entry: CacheEntry<T> = {\n      key,\n      value,\n      createdAt: now,\n      expiresAt,\n      accessCount: 1,\n      lastAccessedAt: now,\n      size: this.calculateSize(value)\n    };\n    \n    this.cache.set(key, entry);\n    \n    // è®¾ç½®è¿‡æœŸå®šæ—¶å™¨\n    const timer = setTimeout(() => {\n      this.delete(key);\n    }, expirationTime * 1000);\n    \n    this.timers.set(key, timer);\n  }\n  \n  delete(key: string): boolean {\n    const timer = this.timers.get(key);\n    if (timer) {\n      clearTimeout(timer);\n      this.timers.delete(key);\n    }\n    return this.cache.delete(key);\n  }\n  \n  clear(): void {\n    // æ¸…é™¤æ‰€æœ‰å®šæ—¶å™¨\n    for (const timer of this.timers.values()) {\n      clearTimeout(timer);\n    }\n    this.cache.clear();\n    this.timers.clear();\n  }\n  \n  has(key: string): boolean {\n    return this.cache.has(key);\n  }\n  \n  size(): number {\n    return this.cache.size;\n  }\n  \n  keys(): string[] {\n    return Array.from(this.cache.keys());\n  }\n  \n  evict(): void {\n    this.evictOldest();\n  }\n  \n  private evictOldest(): void {\n    let oldestKey: string | null = null;\n    let oldestTime = Infinity;\n    \n    for (const [key, entry] of this.cache) {\n      if (entry.createdAt.getTime() < oldestTime) {\n        oldestTime = entry.createdAt.getTime();\n        oldestKey = key;\n      }\n    }\n    \n    if (oldestKey) {\n      this.delete(oldestKey);\n    }\n  }\n  \n  private calculateSize(value: T): number {\n    try {\n      return JSON.stringify(value).length * 2;\n    } catch {\n      return 1024;\n    }\n  }\n}\n\n/**\n * è‡ªé€‚åº”ç¼“å­˜ç­–ç•¥å®ç°\n */\nclass AdaptiveCacheStrategy<T = any> implements ICacheStrategy<T> {\n  private lruStrategy: LRUCacheStrategy<T>;\n  private lfuStrategy: LFUCacheStrategy<T>;\n  private currentStrategy: ICacheStrategy<T>;\n  private performanceMetrics = {\n    lru: { hits: 0, misses: 0 },\n    lfu: { hits: 0, misses: 0 }\n  };\n  private lastEvaluation = Date.now();\n  private evaluationInterval = 60000; // 1åˆ†é’Ÿ\n  \n  constructor(maxSize: number, defaultTtl: number) {\n    this.lruStrategy = new LRUCacheStrategy<T>(maxSize, defaultTtl);\n    this.lfuStrategy = new LFUCacheStrategy<T>(maxSize, defaultTtl);\n    this.currentStrategy = this.lruStrategy; // é»˜è®¤ä½¿ç”¨LRU\n  }\n  \n  get(key: string): CacheEntry<T> | null {\n    const result = this.currentStrategy.get(key);\n    \n    // è®°å½•æ€§èƒ½æŒ‡æ ‡\n    if (this.currentStrategy === this.lruStrategy) {\n      result ? this.performanceMetrics.lru.hits++ : this.performanceMetrics.lru.misses++;\n    } else {\n      result ? this.performanceMetrics.lfu.hits++ : this.performanceMetrics.lfu.misses++;\n    }\n    \n    // å®šæœŸè¯„ä¼°ç­–ç•¥æ€§èƒ½\n    this.evaluateStrategy();\n    \n    return result;\n  }\n  \n  set(key: string, value: T, ttl?: number): void {\n    this.currentStrategy.set(key, value, ttl);\n  }\n  \n  delete(key: string): boolean {\n    return this.currentStrategy.delete(key);\n  }\n  \n  clear(): void {\n    this.lruStrategy.clear();\n    this.lfuStrategy.clear();\n    this.performanceMetrics = {\n      lru: { hits: 0, misses: 0 },\n      lfu: { hits: 0, misses: 0 }\n    };\n  }\n  \n  has(key: string): boolean {\n    return this.currentStrategy.has(key);\n  }\n  \n  size(): number {\n    return this.currentStrategy.size();\n  }\n  \n  keys(): string[] {\n    return this.currentStrategy.keys();\n  }\n  \n  evict(): void {\n    this.currentStrategy.evict();\n  }\n  \n  private evaluateStrategy(): void {\n    const now = Date.now();\n    if (now - this.lastEvaluation < this.evaluationInterval) {\n      return;\n    }\n    \n    const lruHitRate = this.calculateHitRate(this.performanceMetrics.lru);\n    const lfuHitRate = this.calculateHitRate(this.performanceMetrics.lfu);\n    \n    // åˆ‡æ¢åˆ°æ€§èƒ½æ›´å¥½çš„ç­–ç•¥\n    const newStrategy = lruHitRate > lfuHitRate ? this.lruStrategy : this.lfuStrategy;\n    \n    if (newStrategy !== this.currentStrategy) {\n      this.migrateData(this.currentStrategy, newStrategy);\n      this.currentStrategy = newStrategy;\n    }\n    \n    this.lastEvaluation = now;\n  }\n  \n  private calculateHitRate(metrics: { hits: number; misses: number }): number {\n    const total = metrics.hits + metrics.misses;\n    return total > 0 ? metrics.hits / total : 0;\n  }\n  \n  private migrateData(from: ICacheStrategy<T>, to: ICacheStrategy<T>): void {\n    // è¿ç§»ç°æœ‰æ•°æ®åˆ°æ–°ç­–ç•¥\n    for (const key of from.keys()) {\n      const entry = from.get(key);\n      if (entry) {\n        const remainingTtl = entry.expiresAt ? \n          Math.max(0, entry.expiresAt.getTime() - Date.now()) / 1000 : undefined;\n        to.set(key, entry.value, remainingTtl);\n      }\n    }\n  }\n}\n\n/**\n * ä¸»ç¼“å­˜ç®¡ç†å™¨\n */\nexport class CacheManager {\n  private strategy: ICacheStrategy;\n  private config: CacheConfig;\n  private stats: CacheStats;\n  private cleanupInterval?: NodeJS.Timeout;\n  \n  constructor(config: CacheConfig) {\n    this.config = config;\n    this.strategy = this.createStrategy(config.strategy);\n    this.stats = {\n      totalEntries: 0,\n      totalSize: 0,\n      hitRate: 0,\n      evictionCount: 0\n    };\n    \n    if (config.enabled) {\n      this.startCleanupScheduler();\n    }\n  }\n  \n  /**\n   * è·å–ç¼“å­˜å€¼\n   */\n  get<T = any>(key: string): T | null {\n    if (!this.config.enabled) return null;\n    \n    const entry = this.strategy.get(key);\n    \n    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n    if (entry) {\n      this.updateHitRate(true);\n      return entry.value;\n    } else {\n      this.updateHitRate(false);\n      return null;\n    }\n  }\n  \n  /**\n   * è®¾ç½®ç¼“å­˜å€¼\n   */\n  set<T = any>(key: string, value: T, ttl?: number): void {\n    if (!this.config.enabled) return;\n    \n    const effectiveTtl = ttl || this.config.ttl;\n    this.strategy.set(key, value, effectiveTtl);\n    this.updateStats();\n  }\n  \n  /**\n   * åˆ é™¤ç¼“å­˜é¡¹\n   */\n  delete(key: string): boolean {\n    if (!this.config.enabled) return false;\n    \n    const result = this.strategy.delete(key);\n    if (result) {\n      this.updateStats();\n    }\n    return result;\n  }\n  \n  /**\n   * æ¸…ç©ºæ‰€æœ‰ç¼“å­˜\n   */\n  clear(): void {\n    this.strategy.clear();\n    this.resetStats();\n  }\n  \n  /**\n   * æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨\n   */\n  has(key: string): boolean {\n    return this.config.enabled && this.strategy.has(key);\n  }\n  \n  /**\n   * è·å–ç¼“å­˜å¤§å°\n   */\n  size(): number {\n    return this.strategy.size();\n  }\n  \n  /**\n   * è·å–æ‰€æœ‰é”®\n   */\n  keys(): string[] {\n    return this.strategy.keys();\n  }\n  \n  /**\n   * æ‰‹åŠ¨è§¦å‘ç¼“å­˜æ¸…ç†\n   */\n  cleanup(): void {\n    this.strategy.evict();\n    this.updateStats();\n  }\n  \n  /**\n   * è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯\n   */\n  getStats(): CacheStats {\n    this.updateStats();\n    return { ...this.stats };\n  }\n  \n  /**\n   * é¢„çƒ­ç¼“å­˜\n   */\n  async warmup(entries: Array<{ key: string; value: any; ttl?: number }>): Promise<void> {\n    if (!this.config.enabled || !this.config.warmup?.enabled) return;\n    \n    for (const entry of entries) {\n      this.set(entry.key, entry.value, entry.ttl);\n    }\n  }\n  \n  /**\n   * æ‰¹é‡è·å–\n   */\n  mget<T = any>(keys: string[]): Record<string, T | null> {\n    const result: Record<string, T | null> = {};\n    \n    for (const key of keys) {\n      result[key] = this.get<T>(key);\n    }\n    \n    return result;\n  }\n  \n  /**\n   * æ‰¹é‡è®¾ç½®\n   */\n  mset(entries: Array<{ key: string; value: any; ttl?: number }>): void {\n    for (const entry of entries) {\n      this.set(entry.key, entry.value, entry.ttl);\n    }\n  }\n  \n  /**\n   * æŒ‰æ¨¡å¼åˆ é™¤\n   */\n  deletePattern(pattern: string): number {\n    const regex = new RegExp(pattern.replace(/\\*/g, '.*'));\n    const keysToDelete = this.keys().filter(key => regex.test(key));\n    \n    let deletedCount = 0;\n    for (const key of keysToDelete) {\n      if (this.delete(key)) {\n        deletedCount++;\n      }\n    }\n    \n    return deletedCount;\n  }\n  \n  /**\n   * è·å–ç¼“å­˜é¡¹çš„è¯¦ç»†ä¿¡æ¯\n   */\n  inspect(key: string): CacheEntry | null {\n    return this.strategy.get(key);\n  }\n  \n  /**\n   * æ›´æ–°é…ç½®\n   */\n  updateConfig(newConfig: Partial<CacheConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    \n    if (!this.config.enabled && this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = undefined;\n    } else if (this.config.enabled && !this.cleanupInterval) {\n      this.startCleanupScheduler();\n    }\n  }\n  \n  /**\n   * é”€æ¯ç¼“å­˜ç®¡ç†å™¨\n   */\n  destroy(): void {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n    }\n    this.clear();\n  }\n  \n  private createStrategy(strategyType: CacheStrategy): ICacheStrategy {\n    switch (strategyType) {\n      case 'lru':\n        return new LRUCacheStrategy(this.config.maxSize, this.config.ttl);\n      case 'lfu':\n        return new LFUCacheStrategy(this.config.maxSize, this.config.ttl);\n      case 'ttl':\n        return new TTLCacheStrategy(this.config.maxSize, this.config.ttl);\n      case 'adaptive':\n        return new AdaptiveCacheStrategy(this.config.maxSize, this.config.ttl);\n      default:\n        return new LRUCacheStrategy(this.config.maxSize, this.config.ttl);\n    }\n  }\n  \n  private startCleanupScheduler(): void {\n    const checkPeriod = (this.config.memory?.checkPeriod || 600) * 1000;\n    \n    this.cleanupInterval = setInterval(() => {\n      this.cleanup();\n    }, checkPeriod);\n  }\n  \n  private updateStats(): void {\n    const currentSize = this.strategy.size();\n    let totalSize = 0;\n    let oldestEntry: Date | undefined;\n    let newestEntry: Date | undefined;\n    let mostAccessedKey: string | undefined;\n    let maxAccessCount = 0;\n    \n    for (const key of this.strategy.keys()) {\n      const entry = this.strategy.get(key);\n      if (entry) {\n        totalSize += entry.size || 0;\n        \n        if (!oldestEntry || entry.createdAt < oldestEntry) {\n          oldestEntry = entry.createdAt;\n        }\n        \n        if (!newestEntry || entry.createdAt > newestEntry) {\n          newestEntry = entry.createdAt;\n        }\n        \n        if (entry.accessCount > maxAccessCount) {\n          maxAccessCount = entry.accessCount;\n          mostAccessedKey = key;\n        }\n      }\n    }\n    \n    this.stats.totalEntries = currentSize;\n    this.stats.totalSize = totalSize;\n    this.stats.oldestEntry = oldestEntry;\n    this.stats.newestEntry = newestEntry;\n    this.stats.mostAccessedKey = mostAccessedKey;\n  }\n  \n  private updateHitRate(isHit: boolean): void {\n    // ä½¿ç”¨ç§»åŠ¨å¹³å‡è®¡ç®—å‘½ä¸­ç‡\n    const alpha = 0.1; // å¹³æ»‘å› å­\n    const currentHit = isHit ? 1 : 0;\n    this.stats.hitRate = alpha * currentHit + (1 - alpha) * this.stats.hitRate;\n  }\n  \n  private resetStats(): void {\n    this.stats = {\n      totalEntries: 0,\n      totalSize: 0,\n      hitRate: 0,\n      evictionCount: 0\n    };\n  }\n}\n\n/**\n * ç¼“å­˜ç®¡ç†å™¨å·¥å‚\n */\nexport class CacheManagerFactory {\n  private static instances = new Map<string, CacheManager>();\n  \n  /**\n   * åˆ›å»ºæˆ–è·å–ç¼“å­˜ç®¡ç†å™¨å®ä¾‹\n   */\n  static getInstance(name: string, config: CacheConfig): CacheManager {\n    if (!this.instances.has(name)) {\n      this.instances.set(name, new CacheManager(config));\n    }\n    return this.instances.get(name)!;\n  }\n  \n  /**\n   * é”€æ¯ç¼“å­˜ç®¡ç†å™¨å®ä¾‹\n   */\n  static destroyInstance(name: string): void {\n    const instance = this.instances.get(name);\n    if (instance) {\n      instance.destroy();\n      this.instances.delete(name);\n    }\n  }\n  \n  /**\n   * é”€æ¯æ‰€æœ‰å®ä¾‹\n   */\n  static destroyAll(): void {\n    for (const [name, instance] of this.instances) {\n      instance.destroy();\n    }\n    this.instances.clear();\n  }\n  \n  /**\n   * è·å–æ‰€æœ‰å®ä¾‹çš„ç»Ÿè®¡ä¿¡æ¯\n   */\n  static getAllStats(): Record<string, CacheStats> {\n    const stats: Record<string, CacheStats> = {};\n    \n    for (const [name, instance] of this.instances) {\n      stats[name] = instance.getStats();\n    }\n    \n    return stats;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/core/error-handler.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SystemEvent' is defined but never used.","line":3,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1118,1121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1118,1121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":66,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2650,2653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2650,2653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3273,3276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3273,3276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3644,3647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3644,3647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4238,4241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4238,4241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":200,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":210,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":210,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":250,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6649,6652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6649,6652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7082,7085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7082,7085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":272,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":272,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7216,7219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7216,7219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":277,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7357,7360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7357,7360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":392,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":392,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":400,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":400,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":408,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":408,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":669,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":669,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16583,16586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16583,16586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":786,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":786,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19375,19378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19375,19378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":789,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":789,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19522,19525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19522,19525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":19,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/core/error-handler.ts\n\nimport { ErrorContext, SystemEvent } from '../types/resource-types';\nimport { MonitoringConfig, LogLevel } from '../types/config-types';\n\n/**\n * é”™è¯¯ç±»å‹æšä¸¾\n */\nexport enum ErrorType {\n  VALIDATION_ERROR = 'VALIDATION_ERROR',\n  RESOURCE_NOT_FOUND = 'RESOURCE_NOT_FOUND',\n  FILE_ACCESS_ERROR = 'FILE_ACCESS_ERROR',\n  CACHE_ERROR = 'CACHE_ERROR',\n  STORAGE_ERROR = 'STORAGE_ERROR',\n  NETWORK_ERROR = 'NETWORK_ERROR',\n  PERMISSION_ERROR = 'PERMISSION_ERROR',\n  CONFIGURATION_ERROR = 'CONFIGURATION_ERROR',\n  SYSTEM_ERROR = 'SYSTEM_ERROR',\n  USER_ERROR = 'USER_ERROR',\n  BUSINESS_LOGIC_ERROR = 'BUSINESS_LOGIC_ERROR'\n}\n\n/**\n * é”™è¯¯ä¸¥é‡çº§åˆ«\n */\nexport enum ErrorSeverity {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical'\n}\n\n/**\n * é”™è¯¯è¯¦æƒ…æ¥å£\n */\nexport interface ErrorDetails {\n  type: ErrorType;\n  severity: ErrorSeverity;\n  message: string;\n  code?: string;\n  details?: string;\n  cause?: Error;\n  context?: ErrorContext;\n  timestamp: Date;\n  stackTrace?: string;\n  suggestion?: string;\n  documentation?: string;\n  retryable?: boolean;\n  metadata?: Record<string, any>;\n}\n\n/**\n * é”™è¯¯å¤„ç†ç­–ç•¥æ¥å£\n */\ninterface IErrorStrategy {\n  canHandle(error: ErrorDetails): boolean;\n  handle(error: ErrorDetails): Promise<void>;\n}\n\n/**\n * æ—¥å¿—é”™è¯¯å¤„ç†ç­–ç•¥\n */\nclass LoggingErrorStrategy implements IErrorStrategy {\n  constructor(private config: MonitoringConfig) {}\n\n  canHandle(error: ErrorDetails): boolean {\n    return this.config.logging.enabled;\n  }\n\n  async handle(error: ErrorDetails): Promise<void> {\n    const logLevel = this.getLogLevel(error.severity);\n    const logEntry = this.formatLogEntry(error);\n\n    switch (this.config.logging.destination) {\n      case 'console':\n        this.logToConsole(logLevel, logEntry);\n        break;\n      case 'file':\n        await this.logToFile(logLevel, logEntry);\n        break;\n      case 'remote':\n        await this.logToRemote(logLevel, logEntry);\n        break;\n      case 'multiple':\n        this.logToConsole(logLevel, logEntry);\n        if (this.config.logging.file) {\n          await this.logToFile(logLevel, logEntry);\n        }\n        if (this.config.logging.remote) {\n          await this.logToRemote(logLevel, logEntry);\n        }\n        break;\n    }\n  }\n\n  private getLogLevel(severity: ErrorSeverity): LogLevel {\n    switch (severity) {\n      case ErrorSeverity.LOW:\n        return 'info';\n      case ErrorSeverity.MEDIUM:\n        return 'warn';\n      case ErrorSeverity.HIGH:\n        return 'error';\n      case ErrorSeverity.CRITICAL:\n        return 'fatal';\n      default:\n        return 'error';\n    }\n  }\n\n  private formatLogEntry(error: ErrorDetails): any {\n    const entry = {\n      timestamp: error.timestamp.toISOString(),\n      level: this.getLogLevel(error.severity),\n      type: error.type,\n      severity: error.severity,\n      message: error.message,\n      code: error.code,\n      details: error.details,\n      context: error.context,\n      metadata: error.metadata\n    };\n\n    if (this.config.logging.format === 'json') {\n      return JSON.stringify(entry);\n    } else {\n      return `[${entry.timestamp}] ${entry.level.toUpperCase()}: ${entry.message} (${entry.type}${entry.code ? `:${entry.code}` : ''})`;\n    }\n  }\n\n  private logToConsole(level: LogLevel, entry: any): void {\n    switch (level) {\n      case 'debug':\n        console.debug(entry);\n        break;\n      case 'info':\n        console.info(entry);\n        break;\n      case 'warn':\n        console.warn(entry);\n        break;\n      case 'error':\n      case 'fatal':\n        console.error(entry);\n        break;\n    }\n  }\n\n  private async logToFile(level: LogLevel, entry: any): Promise<void> {\n    if (!this.config.logging.file) return;\n\n    try {\n      const fs = await import('fs/promises');\n      const path = await import('path');\n      \n      const logDir = path.dirname(this.config.logging.file.path);\n      await fs.mkdir(logDir, { recursive: true });\n      \n      const logLine = typeof entry === 'string' ? entry : JSON.stringify(entry);\n      await fs.appendFile(this.config.logging.file.path, logLine + '\\n');\n    } catch (error) {\n      console.error('Failed to write to log file:', error);\n    }\n  }\n\n  private async logToRemote(level: LogLevel, entry: any): Promise<void> {\n    if (!this.config.logging.remote) return;\n\n    try {\n      const response = await fetch(this.config.logging.remote.endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(this.config.logging.remote.apiKey && {\n            'Authorization': `Bearer ${this.config.logging.remote.apiKey}`\n          })\n        },\n        body: JSON.stringify({\n          timestamp: new Date().toISOString(),\n          level,\n          entry: typeof entry === 'string' ? { message: entry } : entry\n        })\n      });\n\n      if (!response.ok) {\n        console.error('Failed to send log to remote endpoint:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Failed to send log to remote endpoint:', error);\n    }\n  }\n}\n\n/**\n * ç›‘æ§é”™è¯¯å¤„ç†ç­–ç•¥\n */\nclass MonitoringErrorStrategy implements IErrorStrategy {\n  constructor(private config: MonitoringConfig) {}\n\n  canHandle(error: ErrorDetails): boolean {\n    return this.config.errorTracking.enabled;\n  }\n\n  async handle(error: ErrorDetails): Promise<void> {\n    if (this.shouldSample(error)) {\n      await this.sendToMonitoring(error);\n    }\n  }\n\n  private shouldSample(error: ErrorDetails): boolean {\n    return Math.random() < this.config.errorTracking.sampleRate;\n  }\n\n  private async sendToMonitoring(error: ErrorDetails): Promise<void> {\n    try {\n      const payload = {\n        timestamp: error.timestamp.toISOString(),\n        environment: this.config.errorTracking.environment,\n        release: this.config.errorTracking.release,\n        error: {\n          type: error.type,\n          message: error.message,\n          code: error.code,\n          severity: error.severity,\n          stackTrace: error.stackTrace,\n          context: error.context,\n          metadata: error.metadata\n        }\n      };\n\n      switch (this.config.errorTracking.service) {\n        case 'sentry':\n          await this.sendToSentry(payload);\n          break;\n        case 'bugsnag':\n          await this.sendToBugsnag(payload);\n          break;\n        case 'rollbar':\n          await this.sendToRollbar(payload);\n          break;\n        case 'custom':\n          await this.sendToCustomEndpoint(payload);\n          break;\n      }\n    } catch (monitoringError) {\n      console.error('Failed to send error to monitoring service:', monitoringError);\n    }\n  }\n\n  private async sendToSentry(payload: any): Promise<void> {\n    if (!this.config.errorTracking.dsn) return;\n\n    // ç®€åŒ–çš„Sentryé›†æˆ\n    const response = await fetch(this.config.errorTracking.dsn, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`Sentry API error: ${response.statusText}`);\n    }\n  }\n\n  private async sendToBugsnag(payload: any): Promise<void> {\n    // Bugsnagé›†æˆå®ç°\n    console.log('Sending to Bugsnag:', payload);\n  }\n\n  private async sendToRollbar(payload: any): Promise<void> {\n    // Rollbaré›†æˆå®ç°\n    console.log('Sending to Rollbar:', payload);\n  }\n\n  private async sendToCustomEndpoint(payload: any): Promise<void> {\n    // è‡ªå®šä¹‰ç›‘æ§ç«¯ç‚¹\n    console.log('Sending to custom monitoring:', payload);\n  }\n}\n\n/**\n * é‡è¯•é”™è¯¯å¤„ç†ç­–ç•¥\n */\nclass RetryErrorStrategy implements IErrorStrategy {\n  private retryCount = new Map<string, number>();\n  private readonly maxRetries = 3;\n  private readonly retryDelay = 1000; // 1ç§’\n\n  canHandle(error: ErrorDetails): boolean {\n    return error.retryable === true && this.getRetryCount(error) < this.maxRetries;\n  }\n\n  async handle(error: ErrorDetails): Promise<void> {\n    const retryKey = this.getRetryKey(error);\n    const currentRetries = this.getRetryCount(error);\n    \n    this.retryCount.set(retryKey, currentRetries + 1);\n\n    // æŒ‡æ•°é€€é¿\n    const delay = this.retryDelay * Math.pow(2, currentRetries);\n    \n    setTimeout(() => {\n      // è¿™é‡Œåº”è¯¥é‡æ–°æ‰§è¡Œå¤±è´¥çš„æ“ä½œ\n      console.log(`Retrying operation after ${delay}ms (attempt ${currentRetries + 1}/${this.maxRetries})`);\n    }, delay);\n  }\n\n  private getRetryKey(error: ErrorDetails): string {\n    return `${error.type}:${error.context?.operation || 'unknown'}:${error.context?.resourceId || 'unknown'}`;\n  }\n\n  private getRetryCount(error: ErrorDetails): number {\n    const key = this.getRetryKey(error);\n    return this.retryCount.get(key) || 0;\n  }\n}\n\n/**\n * ç”¨æˆ·é€šçŸ¥é”™è¯¯å¤„ç†ç­–ç•¥\n */\nclass NotificationErrorStrategy implements IErrorStrategy {\n  canHandle(error: ErrorDetails): boolean {\n    return error.severity === ErrorSeverity.HIGH || error.severity === ErrorSeverity.CRITICAL;\n  }\n\n  async handle(error: ErrorDetails): Promise<void> {\n    // è¿™é‡Œå¯ä»¥é›†æˆå„ç§é€šçŸ¥æœåŠ¡\n    await this.sendNotification(error);\n  }\n\n  private async sendNotification(error: ErrorDetails): Promise<void> {\n    const message = this.formatNotificationMessage(error);\n    \n    // ç¤ºä¾‹ï¼šå‘é€åˆ°Slackã€é‚®ä»¶ã€çŸ­ä¿¡ç­‰\n    console.log('CRITICAL ERROR NOTIFICATION:', message);\n    \n    // å®é™…å®ç°ä¸­å¯ä»¥é›†æˆ:\n    // - Slack Webhook\n    // - SendGridé‚®ä»¶\n    // - TwilioçŸ­ä¿¡\n    // - ä¼ä¸šå¾®ä¿¡\n    // - é’‰é’‰ç­‰\n  }\n\n  private formatNotificationMessage(error: ErrorDetails): string {\n    return `\nğŸš¨ PDFèµ„æºç³»ç»Ÿä¸¥é‡é”™è¯¯\n\nç±»å‹: ${error.type}\nä¸¥é‡çº§åˆ«: ${error.severity}\næ¶ˆæ¯: ${error.message}\næ—¶é—´: ${error.timestamp.toISOString()}\n${error.context?.operation ? `æ“ä½œ: ${error.context.operation}` : ''}\n${error.context?.resourceId ? `èµ„æºID: ${error.context.resourceId}` : ''}\n${error.suggestion ? `å»ºè®®: ${error.suggestion}` : ''}\n    `.trim();\n  }\n}\n\n/**\n * é”™è¯¯æ¢å¤ç­–ç•¥\n */\nclass RecoveryErrorStrategy implements IErrorStrategy {\n  canHandle(error: ErrorDetails): boolean {\n    return [\n      ErrorType.CACHE_ERROR,\n      ErrorType.STORAGE_ERROR,\n      ErrorType.NETWORK_ERROR\n    ].includes(error.type);\n  }\n\n  async handle(error: ErrorDetails): Promise<void> {\n    try {\n      switch (error.type) {\n        case ErrorType.CACHE_ERROR:\n          await this.recoverFromCacheError(error);\n          break;\n        case ErrorType.STORAGE_ERROR:\n          await this.recoverFromStorageError(error);\n          break;\n        case ErrorType.NETWORK_ERROR:\n          await this.recoverFromNetworkError(error);\n          break;\n      }\n    } catch (recoveryError) {\n      console.error('Error recovery failed:', recoveryError);\n    }\n  }\n\n  private async recoverFromCacheError(error: ErrorDetails): Promise<void> {\n    console.log('Attempting cache error recovery...');\n    // å®ç°ç¼“å­˜æ¢å¤é€»è¾‘ï¼š\n    // - æ¸…é™¤æŸåçš„ç¼“å­˜\n    // - åˆ‡æ¢åˆ°å¤‡ç”¨ç¼“å­˜\n    // - ä¸´æ—¶ç¦ç”¨ç¼“å­˜\n  }\n\n  private async recoverFromStorageError(error: ErrorDetails): Promise<void> {\n    console.log('Attempting storage error recovery...');\n    // å®ç°å­˜å‚¨æ¢å¤é€»è¾‘ï¼š\n    // - æ£€æŸ¥ç£ç›˜ç©ºé—´\n    // - åˆ‡æ¢åˆ°å¤‡ç”¨å­˜å‚¨\n    // - æ¸…ç†ä¸´æ—¶æ–‡ä»¶\n  }\n\n  private async recoverFromNetworkError(error: ErrorDetails): Promise<void> {\n    console.log('Attempting network error recovery...');\n    // å®ç°ç½‘ç»œæ¢å¤é€»è¾‘ï¼š\n    // - åˆ‡æ¢åˆ°å¤‡ç”¨ç«¯ç‚¹\n    // - å¯ç”¨ç¦»çº¿æ¨¡å¼\n    // - é‡æ–°å»ºç«‹è¿æ¥\n  }\n}\n\n/**\n * ä¸»é”™è¯¯å¤„ç†å™¨\n */\nexport class ErrorHandler {\n  private strategies: IErrorStrategy[] = [];\n  private config: MonitoringConfig;\n  private eventListeners: Map<ErrorType, Array<(error: ErrorDetails) => void>> = new Map();\n\n  constructor(config: MonitoringConfig) {\n    this.config = config;\n    this.initializeStrategies();\n  }\n\n  /**\n   * å¤„ç†é”™è¯¯\n   */\n  async handleError(\n    error: Error | ErrorDetails,\n    context?: Partial<ErrorContext>\n  ): Promise<void> {\n    const errorDetails = this.normalizeError(error, context);\n    \n    // è§¦å‘äº‹ä»¶ç›‘å¬å™¨\n    this.triggerEventListeners(errorDetails);\n\n    // æ‰§è¡Œæ‰€æœ‰é€‚ç”¨çš„é”™è¯¯å¤„ç†ç­–ç•¥\n    const applicableStrategies = this.strategies.filter(strategy => \n      strategy.canHandle(errorDetails)\n    );\n\n    await Promise.allSettled(\n      applicableStrategies.map(strategy => strategy.handle(errorDetails))\n    );\n  }\n\n  /**\n   * è®°å½•é”™è¯¯æ—¥å¿—\n   */\n  logError(\n    message: string,\n    context?: Partial<ErrorContext>,\n    severity: ErrorSeverity = ErrorSeverity.MEDIUM\n  ): void {\n    const errorDetails: ErrorDetails = {\n      type: ErrorType.SYSTEM_ERROR,\n      severity,\n      message,\n      context: this.buildContext(context),\n      timestamp: new Date(),\n      retryable: false\n    };\n\n    this.handleError(errorDetails);\n  }\n\n  /**\n   * è®°å½•è­¦å‘Š\n   */\n  logWarning(\n    message: string,\n    context?: Partial<ErrorContext>\n  ): void {\n    this.logError(message, context, ErrorSeverity.LOW);\n  }\n\n  /**\n   * è®°å½•ä¿¡æ¯\n   */\n  logInfo(\n    message: string,\n    context?: Partial<ErrorContext>\n  ): void {\n    const errorDetails: ErrorDetails = {\n      type: ErrorType.SYSTEM_ERROR,\n      severity: ErrorSeverity.LOW,\n      message,\n      context: this.buildContext(context),\n      timestamp: new Date(),\n      retryable: false\n    };\n\n    // åªä½¿ç”¨æ—¥å¿—ç­–ç•¥\n    const loggingStrategy = this.strategies.find(s => s instanceof LoggingErrorStrategy);\n    if (loggingStrategy) {\n      loggingStrategy.handle(errorDetails);\n    }\n  }\n\n  /**\n   * åˆ›å»ºä¸šåŠ¡å¼‚å¸¸\n   */\n  createBusinessError(\n    message: string,\n    code?: string,\n    context?: Partial<ErrorContext>\n  ): ErrorDetails {\n    return {\n      type: ErrorType.BUSINESS_LOGIC_ERROR,\n      severity: ErrorSeverity.MEDIUM,\n      message,\n      code,\n      context: this.buildContext(context),\n      timestamp: new Date(),\n      retryable: false\n    };\n  }\n\n  /**\n   * åˆ›å»ºéªŒè¯å¼‚å¸¸\n   */\n  createValidationError(\n    message: string,\n    field?: string,\n    context?: Partial<ErrorContext>\n  ): ErrorDetails {\n    return {\n      type: ErrorType.VALIDATION_ERROR,\n      severity: ErrorSeverity.LOW,\n      message,\n      details: field ? `éªŒè¯å¤±è´¥å­—æ®µ: ${field}` : undefined,\n      context: this.buildContext(context),\n      timestamp: new Date(),\n      retryable: false\n    };\n  }\n\n  /**\n   * æ·»åŠ é”™è¯¯äº‹ä»¶ç›‘å¬å™¨\n   */\n  addEventListener(\n    errorType: ErrorType,\n    listener: (error: ErrorDetails) => void\n  ): void {\n    if (!this.eventListeners.has(errorType)) {\n      this.eventListeners.set(errorType, []);\n    }\n    this.eventListeners.get(errorType)!.push(listener);\n  }\n\n  /**\n   * ç§»é™¤é”™è¯¯äº‹ä»¶ç›‘å¬å™¨\n   */\n  removeEventListener(\n    errorType: ErrorType,\n    listener: (error: ErrorDetails) => void\n  ): void {\n    const listeners = this.eventListeners.get(errorType);\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n\n  /**\n   * æ·»åŠ è‡ªå®šä¹‰é”™è¯¯å¤„ç†ç­–ç•¥\n   */\n  addStrategy(strategy: IErrorStrategy): void {\n    this.strategies.push(strategy);\n  }\n\n  /**\n   * ç§»é™¤é”™è¯¯å¤„ç†ç­–ç•¥\n   */\n  removeStrategy(strategy: IErrorStrategy): void {\n    const index = this.strategies.indexOf(strategy);\n    if (index > -1) {\n      this.strategies.splice(index, 1);\n    }\n  }\n\n  /**\n   * è·å–é”™è¯¯ç»Ÿè®¡ä¿¡æ¯\n   */\n  getErrorStats(): {\n    totalErrors: number;\n    errorsByType: Record<ErrorType, number>;\n    errorsBySeverity: Record<ErrorSeverity, number>;\n    recentErrors: ErrorDetails[];\n  } {\n    // è¿™é‡Œåº”è¯¥ä»æŒä¹…åŒ–å­˜å‚¨ä¸­è·å–ç»Ÿè®¡ä¿¡æ¯\n    // ä¸ºç®€åŒ–ç¤ºä¾‹ï¼Œè¿”å›æ¨¡æ‹Ÿæ•°æ®\n    return {\n      totalErrors: 0,\n      errorsByType: {} as Record<ErrorType, number>,\n      errorsBySeverity: {} as Record<ErrorSeverity, number>,\n      recentErrors: []\n    };\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   */\n  updateConfig(newConfig: Partial<MonitoringConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    this.reinitializeStrategies();\n  }\n\n  /**\n   * æ¸…ç†èµ„æº\n   */\n  destroy(): void {\n    this.strategies = [];\n    this.eventListeners.clear();\n  }\n\n  private initializeStrategies(): void {\n    this.strategies = [\n      new LoggingErrorStrategy(this.config),\n      new MonitoringErrorStrategy(this.config),\n      new RetryErrorStrategy(),\n      new NotificationErrorStrategy(),\n      new RecoveryErrorStrategy()\n    ];\n  }\n\n  private reinitializeStrategies(): void {\n    this.strategies = [];\n    this.initializeStrategies();\n  }\n\n  private normalizeError(\n    error: Error | ErrorDetails,\n    context?: Partial<ErrorContext>\n  ): ErrorDetails {\n    if (this.isErrorDetails(error)) {\n      // åˆå¹¶ç°æœ‰ErrorDetailsçš„ä¸Šä¸‹æ–‡å’Œæ–°ä¸Šä¸‹æ–‡\n      const mergedContext = this.buildContext({\n        ...error.context,\n        ...context\n      });\n      \n      return {\n        ...error,\n        context: mergedContext\n      };\n    }\n\n    // å°†æ ‡å‡†Errorè½¬æ¢ä¸ºErrorDetails\n    return {\n      type: this.inferErrorType(error),\n      severity: this.inferErrorSeverity(error),\n      message: error.message,\n      cause: error,\n      context: this.buildContext(context),\n      timestamp: new Date(),\n      stackTrace: error.stack,\n      retryable: this.isRetryableError(error)\n    };\n  }\n\n  private isErrorDetails(obj: any): obj is ErrorDetails {\n    return obj && typeof obj === 'object' && 'type' in obj && 'severity' in obj;\n  }\n\n  private inferErrorType(error: Error): ErrorType {\n    const message = error.message.toLowerCase();\n    \n    if (message.includes('not found')) {\n      return ErrorType.RESOURCE_NOT_FOUND;\n    }\n    if (message.includes('permission') || message.includes('unauthorized')) {\n      return ErrorType.PERMISSION_ERROR;\n    }\n    if (message.includes('network') || message.includes('fetch')) {\n      return ErrorType.NETWORK_ERROR;\n    }\n    if (message.includes('cache')) {\n      return ErrorType.CACHE_ERROR;\n    }\n    if (message.includes('storage') || message.includes('file')) {\n      return ErrorType.STORAGE_ERROR;\n    }\n    if (message.includes('validation')) {\n      return ErrorType.VALIDATION_ERROR;\n    }\n    \n    return ErrorType.SYSTEM_ERROR;\n  }\n\n  private inferErrorSeverity(error: Error): ErrorSeverity {\n    const message = error.message.toLowerCase();\n    \n    if (message.includes('critical') || message.includes('fatal')) {\n      return ErrorSeverity.CRITICAL;\n    }\n    if (message.includes('warning') || message.includes('deprecated')) {\n      return ErrorSeverity.LOW;\n    }\n    \n    return ErrorSeverity.MEDIUM;\n  }\n\n  private isRetryableError(error: Error): boolean {\n    const retryablePatterns = [\n      /network/i,\n      /timeout/i,\n      /connection/i,\n      /temporary/i,\n      /rate.?limit/i\n    ];\n    \n    return retryablePatterns.some(pattern => pattern.test(error.message));\n  }\n\n  private buildContext(context?: Partial<ErrorContext>): ErrorContext {\n    return {\n      operation: 'unknown',\n      timestamp: new Date(),\n      ...context\n    };\n  }\n\n  private triggerEventListeners(error: ErrorDetails): void {\n    const listeners = this.eventListeners.get(error.type);\n    if (listeners) {\n      listeners.forEach(listener => {\n        try {\n          listener(error);\n        } catch (listenerError) {\n          console.error('Error in event listener:', listenerError);\n        }\n      });\n    }\n  }\n}\n\n/**\n * é”™è¯¯å¤„ç†å™¨å·¥å‚\n */\nexport class ErrorHandlerFactory {\n  private static instance: ErrorHandler | null = null;\n\n  /**\n   * è·å–å•ä¾‹å®ä¾‹\n   */\n  static getInstance(config: MonitoringConfig): ErrorHandler {\n    if (!this.instance) {\n      this.instance = new ErrorHandler(config);\n    }\n    return this.instance;\n  }\n\n  /**\n   * åˆ›å»ºæ–°å®ä¾‹\n   */\n  static createInstance(config: MonitoringConfig): ErrorHandler {\n    return new ErrorHandler(config);\n  }\n\n  /**\n   * é”€æ¯å•ä¾‹å®ä¾‹\n   */\n  static destroyInstance(): void {\n    if (this.instance) {\n      this.instance.destroy();\n      this.instance = null;\n    }\n  }\n}\n\n/**\n * å…¨å±€é”™è¯¯å¤„ç†è£…é¥°å™¨\n */\nexport function handleErrors(\n  errorHandler: ErrorHandler,\n  context?: Partial<ErrorContext>\n) {\n  return function (target: any, propertyName: string, descriptor: PropertyDescriptor) {\n    const method = descriptor.value;\n\n    descriptor.value = async function (...args: any[]) {\n      try {\n        return await method.apply(this, args);\n      } catch (error) {\n        await errorHandler.handleError(error as Error, {\n          ...context,\n          operation: `${target.constructor.name}.${propertyName}`\n        });\n        throw error;\n      }\n    };\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/core/resource-manager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorType' is defined but never used.","line":17,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorSeverity' is defined but never used.","line":17,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getPDFResourceById' is assigned a value but never used.","line":30,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":30,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getPDFResourcesByCategory' is assigned a value but never used.","line":31,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'category' is defined but never used.","line":31,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[940,943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[940,943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getFeaturedResources' is assigned a value but never used.","line":32,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":607,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":607,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16901,16904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16901,16904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":643,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":643,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17838,17841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17838,17841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":689,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":689,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18822,18825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18822,18825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":748,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":748,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20269,20272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20269,20272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":767,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":767,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20669,20672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20669,20672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":768,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":768,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20703,20706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20703,20706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":835,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":835,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":869,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":869,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23843,23846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23843,23846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":873,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":873,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23976,23979],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23976,23979],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":927,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":927,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25233,25236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25233,25236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":991,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":991,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26712,26715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26712,26715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":19,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/core/resource-manager.ts\n\nimport { \n  PDFResource, \n  ResourceCategory, \n  SupportedLanguage,\n  SearchOptions,\n  ResourceStats,\n  ValidationResult,\n  BatchOperationResult,\n  SearchResult,\n  PaginatedSearchResult\n} from '../types/resource-types';\nimport { PDFResourceConfig } from '../types/config-types';\nimport { CacheManager } from './cache-manager';\nimport { ResourceValidator } from './resource-validator';\nimport { ErrorHandler, ErrorType, ErrorSeverity } from './error-handler';\n// import { \n//   PDF_RESOURCES, \n//   LEGACY_ID_MAPPING, \n//   getPDFResourceById, \n//   getPDFResourcesByCategory,\n//   getFeaturedResources,\n//   getResourceStats\n// } from '../../../config/resources/pdf-resources.config';\n\n// ä¸´æ—¶å­˜æ ¹æ•°æ®ï¼Œæ›¿ä»£ç¼ºå¤±çš„å¯¼å…¥\nconst PDF_RESOURCES: PDFResource[] = [];\nconst LEGACY_ID_MAPPING: Record<string, string> = {};\nconst getPDFResourceById = (id: string) => null;\nconst getPDFResourcesByCategory = (category: any) => [];\nconst getFeaturedResources = () => [];\nconst getResourceStats = () => ({\n  totalCount: 0,\n  totalSize: 0,\n  averageQuality: 0,\n  totalDownloads: 0,\n  totalViews: 0,\n  lastUpdated: Date.now(),\n  byCategory: {},\n  byLanguage: {},\n  byStatus: {},\n  topResources: {\n    mostDownloaded: [],\n    highestRated: [],\n    mostRecent: [],\n    trending: []\n  }\n});\n\n/**\n * èµ„æºé€‚é…å™¨æ¥å£\n */\ninterface IResourceAdapter {\n  getResource(id: string): Promise<PDFResource | null>;\n  getResources(options?: ResourceQueryOptions): Promise<PDFResource[]>;\n  createResource(resource: PDFResource): Promise<PDFResource>;\n  updateResource(id: string, updates: Partial<PDFResource>): Promise<PDFResource>;\n  deleteResource(id: string): Promise<boolean>;\n  searchResources(query: string, options?: SearchOptions): Promise<SearchResult[]>;\n}\n\n/**\n * èµ„æºæŸ¥è¯¢é€‰é¡¹\n */\ninterface ResourceQueryOptions {\n  category?: ResourceCategory;\n  language?: SupportedLanguage;\n  tags?: string[];\n  featured?: boolean;\n  status?: 'active' | 'draft' | 'archived';\n  limit?: number;\n  offset?: number;\n  sortBy?: 'id' | 'title' | 'createdAt' | 'updatedAt' | 'quality' | 'downloads';\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * æœ¬åœ°èµ„æºé€‚é…å™¨å®ç°\n */\nclass LocalResourceAdapter implements IResourceAdapter {\n  private resources: PDFResource[] = [];\n  \n  constructor() {\n    this.resources = [...PDF_RESOURCES];\n  }\n\n  async getResource(id: string): Promise<PDFResource | null> {\n    // é¦–å…ˆå°è¯•ç›´æ¥æŸ¥æ‰¾\n    let resource = this.resources.find(r => r.id === id);\n    \n    // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°è¯•Legacyæ˜ å°„\n    if (!resource) {\n      const mappedId = LEGACY_ID_MAPPING[id as keyof typeof LEGACY_ID_MAPPING];\n      if (mappedId) {\n        resource = this.resources.find(r => r.id === mappedId);\n      }\n    }\n    \n    return resource || null;\n  }\n\n  async getResources(options: ResourceQueryOptions = {}): Promise<PDFResource[]> {\n    let filtered = this.resources.filter(r => r.status === (options.status || 'active'));\n\n    // åº”ç”¨è¿‡æ»¤æ¡ä»¶\n    if (options.category) {\n      filtered = filtered.filter(r => r.category === options.category);\n    }\n    \n    if (options.language) {\n      filtered = filtered.filter(r => r.language === options.language);\n    }\n    \n    if (options.tags && options.tags.length > 0) {\n      filtered = filtered.filter(r => \n        options.tags!.some(tag => r.tags.includes(tag))\n      );\n    }\n    \n    if (options.featured !== undefined) {\n      filtered = filtered.filter(r => r.metadata.featured === options.featured);\n    }\n\n    // æ’åº\n    if (options.sortBy) {\n      filtered.sort((a, b) => {\n        const getValue = (resource: PDFResource) => {\n          switch (options.sortBy) {\n            case 'id':\n              return resource.id;\n            case 'title':\n              return resource.metadata.title.zh || resource.metadata.title.en;\n            case 'createdAt':\n              return resource.createdAt.getTime();\n            case 'updatedAt':\n              return resource.updatedAt.getTime();\n            case 'quality':\n              return resource.metadata.quality.overall;\n            case 'downloads':\n              return resource.analytics.downloadCount;\n            default:\n              return resource.id;\n          }\n        };\n\n        const aValue = getValue(a);\n        const bValue = getValue(b);\n        \n        if (typeof aValue === 'string' && typeof bValue === 'string') {\n          return options.sortOrder === 'desc' \n            ? bValue.localeCompare(aValue)\n            : aValue.localeCompare(bValue);\n        }\n        \n        if (typeof aValue === 'number' && typeof bValue === 'number') {\n          return options.sortOrder === 'desc' \n            ? bValue - aValue\n            : aValue - bValue;\n        }\n        \n        return 0;\n      });\n    }\n\n    // åˆ†é¡µ\n    if (options.offset !== undefined || options.limit !== undefined) {\n      const start = options.offset || 0;\n      const end = options.limit ? start + options.limit : undefined;\n      filtered = filtered.slice(start, end);\n    }\n\n    return filtered;\n  }\n\n  async createResource(resource: PDFResource): Promise<PDFResource> {\n    // æ£€æŸ¥IDå”¯ä¸€æ€§\n    const existing = await this.getResource(resource.id);\n    if (existing) {\n      throw new Error(`Resource with ID ${resource.id} already exists`);\n    }\n\n    const newResource = {\n      ...resource,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      analytics: {\n        downloadCount: 0,\n        viewCount: 0,\n        shareCount: 0,\n        rating: 0,\n        reviewCount: 0\n      }\n    };\n\n    this.resources.push(newResource);\n    return newResource;\n  }\n\n  async updateResource(id: string, updates: Partial<PDFResource>): Promise<PDFResource> {\n    const index = this.resources.findIndex(r => r.id === id);\n    if (index === -1) {\n      throw new Error(`Resource with ID ${id} not found`);\n    }\n\n    const updatedResource = {\n      ...this.resources[index],\n      ...updates,\n      updatedAt: new Date()\n    };\n\n    this.resources[index] = updatedResource;\n    return updatedResource;\n  }\n\n  async deleteResource(id: string): Promise<boolean> {\n    const index = this.resources.findIndex(r => r.id === id);\n    if (index === -1) {\n      return false;\n    }\n\n    this.resources.splice(index, 1);\n    return true;\n  }\n\n  async searchResources(query: string, options: SearchOptions = {}): Promise<SearchResult[]> {\n    const normalizedQuery = query.toLowerCase().trim();\n    if (!normalizedQuery) return [];\n\n    const results: SearchResult[] = [];\n    \n    for (const resource of this.resources) {\n      if (resource.status !== 'active') continue;\n      \n      const score = this.calculateSearchScore(resource, normalizedQuery, options);\n      \n      if (score > 0) {\n        results.push({\n          resource,\n          score,\n          matchedFields: this.getMatchedFields(resource, normalizedQuery),\n          highlights: this.generateHighlights(resource, normalizedQuery)\n        });\n      }\n    }\n\n    // æŒ‰åˆ†æ•°æ’åº\n    results.sort((a, b) => b.score - a.score);\n    \n    // åº”ç”¨é™åˆ¶\n    return results.slice(0, options.limit || 50);\n  }\n\n  private calculateSearchScore(\n    resource: PDFResource, \n    query: string, \n    options: SearchOptions\n  ): number {\n    let score = 0;\n    const queryWords = query.split(/\\s+/);\n\n    // æ ‡é¢˜åŒ¹é… (æƒé‡: 3.0)\n    const title = (resource.metadata.title.zh || resource.metadata.title.en || '').toLowerCase();\n    for (const word of queryWords) {\n      if (title.includes(word)) {\n        score += title === query ? 3.0 : title.startsWith(query) ? 2.5 : 2.0;\n      }\n    }\n\n    // æè¿°åŒ¹é… (æƒé‡: 2.0)\n    const description = (resource.metadata.description.zh || resource.metadata.description.en || '').toLowerCase();\n    for (const word of queryWords) {\n      if (description.includes(word)) {\n        score += 2.0;\n      }\n    }\n\n    // å…³é”®è¯åŒ¹é… (æƒé‡: 2.5)\n    for (const keyword of resource.metadata.keywords) {\n      const lowerKeyword = keyword.toLowerCase();\n      for (const word of queryWords) {\n        if (lowerKeyword.includes(word)) {\n          score += lowerKeyword === word ? 2.5 : 2.0;\n        }\n      }\n    }\n\n    // æ ‡ç­¾åŒ¹é… (æƒé‡: 2.0)\n    for (const tag of resource.tags) {\n      const lowerTag = tag.toLowerCase();\n      for (const word of queryWords) {\n        if (lowerTag.includes(word)) {\n          score += lowerTag === word ? 2.0 : 1.5;\n        }\n      }\n    }\n\n    // å†…å®¹æœç´¢åŒ¹é… (æƒé‡: 1.0)\n    if (resource.content.search.searchKeywords) {\n      for (const searchKeyword of resource.content.search.searchKeywords) {\n        const lowerSearchKeyword = searchKeyword.toLowerCase();\n        for (const word of queryWords) {\n          if (lowerSearchKeyword.includes(word)) {\n            score += 1.0;\n          }\n        }\n      }\n    }\n\n    // åº”ç”¨è¿‡æ»¤å™¨\n    if (options.category && resource.category !== options.category) {\n      score *= 0.1; // ä¸¥é‡é™ä½ä¸åŒ¹é…ç±»åˆ«çš„åˆ†æ•°\n    }\n\n    if (options.language && resource.language !== options.language) {\n      score *= 0.5; // é™ä½ä¸åŒ¹é…è¯­è¨€çš„åˆ†æ•°\n    }\n\n    if (options.tags && options.tags.length > 0) {\n      const hasMatchingTag = options.tags.some(tag => \n        resource.tags.some(resourceTag => \n          resourceTag.toLowerCase().includes(tag.toLowerCase())\n        )\n      );\n      if (!hasMatchingTag) {\n        score *= 0.3;\n      }\n    }\n\n    // è´¨é‡åŠ æƒ\n    if (options.minQuality && resource.metadata.quality.overall < options.minQuality) {\n      score *= 0.2;\n    } else {\n      score *= (resource.metadata.quality.overall / 10); // è´¨é‡åŠ æƒ\n    }\n\n    // ç²¾é€‰èµ„æºåŠ æƒ\n    if (resource.metadata.featured) {\n      score *= 1.2;\n    }\n\n    return score;\n  }\n\n  private getMatchedFields(resource: PDFResource, query: string): string[] {\n    const matched: string[] = [];\n    const queryLower = query.toLowerCase();\n\n    if ((resource.metadata.title.zh || '').toLowerCase().includes(queryLower) ||\n        (resource.metadata.title.en || '').toLowerCase().includes(queryLower)) {\n      matched.push('title');\n    }\n\n    if ((resource.metadata.description.zh || '').toLowerCase().includes(queryLower) ||\n        (resource.metadata.description.en || '').toLowerCase().includes(queryLower)) {\n      matched.push('description');\n    }\n\n    if (resource.metadata.keywords.some(k => k.toLowerCase().includes(queryLower))) {\n      matched.push('keywords');\n    }\n\n    if (resource.tags.some(t => t.toLowerCase().includes(queryLower))) {\n      matched.push('tags');\n    }\n\n    return matched;\n  }\n\n  private generateHighlights(resource: PDFResource, query: string): SearchResult['highlights'] {\n    const queryLower = query.toLowerCase();\n    const highlights: SearchResult['highlights'] = {};\n\n    // ç”Ÿæˆæ ‡é¢˜é«˜äº®\n    const title = resource.metadata.title.zh || resource.metadata.title.en || '';\n    if (title.toLowerCase().includes(queryLower)) {\n      highlights.title = this.highlightText(title, query);\n    }\n\n    // ç”Ÿæˆæè¿°é«˜äº®\n    const description = resource.metadata.description.zh || resource.metadata.description.en || '';\n    if (description.toLowerCase().includes(queryLower)) {\n      highlights.description = this.highlightText(description, query, 150);\n    }\n\n    return highlights;\n  }\n\n  private highlightText(text: string, query: string, maxLength: number = 200): string {\n    const queryLower = query.toLowerCase();\n    const textLower = text.toLowerCase();\n    const index = textLower.indexOf(queryLower);\n    \n    if (index === -1) return text;\n\n    const start = Math.max(0, index - 50);\n    let end = Math.min(text.length, index + query.length + 50);\n    \n    if (end - start > maxLength) {\n      end = start + maxLength;\n    }\n\n    let excerpt = text.substring(start, end);\n    \n    // æ·»åŠ çœç•¥å·\n    if (start > 0) excerpt = '...' + excerpt;\n    if (end < text.length) excerpt = excerpt + '...';\n\n    // é«˜äº®åŒ¹é…æ–‡æœ¬\n    const regex = new RegExp(query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi');\n    return excerpt.replace(regex, `<mark>$&</mark>`);\n  }\n}\n\n/**\n * æ ¸å¿ƒèµ„æºç®¡ç†å™¨\n */\nexport class PDFResourceManager {\n  private static instance: PDFResourceManager;\n  \n  private config: PDFResourceConfig;\n  private cache: CacheManager;\n  private validator: ResourceValidator;\n  private errorHandler: ErrorHandler;\n  private adapter: IResourceAdapter;\n  \n  private constructor(config: PDFResourceConfig) {\n    this.config = config;\n    this.cache = new CacheManager(config.cache);\n    this.validator = new ResourceValidator(config.validation);\n    this.errorHandler = new ErrorHandler(config.monitoring);\n    this.adapter = new LocalResourceAdapter();\n  }\n\n  /**\n   * è·å–å•ä¾‹å®ä¾‹\n   */\n  static getInstance(config?: PDFResourceConfig): PDFResourceManager {\n    if (!PDFResourceManager.instance) {\n      if (!config) {\n        throw new Error('Configuration required for first initialization');\n      }\n      PDFResourceManager.instance = new PDFResourceManager(config);\n    }\n    return PDFResourceManager.instance;\n  }\n\n  /**\n   * è·å–å•ä¸ªèµ„æº\n   */\n  async getResource(id: string): Promise<PDFResource | null> {\n    try {\n      // 1. æ£€æŸ¥ç¼“å­˜\n      const cacheKey = `resource:${id}`;\n      const cached = this.cache.get<PDFResource>(cacheKey);\n      if (cached) {\n        await this.recordResourceAccess(id, 'view');\n        return cached;\n      }\n\n      // 2. ä»é€‚é…å™¨è·å–\n      const resource = await this.adapter.getResource(id);\n      if (!resource) {\n        await this.errorHandler.handleError(\n          this.errorHandler.createBusinessError(\n            `Resource not found: ${id}`,\n            'RESOURCE_NOT_FOUND',\n            { operation: 'getResource', resourceId: id }\n          )\n        );\n        return null;\n      }\n\n      // 3. éªŒè¯èµ„æº\n      const validation = await this.validator.validate(resource);\n      if (!validation.isValid) {\n        await this.errorHandler.logWarning(\n          `Resource ${id} has validation issues`,\n          { operation: 'getResource', resourceId: id }\n        );\n      }\n\n      // 4. ç¼“å­˜ç»“æœ\n      this.cache.set(cacheKey, resource, this.config.cache.resourceTtl.resource);\n\n      // 5. è®°å½•è®¿é—®\n      await this.recordResourceAccess(id, 'view');\n\n      return resource;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'getResource',\n        resourceId: id\n      });\n      return null;\n    }\n  }\n\n  /**\n   * è·å–èµ„æºåˆ—è¡¨\n   */\n  async getResources(options: ResourceQueryOptions = {}): Promise<PDFResource[]> {\n    try {\n      // ç”Ÿæˆç¼“å­˜é”®\n      const cacheKey = `resources:${JSON.stringify(options)}`;\n      const cached = this.cache.get<PDFResource[]>(cacheKey);\n      if (cached) {\n        return cached;\n      }\n\n      // ä»é€‚é…å™¨è·å–\n      const resources = await this.adapter.getResources(options);\n\n      // ç¼“å­˜ç»“æœ\n      this.cache.set(cacheKey, resources, this.config.cache.resourceTtl.resource);\n\n      return resources;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'getResources'\n      });\n      return [];\n    }\n  }\n\n  /**\n   * æŒ‰ç±»åˆ«è·å–èµ„æº\n   */\n  async getResourcesByCategory(category: ResourceCategory): Promise<PDFResource[]> {\n    return this.getResources({ category, status: 'active' });\n  }\n\n  /**\n   * è·å–ç²¾é€‰èµ„æº\n   */\n  async getFeaturedResources(): Promise<PDFResource[]> {\n    return this.getResources({ featured: true, status: 'active' });\n  }\n\n  /**\n   * æœç´¢èµ„æº\n   */\n  async searchResources(\n    query: string, \n    options: SearchOptions = {}\n  ): Promise<PaginatedSearchResult> {\n    try {\n      // ç”Ÿæˆç¼“å­˜é”®\n      const cacheKey = `search:${query}:${JSON.stringify(options)}`;\n      const cached = this.cache.get<PaginatedSearchResult>(cacheKey);\n      if (cached) {\n        return cached;\n      }\n\n      // æ‰§è¡Œæœç´¢\n      const results = await this.adapter.searchResources(query, options);\n      \n      // åˆ†é¡µå¤„ç†\n      const page = Math.floor((options.offset || 0) / (options.limit || 20)) + 1;\n      const pageSize = options.limit || 20;\n      const total = results.length;\n      \n      const paginatedResults = results.slice(\n        options.offset || 0, \n        (options.offset || 0) + pageSize\n      );\n\n      const searchResult: PaginatedSearchResult = {\n        results: paginatedResults,\n        total,\n        page,\n        pageSize,\n        hasNext: (options.offset || 0) + pageSize < total,\n        hasPrevious: (options.offset || 0) > 0,\n        facets: await this.generateSearchFacets(results)\n      };\n\n      // ç¼“å­˜æœç´¢ç»“æœ\n      this.cache.set(cacheKey, searchResult, this.config.cache.resourceTtl.search);\n\n      return searchResult;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'searchResources',\n        metadata: { query, options }\n      });\n      \n      return {\n        results: [],\n        total: 0,\n        page: 1,\n        pageSize: options.limit || 20,\n        hasNext: false,\n        hasPrevious: false\n      };\n    }\n  }\n\n  /**\n   * åˆ›å»ºèµ„æº\n   */\n  async createResource(resource: PDFResource): Promise<PDFResource> {\n    try {\n      // éªŒè¯èµ„æº\n      const validation = await this.validator.validate(resource);\n      if (!validation.isValid) {\n        throw new Error(`Validation failed: ${validation.errors.map((e: any) => e.message).join(', ')}`);\n      }\n\n      // åˆ›å»ºèµ„æº\n      const created = await this.adapter.createResource(resource);\n\n      // æ¸…é™¤ç›¸å…³ç¼“å­˜\n      await this.invalidateResourceCaches();\n\n      return created;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'createResource',\n        resourceId: resource.id\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * æ›´æ–°èµ„æº\n   */\n  async updateResource(id: string, updates: Partial<PDFResource>): Promise<PDFResource> {\n    try {\n      // è·å–ç°æœ‰èµ„æº\n      const existing = await this.adapter.getResource(id);\n      if (!existing) {\n        throw new Error(`Resource not found: ${id}`);\n      }\n\n      // åˆå¹¶æ›´æ–°\n      const updated = { ...existing, ...updates };\n\n      // éªŒè¯æ›´æ–°åçš„èµ„æº\n      const validation = await this.validator.validate(updated);\n      if (!validation.isValid) {\n        throw new Error(`Validation failed: ${validation.errors.map((e: any) => e.message).join(', ')}`);\n      }\n\n      // æ‰§è¡Œæ›´æ–°\n      const result = await this.adapter.updateResource(id, updates);\n\n      // æ¸…é™¤ç›¸å…³ç¼“å­˜\n      await this.invalidateResourceCaches(id);\n\n      return result;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'updateResource',\n        resourceId: id\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * åˆ é™¤èµ„æº\n   */\n  async deleteResource(id: string): Promise<boolean> {\n    try {\n      const result = await this.adapter.deleteResource(id);\n      \n      if (result) {\n        // æ¸…é™¤ç›¸å…³ç¼“å­˜\n        await this.invalidateResourceCaches(id);\n      }\n\n      return result;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'deleteResource',\n        resourceId: id\n      });\n      return false;\n    }\n  }\n\n  /**\n   * æ‰¹é‡æ“ä½œ\n   */\n  async batchOperation(\n    operation: 'create' | 'update' | 'delete',\n    resources: Array<{ id?: string; data?: any }>\n  ): Promise<BatchOperationResult> {\n    const result: BatchOperationResult = {\n      totalCount: resources.length,\n      successCount: 0,\n      errorCount: 0,\n      errors: [],\n      warnings: [],\n      duration: 0\n    };\n\n    const startTime = Date.now();\n\n    for (const item of resources) {\n      try {\n        switch (operation) {\n          case 'create':\n            if (item.data) {\n              await this.createResource(item.data);\n              result.successCount++;\n            }\n            break;\n          case 'update':\n            if (item.id && item.data) {\n              await this.updateResource(item.id, item.data);\n              result.successCount++;\n            }\n            break;\n          case 'delete':\n            if (item.id) {\n              await this.deleteResource(item.id);\n              result.successCount++;\n            }\n            break;\n        }\n      } catch (error) {\n        result.errorCount++;\n        result.errors.push({\n          resourceId: item.id || 'unknown',\n          error: (error as Error).message\n        });\n      }\n    }\n\n    result.duration = Date.now() - startTime;\n    return result;\n  }\n\n  /**\n   * è·å–èµ„æºç»Ÿè®¡\n   */\n  async getResourceStats(): Promise<ResourceStats> {\n    try {\n      const cacheKey = 'stats:resources';\n      const cached = this.cache.get<ResourceStats>(cacheKey);\n      if (cached) {\n        return cached;\n      }\n\n      const stats = getResourceStats() as any;\n      \n      // ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯\n      this.cache.set(cacheKey, stats, this.config.cache.resourceTtl.stats);\n\n      return stats;\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'getResourceStats'\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * éªŒè¯æ‰€æœ‰èµ„æºæ˜ å°„\n   */\n  async validateAllMappings(): Promise<ValidationResult> {\n    try {\n      const errors: any[] = [];\n      const warnings: any[] = [];\n\n      // éªŒè¯Legacyæ˜ å°„\n      for (const [legacyId, modernId] of Object.entries(LEGACY_ID_MAPPING)) {\n        const resource = await this.adapter.getResource(modernId);\n        if (!resource) {\n          errors.push({\n            field: 'mapping',\n            message: `Legacy mapping ${legacyId} -> ${modernId} points to non-existent resource`,\n            severity: 'error',\n            code: 'MISSING_MAPPED_RESOURCE'\n          });\n        }\n      }\n\n      // éªŒè¯æ‰€æœ‰èµ„æº\n      const allResources = await this.adapter.getResources();\n      for (const resource of allResources) {\n        const validation = await this.validator.validate(resource);\n        errors.push(...validation.errors);\n        warnings.push(...validation.warnings);\n      }\n\n      return {\n        isValid: errors.length === 0,\n        errors,\n        warnings,\n        suggestions: [],\n        summary: {\n          totalChecks: allResources.length + Object.keys(LEGACY_ID_MAPPING).length,\n          passedChecks: allResources.length + Object.keys(LEGACY_ID_MAPPING).length - errors.length,\n          errorCount: errors.length,\n          warningCount: warnings.length\n        }\n      };\n    } catch (error) {\n      await this.errorHandler.handleError(error as Error, {\n        operation: 'validateAllMappings'\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * è®°å½•èµ„æºè®¿é—®\n   */\n  private async recordResourceAccess(\n    resourceId: string, \n    action: 'view' | 'download' | 'share'\n  ): Promise<void> {\n    try {\n      // æ›´æ–°åˆ†ææ•°æ®\n      const resource = await this.adapter.getResource(resourceId);\n      if (resource) {\n        const updates: Partial<PDFResource> = {\n          analytics: {\n            ...resource.analytics,\n            [action === 'view' ? 'viewCount' : \n             action === 'download' ? 'downloadCount' : 'shareCount']: \n             (resource.analytics[action === 'view' ? 'viewCount' : \n                                 action === 'download' ? 'downloadCount' : 'shareCount'] || 0) + 1,\n            lastAccessedAt: new Date()\n          }\n        };\n\n        await this.adapter.updateResource(resourceId, updates);\n      }\n    } catch (error) {\n      // è®°å½•è®¿é—®å¤±è´¥ä¸åº”è¯¥é˜»æ­¢ä¸»è¦æ“ä½œ\n      await this.errorHandler.logWarning(\n        `Failed to record access for resource ${resourceId}`,\n        { operation: 'recordResourceAccess', resourceId }\n      );\n    }\n  }\n\n  /**\n   * ç”Ÿæˆæœç´¢åˆ†é¢\n   */\n  private async generateSearchFacets(results: SearchResult[]): Promise<PaginatedSearchResult['facets']> {\n    const categories: Record<string, number> = {};\n    const languages: Record<string, number> = {};\n    const tags: Record<string, number> = {};\n\n    for (const result of results) {\n      const resource = result.resource;\n      \n      // ç»Ÿè®¡ç±»åˆ«\n      categories[resource.category] = (categories[resource.category] || 0) + 1;\n      \n      // ç»Ÿè®¡è¯­è¨€\n      languages[resource.language] = (languages[resource.language] || 0) + 1;\n      \n      // ç»Ÿè®¡æ ‡ç­¾\n      for (const tag of resource.tags) {\n        tags[tag] = (tags[tag] || 0) + 1;\n      }\n    }\n\n    return {\n      categories: Object.entries(categories).map(([category, count]) => ({\n        category: category as any,\n        count\n      })),\n      languages: Object.entries(languages).map(([language, count]) => ({\n        language: language as any,\n        count\n      })),\n      tags: Object.entries(tags)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 20) // é™åˆ¶æ ‡ç­¾æ•°é‡\n        .map(([tag, count]) => ({\n          tag: tag,\n          count\n        })),\n      quality: []\n    };\n  }\n\n  /**\n   * æ¸…é™¤èµ„æºç›¸å…³ç¼“å­˜\n   */\n  private async invalidateResourceCaches(resourceId?: string): Promise<void> {\n    if (resourceId) {\n      this.cache.delete(`resource:${resourceId}`);\n    }\n    \n    // æ¸…é™¤åˆ—è¡¨å’Œæœç´¢ç¼“å­˜\n    this.cache.deletePattern('resources:*');\n    this.cache.deletePattern('search:*');\n    this.cache.delete('stats:resources');\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   */\n  updateConfig(newConfig: Partial<PDFResourceConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    \n    if (newConfig.cache) {\n      this.cache.updateConfig(newConfig.cache);\n    }\n    \n    if (newConfig.validation) {\n      this.validator.updateConfig(newConfig.validation);\n    }\n    \n    if (newConfig.monitoring) {\n      this.errorHandler.updateConfig(newConfig.monitoring);\n    }\n  }\n\n  /**\n   * è·å–ç³»ç»Ÿå¥åº·çŠ¶æ€\n   */\n  async getHealthStatus(): Promise<{\n    status: 'healthy' | 'degraded' | 'unhealthy';\n    checks: Record<string, { status: 'up' | 'down'; latency?: number; error?: string }>;\n  }> {\n    const checks: Record<string, any> = {};\n    let overallStatus: 'healthy' | 'degraded' | 'unhealthy' = 'healthy';\n\n    try {\n      // æ£€æŸ¥ç¼“å­˜\n      const cacheStart = Date.now();\n      this.cache.get('health-check');\n      this.cache.set('health-check', 'ok');\n      checks.cache = { \n        status: 'up', \n        latency: Date.now() - cacheStart \n      };\n    } catch (error) {\n      checks.cache = { \n        status: 'down', \n        error: (error as Error).message \n      };\n      overallStatus = 'degraded';\n    }\n\n    try {\n      // æ£€æŸ¥èµ„æºè®¿é—®\n      const resourceStart = Date.now();\n      await this.adapter.getResources({ limit: 1 });\n      checks.resources = { \n        status: 'up', \n        latency: Date.now() - resourceStart \n      };\n    } catch (error) {\n      checks.resources = { \n        status: 'down', \n        error: (error as Error).message \n      };\n      overallStatus = 'unhealthy';\n    }\n\n    try {\n      // æ£€æŸ¥éªŒè¯å™¨\n      const validationStart = Date.now();\n      await this.validator.validateConfig();\n      checks.validation = { \n        status: 'up', \n        latency: Date.now() - validationStart \n      };\n    } catch (error) {\n      checks.validation = { \n        status: 'down', \n        error: (error as Error).message \n      };\n      overallStatus = 'degraded';\n    }\n\n    return {\n      status: overallStatus,\n      checks\n    };\n  }\n\n  /**\n   * é”€æ¯ç®¡ç†å™¨å®ä¾‹\n   */\n  destroy(): void {\n    this.cache.destroy();\n    this.errorHandler.destroy();\n    PDFResourceManager.instance = null as any;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/core/resource-validator.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AccessLevel' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceCategory' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SupportedLanguage' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":449,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":449,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":566,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":566,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":596,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":596,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16735,16738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16735,16738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":596,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":596,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16755,16758],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16755,16758],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":600,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":600,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16871,16874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16871,16874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":629,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":629,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17713,17716],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17713,17716],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/core/resource-validator.ts\n\nimport { \n  PDFResource, \n  ValidationResult, \n  ValidationError,\n  QualityScore,\n  AccessLevel,\n  ResourceCategory,\n  SupportedLanguage\n} from '../types/resource-types';\nimport { ValidationConfig, ValidationRule } from '../types/config-types';\n\n/**\n * éªŒè¯è§„åˆ™æ¥å£\n */\ninterface IValidationRule {\n  id: string;\n  name: string;\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[];\n}\n\n/**\n * æ–‡ä»¶éªŒè¯è§„åˆ™\n */\nclass FileValidationRule implements IValidationRule {\n  id = 'file_validation';\n  name = 'æ–‡ä»¶éªŒè¯';\n\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[] {\n    const errors: ValidationError[] = [];\n    const fileConfig = config.file;\n\n    // æ£€æŸ¥æ–‡ä»¶å¤§å°\n    if (resource.fileSize > fileConfig.maxFileSize) {\n      errors.push({\n        field: 'fileSize',\n        message: `æ–‡ä»¶å¤§å° ${this.formatBytes(resource.fileSize)} è¶…è¿‡é™åˆ¶ ${this.formatBytes(fileConfig.maxFileSize)}`,\n        severity: 'error',\n        code: 'FILE_TOO_LARGE',\n        suggestion: 'è¯·å‹ç¼©æ–‡ä»¶æˆ–åˆ†å‰²ä¸ºå¤šä¸ªè¾ƒå°çš„æ–‡ä»¶'\n      });\n    }\n\n    if (resource.fileSize < fileConfig.minFileSize) {\n      errors.push({\n        field: 'fileSize',\n        message: `æ–‡ä»¶å¤§å° ${this.formatBytes(resource.fileSize)} å°äºæœ€å°è¦æ±‚ ${this.formatBytes(fileConfig.minFileSize)}`,\n        severity: 'warning',\n        code: 'FILE_TOO_SMALL',\n        suggestion: 'è¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å®Œæ•´'\n      });\n    }\n\n    // æ£€æŸ¥æ–‡ä»¶æ ¼å¼\n    if (!this.isValidFormat(resource.filename, fileConfig.allowedFormats)) {\n      errors.push({\n        field: 'filename',\n        message: `ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼Œå…è®¸çš„æ ¼å¼: ${fileConfig.allowedFormats.join(', ')}`,\n        severity: 'error',\n        code: 'INVALID_FILE_FORMAT',\n        suggestion: 'è¯·è½¬æ¢ä¸ºæ”¯æŒçš„æ–‡ä»¶æ ¼å¼'\n      });\n    }\n\n    // æ£€æŸ¥é¡µæ•°åˆç†æ€§\n    if (resource.pageCount <= 0) {\n      errors.push({\n        field: 'pageCount',\n        message: 'é¡µæ•°å¿…é¡»å¤§äº0',\n        severity: 'error',\n        code: 'INVALID_PAGE_COUNT'\n      });\n    }\n\n    if (resource.pageCount > 500) {\n      errors.push({\n        field: 'pageCount',\n        message: `é¡µæ•° ${resource.pageCount} è¿‡å¤šï¼Œå»ºè®®åˆ†å‰²æ–‡ä»¶`,\n        severity: 'warning',\n        code: 'EXCESSIVE_PAGE_COUNT',\n        suggestion: 'è€ƒè™‘å°†å¤§æ–‡ä»¶åˆ†å‰²ä¸ºå¤šä¸ªéƒ¨åˆ†'\n      });\n    }\n\n    return errors;\n  }\n\n  private formatBytes(bytes: number): string {\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    if (bytes === 0) return '0 B';\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];\n  }\n\n  private isValidFormat(filename: string, allowedFormats: string[]): boolean {\n    const extension = filename.split('.').pop()?.toLowerCase();\n    return allowedFormats.includes(extension || '');\n  }\n}\n\n/**\n * å†…å®¹éªŒè¯è§„åˆ™\n */\nclass ContentValidationRule implements IValidationRule {\n  id = 'content_validation';\n  name = 'å†…å®¹éªŒè¯';\n\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[] {\n    const errors: ValidationError[] = [];\n    const contentConfig = config.content;\n    const metadata = resource.metadata;\n\n    // éªŒè¯æ ‡é¢˜\n    if (contentConfig.requireTitle) {\n      for (const [lang, title] of Object.entries(metadata.title)) {\n        if (!title || title.trim().length === 0) {\n          errors.push({\n            field: `metadata.title.${lang}`,\n            message: `${lang} è¯­è¨€æ ‡é¢˜ä¸èƒ½ä¸ºç©º`,\n            severity: 'error',\n            code: 'MISSING_TITLE'\n          });\n          continue;\n        }\n\n        if (title.length < contentConfig.minTitleLength) {\n          errors.push({\n            field: `metadata.title.${lang}`,\n            message: `${lang} è¯­è¨€æ ‡é¢˜é•¿åº¦ ${title.length} å°äºæœ€å°è¦æ±‚ ${contentConfig.minTitleLength}`,\n            severity: 'warning',\n            code: 'TITLE_TOO_SHORT',\n            suggestion: 'æ ‡é¢˜åº”è¯¥æ›´åŠ æè¿°æ€§å’Œå…·ä½“'\n          });\n        }\n\n        if (title.length > contentConfig.maxTitleLength) {\n          errors.push({\n            field: `metadata.title.${lang}`,\n            message: `${lang} è¯­è¨€æ ‡é¢˜é•¿åº¦ ${title.length} è¶…è¿‡æœ€å¤§é™åˆ¶ ${contentConfig.maxTitleLength}`,\n            severity: 'error',\n            code: 'TITLE_TOO_LONG',\n            suggestion: 'è¯·ç®€åŒ–æ ‡é¢˜æˆ–ä½¿ç”¨æè¿°å­—æ®µè¡¥å……è¯¦ç»†ä¿¡æ¯'\n          });\n        }\n\n        // æ£€æŸ¥ç¦ç”¨è¯æ±‡\n        if (this.containsBannedWords(title, contentConfig.bannedWords)) {\n          errors.push({\n            field: `metadata.title.${lang}`,\n            message: `${lang} è¯­è¨€æ ‡é¢˜åŒ…å«ç¦ç”¨è¯æ±‡`,\n            severity: 'error',\n            code: 'TITLE_CONTAINS_BANNED_WORDS'\n          });\n        }\n      }\n    }\n\n    // éªŒè¯æè¿°\n    if (contentConfig.requireDescription) {\n      for (const [lang, description] of Object.entries(metadata.description)) {\n        if (!description || description.trim().length === 0) {\n          errors.push({\n            field: `metadata.description.${lang}`,\n            message: `${lang} è¯­è¨€æè¿°ä¸èƒ½ä¸ºç©º`,\n            severity: 'error',\n            code: 'MISSING_DESCRIPTION'\n          });\n          continue;\n        }\n\n        if (description.length < contentConfig.minDescriptionLength) {\n          errors.push({\n            field: `metadata.description.${lang}`,\n            message: `${lang} è¯­è¨€æè¿°é•¿åº¦ ${description.length} å°äºæœ€å°è¦æ±‚ ${contentConfig.minDescriptionLength}`,\n            severity: 'warning',\n            code: 'DESCRIPTION_TOO_SHORT',\n            suggestion: 'æè¿°åº”è¯¥æ›´è¯¦ç»†åœ°è¯´æ˜èµ„æºå†…å®¹å’Œç”¨é€”'\n          });\n        }\n\n        if (description.length > contentConfig.maxDescriptionLength) {\n          errors.push({\n            field: `metadata.description.${lang}`,\n            message: `${lang} è¯­è¨€æè¿°é•¿åº¦ ${description.length} è¶…è¿‡æœ€å¤§é™åˆ¶ ${contentConfig.maxDescriptionLength}`,\n            severity: 'error',\n            code: 'DESCRIPTION_TOO_LONG',\n            suggestion: 'è¯·ç²¾ç®€æè¿°ï¼Œçªå‡ºé‡ç‚¹ä¿¡æ¯'\n          });\n        }\n      }\n    }\n\n    // éªŒè¯å…³é”®è¯\n    if (contentConfig.requireKeywords) {\n      if (!metadata.keywords || metadata.keywords.length === 0) {\n        errors.push({\n          field: 'metadata.keywords',\n          message: 'å…³é”®è¯ä¸èƒ½ä¸ºç©º',\n          severity: 'error',\n          code: 'MISSING_KEYWORDS',\n          suggestion: 'æ·»åŠ ç›¸å…³çš„æœç´¢å…³é”®è¯ä»¥æé«˜å¯å‘ç°æ€§'\n        });\n      } else {\n        if (metadata.keywords.length < contentConfig.minKeywords) {\n          errors.push({\n            field: 'metadata.keywords',\n            message: `å…³é”®è¯æ•°é‡ ${metadata.keywords.length} å°‘äºæœ€å°è¦æ±‚ ${contentConfig.minKeywords}`,\n            severity: 'warning',\n            code: 'INSUFFICIENT_KEYWORDS',\n            suggestion: 'æ·»åŠ æ›´å¤šç›¸å…³å…³é”®è¯'\n          });\n        }\n\n        if (metadata.keywords.length > contentConfig.maxKeywords) {\n          errors.push({\n            field: 'metadata.keywords',\n            message: `å…³é”®è¯æ•°é‡ ${metadata.keywords.length} è¶…è¿‡æœ€å¤§é™åˆ¶ ${contentConfig.maxKeywords}`,\n            severity: 'warning',\n            code: 'EXCESSIVE_KEYWORDS',\n            suggestion: 'ä¿ç•™æœ€ç›¸å…³çš„å…³é”®è¯'\n          });\n        }\n\n        // æ£€æŸ¥å…³é”®è¯è´¨é‡\n        const duplicateKeywords = this.findDuplicates(metadata.keywords);\n        if (duplicateKeywords.length > 0) {\n          errors.push({\n            field: 'metadata.keywords',\n            message: `å‘ç°é‡å¤å…³é”®è¯: ${duplicateKeywords.join(', ')}`,\n            severity: 'warning',\n            code: 'DUPLICATE_KEYWORDS',\n            suggestion: 'ç§»é™¤é‡å¤çš„å…³é”®è¯'\n          });\n        }\n      }\n    }\n\n    return errors;\n  }\n\n  private containsBannedWords(text: string, bannedWords: string[]): boolean {\n    const lowerText = text.toLowerCase();\n    return bannedWords.some(word => lowerText.includes(word.toLowerCase()));\n  }\n\n  private findDuplicates(array: string[]): string[] {\n    const seen = new Set<string>();\n    const duplicates = new Set<string>();\n    \n    for (const item of array) {\n      const lowerItem = item.toLowerCase();\n      if (seen.has(lowerItem)) {\n        duplicates.add(item);\n      } else {\n        seen.add(lowerItem);\n      }\n    }\n    \n    return Array.from(duplicates);\n  }\n}\n\n/**\n * è´¨é‡éªŒè¯è§„åˆ™\n */\nclass QualityValidationRule implements IValidationRule {\n  id = 'quality_validation';\n  name = 'è´¨é‡éªŒè¯';\n\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[] {\n    const errors: ValidationError[] = [];\n    const qualityConfig = config.quality;\n    const quality = resource.metadata.quality;\n\n    // éªŒè¯å¿…éœ€çš„è¯„åˆ†\n    if (qualityConfig.requireAllScores) {\n      const requiredFields = ['content', 'design', 'accuracy', 'usefulness'] as const;\n      \n      for (const field of requiredFields) {\n        const score = quality[field];\n        if (score === undefined || score === null) {\n          errors.push({\n            field: `metadata.quality.${field}`,\n            message: `ç¼ºå°‘${field}è´¨é‡è¯„åˆ†`,\n            severity: 'error',\n            code: 'MISSING_QUALITY_SCORE'\n          });\n        } else if (score < 1 || score > 10) {\n          errors.push({\n            field: `metadata.quality.${field}`,\n            message: `${field}è´¨é‡è¯„åˆ† ${score} è¶…å‡ºæœ‰æ•ˆèŒƒå›´ (1-10)`,\n            severity: 'error',\n            code: 'INVALID_QUALITY_SCORE'\n          });\n        }\n      }\n    }\n\n    // éªŒè¯æ€»ä½“è¯„åˆ†\n    if (qualityConfig.autoCalculateOverall) {\n      const calculatedOverall = this.calculateOverallScore(quality, qualityConfig.scoreWeights);\n      const difference = Math.abs(calculatedOverall - quality.overall);\n      \n      if (difference > 0.1) {\n        errors.push({\n          field: 'metadata.quality.overall',\n          message: `æ€»ä½“è¯„åˆ† ${quality.overall} ä¸è®¡ç®—å€¼ ${calculatedOverall.toFixed(1)} ä¸åŒ¹é…`,\n          severity: 'warning',\n          code: 'INCORRECT_OVERALL_SCORE',\n          suggestion: `å»ºè®®ä½¿ç”¨è®¡ç®—å€¼ ${calculatedOverall.toFixed(1)}`\n        });\n      }\n    }\n\n    // éªŒè¯æœ€å°è´¨é‡è¦æ±‚\n    if (quality.overall < qualityConfig.minOverallScore) {\n      errors.push({\n        field: 'metadata.quality.overall',\n        message: `æ€»ä½“è´¨é‡è¯„åˆ† ${quality.overall} ä½äºæœ€å°è¦æ±‚ ${qualityConfig.minOverallScore}`,\n        severity: 'error',\n        code: 'QUALITY_BELOW_MINIMUM',\n        suggestion: 'è¯·æé«˜èµ„æºè´¨é‡æˆ–æ›´æ–°è¯„åˆ†'\n      });\n    }\n\n    // è´¨é‡ä¸€è‡´æ€§æ£€æŸ¥\n    const scores = [quality.content, quality.design, quality.accuracy, quality.usefulness];\n    const maxScore = Math.max(...scores);\n    const minScore = Math.min(...scores);\n    \n    if (maxScore - minScore > 5) {\n      errors.push({\n        field: 'metadata.quality',\n        message: `è´¨é‡è¯„åˆ†å·®å¼‚è¿‡å¤§ (${minScore}-${maxScore})ï¼Œå¯èƒ½å­˜åœ¨è¯„åˆ†ä¸ä¸€è‡´`,\n        severity: 'warning',\n        code: 'INCONSISTENT_QUALITY_SCORES',\n        suggestion: 'è¯·é‡æ–°è¯„ä¼°å„é¡¹è´¨é‡æŒ‡æ ‡'\n      });\n    }\n\n    return errors;\n  }\n\n  private calculateOverallScore(\n    quality: QualityScore, \n    weights: { content: number; design: number; accuracy: number; usefulness: number }\n  ): number {\n    const totalWeight = weights.content + weights.design + weights.accuracy + weights.usefulness;\n    \n    if (totalWeight === 0) return 0;\n    \n    return (\n      quality.content * weights.content +\n      quality.design * weights.design +\n      quality.accuracy * weights.accuracy +\n      quality.usefulness * weights.usefulness\n    ) / totalWeight;\n  }\n}\n\n/**\n * è®¿é—®æ§åˆ¶éªŒè¯è§„åˆ™\n */\nclass AccessValidationRule implements IValidationRule {\n  id = 'access_validation';\n  name = 'è®¿é—®æ§åˆ¶éªŒè¯';\n\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[] {\n    const errors: ValidationError[] = [];\n    const accessConfig = config.access;\n    const access = resource.access;\n\n    // éªŒè¯è®¿é—®çº§åˆ«\n    if (accessConfig.requireAccessLevel) {\n      if (!access.level) {\n        errors.push({\n          field: 'access.level',\n          message: 'è®¿é—®çº§åˆ«ä¸èƒ½ä¸ºç©º',\n          severity: 'error',\n          code: 'MISSING_ACCESS_LEVEL'\n        });\n      } else if (!accessConfig.allowedLevels.includes(access.level)) {\n        errors.push({\n          field: 'access.level',\n          message: `è®¿é—®çº§åˆ« ${access.level} ä¸åœ¨å…è®¸åˆ—è¡¨ä¸­: ${accessConfig.allowedLevels.join(', ')}`,\n          severity: 'error',\n          code: 'INVALID_ACCESS_LEVEL'\n        });\n      }\n    }\n\n    // éªŒè¯åœ°åŒºè®¾ç½®\n    if (accessConfig.requireRegions) {\n      if (!access.regions || access.regions.length === 0) {\n        errors.push({\n          field: 'access.regions',\n          message: 'è®¿é—®åœ°åŒºä¸èƒ½ä¸ºç©º',\n          severity: 'error',\n          code: 'MISSING_ACCESS_REGIONS',\n          suggestion: `ä½¿ç”¨é»˜è®¤åœ°åŒº: ${accessConfig.defaultRegions.join(', ')}`\n        });\n      }\n    }\n\n    // å¹´é¾„é™åˆ¶éªŒè¯\n    if (access.ageRestriction !== undefined) {\n      if (access.ageRestriction < 0 || access.ageRestriction > 100) {\n        errors.push({\n          field: 'access.ageRestriction',\n          message: `å¹´é¾„é™åˆ¶ ${access.ageRestriction} è¶…å‡ºæœ‰æ•ˆèŒƒå›´ (0-100)`,\n          severity: 'error',\n          code: 'INVALID_AGE_RESTRICTION'\n        });\n      }\n    }\n\n    // è®¿é—®æ§åˆ¶ä¸€è‡´æ€§æ£€æŸ¥\n    if (access.level === 'public' && access.requireAuth) {\n      errors.push({\n        field: 'access',\n        message: 'å…¬å¼€è®¿é—®çº§åˆ«ä¸åº”è¦æ±‚èº«ä»½éªŒè¯',\n        severity: 'warning',\n        code: 'INCONSISTENT_ACCESS_CONFIG',\n        suggestion: 'å°†è®¿é—®çº§åˆ«æ”¹ä¸º protected æˆ–ç§»é™¤èº«ä»½éªŒè¯è¦æ±‚'\n      });\n    }\n\n    if (access.level === 'private' && access.public) {\n      errors.push({\n        field: 'access',\n        message: 'ç§æœ‰è®¿é—®çº§åˆ«ä¸åº”è®¾ä¸ºå…¬å¼€',\n        severity: 'error',\n        code: 'CONFLICTING_ACCESS_CONFIG'\n      });\n    }\n\n    return errors;\n  }\n}\n\n/**\n * ç»“æ„éªŒè¯è§„åˆ™\n */\nclass StructureValidationRule implements IValidationRule {\n  id = 'structure_validation';\n  name = 'ç»“æ„éªŒè¯';\n\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    // éªŒè¯å¿…éœ€å­—æ®µ\n    if (!resource.id || resource.id.trim().length === 0) {\n      errors.push({\n        field: 'id',\n        message: 'èµ„æºIDä¸èƒ½ä¸ºç©º',\n        severity: 'error',\n        code: 'MISSING_RESOURCE_ID'\n      });\n    }\n\n    // IDæ ¼å¼éªŒè¯\n    if (resource.id && !this.isValidId(resource.id)) {\n      errors.push({\n        field: 'id',\n        message: 'IDæ ¼å¼æ— æ•ˆï¼Œåº”ä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦',\n        severity: 'error',\n        code: 'INVALID_ID_FORMAT',\n        suggestion: 'ä½¿ç”¨æ ¼å¼å¦‚: my-resource-name'\n      });\n    }\n\n    // éªŒè¯èµ„æºç±»å‹\n    if (resource.type !== 'pdf') {\n      errors.push({\n        field: 'type',\n        message: `ä¸æ”¯æŒçš„èµ„æºç±»å‹: ${resource.type}`,\n        severity: 'error',\n        code: 'INVALID_RESOURCE_TYPE'\n      });\n    }\n\n    // éªŒè¯ç±»åˆ«\n    if (!this.isValidCategory(resource.category)) {\n      errors.push({\n        field: 'category',\n        message: `æ— æ•ˆçš„èµ„æºç±»åˆ«: ${resource.category}`,\n        severity: 'error',\n        code: 'INVALID_CATEGORY'\n      });\n    }\n\n    // éªŒè¯è¯­è¨€\n    if (!this.isValidLanguage(resource.language)) {\n      errors.push({\n        field: 'language',\n        message: `ä¸æ”¯æŒçš„è¯­è¨€: ${resource.language}`,\n        severity: 'error',\n        code: 'INVALID_LANGUAGE'\n      });\n    }\n\n    // éªŒè¯æ—¶é—´æˆ³\n    if (resource.createdAt > resource.updatedAt) {\n      errors.push({\n        field: 'updatedAt',\n        message: 'æ›´æ–°æ—¶é—´ä¸èƒ½æ—©äºåˆ›å»ºæ—¶é—´',\n        severity: 'error',\n        code: 'INVALID_TIMESTAMP'\n      });\n    }\n\n    // éªŒè¯æ ‡ç­¾\n    if (resource.tags) {\n      const invalidTags = resource.tags.filter(tag => !this.isValidTag(tag));\n      if (invalidTags.length > 0) {\n        errors.push({\n          field: 'tags',\n          message: `æ— æ•ˆçš„æ ‡ç­¾: ${invalidTags.join(', ')}`,\n          severity: 'warning',\n          code: 'INVALID_TAGS',\n          suggestion: 'æ ‡ç­¾åº”è¯¥ç®€æ´ä¸”åªåŒ…å«å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦'\n        });\n      }\n    }\n\n    return errors;\n  }\n\n  private isValidId(id: string): boolean {\n    return /^[a-z0-9]+(-[a-z0-9]+)*$/.test(id);\n  }\n\n  private isValidCategory(category: string): boolean {\n    const validCategories = [\n      'immediate-relief',\n      'preparation',\n      'learning',\n      'management',\n      'assessment',\n      'template'\n    ];\n    return validCategories.includes(category);\n  }\n\n  private isValidLanguage(language: string): boolean {\n    const validLanguages = ['zh', 'en', 'es', 'fr'];\n    return validLanguages.includes(language);\n  }\n\n  private isValidTag(tag: string): boolean {\n    return /^[a-zA-Z0-9\\u4e00-\\u9fa5]+(-[a-zA-Z0-9\\u4e00-\\u9fa5]+)*$/.test(tag) && tag.length <= 50;\n  }\n}\n\n/**\n * è‡ªå®šä¹‰éªŒè¯è§„åˆ™\n */\nclass CustomValidationRule implements IValidationRule {\n  constructor(\n    public id: string,\n    public name: string,\n    private rule: ValidationRule\n  ) {}\n\n  validate(resource: PDFResource, config: ValidationConfig): ValidationError[] {\n    if (!this.rule.enabled) return [];\n\n    const errors: ValidationError[] = [];\n\n    try {\n      const fieldValue = this.getFieldValue(resource, this.rule.field);\n      const isValid = this.validateField(fieldValue, this.rule);\n\n      if (!isValid) {\n        errors.push({\n          field: this.rule.field,\n          message: this.rule.message,\n          severity: this.rule.severity,\n          code: this.rule.id.toUpperCase(),\n          suggestion: this.rule.suggestion\n        });\n      }\n    } catch (error) {\n      errors.push({\n        field: this.rule.field,\n        message: `è‡ªå®šä¹‰éªŒè¯è§„åˆ™æ‰§è¡Œå¤±è´¥: ${error}`,\n        severity: 'warning',\n        code: 'CUSTOM_RULE_ERROR'\n      });\n    }\n\n    return errors;\n  }\n\n  private getFieldValue(obj: any, path: string): any {\n    return path.split('.').reduce((current, key) => current?.[key], obj);\n  }\n\n  private validateField(value: any, rule: ValidationRule): boolean {\n    // æ£€æŸ¥æ¡ä»¶\n    if (rule.condition && !this.checkCondition(value, rule.condition)) {\n      return true; // æ¡ä»¶ä¸æ»¡è¶³ï¼Œè·³è¿‡éªŒè¯\n    }\n\n    switch (rule.type) {\n      case 'required':\n        return value !== undefined && value !== null && value !== '';\n      \n      case 'format':\n        if (typeof value !== 'string') return false;\n        return rule.params?.pattern ? new RegExp(rule.params.pattern).test(value) : true;\n      \n      case 'range':\n        if (typeof value !== 'number') return false;\n        const min = rule.params?.min ?? -Infinity;\n        const max = rule.params?.max ?? Infinity;\n        return value >= min && value <= max;\n      \n      case 'custom':\n        // è¿™é‡Œå¯ä»¥å®ç°æ›´å¤æ‚çš„è‡ªå®šä¹‰éªŒè¯é€»è¾‘\n        return true;\n      \n      default:\n        return true;\n    }\n  }\n\n  private checkCondition(value: any, condition: ValidationRule['condition']): boolean {\n    if (!condition) return true;\n\n    const conditionValue = this.getFieldValue(value, condition.field);\n\n    switch (condition.operator) {\n      case 'equals':\n        return conditionValue === condition.value;\n      case 'not_equals':\n        return conditionValue !== condition.value;\n      case 'contains':\n        return typeof conditionValue === 'string' && conditionValue.includes(condition.value);\n      case 'not_contains':\n        return typeof conditionValue === 'string' && !conditionValue.includes(condition.value);\n      case 'greater_than':\n        return typeof conditionValue === 'number' && conditionValue > condition.value;\n      case 'less_than':\n        return typeof conditionValue === 'number' && conditionValue < condition.value;\n      default:\n        return true;\n    }\n  }\n}\n\n/**\n * èµ„æºéªŒè¯å™¨ä¸»ç±»\n */\nexport class ResourceValidator {\n  private rules: Map<string, IValidationRule> = new Map();\n  private config: ValidationConfig;\n\n  constructor(config: ValidationConfig) {\n    this.config = config;\n    this.initializeDefaultRules();\n    this.initializeCustomRules();\n  }\n\n  /**\n   * éªŒè¯å•ä¸ªèµ„æº\n   */\n  async validate(resource: PDFResource): Promise<ValidationResult> {\n    if (!this.config.enabled) {\n      return {\n        isValid: true,\n        errors: [],\n        warnings: [],\n        suggestions: [],\n        summary: {\n          totalChecks: 0,\n          passedChecks: 0,\n          errorCount: 0,\n          warningCount: 0\n        }\n      };\n    }\n\n    const allErrors: ValidationError[] = [];\n    let totalChecks = 0;\n\n    // æ‰§è¡Œæ‰€æœ‰éªŒè¯è§„åˆ™\n    for (const rule of this.rules.values()) {\n      try {\n        const ruleErrors = rule.validate(resource, this.config);\n        allErrors.push(...ruleErrors);\n        totalChecks++;\n      } catch (error) {\n        allErrors.push({\n          field: 'validation',\n          message: `éªŒè¯è§„åˆ™ ${rule.name} æ‰§è¡Œå¤±è´¥: ${error}`,\n          severity: 'warning',\n          code: 'VALIDATION_RULE_ERROR'\n        });\n      }\n    }\n\n    // åˆ†ç±»é”™è¯¯\n    const errors = allErrors.filter(e => e.severity === 'error');\n    const warnings = allErrors.filter(e => e.severity === 'warning');\n    const suggestions = allErrors.filter(e => e.severity === 'info');\n\n    const isValid = errors.length === 0 && (\n      this.config.mode === 'loose' || warnings.length === 0\n    );\n\n    return {\n      isValid,\n      errors,\n      warnings,\n      suggestions,\n      summary: {\n        totalChecks,\n        passedChecks: totalChecks - errors.length - warnings.length,\n        errorCount: errors.length,\n        warningCount: warnings.length\n      }\n    };\n  }\n\n  /**\n   * æ‰¹é‡éªŒè¯èµ„æº\n   */\n  async validateBatch(resources: PDFResource[]): Promise<{\n    results: Array<{ resource: PDFResource; validation: ValidationResult }>;\n    summary: {\n      total: number;\n      valid: number;\n      invalid: number;\n      warnings: number;\n    };\n  }> {\n    const results = [];\n    let validCount = 0;\n    let invalidCount = 0;\n    let warningCount = 0;\n\n    for (const resource of resources) {\n      const validation = await this.validate(resource);\n      results.push({ resource, validation });\n\n      if (validation.isValid) {\n        validCount++;\n      } else {\n        invalidCount++;\n      }\n\n      if (validation.warnings.length > 0) {\n        warningCount++;\n      }\n    }\n\n    return {\n      results,\n      summary: {\n        total: resources.length,\n        valid: validCount,\n        invalid: invalidCount,\n        warnings: warningCount\n      }\n    };\n  }\n\n  /**\n   * æ·»åŠ è‡ªå®šä¹‰éªŒè¯è§„åˆ™\n   */\n  addRule(rule: IValidationRule): void {\n    this.rules.set(rule.id, rule);\n  }\n\n  /**\n   * ç§»é™¤éªŒè¯è§„åˆ™\n   */\n  removeRule(ruleId: string): boolean {\n    return this.rules.delete(ruleId);\n  }\n\n  /**\n   * è·å–æ‰€æœ‰éªŒè¯è§„åˆ™\n   */\n  getRules(): IValidationRule[] {\n    return Array.from(this.rules.values());\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   */\n  updateConfig(newConfig: Partial<ValidationConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    \n    // é‡æ–°åˆå§‹åŒ–è‡ªå®šä¹‰è§„åˆ™\n    if (newConfig.custom) {\n      this.initializeCustomRules();\n    }\n  }\n\n  /**\n   * éªŒè¯é…ç½®æœ¬èº«\n   */\n  validateConfig(): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationError[] = [];\n\n    // éªŒè¯æ–‡ä»¶é…ç½®\n    if (this.config.file.maxFileSize <= this.config.file.minFileSize) {\n      errors.push({\n        field: 'file.maxFileSize',\n        message: 'æœ€å¤§æ–‡ä»¶å¤§å°å¿…é¡»å¤§äºæœ€å°æ–‡ä»¶å¤§å°',\n        severity: 'error',\n        code: 'INVALID_FILE_SIZE_CONFIG'\n      });\n    }\n\n    // éªŒè¯å†…å®¹é…ç½®\n    if (this.config.content.maxTitleLength <= this.config.content.minTitleLength) {\n      errors.push({\n        field: 'content.maxTitleLength',\n        message: 'æœ€å¤§æ ‡é¢˜é•¿åº¦å¿…é¡»å¤§äºæœ€å°æ ‡é¢˜é•¿åº¦',\n        severity: 'error',\n        code: 'INVALID_TITLE_LENGTH_CONFIG'\n      });\n    }\n\n    // éªŒè¯è´¨é‡æƒé‡\n    const weights = this.config.quality.scoreWeights;\n    const totalWeight = weights.content + weights.design + weights.accuracy + weights.usefulness;\n    \n    if (Math.abs(totalWeight - 1.0) > 0.01) {\n      warnings.push({\n        field: 'quality.scoreWeights',\n        message: `è´¨é‡è¯„åˆ†æƒé‡æ€»å’Œä¸º ${totalWeight}ï¼Œå»ºè®®ä¸º 1.0`,\n        severity: 'warning',\n        code: 'INVALID_WEIGHT_SUM',\n        suggestion: 'è°ƒæ•´æƒé‡ä½¿æ€»å’Œç­‰äº1.0'\n      });\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      suggestions: [],\n      summary: {\n        totalChecks: 3,\n        passedChecks: 3 - errors.length - warnings.length,\n        errorCount: errors.length,\n        warningCount: warnings.length\n      }\n    };\n  }\n\n  private initializeDefaultRules(): void {\n    this.addRule(new FileValidationRule());\n    this.addRule(new ContentValidationRule());\n    this.addRule(new QualityValidationRule());\n    this.addRule(new AccessValidationRule());\n    this.addRule(new StructureValidationRule());\n  }\n\n  private initializeCustomRules(): void {\n    if (!this.config.custom?.enabled || !this.config.custom.rules) {\n      return;\n    }\n\n    // æ¸…é™¤ç°æœ‰è‡ªå®šä¹‰è§„åˆ™\n    for (const ruleId of this.rules.keys()) {\n      if (ruleId.startsWith('custom_')) {\n        this.rules.delete(ruleId);\n      }\n    }\n\n    // æ·»åŠ æ–°çš„è‡ªå®šä¹‰è§„åˆ™\n    for (const rule of this.config.custom.rules) {\n      const customRule = new CustomValidationRule(\n        `custom_${rule.id}`,\n        rule.name,\n        rule\n      );\n      this.addRule(customRule);\n    }\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/index.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":30,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[736,739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[736,739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PDFResourceManager' is assigned a value but never used.","line":31,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":29},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":31,"column":34,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":31,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheManager' is assigned a value but never used.","line":32,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":23},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":32,"column":28,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":32,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceValidator' is assigned a value but never used.","line":33,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":28},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":33,"column":33,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":33,"endColumn":69},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorHandler' is assigned a value but never used.","line":34,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":23},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":34,"column":28,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":34,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1237,1240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1237,1240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1359,1362],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1359,1362],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * PDFèµ„æºç®¡ç†ç³»ç»Ÿ - æ ¸å¿ƒå…¥å£æ–‡ä»¶\n * \n * è¿™æ˜¯Period Hubçš„ä¼ä¸šçº§PDFèµ„æºç®¡ç†ç³»ç»Ÿ\n * \n * @version 1.0.0\n * @author Period Hub Team\n */\n\n// æ ¸å¿ƒç»„ä»¶\nexport { PDFResourceManager as ResourceManager } from './core/resource-manager';\nexport { CacheManager } from './core/cache-manager';\nexport { ResourceValidator } from './core/resource-validator';\nexport { ErrorHandler } from './core/error-handler';\n\n// å·¥å…·æ¨¡å—\nexport { IDMapper as IdMapper } from './utils/id-mapper';\nexport { URLGenerator } from './utils/url-generator';\nexport { MetadataExtractor } from './utils/metadata-extractor';\n\n// ç±»å‹å®šä¹‰\nexport * from './types/index';\n\n// é…ç½®\nexport { default as defaultConfig } from './config/default';\n\n/**\n * ç®€åŒ–ç‰ˆæœ¬çš„åˆ›å»ºå‡½æ•°\n */\nexport function createPDFResourceManager(config?: any) {\n  const { PDFResourceManager } = require('./core/resource-manager');\n  const { CacheManager } = require('./core/cache-manager');\n  const { ResourceValidator } = require('./core/resource-validator');\n  const { ErrorHandler } = require('./core/error-handler');\n  \n  return {\n    // ä¾¿æ·æ–¹æ³•\n    async initialize() {\n      console.log('PDFèµ„æºç®¡ç†ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ');\n    },\n    \n    async getResource(id: string) {\n      console.log(`è·å–èµ„æº: ${id}`);\n      return null;\n    },\n    \n    async searchResources(params: any) {\n      console.log('æœç´¢èµ„æº:', params);\n      return { results: [] };\n    },\n    \n    async validateResource(resource: any) {\n      console.log('éªŒè¯èµ„æº:', resource);\n      return { isValid: true, errors: [], warnings: [] };\n    },\n    \n    async healthCheck() {\n      return { status: 'healthy', message: 'PDFèµ„æºç®¡ç†ç³»ç»Ÿè¿è¡Œæ­£å¸¸' };\n    }\n  };\n}\n\n// ç‰ˆæœ¬ä¿¡æ¯\nexport const VERSION = '1.0.0';\nexport const BUILD_DATE = new Date().toISOString(); ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/types/api-types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[688,691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[688,691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5720,5723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5720,5723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":530,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":530,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9442,9445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9442,9445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":563,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":563,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10055,10058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10055,10058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":564,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":564,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10072,10075],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10072,10075],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":565,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":565,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10086,10089],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10086,10089],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":576,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":576,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10243,10246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10243,10246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":577,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":577,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10260,10263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10260,10263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":589,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":589,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10442,10445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10442,10445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":590,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":590,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10459,10462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10459,10462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":620,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":620,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10985,10988],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10985,10988],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":621,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":621,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11018,11021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11018,11021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":643,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":643,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11374,11377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11374,11377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":643,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":643,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11382,11385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11382,11385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":644,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":644,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11413,11416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11413,11416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":644,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":644,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11421,11424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11421,11424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":645,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":645,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11446,11449],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11446,11449],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":645,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":645,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11454,11457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11454,11457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/types/api.types.ts\n\nimport { \n  PDFResource, \n  ResourceCategory, \n  SupportedLanguage, \n  SearchOptions,\n  ResourceStats,\n  ValidationResult,\n  CacheStats\n} from './resource-types';\n\n/**\n * HTTPæ–¹æ³•\n */\nexport type HTTPMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' | 'HEAD' | 'OPTIONS';\n\n/**\n * APIå“åº”çŠ¶æ€\n */\nexport type APIStatus = 'success' | 'error' | 'partial' | 'maintenance';\n\n/**\n * é”™è¯¯ç±»å‹\n */\nexport type ErrorType = \n  | 'validation_error'\n  | 'not_found'\n  | 'unauthorized'\n  | 'forbidden'\n  | 'rate_limited'\n  | 'server_error'\n  | 'bad_request'\n  | 'conflict'\n  | 'timeout'\n  | 'service_unavailable';\n\n/**\n * åŸºç¡€APIå“åº”\n */\nexport interface APIResponse<T = any> {\n  status: APIStatus;\n  message?: string;\n  data?: T;\n  error?: APIError;\n  meta?: ResponseMeta;\n  timestamp: string;\n  requestId?: string;\n}\n\n/**\n * APIé”™è¯¯ä¿¡æ¯\n */\nexport interface APIError {\n  type: ErrorType;\n  code: string;\n  message: string;\n  details?: string;\n  field?: string;\n  suggestion?: string;\n  documentation?: string;\n  traceId?: string;\n}\n\n/**\n * å“åº”å…ƒä¿¡æ¯\n */\nexport interface ResponseMeta {\n  total?: number;\n  page?: number;\n  pageSize?: number;\n  hasNext?: boolean;\n  hasPrevious?: boolean;\n  processingTime?: number;\n  cacheHit?: boolean;\n  version?: string;\n  rateLimit?: RateLimitInfo;\n}\n\n/**\n * é€Ÿç‡é™åˆ¶ä¿¡æ¯\n */\nexport interface RateLimitInfo {\n  limit: number;\n  remaining: number;\n  reset: number;\n  retryAfter?: number;\n}\n\n/**\n * åˆ†é¡µå‚æ•°\n */\nexport interface PaginationParams {\n  page?: number;\n  pageSize?: number;\n  offset?: number;\n  limit?: number;\n}\n\n/**\n * æ’åºå‚æ•°\n */\nexport interface SortParams {\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n  secondarySort?: {\n    field: string;\n    order: 'asc' | 'desc';\n  };\n}\n\n/**\n * è¿‡æ»¤å‚æ•°\n */\nexport interface FilterParams {\n  category?: ResourceCategory;\n  language?: SupportedLanguage;\n  tags?: string[];\n  featured?: boolean;\n  minQuality?: number;\n  maxFileSize?: number;\n  dateFrom?: string;\n  dateTo?: string;\n  author?: string;\n}\n\n/**\n * èµ„æºæŸ¥è¯¢å‚æ•°\n */\nexport interface ResourceQueryParams extends PaginationParams, SortParams, FilterParams {\n  search?: string;\n  include?: ('metadata' | 'analytics' | 'content' | 'related')[];\n  fields?: string[];              // æŒ‡å®šè¿”å›å­—æ®µ\n  expand?: string[];              // å±•å¼€å…³è”å¯¹è±¡\n}\n\n/**\n * è·å–å•ä¸ªèµ„æºçš„APIå“åº”\n */\nexport interface GetResourceResponse extends APIResponse<PDFResource> {\n  data: PDFResource;\n}\n\n/**\n * è·å–èµ„æºåˆ—è¡¨çš„APIå“åº”\n */\nexport interface GetResourcesResponse extends APIResponse<PDFResource[]> {\n  data: PDFResource[];\n  meta: ResponseMeta & {\n    total: number;\n    filtered: number;\n    facets?: SearchFacets;\n  };\n}\n\n/**\n * æœç´¢å“åº”\n */\nexport interface SearchResponse extends APIResponse {\n  data: {\n    results: SearchResultItem[];\n    suggestions?: string[];\n    corrections?: string[];\n    facets?: SearchFacets;\n  };\n  meta: ResponseMeta & {\n    query: string;\n    total: number;\n    searchTime: number;\n  };\n}\n\n/**\n * æœç´¢ç»“æœé¡¹\n */\nexport interface SearchResultItem {\n  resource: PDFResource;\n  score: number;\n  highlights?: {\n    title?: string[];\n    description?: string[];\n    content?: string[];\n  };\n  explanation?: {\n    details: string;\n    factors: { factor: string; weight: number; score: number }[];\n  };\n}\n\n/**\n * æœç´¢åˆ†é¢\n */\nexport interface SearchFacets {\n  categories: FacetItem[];\n  languages: FacetItem[];\n  tags: FacetItem[];\n  authors: FacetItem[];\n  qualityRanges: FacetItem[];\n  fileSizeRanges: FacetItem[];\n  dateRanges: FacetItem[];\n}\n\n/**\n * åˆ†é¢é¡¹\n */\nexport interface FacetItem {\n  value: string;\n  count: number;\n  selected?: boolean;\n}\n\n/**\n * ç»Ÿè®¡ä¿¡æ¯APIå“åº”\n */\nexport interface StatsResponse extends APIResponse<ResourceStats> {\n  data: ResourceStats;\n}\n\n/**\n * åˆ›å»ºèµ„æºè¯·æ±‚\n */\nexport interface CreateResourceRequest {\n  filename: string;\n  fileData: string | Buffer;      // Base64ç¼–ç çš„æ–‡ä»¶æ•°æ®æˆ–Buffer\n  metadata: {\n    title: { [key in SupportedLanguage]?: string };\n    description: { [key in SupportedLanguage]?: string };\n    author?: string;\n    keywords: string[];\n    category: ResourceCategory;\n    tags: string[];\n    language: SupportedLanguage;\n  };\n  content?: {\n    preview?: {\n      enabled: boolean;\n      pages?: number[];\n    };\n    download?: {\n      enabled: boolean;\n      requireAuth?: boolean;\n    };\n  };\n  access?: {\n    level: 'public' | 'protected' | 'private';\n    regions?: string[];\n  };\n  quality?: {\n    content?: number;\n    design?: number;\n    accuracy?: number;\n    usefulness?: number;\n  };\n}\n\n/**\n * æ›´æ–°èµ„æºè¯·æ±‚\n */\nexport interface UpdateResourceRequest {\n  metadata?: Partial<CreateResourceRequest['metadata']>;\n  content?: Partial<CreateResourceRequest['content']>;\n  access?: Partial<CreateResourceRequest['access']>;\n  quality?: Partial<CreateResourceRequest['quality']>;\n  tags?: string[];\n  featured?: boolean;\n  status?: 'active' | 'draft' | 'archived';\n}\n\n/**\n * æ‰¹é‡æ“ä½œè¯·æ±‚\n */\nexport interface BatchOperationRequest {\n  operation: 'create' | 'update' | 'delete' | 'archive' | 'activate';\n  resources: Array<{\n    id?: string;\n    data?: CreateResourceRequest | UpdateResourceRequest;\n  }>;\n  options?: {\n    continueOnError?: boolean;\n    validateOnly?: boolean;\n    dryRun?: boolean;\n  };\n}\n\n/**\n * æ‰¹é‡æ“ä½œå“åº”\n */\nexport interface BatchOperationResponse extends APIResponse {\n  data: {\n    successful: Array<{\n      id: string;\n      operation: string;\n      resource?: PDFResource;\n    }>;\n    failed: Array<{\n      id?: string;\n      operation: string;\n      error: APIError;\n    }>;\n    summary: {\n      total: number;\n      successful: number;\n      failed: number;\n      skipped: number;\n    };\n  };\n}\n\n/**\n * æ–‡ä»¶ä¸Šä¼ è¯·æ±‚\n */\nexport interface FileUploadRequest {\n  file: File | Buffer;\n  filename: string;\n  mimeType?: string;\n  checksum?: string;\n  metadata?: Record<string, any>;\n  options?: {\n    overwrite?: boolean;\n    generateThumbnail?: boolean;\n    extractText?: boolean;\n    compress?: boolean;\n  };\n}\n\n/**\n * æ–‡ä»¶ä¸Šä¼ å“åº”\n */\nexport interface FileUploadResponse extends APIResponse {\n  data: {\n    fileId: string;\n    filename: string;\n    url: string;\n    size: number;\n    mimeType: string;\n    checksum: string;\n    metadata?: {\n      pageCount?: number;\n      dimensions?: { width: number; height: number };\n      thumbnail?: string;\n      extractedText?: string;\n    };\n  };\n}\n\n/**\n * é¢„è§ˆè¯·æ±‚å‚æ•°\n */\nexport interface PreviewParams {\n  page?: number;\n  pages?: number[];\n  format?: 'png' | 'jpeg' | 'webp';\n  quality?: number;\n  width?: number;\n  height?: number;\n  watermark?: boolean;\n  annotations?: boolean;\n}\n\n/**\n * é¢„è§ˆå“åº”\n */\nexport interface PreviewResponse extends APIResponse {\n  data: {\n    images: Array<{\n      page: number;\n      url: string;\n      width: number;\n      height: number;\n      size: number;\n    }>;\n    totalPages: number;\n    previewPages: number[];\n  };\n}\n\n/**\n * ä¸‹è½½ç»Ÿè®¡è¯·æ±‚\n */\nexport interface DownloadStatsRequest {\n  resourceId: string;\n  userId?: string;\n  sessionId?: string;\n  metadata?: {\n    userAgent?: string;\n    referer?: string;\n    country?: string;\n    source?: string;\n  };\n}\n\n/**\n * éªŒè¯APIå“åº”\n */\nexport interface ValidationResponse extends APIResponse<ValidationResult> {\n  data: ValidationResult;\n}\n\n/**\n * å¥åº·æ£€æŸ¥å“åº”\n */\nexport interface HealthCheckResponse extends APIResponse {\n  data: {\n    status: 'healthy' | 'degraded' | 'unhealthy';\n    services: {\n      [serviceName: string]: {\n        status: 'up' | 'down' | 'degraded';\n        latency?: number;\n        error?: string;\n        lastCheck: string;\n      };\n    };\n    system: {\n      memory: {\n        used: number;\n        total: number;\n        percentage: number;\n      };\n      cpu: {\n        usage: number;\n      };\n      disk: {\n        used: number;\n        total: number;\n        percentage: number;\n      };\n      uptime: number;\n    };\n  };\n}\n\n/**\n * ç¼“å­˜ç»Ÿè®¡å“åº”\n */\nexport interface CacheStatsResponse extends APIResponse<CacheStats> {\n  data: CacheStats;\n}\n\n/**\n * å¯¼å‡ºè¯·æ±‚\n */\nexport interface ExportRequest {\n  format: 'json' | 'csv' | 'xlsx';\n  resourceIds?: string[];\n  filters?: FilterParams;\n  options?: {\n    includeMetadata?: boolean;\n    includeAnalytics?: boolean;\n    includeContent?: boolean;\n    compression?: boolean;\n  };\n}\n\n/**\n * å¯¼å‡ºå“åº”\n */\nexport interface ExportResponse extends APIResponse {\n  data: {\n    downloadUrl: string;\n    filename: string;\n    format: string;\n    size: number;\n    expiresAt: string;\n    resourceCount: number;\n  };\n}\n\n/**\n * å¯¼å…¥è¯·æ±‚\n */\nexport interface ImportRequest {\n  file: File | Buffer;\n  format: 'json' | 'csv' | 'xlsx';\n  options?: {\n    overwrite?: boolean;\n    validateOnly?: boolean;\n    dryRun?: boolean;\n    batchSize?: number;\n  };\n  mapping?: {\n    [sourceField: string]: string;  // å­—æ®µæ˜ å°„\n  };\n}\n\n/**\n * å¯¼å…¥å“åº”\n */\nexport interface ImportResponse extends APIResponse {\n  data: {\n    jobId: string;\n    status: 'pending' | 'processing' | 'completed' | 'failed';\n    progress?: {\n      total: number;\n      processed: number;\n      successful: number;\n      failed: number;\n      percentage: number;\n    };\n    errors?: Array<{\n      row: number;\n      field?: string;\n      message: string;\n    }>;\n    warnings?: Array<{\n      row: number;\n      field?: string;\n      message: string;\n    }>;\n  };\n}\n\n/**\n * WebSocketæ¶ˆæ¯ç±»å‹\n */\nexport type WebSocketMessageType = \n  | 'resource_updated'\n  | 'resource_deleted'\n  | 'stats_updated'\n  | 'search_indexed'\n  | 'cache_cleared'\n  | 'system_maintenance'\n  | 'error_occurred';\n\n/**\n * WebSocketæ¶ˆæ¯\n */\nexport interface WebSocketMessage {\n  type: WebSocketMessageType;\n  timestamp: string;\n  data: any;\n  requestId?: string;\n  userId?: string;\n}\n\n/**\n * APIç«¯ç‚¹å®šä¹‰\n */\nexport interface APIEndpoint {\n  path: string;\n  method: HTTPMethod;\n  description: string;\n  parameters?: APIParameter[];\n  requestBody?: APIRequestBody;\n  responses: APIResponseSpec[];\n  authentication?: boolean;\n  rateLimit?: {\n    requests: number;\n    window: string;\n  };\n  deprecated?: boolean;\n  version?: string;\n}\n\n/**\n * APIå‚æ•°å®šä¹‰\n */\nexport interface APIParameter {\n  name: string;\n  in: 'query' | 'path' | 'header';\n  type: 'string' | 'number' | 'boolean' | 'array' | 'object';\n  required: boolean;\n  description: string;\n  example?: any;\n  default?: any;\n  enum?: any[];\n  pattern?: string;\n  minimum?: number;\n  maximum?: number;\n}\n\n/**\n * APIè¯·æ±‚ä½“å®šä¹‰\n */\nexport interface APIRequestBody {\n  contentType: string;\n  schema: any;\n  example?: any;\n  required: boolean;\n  description: string;\n}\n\n/**\n * APIå“åº”å®šä¹‰\n */\nexport interface APIResponseSpec {\n  status: number;\n  description: string;\n  contentType?: string;\n  schema?: any;\n  example?: any;\n  headers?: Record<string, {\n    type: string;\n    description: string;\n  }>;\n}\n\n/**\n * APIæ–‡æ¡£é…ç½®\n */\nexport interface APIDocumentation {\n  title: string;\n  version: string;\n  description: string;\n  baseUrl: string;\n  contact?: {\n    name: string;\n    email: string;\n    url: string;\n  };\n  license?: {\n    name: string;\n    url: string;\n  };\n  servers: Array<{\n    url: string;\n    description: string;\n    environment: 'development' | 'staging' | 'production';\n  }>;\n  endpoints: APIEndpoint[];\n  schemas: Record<string, any>;\n  examples: Record<string, any>;\n}\n\n/**\n * APIå®¢æˆ·ç«¯é…ç½®\n */\nexport interface APIClientConfig {\n  baseURL: string;\n  timeout: number;\n  apiKey?: string;\n  userAgent?: string;\n  retries: {\n    count: number;\n    delay: number;\n    backoff: 'linear' | 'exponential';\n  };\n  cache: {\n    enabled: boolean;\n    ttl: number;\n    maxSize: number;\n  };\n  interceptors?: {\n    request?: (config: any) => any;\n    response?: (response: any) => any;\n    error?: (error: any) => any;\n  };\n}\n\n/**\n * APIå®¢æˆ·ç«¯æ¥å£\n */\nexport interface APIClient {\n  // èµ„æºç®¡ç†\n  getResource(id: string, options?: { include?: string[] }): Promise<GetResourceResponse>;\n  getResources(params?: ResourceQueryParams): Promise<GetResourcesResponse>;\n  createResource(data: CreateResourceRequest): Promise<GetResourceResponse>;\n  updateResource(id: string, data: UpdateResourceRequest): Promise<GetResourceResponse>;\n  deleteResource(id: string): Promise<APIResponse>;\n  \n  // æœç´¢\n  search(query: string, options?: SearchOptions): Promise<SearchResponse>;\n  suggest(query: string, limit?: number): Promise<APIResponse<string[]>>;\n  \n  // æ–‡ä»¶æ“ä½œ\n  uploadFile(data: FileUploadRequest): Promise<FileUploadResponse>;\n  getPreview(id: string, params?: PreviewParams): Promise<PreviewResponse>;\n  downloadResource(id: string): Promise<Response>;\n  \n  // ç»Ÿè®¡å’Œåˆ†æ\n  getStats(params?: { category?: ResourceCategory; language?: SupportedLanguage }): Promise<StatsResponse>;\n  recordDownload(data: DownloadStatsRequest): Promise<APIResponse>;\n  \n  // éªŒè¯å’Œå¥åº·æ£€æŸ¥\n  validateResource(id: string): Promise<ValidationResponse>;\n  validateConfiguration(): Promise<ValidationResponse>;\n  healthCheck(): Promise<HealthCheckResponse>;\n  \n  // ç¼“å­˜ç®¡ç†\n  clearCache(pattern?: string): Promise<APIResponse>;\n  getCacheStats(): Promise<CacheStatsResponse>;\n  \n  // æ‰¹é‡æ“ä½œ\n  batchOperation(data: BatchOperationRequest): Promise<BatchOperationResponse>;\n  \n  // å¯¼å…¥å¯¼å‡º\n  exportResources(data: ExportRequest): Promise<ExportResponse>;\n  importResources(data: ImportRequest): Promise<ImportResponse>;\n  \n  // å®ç”¨æ–¹æ³•\n  setApiKey(apiKey: string): void;\n  setTimeout(timeout: number): void;\n  enableCache(enabled: boolean): void;\n}\n\n/**\n * ç±»å‹ä¿æŠ¤å‡½æ•°\n */\nexport function isAPIError(response: APIResponse): response is APIResponse & { error: APIError } {\n  return response.status === 'error' && !!response.error;\n}\n\nexport function isSuccessResponse<T>(response: APIResponse<T>): response is APIResponse<T> & { data: T } {\n  return response.status === 'success' && !!response.data;\n}\n\nexport function isValidHTTPMethod(method: string): method is HTTPMethod {\n  return ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS'].includes(method);\n}\n\nexport function isValidErrorType(type: string): type is ErrorType {\n  return [\n    'validation_error',\n    'not_found',\n    'unauthorized',\n    'forbidden',\n    'rate_limited',\n    'server_error',\n    'bad_request',\n    'conflict',\n    'timeout',\n    'service_unavailable'\n  ].includes(type);\n}\n\n// å¸¸é‡å®šä¹‰\nexport const API_VERSION = 'v1';\nexport const DEFAULT_PAGE_SIZE = 20;\nexport const MAX_PAGE_SIZE = 100;\nexport const DEFAULT_TIMEOUT = 30000;\nexport const MAX_UPLOAD_SIZE = 50 * 1024 * 1024; // 50MB\nexport const SUPPORTED_UPLOAD_FORMATS = ['application/pdf'];\n\n// HTTPçŠ¶æ€ç æ˜ å°„\nexport const HTTP_STATUS_CODES = {\n  OK: 200,\n  CREATED: 201,\n  NO_CONTENT: 204,\n  BAD_REQUEST: 400,\n  UNAUTHORIZED: 401,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  CONFLICT: 409,\n  UNPROCESSABLE_ENTITY: 422,\n  TOO_MANY_REQUESTS: 429,\n  INTERNAL_SERVER_ERROR: 500,\n  SERVICE_UNAVAILABLE: 503\n} as const;\n\n// é”™è¯¯ä»£ç \nexport const ERROR_CODES = {\n  INVALID_RESOURCE_ID: 'INVALID_RESOURCE_ID',\n  RESOURCE_NOT_FOUND: 'RESOURCE_NOT_FOUND',\n  INVALID_FILE_FORMAT: 'INVALID_FILE_FORMAT',\n  FILE_TOO_LARGE: 'FILE_TOO_LARGE',\n  VALIDATION_FAILED: 'VALIDATION_FAILED',\n  CACHE_ERROR: 'CACHE_ERROR',\n  STORAGE_ERROR: 'STORAGE_ERROR',\n  SEARCH_ERROR: 'SEARCH_ERROR',\n  RATE_LIMIT_EXCEEDED: 'RATE_LIMIT_EXCEEDED',\n  INSUFFICIENT_PERMISSIONS: 'INSUFFICIENT_PERMISSIONS'\n} as const;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/types/config-types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3913,3916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3913,3916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4027,4030],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4027,4030],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":236,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4511,4514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4511,4514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":389,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":389,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7576,7579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7576,7579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":448,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":448,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8704,8707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8704,8707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":493,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":493,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9533,9536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9533,9536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":517,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":517,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10014,10017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10014,10017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":618,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":618,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11909,11912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11909,11912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":678,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":678,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13119,13122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13119,13122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":688,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":688,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13379,13382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13379,13382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/types/config.types.ts\n\nimport { SupportedLanguage, ResourceCategory, AccessLevel } from './resource-types';\n\n/**\n * å­˜å‚¨æä¾›å•†ç±»å‹\n */\nexport type StorageProvider = 'local' | 's3' | 'gcs' | 'azure' | 'cloudinary' | 'cdn';\n\n/**\n * ç¼“å­˜ç­–ç•¥\n */\nexport type CacheStrategy = 'lru' | 'lfu' | 'ttl' | 'adaptive';\n\n/**\n * æ—¥å¿—çº§åˆ«\n */\nexport type LogLevel = 'debug' | 'info' | 'warn' | 'error' | 'fatal';\n\n/**\n * ç¯å¢ƒç±»å‹\n */\nexport type Environment = 'development' | 'staging' | 'production' | 'test';\n\n/**\n * å­˜å‚¨é…ç½®\n */\nexport interface StorageConfig {\n  provider: StorageProvider;\n  basePath: string;\n  publicPath?: string;\n  cdnUrl?: string;\n  \n  // æœ¬åœ°å­˜å‚¨é…ç½®\n  local?: {\n    uploadPath: string;\n    staticPath: string;\n    maxFileSize: number;\n    allowedFormats: string[];\n  };\n  \n  // AWS S3é…ç½®\n  s3?: {\n    bucket: string;\n    region: string;\n    accessKeyId?: string;\n    secretAccessKey?: string;\n    endpoint?: string;\n    forcePathStyle?: boolean;\n    encryption?: {\n      enabled: boolean;\n      kmsKeyId?: string;\n    };\n  };\n  \n  // Google Cloud Storageé…ç½®\n  gcs?: {\n    bucket: string;\n    projectId: string;\n    keyFilename?: string;\n    credentials?: object;\n  };\n  \n  // Azure Blob Storageé…ç½®\n  azure?: {\n    containerName: string;\n    connectionString?: string;\n    accountName?: string;\n    accountKey?: string;\n  };\n  \n  // CDNé…ç½®\n  cdn?: {\n    enabled: boolean;\n    baseUrl: string;\n    cacheTtl: number;\n    purgeApiKey?: string;\n  };\n}\n\n/**\n * ç¼“å­˜é…ç½®\n */\nexport interface CacheConfig {\n  enabled: boolean;\n  strategy: CacheStrategy;\n  ttl: number;                    // é»˜è®¤TTLï¼ˆç§’ï¼‰\n  maxSize: number;                // æœ€å¤§æ¡ç›®æ•°\n  maxMemory?: number;             // æœ€å¤§å†…å­˜ä½¿ç”¨ï¼ˆå­—èŠ‚ï¼‰\n  \n  // ä¸åŒç±»å‹èµ„æºçš„TTLè®¾ç½®\n  resourceTtl: {\n    resource: number;\n    search: number;\n    stats: number;\n    validation: number;\n  };\n  \n  // Redisé…ç½®ï¼ˆå¦‚æœä½¿ç”¨Redisä½œä¸ºç¼“å­˜ï¼‰\n  redis?: {\n    enabled: boolean;\n    host: string;\n    port: number;\n    password?: string;\n    db?: number;\n    keyPrefix?: string;\n    connectTimeout?: number;\n    lazyConnect?: boolean;\n    retryDelayOnFailover?: number;\n  };\n  \n  // å†…å­˜ç¼“å­˜é…ç½®\n  memory?: {\n    checkPeriod: number;          // æ¸…ç†æ£€æŸ¥å‘¨æœŸï¼ˆç§’ï¼‰\n    useClones: boolean;           // æ˜¯å¦ä½¿ç”¨å…‹éš†\n    errorOnMissing: boolean;      // ç¼“å­˜æœªå‘½ä¸­æ—¶æ˜¯å¦æŠ›é”™\n  };\n  \n  // é¢„çƒ­é…ç½®\n  warmup?: {\n    enabled: boolean;\n    resources: string[];          // éœ€è¦é¢„çƒ­çš„èµ„æºID\n    categories: ResourceCategory[];\n    priority: 'high' | 'medium' | 'low';\n  };\n}\n\n/**\n * éªŒè¯é…ç½®\n */\nexport interface ValidationConfig {\n  enabled: boolean;\n  mode: 'strict' | 'loose' | 'custom';\n  \n  // æ–‡ä»¶éªŒè¯\n  file: {\n    maxFileSize: number;\n    minFileSize: number;\n    allowedFormats: string[];\n    requireChecksum: boolean;\n    virusScan: boolean;\n  };\n  \n  // å†…å®¹éªŒè¯\n  content: {\n    requireTitle: boolean;\n    requireDescription: boolean;\n    minTitleLength: number;\n    maxTitleLength: number;\n    minDescriptionLength: number;\n    maxDescriptionLength: number;\n    requireKeywords: boolean;\n    minKeywords: number;\n    maxKeywords: number;\n    bannedWords: string[];\n  };\n  \n  // è´¨é‡éªŒè¯\n  quality: {\n    minOverallScore: number;\n    requireAllScores: boolean;\n    autoCalculateOverall: boolean;\n    scoreWeights: {\n      content: number;\n      design: number;\n      accuracy: number;\n      usefulness: number;\n    };\n  };\n  \n  // è®¿é—®æ§åˆ¶éªŒè¯\n  access: {\n    requireAccessLevel: boolean;\n    allowedLevels: AccessLevel[];\n    requireRegions: boolean;\n    defaultRegions: string[];\n  };\n  \n  // è‡ªå®šä¹‰éªŒè¯è§„åˆ™\n  custom?: {\n    enabled: boolean;\n    rules: ValidationRule[];\n  };\n}\n\n/**\n * è‡ªå®šä¹‰éªŒè¯è§„åˆ™\n */\nexport interface ValidationRule {\n  id: string;\n  name: string;\n  description: string;\n  field: string;                  // éªŒè¯çš„å­—æ®µè·¯å¾„\n  type: 'required' | 'format' | 'range' | 'custom';\n  severity: 'error' | 'warning' | 'info';\n  \n  // æ¡ä»¶è®¾ç½®\n  condition?: {\n    field: string;\n    operator: 'equals' | 'not_equals' | 'contains' | 'not_contains' | 'greater_than' | 'less_than';\n    value: any;\n  };\n  \n  // éªŒè¯å‚æ•°\n  params?: {\n    min?: number;\n    max?: number;\n    pattern?: string;\n    allowedValues?: any[];\n    customFunction?: string;      // è‡ªå®šä¹‰éªŒè¯å‡½æ•°å\n  };\n  \n  message: string;\n  suggestion?: string;\n  enabled: boolean;\n}\n\n/**\n * å›½é™…åŒ–é…ç½®\n */\nexport interface I18nConfig {\n  defaultLanguage: SupportedLanguage;\n  supportedLanguages: SupportedLanguage[];\n  fallbackLanguage: SupportedLanguage;\n  \n  // èµ„æºåŠ è½½é…ç½®\n  resources: {\n    loadPath: string;\n    addPath?: string;\n    allowMultiLoading?: boolean;\n  };\n  \n  // æ’å€¼é…ç½®\n  interpolation: {\n    escapeValue: boolean;\n    format?: (value: any, format: string, lng: string) => string;\n  };\n  \n  // å¤æ•°è§„åˆ™\n  pluralSeparator: string;\n  contextSeparator: string;\n  \n  // å‘½åç©ºé—´\n  defaultNS: string;\n  ns: string[];\n  \n  // æ£€æµ‹é…ç½®\n  detection?: {\n    order: ('localStorage' | 'navigator' | 'header' | 'path' | 'subdomain')[];\n    caches: ('localStorage' | 'cookie')[];\n    cookieMinutes?: number;\n    lookupFromPathIndex?: number;\n  };\n}\n\n/**\n * å®‰å…¨é…ç½®\n */\nexport interface SecurityConfig {\n  // æ–‡ä»¶ä¸Šä¼ å®‰å…¨\n  upload: {\n    allowedMimeTypes: string[];\n    maxFileSize: number;\n    scanVirus: boolean;\n    quarantineOnThreat: boolean;\n    allowExecutables: boolean;\n  };\n  \n  // è®¿é—®æ§åˆ¶\n  access: {\n    enableRateLimiting: boolean;\n    rateLimit: {\n      windowMs: number;           // æ—¶é—´çª—å£ï¼ˆæ¯«ç§’ï¼‰\n      maxRequests: number;        // æœ€å¤§è¯·æ±‚æ•°\n      skipSuccessfulRequests: boolean;\n    };\n    \n    // CORSé…ç½®\n    cors: {\n      origin: string | string[] | boolean;\n      credentials: boolean;\n      allowedHeaders: string[];\n      exposedHeaders: string[];\n    };\n    \n    // CSPé…ç½®\n    csp: {\n      enabled: boolean;\n      directives: Record<string, string[]>;\n    };\n  };\n  \n  // æ•°æ®ä¿æŠ¤\n  dataProtection: {\n    encryptSensitiveData: boolean;\n    hashPasswords: boolean;\n    saltRounds: number;\n    anonymizeIPs: boolean;\n    gdprCompliant: boolean;\n  };\n  \n  // APIå®‰å…¨\n  api: {\n    requireApiKey: boolean;\n    apiKeyHeader: string;\n    enableJWT: boolean;\n    jwtSecret?: string;\n    jwtExpiresIn: string;\n  };\n}\n\n/**\n * ç›‘æ§é…ç½®\n */\nexport interface MonitoringConfig {\n  enabled: boolean;\n  \n  // æ€§èƒ½ç›‘æ§\n  performance: {\n    enabled: boolean;\n    sampleRate: number;           // é‡‡æ ·ç‡ (0-1)\n    trackPageLoads: boolean;\n    trackAPIRequests: boolean;\n    slowQueryThreshold: number;   // æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆæ¯«ç§’ï¼‰\n  };\n  \n  // é”™è¯¯ç›‘æ§\n  errorTracking: {\n    enabled: boolean;\n    service: 'sentry' | 'bugsnag' | 'rollbar' | 'custom';\n    dsn?: string;\n    environment: Environment;\n    release?: string;\n    sampleRate: number;\n    beforeSend?: string;          // é¢„å¤„ç†å‡½æ•°å\n  };\n  \n  // æ—¥å¿—é…ç½®\n  logging: {\n    enabled: boolean;\n    level: LogLevel;\n    format: 'json' | 'text' | 'structured';\n    destination: 'console' | 'file' | 'remote' | 'multiple';\n    \n    // æ–‡ä»¶æ—¥å¿—é…ç½®\n    file?: {\n      path: string;\n      maxSize: string;            // e.g., '10MB'\n      maxFiles: number;\n      datePattern: string;\n    };\n    \n    // è¿œç¨‹æ—¥å¿—é…ç½®\n    remote?: {\n      endpoint: string;\n      apiKey?: string;\n      batchSize: number;\n      flushInterval: number;\n    };\n  };\n  \n  // å¥åº·æ£€æŸ¥\n  healthCheck: {\n    enabled: boolean;\n    endpoint: string;\n    interval: number;             // æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰\n    timeout: number;              // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n    checks: HealthCheck[];\n  };\n  \n  // æŒ‡æ ‡æ”¶é›†\n  metrics: {\n    enabled: boolean;\n    service: 'prometheus' | 'datadog' | 'newrelic' | 'custom';\n    endpoint?: string;\n    pushInterval: number;         // æ¨é€é—´éš”ï¼ˆç§’ï¼‰\n    customMetrics: string[];\n  };\n}\n\n/**\n * å¥åº·æ£€æŸ¥é¡¹\n */\nexport interface HealthCheck {\n  name: string;\n  type: 'database' | 'storage' | 'cache' | 'api' | 'custom';\n  timeout: number;\n  retries: number;\n  params?: Record<string, any>;\n}\n\n/**\n * æœç´¢é…ç½®\n */\nexport interface SearchConfig {\n  enabled: boolean;\n  provider: 'elasticsearch' | 'algolia' | 'typesense' | 'built-in';\n  \n  // ç´¢å¼•é…ç½®\n  indexing: {\n    batchSize: number;\n    updateInterval: number;       // å¢é‡æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰\n    fullRebuildInterval: number;  // å…¨é‡é‡å»ºé—´éš”ï¼ˆç§’ï¼‰\n    includeContent: boolean;      // æ˜¯å¦ç´¢å¼•PDFå†…å®¹\n    languages: SupportedLanguage[];\n  };\n  \n  // æœç´¢è¡Œä¸º\n  search: {\n    fuzzySearch: boolean;\n    stemming: boolean;\n    synonyms: boolean;\n    highlightResults: boolean;\n    maxResults: number;\n    timeout: number;              // æœç´¢è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰\n  };\n  \n  // æƒé‡é…ç½®\n  weights: {\n    title: number;\n    description: number;\n    content: number;\n    tags: number;\n    keywords: number;\n  };\n  \n  // Elasticsearché…ç½®\n  elasticsearch?: {\n    node: string;\n    apiKey?: string;\n    auth?: {\n      username: string;\n      password: string;\n    };\n    ssl?: {\n      ca?: string;\n      rejectUnauthorized: boolean;\n    };\n    requestTimeout: number;\n    maxRetries: number;\n  };\n  \n  // Algoliaé…ç½®\n  algolia?: {\n    applicationId: string;\n    apiKey: string;\n    indexName: string;\n    settings: Record<string, any>;\n  };\n}\n\n/**\n * åˆ†æé…ç½®\n */\nexport interface AnalyticsConfig {\n  enabled: boolean;\n  providers: AnalyticsProvider[];\n  \n  // æ•°æ®æ”¶é›†\n  collection: {\n    trackDownloads: boolean;\n    trackViews: boolean;\n    trackSearches: boolean;\n    trackErrors: boolean;\n    anonymizeUsers: boolean;\n    retentionDays: number;\n  };\n  \n  // æŠ¥å‘Šç”Ÿæˆ\n  reporting: {\n    enabled: boolean;\n    schedule: string;             // Cronè¡¨è¾¾å¼\n    recipients: string[];\n    format: 'pdf' | 'html' | 'json';\n    includeCharts: boolean;\n  };\n  \n  // å®æ—¶åˆ†æ\n  realtime: {\n    enabled: boolean;\n    updateInterval: number;       // æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰\n    maxDataPoints: number;\n  };\n}\n\n/**\n * åˆ†ææä¾›å•†\n */\nexport interface AnalyticsProvider {\n  name: string;\n  type: 'google_analytics' | 'matomo' | 'mixpanel' | 'amplitude' | 'custom';\n  enabled: boolean;\n  config: Record<string, any>;\n}\n\n/**\n * å¤‡ä»½é…ç½®\n */\nexport interface BackupConfig {\n  enabled: boolean;\n  schedule: string;               // Cronè¡¨è¾¾å¼\n  \n  // å¤‡ä»½ç­–ç•¥\n  strategy: {\n    type: 'full' | 'incremental' | 'differential';\n    retention: {\n      daily: number;              // ä¿ç•™å¤©æ•°\n      weekly: number;             // ä¿ç•™å‘¨æ•°\n      monthly: number;            // ä¿ç•™æœˆæ•°\n      yearly: number;             // ä¿ç•™å¹´æ•°\n    };\n  };\n  \n  // å­˜å‚¨ä½ç½®\n  storage: {\n    provider: StorageProvider;\n    config: Record<string, any>;\n    encryption: boolean;\n    compression: boolean;\n  };\n  \n  // éªŒè¯è®¾ç½®\n  verification: {\n    enabled: boolean;\n    checkIntegrity: boolean;\n    testRestore: boolean;\n    schedule: string;\n  };\n}\n\n/**\n * ä¸»é…ç½®æ¥å£\n */\nexport interface PDFResourceConfig {\n  // åŸºç¡€ä¿¡æ¯\n  version: string;\n  environment: Environment;\n  lastUpdated: string;\n  \n  // æ ¸å¿ƒé…ç½®\n  storage: StorageConfig;\n  cache: CacheConfig;\n  validation: ValidationConfig;\n  i18n: I18nConfig;\n  security: SecurityConfig;\n  monitoring: MonitoringConfig;\n  search?: SearchConfig;\n  analytics?: AnalyticsConfig;\n  backup?: BackupConfig;\n  \n  // åŠŸèƒ½å¼€å…³\n  features: {\n    preview: boolean;\n    download: boolean;\n    search: boolean;\n    analytics: boolean;\n    comments: boolean;\n    ratings: boolean;\n    recommendations: boolean;\n    collections: boolean;\n    versioning: boolean;\n    sharing: boolean;\n  };\n  \n  // é™åˆ¶è®¾ç½®\n  limits: {\n    maxResources: number;\n    maxFileSize: number;\n    maxPreviewPages: number;\n    maxSearchResults: number;\n    maxDownloadsPerDay: number;\n    maxAPIRequestsPerMinute: number;\n  };\n  \n  // é»˜è®¤å€¼\n  defaults: {\n    language: SupportedLanguage;\n    category: ResourceCategory;\n    accessLevel: AccessLevel;\n    cacheTime: number;\n    pageSize: number;\n  };\n  \n  // å®éªŒæ€§åŠŸèƒ½\n  experimental?: {\n    enableAI: boolean;\n    enableMLRecommendations: boolean;\n    enableAdvancedSearch: boolean;\n    enableRealTimeSync: boolean;\n  };\n}\n\n/**\n * é…ç½®éªŒè¯ç»“æœ\n */\nexport interface ConfigValidationResult {\n  isValid: boolean;\n  errors: ConfigValidationError[];\n  warnings: ConfigValidationError[];\n  \n  sections: {\n    [K in keyof PDFResourceConfig]?: {\n      isValid: boolean;\n      errors: ConfigValidationError[];\n      warnings: ConfigValidationError[];\n    };\n  };\n}\n\n/**\n * é…ç½®éªŒè¯é”™è¯¯\n */\nexport interface ConfigValidationError {\n  path: string;\n  message: string;\n  severity: 'error' | 'warning';\n  suggestion?: string;\n  value?: any;\n  expectedType?: string;\n}\n\n/**\n * è¿è¡Œæ—¶é…ç½®\n */\nexport interface RuntimeConfig {\n  isProduction: boolean;\n  isDevelopment: boolean;\n  isTest: boolean;\n  \n  // åŠ¨æ€é…ç½®\n  dynamic: {\n    maintenanceMode: boolean;\n    readOnlyMode: boolean;\n    featureFlags: Record<string, boolean>;\n    rateLimit: Record<string, number>;\n  };\n  \n  // ç³»ç»Ÿä¿¡æ¯\n  system: {\n    nodeVersion: string;\n    platform: string;\n    architecture: string;\n    memory: {\n      total: number;\n      used: number;\n      available: number;\n    };\n    uptime: number;\n  };\n}\n\n// é…ç½®æ„å»ºå™¨\nexport class ConfigBuilder {\n  private config: Partial<PDFResourceConfig> = {};\n  \n  setEnvironment(env: Environment): this {\n    this.config.environment = env;\n    return this;\n  }\n  \n  setStorage(storage: StorageConfig): this {\n    this.config.storage = storage;\n    return this;\n  }\n  \n  setCache(cache: CacheConfig): this {\n    this.config.cache = cache;\n    return this;\n  }\n  \n  setValidation(validation: ValidationConfig): this {\n    this.config.validation = validation;\n    return this;\n  }\n  \n  enableFeature(feature: keyof PDFResourceConfig['features'], enabled: boolean = true): this {\n    if (!this.config.features) {\n      this.config.features = {} as any;\n    }\n    if (this.config.features) {\n      this.config.features[feature] = enabled;\n    }\n    return this;\n  }\n  \n  setLimit(limit: keyof PDFResourceConfig['limits'], value: number): this {\n    if (!this.config.limits) {\n      this.config.limits = {} as any;\n    }\n    if (this.config.limits) {\n      this.config.limits[limit] = value;\n    }\n    return this;\n  }\n  \n  build(): PDFResourceConfig {\n    // åº”ç”¨é»˜è®¤å€¼å’ŒéªŒè¯\n    return this.applyDefaults() as PDFResourceConfig;\n  }\n  \n  private applyDefaults(): Partial<PDFResourceConfig> {\n    // å®ç°é»˜è®¤å€¼é€»è¾‘\n    return {\n      version: '1.0.0',\n      environment: 'development',\n      lastUpdated: new Date().toISOString(),\n      ...this.config\n    };\n  }\n}\n\n// ç±»å‹ä¿æŠ¤å‡½æ•°\nexport function isValidEnvironment(env: string): env is Environment {\n  return ['development', 'staging', 'production', 'test'].includes(env);\n}\n\nexport function isValidStorageProvider(provider: string): provider is StorageProvider {\n  return ['local', 's3', 'gcs', 'azure', 'cloudinary', 'cdn'].includes(provider);\n}\n\nexport function isValidLogLevel(level: string): level is LogLevel {\n  return ['debug', 'info', 'warn', 'error', 'fatal'].includes(level);\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1270,1273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1270,1273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1755,1758],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1755,1758],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1918,1921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1918,1921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2117,2120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2117,2120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2796,2799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2796,2799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * PDFèµ„æºç®¡ç†ç³»ç»Ÿ - ç±»å‹å®šä¹‰ç´¢å¼•\n * \n * ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰ç±»å‹å®šä¹‰ï¼Œæ–¹ä¾¿å…¶ä»–æ¨¡å—ä½¿ç”¨\n */\n\n// é‡æ–°å¯¼å‡ºç°æœ‰çš„ç±»å‹å®šä¹‰\nexport * from './resource-types';\nexport * from './config-types';\nexport * from './api-types';\n\n// è¡¥å……åŸºç¡€æšä¸¾ç±»å‹\nexport enum ResourceCategory {\n  RELIEF = 'relief',\n  EDUCATION = 'education',\n  LIFESTYLE = 'lifestyle',\n  MEDICAL = 'medical',\n  EMERGENCY = 'emergency',\n  WELLNESS = 'wellness'\n}\n\nexport enum ResourceType {\n  PDF = 'pdf',\n  CHECKLIST = 'checklist',\n  GUIDE = 'guide',\n  TEMPLATE = 'template',\n  WORKBOOK = 'workbook',\n  CARD = 'card'\n}\n\nexport enum ResourceStatus {\n  ACTIVE = 'active',\n  INACTIVE = 'inactive',\n  PENDING = 'pending',\n  DEPRECATED = 'deprecated',\n  MAINTENANCE = 'maintenance'\n}\n\n// è¡¥å……åŸºç¡€æ¥å£ç±»å‹\nexport interface EnvironmentConfig {\n  production: boolean;\n  apiUrl: string;\n  cdnUrl: string;\n  debugMode: boolean;\n  logLevel: 'error' | 'warn' | 'info' | 'debug';\n}\n\nexport interface SystemConfig {\n  cache?: CacheConfig;\n  validation?: ValidationConfig;\n  errorHandling?: ErrorHandlingConfig;\n  environment?: EnvironmentConfig;\n}\n\nexport interface CacheConfig {\n  enabled: boolean;\n  ttl: number;\n  maxSize: number;\n  cleanupInterval: number;\n}\n\nexport interface ValidationConfig {\n  enabled: boolean;\n  strictMode: boolean;\n  requiredFields: string[];\n  customValidators: any[];\n}\n\nexport interface ErrorHandlingConfig {\n  enabled: boolean;\n  logLevel: 'error' | 'warn' | 'info' | 'debug';\n  retryAttempts: number;\n  timeout: number;\n}\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n  score: number;\n}\n\n// äº‹ä»¶ç±»å‹\nexport interface ResourceEvent {\n  type: 'resource_created' | 'resource_updated' | 'resource_deleted' | 'resource_accessed';\n  resourceId: string;\n  timestamp: Date;\n  metadata?: Record<string, any>;\n}\n\nexport interface SystemEvent {\n  type: 'system_started' | 'system_stopped' | 'cache_cleared' | 'health_check';\n  timestamp: Date;\n  data?: Record<string, any>;\n}\n\nexport interface UserEvent {\n  type: 'user_download' | 'user_preview' | 'user_search' | 'user_view';\n  userId?: string;\n  resourceId?: string;\n  timestamp: Date;\n  metadata?: Record<string, any>;\n}\n\n// æœç´¢å’Œè¿‡æ»¤ç›¸å…³ç±»å‹\nexport interface SearchParams {\n  query?: string;\n  category?: ResourceCategory;\n  type?: ResourceType;\n  status?: ResourceStatus;\n  tags?: string[];\n  filters?: FilterOptions;\n  pagination?: PaginationOptions;\n  sort?: SortOptions;\n}\n\nexport interface FilterOptions {\n  dateRange?: {\n    start: Date;\n    end: Date;\n  };\n  sizeRange?: {\n    min: number;\n    max: number;\n  };\n  quality?: 'high' | 'medium' | 'low';\n  language?: string;\n}\n\nexport interface PaginationOptions {\n  page: number;\n  limit: number;\n  offset?: number;\n}\n\nexport interface SortOptions {\n  field: string;\n  order: 'asc' | 'desc';\n}\n\n// èµ„æºæ“ä½œç»“æœç±»å‹\nexport interface OperationResult<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  timestamp: Date;\n}\n\nexport interface ResourceOperationResult extends OperationResult {\n  resourceId?: string;\n  operation: 'create' | 'read' | 'update' | 'delete';\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/types/resource-types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":346,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7409,7412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7409,7412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":377,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":377,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7964,7967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7964,7967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":392,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":392,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8324,8327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8324,8327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/types/resource.types.ts\n\n/**\n * æ”¯æŒçš„è¯­è¨€ç±»å‹\n */\nexport type SupportedLanguage = 'zh' | 'en' | 'es' | 'fr';\n\n/**\n * èµ„æºç±»åˆ«\n */\nexport type ResourceCategory = \n  | 'immediate-relief'  // å³æ—¶ç¼“è§£\n  | 'preparation'       // è®¡åˆ’å‡†å¤‡\n  | 'learning'         // å­¦ä¹ ç†è§£\n  | 'management'       // é•¿æœŸç®¡ç†\n  | 'assessment'       // è¯„ä¼°å·¥å…·\n  | 'template';        // æ¨¡æ¿è¡¨æ ¼\n\n/**\n * è®¿é—®æƒé™ç±»å‹\n */\nexport type AccessLevel = 'public' | 'protected' | 'premium' | 'private';\n\n/**\n * èµ„æºçŠ¶æ€\n */\nexport type ResourceStatus = 'active' | 'draft' | 'archived' | 'deprecated';\n\n/**\n * å¤šè¯­è¨€å­—ç¬¦ä¸²\n */\nexport interface LocalizedString {\n  zh: string;\n  en: string;\n  es?: string;\n  fr?: string;\n}\n\n/**\n * è´¨é‡è¯„åˆ†\n */\nexport interface QualityScore {\n  content: number;     // å†…å®¹è´¨é‡ (1-10)\n  design: number;      // è®¾è®¡è´¨é‡ (1-10)\n  accuracy: number;    // å‡†ç¡®æ€§ (1-10)\n  usefulness: number;  // å®ç”¨æ€§ (1-10)\n  overall: number;     // ç»¼åˆè¯„åˆ† (è‡ªåŠ¨è®¡ç®—)\n}\n\n/**\n * è®¿é—®é…ç½®\n */\nexport interface AccessConfig {\n  level: AccessLevel;\n  public: boolean;\n  regions: string[];          // æ”¯æŒçš„åœ°åŒº ['all', 'cn', 'us', 'eu']\n  ageRestriction?: number;    // å¹´é¾„é™åˆ¶\n  requireAuth?: boolean;      // æ˜¯å¦éœ€è¦è®¤è¯\n  premiumOnly?: boolean;      // æ˜¯å¦ä»…é™é«˜çº§ç”¨æˆ·\n}\n\n/**\n * åˆ†ææ•°æ®\n */\nexport interface AnalyticsData {\n  downloadCount: number;\n  viewCount: number;\n  shareCount?: number;\n  rating: number;           // å¹³å‡è¯„åˆ† (0-5)\n  reviewCount?: number;     // è¯„è®ºæ•°é‡\n  lastAccessedAt?: Date;    // æœ€åè®¿é—®æ—¶é—´\n  popularityScore?: number; // å—æ¬¢è¿ç¨‹åº¦ (è‡ªåŠ¨è®¡ç®—)\n}\n\n/**\n * ç”¨æˆ·è¯„è®º\n */\nexport interface UserReview {\n  id: string;\n  userId?: string;\n  userName?: string;\n  rating: number;       // 1-5æ˜Ÿè¯„åˆ†\n  comment: string;\n  createdAt: Date;\n  helpful: number;      // æœ‰ç”¨ç¥¨æ•°\n  reported?: boolean;   // æ˜¯å¦è¢«ä¸¾æŠ¥\n}\n\n/**\n * èµ„æºå…ƒæ•°æ®\n */\nexport interface ResourceMetadata {\n  title: LocalizedString;\n  description: LocalizedString;\n  author?: string;\n  coAuthors?: string[];\n  keywords: string[];\n  thumbnail?: string;           // ç¼©ç•¥å›¾URL\n  banner?: string;             // æ¨ªå¹…å›¾URL\n  featured: boolean;           // æ˜¯å¦ç²¾é€‰\n  trending?: boolean;          // æ˜¯å¦çƒ­é—¨\n  quality: QualityScore;\n  difficulty?: 'beginner' | 'intermediate' | 'advanced';  // éš¾åº¦çº§åˆ«\n  estimatedReadTime?: number;  // é¢„è®¡é˜…è¯»æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰\n  lastReviewed?: Date;        // æœ€åå®¡æ ¸æ—¶é—´\n  reviewedBy?: string;        // å®¡æ ¸äººå‘˜\n}\n\n/**\n * PDFå†…å®¹é…ç½®\n */\nexport interface PDFContent {\n  preview: {\n    enabled: boolean;\n    pages: number[];          // å¯é¢„è§ˆçš„é¡µé¢\n    watermark?: string;       // æ°´å°æ–‡å­—\n    maxPreviewPages?: number; // æœ€å¤§é¢„è§ˆé¡µæ•°\n  };\n  download: {\n    enabled: boolean;\n    requireAuth?: boolean;\n    trackDownloads: boolean;\n    downloadLimit?: number;   // æ¯æ—¥ä¸‹è½½é™åˆ¶\n    fileFormat?: 'pdf' | 'compressed'; // æ–‡ä»¶æ ¼å¼\n  };\n  search: {\n    indexed: boolean;\n    extractedText?: string;   // æå–çš„æ–‡æœ¬å†…å®¹\n    searchKeywords: string[]; // æœç´¢å…³é”®è¯\n    searchableContent?: {     // å¯æœç´¢çš„ç»“æ„åŒ–å†…å®¹\n      sections: {\n        title: string;\n        content: string;\n        pageNumber: number;\n      }[];\n    };\n  };\n  interactive?: {\n    hasForm: boolean;         // æ˜¯å¦åŒ…å«è¡¨å•\n    formFields?: string[];    // è¡¨å•å­—æ®µ\n    hasCalculator?: boolean;  // æ˜¯å¦åŒ…å«è®¡ç®—å™¨\n    hasLinks?: boolean;       // æ˜¯å¦åŒ…å«å¤–éƒ¨é“¾æ¥\n  };\n}\n\n/**\n * ç‰ˆæœ¬ä¿¡æ¯\n */\nexport interface VersionInfo {\n  version: string;          // ç‰ˆæœ¬å· (e.g., \"2.1.0\")\n  releaseDate: Date;        // å‘å¸ƒæ—¥æœŸ\n  changelog?: string;       // æ›´æ–°æ—¥å¿—\n  isLatest: boolean;        // æ˜¯å¦æœ€æ–°ç‰ˆæœ¬\n  deprecated?: boolean;     // æ˜¯å¦å·²åºŸå¼ƒ\n  migrationPath?: string;   // è¿ç§»è·¯å¾„è¯´æ˜\n}\n\n/**\n * åŸºç¡€èµ„æºæ¥å£\n */\nexport interface BaseResource {\n  id: string;\n  type: 'pdf' | 'document' | 'template' | 'guide';\n  status: ResourceStatus;\n  version: VersionInfo;\n  createdAt: Date;\n  updatedAt: Date;\n  createdBy?: string;\n  updatedBy?: string;\n  metadata: ResourceMetadata;\n  access: AccessConfig;\n  analytics: AnalyticsData;\n}\n\n/**\n * PDFèµ„æºæ¥å£\n */\nexport interface PDFResource extends BaseResource {\n  type: 'pdf';\n  filename: string;\n  fileSize: number;         // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰\n  pageCount: number;        // é¡µæ•°\n  language: SupportedLanguage;\n  category: ResourceCategory;\n  tags: string[];\n  content: PDFContent;\n  \n  // PDFç‰¹æœ‰å±æ€§\n  pdfMetadata?: {\n    producer?: string;      // PDFç”Ÿæˆå·¥å…·\n    creator?: string;       // åˆ›å»ºè€…åº”ç”¨\n    subject?: string;       // PDFä¸»é¢˜\n    securityLevel?: 'none' | 'password' | 'certificate'; // å®‰å…¨çº§åˆ«\n    permissions?: {         // æƒé™è®¾ç½®\n      printing: boolean;\n      copying: boolean;\n      commenting: boolean;\n      formFilling: boolean;\n    };\n  };\n  \n  // å…³è”èµ„æº\n  relatedResources?: {\n    type: 'prerequisite' | 'follow-up' | 'related' | 'alternative';\n    resourceId: string;\n    description?: string;\n  }[];\n  \n  // æœ¬åœ°åŒ–å˜ä½“\n  localizedVersions?: {\n    language: SupportedLanguage;\n    resourceId: string;\n    completeness: number;   // æœ¬åœ°åŒ–å®Œæˆåº¦ (0-1)\n  }[];\n}\n\n/**\n * èµ„æºé›†åˆ\n */\nexport interface ResourceCollection {\n  id: string;\n  name: LocalizedString;\n  description: LocalizedString;\n  resourceIds: string[];\n  category: ResourceCategory;\n  featured: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n  thumbnail?: string;\n  estimatedCompletionTime?: number; // é¢„è®¡å®Œæˆæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰\n}\n\n/**\n * æœç´¢é€‰é¡¹\n */\nexport interface SearchOptions {\n  query?: string;\n  category?: ResourceCategory;\n  tags?: string[];\n  language?: SupportedLanguage;\n  difficulty?: 'beginner' | 'intermediate' | 'advanced';\n  minQuality?: number;\n  maxFileSize?: number;\n  hasPreview?: boolean;\n  featuredOnly?: boolean;\n  limit?: number;\n  offset?: number;\n  sortBy?: 'relevance' | 'quality' | 'date' | 'popularity' | 'downloads';\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * æœç´¢ç»“æœ\n */\nexport interface SearchResult {\n  resource: PDFResource;\n  score: number;            // ç›¸å…³æ€§è¯„åˆ†\n  matchedFields: string[];  // åŒ¹é…çš„å­—æ®µ\n  highlights?: {            // é«˜äº®æ‘˜è¦\n    title?: string;\n    description?: string;\n    content?: string;\n  };\n}\n\n/**\n * åˆ†é¡µæœç´¢ç»“æœ\n */\nexport interface PaginatedSearchResult {\n  results: SearchResult[];\n  total: number;\n  page: number;\n  pageSize: number;\n  hasNext: boolean;\n  hasPrevious: boolean;\n  facets?: {               // æœç´¢åˆ†é¢\n    categories: { category: ResourceCategory; count: number }[];\n    languages: { language: SupportedLanguage; count: number }[];\n    tags: { tag: string; count: number }[];\n    quality: { range: string; count: number }[];\n  };\n}\n\n/**\n * èµ„æºç»Ÿè®¡\n */\nexport interface ResourceStats {\n  totalCount: number;\n  totalSize: number;        // æ€»æ–‡ä»¶å¤§å°\n  averageQuality: number;\n  totalDownloads: number;\n  totalViews: number;\n  lastUpdated: number;      // æ—¶é—´æˆ³\n  \n  byCategory: Record<ResourceCategory, number>;\n  byLanguage: Record<SupportedLanguage, number>;\n  byStatus: Record<ResourceStatus, number>;\n  \n  topResources: {\n    mostDownloaded: { resourceId: string; count: number }[];\n    highestRated: { resourceId: string; rating: number }[];\n    mostRecent: { resourceId: string; updatedAt: Date }[];\n    trending: { resourceId: string; score: number }[];\n  };\n  \n  // æ—¶é—´åºåˆ—æ•°æ®\n  timeline?: {\n    date: string;\n    downloads: number;\n    views: number;\n    newResources: number;\n  }[];\n}\n\n/**\n * éªŒè¯é”™è¯¯\n */\nexport interface ValidationError {\n  field: string;\n  message: string;\n  severity: 'error' | 'warning' | 'info';\n  code?: string;\n  suggestion?: string;\n}\n\n/**\n * éªŒè¯ç»“æœ\n */\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ValidationError[];\n  warnings: ValidationError[];\n  suggestions?: ValidationError[];\n  \n  summary: {\n    totalChecks: number;\n    passedChecks: number;\n    errorCount: number;\n    warningCount: number;\n  };\n}\n\n/**\n * ç¼“å­˜æ¡ç›®\n */\nexport interface CacheEntry<T = any> {\n  key: string;\n  value: T;\n  createdAt: Date;\n  expiresAt: Date;\n  accessCount: number;\n  lastAccessedAt: Date;\n  size?: number;           // æ¡ç›®å¤§å°ï¼ˆå­—èŠ‚ï¼‰\n}\n\n/**\n * ç¼“å­˜ç»Ÿè®¡\n */\nexport interface CacheStats {\n  totalEntries: number;\n  totalSize: number;\n  hitRate: number;         // å‘½ä¸­ç‡\n  evictionCount: number;   // é©±é€æ¬¡æ•°\n  oldestEntry?: Date;\n  newestEntry?: Date;\n  mostAccessedKey?: string;\n}\n\n/**\n * é”™è¯¯ä¸Šä¸‹æ–‡\n */\nexport interface ErrorContext {\n  operation: string;\n  resourceId?: string;\n  userId?: string;\n  timestamp: Date;\n  metadata?: Record<string, any>;\n  stackTrace?: string;\n  userAgent?: string;\n  ip?: string;\n}\n\n/**\n * ç³»ç»Ÿäº‹ä»¶\n */\nexport interface SystemEvent {\n  id: string;\n  type: 'resource_created' | 'resource_updated' | 'resource_deleted' | \n        'resource_accessed' | 'search_performed' | 'error_occurred' |\n        'user_action' | 'system_maintenance';\n  timestamp: Date;\n  data: Record<string, any>;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  source: string;          // äº‹ä»¶æ¥æº\n  correlationId?: string;  // å…³è”ID\n}\n\n/**\n * å¯¼å‡º/å¯¼å…¥æ ¼å¼\n */\nexport interface ExportFormat {\n  format: 'json' | 'csv' | 'xlsx' | 'xml';\n  options?: {\n    includeMetadata?: boolean;\n    includeAnalytics?: boolean;\n    compression?: boolean;\n    encryption?: boolean;\n  };\n}\n\n/**\n * æ‰¹é‡æ“ä½œç»“æœ\n */\nexport interface BatchOperationResult {\n  totalCount: number;\n  successCount: number;\n  errorCount: number;\n  errors: Array<{\n    resourceId: string;\n    error: string;\n  }>;\n  warnings: Array<{\n    resourceId: string;\n    warning: string;\n  }>;\n  duration: number;        // æ“ä½œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰\n}\n\n// ç±»å‹ä¿æŠ¤å‡½æ•°\nexport function isPDFResource(resource: BaseResource): resource is PDFResource {\n  return resource.type === 'pdf';\n}\n\nexport function isValidLanguage(lang: string): lang is SupportedLanguage {\n  return ['zh', 'en', 'es', 'fr'].includes(lang);\n}\n\nexport function isValidCategory(category: string): category is ResourceCategory {\n  return [\n    'immediate-relief',\n    'preparation', \n    'learning',\n    'management',\n    'assessment',\n    'template'\n  ].includes(category);\n}\n\nexport function isValidAccessLevel(level: string): level is AccessLevel {\n  return ['public', 'protected', 'premium', 'private'].includes(level);\n}\n\n// å¸¸é‡å®šä¹‰\nexport const RESOURCE_CATEGORIES: Record<ResourceCategory, LocalizedString> = {\n  'immediate-relief': {\n    zh: 'å³æ—¶ç¼“è§£',\n    en: 'Immediate Relief'\n  },\n  'preparation': {\n    zh: 'è®¡åˆ’å‡†å¤‡',\n    en: 'Preparation'\n  },\n  'learning': {\n    zh: 'å­¦ä¹ ç†è§£',\n    en: 'Learning'\n  },\n  'management': {\n    zh: 'é•¿æœŸç®¡ç†',\n    en: 'Management'\n  },\n  'assessment': {\n    zh: 'è¯„ä¼°å·¥å…·',\n    en: 'Assessment'\n  },\n  'template': {\n    zh: 'æ¨¡æ¿è¡¨æ ¼',\n    en: 'Templates'\n  }\n};\n\nexport const SUPPORTED_LANGUAGES: Record<SupportedLanguage, string> = {\n  zh: 'ä¸­æ–‡',\n  en: 'English',\n  es: 'EspaÃ±ol',\n  fr: 'FranÃ§ais'\n};\n\nexport const DEFAULT_QUALITY_SCORE: QualityScore = {\n  content: 5,\n  design: 5,\n  accuracy: 5,\n  usefulness: 5,\n  overall: 5\n};\n\nexport const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nexport const MAX_PREVIEW_PAGES = 5;\nexport const DEFAULT_CACHE_TTL = 3600; // 1å°æ—¶\nexport const MAX_SEARCH_RESULTS = 100;","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/utils/id-mapper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/utils/metadata-extractor.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LocalizedString' is defined but never used.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'QualityScore' is defined but never used.","line":3,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is assigned a value but never used.","line":228,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":228,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'pdfMetadata' is defined but never used.","line":473,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":473,"endColumn":16}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// lib/pdf-resources/utils/metadata-extractor.ts\n\nimport { PDFResource, LocalizedString, QualityScore, ResourceCategory, SupportedLanguage } from '../types/resource-types';\nimport { BUSINESS_CONSTANTS } from '../../../constants/business.constants';\n\n/**\n * æ–‡ä»¶å…ƒæ•°æ®æ¥å£\n */\ninterface FileMetadata {\n  filename: string;\n  fileSize: number;\n  mimeType: string;\n  createdDate?: Date;\n  modifiedDate?: Date;\n  checksum?: string;\n  encoding?: string;\n}\n\n/**\n * PDFç‰¹å®šå…ƒæ•°æ®\n */\ninterface PDFMetadata {\n  title?: string;\n  author?: string;\n  subject?: string;\n  keywords?: string;\n  creator?: string;\n  producer?: string;\n  creationDate?: Date;\n  modificationDate?: Date;\n  pageCount: number;\n  pdfVersion?: string;\n  encrypted: boolean;\n  permissions?: {\n    printing: boolean;\n    copying: boolean;\n    commenting: boolean;\n    formFilling: boolean;\n  };\n  linearized?: boolean;\n  tagged?: boolean;\n}\n\n/**\n * å†…å®¹åˆ†æç»“æœ\n */\ninterface ContentAnalysis {\n  language: SupportedLanguage;\n  languageConfidence: number;\n  readabilityScore: number;\n  sentiment: 'positive' | 'neutral' | 'negative';\n  sentimentScore: number;\n  keyPhrases: string[];\n  topics: Array<{\n    topic: string;\n    confidence: number;\n  }>;\n  complexity: 'beginner' | 'intermediate' | 'advanced';\n  estimatedReadingTime: number; // åˆ†é’Ÿ\n  wordCount: number;\n  characters: number;\n}\n\n/**\n * è‡ªåŠ¨åˆ†ç±»ç»“æœ\n */\ninterface AutoCategorizationResult {\n  suggestedCategory: ResourceCategory;\n  confidence: number;\n  alternativeCategories: Array<{\n    category: ResourceCategory;\n    confidence: number;\n    reasoning: string;\n  }>;\n  reasoning: string;\n}\n\n/**\n * è´¨é‡è¯„ä¼°ç»“æœ\n */\ninterface QualityAssessment {\n  overallScore: number;\n  contentScore: number;\n  designScore: number;\n  accuracyScore: number;\n  usefulnessScore: number;\n  factors: Array<{\n    factor: string;\n    score: number;\n    weight: number;\n    description: string;\n  }>;\n  improvements: string[];\n}\n\n/**\n * æå–é€‰é¡¹\n */\ninterface ExtractionOptions {\n  includeTextContent?: boolean;\n  includeImages?: boolean;\n  includeMetadata?: boolean;\n  includeQualityAssessment?: boolean;\n  includeContentAnalysis?: boolean;\n  includeCategorization?: boolean;\n  language?: SupportedLanguage;\n  preserveFormatting?: boolean;\n  maxTextLength?: number;\n}\n\n/**\n * æå–ç»“æœ\n */\ninterface ExtractionResult {\n  fileMetadata: FileMetadata;\n  pdfMetadata?: PDFMetadata;\n  textContent?: string;\n  contentAnalysis?: ContentAnalysis;\n  categorization?: AutoCategorizationResult;\n  qualityAssessment?: QualityAssessment;\n  suggestedMetadata?: Partial<PDFResource['metadata']>;\n  extractedKeywords?: string[];\n  images?: Array<{\n    pageNumber: number;\n    type: 'image' | 'chart' | 'diagram';\n    description?: string;\n  }>;\n  errors?: string[];\n  warnings?: string[];\n}\n\n/**\n * å…ƒæ•°æ®æå–å™¨ç±»\n */\nexport class MetadataExtractor {\n  private static instance: MetadataExtractor;\n\n  private constructor() {}\n\n  /**\n   * è·å–å•ä¾‹å®ä¾‹\n   */\n  static getInstance(): MetadataExtractor {\n    if (!MetadataExtractor.instance) {\n      MetadataExtractor.instance = new MetadataExtractor();\n    }\n    return MetadataExtractor.instance;\n  }\n\n  /**\n   * ä»æ–‡ä»¶æå–å…ƒæ•°æ®\n   */\n  async extractFromFile(\n    file: File | Buffer,\n    filename: string,\n    options: ExtractionOptions = {}\n  ): Promise<ExtractionResult> {\n    const result: ExtractionResult = {\n      fileMetadata: {\n        filename,\n        fileSize: 0,\n        mimeType: 'application/pdf'\n      },\n      errors: [],\n      warnings: []\n    };\n\n    try {\n      // 1. æå–åŸºç¡€æ–‡ä»¶ä¿¡æ¯\n      result.fileMetadata = await this.extractFileMetadata(file, filename);\n\n      // 2. æå–PDFç‰¹å®šå…ƒæ•°æ®\n      if (options.includeMetadata !== false) {\n        result.pdfMetadata = await this.extractPDFMetadata(file);\n      }\n\n      // 3. æå–æ–‡æœ¬å†…å®¹\n      if (options.includeTextContent !== false) {\n        result.textContent = await this.extractTextContent(file, options);\n      }\n\n      // 4. å†…å®¹åˆ†æ\n      if (options.includeContentAnalysis && result.textContent) {\n        result.contentAnalysis = await this.analyzeContent(\n          result.textContent,\n          options.language || 'zh'\n        );\n      }\n\n      // 5. è‡ªåŠ¨åˆ†ç±»\n      if (options.includeCategorization && result.textContent) {\n        result.categorization = await this.categorizeContent(\n          result.textContent,\n          result.pdfMetadata\n        );\n      }\n\n      // 6. è´¨é‡è¯„ä¼°\n      if (options.includeQualityAssessment) {\n        result.qualityAssessment = await this.assessQuality(\n          result.textContent,\n          result.pdfMetadata,\n          result.fileMetadata\n        );\n      }\n\n      // 7. ç”Ÿæˆå»ºè®®çš„å…ƒæ•°æ®\n      result.suggestedMetadata = this.generateSuggestedMetadata(result);\n\n      // 8. æå–å…³é”®è¯\n      result.extractedKeywords = this.extractKeywords(\n        result.textContent,\n        result.pdfMetadata\n      );\n\n    } catch (error) {\n      result.errors?.push(`æå–å¤±è´¥: ${(error as Error).message}`);\n    }\n\n    return result;\n  }\n\n  /**\n   * ä»ç°æœ‰èµ„æºæ›´æ–°å…ƒæ•°æ®\n   */\n  async updateResourceMetadata(\n    resource: PDFResource,\n    options: ExtractionOptions = {}\n  ): Promise<Partial<PDFResource>> {\n    // æ¨¡æ‹Ÿä»ç°æœ‰èµ„æºæ›´æ–°å…ƒæ•°æ®\n    const updates: Partial<PDFResource> = {\n      updatedAt: new Date()\n    };\n\n    try {\n      // é‡æ–°åˆ†æå†…å®¹ï¼ˆå¦‚æœæœ‰æ–‡æœ¬å†…å®¹ï¼‰\n      if (resource.content.search.extractedText) {\n        const contentAnalysis = await this.analyzeContent(\n          resource.content.search.extractedText,\n          resource.language\n        );\n\n        if (contentAnalysis) {\n          updates.metadata = {\n            ...resource.metadata,\n            difficulty: contentAnalysis.complexity,\n            estimatedReadTime: contentAnalysis.estimatedReadingTime\n          };\n\n          // æ›´æ–°æœç´¢å…³é”®è¯\n          updates.content = {\n            ...resource.content,\n            search: {\n              ...resource.content.search,\n              searchKeywords: contentAnalysis.keyPhrases\n            }\n          };\n        }\n      }\n\n    } catch (error) {\n      console.error('æ›´æ–°èµ„æºå…ƒæ•°æ®å¤±è´¥:', error);\n    }\n\n    return updates;\n  }\n\n  /**\n   * æ‰¹é‡æå–å…ƒæ•°æ®\n   */\n  async batchExtract(\n    files: Array<{ file: File | Buffer; filename: string }>,\n    options: ExtractionOptions = {}\n  ): Promise<Array<{ filename: string; result: ExtractionResult }>> {\n    const results = [];\n\n    for (const { file, filename } of files) {\n      try {\n        const result = await this.extractFromFile(file, filename, options);\n        results.push({ filename, result });\n      } catch (error) {\n        results.push({\n          filename,\n          result: {\n            fileMetadata: { filename, fileSize: 0, mimeType: 'application/pdf' },\n            errors: [`æ‰¹é‡æå–å¤±è´¥: ${(error as Error).message}`]\n          }\n        });\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * éªŒè¯æå–ç»“æœ\n   */\n  validateExtractionResult(result: ExtractionResult): {\n    isValid: boolean;\n    errors: string[];\n    warnings: string[];\n  } {\n    // ğŸ”§ å…³é”®ä¿®å¤ï¼šæ˜ç¡®ç±»å‹æ³¨è§£\n    const validation: {\n      isValid: boolean;\n      errors: string[];\n      warnings: string[];\n    } = {\n      isValid: true,\n      errors: [],      // æ˜ç¡®æ˜¯string[]ï¼Œä¸æ˜¯never[]\n      warnings: []     // æ˜ç¡®æ˜¯string[]ï¼Œä¸æ˜¯never[]\n    };\n\n    // æ£€æŸ¥åŸºç¡€æ–‡ä»¶ä¿¡æ¯\n    if (!result.fileMetadata.filename) {\n      validation.isValid = false;\n      validation.errors.push('ç¼ºå°‘æ–‡ä»¶å');\n    }\n\n    if (result.fileMetadata.fileSize <= 0) {\n      validation.isValid = false;\n      validation.errors.push('æ— æ•ˆçš„æ–‡ä»¶å¤§å°');\n    }\n\n    // æ£€æŸ¥PDFå…ƒæ•°æ®\n    if (result.pdfMetadata) {\n      if (result.pdfMetadata.pageCount <= 0) {\n        validation.isValid = false;\n        validation.errors.push('æ— æ•ˆçš„é¡µæ•°');\n      }\n\n      // ğŸ¯ è¿™å°±æ˜¯ç¬¬327è¡Œçš„é—®é¢˜ï¼Œç°åœ¨å·²ä¿®å¤\n      if (!result.pdfMetadata.title && !result.textContent) {\n        validation.warnings.push('æ— æ³•æå–æ ‡é¢˜å’Œå†…å®¹');\n      }\n    }\n\n    // æ£€æŸ¥å†…å®¹åˆ†æ\n    if (result.contentAnalysis) {\n      if (result.contentAnalysis.languageConfidence < BUSINESS_CONSTANTS.quality.minLanguageConfidence) {\n        validation.warnings.push('è¯­è¨€æ£€æµ‹ç½®ä¿¡åº¦è¾ƒä½');\n      }\n\n      if (result.contentAnalysis.wordCount < BUSINESS_CONSTANTS.quality.minWordCount) {\n        validation.warnings.push('æ–‡æ¡£å†…å®¹è¿‡å°‘');\n      }\n    }\n\n    // æ£€æŸ¥åˆ†ç±»ç»“æœ\n    if (result.categorization) {\n      if (result.categorization.confidence < BUSINESS_CONSTANTS.quality.minCategorizationConfidence) {\n        validation.warnings.push('è‡ªåŠ¨åˆ†ç±»ç½®ä¿¡åº¦è¾ƒä½');\n      }\n    }\n\n    return validation;\n  }\n\n  private async extractFileMetadata(\n    file: File | Buffer,\n    filename: string\n  ): Promise<FileMetadata> {\n    const metadata: FileMetadata = {\n      filename,\n      fileSize: 0,\n      mimeType: 'application/pdf'\n    };\n\n    if (file instanceof File) {\n      metadata.fileSize = file.size;\n      metadata.mimeType = file.type || 'application/pdf';\n      metadata.modifiedDate = new Date(file.lastModified);\n    } else {\n      metadata.fileSize = file.length;\n    }\n\n    // ç”Ÿæˆç®€å•çš„æ ¡éªŒå’Œ\n    metadata.checksum = await this.generateChecksum(file);\n\n    return metadata;\n  }\n\n  private async extractPDFMetadata(file: File | Buffer): Promise<PDFMetadata> {\n    // æ¨¡æ‹ŸPDFå…ƒæ•°æ®æå–\n    // å®é™…å®ç°ä¸­åº”ä½¿ç”¨ pdf-parse æˆ–ç±»ä¼¼åº“\n    \n    const metadata: PDFMetadata = {\n      pageCount: this.estimatePageCount(file),\n      encrypted: false,\n      permissions: {\n        printing: true,\n        copying: true,\n        commenting: true,\n        formFilling: true\n      }\n    };\n\n    // ä»æ–‡ä»¶åæ¨æ–­ä¸€äº›ä¿¡æ¯\n    const filename = file instanceof File ? file.name : 'unknown.pdf';\n    \n    if (filename.includes('guide') || filename.includes('æŒ‡å—')) {\n      metadata.subject = 'ç”¨æˆ·æŒ‡å—';\n    }\n    \n    if (filename.includes('manual') || filename.includes('æ‰‹å†Œ')) {\n      metadata.subject = 'æ“ä½œæ‰‹å†Œ';\n    }\n\n    return metadata;\n  }\n\n  private async extractTextContent(\n    file: File | Buffer,\n    options: ExtractionOptions\n  ): Promise<string> {\n    // æ¨¡æ‹Ÿæ–‡æœ¬æå–\n    // å®é™…å®ç°ä¸­åº”ä½¿ç”¨ pdf-parse ç­‰åº“\n    \n    const sampleTexts = [\n      'ç»æœŸç–¼ç—›æ˜¯å¥³æ€§å¸¸è§çš„å¥åº·é—®é¢˜ï¼Œé€šè¿‡æ­£ç¡®çš„æ–¹æ³•å¯ä»¥æœ‰æ•ˆç¼“è§£ã€‚æœ¬æŒ‡å—æä¾›äº†å¤šç§è‡ªç„¶ã€å®‰å…¨çš„ç¼“è§£æ–¹æ³•ã€‚',\n      'çƒ­ç–—æ³•æ˜¯ç¼“è§£ç»æœŸç–¼ç—›æœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ã€‚ä½¿ç”¨çƒ­æ°´è¢‹æˆ–æš–å®«è´´å¯ä»¥æ”¾æ¾å­å®«è‚Œè‚‰ï¼Œå‡è½»ç—‰æŒ›ã€‚',\n      'å‘¼å¸ç»ƒä¹ å’Œå†¥æƒ³å¯ä»¥å¸®åŠ©æ”¾æ¾èº«å¿ƒï¼Œå‡è½»ç–¼ç—›æ„Ÿå—ã€‚æ·±å‘¼å¸æŠ€å·§ç‰¹åˆ«é€‚åˆæ€¥æ€§ç–¼ç—›æ—¶ä½¿ç”¨ã€‚',\n      'è¥å…»è°ƒç†åœ¨ç»æœŸå¥åº·ç®¡ç†ä¸­èµ·é‡è¦ä½œç”¨ã€‚é€‚å½“è¡¥å……ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨å¯ä»¥é¢„é˜²å’Œç¼“è§£ç»æœŸä¸é€‚ã€‚'\n    ];\n\n    // åŸºäºæ–‡ä»¶å¤§å°é€‰æ‹©åˆé€‚çš„ç¤ºä¾‹æ–‡æœ¬\n    const fileSize = file instanceof File ? file.size : file.length;\n    const textLength = Math.min(fileSize / 1000, 2000); // ä¼°ç®—æ–‡æœ¬é•¿åº¦\n    \n    let selectedText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];\n    \n    // æ ¹æ®éœ€è¦é‡å¤æˆ–æˆªæ–­æ–‡æœ¬\n    while (selectedText.length < textLength) {\n      selectedText += ' ' + sampleTexts[Math.floor(Math.random() * sampleTexts.length)];\n    }\n\n    const maxLength = options.maxTextLength || BUSINESS_CONSTANTS.quality.maxTextLength;\n    if (selectedText.length > maxLength) {\n      selectedText = selectedText.substring(0, maxLength);\n    }\n\n    return selectedText;\n  }\n\n  private async analyzeContent(\n    text: string,\n    language: SupportedLanguage\n  ): Promise<ContentAnalysis> {\n    const wordCount = text.split(/\\s+/).length;\n    const characters = text.length;\n\n    return {\n      language,\n      languageConfidence: 0.95,\n      readabilityScore: 7.5,\n      sentiment: 'positive',\n      sentimentScore: 0.7,\n      keyPhrases: this.extractKeyPhrases(text),\n      topics: [\n        { topic: 'ç»æœŸå¥åº·', confidence: 0.9 },\n        { topic: 'ç–¼ç—›ç®¡ç†', confidence: 0.8 },\n        { topic: 'è‡ªç„¶ç–—æ³•', confidence: 0.7 }\n      ],\n      complexity: this.assessComplexity(text),\n      estimatedReadingTime: Math.ceil(wordCount / BUSINESS_CONSTANTS.content.readingSpeed),\n      wordCount,\n      characters\n    };\n  }\n\n  private async categorizeContent(\n    text: string,\n    pdfMetadata?: PDFMetadata\n  ): Promise<AutoCategorizationResult> {\n    // åŸºäºå…³é”®è¯çš„ç®€å•åˆ†ç±»é€»è¾‘\n    const categories: Record<ResourceCategory, string[]> = {\n      'immediate-relief': ['å¿«é€Ÿ', 'ç«‹å³', 'ç´§æ€¥', 'ç¼“è§£', '5åˆ†é’Ÿ', 'å³æ—¶'],\n      'preparation': ['å‡†å¤‡', 'é¢„é˜²', 'è®¡åˆ’', 'è¥å…»', 'é”»ç‚¼', 'ä¹ æƒ¯'],\n      'learning': ['äº†è§£', 'å­¦ä¹ ', 'çŸ¥è¯†', 'æ•™è‚²', 'ç§‘æ™®', 'åŒ»å­¦'],\n      'management': ['ç®¡ç†', 'é•¿æœŸ', 'ç»´æŠ¤', 'è·Ÿè¸ª', 'ç›‘æ§', 'è®°å½•'],\n      'assessment': ['è¯„ä¼°', 'æµ‹è¯•', 'æ£€æŸ¥', 'è¯Šæ–­', 'é—®å·', 'é‡è¡¨'],\n      'template': ['æ¨¡æ¿', 'è¡¨æ ¼', 'æ ¼å¼', 'æ ·æœ¬', 'èŒƒä¾‹', 'è¡¨å•']\n    };\n\n    let bestCategory: ResourceCategory = 'learning';\n    let bestScore = 0;\n    const alternativeCategories: AutoCategorizationResult['alternativeCategories'] = [];\n\n    for (const [category, keywords] of Object.entries(categories)) {\n      let score = 0;\n      const matchedKeywords: string[] = [];\n\n      for (const keyword of keywords) {\n        if (text.includes(keyword)) {\n          score += 1;\n          matchedKeywords.push(keyword);\n        }\n      }\n\n      if (score > 0) {\n        alternativeCategories.push({\n          category: category as ResourceCategory,\n          confidence: score / keywords.length,\n          reasoning: `åŒ¹é…å…³é”®è¯: ${matchedKeywords.join(', ')}`\n        });\n      }\n\n      if (score > bestScore) {\n        bestScore = score;\n        bestCategory = category as ResourceCategory;\n      }\n    }\n\n    // æŒ‰ç½®ä¿¡åº¦æ’åº\n    alternativeCategories.sort((a, b) => b.confidence - a.confidence);\n\n    return {\n      suggestedCategory: bestCategory,\n      confidence: bestScore / (categories[bestCategory]?.length || 1),\n      alternativeCategories: alternativeCategories.slice(0, 3),\n      reasoning: `åŸºäºå†…å®¹å…³é”®è¯åˆ†æï¼Œæ¨èåˆ†ç±»ä¸º ${bestCategory}`\n    };\n  }\n\n  private async assessQuality(\n    text?: string,\n    pdfMetadata?: PDFMetadata,\n    fileMetadata?: FileMetadata\n  ): Promise<QualityAssessment> {\n    const factors: QualityAssessment['factors'] = [];\n    let totalScore = 0;\n    let totalWeight = 0;\n\n    // å†…å®¹è´¨é‡è¯„ä¼°\n    if (text) {\n      const contentScore = this.assessContentQuality(text);\n      factors.push({\n        factor: 'å†…å®¹è´¨é‡',\n        score: contentScore,\n        weight: 0.4,\n        description: 'åŸºäºæ–‡æœ¬é•¿åº¦ã€ç»“æ„å’Œå¯è¯»æ€§çš„è¯„ä¼°'\n      });\n      totalScore += contentScore * 0.4;\n      totalWeight += 0.4;\n    }\n\n    // è®¾è®¡è´¨é‡è¯„ä¼°\n    if (pdfMetadata) {\n      const designScore = this.assessDesignQuality(pdfMetadata);\n      factors.push({\n        factor: 'è®¾è®¡è´¨é‡',\n        score: designScore,\n        weight: 0.2,\n        description: 'åŸºäºPDFå…ƒæ•°æ®å’Œç»“æ„çš„è¯„ä¼°'\n      });\n      totalScore += designScore * 0.2;\n      totalWeight += 0.2;\n    }\n\n    // æ–‡ä»¶è´¨é‡è¯„ä¼°\n    if (fileMetadata) {\n      const fileScore = this.assessFileQuality(fileMetadata);\n      factors.push({\n        factor: 'æ–‡ä»¶è´¨é‡',\n        score: fileScore,\n        weight: 0.2,\n        description: 'åŸºäºæ–‡ä»¶å¤§å°å’Œæ ¼å¼çš„è¯„ä¼°'\n      });\n      totalScore += fileScore * 0.2;\n      totalWeight += 0.2;\n    }\n\n    // å®ç”¨æ€§è¯„ä¼°ï¼ˆåŸºäºå†…å®¹åˆ†æï¼‰\n    const usefulnessScore = text ? this.assessUsefulness(text) : 7;\n    factors.push({\n      factor: 'å®ç”¨æ€§',\n      score: usefulnessScore,\n      weight: 0.2,\n      description: 'åŸºäºå†…å®¹å®ç”¨æ€§å’Œé€‚ç”¨æ€§çš„è¯„ä¼°'\n    });\n    totalScore += usefulnessScore * 0.2;\n    totalWeight += 0.2;\n\n    const overallScore = totalWeight > 0 ? totalScore / totalWeight : 5;\n\n    return {\n      overallScore,\n      contentScore: factors.find(f => f.factor === 'å†…å®¹è´¨é‡')?.score || 5,\n      designScore: factors.find(f => f.factor === 'è®¾è®¡è´¨é‡')?.score || 5,\n      accuracyScore: 8, // é»˜è®¤å‡è®¾å‡†ç¡®æ€§è¾ƒé«˜\n      usefulnessScore,\n      factors,\n      improvements: this.generateImprovementSuggestions(factors, overallScore)\n    };\n  }\n\n  private generateSuggestedMetadata(result: ExtractionResult): Partial<PDFResource['metadata']> {\n    const metadata: Partial<PDFResource['metadata']> = {};\n\n    // ç”Ÿæˆæ ‡é¢˜\n    if (result.pdfMetadata?.title) {\n      metadata.title = {\n        zh: result.pdfMetadata.title,\n        en: result.pdfMetadata.title\n      };\n    } else {\n      const filename = result.fileMetadata.filename.replace(/\\.[^/.]+$/, '');\n      metadata.title = {\n        zh: this.generateChineseTitle(filename),\n        en: filename.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n      };\n    }\n\n    // ç”Ÿæˆæè¿°\n    if (result.textContent) {\n      const shortDescription = result.textContent.substring(0, 150) + '...';\n      metadata.description = {\n        zh: shortDescription,\n        en: shortDescription\n      };\n    }\n\n    // è®¾ç½®ä½œè€…\n    if (result.pdfMetadata?.author) {\n      metadata.author = result.pdfMetadata.author;\n    }\n\n    // è®¾ç½®å…³é”®è¯\n    if (result.extractedKeywords) {\n      metadata.keywords = result.extractedKeywords;\n    }\n\n    // è®¾ç½®è´¨é‡è¯„åˆ†\n    if (result.qualityAssessment) {\n      metadata.quality = {\n        content: result.qualityAssessment.contentScore,\n        design: result.qualityAssessment.designScore,\n        accuracy: result.qualityAssessment.accuracyScore,\n        usefulness: result.qualityAssessment.usefulnessScore,\n        overall: result.qualityAssessment.overallScore\n      };\n    }\n\n    // è®¾ç½®éš¾åº¦å’Œé˜…è¯»æ—¶é—´\n    if (result.contentAnalysis) {\n      metadata.difficulty = result.contentAnalysis.complexity;\n      metadata.estimatedReadTime = result.contentAnalysis.estimatedReadingTime;\n    }\n\n    return metadata;\n  }\n\n  private extractKeywords(text?: string, pdfMetadata?: PDFMetadata): string[] {\n    const keywords: string[] = [];\n\n    // ä»PDFå…ƒæ•°æ®æå–\n    if (pdfMetadata?.keywords) {\n      keywords.push(...pdfMetadata.keywords.split(/[,;]/));\n    }\n\n    // ä»æ–‡æœ¬å†…å®¹æå–\n    if (text) {\n      keywords.push(...this.extractKeyPhrases(text));\n    }\n\n    // å»é‡å’Œæ¸…ç†\n    return [...new Set(keywords)]\n      .map(k => k.trim())\n      .filter(k => k.length > 1 && k.length < 50)\n      .slice(0, 20);\n  }\n\n  private extractKeyPhrases(text: string): string[] {\n    // ç®€åŒ–çš„å…³é”®è¯æå–\n    const commonPhrases = [\n      'ç»æœŸç–¼ç—›', 'æœˆç»ç—›', 'ç—›ç»', 'ç–¼ç—›ç¼“è§£', 'è‡ªç„¶ç–—æ³•',\n      'çƒ­ç–—æ³•', 'è¥å…»è°ƒç†', 'å‘¼å¸ç»ƒä¹ ', 'æŒ‰æ‘©æ‰‹æ³•', 'è‰è¯èŒ¶',\n      'å¥åº·ç®¡ç†', 'é¢„é˜²æªæ–½', 'ç”Ÿæ´»æ–¹å¼', 'é¥®é£Ÿå»ºè®®', 'è¿åŠ¨é”»ç‚¼'\n    ];\n\n    return commonPhrases.filter(phrase => text.includes(phrase));\n  }\n\n  private assessComplexity(text: string): 'beginner' | 'intermediate' | 'advanced' {\n    const sentences = text.split(/[ã€‚ï¼ï¼Ÿ]/).length;\n    const words = text.split(/\\s+/).length;\n    const avgWordsPerSentence = words / sentences;\n\n    if (avgWordsPerSentence < 15) return 'beginner';\n    if (avgWordsPerSentence < 25) return 'intermediate';\n    return 'advanced';\n  }\n\n  private assessContentQuality(text: string): number {\n    let score = 5; // åŸºç¡€åˆ†\n\n    // æ–‡æœ¬é•¿åº¦è¯„ä¼°\n    if (text.length > 1000) score += 1;\n    if (text.length > 3000) score += 1;\n\n    // ç»“æ„è¯„ä¼°ï¼ˆåŸºäºæ ‡ç‚¹ç¬¦å·ï¼‰\n    const sentences = text.split(/[ã€‚ï¼ï¼Ÿ]/).length;\n    if (sentences > 10) score += 1;\n\n    // å…³é”®è¯å¯†åº¦\n    const keywords = ['ç¼“è§£', 'æ–¹æ³•', 'å¥åº·', 'ç–¼ç—›', 'æ²»ç–—'];\n    const keywordCount = keywords.reduce((count, keyword) => \n      count + (text.match(new RegExp(keyword, 'g')) || []).length, 0\n    );\n    \n    if (keywordCount > 5) score += 1;\n\n    return Math.min(score, 10);\n  }\n\n  private assessDesignQuality(pdfMetadata: PDFMetadata): number {\n    let score = 5;\n\n    // é¡µæ•°è¯„ä¼°\n    if (pdfMetadata.pageCount > 5) score += 1;\n    if (pdfMetadata.pageCount > 10) score += 1;\n\n    // å…ƒæ•°æ®å®Œæ•´æ€§\n    if (pdfMetadata.title) score += 1;\n    if (pdfMetadata.author) score += 1;\n    if (pdfMetadata.subject) score += 1;\n\n    return Math.min(score, 10);\n  }\n\n  private assessFileQuality(fileMetadata: FileMetadata): number {\n    let score = 5;\n\n    // æ–‡ä»¶å¤§å°è¯„ä¼°\n    if (fileMetadata.fileSize > 100000) score += 1; // >100KB\n    if (fileMetadata.fileSize < 10000000) score += 1; // <10MB\n\n    // æ–‡ä»¶åè´¨é‡\n    if (fileMetadata.filename.length > 10) score += 1;\n    if (!fileMetadata.filename.includes('temp')) score += 1;\n\n    return Math.min(score, 10);\n  }\n\n  private assessUsefulness(text: string): number {\n    let score = 5;\n\n    // å®ç”¨æ€§å…³é”®è¯\n    const usefulKeywords = ['æ–¹æ³•', 'æ­¥éª¤', 'å»ºè®®', 'æŒ‡å—', 'æŠ€å·§', 'æ³¨æ„äº‹é¡¹'];\n    const usefulCount = usefulKeywords.reduce((count, keyword) => \n      count + (text.includes(keyword) ? 1 : 0), 0\n    );\n\n    score += Math.min(usefulCount, 3);\n\n    return Math.min(score, 10);\n  }\n\n  private generateImprovementSuggestions(\n    factors: QualityAssessment['factors'],\n    overallScore: number\n  ): string[] {\n    const suggestions: string[] = [];\n\n    if (overallScore < 6) {\n      suggestions.push('è€ƒè™‘å¢åŠ æ›´å¤šå®ç”¨çš„å†…å®¹å’Œç¤ºä¾‹');\n    }\n\n    factors.forEach(factor => {\n      if (factor.score < 6) {\n        switch (factor.factor) {\n          case 'å†…å®¹è´¨é‡':\n            suggestions.push('å¢åŠ æ–‡æ¡£é•¿åº¦å’Œç»“æ„åŒ–å†…å®¹');\n            break;\n          case 'è®¾è®¡è´¨é‡':\n            suggestions.push('æ”¹å–„PDFæ ¼å¼å’Œæ·»åŠ æ›´å¤šå…ƒæ•°æ®');\n            break;\n          case 'æ–‡ä»¶è´¨é‡':\n            suggestions.push('ä¼˜åŒ–æ–‡ä»¶å¤§å°å’Œå‘½åè§„èŒƒ');\n            break;\n          case 'å®ç”¨æ€§':\n            suggestions.push('å¢åŠ æ›´å¤šå®é™…åº”ç”¨çš„å»ºè®®å’ŒæŒ‡å¯¼');\n            break;\n        }\n      }\n    });\n\n    return suggestions;\n  }\n\n  private generateChineseTitle(filename: string): string {\n    // ç®€å•çš„æ–‡ä»¶ååˆ°ä¸­æ–‡æ ‡é¢˜è½¬æ¢\n    const titleMap: Record<string, string> = {\n      'immediate-relief': 'å¿«é€Ÿç¼“è§£æŒ‡å—',\n      'pain-relief': 'ç–¼ç—›ç¼“è§£æ–¹æ³•',\n      'guide': 'ä½¿ç”¨æŒ‡å—',\n      'manual': 'æ“ä½œæ‰‹å†Œ',\n      'nutrition': 'è¥å…»æŒ‡å¯¼',\n      'exercise': 'è¿åŠ¨æŒ‡å¯¼'\n    };\n\n    let title = filename;\n    for (const [key, value] of Object.entries(titleMap)) {\n      if (filename.includes(key)) {\n        title = title.replace(key, value);\n      }\n    }\n\n    return title.replace(/-/g, ' ');\n  }\n\n  private estimatePageCount(file: File | Buffer): number {\n    // åŸºäºæ–‡ä»¶å¤§å°çš„é¡µæ•°ä¼°ç®—\n    const fileSize = file instanceof File ? file.size : file.length;\n    return Math.max(1, Math.floor(fileSize / 100000)); // çº¦100KBæ¯é¡µ\n  }\n\n  private async generateChecksum(file: File | Buffer): Promise<string> {\n    // ç®€åŒ–çš„æ ¡éªŒå’Œç”Ÿæˆ\n    const data = file instanceof File ? await file.arrayBuffer() : file;\n    let hash = 0;\n    const view = new Uint8Array(data);\n    \n    for (let i = 0; i < view.length; i++) {\n      hash = ((hash << 5) - hash + view[i]) & 0xffffffff;\n    }\n    \n    return Math.abs(hash).toString(16);\n  }\n}\n\n/**\n * å…ƒæ•°æ®æå–å™¨å·¥å…·å‡½æ•°\n */\nexport const metadataExtractor = {\n  getInstance: MetadataExtractor.getInstance,\n  \n  // å¿«æ·æ–¹æ³•\n  extractFromFile: (file: File | Buffer, filename: string, options?: ExtractionOptions) =>\n    MetadataExtractor.getInstance().extractFromFile(file, filename, options),\n  \n  updateResourceMetadata: (resource: PDFResource, options?: ExtractionOptions) =>\n    MetadataExtractor.getInstance().updateResourceMetadata(resource, options),\n  \n  batchExtract: (files: Array<{ file: File | Buffer; filename: string }>, options?: ExtractionOptions) =>\n    MetadataExtractor.getInstance().batchExtract(files, options)\n};","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/pdf-resources/utils/url-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/performance-monitor.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2238,2241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2238,2241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4150,4153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4150,4153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":200,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'grade' is defined but never used.","line":200,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":238,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6923,6926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6923,6926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// æ€§èƒ½ç›‘æ§å·¥å…·\nexport class PerformanceMonitor {\n  private static instance: PerformanceMonitor;\n  private metrics: Map<string, number> = new Map();\n  private observers: PerformanceObserver[] = [];\n\n  private constructor() {\n    this.initializeObservers();\n  }\n\n  static getInstance(): PerformanceMonitor {\n    if (!PerformanceMonitor.instance) {\n      PerformanceMonitor.instance = new PerformanceMonitor();\n    }\n    return PerformanceMonitor.instance;\n  }\n\n  private initializeObservers() {\n    // ç›‘æ§Core Web Vitals\n    if (typeof window !== 'undefined' && 'PerformanceObserver' in window) {\n      // LCP (Largest Contentful Paint)\n      this.observeLCP();\n      \n      // INP (Interaction to Next Paint) - 2024å¹´3æœˆæ›´æ–°\n      this.observeINP();\n      \n      // CLS (Cumulative Layout Shift)\n      this.observeCLS();\n      \n      // FCP (First Contentful Paint)\n      this.observeFCP();\n      \n      // TTFB (Time to First Byte)\n      this.observeTTFB();\n    }\n  }\n\n  private observeLCP() {\n    try {\n      const observer = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        const lastEntry = entries[entries.length - 1];\n        this.metrics.set('LCP', lastEntry.startTime);\n        this.logMetric('LCP', lastEntry.startTime);\n      });\n      observer.observe({ entryTypes: ['largest-contentful-paint'] });\n      this.observers.push(observer);\n    } catch (error) {\n      console.warn('LCP observer not supported:', error);\n    }\n  }\n\n  private observeINP() {\n    try {\n      const observer = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry) => {\n          const inpEntry = entry as PerformanceEventTiming;\n          const inp = inpEntry.processingEnd - inpEntry.startTime;\n          this.metrics.set('INP', inp);\n          this.logMetric('INP', inp);\n        });\n      });\n      observer.observe({ entryTypes: ['event'] });\n      this.observers.push(observer);\n    } catch (error) {\n      console.warn('INP observer not supported:', error);\n    }\n  }\n\n  private observeCLS() {\n    try {\n      let clsValue = 0;\n      const observer = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry: any) => {\n          if (!entry.hadRecentInput) {\n            clsValue += entry.value;\n            this.metrics.set('CLS', clsValue);\n            this.logMetric('CLS', clsValue);\n          }\n        });\n      });\n      observer.observe({ entryTypes: ['layout-shift'] });\n      this.observers.push(observer);\n    } catch (error) {\n      console.warn('CLS observer not supported:', error);\n    }\n  }\n\n  private observeFCP() {\n    try {\n      const observer = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry) => {\n          this.metrics.set('FCP', entry.startTime);\n          this.logMetric('FCP', entry.startTime);\n        });\n      });\n      observer.observe({ entryTypes: ['paint'] });\n      this.observers.push(observer);\n    } catch (error) {\n      console.warn('FCP observer not supported:', error);\n    }\n  }\n\n  private observeTTFB() {\n    try {\n      const observer = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry) => {\n          const navEntry = entry as PerformanceNavigationTiming;\n          if (navEntry.responseStart > 0) {\n            const ttfb = navEntry.responseStart - navEntry.requestStart;\n            this.metrics.set('TTFB', ttfb);\n            this.logMetric('TTFB', ttfb);\n          }\n        });\n      });\n      observer.observe({ entryTypes: ['navigation'] });\n      this.observers.push(observer);\n    } catch (error) {\n      console.warn('TTFB observer not supported:', error);\n    }\n  }\n\n  private logMetric(name: string, value: number) {\n    console.log(`ğŸ“Š Performance Metric - ${name}: ${value.toFixed(2)}ms`);\n    \n    // å‘é€åˆ°åˆ†ææœåŠ¡ï¼ˆå¯é€‰ï¼‰\n    this.sendToAnalytics(name, value);\n  }\n\n  private sendToAnalytics(metric: string, value: number) {\n    // è¿™é‡Œå¯ä»¥é›†æˆGoogle Analyticsã€Mixpanelç­‰åˆ†ææœåŠ¡\n    if (typeof window !== 'undefined' && 'gtag' in window) {\n      (window as any).gtag('event', 'web_vitals', {\n        name: metric,\n        value: Math.round(value),\n        event_category: 'Performance',\n        event_label: window.location.pathname,\n        non_interaction: true,\n      });\n    }\n  }\n\n  // è·å–æ‰€æœ‰æŒ‡æ ‡\n  getMetrics() {\n    return Object.fromEntries(this.metrics);\n  }\n\n  // è·å–ç‰¹å®šæŒ‡æ ‡\n  getMetric(name: string): number | undefined {\n    return this.metrics.get(name);\n  }\n\n  // æ£€æŸ¥æ€§èƒ½ç­‰çº§\n  getPerformanceGrade(metric: string, value: number): 'good' | 'needs-improvement' | 'poor' {\n    const thresholds = {\n      LCP: { good: 2500, poor: 4000 },\n      INP: { good: 200, poor: 500 }, // æ›´æ–°ï¼šFID â†’ INPï¼Œç›®æ ‡å€¼200ms\n      CLS: { good: 0.1, poor: 0.25 },\n      FCP: { good: 1800, poor: 3000 },\n      TTFB: { good: 800, poor: 1800 },\n    };\n\n    const threshold = thresholds[metric as keyof typeof thresholds];\n    if (!threshold) return 'good';\n\n    if (value <= threshold.good) return 'good';\n    if (value <= threshold.poor) return 'needs-improvement';\n    return 'poor';\n  }\n\n  // ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š\n  generateReport() {\n    const metrics = this.getMetrics();\n    const report = {\n      timestamp: new Date().toISOString(),\n      url: typeof window !== 'undefined' ? window.location.href : '',\n      metrics: {} as Record<string, number>,\n      grades: {} as Record<string, string>,\n      recommendations: [] as string[]\n    };\n\n    Object.entries(metrics).forEach(([name, value]) => {\n      const grade = this.getPerformanceGrade(name, value);\n      report.metrics[name] = value;\n      report.grades[name] = grade;\n\n      // ç”Ÿæˆå»ºè®®\n      if (grade === 'poor' || grade === 'needs-improvement') {\n        report.recommendations.push(this.getRecommendation(name, value, grade));\n      }\n    });\n\n    return report;\n  }\n\n  private getRecommendation(metric: string, value: number, grade: string): string {\n    const recommendations = {\n      LCP: 'ä¼˜åŒ–æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼šå‹ç¼©å›¾ç‰‡ã€ä½¿ç”¨CDNã€ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„',\n      INP: 'ä¼˜åŒ–äº¤äº’åˆ°ä¸‹æ¬¡ç»˜åˆ¶æ—¶é—´ï¼šå‡å°‘JavaScriptæ‰§è¡Œæ—¶é—´ã€ä½¿ç”¨ä»£ç åˆ†å‰²ã€ä¼˜åŒ–äº‹ä»¶å¤„ç†',\n      CLS: 'å‡å°‘ç´¯ç§¯å¸ƒå±€åç§»ï¼šä¸ºå›¾ç‰‡å’Œå¹¿å‘Šè®¾ç½®å°ºå¯¸ã€é¿å…åŠ¨æ€æ’å…¥å†…å®¹',\n      FCP: 'ä¼˜åŒ–é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼šå‡å°‘é˜»å¡èµ„æºã€ä¼˜åŒ–CSSå’ŒJavaScript',\n      TTFB: 'ä¼˜åŒ–æœåŠ¡å™¨å“åº”æ—¶é—´ï¼šä½¿ç”¨CDNã€ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ã€å¯ç”¨ç¼“å­˜'\n    };\n\n    return recommendations[metric as keyof typeof recommendations] || 'éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–';\n  }\n\n  // æ¸…ç†è§‚å¯Ÿè€…\n  disconnect() {\n    this.observers.forEach(observer => observer.disconnect());\n    this.observers = [];\n  }\n}\n\n// é¡µé¢åŠ è½½æ€§èƒ½ç›‘æ§\nexport function trackPageLoad() {\n  if (typeof window === 'undefined') return;\n\n  const monitor = PerformanceMonitor.getInstance();\n  \n  // é¡µé¢åŠ è½½å®Œæˆåç”ŸæˆæŠ¥å‘Š\n  window.addEventListener('load', () => {\n    setTimeout(() => {\n      const report = monitor.generateReport();\n      console.log('ğŸ“ˆ Performance Report:', report);\n      \n      // å¯ä»¥å‘é€åˆ°æœåŠ¡å™¨è¿›è¡Œåˆ†æ\n      sendPerformanceReport(report);\n    }, 1000);\n  });\n}\n\n// å‘é€æ€§èƒ½æŠ¥å‘Šåˆ°æœåŠ¡å™¨\nasync function sendPerformanceReport(report: any) {\n  try {\n    await fetch('/api/performance', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(report),\n    });\n  } catch (error) {\n    console.warn('Failed to send performance report:', error);\n  }\n}\n\n// è·¯ç”±å˜åŒ–ç›‘æ§\nexport function trackRouteChange() {\n  if (typeof window === 'undefined') return;\n\n  let routeChangeStart = 0;\n  \n  // ç›‘å¬è·¯ç”±å˜åŒ–å¼€å§‹\n  window.addEventListener('beforeunload', () => {\n    routeChangeStart = performance.now();\n  });\n\n  // ç›‘å¬è·¯ç”±å˜åŒ–å®Œæˆ\n  window.addEventListener('load', () => {\n    if (routeChangeStart > 0) {\n      const routeChangeTime = performance.now() - routeChangeStart;\n      console.log(`ğŸ”„ Route Change Time: ${routeChangeTime.toFixed(2)}ms`);\n    }\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/performance/monitor.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":95,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4331,4334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4331,4334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useAppStore } from '../stores/appStore';\n\n// æ€§èƒ½æŒ‡æ ‡ç±»å‹\nexport interface PerformanceMetrics {\n  // é¡µé¢æ€§èƒ½\n  pageLoad: {\n    startTime: number;\n    endTime: number;\n    duration: number;\n    route: string;\n  };\n  \n  // ç½‘ç»œæ€§èƒ½\n  network: {\n    endpoint: string;\n    method: string;\n    startTime: number;\n    endTime: number;\n    duration: number;\n    status: number;\n    size?: number;\n  };\n  \n  // ç”¨æˆ·äº¤äº’\n  interaction: {\n    type: 'click' | 'scroll' | 'input' | 'navigation';\n    element: string;\n    timestamp: number;\n    duration?: number;\n  };\n  \n  // é”™è¯¯ç›‘æ§\n  error: {\n    type: 'javascript' | 'network' | 'render';\n    message: string;\n    stack?: string;\n    timestamp: number;\n    route: string;\n    userAgent: string;\n  };\n}\n\n// æ€§èƒ½ç›‘æ§ç±»\nclass PerformanceMonitor {\n  private metrics: PerformanceMetrics[] = [];\n  private observers: PerformanceObserver[] = [];\n  private isEnabled: boolean = true;\n\n  constructor() {\n    if (typeof window !== 'undefined') {\n      this.initializeObservers();\n      this.setupErrorHandling();\n    }\n  }\n\n  // åˆå§‹åŒ–æ€§èƒ½è§‚å¯Ÿå™¨\n  private initializeObservers() {\n    // ç›‘æ§å¯¼èˆªæ€§èƒ½\n    if ('PerformanceObserver' in window) {\n      const navObserver = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries()) {\n          if (entry.entryType === 'navigation') {\n            this.recordPageLoad(entry as PerformanceNavigationTiming);\n          }\n        }\n      });\n      navObserver.observe({ entryTypes: ['navigation'] });\n      this.observers.push(navObserver);\n\n      // ç›‘æ§èµ„æºåŠ è½½\n      const resourceObserver = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries()) {\n          if (entry.entryType === 'resource') {\n            this.recordResourceLoad(entry as PerformanceResourceTiming);\n          }\n        }\n      });\n      resourceObserver.observe({ entryTypes: ['resource'] });\n      this.observers.push(resourceObserver);\n\n      // ç›‘æ§ç”¨æˆ·äº¤äº’\n      const interactionObserver = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries()) {\n          if (entry.entryType === 'event') {\n            this.recordInteraction(entry as PerformanceEventTiming);\n          }\n        }\n      });\n      \n      try {\n        interactionObserver.observe({ entryTypes: ['event'] });\n        this.observers.push(interactionObserver);\n      } catch (e) {\n        // Event timing API not supported\n        console.warn('Event timing API not supported');\n      }\n    }\n  }\n\n  // è®¾ç½®é”™è¯¯å¤„ç†\n  private setupErrorHandling() {\n    // JavaScripté”™è¯¯\n    window.addEventListener('error', (event) => {\n      this.recordError({\n        type: 'javascript',\n        message: event.message,\n        stack: event.error?.stack,\n        timestamp: Date.now(),\n        route: window.location.pathname,\n        userAgent: navigator.userAgent,\n      });\n    });\n\n    // Promiseæ‹’ç»é”™è¯¯\n    window.addEventListener('unhandledrejection', (event) => {\n      this.recordError({\n        type: 'javascript',\n        message: event.reason?.message || 'Unhandled Promise Rejection',\n        stack: event.reason?.stack,\n        timestamp: Date.now(),\n        route: window.location.pathname,\n        userAgent: navigator.userAgent,\n      });\n    });\n  }\n\n  // è®°å½•é¡µé¢åŠ è½½æ€§èƒ½\n  private recordPageLoad(entry: PerformanceNavigationTiming) {\n    const metric: PerformanceMetrics['pageLoad'] = {\n      startTime: entry.startTime,\n      endTime: entry.loadEventEnd,\n      duration: entry.loadEventEnd - entry.startTime,\n      route: window.location.pathname,\n    };\n\n    this.addMetric({ pageLoad: metric });\n    \n    // æ›´æ–°åº”ç”¨çŠ¶æ€\n    useAppStore.getState().recordPageLoadTime(metric.duration);\n  }\n\n  // è®°å½•èµ„æºåŠ è½½æ€§èƒ½\n  private recordResourceLoad(entry: PerformanceResourceTiming) {\n    // åªè®°å½•APIè°ƒç”¨\n    if (entry.name.includes('/api/')) {\n      const metric: PerformanceMetrics['network'] = {\n        endpoint: entry.name,\n        method: 'GET', // ä»entryä¸­æ— æ³•è·å–ï¼Œéœ€è¦åœ¨fetchæ—¶è®°å½•\n        startTime: entry.startTime,\n        endTime: entry.responseEnd,\n        duration: entry.responseEnd - entry.startTime,\n        status: 200, // é»˜è®¤å€¼ï¼Œéœ€è¦åœ¨fetchæ—¶è®°å½•\n        size: entry.transferSize,\n      };\n\n      this.addMetric({ network: metric });\n    }\n  }\n\n  // è®°å½•ç”¨æˆ·äº¤äº’\n  private recordInteraction(entry: PerformanceEventTiming) {\n    const metric: PerformanceMetrics['interaction'] = {\n      type: entry.name as any,\n      element: (entry.target as Element)?.tagName || 'unknown',\n      timestamp: entry.startTime,\n      duration: entry.duration,\n    };\n\n    this.addMetric({ interaction: metric });\n  }\n\n  // è®°å½•é”™è¯¯\n  private recordError(error: PerformanceMetrics['error']) {\n    this.addMetric({ error });\n    useAppStore.getState().incrementErrorCount();\n  }\n\n  // æ·»åŠ æŒ‡æ ‡\n  private addMetric(metric: Partial<PerformanceMetrics>) {\n    if (!this.isEnabled) return;\n    \n    this.metrics.push(metric as PerformanceMetrics);\n    \n    // é™åˆ¶æŒ‡æ ‡æ•°é‡ï¼Œé¿å…å†…å­˜æ³„æ¼\n    if (this.metrics.length > 1000) {\n      this.metrics = this.metrics.slice(-500);\n    }\n  }\n\n  // å…¬å…±APIï¼šè®°å½•APIè°ƒç”¨\n  public recordApiCall(\n    endpoint: string,\n    method: string,\n    startTime: number,\n    endTime: number,\n    status: number,\n    size?: number\n  ) {\n    const metric: PerformanceMetrics['network'] = {\n      endpoint,\n      method,\n      startTime,\n      endTime,\n      duration: endTime - startTime,\n      status,\n      size,\n    };\n\n    this.addMetric({ network: metric });\n    useAppStore.getState().recordApiResponseTime(endpoint, metric.duration);\n  }\n\n  // å…¬å…±APIï¼šè®°å½•è‡ªå®šä¹‰äº¤äº’\n  public recordCustomInteraction(\n    type: PerformanceMetrics['interaction']['type'],\n    element: string,\n    duration?: number\n  ) {\n    const metric: PerformanceMetrics['interaction'] = {\n      type,\n      element,\n      timestamp: Date.now(),\n      duration,\n    };\n\n    this.addMetric({ interaction: metric });\n  }\n\n  // è·å–æ€§èƒ½æŠ¥å‘Š\n  public getPerformanceReport() {\n    const now = Date.now();\n    const last24Hours = now - 24 * 60 * 60 * 1000;\n    \n    const recentMetrics = this.metrics.filter(metric => {\n      const timestamp = metric.pageLoad?.startTime || \n                      metric.network?.startTime || \n                      metric.interaction?.timestamp || \n                      metric.error?.timestamp || 0;\n      return timestamp > last24Hours;\n    });\n\n    return {\n      totalMetrics: recentMetrics.length,\n      pageLoads: recentMetrics.filter(m => m.pageLoad).length,\n      apiCalls: recentMetrics.filter(m => m.network).length,\n      interactions: recentMetrics.filter(m => m.interaction).length,\n      errors: recentMetrics.filter(m => m.error).length,\n      averagePageLoadTime: this.calculateAveragePageLoadTime(recentMetrics),\n      averageApiResponseTime: this.calculateAverageApiResponseTime(recentMetrics),\n      errorRate: this.calculateErrorRate(recentMetrics),\n    };\n  }\n\n  // è®¡ç®—å¹³å‡é¡µé¢åŠ è½½æ—¶é—´\n  private calculateAveragePageLoadTime(metrics: PerformanceMetrics[]) {\n    const pageLoads = metrics.filter(m => m.pageLoad);\n    if (pageLoads.length === 0) return 0;\n    \n    const total = pageLoads.reduce((sum, m) => sum + (m.pageLoad?.duration || 0), 0);\n    return total / pageLoads.length;\n  }\n\n  // è®¡ç®—å¹³å‡APIå“åº”æ—¶é—´\n  private calculateAverageApiResponseTime(metrics: PerformanceMetrics[]) {\n    const apiCalls = metrics.filter(m => m.network);\n    if (apiCalls.length === 0) return 0;\n    \n    const total = apiCalls.reduce((sum, m) => sum + (m.network?.duration || 0), 0);\n    return total / apiCalls.length;\n  }\n\n  // è®¡ç®—é”™è¯¯ç‡\n  private calculateErrorRate(metrics: PerformanceMetrics[]) {\n    const errors = metrics.filter(m => m.error).length;\n    const total = metrics.length;\n    return total > 0 ? (errors / total) * 100 : 0;\n  }\n\n  // å¯ç”¨/ç¦ç”¨ç›‘æ§\n  public setEnabled(enabled: boolean) {\n    this.isEnabled = enabled;\n  }\n\n  // æ¸…ç†èµ„æº\n  public cleanup() {\n    this.observers.forEach(observer => observer.disconnect());\n    this.observers = [];\n    this.metrics = [];\n  }\n}\n\n// åˆ›å»ºå…¨å±€å®ä¾‹\nexport const performanceMonitor = new PerformanceMonitor();\n\n// React Hook\nexport const usePerformanceMonitor = () => {\n  return {\n    recordApiCall: performanceMonitor.recordApiCall.bind(performanceMonitor),\n    recordInteraction: performanceMonitor.recordCustomInteraction.bind(performanceMonitor),\n    getReport: performanceMonitor.getPerformanceReport.bind(performanceMonitor),\n    setEnabled: performanceMonitor.setEnabled.bind(performanceMonitor),\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/analytics/AnalyticsEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/cache/CacheManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[162,165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[162,165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1004,1007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1004,1007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Period Hub Cache Manager\n * ç¼“å­˜ç®¡ç†å™¨\n */\n\nimport { ResourceManagerConfig } from '../types';\n\nexport class CacheManager {\n  private cache: Map<string, { data: any; timestamp: number; ttl: number }> = new Map();\n  private config: ResourceManagerConfig;\n\n  constructor(config: ResourceManagerConfig) {\n    this.config = config;\n  }\n\n  /**\n   * åˆå§‹åŒ–ç¼“å­˜ç®¡ç†å™¨\n   */\n  async initialize(): Promise<void> {\n    // å¯åŠ¨æ¸…ç†å®šæ—¶å™¨\n    if (this.config.cacheEnabled) {\n      setInterval(() => {\n        this.cleanup();\n      }, 60000); // æ¯åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡è¿‡æœŸç¼“å­˜\n    }\n  }\n\n  /**\n   * è·å–ç¼“å­˜æ•°æ®\n   */\n  async get<T>(key: string): Promise<T | null> {\n    if (!this.config.cacheEnabled) {\n      return null;\n    }\n\n    const cached = this.cache.get(key);\n    if (!cached) {\n      return null;\n    }\n\n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    const now = Date.now();\n    if (now - cached.timestamp > cached.ttl * 1000) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return cached.data as T;\n  }\n\n  /**\n   * è®¾ç½®ç¼“å­˜æ•°æ®\n   */\n  async set(key: string, data: any, ttl: number): Promise<void> {\n    if (!this.config.cacheEnabled) {\n      return;\n    }\n\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      ttl\n    });\n  }\n\n  /**\n   * åˆ é™¤ç¼“å­˜æ•°æ®\n   */\n  async delete(key: string): Promise<void> {\n    this.cache.delete(key);\n  }\n\n  /**\n   * æ¸…é™¤åŒ¹é…æ¨¡å¼çš„ç¼“å­˜\n   */\n  async clearPattern(pattern: string): Promise<void> {\n    const regex = new RegExp(pattern.replace(/\\*/g, '.*'));\n    const keysToDelete = Array.from(this.cache.keys()).filter(key => regex.test(key));\n    \n    keysToDelete.forEach(key => {\n      this.cache.delete(key);\n    });\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸç¼“å­˜\n   */\n  private cleanup(): void {\n    const now = Date.now();\n    \n    for (const [key, cached] of this.cache.entries()) {\n      if (now - cached.timestamp > cached.ttl * 1000) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  /**\n   * è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯\n   */\n  getStats(): {\n    size: number;\n    hitRate: number;\n    missRate: number;\n  } {\n    return {\n      size: this.cache.size,\n      hitRate: 0, // è¿™é‡Œéœ€è¦å®ç°å‘½ä¸­ç‡ç»Ÿè®¡\n      missRate: 0\n    };\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/config/default.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/core/ResourceManager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BulkOperationResult' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceValidationError' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceImportResult' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceExportOptions' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourceStatus' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DifficultyLevel' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TargetAudience' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8539,8542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8539,8542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is defined but never used.","line":427,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":427,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'locale' is defined but never used.","line":479,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":479,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":505,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":505,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13322,13325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13322,13325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Period Hub Enterprise Resource Manager\n * ä¼ä¸šçº§èµ„æºç®¡ç†å™¨æ ¸å¿ƒç±»\n */\n\nimport { \n  EnterpriseResource, \n  ResourceSearchFilters, \n  ResourceSearchResult, \n  ResourceOperationResult,\n  BulkOperationResult,\n  ResourceAnalyticsReport,\n  ResourceValidationError,\n  ResourceManagerConfig,\n  ResourceImportResult,\n  ResourceExportOptions,\n  ResourceType,\n  ResourceStatus,\n  DifficultyLevel,\n  TargetAudience\n} from '../types';\nimport { Locale } from '@/types/pdf';\nimport { CacheManager } from '../cache/CacheManager';\nimport { ResourceValidator } from '../validation/ResourceValidator';\nimport { AnalyticsEngine } from '../analytics/AnalyticsEngine';\n\nexport class ResourceManager {\n  private config: ResourceManagerConfig;\n  private cacheManager: CacheManager;\n  private validator: ResourceValidator;\n  private analyticsEngine: AnalyticsEngine;\n  private resources: Map<string, EnterpriseResource> = new Map();\n  private isInitialized = false;\n\n  constructor(config: ResourceManagerConfig) {\n    this.config = config;\n    this.cacheManager = new CacheManager(config);\n    this.validator = new ResourceValidator(config);\n    this.analyticsEngine = new AnalyticsEngine(config);\n  }\n\n  /**\n   * åˆå§‹åŒ–èµ„æºç®¡ç†å™¨\n   */\n  async initialize(): Promise<ResourceOperationResult<void>> {\n    try {\n      // åˆå§‹åŒ–å„ä¸ªç»„ä»¶\n      await this.cacheManager.initialize();\n      await this.validator.initialize();\n      await this.analyticsEngine.initialize();\n      \n      // åŠ è½½ç°æœ‰èµ„æº\n      await this.loadResources();\n      \n      this.isInitialized = true;\n      \n      return {\n        success: true,\n        timestamp: new Date()\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Initialization failed',\n        timestamp: new Date()\n      };\n    }\n  }\n\n  /**\n   * è·å–èµ„æº\n   */\n  async getResource(id: string, locale?: Locale): Promise<ResourceOperationResult<EnterpriseResource>> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        error: 'ResourceManager not initialized',\n        timestamp: new Date()\n      };\n    }\n\n    try {\n      const cacheKey = `resource:${id}:${locale || 'default'}`;\n      \n      // å°è¯•ä»ç¼“å­˜è·å–\n      if (this.config.cacheEnabled) {\n        const cached = await this.cacheManager.get<EnterpriseResource>(cacheKey);\n        if (cached) {\n          // æ›´æ–°è®¿é—®ç»Ÿè®¡\n          await this.updateAccessStats(id);\n          return {\n            success: true,\n            data: cached,\n            timestamp: new Date()\n          };\n        }\n      }\n\n      // ä»æ•°æ®æºè·å–\n      const resource = this.resources.get(id);\n      if (!resource) {\n        return {\n          success: false,\n          error: `Resource not found: ${id}`,\n          timestamp: new Date()\n        };\n      }\n\n      // åº”ç”¨æœ¬åœ°åŒ–\n      const localizedResource = locale ? this.localizeResource(resource, locale) : resource;\n\n      // ç¼“å­˜ç»“æœ\n      if (this.config.cacheEnabled) {\n        await this.cacheManager.set(cacheKey, localizedResource, this.config.cacheTimeout);\n      }\n\n      // æ›´æ–°è®¿é—®ç»Ÿè®¡\n      await this.updateAccessStats(id);\n\n      return {\n        success: true,\n        data: localizedResource,\n        timestamp: new Date()\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to get resource',\n        timestamp: new Date()\n      };\n    }\n  }\n\n  /**\n   * æœç´¢èµ„æº\n   */\n  async searchResources(\n    searchTerm: string, \n    filters: ResourceSearchFilters = {},\n    locale?: Locale\n  ): Promise<ResourceOperationResult<ResourceSearchResult>> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        error: 'ResourceManager not initialized',\n        timestamp: new Date()\n      };\n    }\n\n    try {\n      const startTime = Date.now();\n      \n      // æ„å»ºç¼“å­˜é”®\n      const cacheKey = `search:${searchTerm}:${JSON.stringify(filters)}:${locale || 'default'}`;\n      \n      // å°è¯•ä»ç¼“å­˜è·å–\n      if (this.config.cacheEnabled) {\n        const cached = await this.cacheManager.get<ResourceSearchResult>(cacheKey);\n        if (cached) {\n          return {\n            success: true,\n            data: cached,\n            timestamp: new Date()\n          };\n        }\n      }\n\n      // æ‰§è¡Œæœç´¢\n      let filteredResources = Array.from(this.resources.values());\n\n      // åº”ç”¨çŠ¶æ€è¿‡æ»¤\n      if (filters.status && filters.status.length > 0) {\n        filteredResources = filteredResources.filter(r => \n          filters.status!.includes(r.status)\n        );\n      }\n\n      // åº”ç”¨ç±»å‹è¿‡æ»¤\n      if (filters.type && filters.type.length > 0) {\n        filteredResources = filteredResources.filter(r => \n          filters.type!.includes(r.type)\n        );\n      }\n\n      // åº”ç”¨åˆ†ç±»è¿‡æ»¤\n      if (filters.categories && filters.categories.length > 0) {\n        filteredResources = filteredResources.filter(r => \n          filters.categories!.includes(r.categoryId)\n        );\n      }\n\n      // åº”ç”¨æ ‡ç­¾è¿‡æ»¤\n      if (filters.tags && filters.tags.length > 0) {\n        filteredResources = filteredResources.filter(r => \n          filters.tags!.some(tag => r.tags.includes(tag))\n        );\n      }\n\n      // åº”ç”¨éš¾åº¦è¿‡æ»¤\n      if (filters.difficulty && filters.difficulty.length > 0) {\n        filteredResources = filteredResources.filter(r => \n          filters.difficulty!.includes(r.difficulty)\n        );\n      }\n\n      // åº”ç”¨ç›®æ ‡ç”¨æˆ·è¿‡æ»¤\n      if (filters.targetAudience && filters.targetAudience.length > 0) {\n        filteredResources = filteredResources.filter(r => \n          filters.targetAudience!.some(audience => r.targetAudience.includes(audience))\n        );\n      }\n\n      // åº”ç”¨è¯„åˆ†è¿‡æ»¤\n      if (filters.minimumRating) {\n        filteredResources = filteredResources.filter(r => \n          r.stats.userRating >= filters.minimumRating!\n        );\n      }\n\n      // åº”ç”¨æœç´¢è¯è¿‡æ»¤\n      if (searchTerm) {\n        const normalizedSearchTerm = searchTerm.toLowerCase();\n        filteredResources = filteredResources.filter(r => {\n          const lang = locale || this.config.defaultLanguage;\n          const title = r.title[lang]?.toLowerCase() || '';\n          const description = r.description[lang]?.toLowerCase() || '';\n          const keywords = r.keywords[lang]?.join(' ').toLowerCase() || '';\n          const tags = r.tags.join(' ').toLowerCase();\n          \n          return title.includes(normalizedSearchTerm) ||\n                 description.includes(normalizedSearchTerm) ||\n                 keywords.includes(normalizedSearchTerm) ||\n                 tags.includes(normalizedSearchTerm);\n        });\n      }\n\n      // åº”ç”¨æ’åº\n      this.sortResources(filteredResources, filters.sortBy || 'relevance', filters.sortOrder || 'desc');\n\n      // åº”ç”¨åˆ†é¡µ\n      const page = 1; // é»˜è®¤ç¬¬ä¸€é¡µ\n      const pageSize = 20; // é»˜è®¤æ¯é¡µ20æ¡\n      const startIndex = (page - 1) * pageSize;\n      const paginatedResources = filteredResources.slice(startIndex, startIndex + pageSize);\n\n      // åº”ç”¨æœ¬åœ°åŒ–\n      const localizedResources = locale ? \n        paginatedResources.map(r => this.localizeResource(r, locale)) : \n        paginatedResources;\n\n      const searchTime = Date.now() - startTime;\n\n      const result: ResourceSearchResult = {\n        resources: localizedResources,\n        total: filteredResources.length,\n        page,\n        pageSize,\n        filters,\n        searchTerm,\n        searchTime,\n        suggestions: await this.generateSearchSuggestions(searchTerm, locale)\n      };\n\n      // ç¼“å­˜ç»“æœ\n      if (this.config.cacheEnabled) {\n        await this.cacheManager.set(cacheKey, result, this.config.cacheTimeout);\n      }\n\n      // è®°å½•æœç´¢ç»Ÿè®¡\n      await this.analyticsEngine.recordSearch(searchTerm, filters, result.total, searchTime);\n\n      return {\n        success: true,\n        data: result,\n        timestamp: new Date()\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Search failed',\n        timestamp: new Date()\n      };\n    }\n  }\n\n  /**\n   * åˆ›å»ºæˆ–æ›´æ–°èµ„æº\n   */\n  async saveResource(resource: EnterpriseResource): Promise<ResourceOperationResult<EnterpriseResource>> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        error: 'ResourceManager not initialized',\n        timestamp: new Date()\n      };\n    }\n\n    try {\n      // éªŒè¯èµ„æº\n      if (this.config.validationEnabled) {\n        const validationResult = await this.validator.validateResource(resource);\n        if (!validationResult.isValid) {\n          return {\n            success: false,\n            error: 'Resource validation failed',\n            warnings: validationResult.errors.map((e: any) => e.message),\n            timestamp: new Date()\n          };\n        }\n      }\n\n      // è®¾ç½®æ—¶é—´æˆ³\n      const now = new Date();\n      if (!this.resources.has(resource.id)) {\n        resource.publishDate = now;\n      }\n      resource.lastModified = now;\n\n      // ä¿å­˜èµ„æº\n      this.resources.set(resource.id, resource);\n\n      // æ¸…é™¤ç›¸å…³ç¼“å­˜\n      await this.cacheManager.clearPattern(`resource:${resource.id}:*`);\n      await this.cacheManager.clearPattern('search:*');\n\n      // è®°å½•æ“ä½œ\n      await this.analyticsEngine.recordOperation('save', resource.id, resource.type);\n\n      return {\n        success: true,\n        data: resource,\n        timestamp: new Date()\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to save resource',\n        timestamp: new Date()\n      };\n    }\n  }\n\n  /**\n   * åˆ é™¤èµ„æº\n   */\n  async deleteResource(id: string): Promise<ResourceOperationResult<boolean>> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        error: 'ResourceManager not initialized',\n        timestamp: new Date()\n      };\n    }\n\n    try {\n      if (!this.resources.has(id)) {\n        return {\n          success: false,\n          error: `Resource not found: ${id}`,\n          timestamp: new Date()\n        };\n      }\n\n      // åˆ é™¤èµ„æº\n      this.resources.delete(id);\n\n      // æ¸…é™¤ç›¸å…³ç¼“å­˜\n      await this.cacheManager.clearPattern(`resource:${id}:*`);\n      await this.cacheManager.clearPattern('search:*');\n\n      // è®°å½•æ“ä½œ\n      await this.analyticsEngine.recordOperation('delete', id, ResourceType.PDF);\n\n      return {\n        success: true,\n        data: true,\n        timestamp: new Date()\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to delete resource',\n        timestamp: new Date()\n      };\n    }\n  }\n\n  /**\n   * è·å–åˆ†ææŠ¥å‘Š\n   */\n  async getAnalyticsReport(): Promise<ResourceOperationResult<ResourceAnalyticsReport>> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        error: 'ResourceManager not initialized',\n        timestamp: new Date()\n      };\n    }\n\n    try {\n      const report = await this.analyticsEngine.generateReport(this.resources);\n      return {\n        success: true,\n        data: report,\n        timestamp: new Date()\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to generate analytics report',\n        timestamp: new Date()\n      };\n    }\n  }\n\n  /**\n   * ç§æœ‰æ–¹æ³•ï¼šåŠ è½½èµ„æº\n   */\n  private async loadResources(): Promise<void> {\n    // è¿™é‡Œå°†æ¥ä¼šä»æ•°æ®åº“æˆ–å…¶ä»–æ•°æ®æºåŠ è½½èµ„æº\n    // ç›®å‰å…ˆä½¿ç”¨ç©ºå®ç°\n  }\n\n  /**\n   * ç§æœ‰æ–¹æ³•ï¼šæœ¬åœ°åŒ–èµ„æº\n   */\n  private localizeResource(resource: EnterpriseResource, locale: Locale): EnterpriseResource {\n    // åˆ›å»ºæœ¬åœ°åŒ–å‰¯æœ¬\n    const localized = { ...resource };\n    \n    // è¿™é‡Œå¯ä»¥æ ¹æ®localeè°ƒæ•´æ˜¾ç¤ºå†…å®¹\n    // ä¾‹å¦‚ï¼šåªè¿”å›æŒ‡å®šè¯­è¨€çš„å†…å®¹\n    \n    return localized;\n  }\n\n  /**\n   * ç§æœ‰æ–¹æ³•ï¼šæ’åºèµ„æº\n   */\n  private sortResources(\n    resources: EnterpriseResource[], \n    sortBy: string, \n    sortOrder: 'asc' | 'desc'\n  ): void {\n    resources.sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortBy) {\n        case 'popularity':\n          comparison = a.stats.popularityScore - b.stats.popularityScore;\n          break;\n        case 'date':\n          comparison = a.publishDate.getTime() - b.publishDate.getTime();\n          break;\n        case 'rating':\n          comparison = a.stats.userRating - b.stats.userRating;\n          break;\n        case 'downloads':\n          comparison = a.stats.downloads - b.stats.downloads;\n          break;\n        case 'relevance':\n        default:\n          // ç»¼åˆè¯„åˆ†ï¼šä¸‹è½½é‡ + è¯„åˆ† + ç‚¹å‡»é‡\n          const scoreA = a.stats.downloads + a.stats.userRating + a.stats.views;\n          const scoreB = b.stats.downloads + b.stats.userRating + b.stats.views;\n          comparison = scoreA - scoreB;\n          break;\n      }\n      \n      return sortOrder === 'desc' ? -comparison : comparison;\n    });\n  }\n\n  /**\n   * ç§æœ‰æ–¹æ³•ï¼šç”Ÿæˆæœç´¢å»ºè®®\n   */\n  private async generateSearchSuggestions(\n    searchTerm: string, \n    locale?: Locale\n  ): Promise<string[]> {\n    // åŸºäºæœç´¢è¯ç”Ÿæˆå»ºè®®\n    const suggestions = ['ç–¼ç—›', 'ç¼“è§£', 'è¥å…»', 'è¿åŠ¨', 'åŒ»å­¦', 'æ²Ÿé€š'];\n    \n    return suggestions.filter(s => \n      s.toLowerCase().includes(searchTerm.toLowerCase())\n    ).slice(0, 5);\n  }\n\n  /**\n   * ç§æœ‰æ–¹æ³•ï¼šæ›´æ–°è®¿é—®ç»Ÿè®¡\n   */\n  private async updateAccessStats(id: string): Promise<void> {\n    const resource = this.resources.get(id);\n    if (resource) {\n      resource.stats.views++;\n      resource.stats.lastAccessed = new Date();\n      // æ›´æ–°æµè¡Œåº¦åˆ†æ•°\n      resource.stats.popularityScore = this.calculatePopularityScore(resource.stats);\n    }\n  }\n\n  /**\n   * ç§æœ‰æ–¹æ³•ï¼šè®¡ç®—æµè¡Œåº¦åˆ†æ•°\n   */\n  private calculatePopularityScore(stats: any): number {\n    // ç»¼åˆè¯„åˆ†ç®—æ³•\n    const viewsWeight = 0.3;\n    const downloadsWeight = 0.4;\n    const ratingWeight = 0.2;\n    const recencyWeight = 0.1;\n    \n    const viewsScore = Math.min(stats.views / 1000, 1) * viewsWeight;\n    const downloadsScore = Math.min(stats.downloads / 500, 1) * downloadsWeight;\n    const ratingScore = (stats.userRating / 5) * ratingWeight;\n    const recencyScore = Math.max(0, 1 - (Date.now() - stats.lastAccessed.getTime()) / (1000 * 60 * 60 * 24 * 30)) * recencyWeight;\n    \n    return (viewsScore + downloadsScore + ratingScore + recencyScore) * 100;\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/examples/migration-example.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[721,724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[721,724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3925,3928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3925,3928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4361,4364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4361,4364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":183,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4600,4603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4600,4603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5107,5110],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5107,5110],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Period Hub èµ„æºç®¡ç†ç³»ç»Ÿè¿ç§»ç¤ºä¾‹\n * ä»ç®€å•ç³»ç»Ÿåˆ°ä¼ä¸šçº§ç³»ç»Ÿçš„è¿ç§»æŒ‡å—\n */\n\nimport { \n  createResourceManager, \n  EnterpriseResource, \n  ResourceType, \n  ResourceStatus, \n  DifficultyLevel, \n  TargetAudience \n} from '../index';\n\n/**\n * ç¬¬1æ­¥ï¼šåˆ›å»ºä¼ä¸šçº§èµ„æºç®¡ç†å™¨\n */\nasync function step1_createResourceManager() {\n  console.log('ğŸš€ åˆ›å»ºä¼ä¸šçº§èµ„æºç®¡ç†å™¨...');\n  \n  // åˆ›å»ºå¼€å‘ç¯å¢ƒçš„èµ„æºç®¡ç†å™¨\n  const resourceManager = createResourceManager('development');\n  \n  // åˆå§‹åŒ–ç³»ç»Ÿ\n  const initResult = await resourceManager.initialize();\n  if (!initResult.success) {\n    console.error('âŒ åˆå§‹åŒ–å¤±è´¥:', initResult.error);\n    return null;\n  }\n  \n  console.log('âœ… èµ„æºç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ');\n  return resourceManager;\n}\n\n/**\n * ç¬¬2æ­¥ï¼šå°†ç°æœ‰PDFèµ„æºè¿ç§»åˆ°æ–°ç³»ç»Ÿ\n */\nasync function step2_migrateExistingPDFs(resourceManager: any) {\n  console.log('ğŸ“‹ å¼€å§‹è¿ç§»ç°æœ‰PDFèµ„æº...');\n  \n  // ç°æœ‰çš„PDFèµ„æºæ•°æ®ï¼ˆåŸºäºSimplePDFCenterï¼‰\n  const existingPDFResources = [\n    {\n      id: 'pain-tracking-form',\n      title: { zh: 'ç–¼ç—›è¿½è¸ªè¡¨', en: 'Pain Tracking Form' },\n      description: { zh: 'è®°å½•ç–¼ç—›ç¨‹åº¦å’Œç—‡çŠ¶çš„è¿½è¸ªè¡¨', en: 'Track pain levels and symptoms' },\n      category: 'immediate-relief',\n      fileName: 'pain-tracking-form.pdf'\n    },\n    {\n      id: 'menstrual-cycle-nutrition-plan',\n      title: { zh: 'æœˆç»å‘¨æœŸè¥å…»è®¡åˆ’', en: 'Menstrual Cycle Nutrition Plan' },\n      description: { zh: 'é’ˆå¯¹æœˆç»å‘¨æœŸçš„è¥å…»è¡¥å……è®¡åˆ’', en: 'Nutrition plan for menstrual cycle' },\n      category: 'planned-preparation',\n      fileName: 'menstrual-cycle-nutrition-plan.pdf'\n    }\n    // ... å…¶ä»–èµ„æº\n  ];\n\n  const migratedResources = [];\n  \n  for (const pdfResource of existingPDFResources) {\n    // è½¬æ¢ä¸ºä¼ä¸šçº§èµ„æºæ ¼å¼\n    const enterpriseResource: EnterpriseResource = {\n      id: pdfResource.id,\n      type: ResourceType.PDF,\n      status: ResourceStatus.ACTIVE,\n      version: '1.0.0',\n      \n      title: pdfResource.title,\n      description: pdfResource.description,\n      summary: pdfResource.description, // ä½¿ç”¨æè¿°ä½œä¸ºæ‘˜è¦\n      \n      categoryId: pdfResource.category,\n      tags: ['å¥åº·', 'ç»æœŸ', 'PDF'],\n      keywords: {\n        zh: ['ç–¼ç—›', 'è¿½è¸ª', 'ç»æœŸ', 'å¥åº·'],\n        en: ['pain', 'tracking', 'menstrual', 'health']\n      },\n      \n      files: {\n        pdf: {\n          url: `/pdf-files/${pdfResource.fileName}`,\n          mimeType: 'application/pdf',\n          size: 1024 * 1024, // 1MB ä¼°ç®—\n          checksum: 'mock-checksum',\n          lastModified: new Date()\n        }\n      },\n      \n      author: 'Period Hub Team',\n      publishDate: new Date(),\n      lastModified: new Date(),\n      \n      difficulty: DifficultyLevel.BEGINNER,\n      targetAudience: [TargetAudience.GENERAL],\n      estimatedReadTime: 10,\n      \n      relatedResources: [],\n      prerequisites: [],\n      followUpResources: [],\n      \n      stats: {\n        views: 0,\n        downloads: 0,\n        shares: 0,\n        likes: 0,\n        searchHits: 0,\n        lastAccessed: new Date(),\n        popularityScore: 0,\n        userRating: 0,\n        ratingCount: 0\n      },\n      \n      seo: {\n        title: pdfResource.title,\n        description: pdfResource.description,\n        keywords: {\n          zh: ['ç–¼ç—›', 'è¿½è¸ª', 'ç»æœŸ', 'å¥åº·'],\n          en: ['pain', 'tracking', 'menstrual', 'health']\n        }\n      },\n      \n      access: {\n        isPublic: true,\n        requiresAuth: false,\n        allowedRoles: [],\n        permissions: []\n      },\n      \n      customFields: {},\n      \n      changeLog: [{\n        version: '1.0.0',\n        date: new Date(),\n        changes: 'åˆå§‹ç‰ˆæœ¬è¿ç§»',\n        author: 'Period Hub Team'\n      }]\n    };\n    \n    // ä¿å­˜åˆ°æ–°ç³»ç»Ÿ\n    const saveResult = await resourceManager.saveResource(enterpriseResource);\n    if (saveResult.success) {\n      migratedResources.push(enterpriseResource);\n      console.log(`âœ… æˆåŠŸè¿ç§»: ${pdfResource.title.zh}`);\n    } else {\n      console.error(`âŒ è¿ç§»å¤±è´¥: ${pdfResource.title.zh} - ${saveResult.error}`);\n    }\n  }\n  \n  console.log(`ğŸ“‹ è¿ç§»å®Œæˆ: ${migratedResources.length} ä¸ªèµ„æºå·²è¿ç§»`);\n  return migratedResources;\n}\n\n/**\n * ç¬¬3æ­¥ï¼šæµ‹è¯•æ–°çš„æœç´¢åŠŸèƒ½\n */\nasync function step3_testSearchFunctionality(resourceManager: any) {\n  console.log('ğŸ” æµ‹è¯•æ–°çš„æœç´¢åŠŸèƒ½...');\n  \n  // æµ‹è¯•å…³é”®è¯æœç´¢\n  const searchResults = await resourceManager.searchResources('ç–¼ç—›', {\n    type: [ResourceType.PDF],\n    status: [ResourceStatus.ACTIVE]\n  }, 'zh');\n  \n  if (searchResults.success) {\n    console.log(`âœ… æœç´¢æˆåŠŸ: æ‰¾åˆ° ${searchResults.data.total} ä¸ªç»“æœ`);\n    console.log(`â±ï¸ æœç´¢è€—æ—¶: ${searchResults.data.searchTime}ms`);\n    \n    // æ˜¾ç¤ºæœç´¢ç»“æœ\n    searchResults.data.resources.forEach((resource: any) => {\n      console.log(`  - ${resource.title.zh} (${resource.type})`);\n    });\n  } else {\n    console.error(`âŒ æœç´¢å¤±è´¥: ${searchResults.error}`);\n  }\n}\n\n/**\n * ç¬¬4æ­¥ï¼šç”Ÿæˆåˆ†ææŠ¥å‘Š\n */\nasync function step4_generateAnalyticsReport(resourceManager: any) {\n  console.log('ğŸ“Š ç”Ÿæˆåˆ†ææŠ¥å‘Š...');\n  \n  const reportResult = await resourceManager.getAnalyticsReport();\n  if (reportResult.success) {\n    const report = reportResult.data;\n    console.log('ğŸ“ˆ åˆ†ææŠ¥å‘Š:');\n    console.log(`  æ€»èµ„æºæ•°: ${report.totalResources}`);\n    console.log(`  PDFèµ„æº: ${report.resourcesByType.pdf || 0}`);\n    console.log(`  æ–‡ç« èµ„æº: ${report.resourcesByType.article || 0}`);\n    console.log(`  æ´»è·ƒèµ„æº: ${report.resourcesByStatus.active || 0}`);\n    console.log(`  çƒ­é—¨æ ‡ç­¾: ${report.topTags.map((t: any) => t.tag).join(', ')}`);\n  } else {\n    console.error(`âŒ ç”ŸæˆæŠ¥å‘Šå¤±è´¥: ${reportResult.error}`);\n  }\n}\n\n/**\n * ä¸»è¿ç§»æµç¨‹\n */\nexport async function runMigrationExample() {\n  console.log('ğŸš€ å¼€å§‹Period Hubä¼ä¸šçº§èµ„æºç®¡ç†ç³»ç»Ÿè¿ç§»ç¤ºä¾‹');\n  console.log('='.repeat(50));\n  \n  try {\n    // æ­¥éª¤1ï¼šåˆ›å»ºèµ„æºç®¡ç†å™¨\n    const resourceManager = await step1_createResourceManager();\n    if (!resourceManager) {\n      console.error('âŒ æ— æ³•åˆ›å»ºèµ„æºç®¡ç†å™¨');\n      return;\n    }\n    \n    // æ­¥éª¤2ï¼šè¿ç§»ç°æœ‰èµ„æº\n    await step2_migrateExistingPDFs(resourceManager);\n    \n    // æ­¥éª¤3ï¼šæµ‹è¯•æœç´¢åŠŸèƒ½\n    await step3_testSearchFunctionality(resourceManager);\n    \n    // æ­¥éª¤4ï¼šç”Ÿæˆåˆ†ææŠ¥å‘Š\n    await step4_generateAnalyticsReport(resourceManager);\n    \n    console.log('='.repeat(50));\n    console.log('ğŸ‰ è¿ç§»ç¤ºä¾‹å®Œæˆï¼');\n    console.log('ğŸ’¡ ä¸‹ä¸€æ­¥ï¼šåœ¨å®é™…é¡¹ç›®ä¸­æ›¿æ¢SimplePDFCenterç»„ä»¶');\n    \n  } catch (error) {\n    console.error('âŒ è¿ç§»ç¤ºä¾‹å¤±è´¥:', error);\n  }\n}\n\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤æ–‡ä»¶ï¼Œæ‰§è¡Œè¿ç§»ç¤ºä¾‹\nif (require.main === module) {\n  runMigrationExample();\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1780,1783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1780,1783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3046,3049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3046,3049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4254,4257],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4254,4257],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Period Hub Enterprise Resource Management System\n * ä¼ä¸šçº§èµ„æºç®¡ç†ç³»ç»Ÿæ ¸å¿ƒç±»å‹å®šä¹‰\n */\n\nimport { Locale } from '@/types/pdf';\n\n// èµ„æºçŠ¶æ€æšä¸¾\nexport enum ResourceStatus {\n  ACTIVE = 'active',\n  DRAFT = 'draft',\n  ARCHIVED = 'archived',\n  PENDING = 'pending',\n  DEPRECATED = 'deprecated'\n}\n\n// èµ„æºç±»å‹æšä¸¾\nexport enum ResourceType {\n  ARTICLE = 'article',\n  PDF = 'pdf',\n  INTERACTIVE_TOOL = 'interactive_tool',\n  VIDEO = 'video',\n  AUDIO = 'audio',\n  INFOGRAPHIC = 'infographic'\n}\n\n// èµ„æºéš¾åº¦çº§åˆ«\nexport enum DifficultyLevel {\n  BEGINNER = 'beginner',\n  INTERMEDIATE = 'intermediate',\n  ADVANCED = 'advanced',\n  EXPERT = 'expert'\n}\n\n// ç›®æ ‡ç”¨æˆ·ç¾¤ä½“\nexport enum TargetAudience {\n  TEENS = 'teens',\n  ADULTS = 'adults',\n  PARENTS = 'parents',\n  HEALTHCARE_PROVIDERS = 'healthcare_providers',\n  EDUCATORS = 'educators',\n  GENERAL = 'general'\n}\n\n// æ‰©å±•çš„èµ„æºåˆ†ç±»\nexport interface ResourceCategory {\n  id: string;\n  name: Record<Locale, string>;\n  description: Record<Locale, string>;\n  icon?: string;\n  color?: string;\n  priority: number;\n  isVisible: boolean;\n  parentId?: string;\n  children?: ResourceCategory[];\n}\n\n// èµ„æºæ ‡ç­¾ç³»ç»Ÿ\nexport interface ResourceTag {\n  id: string;\n  name: Record<Locale, string>;\n  category: string;\n  priority: number;\n  isVisible: boolean;\n}\n\n// èµ„æºä½¿ç”¨ç»Ÿè®¡\nexport interface ResourceUsageStats {\n  views: number;\n  downloads: number;\n  shares: number;\n  likes: number;\n  searchHits: number;\n  lastAccessed: Date;\n  popularityScore: number;\n  userRating: number;\n  ratingCount: number;\n}\n\n// èµ„æºSEOä¿¡æ¯\nexport interface ResourceSEO {\n  title: Record<Locale, string>;\n  description: Record<Locale, string>;\n  keywords: Record<Locale, string[]>;\n  ogImage?: string;\n  ogTitle?: Record<Locale, string>;\n  ogDescription?: Record<Locale, string>;\n  canonicalUrl?: string;\n  structuredData?: Record<string, any>;\n}\n\n// èµ„æºè®¿é—®æ§åˆ¶\nexport interface ResourceAccess {\n  isPublic: boolean;\n  requiresAuth: boolean;\n  allowedRoles: string[];\n  permissions: string[];\n  ageRestriction?: number;\n  geographicRestrictions?: string[];\n}\n\n// ä¼ä¸šçº§èµ„æºå®šä¹‰\nexport interface EnterpriseResource {\n  // åŸºç¡€ä¿¡æ¯\n  id: string;\n  type: ResourceType;\n  status: ResourceStatus;\n  version: string;\n  \n  // å†…å®¹ä¿¡æ¯\n  title: Record<Locale, string>;\n  description: Record<Locale, string>;\n  content?: Record<Locale, string>;\n  summary: Record<Locale, string>;\n  \n  // åˆ†ç±»å’Œæ ‡ç­¾\n  categoryId: string;\n  subcategoryId?: string;\n  tags: string[];\n  keywords: Record<Locale, string[]>;\n  \n  // æ–‡ä»¶ä¿¡æ¯\n  files: {\n    [key: string]: {\n      url: string;\n      mimeType: string;\n      size: number;\n      checksum: string;\n      lastModified: Date;\n    };\n  };\n  \n  // å…ƒæ•°æ®\n  author: string;\n  publishDate: Date;\n  lastModified: Date;\n  expiryDate?: Date;\n  \n  // åˆ†çº§ä¿¡æ¯\n  difficulty: DifficultyLevel;\n  targetAudience: TargetAudience[];\n  estimatedReadTime?: number;\n  \n  // å…³è”èµ„æº\n  relatedResources: string[];\n  prerequisites: string[];\n  followUpResources: string[];\n  \n  // ç»Ÿè®¡ä¿¡æ¯\n  stats: ResourceUsageStats;\n  \n  // SEOä¿¡æ¯\n  seo: ResourceSEO;\n  \n  // è®¿é—®æ§åˆ¶\n  access: ResourceAccess;\n  \n  // è‡ªå®šä¹‰å­—æ®µ\n  customFields: Record<string, any>;\n  \n  // ç‰ˆæœ¬æ§åˆ¶\n  changeLog: {\n    version: string;\n    date: Date;\n    changes: string;\n    author: string;\n  }[];\n}\n\n// èµ„æºæœç´¢è¿‡æ»¤å™¨\nexport interface ResourceSearchFilters {\n  categories?: string[];\n  tags?: string[];\n  type?: ResourceType[];\n  status?: ResourceStatus[];\n  difficulty?: DifficultyLevel[];\n  targetAudience?: TargetAudience[];\n  publishDateRange?: {\n    start: Date;\n    end: Date;\n  };\n  language?: Locale[];\n  hasFiles?: boolean;\n  minimumRating?: number;\n  sortBy?: 'relevance' | 'popularity' | 'date' | 'rating' | 'downloads';\n  sortOrder?: 'asc' | 'desc';\n}\n\n// èµ„æºæœç´¢ç»“æœ\nexport interface ResourceSearchResult {\n  resources: EnterpriseResource[];\n  total: number;\n  page: number;\n  pageSize: number;\n  filters: ResourceSearchFilters;\n  searchTerm?: string;\n  searchTime: number;\n  suggestions?: string[];\n}\n\n// èµ„æºç®¡ç†å™¨é…ç½®\nexport interface ResourceManagerConfig {\n  cacheEnabled: boolean;\n  cacheTimeout: number;\n  validationEnabled: boolean;\n  statsEnabled: boolean;\n  seoEnabled: boolean;\n  accessControlEnabled: boolean;\n  maxFileSize: number;\n  allowedFileTypes: string[];\n  defaultLanguage: Locale;\n  supportedLanguages: Locale[];\n}\n\n// èµ„æºæ“ä½œç»“æœ\nexport interface ResourceOperationResult<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  warnings?: string[];\n  timestamp: Date;\n}\n\n// æ‰¹é‡æ“ä½œ\nexport interface BulkOperationResult {\n  totalRequested: number;\n  successful: number;\n  failed: number;\n  errors: { id: string; error: string }[];\n  warnings: { id: string; warning: string }[];\n}\n\n// èµ„æºåˆ†ææŠ¥å‘Š\nexport interface ResourceAnalyticsReport {\n  totalResources: number;\n  resourcesByType: Record<ResourceType, number>;\n  resourcesByStatus: Record<ResourceStatus, number>;\n  resourcesByCategory: Record<string, number>;\n  topTags: Array<{ tag: string; count: number }>;\n  popularResources: Array<{ id: string; title: string; stats: ResourceUsageStats }>;\n  recentActivity: Array<{ date: Date; action: string; resourceId: string }>;\n  performanceMetrics: {\n    averageSearchTime: number;\n    averageLoadTime: number;\n    errorRate: number;\n    cacheHitRate: number;\n  };\n}\n\n// èµ„æºéªŒè¯é”™è¯¯\nexport interface ResourceValidationError {\n  field: string;\n  message: string;\n  code: string;\n  severity: 'error' | 'warning' | 'info';\n}\n\n// èµ„æºå¯¼å…¥/å¯¼å‡º\nexport interface ResourceImportResult {\n  imported: number;\n  skipped: number;\n  errors: Array<{ line: number; error: string }>;\n  warnings: Array<{ line: number; warning: string }>;\n}\n\nexport interface ResourceExportOptions {\n  format: 'json' | 'csv' | 'xlsx' | 'xml';\n  includeStats: boolean;\n  includeContent: boolean;\n  filters?: ResourceSearchFilters;\n  fields?: string[];\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/utils/factory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/resource-manager/validation/ResourceValidator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":345,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8698,8701],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8698,8701],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Period Hub Resource Validator\n * èµ„æºéªŒè¯å™¨\n */\n\nimport { \n  EnterpriseResource, \n  ResourceValidationError, \n  ResourceManagerConfig,\n  ResourceType,\n  ResourceStatus,\n  DifficultyLevel,\n  TargetAudience\n} from '../types';\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ResourceValidationError[];\n  warnings: ResourceValidationError[];\n}\n\nexport class ResourceValidator {\n  private config: ResourceManagerConfig;\n\n  constructor(config: ResourceManagerConfig) {\n    this.config = config;\n  }\n\n  /**\n   * åˆå§‹åŒ–éªŒè¯å™¨\n   */\n  async initialize(): Promise<void> {\n    // åˆå§‹åŒ–éªŒè¯è§„åˆ™\n  }\n\n  /**\n   * éªŒè¯èµ„æº\n   */\n  async validateResource(resource: EnterpriseResource): Promise<ValidationResult> {\n    const errors: ResourceValidationError[] = [];\n    const warnings: ResourceValidationError[] = [];\n\n    // éªŒè¯å¿…å¡«å­—æ®µ\n    this.validateRequiredFields(resource, errors);\n    \n    // éªŒè¯IDæ ¼å¼\n    this.validateId(resource.id, errors);\n    \n    // éªŒè¯ç±»å‹\n    this.validateType(resource.type, errors);\n    \n    // éªŒè¯çŠ¶æ€\n    this.validateStatus(resource.status, errors);\n    \n    // éªŒè¯æ ‡é¢˜\n    this.validateTitle(resource.title, errors);\n    \n    // éªŒè¯æè¿°\n    this.validateDescription(resource.description, errors);\n    \n    // éªŒè¯éš¾åº¦çº§åˆ«\n    this.validateDifficulty(resource.difficulty, errors);\n    \n    // éªŒè¯ç›®æ ‡ç”¨æˆ·\n    this.validateTargetAudience(resource.targetAudience, errors);\n    \n    // éªŒè¯å…³é”®è¯\n    this.validateKeywords(resource.keywords, warnings);\n    \n    // éªŒè¯æ–‡ä»¶\n    this.validateFiles(resource.files, errors);\n    \n    // éªŒè¯æ—¥æœŸ\n    this.validateDates(resource, errors);\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings\n    };\n  }\n\n  /**\n   * éªŒè¯å¿…å¡«å­—æ®µ\n   */\n  private validateRequiredFields(resource: EnterpriseResource, errors: ResourceValidationError[]): void {\n    const requiredFields = ['id', 'type', 'status', 'title', 'description', 'categoryId'];\n    \n    for (const field of requiredFields) {\n      if (!resource[field as keyof EnterpriseResource]) {\n        errors.push({\n          field,\n          message: `${field} is required`,\n          code: 'REQUIRED_FIELD_MISSING',\n          severity: 'error'\n        });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯IDæ ¼å¼\n   */\n  private validateId(id: string, errors: ResourceValidationError[]): void {\n    if (!id) return;\n    \n    const idRegex = /^[a-zA-Z0-9-_]+$/;\n    if (!idRegex.test(id)) {\n      errors.push({\n        field: 'id',\n        message: 'ID must contain only letters, numbers, hyphens, and underscores',\n        code: 'INVALID_ID_FORMAT',\n        severity: 'error'\n      });\n    }\n    \n    if (id.length > 100) {\n      errors.push({\n        field: 'id',\n        message: 'ID must be less than 100 characters',\n        code: 'ID_TOO_LONG',\n        severity: 'error'\n      });\n    }\n  }\n\n  /**\n   * éªŒè¯ç±»å‹\n   */\n  private validateType(type: ResourceType, errors: ResourceValidationError[]): void {\n    if (!Object.values(ResourceType).includes(type)) {\n      errors.push({\n        field: 'type',\n        message: 'Invalid resource type',\n        code: 'INVALID_TYPE',\n        severity: 'error'\n      });\n    }\n  }\n\n  /**\n   * éªŒè¯çŠ¶æ€\n   */\n  private validateStatus(status: ResourceStatus, errors: ResourceValidationError[]): void {\n    if (!Object.values(ResourceStatus).includes(status)) {\n      errors.push({\n        field: 'status',\n        message: 'Invalid resource status',\n        code: 'INVALID_STATUS',\n        severity: 'error'\n      });\n    }\n  }\n\n  /**\n   * éªŒè¯æ ‡é¢˜\n   */\n  private validateTitle(title: Record<string, string>, errors: ResourceValidationError[]): void {\n    if (!title || typeof title !== 'object') {\n      errors.push({\n        field: 'title',\n        message: 'Title must be an object with language keys',\n        code: 'INVALID_TITLE_FORMAT',\n        severity: 'error'\n      });\n      return;\n    }\n\n    for (const locale of this.config.supportedLanguages) {\n      const titleText = title[locale];\n      if (!titleText || typeof titleText !== 'string') {\n        errors.push({\n          field: 'title',\n          message: `Title for locale ${locale} is required`,\n          code: 'MISSING_TITLE_LOCALE',\n          severity: 'error'\n        });\n        continue;\n      }\n\n      if (titleText.length > 200) {\n        errors.push({\n          field: 'title',\n          message: `Title for locale ${locale} is too long (max 200 characters)`,\n          code: 'TITLE_TOO_LONG',\n          severity: 'error'\n        });\n      }\n\n      if (titleText.length < 5) {\n        errors.push({\n          field: 'title',\n          message: `Title for locale ${locale} is too short (min 5 characters)`,\n          code: 'TITLE_TOO_SHORT',\n          severity: 'error'\n        });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯æè¿°\n   */\n  private validateDescription(description: Record<string, string>, errors: ResourceValidationError[]): void {\n    if (!description || typeof description !== 'object') {\n      errors.push({\n        field: 'description',\n        message: 'Description must be an object with language keys',\n        code: 'INVALID_DESCRIPTION_FORMAT',\n        severity: 'error'\n      });\n      return;\n    }\n\n    for (const locale of this.config.supportedLanguages) {\n      const descText = description[locale];\n      if (!descText || typeof descText !== 'string') {\n        errors.push({\n          field: 'description',\n          message: `Description for locale ${locale} is required`,\n          code: 'MISSING_DESCRIPTION_LOCALE',\n          severity: 'error'\n        });\n        continue;\n      }\n\n      if (descText.length > 1000) {\n        errors.push({\n          field: 'description',\n          message: `Description for locale ${locale} is too long (max 1000 characters)`,\n          code: 'DESCRIPTION_TOO_LONG',\n          severity: 'error'\n        });\n      }\n\n      if (descText.length < 10) {\n        errors.push({\n          field: 'description',\n          message: `Description for locale ${locale} is too short (min 10 characters)`,\n          code: 'DESCRIPTION_TOO_SHORT',\n          severity: 'error'\n        });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯éš¾åº¦çº§åˆ«\n   */\n  private validateDifficulty(difficulty: DifficultyLevel, errors: ResourceValidationError[]): void {\n    if (!Object.values(DifficultyLevel).includes(difficulty)) {\n      errors.push({\n        field: 'difficulty',\n        message: 'Invalid difficulty level',\n        code: 'INVALID_DIFFICULTY',\n        severity: 'error'\n      });\n    }\n  }\n\n  /**\n   * éªŒè¯ç›®æ ‡ç”¨æˆ·\n   */\n  private validateTargetAudience(targetAudience: TargetAudience[], errors: ResourceValidationError[]): void {\n    if (!Array.isArray(targetAudience)) {\n      errors.push({\n        field: 'targetAudience',\n        message: 'Target audience must be an array',\n        code: 'INVALID_TARGET_AUDIENCE_FORMAT',\n        severity: 'error'\n      });\n      return;\n    }\n\n    if (targetAudience.length === 0) {\n      errors.push({\n        field: 'targetAudience',\n        message: 'At least one target audience is required',\n        code: 'EMPTY_TARGET_AUDIENCE',\n        severity: 'error'\n      });\n    }\n\n    for (const audience of targetAudience) {\n      if (!Object.values(TargetAudience).includes(audience)) {\n        errors.push({\n          field: 'targetAudience',\n          message: `Invalid target audience: ${audience}`,\n          code: 'INVALID_TARGET_AUDIENCE',\n          severity: 'error'\n        });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯å…³é”®è¯\n   */\n  private validateKeywords(keywords: Record<string, string[]>, warnings: ResourceValidationError[]): void {\n    if (!keywords || typeof keywords !== 'object') {\n      warnings.push({\n        field: 'keywords',\n        message: 'Keywords should be provided for better searchability',\n        code: 'MISSING_KEYWORDS',\n        severity: 'warning'\n      });\n      return;\n    }\n\n    for (const locale of this.config.supportedLanguages) {\n      const keywordList = keywords[locale];\n      if (!keywordList || !Array.isArray(keywordList)) {\n        warnings.push({\n          field: 'keywords',\n          message: `Keywords for locale ${locale} should be an array`,\n          code: 'INVALID_KEYWORDS_FORMAT',\n          severity: 'warning'\n        });\n        continue;\n      }\n\n      if (keywordList.length === 0) {\n        warnings.push({\n          field: 'keywords',\n          message: `Keywords for locale ${locale} are empty`,\n          code: 'EMPTY_KEYWORDS',\n          severity: 'warning'\n        });\n      }\n\n      if (keywordList.length > 20) {\n        warnings.push({\n          field: 'keywords',\n          message: `Too many keywords for locale ${locale} (max 20)`,\n          code: 'TOO_MANY_KEYWORDS',\n          severity: 'warning'\n        });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯æ–‡ä»¶\n   */\n  private validateFiles(files: Record<string, any>, errors: ResourceValidationError[]): void {\n    if (!files || typeof files !== 'object') {\n      return; // æ–‡ä»¶æ˜¯å¯é€‰çš„\n    }\n\n    for (const [fileKey, fileInfo] of Object.entries(files)) {\n      if (!fileInfo.url || typeof fileInfo.url !== 'string') {\n        errors.push({\n          field: 'files',\n          message: `File ${fileKey} must have a valid URL`,\n          code: 'INVALID_FILE_URL',\n          severity: 'error'\n        });\n      }\n\n      if (!fileInfo.mimeType || typeof fileInfo.mimeType !== 'string') {\n        errors.push({\n          field: 'files',\n          message: `File ${fileKey} must have a valid MIME type`,\n          code: 'INVALID_FILE_MIME_TYPE',\n          severity: 'error'\n        });\n      }\n\n      if (fileInfo.size && fileInfo.size > this.config.maxFileSize) {\n        errors.push({\n          field: 'files',\n          message: `File ${fileKey} exceeds maximum size limit`,\n          code: 'FILE_TOO_LARGE',\n          severity: 'error'\n        });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯æ—¥æœŸ\n   */\n  private validateDates(resource: EnterpriseResource, errors: ResourceValidationError[]): void {\n    const now = new Date();\n    \n    if (resource.publishDate && resource.publishDate > now) {\n      errors.push({\n        field: 'publishDate',\n        message: 'Publish date cannot be in the future',\n        code: 'INVALID_PUBLISH_DATE',\n        severity: 'error'\n      });\n    }\n\n    if (resource.expiryDate && resource.expiryDate < now) {\n      errors.push({\n        field: 'expiryDate',\n        message: 'Expiry date cannot be in the past',\n        code: 'INVALID_EXPIRY_DATE',\n        severity: 'error'\n      });\n    }\n\n    if (resource.publishDate && resource.expiryDate && resource.publishDate > resource.expiryDate) {\n      errors.push({\n        field: 'expiryDate',\n        message: 'Expiry date must be after publish date',\n        code: 'INVALID_DATE_ORDER',\n        severity: 'error'\n      });\n    }\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/security/csp-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/security/granular-csp-config.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":369,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":369,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":451,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":451,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10645,10648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10645,10648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":469,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":469,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11043,11046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11043,11046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç»†ç²’åº¦CSPé…ç½®\n * æä¾›æ›´ç²¾ç¡®çš„å®‰å…¨ç­–ç•¥æ§åˆ¶\n */\n\nexport interface GranularCSPConfig {\n  // æŒ‰é¡µé¢ç±»å‹é…ç½®ä¸åŒçš„CSPç­–ç•¥\n  pageSpecific: {\n    public: CSPDirectives;\n    authenticated: CSPDirectives;\n    admin: CSPDirectives;\n    api: CSPDirectives;\n  };\n  \n  // æŒ‰åŠŸèƒ½æ¨¡å—é…ç½®\n  featureSpecific: {\n    analytics: CSPDirectives;\n    payments: CSPDirectives;\n    uploads: CSPDirectives;\n    charts: CSPDirectives;\n  };\n  \n  // åŠ¨æ€ç­–ç•¥è°ƒæ•´\n  dynamic: {\n    enableNonce: boolean;\n    enableHash: boolean;\n    enableStrictDynamic: boolean;\n  };\n}\n\nexport interface CSPDirectives {\n  'default-src'?: string[];\n  'script-src'?: string[];\n  'style-src'?: string[];\n  'img-src'?: string[];\n  'font-src'?: string[];\n  'connect-src'?: string[];\n  'media-src'?: string[];\n  'object-src'?: string[];\n  'base-uri'?: string[];\n  'form-action'?: string[];\n  'frame-ancestors'?: string[];\n  'frame-src'?: string[];\n  'worker-src'?: string[];\n  'manifest-src'?: string[];\n  'require-sri-for'?: string[];\n}\n\n/**\n * ç»†ç²’åº¦CSPé…ç½®å®ç°\n */\nexport const granularCSPConfig: GranularCSPConfig = {\n  // æŒ‰é¡µé¢ç±»å‹é…ç½®\n  pageSpecific: {\n    // å…¬å¼€é¡µé¢ - ç›¸å¯¹å®½æ¾\n    public: {\n      'default-src': [\"'self'\"],\n      'script-src': [\n        \"'self'\",\n        \"'strict-dynamic'\",\n        'https://www.googletagmanager.com',\n        'https://www.google-analytics.com',\n      ],\n      'style-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Tailwind CSS\n        'https://fonts.googleapis.com',\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n        'https://www.periodhub.health',\n        'https://images.unsplash.com',\n      ],\n      'font-src': [\n        \"'self'\",\n        'data:',\n        'https://fonts.gstatic.com',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://www.google-analytics.com',\n        'https://analytics.google.com',\n      ],\n      'object-src': [\"'none'\"],\n      'base-uri': [\"'self'\"],\n      'form-action': [\"'self'\"],\n      'frame-ancestors': [\"'none'\"],\n    },\n    \n    // è®¤è¯é¡µé¢ - æ›´ä¸¥æ ¼\n    authenticated: {\n      'default-src': [\"'self'\"],\n      'script-src': [\n        \"'self'\",\n        \"'strict-dynamic'\",\n        'https://www.googletagmanager.com',\n      ],\n      'style-src': [\n        \"'self'\",\n        \"'unsafe-inline'\",\n        'https://fonts.googleapis.com',\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n        'https://www.periodhub.health',\n      ],\n      'font-src': [\n        \"'self'\",\n        'data:',\n        'https://fonts.gstatic.com',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://api.periodhub.health',\n        'https://www.google-analytics.com',\n      ],\n      'object-src': [\"'none'\"],\n      'base-uri': [\"'self'\"],\n      'form-action': [\"'self'\"],\n      'frame-ancestors': [\"'none'\"],\n    },\n    \n    // ç®¡ç†é¡µé¢ - æœ€ä¸¥æ ¼\n    admin: {\n      'default-src': [\"'self'\"],\n      'script-src': [\n        \"'self'\",\n        \"'strict-dynamic'\",\n      ],\n      'style-src': [\n        \"'self'\",\n        \"'unsafe-inline'\",\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n      ],\n      'font-src': [\n        \"'self'\",\n        'data:',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://api.periodhub.health',\n      ],\n      'object-src': [\"'none'\"],\n      'base-uri': [\"'self'\"],\n      'form-action': [\"'self'\"],\n      'frame-ancestors': [\"'none'\"],\n    },\n    \n    // APIé¡µé¢ - æœ€å°æƒé™\n    api: {\n      'default-src': [\"'none'\"],\n      'script-src': [\"'none'\"],\n      'style-src': [\"'none'\"],\n      'img-src': [\"'none'\"],\n      'font-src': [\"'none'\"],\n      'connect-src': [\"'self'\"],\n      'object-src': [\"'none'\"],\n      'base-uri': [\"'none'\"],\n      'form-action': [\"'none'\"],\n      'frame-ancestors': [\"'none'\"],\n    },\n  },\n  \n  // æŒ‰åŠŸèƒ½æ¨¡å—é…ç½®\n  featureSpecific: {\n    // åˆ†æåŠŸèƒ½\n    analytics: {\n      'script-src': [\n        \"'self'\",\n        'https://www.googletagmanager.com',\n        'https://www.google-analytics.com',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://www.google-analytics.com',\n        'https://analytics.google.com',\n      ],\n    },\n    \n    // æ”¯ä»˜åŠŸèƒ½\n    payments: {\n      'script-src': [\n        \"'self'\",\n        'https://js.stripe.com',\n        'https://checkout.stripe.com',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://api.stripe.com',\n        'https://checkout.stripe.com',\n      ],\n      'frame-src': [\n        'https://checkout.stripe.com',\n        'https://js.stripe.com',\n      ],\n    },\n    \n    // æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½\n    uploads: {\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n        'https://www.periodhub.health',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://api.periodhub.health',\n      ],\n    },\n    \n    // å›¾è¡¨åŠŸèƒ½\n    charts: {\n      'script-src': [\n        \"'self'\",\n        'https://cdn.jsdelivr.net', // Chart.js\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n      ],\n    },\n  },\n  \n  // åŠ¨æ€ç­–ç•¥é…ç½®\n  dynamic: {\n    enableNonce: true,\n    enableHash: true,\n    enableStrictDynamic: true,\n  },\n};\n\n/**\n * ç»†ç²’åº¦CSPç®¡ç†å™¨\n */\nexport class GranularCSPManager {\n  private config: GranularCSPConfig;\n  private nonce: string;\n  \n  constructor(config: GranularCSPConfig) {\n    this.config = config;\n    this.nonce = this.generateNonce();\n  }\n  \n  /**\n   * ç”Ÿæˆéšæœºnonce\n   */\n  private generateNonce(): string {\n    const array = new Uint8Array(16);\n    crypto.getRandomValues(array);\n    return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\n  }\n  \n  /**\n   * æ ¹æ®é¡µé¢ç±»å‹è·å–CSPç­–ç•¥\n   */\n  getCSPForPageType(pageType: keyof GranularCSPConfig['pageSpecific']): string {\n    const directives = this.config.pageSpecific[pageType];\n    return this.generateCSPHeader(directives);\n  }\n  \n  /**\n   * æ ¹æ®åŠŸèƒ½æ¨¡å—è·å–CSPç­–ç•¥\n   */\n  getCSPForFeature(feature: keyof GranularCSPConfig['featureSpecific']): string {\n    const directives = this.config.featureSpecific[feature];\n    return this.generateCSPHeader(directives);\n  }\n  \n  /**\n   * åˆå¹¶å¤šä¸ªCSPç­–ç•¥\n   */\n  mergeCSPDirectives(...directives: CSPDirectives[]): CSPDirectives {\n    const merged: CSPDirectives = {};\n    \n    directives.forEach(directive => {\n      Object.entries(directive).forEach(([key, values]) => {\n        if (merged[key as keyof CSPDirectives]) {\n          // åˆå¹¶æ•°ç»„ï¼Œå»é‡\n          const existing = merged[key as keyof CSPDirectives] as string[];\n          const combined = [...new Set([...existing, ...values])];\n          merged[key as keyof CSPDirectives] = combined;\n        } else {\n          merged[key as keyof CSPDirectives] = values;\n        }\n      });\n    });\n    \n    return merged;\n  }\n  \n  /**\n   * ç”ŸæˆCSPå¤´éƒ¨å­—ç¬¦ä¸²\n   */\n  private generateCSPHeader(directives: CSPDirectives): string {\n    const processedDirectives: string[] = [];\n    \n    Object.entries(directives).forEach(([directive, sources]) => {\n      if (sources && sources.length > 0) {\n        // å¤„ç†ç‰¹æ®ŠæŒ‡ä»¤\n        const processedSources = sources.map((source: string) => {\n          if (source === '{NONCE}') {\n            return `'nonce-${this.nonce}'`;\n          }\n          return source;\n        });\n        \n        processedDirectives.push(`${directive} ${processedSources.join(' ')}`);\n      }\n    });\n    \n    return processedDirectives.join('; ');\n  }\n  \n  /**\n   * éªŒè¯èµ„æºæ˜¯å¦è¢«å…è®¸\n   */\n  validateResource(\n    pageType: keyof GranularCSPConfig['pageSpecific'],\n    resourceType: keyof CSPDirectives,\n    url: string\n  ): { allowed: boolean; reason?: string } {\n    const directives = this.config.pageSpecific[pageType];\n    const allowedSources = directives[resourceType];\n    \n    if (!allowedSources) {\n      return { allowed: false, reason: `No ${resourceType} directive found` };\n    }\n    \n    try {\n      const urlObj = new URL(url);\n      \n      // æ£€æŸ¥æ˜¯å¦åŒ¹é…å…è®¸çš„æº\n      const isAllowed = allowedSources.some(source => {\n        if (source === \"'self'\") {\n          return urlObj.origin === window.location.origin;\n        }\n        if (source === 'data:') {\n          return urlObj.protocol === 'data:';\n        }\n        if (source === 'blob:') {\n          return urlObj.protocol === 'blob:';\n        }\n        if (source.startsWith('https://')) {\n          return urlObj.protocol === 'https:' && \n                 (urlObj.hostname === source.replace('https://', '') ||\n                  urlObj.hostname.endsWith('.' + source.replace('https://', '')));\n        }\n        return false;\n      });\n      \n      if (!isAllowed) {\n        return { \n          allowed: false, \n          reason: `URL ${url} is not allowed by ${resourceType} directive` \n        };\n      }\n      \n      return { allowed: true };\n    } catch (error) {\n      return { allowed: false, reason: 'Invalid URL format' };\n    }\n  }\n  \n  /**\n   * è·å–å½“å‰nonce\n   */\n  getNonce(): string {\n    return this.nonce;\n  }\n  \n  /**\n   * ç”Ÿæˆèµ„æºå®Œæ•´æ€§å“ˆå¸Œ\n   */\n  async generateResourceHash(content: string): Promise<string> {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(content);\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n    return `sha256-${btoa(hashHex)}`;\n  }\n}\n\n/**\n * CSPç­–ç•¥æµ‹è¯•å™¨\n */\nexport class CSPPolicyTester {\n  private manager: GranularCSPManager;\n  \n  constructor(manager: GranularCSPManager) {\n    this.manager = manager;\n  }\n  \n  /**\n   * æµ‹è¯•CSPç­–ç•¥\n   */\n  async testCSPPolicy(pageType: keyof GranularCSPConfig['pageSpecific']) {\n    const tests = [\n      {\n        name: 'Self-origin script',\n        type: 'script-src' as keyof CSPDirectives,\n        url: `${window.location.origin}/script.js`,\n        expected: true,\n      },\n      {\n        name: 'External script',\n        type: 'script-src' as keyof CSPDirectives,\n        url: 'https://malicious-site.com/script.js',\n        expected: false,\n      },\n      {\n        name: 'Data URI image',\n        type: 'img-src' as keyof CSPDirectives,\n        url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n        expected: true,\n      },\n      {\n        name: 'External image',\n        type: 'img-src' as keyof CSPDirectives,\n        url: 'https://malicious-site.com/image.jpg',\n        expected: false,\n      },\n    ];\n    \n    const results = tests.map(test => {\n      const result = this.manager.validateResource(pageType, test.type, test.url);\n      return {\n        ...test,\n        actual: result.allowed,\n        passed: result.allowed === test.expected,\n        reason: result.reason,\n      };\n    });\n    \n    return results;\n  }\n  \n  /**\n   * ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š\n   */\n  generateTestReport(results: any[]) {\n    const passed = results.filter(r => r.passed).length;\n    const total = results.length;\n    \n    return {\n      summary: {\n        passed,\n        total,\n        percentage: Math.round((passed / total) * 100),\n      },\n      details: results,\n      recommendations: this.generateRecommendations(results),\n    };\n  }\n  \n  /**\n   * ç”Ÿæˆä¼˜åŒ–å»ºè®®\n   */\n  private generateRecommendations(results: any[]) {\n    const recommendations = [];\n    \n    const failedTests = results.filter(r => !r.passed);\n    \n    if (failedTests.length > 0) {\n      recommendations.push({\n        type: 'security',\n        message: `${failedTests.length} ä¸ªCSPæµ‹è¯•å¤±è´¥`,\n        action: 'æ£€æŸ¥CSPç­–ç•¥é…ç½®ï¼Œç¡®ä¿æ‰€æœ‰å¿…è¦çš„èµ„æºéƒ½è¢«å…è®¸',\n      });\n    }\n    \n    return recommendations;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/security/strict-csp-config.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":208,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":208,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":234,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":234,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":260,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":260,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":272,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":272,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6267,6270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6267,6270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":279,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6381,6384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6381,6384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6725,6728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6725,6728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'blockedUri' is assigned a value but never used.","line":298,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":298,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7193,7196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7193,7196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ä¸¥æ ¼CSPé…ç½® - ç¬¬ä¸‰æ–¹èµ„æºæ§åˆ¶\n * æä¾›ç»†ç²’åº¦çš„å®‰å…¨ç­–ç•¥æ§åˆ¶\n */\n\nexport interface StrictCSPConfig {\n  // å…è®¸çš„ç¬¬ä¸‰æ–¹åŸŸåç™½åå•\n  allowedDomains: {\n    images: string[];\n    scripts: string[];\n    styles: string[];\n    fonts: string[];\n    analytics: string[];\n    apis: string[];\n  };\n  \n  // å†…è”å†…å®¹æ§åˆ¶\n  inlineContent: {\n    allowInlineScripts: boolean;\n    allowInlineStyles: boolean;\n    requireNonce: boolean;\n  };\n  \n  // èµ„æºå®Œæ•´æ€§æ£€æŸ¥\n  integrity: {\n    requireSRI: boolean;\n    allowedHashes: string[];\n  };\n}\n\n/**\n * ç”Ÿäº§ç¯å¢ƒä¸¥æ ¼CSPé…ç½®\n */\nexport const strictProductionCSP: StrictCSPConfig = {\n  allowedDomains: {\n    // å›¾ç‰‡èµ„æº - åªå…è®¸å¯ä¿¡çš„CDN\n    images: [\n      'periodhub.health',\n      'cdn.periodhub.health',\n      'images.unsplash.com', // å¦‚æœéœ€è¦\n      'via.placeholder.com', // å ä½å›¾ç‰‡\n    ],\n    \n    // è„šæœ¬èµ„æº - ä¸¥æ ¼æ§åˆ¶\n    scripts: [\n      'periodhub.health',\n      'www.googletagmanager.com', // Google Analytics\n      'www.google-analytics.com',\n      'cdn.jsdelivr.net', // å¦‚æœéœ€è¦ç‰¹å®šåº“\n    ],\n    \n    // æ ·å¼èµ„æº - åªå…è®¸å¿…è¦çš„\n    styles: [\n      'periodhub.health',\n      'fonts.googleapis.com', // Google Fonts CSS\n    ],\n    \n    // å­—ä½“èµ„æº\n    fonts: [\n      'periodhub.health',\n      'fonts.gstatic.com', // Google Fonts\n    ],\n    \n    // åˆ†ææœåŠ¡\n    analytics: [\n      'www.google-analytics.com',\n      'analytics.google.com',\n      'googletagmanager.com',\n    ],\n    \n    // APIç«¯ç‚¹\n    apis: [\n      'api.periodhub.health',\n      'www.periodhub.health',\n    ],\n  },\n  \n  inlineContent: {\n    allowInlineScripts: false, // ç”Ÿäº§ç¯å¢ƒç¦æ­¢å†…è”è„šæœ¬\n    allowInlineStyles: true,   // Tailwind CSSéœ€è¦å†…è”æ ·å¼\n    requireNonce: true,        // è¦æ±‚nonceéªŒè¯\n  },\n  \n  integrity: {\n    requireSRI: true,          // è¦æ±‚å­èµ„æºå®Œæ•´æ€§\n    allowedHashes: [],         // å…è®¸çš„å“ˆå¸Œå€¼\n  },\n};\n\n/**\n * ç”Ÿæˆä¸¥æ ¼çš„CSPæŒ‡ä»¤\n */\nexport function generateStrictCSPDirectives(config: StrictCSPConfig) {\n  const { allowedDomains, inlineContent, integrity } = config;\n  \n  return {\n    // é»˜è®¤ç­–ç•¥ï¼šåªå…è®¸åŒæº\n    'default-src': [\"'self'\"],\n    \n    // è„šæœ¬ç­–ç•¥ï¼šä¸¥æ ¼æ§åˆ¶ç¬¬ä¸‰æ–¹è„šæœ¬\n    'script-src': [\n      \"'self'\",\n      ...(inlineContent.allowInlineScripts ? [\"'unsafe-inline'\"] : []),\n      ...(inlineContent.requireNonce ? [\"'nonce-{NONCE}'\"] : []),\n      ...allowedDomains.scripts.map(domain => `https://${domain}`),\n    ],\n    \n    // æ ·å¼ç­–ç•¥ï¼šæ§åˆ¶ç¬¬ä¸‰æ–¹æ ·å¼\n    'style-src': [\n      \"'self'\",\n      ...(inlineContent.allowInlineStyles ? [\"'unsafe-inline'\"] : []),\n      ...allowedDomains.styles.map(domain => `https://${domain}`),\n    ],\n    \n    // å›¾ç‰‡ç­–ç•¥ï¼šä¸¥æ ¼æ§åˆ¶å›¾ç‰‡æº\n    'img-src': [\n      \"'self'\",\n      'data:',\n      'blob:',\n      ...allowedDomains.images.map(domain => `https://${domain}`),\n    ],\n    \n    // å­—ä½“ç­–ç•¥ï¼šæ§åˆ¶å­—ä½“æº\n    'font-src': [\n      \"'self'\",\n      'data:',\n      ...allowedDomains.fonts.map(domain => `https://${domain}`),\n    ],\n    \n    // è¿æ¥ç­–ç•¥ï¼šæ§åˆ¶APIè°ƒç”¨\n    'connect-src': [\n      \"'self'\",\n      'wss:',\n      ...allowedDomains.apis.map(domain => `https://${domain}`),\n      ...allowedDomains.analytics.map(domain => `https://${domain}`),\n    ],\n    \n    // åª’ä½“ç­–ç•¥ï¼šåªå…è®¸åŒæºåª’ä½“\n    'media-src': [\n      \"'self'\",\n      'data:',\n      'blob:',\n    ],\n    \n    // å¯¹è±¡ç­–ç•¥ï¼šå®Œå…¨ç¦æ­¢æ’ä»¶\n    'object-src': [\"'none'\"],\n    \n    // åŸºç¡€URIï¼šåªå…è®¸åŒæº\n    'base-uri': [\"'self'\"],\n    \n    // è¡¨å•æ“ä½œï¼šåªå…è®¸åŒæºæäº¤\n    'form-action': [\"'self'\"],\n    \n    // æ¡†æ¶ç¥–å…ˆï¼šé˜²æ­¢ç‚¹å‡»åŠ«æŒ\n    'frame-ancestors': [\"'none'\"],\n    \n    // å·¥ä½œçº¿ç¨‹ï¼šåªå…è®¸åŒæº\n    'worker-src': [\n      \"'self'\",\n      'blob:',\n    ],\n    \n    // æ¸…å•ï¼šåªå…è®¸åŒæº\n    'manifest-src': [\"'self'\"],\n    \n    // å­èµ„æºå®Œæ•´æ€§ï¼šè¦æ±‚SRI\n    ...(integrity.requireSRI ? {\n      'require-sri-for': ['script', 'style'],\n    } : {}),\n  };\n}\n\n/**\n * ç¬¬ä¸‰æ–¹èµ„æºéªŒè¯å™¨\n */\nexport class ThirdPartyResourceValidator {\n  private config: StrictCSPConfig;\n  \n  constructor(config: StrictCSPConfig) {\n    this.config = config;\n  }\n  \n  /**\n   * éªŒè¯å›¾ç‰‡URLæ˜¯å¦è¢«å…è®¸\n   */\n  validateImageURL(url: string): { allowed: boolean; reason?: string } {\n    try {\n      const urlObj = new URL(url);\n      \n      // æ£€æŸ¥åè®®\n      if (urlObj.protocol !== 'https:' && urlObj.protocol !== 'data:' && urlObj.protocol !== 'blob:') {\n        return { allowed: false, reason: 'Only HTTPS, data, and blob URLs are allowed' };\n      }\n      \n      // æ£€æŸ¥åŸŸåç™½åå•\n      if (urlObj.protocol === 'https:') {\n        const domain = urlObj.hostname;\n        const isAllowed = this.config.allowedDomains.images.some(allowedDomain => \n          domain === allowedDomain || domain.endsWith(`.${allowedDomain}`)\n        );\n        \n        if (!isAllowed) {\n          return { allowed: false, reason: `Domain ${domain} is not in the allowed list` };\n        }\n      }\n      \n      return { allowed: true };\n    } catch (error) {\n      return { allowed: false, reason: 'Invalid URL format' };\n    }\n  }\n  \n  /**\n   * éªŒè¯è„šæœ¬URLæ˜¯å¦è¢«å…è®¸\n   */\n  validateScriptURL(url: string): { allowed: boolean; reason?: string } {\n    try {\n      const urlObj = new URL(url);\n      \n      if (urlObj.protocol !== 'https:') {\n        return { allowed: false, reason: 'Only HTTPS URLs are allowed for scripts' };\n      }\n      \n      const domain = urlObj.hostname;\n      const isAllowed = this.config.allowedDomains.scripts.some(allowedDomain => \n        domain === allowedDomain || domain.endsWith(`.${allowedDomain}`)\n      );\n      \n      if (!isAllowed) {\n        return { allowed: false, reason: `Script domain ${domain} is not in the allowed list` };\n      }\n      \n      return { allowed: true };\n    } catch (error) {\n      return { allowed: false, reason: 'Invalid URL format' };\n    }\n  }\n  \n  /**\n   * éªŒè¯æ ·å¼URLæ˜¯å¦è¢«å…è®¸\n   */\n  validateStyleURL(url: string): { allowed: boolean; reason?: string } {\n    try {\n      const urlObj = new URL(url);\n      \n      if (urlObj.protocol !== 'https:') {\n        return { allowed: false, reason: 'Only HTTPS URLs are allowed for styles' };\n      }\n      \n      const domain = urlObj.hostname;\n      const isAllowed = this.config.allowedDomains.styles.some(allowedDomain => \n        domain === allowedDomain || domain.endsWith(`.${allowedDomain}`)\n      );\n      \n      if (!isAllowed) {\n        return { allowed: false, reason: `Style domain ${domain} is not in the allowed list` };\n      }\n      \n      return { allowed: true };\n    } catch (error) {\n      return { allowed: false, reason: 'Invalid URL format' };\n    }\n  }\n}\n\n/**\n * CSPè¿è§„ç›‘æ§å’ŒæŠ¥å‘Š\n */\nexport class CSPViolationMonitor {\n  private violations: Array<{\n    timestamp: Date;\n    violation: any;\n    severity: 'low' | 'medium' | 'high';\n  }> = [];\n  \n  /**\n   * è®°å½•CSPè¿è§„\n   */\n  recordViolation(violation: any) {\n    const severity = this.assessSeverity(violation);\n    \n    this.violations.push({\n      timestamp: new Date(),\n      violation,\n      severity,\n    });\n    \n    // å¦‚æœæ˜¯é«˜é£é™©è¿è§„ï¼Œç«‹å³å‘Šè­¦\n    if (severity === 'high') {\n      this.alertHighSeverityViolation(violation);\n    }\n  }\n  \n  /**\n   * è¯„ä¼°è¿è§„ä¸¥é‡ç¨‹åº¦\n   */\n  private assessSeverity(violation: any): 'low' | 'medium' | 'high' {\n    const { 'violated-directive': directive, 'blocked-uri': blockedUri } = violation;\n    \n    // é«˜é£é™©ï¼šè„šæœ¬ç›¸å…³è¿è§„\n    if (directive.includes('script-src')) {\n      return 'high';\n    }\n    \n    // ä¸­é£é™©ï¼šæ ·å¼æˆ–è¿æ¥ç›¸å…³è¿è§„\n    if (directive.includes('style-src') || directive.includes('connect-src')) {\n      return 'medium';\n    }\n    \n    // ä½é£é™©ï¼šå…¶ä»–è¿è§„\n    return 'low';\n  }\n  \n  /**\n   * é«˜é£é™©è¿è§„å‘Šè­¦\n   */\n  private alertHighSeverityViolation(violation: any) {\n    console.error('ğŸš¨ HIGH SEVERITY CSP VIOLATION:', {\n      directive: violation['violated-directive'],\n      blocked: violation['blocked-uri'],\n      document: violation['document-uri'],\n      timestamp: new Date().toISOString(),\n    });\n    \n    // åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‘é€åˆ°ç›‘æ§æœåŠ¡\n    if (process.env.NODE_ENV === 'production') {\n      // å‘é€åˆ°Sentryã€DataDogç­‰ç›‘æ§æœåŠ¡\n      // monitoringService.reportCSPViolation(violation);\n    }\n  }\n  \n  /**\n   * è·å–è¿è§„ç»Ÿè®¡\n   */\n  getViolationStats() {\n    const stats = {\n      total: this.violations.length,\n      high: this.violations.filter(v => v.severity === 'high').length,\n      medium: this.violations.filter(v => v.severity === 'medium').length,\n      low: this.violations.filter(v => v.severity === 'low').length,\n    };\n    \n    return stats;\n  }\n}\n\n/**\n * åŠ¨æ€CSPç­–ç•¥ç”Ÿæˆå™¨\n */\nexport class DynamicCSPGenerator {\n  private config: StrictCSPConfig;\n  private nonce: string;\n  \n  constructor(config: StrictCSPConfig) {\n    this.config = config;\n    this.nonce = this.generateNonce();\n  }\n  \n  /**\n   * ç”Ÿæˆéšæœºnonce\n   */\n  private generateNonce(): string {\n    const array = new Uint8Array(16);\n    crypto.getRandomValues(array);\n    return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\n  }\n  \n  /**\n   * ç”Ÿæˆå½“å‰é¡µé¢çš„CSPå¤´éƒ¨\n   */\n  generateCSPHeader(): string {\n    const directives = generateStrictCSPDirectives(this.config);\n    \n    // æ›¿æ¢nonceå ä½ç¬¦\n    const processedDirectives = Object.entries(directives).map(([key, values]) => {\n      const processedValues = values.map(value => \n        value.replace('{NONCE}', this.nonce)\n      );\n      return `${key} ${processedValues.join(' ')}`;\n    });\n    \n    return processedDirectives.join('; ');\n  }\n  \n  /**\n   * è·å–å½“å‰nonce\n   */\n  getNonce(): string {\n    return this.nonce;\n  }\n  \n  /**\n   * éªŒè¯èµ„æºæ˜¯å¦è¢«CSPå…è®¸\n   */\n  validateResource(type: 'script' | 'style' | 'image', url: string): boolean {\n    const validator = new ThirdPartyResourceValidator(this.config);\n    \n    switch (type) {\n      case 'script':\n        return validator.validateScriptURL(url).allowed;\n      case 'style':\n        return validator.validateStyleURL(url).allowed;\n      case 'image':\n        return validator.validateImageURL(url).allowed;\n      default:\n        return false;\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/seo-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/seo-meta.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[205,208],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[205,208],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'structuredData' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { Metadata } from 'next';\n\ninterface SEOMetaProps {\n  title: string;\n  description: string;\n  keywords?: string[];\n  canonical?: string;\n  ogImage?: string;\n  noindex?: boolean;\n  structuredData?: any;\n}\n\nexport function generateAdvancedMeta({\n  title,\n  description,\n  keywords = [],\n  canonical,\n  ogImage = '/og-default.jpg',\n  noindex = false,\n  structuredData\n}: SEOMetaProps): Metadata {\n  const fullTitle = title.includes('PeriodHub') ? title : `${title} | PeriodHub`;\n  \n  return {\n    title: fullTitle,\n    description,\n    keywords: keywords.join(', '),\n    \n    // åŸºç¡€å…ƒæ•°æ®\n    robots: {\n      index: !noindex,\n      follow: !noindex,\n      googleBot: {\n        index: !noindex,\n        follow: !noindex,\n        'max-video-preview': -1,\n        'max-image-preview': 'large',\n        'max-snippet': -1,\n      },\n    },\n    \n    // Open Graph\n    openGraph: {\n      title: fullTitle,\n      description,\n      url: canonical,\n      siteName: 'PeriodHub',\n      images: [\n        {\n          url: ogImage,\n          width: 1200,\n          height: 630,\n          alt: title,\n        }\n      ],\n      locale: 'zh_CN',\n      type: 'website',\n    },\n    \n    // Twitter Card\n    twitter: {\n      card: 'summary_large_image',\n      title: fullTitle,\n      description,\n      images: [ogImage],\n      creator: '@periodhub',\n    },\n    \n    // é«˜çº§å…ƒæ•°æ®\n    alternates: {\n      canonical,\n      languages: {\n        'zh-CN': canonical,\n        'en-US': canonical?.replace('/zh/', '/en/'),\n      },\n    },\n    \n    // å…¶ä»–é‡è¦å…ƒæ•°æ®\n    other: {\n      'theme-color': '#ff6b9d',\n      'msapplication-TileColor': '#ff6b9d',\n      'apple-mobile-web-app-capable': 'yes',\n      'apple-mobile-web-app-status-bar-style': 'default',\n      'format-detection': 'telephone=no',\n    },\n  };\n}\n\n// é¡µé¢ç‰¹å®šçš„SEOé…ç½®\nexport const pageConfigs = {\n  home: {\n    title: 'ç»æœŸå¥åº·ç®¡ç†ä¸“å®¶',\n    description: 'ç§‘å­¦çš„ç»æœŸè¿½è¸ªã€å¥åº·å»ºè®®å’Œä¸ªæ€§åŒ–æŠ¤ç†æ–¹æ¡ˆï¼Œè®©æ¯ä¸ªå¥³æ€§éƒ½èƒ½è½»æ¾ç®¡ç†è‡ªå·±çš„ç”Ÿç†å‘¨æœŸ',\n    keywords: ['ç»æœŸè¿½è¸ª', 'ç”Ÿç†å‘¨æœŸ', 'å¥³æ€§å¥åº·', 'ç»æœŸç®¡ç†', 'å¥åº·åº”ç”¨'],\n  },\n  \n  tracker: {\n    title: 'æ™ºèƒ½ç»æœŸè¿½è¸ªå™¨',\n    description: 'ç²¾å‡†é¢„æµ‹ä¸‹æ¬¡ç»æœŸï¼Œè®°å½•ç—‡çŠ¶å˜åŒ–ï¼Œæä¾›ä¸ªæ€§åŒ–å¥åº·å»ºè®®',\n    keywords: ['ç»æœŸé¢„æµ‹', 'ç—‡çŠ¶è®°å½•', 'å‘¨æœŸåˆ†æ', 'å¥åº·è¿½è¸ª'],\n  },\n  \n  health: {\n    title: 'å¥³æ€§å¥åº·çŸ¥è¯†åº“',\n    description: 'ä¸“ä¸šçš„å¥³æ€§å¥åº·çŸ¥è¯†ï¼Œç»æœŸæŠ¤ç†æŠ€å·§ï¼Œè¥å…»å»ºè®®å’Œè¿åŠ¨æŒ‡å¯¼',\n    keywords: ['å¥³æ€§å¥åº·', 'ç»æœŸæŠ¤ç†', 'è¥å…»å»ºè®®', 'å¥åº·çŸ¥è¯†'],\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/seo/dataforseo-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/seo/keyword-analyzer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1921,1924],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1921,1924],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2648,2651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2648,2651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// SEOå…³é”®è¯åˆ†æå™¨\nexport interface KeywordAnalysis {\n  keyword: string;\n  searchVolume: number;\n  competition: 'low' | 'medium' | 'high';\n  difficulty: number;\n  cpc: number;\n  opportunities: string[];\n}\n\nexport class KeywordAnalyzer {\n  private keywords: Map<string, KeywordAnalysis> = new Map();\n\n  analyzeKeyword(keyword: string): KeywordAnalysis {\n    const analysis: KeywordAnalysis = {\n      keyword,\n      searchVolume: Math.floor(Math.random() * 10000) + 1000,\n      competition: ['low', 'medium', 'high'][Math.floor(Math.random() * 3)] as 'low' | 'medium' | 'high',\n      difficulty: Math.floor(Math.random() * 100),\n      cpc: Math.random() * 5 + 1,\n      opportunities: [\n        'Long-tail variations available',\n        'Content gap identified',\n        'Local search potential'\n      ]\n    };\n\n    this.keywords.set(keyword, analysis);\n    return analysis;\n  }\n\n  getKeywords(): KeywordAnalysis[] {\n    return Array.from(this.keywords.values());\n  }\n\n  exportReport(): string {\n    return JSON.stringify(Array.from(this.keywords.values()), null, 2);\n  }\n\n  // ä¸ºSEO Dashboardæ·»åŠ çš„åˆ†ææ–¹æ³•\n  analyzePeriodHealthKeywords(): KeywordAnalysis[] {\n    return [\n      {\n        keyword: 'period pain relief',\n        searchVolume: 18500,\n        competition: 'medium',\n        difficulty: 65,\n        cpc: 3.25,\n        opportunities: ['natural remedies', 'immediate relief', 'home treatments']\n      },\n      {\n        keyword: 'menstrual cramps',\n        searchVolume: 33000,\n        competition: 'high',\n        difficulty: 78,\n        cpc: 4.15,\n        opportunities: ['explanation content', 'lifestyle tips', 'medical advice']\n      },\n      {\n        keyword: 'dysmenorrhea treatment',\n        searchVolume: 8900,\n        competition: 'low',\n        difficulty: 45,\n        cpc: 2.85,\n        opportunities: ['medical information', 'treatment options', 'specialist content']\n      }\n    ];\n  }\n\n  analyzeCompetitors(): any[] {\n    return [\n      { \n        name: 'Healthline', \n        score: 85, \n        keywords: 1500,\n        domain: 'healthline.com',\n        traffic: 2500000,\n        topKeywords: ['period pain', 'menstrual cramps', 'dysmenorrhea']\n      },\n      { \n        name: 'Mayo Clinic', \n        score: 92, \n        keywords: 800,\n        domain: 'mayoclinic.org',\n        traffic: 1800000,\n        topKeywords: ['endometriosis', 'menstrual disorders', 'pelvic pain']\n      },\n      { \n        name: 'WebMD', \n        score: 78, \n        keywords: 2000,\n        domain: 'webmd.com',\n        traffic: 3200000,\n        topKeywords: ['period symptoms', 'PMS', 'menstrual health']\n      }\n    ];\n  }\n\n  analyzeContentSEO(url: string): any {\n    return {\n      url,\n      title: `SEOåˆ†æ - ${url}`,\n      score: Math.floor(Math.random() * 30) + 70,\n      issues: [\n        'Missing meta description',\n        'Title too long',\n        'Missing alt text'\n      ],\n      recommendations: [\n        'Add meta description',\n        'Optimize title length',\n        'Add alt text to images'\n      ]\n    };\n  }\n}\n\n// å¯¼å‡ºå…¼å®¹åç§°\nexport const PeriodHubSEOAnalyzer = new KeywordAnalyzer();\nexport default KeywordAnalyzer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/seo/keyword-tracker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1682,1685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1682,1685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3400,3403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3400,3403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4025,4028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4025,4028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5085,5088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5085,5088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SEO_CONFIG, getDataForSEOConfig } from './dataforseo-config';\n\nexport interface KeywordRanking {\n  keyword: string;\n  currentPosition: number;\n  previousPosition: number;\n  searchVolume: number;\n  url: string;\n  date: string;\n  change: number;\n  serpFeatures: string[];\n}\n\nexport interface CompetitorTracking {\n  domain: string;\n  keywords: CompetitorKeyword[];\n  traffic: number;\n  visibility: number;\n  date: string;\n}\n\nexport interface CompetitorKeyword {\n  keyword: string;\n  position: number;\n  url: string;\n  searchVolume: number;\n}\n\nexport class KeywordTracker {\n  private config = getDataForSEOConfig();\n  private readonly STORAGE_KEY = 'periodhub-seo-data';\n  \n  /**\n   * è¿½è¸ªå…³é”®è¯æ’åå˜åŒ–\n   */\n  async trackKeywordRankings(): Promise<KeywordRanking[]> {\n    const keywords = [...SEO_CONFIG.primaryKeywords, ...SEO_CONFIG.longTailKeywords];\n    const rankings: KeywordRanking[] = [];\n\n    try {\n      const response = await fetch(`${this.config.baseUrl}/serp/google/organic/live`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Basic ${Buffer.from(this.config.apiKey).toString('base64')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          keyword: keywords,\n          location_code: 2156, // ä¸­å›½\n          language_code: 'zh',\n          limit: 100,\n          depth: 10\n        })\n      });\n\n      const data = await response.json();\n      const results = data.tasks?.[0]?.result || [];\n      \n      for (const result of results) {\n        const keyword = result.keyword;\n        const items = result.items || [];\n        \n        // æŸ¥æ‰¾PeriodHubçš„æ’å\n        const periodhubResult = items.find((item: any) => \n          item.domain?.includes('periodhub') || item.url?.includes('periodhub')\n        );\n        \n        if (periodhubResult) {\n          rankings.push({\n            keyword,\n            currentPosition: periodhubResult.rank_absolute,\n            previousPosition: this.getPreviousPosition(keyword),\n            searchVolume: result.search_volume || 0,\n            url: periodhubResult.url,\n            date: new Date().toISOString(),\n            change: this.calculatePositionChange(keyword, periodhubResult.rank_absolute),\n            serpFeatures: result.serp_features || []\n          });\n        }\n      }\n\n      this.saveRankings(rankings);\n      return rankings;\n    } catch (error) {\n      console.error('å…³é”®è¯æ’åè¿½è¸ªå¤±è´¥:', error);\n      return this.getFallbackRankings();\n    }\n  }\n\n  /**\n   * ç›‘æ§ç«äº‰å¯¹æ‰‹å…³é”®è¯è¡¨ç°\n   */\n  async trackCompetitors(): Promise<CompetitorTracking[]> {\n    const competitors = SEO_CONFIG.competitors;\n    const trackingData: CompetitorTracking[] = [];\n\n    for (const domain of competitors) {\n      try {\n        const response = await fetch(`${this.config.baseUrl}/domain_analytics/competitors/live`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Basic ${Buffer.from(this.config.apiKey).toString('base64')}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            target: domain,\n            location_code: 2156,\n            language_code: 'zh',\n            limit: 100\n          })\n        });\n\n        const data = await response.json();\n        const result = data.tasks?.[0]?.result?.[0];\n        \n        if (result) {\n          const keywords: CompetitorKeyword[] = result.top_keywords?.map((kw: any) => ({\n            keyword: kw.keyword,\n            position: kw.position || 0,\n            url: kw.url || '',\n            searchVolume: kw.search_volume || 0\n          })) || [];\n\n          trackingData.push({\n            domain,\n            keywords,\n            traffic: result.estimated_traffic || 0,\n            visibility: result.visibility || 0,\n            date: new Date().toISOString()\n          });\n        }\n      } catch (error) {\n        console.error(`ç›‘æ§ç«äº‰å¯¹æ‰‹ ${domain} å¤±è´¥:`, error);\n      }\n    }\n\n    return trackingData;\n  }\n\n  /**\n   * è·å–å…³é”®è¯è¶‹åŠ¿æ•°æ®\n   */\n  async getKeywordTrends(keyword: string): Promise<any> {\n    try {\n      const response = await fetch(`${this.config.baseUrl}/keywords_data/google/search_volume/live`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Basic ${Buffer.from(this.config.apiKey).toString('base64')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          keywords: [keyword],\n          location_code: 2156,\n          language_code: 'zh'\n        })\n      });\n\n      const data = await response.json();\n      return data.tasks?.[0]?.result?.[0] || null;\n    } catch (error) {\n      console.error('è·å–å…³é”®è¯è¶‹åŠ¿å¤±è´¥:', error);\n      return null;\n    }\n  }\n\n  /**\n   * ä¿å­˜æ’åæ•°æ®åˆ°æœ¬åœ°å­˜å‚¨\n   */\n  private saveRankings(rankings: KeywordRanking[]): void {\n    if (typeof window !== 'undefined') {\n      const existingData = this.getStoredData();\n      existingData.rankings = rankings;\n      existingData.lastUpdate = new Date().toISOString();\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(existingData));\n    }\n  }\n\n  /**\n   * è·å–æœ¬åœ°å­˜å‚¨çš„æ’åæ•°æ®\n   */\n  private getStoredData(): any {\n    if (typeof window === 'undefined') return { rankings: [], lastUpdate: null };\n    \n    try {\n      const data = localStorage.getItem(this.STORAGE_KEY);\n      return data ? JSON.parse(data) : { rankings: [], lastUpdate: null };\n    } catch {\n      return { rankings: [], lastUpdate: null };\n    }\n  }\n\n  /**\n   * è·å–ä¹‹å‰çš„å…³é”®è¯æ’å\n   */\n  private getPreviousPosition(keyword: string): number {\n    const data = this.getStoredData();\n    const previousRanking = data.rankings?.find((r: KeywordRanking) => r.keyword === keyword);\n    return previousRanking?.currentPosition || 0;\n  }\n\n  /**\n   * è®¡ç®—æ’åå˜åŒ–\n   */\n  private calculatePositionChange(keyword: string, currentPosition: number): number {\n    const previousPosition = this.getPreviousPosition(keyword);\n    if (previousPosition === 0) return 0;\n    return previousPosition - currentPosition;\n  }\n\n  /**\n   * è·å–æœ¬åœ°å­˜å‚¨çš„æ’åæ•°æ®\n   */\n  getStoredRankings(): KeywordRanking[] {\n    const data = this.getStoredData();\n    return data.rankings || [];\n  }\n\n  /**\n   * è·å–æ’åå˜åŒ–è¶‹åŠ¿\n   */\n  getRankingTrends(): {\n    improving: KeywordRanking[];\n    declining: KeywordRanking[];\n    stable: KeywordRanking[];\n    newRankings: KeywordRanking[];\n  } {\n    const rankings = this.getStoredRankings();\n    \n    return {\n      improving: rankings.filter(r => r.change > 0),\n      declining: rankings.filter(r => r.change < 0),\n      stable: rankings.filter(r => r.change === 0 && r.currentPosition > 0),\n      newRankings: rankings.filter(r => r.previousPosition === 0 && r.currentPosition > 0)\n    };\n  }\n\n  /**\n   * è·å–å…³é”®è¯è¡¨ç°æŠ¥å‘Š\n   */\n  getKeywordPerformanceReport(): {\n    totalKeywords: number;\n    topRanked: KeywordRanking[];\n    opportunities: KeywordRanking[];\n    averagePosition: number;\n  } {\n    const rankings = this.getStoredRankings();\n    \n    const topRanked = rankings\n      .filter(r => r.currentPosition <= 10)\n      .sort((a, b) => a.currentPosition - b.currentPosition);\n    \n    const opportunities = rankings\n      .filter(r => r.currentPosition > 10 && r.currentPosition <= 30)\n      .sort((a, b) => a.searchVolume - b.searchVolume);\n    \n    const averagePosition = rankings.length > 0 \n      ? rankings.reduce((sum, r) => sum + r.currentPosition, 0) / rankings.length \n      : 0;\n\n    return {\n      totalKeywords: rankings.length,\n      topRanked,\n      opportunities,\n      averagePosition: Math.round(averagePosition * 100) / 100\n    };\n  }\n\n  /**\n   * è·å–å›é€€æ•°æ®ï¼ˆç¦»çº¿æ¨¡å¼ï¼‰\n   */\n  private getFallbackRankings(): KeywordRanking[] {\n    return [\n      {\n        keyword: 'ç—›ç»ç¼“è§£',\n        currentPosition: 12,\n        previousPosition: 15,\n        searchVolume: 14800,\n        url: 'https://www.periodhub.health/zh/articles/pain-management',\n        date: new Date().toISOString(),\n        change: 3,\n        serpFeatures: ['featured_snippet']\n      },\n      {\n        keyword: 'ç»æœŸå¥åº·ç®¡ç†',\n        currentPosition: 8,\n        previousPosition: 11,\n        searchVolume: 3200,\n        url: 'https://www.periodhub.health/zh/health-guide',\n        date: new Date().toISOString(),\n        change: 3,\n        serpFeatures: []\n      }\n    ];\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸæ•°æ®\n   */\n  cleanupOldData(daysToKeep: number = 30): void {\n    if (typeof window === 'undefined') return;\n    \n    const data = this.getStoredData();\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysToKeep);\n    \n    if (data.rankings) {\n      data.rankings = data.rankings.filter((r: KeywordRanking) => \n        new Date(r.date) > cutoffDate\n      );\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n    }\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/seo/seo-report-generator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[630,633],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[630,633],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[753,756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[753,756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1698,1701],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1698,1701],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1718,1721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1718,1721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1743,1746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1743,1746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2761,2764],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2761,2764],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3264,3267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3264,3267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3280,3283],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3280,3283],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3929,3932],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3929,3932],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3950,3953],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3950,3953],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5026,5029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5026,5029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5403,5406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5403,5406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":221,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5649,5652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5649,5652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6314,6317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6314,6317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { KeywordTracker } from './keyword-tracker';\nimport { PeriodHubSEOAnalyzer } from './keyword-analyzer';\nimport { webVitalsTracker } from '@/lib/analytics/web-vitals';\n\nexport interface SEOReport {\n  summary: {\n    overallScore: number;\n    grade: 'A' | 'B' | 'C' | 'D' | 'F';\n    lastUpdated: string;\n    priorityIssues: string[];\n    recommendations: string[];\n  };\n  technicalSEO: {\n    score: number;\n    issues: string[];\n    optimizations: string[];\n  };\n  contentSEO: {\n    score: number;\n    keywordOptimization: string[];\n    contentGaps: string[];\n    opportunities: string[];\n  };\n  performance: {\n    webVitals: any;\n    score: number;\n    issues: string[];\n    improvements: string[];\n  };\n  competitorAnalysis: {\n    topCompetitors: any[];\n    keywordGaps: string[];\n    opportunities: string[];\n  };\n}\n\nexport class SEOReportGenerator {\n  private keywordTracker = new KeywordTracker();\n  private analyzer = PeriodHubSEOAnalyzer;\n\n  async generateReport(): Promise<SEOReport> {\n    const [\n      keywordRankings,\n      webVitals,\n      competitorData\n    ] = await Promise.all([\n      this.keywordTracker.getKeywordPerformanceReport(),\n      webVitalsTracker.generateReport(),\n      this.analyzer.analyzeCompetitors()\n    ]);\n\n    const report: SEOReport = {\n      summary: await this.generateSummary(keywordRankings, webVitals, competitorData),\n      technicalSEO: await this.analyzeTechnicalSEO(),\n      contentSEO: await this.analyzeContentSEO(keywordRankings),\n      performance: this.analyzePerformance(webVitals),\n      competitorAnalysis: await this.analyzeCompetitors(competitorData)\n    };\n\n    return report;\n  }\n\n  private async generateSummary(\n    keywordRankings: any,\n    webVitals: any,\n    competitorData: any[]\n  ): Promise<SEOReport['summary']> {\n    const scores = {\n      keyword: this.calculateKeywordScore(keywordRankings),\n      technical: 85, // åŸºäºå½“å‰æŠ€æœ¯æ¶æ„\n      performance: Math.min(100, Math.round(webVitals.summary?.score || 80)),\n      content: 90 // åŸºäºå†…å®¹è´¨é‡\n    };\n\n    const overallScore = Math.round(\n      (scores.keyword + scores.technical + scores.performance + scores.content) / 4\n    );\n\n    let grade: 'A' | 'B' | 'C' | 'D' | 'F';\n    if (overallScore >= 90) grade = 'A';\n    else if (overallScore >= 80) grade = 'B';\n    else if (overallScore >= 70) grade = 'C';\n    else if (overallScore >= 60) grade = 'D';\n    else grade = 'F';\n\n    const priorityIssues = this.identifyPriorityIssues(keywordRankings, webVitals);\n    const recommendations = this.generateRecommendations(keywordRankings, competitorData);\n\n    return {\n      overallScore,\n      grade,\n      lastUpdated: new Date().toISOString(),\n      priorityIssues,\n      recommendations\n    };\n  }\n\n  private calculateKeywordScore(keywordRankings: any): number {\n    const { topRanked, opportunities, averagePosition } = keywordRankings;\n    \n    let score = 70; // åŸºç¡€åˆ†æ•°\n    \n    // é¦–é¡µæ’ååŠ åˆ†\n    score += topRanked.length * 5;\n    \n    // å¹³å‡æ’åä¼˜åŒ–\n    if (averagePosition <= 10) score += 15;\n    else if (averagePosition <= 20) score += 10;\n    else if (averagePosition <= 30) score += 5;\n    \n    // æœºä¼šå…³é”®è¯åŠ åˆ†\n    score += Math.min(opportunities.length * 2, 10);\n    \n    return Math.min(100, score);\n  }\n\n  private identifyPriorityIssues(keywordRankings: any, webVitals: any): string[] {\n    const issues: string[] = [];\n    \n    const { topRanked, opportunities } = keywordRankings;\n    const avgMetrics = webVitals.summary?.averageMetrics || {};\n    \n    // å…³é”®è¯æ’åé—®é¢˜\n    if (topRanked.length < 3) {\n      issues.push('é¦–é¡µå…³é”®è¯æ’åä¸è¶³ï¼Œéœ€è¦åŠ å¼ºå†…å®¹ä¼˜åŒ–');\n    }\n    \n    if (opportunities.length > 5) {\n      issues.push('å­˜åœ¨å¤šä¸ªæ’åæœºä¼šï¼Œéœ€è¦é’ˆå¯¹æ€§ä¼˜åŒ–');\n    }\n    \n    // æ€§èƒ½é—®é¢˜\n    if (avgMetrics.LCP && avgMetrics.LCP > 2500) {\n      issues.push('é¡µé¢åŠ è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ');\n    }\n    \n    if (avgMetrics.CLS && avgMetrics.CLS > 0.1) {\n      issues.push('é¡µé¢å¸ƒå±€ç¨³å®šæ€§éœ€è¦æ”¹å–„');\n    }\n    \n    return issues;\n  }\n\n  private generateRecommendations(keywordRankings: any, competitorData: any[]): string[] {\n    const recommendations: string[] = [];\n    \n    const { opportunities } = keywordRankings;\n    \n    // å…³é”®è¯ä¼˜åŒ–å»ºè®®\n    if (opportunities.length > 0) {\n      recommendations.push(\n        `ä¼˜åŒ– ${opportunities.length} ä¸ªæœºä¼šå…³é”®è¯ï¼Œæå‡æ’ååˆ°å‰10ä½`\n      );\n    }\n    \n    // å†…å®¹ä¼˜åŒ–å»ºè®®\n    recommendations.push(\n      'å¢åŠ é•¿å°¾å…³é”®è¯å†…å®¹ï¼Œè¦†ç›–æ›´å¤šæœç´¢åœºæ™¯'\n    );\n    \n    // æŠ€æœ¯ä¼˜åŒ–å»ºè®®\n    recommendations.push(\n      'ä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨ç«¯'\n    );\n    \n    // ç«äº‰å¯¹æ‰‹åˆ†æå»ºè®®\n    if (competitorData.length > 0) {\n      recommendations.push(\n        'åˆ†æç«äº‰å¯¹æ‰‹çš„å†…å®¹ç­–ç•¥ï¼Œæ‰¾å‡ºå†…å®¹ç©ºç™½ç‚¹'\n      );\n    }\n    \n    return recommendations;\n  }\n\n  private async analyzeTechnicalSEO(): Promise<SEOReport['technicalSEO']> {\n    const issues: string[] = [];\n    const optimizations: string[] = [];\n    \n    // æ£€æŸ¥é™æ€æ–‡ä»¶\n    issues.push('éœ€è¦éªŒè¯sitemap.xmlå’Œrobots.txtæ˜¯å¦æ­£ç¡®é…ç½®');\n    optimizations.push('ç¡®ä¿æ‰€æœ‰é¡µé¢éƒ½æœ‰æ­£ç¡®çš„metaæ ‡ç­¾');\n    optimizations.push('ä¼˜åŒ–å›¾ç‰‡å¤§å°å’Œæ ¼å¼');\n    optimizations.push('å®ç°æ›´æœ‰æ•ˆçš„ç¼“å­˜ç­–ç•¥');\n    \n    return {\n      score: 85, // åŸºäºå½“å‰æŠ€æœ¯å®ç°\n      issues,\n      optimizations\n    };\n  }\n\n  private async analyzeContentSEO(keywordRankings: any): Promise<SEOReport['contentSEO']> {\n    const keywordOpportunities = keywordRankings.opportunities;\n    \n    const keywordOptimization = [\n      'ç—›ç»ç¼“è§£',\n      'ç»æœŸå¥åº·ç®¡ç†',\n      'ç—›ç»æ²»ç–—',\n      'è‡ªç„¶ç–—æ³•'\n    ];\n    \n    const contentGaps = [\n      'ç¼ºå°‘å…³äºç—›ç»é¢„é˜²çš„è¯¦ç»†æŒ‡å—',\n      'éœ€è¦æ›´å¤šé’å°‘å¹´ç—›ç»ç›¸å…³å†…å®¹',\n      'ç¼ºå°‘å­£èŠ‚æ€§ç—›ç»ç®¡ç†å†…å®¹'\n    ];\n    \n    const opportunitiesList = keywordOpportunities.map((kw: any) => \n      `ä¼˜åŒ– \"${kw.keyword}\" å…³é”®è¯ï¼Œå½“å‰æ’å ${kw.currentPosition}`\n    );\n    \n    return {\n      score: 88,\n      keywordOptimization,\n      contentGaps,\n      opportunities: opportunitiesList\n    };\n  }\n\n  private analyzePerformance(webVitals: any): SEOReport['performance'] {\n    const avgMetrics = webVitals.summary?.averageMetrics || {};\n    const issues: string[] = [];\n    const improvements: string[] = [];\n    \n    // æ€§èƒ½é—®é¢˜è¯†åˆ«\n    if (avgMetrics.LCP && avgMetrics.LCP > 2500) {\n      issues.push('é¡µé¢åŠ è½½æ—¶é—´è¶…è¿‡2.5ç§’');\n      improvements.push('ä¼˜åŒ–å›¾ç‰‡å‹ç¼©å’Œæ‡’åŠ è½½');\n    }\n    \n    if (avgMetrics.CLS && avgMetrics.CLS > 0.1) {\n      issues.push('é¡µé¢å¸ƒå±€åç§»è¾ƒå¤§');\n      improvements.push('ä¸ºå›¾ç‰‡å’Œå¹¿å‘Šé¢„ç•™ç©ºé—´');\n    }\n    \n    return {\n      webVitals: avgMetrics,\n      score: Math.min(100, Math.round(webVitals.summary?.score || 80)),\n      issues,\n      improvements\n    };\n  }\n\n  private async analyzeCompetitors(competitorData: any[]): Promise<SEOReport['competitorAnalysis']> {\n    const topCompetitors = competitorData.slice(0, 3);\n    \n    const keywordGaps = [\n      'ç«äº‰å¯¹æ‰‹åœ¨\"ç—›ç»ç¼“è§£æ–¹æ³•\"æ’åæ›´å¥½',\n      'ç¼ºå°‘\"ç»æœŸå¥åº·é£Ÿè°±\"ç›¸å…³å†…å®¹',\n      'ç«äº‰å¯¹æ‰‹æœ‰æ›´å¤šç”¨æˆ·æ¡ˆä¾‹å†…å®¹'\n    ];\n    \n    const opportunities = [\n      'é’ˆå¯¹ç«äº‰å¯¹æ‰‹çš„è–„å¼±å…³é”®è¯åˆ›å»ºå†…å®¹',\n      'å¼€å‘ç‹¬ç‰¹çš„ç»æœŸç®¡ç†å·¥å…·',\n      'å»ºç«‹æ›´æƒå¨çš„ä¸“å®¶å†…å®¹'\n    ];\n    \n    return {\n      topCompetitors,\n      keywordGaps,\n      opportunities\n    };\n  }\n\n  /**\n   * ç”Ÿæˆå¯ä¸‹è½½çš„SEOæŠ¥å‘Š\n   */\n  generateDownloadableReport(): string {\n    return `\n# PeriodHub SEO ä¼˜åŒ–æŠ¥å‘Š\n\n## æ‰§è¡Œæ‘˜è¦\nåŸºäºæœ€æ–°çš„SEOåˆ†æï¼ŒPeriodHubç½‘ç«™æ•´ä½“è¡¨ç°è‰¯å¥½ï¼Œä½†ä»æœ‰ä¼˜åŒ–ç©ºé—´ã€‚\n\n## å…³é”®å‘ç°\n- æŠ€æœ¯SEOåŸºç¡€æ‰å®\n- å†…å®¹è´¨é‡è¾ƒé«˜\n- æ€§èƒ½ä¼˜åŒ–éœ€è¦æŒç»­å…³æ³¨\n\n## ç«‹å³è¡ŒåŠ¨é¡¹ç›®\n1. ä¼˜åŒ–æœºä¼šå…³é”®è¯æ’å\n2. æ”¹å–„é¡µé¢åŠ è½½é€Ÿåº¦\n3. åŠ å¼ºç«äº‰å¯¹æ‰‹åˆ†æ\n\n## é•¿æœŸä¼˜åŒ–ç­–ç•¥\n- æŒç»­å†…å®¹æ›´æ–°\n- ç”¨æˆ·ä½“éªŒä¼˜åŒ–\n- æŠ€æœ¯æ¶æ„å‡çº§\n\næŠ¥å‘Šç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}\n    `.trim();\n  }\n}\n\nexport const seoReportGenerator = new SEOReportGenerator();","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/SmartSearchSystem.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RecommendationResult' is defined but never used.","line":10,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":72},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":344,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9133,9136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9133,9136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userProfile' is assigned a value but never used.","line":347,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":347,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":415,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":415,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10927,10930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10927,10930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":435,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":435,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11378,11381],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11378,11381],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":436,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":436,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11395,11398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11395,11398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":437,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":437,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'intent' is defined but never used.","line":504,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":504,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":504,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":504,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13368,13371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13368,13371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":525,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":525,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13903,13906],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13903,13906],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":544,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":544,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14498,14501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14498,14501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":547,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":547,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14597,14600],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14597,14600],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":548,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":548,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14620,14623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14620,14623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'startTime' is defined but never used.","line":635,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":635,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fromCache' is defined but never used.","line":636,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":636,"endColumn":14}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ™ºèƒ½æœç´¢ç³»ç»Ÿé›†æˆå…¥å£\n * æ•´åˆæ‰€æœ‰æ™ºèƒ½æœç´¢ç»„ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„APIæ¥å£\n */\n\nimport { SpellChecker } from './spell-correction/SpellChecker';\nimport { SynonymEngine } from './synonym-expansion/SynonymEngine';\nimport { IntentClassifier } from './intent-recognition/IntentClassifier';\nimport { SemanticMatcher } from './semantic-search/SemanticMatcher';\nimport { RecommendationEngine, RecommendationItem, RecommendationResult } from './personalization/RecommendationEngine';\nimport { LearningSystem } from './personalization/LearningSystem';\nimport { BehaviorTracker, EventType } from './personalization/BehaviorTracker';\nimport { UserProfileBuilder, UserProfile } from './personalization/UserProfileBuilder';\n\nexport interface SmartSearchOptions {\n  query: string;\n  userId?: string;\n  searchMode?: 'instant' | 'detailed' | 'semantic';\n  maxResults?: number;\n  includeRecommendations?: boolean;\n  enableSpellCorrection?: boolean;\n  enableSynonymExpansion?: boolean;\n  enableIntentRecognition?: boolean;\n  enablePersonalization?: boolean;\n  category?: string;\n  urgency?: 'low' | 'medium' | 'high' | 'critical';\n  page?: number;\n  pageSize?: number;\n}\n\nexport interface SmartSearchResult {\n  // æœç´¢ç»“æœ\n  results: SearchResultItem[];\n  totalResults: number;\n  \n  // æŸ¥è¯¢å¤„ç†\n  originalQuery: string;\n  processedQuery: string;\n  correctedQuery?: string;\n  expandedQueries: string[];\n  \n  // æ„å›¾è¯†åˆ«\n  intent: {\n    type: string;\n    confidence: number;\n    urgency: string;\n    category: string;\n  };\n  \n  // æ¨èå†…å®¹\n  recommendations: RecommendationItem[];\n  \n  // æœç´¢å…ƒæ•°æ®\n  searchTime: number;\n  searchMode: string;\n  pagination: {\n    page: number;\n    pageSize: number;\n    totalPages: number;\n    hasNext: boolean;\n    hasPrevious: boolean;\n  };\n  \n  // ç”¨æˆ·æ´å¯Ÿ\n  userInsights?: {\n    profileCompleteness: number;\n    searchHistory: string[];\n    preferredCategories: string[];\n    personalizationLevel: number;\n  };\n  \n  // ç³»ç»Ÿä¿¡æ¯\n  systemInfo: {\n    responseTime: number;\n    cacheHit: boolean;\n    modelVersion: string;\n    confidence: number;\n  };\n}\n\nexport interface SearchResultItem {\n  id: string;\n  type: 'article' | 'pdf' | 'tool' | 'page';\n  title: string;\n  description: string;\n  url: string;\n  category: string;\n  tags: string[];\n  relevanceScore: number;\n  semanticScore: number;\n  popularityScore: number;\n  personalizedScore: number;\n  finalScore: number;\n  highlightedContent?: string;\n  metadata: {\n    author?: string;\n    publishDate?: string;\n    readTime?: number;\n    difficulty?: string;\n    format?: string;\n    language?: string;\n  };\n  reasons: string[]; // æ¨èç†ç”±\n}\n\nexport interface SearchAnalytics {\n  queryId: string;\n  userId?: string;\n  query: string;\n  resultsCount: number;\n  clickedResults: string[];\n  searchTime: number;\n  userSatisfied: boolean;\n  improvements: string[];\n  timestamp: number;\n}\n\nexport class SmartSearchSystem {\n  private spellChecker!: SpellChecker;\n  private synonymEngine!: SynonymEngine;\n  private intentClassifier!: IntentClassifier;\n  private semanticMatcher!: SemanticMatcher;\n  private recommendationEngine!: RecommendationEngine;\n  private learningSystem!: LearningSystem;\n  private behaviorTracker!: BehaviorTracker;\n  private userProfileBuilder!: UserProfileBuilder;\n  \n  private searchCache: Map<string, SmartSearchResult>;\n  private cacheExpiration: number = 5 * 60 * 1000; // 5åˆ†é’Ÿ\n  private isInitialized: boolean = false;\n  private systemStartTime: number;\n\n  constructor() {\n    this.systemStartTime = Date.now();\n    this.searchCache = new Map();\n    this.initializeComponents();\n  }\n\n  /**\n   * åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶\n   */\n  private async initializeComponents(): Promise<void> {\n    try {\n      // åˆå§‹åŒ–æ ¸å¿ƒç»„ä»¶\n      this.spellChecker = new SpellChecker();\n      this.synonymEngine = new SynonymEngine();\n      this.intentClassifier = new IntentClassifier();\n      this.semanticMatcher = new SemanticMatcher();\n      \n      // åˆå§‹åŒ–ä¸ªæ€§åŒ–ç»„ä»¶\n      this.behaviorTracker = new BehaviorTracker();\n      this.userProfileBuilder = new UserProfileBuilder(this.behaviorTracker);\n      this.recommendationEngine = new RecommendationEngine();\n      this.learningSystem = new LearningSystem(this.behaviorTracker);\n      \n      // åŠ è½½é»˜è®¤å†…å®¹æ•°æ®\n      await this.loadDefaultContent();\n      \n      this.isInitialized = true;\n      console.log('âœ… Smart Search System initialized successfully');\n    } catch (error) {\n      console.error('âŒ Smart Search System initialization failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * æ™ºèƒ½æœç´¢ä¸»å…¥å£\n   */\n  async search(options: SmartSearchOptions): Promise<SmartSearchResult> {\n    const startTime = Date.now();\n    \n    // æ£€æŸ¥åˆå§‹åŒ–çŠ¶æ€\n    if (!this.isInitialized) {\n      await this.initializeComponents();\n    }\n\n    // è®¾ç½®é»˜è®¤é€‰é¡¹\n    const searchOptions: Required<SmartSearchOptions> = {\n      query: options.query,\n      userId: options.userId || '',\n      searchMode: options.searchMode || 'detailed',\n      maxResults: options.maxResults || 10,\n      includeRecommendations: options.includeRecommendations ?? true,\n      enableSpellCorrection: options.enableSpellCorrection ?? true,\n      enableSynonymExpansion: options.enableSynonymExpansion ?? true,\n      enableIntentRecognition: options.enableIntentRecognition ?? true,\n      enablePersonalization: options.enablePersonalization ?? true,\n      category: options.category || '',\n      urgency: options.urgency || 'medium',\n      page: options.page || 1,\n      pageSize: options.pageSize || 10\n    };\n\n    // ç”ŸæˆæŸ¥è¯¢ID\n    const queryId = this.generateQueryId(searchOptions);\n    \n    // æ£€æŸ¥ç¼“å­˜\n    const cached = this.getCachedResult(queryId);\n    if (cached) {\n      this.recordSearchAnalytics(queryId, searchOptions, cached, startTime, true);\n      return cached;\n    }\n\n    try {\n      // 1. è®°å½•æœç´¢è¡Œä¸º\n      if (searchOptions.userId) {\n        this.behaviorTracker.recordEvent({\n          userId: searchOptions.userId,\n          sessionId: 'session-' + Date.now(),\n          type: EventType.SEARCH,\n          data: {\n            query: searchOptions.query,\n            searchMode: searchOptions.searchMode,\n            category: searchOptions.category\n          },\n          context: {\n            page: 'search',\n            userAgent: 'SmartSearchSystem',\n            deviceType: 'desktop',\n            language: 'zh'\n          }\n        });\n      }\n\n      // 2. æŸ¥è¯¢é¢„å¤„ç†\n      const processedQuery = await this.preprocessQuery(searchOptions);\n      \n      // 3. æ„å›¾è¯†åˆ«\n      const intent = await this.identifyIntent(processedQuery);\n      \n      // 4. æ‰§è¡Œæœç´¢\n      const searchResults = await this.executeSearch(processedQuery, intent, searchOptions);\n      \n      // 5. ç”Ÿæˆæ¨è\n      const recommendations = await this.generateRecommendations(searchOptions, intent);\n      \n      // 6. è·å–ç”¨æˆ·æ´å¯Ÿ\n      const userInsights = await this.getUserInsights(searchOptions.userId);\n      \n      // 7. æ„å»ºæœ€ç»ˆç»“æœ\n      const result = this.buildSearchResult(\n        searchOptions,\n        processedQuery,\n        searchResults,\n        recommendations,\n        intent,\n        userInsights,\n        startTime\n      );\n\n      // 8. ç¼“å­˜ç»“æœ\n      this.cacheResult(queryId, result);\n\n      // 9. è®°å½•åˆ†ææ•°æ®\n      this.recordSearchAnalytics(queryId, searchOptions, result, startTime, false);\n\n      return result;\n\n    } catch (error) {\n      console.error('Search error:', error);\n      throw new Error(`æœç´¢å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`);\n    }\n  }\n\n  /**\n   * è·å–æœç´¢å»ºè®®\n   */\n  async getSearchSuggestions(query: string, limit: number = 5): Promise<string[]> {\n    if (!query || query.length < 2) return [];\n\n    const suggestions: string[] = [];\n    \n    // æ‹¼å†™çº é”™å»ºè®®\n    if (this.spellChecker) {\n      const corrected = await this.spellChecker.checkAndCorrect(query);\n      if (corrected !== query) {\n        suggestions.push(corrected);\n      }\n    }\n\n    // åŒä¹‰è¯æ‰©å±•å»ºè®®\n    if (this.synonymEngine) {\n      const expanded = await this.synonymEngine.expandQuery(query);\n      suggestions.push(...expanded.synonyms.slice(0, 3));\n    }\n\n    // å»é‡å¹¶é™åˆ¶æ•°é‡\n    return [...new Set(suggestions)].slice(0, limit);\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·åé¦ˆ\n   */\n  async recordFeedback(\n    userId: string,\n    queryId: string,\n    resultId: string,\n    feedbackType: 'positive' | 'negative' | 'neutral',\n    feedbackValue: number\n  ): Promise<void> {\n    if (!userId || !queryId || !resultId) return;\n\n    // è®°å½•åˆ°å­¦ä¹ ç³»ç»Ÿ\n    await this.learningSystem.recordFeedback({\n      userId,\n      contentId: resultId,\n      recommendationId: queryId,\n      feedbackType,\n      feedbackValue,\n      timestamp: Date.now(),\n      context: {\n        recommendation_position: 0,\n        recommendation_score: 0.5,\n        user_session: '',\n        page_context: 'search_results',\n        interaction_type: 'explicit'\n      }\n    });\n\n    // è®°å½•åˆ°è¡Œä¸ºè¿½è¸ª\n    this.behaviorTracker.recordEvent({\n      userId,\n      sessionId: 'session-' + Date.now(),\n      type: EventType.RATING,\n      data: {\n        queryId,\n        resultId,\n        feedbackType,\n        feedbackValue\n      },\n      context: {\n        page: 'feedback',\n        userAgent: 'SmartSearchSystem',\n        deviceType: 'desktop',\n        language: 'zh'\n      }\n    });\n  }\n\n  /**\n   * è·å–ç”¨æˆ·ä¸ªæ€§åŒ–æ´å¯Ÿ\n   */\n  async getPersonalizedInsights(userId: string): Promise<any> {\n    if (!userId) return null;\n\n    const userProfile = await this.userProfileBuilder.buildProfile(userId);\n    return this.learningSystem.getPersonalizedInsights(userId);\n  }\n\n  /**\n   * è·å–ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯\n   */\n  getSystemStats(): {\n    uptime: number;\n    totalSearches: number;\n    cacheHitRate: number;\n    averageResponseTime: number;\n    userProfiles: number;\n    contentItems: number;\n  } {\n    const uptime = Date.now() - this.systemStartTime;\n    \n    return {\n      uptime,\n      totalSearches: this.behaviorTracker.getTotalEvents('search'),\n      cacheHitRate: this.calculateCacheHitRate(),\n      averageResponseTime: this.calculateAverageResponseTime(),\n      userProfiles: this.userProfileBuilder.getProfileCount(),\n      contentItems: this.getContentItemCount()\n    };\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * é¢„å¤„ç†æŸ¥è¯¢\n   */\n  private async preprocessQuery(options: SmartSearchOptions): Promise<{\n    originalQuery: string;\n    processedQuery: string;\n    correctedQuery?: string;\n    expandedQueries: string[];\n  }> {\n    const { query } = options;\n    let processedQuery = query.trim().toLowerCase();\n    let correctedQuery: string | undefined;\n    let expandedQueries: string[] = [];\n\n    // æ‹¼å†™çº é”™\n    if (options.enableSpellCorrection) {\n      correctedQuery = await this.spellChecker.checkAndCorrect(query);\n      if (correctedQuery !== query) {\n        processedQuery = correctedQuery;\n      }\n    }\n\n    // åŒä¹‰è¯æ‰©å±•\n    if (options.enableSynonymExpansion) {\n      const expanded = await this.synonymEngine.expandQuery(processedQuery);\n      expandedQueries = expanded.synonyms;\n    }\n\n    return {\n      originalQuery: query,\n      processedQuery,\n      correctedQuery,\n      expandedQueries\n    };\n  }\n\n  /**\n   * è¯†åˆ«æœç´¢æ„å›¾\n   */\n  private async identifyIntent(processedQuery: any): Promise<{\n    type: string;\n    confidence: number;\n    urgency: string;\n    category: string;\n  }> {\n    const result = await this.intentClassifier.classifyQuery(processedQuery.processedQuery);\n    \n    return {\n      type: result.intent,\n      confidence: result.confidence,\n      urgency: result.urgency,\n      category: result.intent // ä½¿ç”¨intentä½œä¸ºcategory\n    };\n  }\n\n  /**\n   * æ‰§è¡Œæœç´¢\n   */\n  private async executeSearch(\n    processedQuery: any,\n    intent: any,\n    options: SmartSearchOptions\n  ): Promise<SearchResultItem[]> {\n    // æ¨¡æ‹Ÿæœç´¢ç»“æœ\n    const mockResults: SearchResultItem[] = [\n      {\n        id: 'result-1',\n        type: 'article',\n        title: '5åˆ†é’Ÿå¿«é€Ÿç¼“è§£ç—›ç»çš„è‡ªç„¶æ–¹æ³•',\n        description: 'ä»‹ç»å‡ ç§ç®€å•æœ‰æ•ˆçš„è‡ªç„¶ç–¼ç—›ç¼“è§£æ–¹æ³•',\n        url: '/articles/quick-relief-methods',\n        category: 'immediate_relief',\n        tags: ['pain_relief', 'natural_methods', 'quick_solutions'],\n        relevanceScore: 0.9,\n        semanticScore: 0.85,\n        popularityScore: 0.8,\n        personalizedScore: 0.9,\n        finalScore: 0.88,\n        highlightedContent: 'ä½¿ç”¨çƒ­æ•·ã€æ·±å‘¼å¸å’Œç©´ä½æŒ‰æ‘©å¯ä»¥åœ¨5åˆ†é’Ÿå†…æ˜¾è‘—ç¼“è§£ç–¼ç—›...',\n        metadata: {\n          author: 'Dr. Sarah Chen',\n          publishDate: '2024-01-15',\n          readTime: 5,\n          difficulty: 'beginner',\n          format: 'article',\n          language: 'zh'\n        },\n        reasons: ['æŸ¥è¯¢æ„å›¾åŒ¹é…', 'å†…å®¹ç›¸å…³æ€§é«˜', 'ç”¨æˆ·åå¥½åŒ¹é…']\n      },\n      {\n        id: 'result-2',\n        type: 'pdf',\n        title: 'ç—›ç»ç®¡ç†å®Œå…¨æŒ‡å—',\n        description: 'å…¨é¢çš„ç—›ç»é¢„é˜²ã€æ²»ç–—å’Œç®¡ç†ç­–ç•¥',\n        url: '/pdf/complete-pain-management-guide',\n        category: 'comprehensive_guide',\n        tags: ['pain_management', 'comprehensive', 'medical_advice'],\n        relevanceScore: 0.8,\n        semanticScore: 0.9,\n        popularityScore: 0.7,\n        personalizedScore: 0.75,\n        finalScore: 0.8,\n        highlightedContent: 'æœ¬æŒ‡å—æ¶µç›–äº†ä»è¯ç‰©æ²»ç–—åˆ°ç”Ÿæ´»æ–¹å¼è°ƒæ•´çš„å…¨é¢ç­–ç•¥...',\n        metadata: {\n          author: 'Women\\'s Health Institute',\n          publishDate: '2024-02-01',\n          readTime: 25,\n          difficulty: 'intermediate',\n          format: 'pdf',\n          language: 'zh'\n        },\n        reasons: ['æƒå¨æ€§å¼º', 'å†…å®¹å…¨é¢', 'ä¸“ä¸šæ¨è']\n      }\n    ];\n\n    // æ ¹æ®æ„å›¾è°ƒæ•´ç»“æœæ’åº\n    if (intent.urgency === 'high' || intent.urgency === 'critical') {\n      return mockResults.filter(r => r.category === 'immediate_relief');\n    }\n\n    return mockResults;\n  }\n\n  /**\n   * ç”Ÿæˆæ¨è\n   */\n  private async generateRecommendations(\n    options: SmartSearchOptions,\n    intent: any\n  ): Promise<RecommendationItem[]> {\n    if (!options.includeRecommendations || !options.userId) {\n      return [];\n    }\n\n    const userProfile = await this.userProfileBuilder.buildProfile(options.userId);\n    const recommendations = await this.recommendationEngine.generateRecommendations(\n      userProfile,\n      {\n        maxRecommendations: 5,\n        includeExplanations: true\n      }\n    );\n\n    return recommendations.recommendations;\n  }\n\n  /**\n   * è·å–ç”¨æˆ·æ´å¯Ÿ\n   */\n  private async getUserInsights(userId?: string): Promise<any> {\n    if (!userId) return undefined;\n\n    const userProfile = await this.userProfileBuilder.buildProfile(userId);\n    const insights = await this.learningSystem.getPersonalizedInsights(userId);\n    \n    return {\n      profileCompleteness: this.calculateProfileCompleteness(userProfile),\n      searchHistory: this.getRecentSearchHistory(userId),\n      preferredCategories: userProfile.interestTopics.map(t => t.topic),\n      personalizationLevel: insights.learningProgress\n    };\n  }\n\n  /**\n   * æ„å»ºæœç´¢ç»“æœ\n   */\n  private buildSearchResult(\n    options: SmartSearchOptions,\n    processedQuery: any,\n    searchResults: SearchResultItem[],\n    recommendations: RecommendationItem[],\n    intent: any,\n    userInsights: any,\n    startTime: number\n  ): SmartSearchResult {\n    const endTime = Date.now();\n    const responseTime = endTime - startTime;\n    \n    // åˆ†é¡µå¤„ç†\n    const totalResults = searchResults.length;\n    const totalPages = Math.ceil(totalResults / options.pageSize!);\n    const startIndex = (options.page! - 1) * options.pageSize!;\n    const endIndex = startIndex + options.pageSize!;\n    const paginatedResults = searchResults.slice(startIndex, endIndex);\n\n    return {\n      results: paginatedResults,\n      totalResults,\n      originalQuery: processedQuery.originalQuery,\n      processedQuery: processedQuery.processedQuery,\n      correctedQuery: processedQuery.correctedQuery,\n      expandedQueries: processedQuery.expandedQueries,\n      intent,\n      recommendations,\n      searchTime: responseTime,\n      searchMode: options.searchMode!,\n      pagination: {\n        page: options.page!,\n        pageSize: options.pageSize!,\n        totalPages,\n        hasNext: options.page! < totalPages,\n        hasPrevious: options.page! > 1\n      },\n      userInsights,\n      systemInfo: {\n        responseTime,\n        cacheHit: false,\n        modelVersion: '1.0.0',\n        confidence: 0.85\n      }\n    };\n  }\n\n  /**\n   * ç”ŸæˆæŸ¥è¯¢ID\n   */\n  private generateQueryId(options: SmartSearchOptions): string {\n    const key = `${options.query}_${options.userId}_${options.searchMode}_${options.category}`;\n    return btoa(key).replace(/[^a-zA-Z0-9]/g, '');\n  }\n\n  /**\n   * è·å–ç¼“å­˜ç»“æœ\n   */\n  private getCachedResult(queryId: string): SmartSearchResult | null {\n    const cached = this.searchCache.get(queryId);\n    if (cached) {\n      const age = Date.now() - cached.systemInfo.responseTime;\n      if (age < this.cacheExpiration) {\n        return { ...cached, systemInfo: { ...cached.systemInfo, cacheHit: true } };\n      } else {\n        this.searchCache.delete(queryId);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * ç¼“å­˜ç»“æœ\n   */\n  private cacheResult(queryId: string, result: SmartSearchResult): void {\n    this.searchCache.set(queryId, result);\n    \n    // é™åˆ¶ç¼“å­˜å¤§å°\n    if (this.searchCache.size > 1000) {\n      const firstKey = this.searchCache.keys().next().value;\n      if (firstKey) {\n        this.searchCache.delete(firstKey);\n      }\n    }\n  }\n\n  /**\n   * è®°å½•æœç´¢åˆ†æ\n   */\n  private recordSearchAnalytics(\n    queryId: string,\n    options: SmartSearchOptions,\n    result: SmartSearchResult,\n    startTime: number,\n    fromCache: boolean\n  ): void {\n    const analytics: SearchAnalytics = {\n      queryId,\n      userId: options.userId,\n      query: options.query,\n      resultsCount: result.totalResults,\n      clickedResults: [],\n      searchTime: result.searchTime,\n      userSatisfied: result.totalResults > 0,\n      improvements: [],\n      timestamp: Date.now()\n    };\n\n    // è¿™é‡Œå¯ä»¥å‘é€åˆ°åˆ†ææœåŠ¡æˆ–å­˜å‚¨\n    console.log('Search Analytics:', analytics);\n  }\n\n  /**\n   * åŠ è½½é»˜è®¤å†…å®¹\n   */\n  private async loadDefaultContent(): Promise<void> {\n    // æ¨¡æ‹ŸåŠ è½½å†…å®¹æ•°æ®\n    const mockContent = [\n      {\n        id: 'content-1',\n        type: 'article' as const,\n        title: '5åˆ†é’Ÿå¿«é€Ÿç¼“è§£ç—›ç»',\n        description: 'å¿«é€Ÿæœ‰æ•ˆçš„ç–¼ç—›ç¼“è§£æ–¹æ³•',\n        category: 'immediate_relief',\n        tags: ['pain_relief', 'quick_methods'],\n        difficulty: 'beginner' as const,\n        urgency: 'high' as const,\n        popularity: 0.8,\n        quality: 0.9,\n        lastUpdated: Date.now(),\n        metadata: {}\n      }\n    ];\n\n    // æ·»åŠ åˆ°æ¨èå¼•æ“\n    this.recommendationEngine.addContentBatch(mockContent);\n  }\n\n  /**\n   * è®¡ç®—ä¸ªäººèµ„æ–™å®Œæ•´åº¦\n   */\n  private calculateProfileCompleteness(profile: UserProfile): number {\n    const weights = {\n      demographics: 0.2,\n      healthProfile: 0.3,\n      behaviorProfile: 0.3,\n      preferences: 0.2\n    };\n\n    let completeness = 0;\n    if (profile.demographics) completeness += weights.demographics;\n    if (profile.healthProfile) completeness += weights.healthProfile;\n    if (profile.behaviorProfile) completeness += weights.behaviorProfile;\n    if (profile.preferences) completeness += weights.preferences;\n\n    return completeness;\n  }\n\n  /**\n   * è·å–æœ€è¿‘æœç´¢å†å²\n   */\n  private getRecentSearchHistory(userId: string): string[] {\n    const events = this.behaviorTracker.getUserEvents(userId, 'search');\n    return events.slice(-10).map(e => e.data.query || '').filter(q => q);\n  }\n\n  /**\n   * è®¡ç®—ç¼“å­˜å‘½ä¸­ç‡\n   */\n  private calculateCacheHitRate(): number {\n    // ç®€åŒ–å®ç°ï¼Œå®é™…åº”è¯¥ç»Ÿè®¡å®é™…çš„ç¼“å­˜å‘½ä¸­æ•°æ®\n    return 0.75;\n  }\n\n  /**\n   * è®¡ç®—å¹³å‡å“åº”æ—¶é—´\n   */\n  private calculateAverageResponseTime(): number {\n    // ç®€åŒ–å®ç°ï¼Œå®é™…åº”è¯¥ç»Ÿè®¡å®é™…çš„å“åº”æ—¶é—´æ•°æ®\n    return 150;\n  }\n\n  /**\n   * è·å–å†…å®¹é¡¹æ•°é‡\n   */\n  private getContentItemCount(): number {\n    // ç®€åŒ–å®ç°ï¼Œå®é™…åº”è¯¥ä»æ¨èå¼•æ“è·å–\n    return 150;\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/analytics/SearchAnalytics.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[216,219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[216,219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1336,1339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1336,1339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2324,2327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2324,2327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2332,2335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2332,2335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æœç´¢åˆ†æ\n * æ”¶é›†å’Œåˆ†ææœç´¢è¡Œä¸ºæ•°æ®\n */\n\nimport { SearchOptions, SearchResponse, SearchError, UnifiedSearchConfig } from '../types';\n\nexport class SearchAnalytics {\n  private config: UnifiedSearchConfig;\n  private searchLog: any[] = [];\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n  }\n\n  /**\n   * è®°å½•æœç´¢äº‹ä»¶\n   */\n  async recordSearch(\n    options: SearchOptions, \n    response: SearchResponse, \n    fromCache: boolean = false\n  ): Promise<void> {\n    const searchEvent = {\n      timestamp: Date.now(),\n      query: options.query,\n      mode: options.mode,\n      scope: options.scope,\n      resultsCount: response.totalResults,\n      searchTime: response.searchTime,\n      fromCache,\n      userId: options.userId\n    };\n\n    this.searchLog.push(searchEvent);\n    \n    // é™åˆ¶æ—¥å¿—å¤§å°\n    if (this.searchLog.length > 1000) {\n      this.searchLog = this.searchLog.slice(-500);\n    }\n  }\n\n  /**\n   * è®°å½•æœç´¢é”™è¯¯\n   */\n  async recordError(error: SearchError, options: SearchOptions): Promise<void> {\n    const errorEvent = {\n      timestamp: Date.now(),\n      error: error.code,\n      message: error.message,\n      query: options.query,\n      userId: options.userId\n    };\n\n    console.error('Search error recorded:', errorEvent);\n  }\n\n  /**\n   * è·å–æœç´¢åˆ†ææ•°æ®\n   */\n  async getAnalytics(dateRange?: { start: string; end: string }): Promise<any> {\n    const startTime = dateRange ? new Date(dateRange.start).getTime() : 0;\n    const endTime = dateRange ? new Date(dateRange.end).getTime() : Date.now();\n    \n    const filteredLogs = this.searchLog.filter(log => \n      log.timestamp >= startTime && log.timestamp <= endTime\n    );\n\n    return {\n      totalSearches: filteredLogs.length,\n      uniqueQueries: new Set(filteredLogs.map(log => log.query)).size,\n      averageResultsPerQuery: filteredLogs.reduce((sum, log) => sum + log.resultsCount, 0) / filteredLogs.length || 0,\n      averageResponseTime: filteredLogs.reduce((sum, log) => sum + log.searchTime, 0) / filteredLogs.length || 0,\n      cacheHitRate: filteredLogs.filter(log => log.fromCache).length / filteredLogs.length || 0,\n      topQueries: this.getTopQueries(filteredLogs),\n      startDate: dateRange?.start || new Date(0).toISOString(),\n      endDate: dateRange?.end || new Date().toISOString()\n    };\n  }\n\n  /**\n   * è·å–çƒ­é—¨æœç´¢è¯\n   */\n  private getTopQueries(logs: any[]): any[] {\n    const queryCount = new Map<string, number>();\n    \n    logs.forEach(log => {\n      const count = queryCount.get(log.query) || 0;\n      queryCount.set(log.query, count + 1);\n    });\n\n    return Array.from(queryCount.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([query, count]) => ({ query, count }));\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/cache/SearchCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/engines/FuzzySearchEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":38,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":38,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is assigned a value but never used.","line":43,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is assigned a value but never used.","line":47,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":49}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ¨¡ç³Šæœç´¢å¼•æ“\n * å®ç°åŸºäºç¼–è¾‘è·ç¦»çš„æ¨¡ç³ŠåŒ¹é…æœç´¢\n */\n\nimport { \n  IFuzzySearchEngine,\n  SearchOptions, \n  SearchResponse, \n  SearchResult, \n  UnifiedSearchConfig,\n  FuzzySearchOptions\n} from '../types';\n\nexport class FuzzySearchEngine implements IFuzzySearchEngine {\n  private config: UnifiedSearchConfig;\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n  }\n\n  async search(options: SearchOptions): Promise<SearchResponse> {\n    // åŸºç¡€å®ç°ï¼šæš‚æ—¶è¿”å›ç©ºç»“æœ\n    return {\n      results: [],\n      query: options.query,\n      totalResults: 0,\n      searchTime: 0,\n      page: options.page || 1,\n      pageSize: options.pageSize || 20,\n      hasMore: false,\n      suggestions: [],\n      relatedQueries: [],\n      recommendations: []\n    };\n  }\n\n  async fuzzySearch(query: string, options: FuzzySearchOptions): Promise<SearchResult[]> {\n    // TODO: å®ç°æ¨¡ç³Šæœç´¢é€»è¾‘\n    return [];\n  }\n\n  async suggest(query: string, limit: number = 5): Promise<string[]> {\n    return [];\n  }\n\n  async getRecommendations(userId: string, limit: number = 10): Promise<SearchResult[]> {\n    return [];\n  }\n\n  async buildIndex(): Promise<void> {\n    // TODO: æ„å»ºæ¨¡ç³Šæœç´¢ç´¢å¼•\n  }\n\n  async clearIndex(): Promise<void> {\n    // TODO: æ¸…é™¤ç´¢å¼•\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/engines/KeywordSearchEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[356,359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[356,359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3014,3017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3014,3017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4042,4045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4042,4045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":182,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4210,4213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4210,4213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'field' is defined but never used.","line":216,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":216,"endColumn":74},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":254,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6049,6052],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6049,6052],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":255,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6079,6082],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6079,6082],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":277,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6578,6581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6578,6581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":277,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6595,6598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6595,6598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å…³é”®è¯æœç´¢å¼•æ“\n * å®ç°åŸºäºå…³é”®è¯çš„ç²¾ç¡®å’Œéƒ¨åˆ†åŒ¹é…æœç´¢\n */\n\nimport { \n  IKeywordSearchEngine,\n  SearchOptions, \n  SearchResponse, \n  SearchResult, \n  UnifiedSearchConfig,\n  KeywordSearchOptions,\n  SearchResultType,\n  MatchType\n} from '../types';\n\nexport class KeywordSearchEngine implements IKeywordSearchEngine {\n  private config: UnifiedSearchConfig;\n  private searchData: any[] = []; // ä¸´æ—¶å­˜å‚¨æœç´¢æ•°æ®\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n    this.loadSearchData();\n  }\n\n  /**\n   * ä¸»æœç´¢æ–¹æ³•\n   */\n  async search(options: SearchOptions): Promise<SearchResponse> {\n    const startTime = Date.now();\n    const results = await this.keywordSearch(options.query, {\n      fields: ['title', 'description', 'keywords', 'content'],\n      exactMatch: false,\n      caseSensitive: false,\n      stemming: false,\n      synonyms: false\n    });\n\n    return {\n      results,\n      query: options.query,\n      totalResults: results.length,\n      searchTime: Date.now() - startTime,\n      page: options.page || 1,\n      pageSize: options.pageSize || 20,\n      hasMore: false,\n      suggestions: [],\n      relatedQueries: [],\n      recommendations: []\n    };\n  }\n\n  /**\n   * å…³é”®è¯æœç´¢å®ç°\n   */\n  async keywordSearch(query: string, options: KeywordSearchOptions): Promise<SearchResult[]> {\n    if (!query.trim()) return [];\n\n    const searchTerms = this.preprocessQuery(query);\n    const results: SearchResult[] = [];\n\n    // æœç´¢æ‰€æœ‰æ•°æ®æº\n    for (const item of this.searchData) {\n      const matchResult = this.matchItem(item, searchTerms, options);\n      if (matchResult) {\n        results.push(matchResult);\n      }\n    }\n\n    // æŒ‰ç›¸å…³æ€§æ’åº\n    return results.sort((a, b) => b.score - a.score);\n  }\n\n  /**\n   * æœç´¢å»ºè®®\n   */\n  async suggest(query: string, limit: number = 5): Promise<string[]> {\n    // åŸºç¡€å®ç°ï¼šä»ç°æœ‰æ•°æ®ä¸­æå–ç›¸å…³å»ºè®®\n    const suggestions: string[] = [];\n    const queryLower = query.toLowerCase();\n\n    for (const item of this.searchData) {\n      if (item.title.toLowerCase().includes(queryLower)) {\n        suggestions.push(item.title);\n      }\n    }\n\n    return Array.from(new Set(suggestions)).slice(0, limit);\n  }\n\n  /**\n   * è·å–æ¨èï¼ˆåŸºç¡€å®ç°ï¼‰\n   */\n  async getRecommendations(userId: string, limit: number = 10): Promise<SearchResult[]> {\n    // åŸºç¡€å®ç°ï¼šè¿”å›çƒ­é—¨å†…å®¹\n    return this.searchData\n      .sort((a, b) => (b.viewCount || 0) - (a.viewCount || 0))\n      .slice(0, limit)\n      .map(item => this.convertToSearchResult(item));\n  }\n\n  /**\n   * æ„å»ºç´¢å¼•ï¼ˆåŸºç¡€å®ç°ï¼‰\n   */\n  async buildIndex(): Promise<void> {\n    // é‡æ–°åŠ è½½æœç´¢æ•°æ®\n    await this.loadSearchData();\n  }\n\n  /**\n   * æ¸…é™¤ç´¢å¼•\n   */\n  async clearIndex(): Promise<void> {\n    this.searchData = [];\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * åŠ è½½æœç´¢æ•°æ®\n   */\n  private async loadSearchData(): Promise<void> {\n    try {\n      // è¿™é‡Œåº”è¯¥ä»å®é™…çš„æ•°æ®æºåŠ è½½ï¼Œç°åœ¨å…ˆç”¨æ¨¡æ‹Ÿæ•°æ®\n      this.searchData = await this.getMockSearchData();\n    } catch (error) {\n      console.error('Failed to load search data:', error);\n      this.searchData = [];\n    }\n  }\n\n  /**\n   * è·å–æ¨¡æ‹Ÿæœç´¢æ•°æ®\n   */\n  private async getMockSearchData(): Promise<any[]> {\n    // è¿™é‡Œåº”è¯¥é›†æˆçœŸå®çš„æ•°æ®æºï¼ˆæ–‡ç« ã€PDFç­‰ï¼‰\n    // ä¸´æ—¶è¿”å›ä¸€äº›æ¨¡æ‹Ÿæ•°æ®ç”¨äºæµ‹è¯•\n    return [\n      {\n        id: 'article-1',\n        type: 'article',\n        title: '5åˆ†é’Ÿå¿«é€Ÿç¼“è§£ç—›ç»æŠ€å·§',\n        description: 'æ¢ç´¢æ‚¨ç°åœ¨å°±å¯ä»¥ä½¿ç”¨çš„ç®€å•ã€å¯æ“ä½œçš„æŠ€å·§æ¥å¿«é€Ÿç¼“è§£ç»æœŸç—‰æŒ›',\n        content: 'ç—›ç»æ˜¯è®¸å¤šå¥³æ€§é¢ä¸´çš„é—®é¢˜...',\n        keywords: ['ç—›ç»', 'ç¼“è§£', 'æŠ€å·§', 'å¿«é€Ÿ'],\n        url: '/zh/articles/5-minute-period-pain-relief',\n        category: 'å³æ—¶ç¼“è§£',\n        viewCount: 1250\n      },\n      {\n        id: 'pdf-1',\n        type: 'pdf',\n        title: 'ç–¼ç—›è¿½è¸ªè¡¨',\n        description: 'ä¸“ä¸šçš„ç–¼ç—›è®°å½•å’Œåˆ†æå·¥å…·ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£ç–¼ç—›æ¨¡å¼',\n        keywords: ['ç–¼ç—›', 'è¿½è¸ª', 'è®°å½•', 'å·¥å…·'],\n        url: '/zh/downloads/preview/pain-tracking-form',\n        category: 'ç®¡ç†å·¥å…·',\n        viewCount: 800\n      }\n      // æ›´å¤šæ¨¡æ‹Ÿæ•°æ®...\n    ];\n  }\n\n  /**\n   * é¢„å¤„ç†æœç´¢æŸ¥è¯¢\n   */\n  private preprocessQuery(query: string): string[] {\n    return query\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s\\u4e00-\\u9fff]/g, '') // ä¿ç•™å­—æ¯ã€æ•°å­—ã€ç©ºæ ¼å’Œä¸­æ–‡\n      .split(/\\s+/)\n      .filter(term => term.length > 0);\n  }\n\n  /**\n   * åŒ¹é…é¡¹ç›®\n   */\n  private matchItem(item: any, searchTerms: string[], options: KeywordSearchOptions): SearchResult | null {\n    let totalScore = 0;\n    const matchedFields: string[] = [];\n    const highlights: any[] = [];\n\n    // æœç´¢å„ä¸ªå­—æ®µ\n    for (const field of options.fields) {\n      const fieldValue = item[field];\n      if (!fieldValue) continue;\n\n      const fieldText = Array.isArray(fieldValue) \n        ? fieldValue.join(' ') \n        : String(fieldValue);\n      \n      const fieldScore = this.scoreFieldMatch(fieldText, searchTerms, field);\n      \n      if (fieldScore > 0) {\n        totalScore += fieldScore * this.getFieldWeight(field);\n        matchedFields.push(field);\n        \n        // æ·»åŠ é«˜äº®ä¿¡æ¯\n        highlights.push(...this.generateHighlights(fieldText, searchTerms, field));\n      }\n    }\n\n    if (totalScore === 0) return null;\n\n    return this.convertToSearchResult(item, {\n      score: totalScore,\n      matchedFields,\n      highlights\n    });\n  }\n\n  /**\n   * è®¡ç®—å­—æ®µåŒ¹é…åˆ†æ•°\n   */\n  private scoreFieldMatch(fieldText: string, searchTerms: string[], field: string): number {\n    const text = fieldText.toLowerCase();\n    let score = 0;\n\n    for (const term of searchTerms) {\n      if (text.includes(term)) {\n        // ç²¾ç¡®åŒ¹é…å¾—æ›´é«˜åˆ†\n        if (text === term) {\n          score += 1.0;\n        } else if (text.includes(' ' + term + ' ') || text.startsWith(term + ' ') || text.endsWith(' ' + term)) {\n          score += 0.8; // è¯è¾¹ç•ŒåŒ¹é…\n        } else {\n          score += 0.6; // éƒ¨åˆ†åŒ¹é…\n        }\n      }\n    }\n\n    return score;\n  }\n\n  /**\n   * è·å–å­—æ®µæƒé‡\n   */\n  private getFieldWeight(field: string): number {\n    const weights = this.config.weights;\n    switch (field) {\n      case 'title': return weights.title;\n      case 'description': return weights.description;\n      case 'content': return weights.content;\n      case 'keywords': return weights.keywords;\n      case 'tags': return weights.tags;\n      default: return 0.5;\n    }\n  }\n\n  /**\n   * ç”Ÿæˆé«˜äº®ä¿¡æ¯\n   */\n  private generateHighlights(text: string, searchTerms: string[], field: string): any[] {\n    const highlights: any[] = [];\n    const textLower = text.toLowerCase();\n\n    for (const term of searchTerms) {\n      let index = textLower.indexOf(term);\n      while (index !== -1) {\n        highlights.push({\n          field,\n          text: text.substring(index, index + term.length),\n          start: index,\n          end: index + term.length\n        });\n        index = textLower.indexOf(term, index + 1);\n      }\n    }\n\n    return highlights;\n  }\n\n  /**\n   * è½¬æ¢ä¸ºæœç´¢ç»“æœæ ¼å¼\n   */\n  private convertToSearchResult(item: any, matchInfo?: any): SearchResult {\n    return {\n      id: item.id,\n      type: item.type as SearchResultType,\n      title: item.title,\n      description: item.description || '',\n      url: item.url,\n      score: matchInfo?.score || 0,\n      matchType: this.determineMatchType(matchInfo?.score || 0),\n      matchedFields: matchInfo?.matchedFields || [],\n      highlights: matchInfo?.highlights || [],\n      category: item.category,\n      keywords: item.keywords,\n      tags: item.tags,\n      lastModified: item.lastModified,\n      viewCount: item.viewCount\n    };\n  }\n\n  /**\n   * ç¡®å®šåŒ¹é…ç±»å‹\n   */\n  private determineMatchType(score: number): MatchType {\n    if (score >= 1.0) return 'exact';\n    if (score >= 0.8) return 'partial';\n    return 'fuzzy';\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/engines/ResultFusionEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'source' is defined but never used.","line":59,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç»“æœèåˆå¼•æ“\n * èåˆå¤šä¸ªæœç´¢å¼•æ“çš„ç»“æœå¹¶è¿›è¡Œæ’åº\n */\n\nimport { \n  SearchResult, \n  SearchOptions, \n  UnifiedSearchConfig,\n  SearchWeights\n} from '../types';\n\nexport class ResultFusionEngine {\n  private config: UnifiedSearchConfig;\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n  }\n\n  /**\n   * èåˆå¤šä¸ªæœç´¢ç»“æœ\n   */\n  async fuseResults(\n    searchResults: {\n      keyword: SearchResult[];\n      fuzzy: SearchResult[];\n      semantic: SearchResult[];\n    },\n    options: SearchOptions,\n    weights: SearchWeights\n  ): Promise<SearchResult[]> {\n    const { keyword, fuzzy, semantic } = searchResults;\n    \n    // åˆ›å»ºç»“æœæ˜ å°„ï¼ŒæŒ‰IDå»é‡å¹¶åˆå¹¶åˆ†æ•°\n    const resultMap = new Map<string, SearchResult>();\n    \n    // å¤„ç†å…³é”®è¯æœç´¢ç»“æœ\n    this.mergeResults(resultMap, keyword, weights.exact, 'keyword');\n    \n    // å¤„ç†æ¨¡ç³Šæœç´¢ç»“æœ\n    this.mergeResults(resultMap, fuzzy, weights.fuzzy, 'fuzzy');\n    \n    // å¤„ç†è¯­ä¹‰æœç´¢ç»“æœ\n    this.mergeResults(resultMap, semantic, weights.semantic, 'semantic');\n    \n    // è½¬æ¢ä¸ºæ•°ç»„å¹¶æŒ‰åˆ†æ•°æ’åº\n    const fusedResults = Array.from(resultMap.values());\n    \n    return fusedResults.sort((a, b) => b.score - a.score);\n  }\n\n  /**\n   * åˆå¹¶æœç´¢ç»“æœ\n   */\n  private mergeResults(\n    resultMap: Map<string, SearchResult>,\n    results: SearchResult[],\n    weight: number,\n    source: string\n  ): void {\n    for (const result of results) {\n      const existing = resultMap.get(result.id);\n      \n      if (existing) {\n        // å¦‚æœç»“æœå·²å­˜åœ¨ï¼Œåˆå¹¶åˆ†æ•°\n        existing.score = Math.max(existing.score, result.score * weight);\n        existing.matchedFields = Array.from(new Set([...existing.matchedFields, ...result.matchedFields]));\n        existing.highlights = [...existing.highlights, ...result.highlights];\n      } else {\n        // æ–°ç»“æœï¼Œæ·»åŠ åˆ°æ˜ å°„ä¸­\n        resultMap.set(result.id, {\n          ...result,\n          score: result.score * weight\n        });\n      }\n    }\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/engines/SemanticSearchEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":38,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":38,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is assigned a value but never used.","line":43,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is assigned a value but never used.","line":47,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":49}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­ä¹‰æœç´¢å¼•æ“\n * å®ç°åŸºäºè¯­ä¹‰ç†è§£çš„æœç´¢\n */\n\nimport { \n  ISemanticSearchEngine,\n  SearchOptions, \n  SearchResponse, \n  SearchResult, \n  UnifiedSearchConfig,\n  SemanticSearchOptions\n} from '../types';\n\nexport class SemanticSearchEngine implements ISemanticSearchEngine {\n  private config: UnifiedSearchConfig;\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n  }\n\n  async search(options: SearchOptions): Promise<SearchResponse> {\n    // åŸºç¡€å®ç°ï¼šæš‚æ—¶è¿”å›ç©ºç»“æœ\n    return {\n      results: [],\n      query: options.query,\n      totalResults: 0,\n      searchTime: 0,\n      page: options.page || 1,\n      pageSize: options.pageSize || 20,\n      hasMore: false,\n      suggestions: [],\n      relatedQueries: [],\n      recommendations: []\n    };\n  }\n\n  async semanticSearch(query: string, options: SemanticSearchOptions): Promise<SearchResult[]> {\n    // TODO: å®ç°è¯­ä¹‰æœç´¢é€»è¾‘\n    return [];\n  }\n\n  async suggest(query: string, limit: number = 5): Promise<string[]> {\n    return [];\n  }\n\n  async getRecommendations(userId: string, limit: number = 10): Promise<SearchResult[]> {\n    return [];\n  }\n\n  async buildIndex(): Promise<void> {\n    // TODO: æ„å»ºè¯­ä¹‰æœç´¢ç´¢å¼•\n  }\n\n  async clearIndex(): Promise<void> {\n    // TODO: æ¸…é™¤ç´¢å¼•\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/engines/UnifiedSearchEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SearchScope' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UserProfile' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":431,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":431,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is defined but never used.","line":431,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":431,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":439,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":439,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is defined but never used.","line":439,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":439,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":447,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":447,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is defined but never used.","line":447,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":447,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":455,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":455,"endColumn":55}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç»Ÿä¸€æœç´¢å¼•æ“æ ¸å¿ƒå®ç°\n * æ•´åˆå¤šç§æœç´¢ç®—æ³•ï¼Œæä¾›ç»Ÿä¸€çš„æœç´¢æ¥å£\n */\n\nimport { \n  ISearchEngine, \n  SearchOptions, \n  SearchResponse, \n  SearchResult, \n  UnifiedSearchConfig,\n  SearchWeights,\n  SearchScope,\n  SearchResultType,\n  SearchError,\n  UserProfile\n} from '../types';\n\nimport { KeywordSearchEngine } from './KeywordSearchEngine';\nimport { FuzzySearchEngine } from './FuzzySearchEngine';\nimport { SemanticSearchEngine } from './SemanticSearchEngine';\nimport { ResultFusionEngine } from './ResultFusionEngine';\nimport { SearchIndexManager } from '../index/SearchIndexManager';\nimport { PersonalizationEngine } from '../personalization/PersonalizationEngine';\nimport { SearchCache } from '../cache/SearchCache';\nimport { SearchAnalytics } from '../analytics/SearchAnalytics';\n\nexport class UnifiedSearchEngine implements ISearchEngine {\n  private keywordEngine!: KeywordSearchEngine;\n  private fuzzyEngine!: FuzzySearchEngine;\n  private semanticEngine!: SemanticSearchEngine;\n  private fusionEngine!: ResultFusionEngine;\n  private indexManager!: SearchIndexManager;\n  private personalizationEngine!: PersonalizationEngine;\n  private cache!: SearchCache;\n  private analytics!: SearchAnalytics;\n  private config: UnifiedSearchConfig;\n\n  constructor(config: Partial<UnifiedSearchConfig> = {}) {\n    this.config = this.mergeConfig(config);\n    this.initializeEngines();\n  }\n\n  /**\n   * ä¸»æœç´¢æ–¹æ³• - ç»Ÿä¸€æœç´¢å…¥å£\n   */\n  async search(options: SearchOptions): Promise<SearchResponse> {\n    const startTime = Date.now();\n    \n    try {\n      // 1. éªŒè¯å’Œé¢„å¤„ç†æœç´¢æŸ¥è¯¢\n      const processedOptions = await this.preprocessSearch(options);\n      \n      // 2. æ£€æŸ¥ç¼“å­˜\n      if (this.config.enableCache) {\n        const cachedResult = await this.cache.get(processedOptions);\n        if (cachedResult) {\n          await this.analytics.recordSearch(processedOptions, cachedResult, true);\n          return cachedResult;\n        }\n      }\n\n      // 3. æ‰§è¡Œå¤šå¼•æ“æœç´¢\n      const searchResults = await this.executeMultiEngineSearch(processedOptions);\n      \n      // 4. èåˆå’Œæ’åºç»“æœ\n      const fusedResults = await this.fusionEngine.fuseResults(\n        searchResults, \n        processedOptions, \n        this.config.weights\n      );\n\n      // 5. ä¸ªæ€§åŒ–å¤„ç†\n      const personalizedResults = await this.personalizeResults(fusedResults, options.userId);\n\n      // 6. æ„å»ºå“åº”\n      const response = await this.buildSearchResponse(\n        personalizedResults,\n        processedOptions,\n        startTime\n      );\n\n      // 7. ç¼“å­˜ç»“æœ\n      if (this.config.enableCache) {\n        await this.cache.set(processedOptions, response);\n      }\n\n      // 8. è®°å½•åˆ†ææ•°æ®\n      await this.analytics.recordSearch(processedOptions, response, false);\n\n      return response;\n\n    } catch (error) {\n      const searchError: SearchError = {\n        name: 'SearchError',\n        message: error instanceof Error ? error.message : 'Unknown search error',\n        code: 'SEARCH_TIMEOUT',\n        details: { options, duration: Date.now() - startTime }\n      };\n      \n      await this.analytics.recordError(searchError, options);\n      throw searchError;\n    }\n  }\n\n  /**\n   * æœç´¢å»ºè®®\n   */\n  async suggest(query: string, limit: number = 5): Promise<string[]> {\n    if (!query.trim()) return [];\n\n    try {\n      // ä»å¤šä¸ªæ¥æºè·å–å»ºè®®\n      const [historyBased, contentBased, popularBased] = await Promise.all([\n        this.getHistoryBasedSuggestions(query, limit),\n        this.getContentBasedSuggestions(query, limit),\n        this.getPopularSuggestions(query, limit)\n      ]);\n\n      // åˆå¹¶å’Œå»é‡å»ºè®®\n      const allSuggestions = [...historyBased, ...contentBased, ...popularBased];\n      const uniqueSuggestions = Array.from(new Set(allSuggestions));\n\n      // æŒ‰ç›¸å…³æ€§æ’åºå¹¶é™åˆ¶æ•°é‡\n      return this.rankSuggestions(uniqueSuggestions, query).slice(0, limit);\n    } catch (error) {\n      console.error('Suggestion generation failed:', error);\n      return [];\n    }\n  }\n\n  /**\n   * è·å–ä¸ªæ€§åŒ–æ¨è\n   */\n  async getRecommendations(userId: string, limit: number = 10): Promise<SearchResult[]> {\n    if (!userId) return [];\n\n    try {\n      return await this.personalizationEngine.generateRecommendations(userId, limit);\n    } catch (error) {\n      console.error('Recommendation generation failed:', error);\n      return [];\n    }\n  }\n\n  /**\n   * æ„å»ºæœç´¢ç´¢å¼•\n   */\n  async buildIndex(): Promise<void> {\n    try {\n      await this.indexManager.buildIndex();\n      console.log('Search index built successfully');\n    } catch (error) {\n      console.error('Failed to build search index:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * æ¸…é™¤æœç´¢ç´¢å¼•\n   */\n  async clearIndex(): Promise<void> {\n    try {\n      await this.indexManager.clearIndex();\n      await this.cache.clear();\n      console.log('Search index cleared successfully');\n    } catch (error) {\n      console.error('Failed to clear search index:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   */\n  updateConfig(newConfig: Partial<UnifiedSearchConfig>): void {\n    this.config = this.mergeConfig(newConfig);\n    this.reinitializeEngines();\n  }\n\n  /**\n   * è·å–æœç´¢åˆ†ææ•°æ®\n   */\n  async getAnalytics(dateRange?: { start: string; end: string }) {\n    return await this.analytics.getAnalytics(dateRange);\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * åˆå§‹åŒ–æœç´¢å¼•æ“\n   */\n  private initializeEngines(): void {\n    this.keywordEngine = new KeywordSearchEngine(this.config);\n    this.fuzzyEngine = new FuzzySearchEngine(this.config);\n    this.semanticEngine = new SemanticSearchEngine(this.config);\n    this.fusionEngine = new ResultFusionEngine(this.config);\n    this.indexManager = new SearchIndexManager(this.config);\n    this.personalizationEngine = new PersonalizationEngine(this.config);\n    this.cache = new SearchCache(this.config);\n    this.analytics = new SearchAnalytics(this.config);\n  }\n\n  /**\n   * é‡æ–°åˆå§‹åŒ–å¼•æ“ï¼ˆé…ç½®æ›´æ–°åï¼‰\n   */\n  private reinitializeEngines(): void {\n    this.initializeEngines();\n  }\n\n  /**\n   * åˆå¹¶é…ç½®\n   */\n  private mergeConfig(config: Partial<UnifiedSearchConfig>): UnifiedSearchConfig {\n    const defaultConfig: UnifiedSearchConfig = {\n      scope: ['all'],\n      mode: 'instant',\n      personalization: true,\n      maxResults: 20,\n      groupByType: true,\n      debounceMs: 300,\n      enableCache: true,\n      cacheTimeout: 300000, // 5åˆ†é’Ÿ\n      weights: this.getDefaultWeights()\n    };\n\n    return { ...defaultConfig, ...config };\n  }\n\n  /**\n   * è·å–é»˜è®¤æƒé‡é…ç½®\n   */\n  private getDefaultWeights(): SearchWeights {\n    return {\n      // åŒ¹é…ç±»å‹æƒé‡\n      exact: 1.0,\n      partial: 0.8,\n      fuzzy: 0.6,\n      semantic: 0.7,\n      \n      // å­—æ®µæƒé‡\n      title: 1.0,\n      description: 0.8,\n      content: 0.6,\n      keywords: 0.9,\n      tags: 0.7,\n      \n      // å…¶ä»–å› ç´ æƒé‡\n      freshness: 0.1,\n      popularity: 0.2,\n      userPreference: 0.3\n    };\n  }\n\n  /**\n   * é¢„å¤„ç†æœç´¢é€‰é¡¹\n   */\n  private async preprocessSearch(options: SearchOptions): Promise<SearchOptions> {\n    // æ¸…ç†å’Œè§„èŒƒåŒ–æŸ¥è¯¢\n    const cleanedQuery = this.cleanQuery(options.query);\n    \n    // è®¾ç½®é»˜è®¤å€¼\n    const processedOptions: SearchOptions = {\n      ...options,\n      query: cleanedQuery,\n      scope: options.scope || this.config.scope,\n      mode: options.mode || this.config.mode,\n      page: options.page || 1,\n      pageSize: options.pageSize || this.config.maxResults,\n      enableHighlight: options.enableHighlight ?? true,\n      enableRecommendations: options.enableRecommendations ?? true\n    };\n\n    return processedOptions;\n  }\n\n  /**\n   * æ¸…ç†æœç´¢æŸ¥è¯¢\n   */\n  private cleanQuery(query: string): string {\n    return query\n      .trim()\n      .replace(/\\s+/g, ' ')  // åˆå¹¶å¤šä¸ªç©ºæ ¼\n      .replace(/[^\\w\\s\\u4e00-\\u9fff]/g, '') // ä¿ç•™å­—æ¯ã€æ•°å­—ã€ç©ºæ ¼å’Œä¸­æ–‡\n      .toLowerCase();\n  }\n\n  /**\n   * æ‰§è¡Œå¤šå¼•æ“æœç´¢\n   */\n  private async executeMultiEngineSearch(options: SearchOptions): Promise<{\n    keyword: SearchResult[];\n    fuzzy: SearchResult[];\n    semantic: SearchResult[];\n  }> {\n    const searchPromises = [];\n\n    // æ ¹æ®æœç´¢æ¨¡å¼é€‰æ‹©å¼•æ“\n    switch (options.mode) {\n      case 'instant':\n        // å¿«é€Ÿæ¨¡å¼ï¼šåªä½¿ç”¨å…³é”®è¯æœç´¢\n        searchPromises.push(\n          this.keywordEngine.search(options),\n          Promise.resolve({ results: [] }), // ç©ºçš„fuzzyç»“æœ\n          Promise.resolve({ results: [] })  // ç©ºçš„semanticç»“æœ\n        );\n        break;\n        \n      case 'detailed':\n        // è¯¦ç»†æ¨¡å¼ï¼šä½¿ç”¨å…³é”®è¯ + æ¨¡ç³Šæœç´¢\n        searchPromises.push(\n          this.keywordEngine.search(options),\n          this.fuzzyEngine.search(options),\n          Promise.resolve({ results: [] })  // ç©ºçš„semanticç»“æœ\n        );\n        break;\n        \n      case 'semantic':\n        // è¯­ä¹‰æ¨¡å¼ï¼šä½¿ç”¨æ‰€æœ‰å¼•æ“\n        searchPromises.push(\n          this.keywordEngine.search(options),\n          this.fuzzyEngine.search(options),\n          this.semanticEngine.search(options)\n        );\n        break;\n        \n      default:\n        // é»˜è®¤ä½¿ç”¨å…³é”®è¯æœç´¢\n        searchPromises.push(\n          this.keywordEngine.search(options),\n          Promise.resolve({ results: [] }),\n          Promise.resolve({ results: [] })\n        );\n    }\n\n    const [keywordResponse, fuzzyResponse, semanticResponse] = await Promise.all(searchPromises);\n\n    return {\n      keyword: keywordResponse.results || [],\n      fuzzy: fuzzyResponse.results || [],\n      semantic: semanticResponse.results || []\n    };\n  }\n\n  /**\n   * ä¸ªæ€§åŒ–ç»“æœ\n   */\n  private async personalizeResults(\n    results: SearchResult[], \n    userId?: string\n  ): Promise<SearchResult[]> {\n    if (!this.config.personalization || !userId) {\n      return results;\n    }\n\n    try {\n      return await this.personalizationEngine.personalizeResults(results, userId);\n    } catch (error) {\n      console.error('Personalization failed, returning original results:', error);\n      return results;\n    }\n  }\n\n  /**\n   * æ„å»ºæœç´¢å“åº”\n   */\n  private async buildSearchResponse(\n    results: SearchResult[],\n    options: SearchOptions,\n    startTime: number\n  ): Promise<SearchResponse> {\n    const searchTime = Date.now() - startTime;\n    const totalResults = results.length;\n    const page = options.page || 1;\n    const pageSize = options.pageSize || this.config.maxResults;\n    \n    // åˆ†é¡µå¤„ç†\n    const startIndex = (page - 1) * pageSize;\n    const endIndex = startIndex + pageSize;\n    const paginatedResults = results.slice(startIndex, endIndex);\n\n    // æŒ‰ç±»å‹åˆ†ç»„ï¼ˆå¦‚æœéœ€è¦ï¼‰\n    const groupedResults = this.config.groupByType \n      ? this.groupResultsByType(paginatedResults)\n      : undefined;\n\n    // ç”Ÿæˆå»ºè®®å’Œæ¨è\n    const suggestions = await this.suggest(options.query);\n    const recommendations = options.enableRecommendations && options.userId\n      ? await this.getRecommendations(options.userId, 5)\n      : [];\n\n    return {\n      results: paginatedResults,\n      groupedResults,\n      query: options.query,\n      totalResults,\n      searchTime,\n      page,\n      pageSize,\n      hasMore: endIndex < totalResults,\n      suggestions,\n      relatedQueries: [], // TODO: å®ç°ç›¸å…³æŸ¥è¯¢\n      recommendations\n    };\n  }\n\n  /**\n   * æŒ‰ç±»å‹åˆ†ç»„ç»“æœ\n   */\n  private groupResultsByType(results: SearchResult[]): Record<SearchResultType, SearchResult[]> {\n    const groups: Record<SearchResultType, SearchResult[]> = {\n      article: [],\n      pdf: [],\n      tool: [],\n      guide: []\n    };\n\n    results.forEach(result => {\n      if (groups[result.type]) {\n        groups[result.type].push(result);\n      }\n    });\n\n    return groups;\n  }\n\n  /**\n   * è·å–åŸºäºå†å²çš„å»ºè®®\n   */\n  private async getHistoryBasedSuggestions(query: string, limit: number): Promise<string[]> {\n    // TODO: ä»æœç´¢å†å²ä¸­è·å–å»ºè®®\n    return [];\n  }\n\n  /**\n   * è·å–åŸºäºå†…å®¹çš„å»ºè®®\n   */\n  private async getContentBasedSuggestions(query: string, limit: number): Promise<string[]> {\n    // TODO: ä»å†…å®¹ç´¢å¼•ä¸­è·å–å»ºè®®\n    return [];\n  }\n\n  /**\n   * è·å–çƒ­é—¨å»ºè®®\n   */\n  private async getPopularSuggestions(query: string, limit: number): Promise<string[]> {\n    // TODO: ä»çƒ­é—¨æœç´¢ä¸­è·å–å»ºè®®\n    return [];\n  }\n\n  /**\n   * å¯¹å»ºè®®è¿›è¡Œæ’åº\n   */\n  private rankSuggestions(suggestions: string[], query: string): string[] {\n    // TODO: å®ç°å»ºè®®æ’åºé€»è¾‘\n    return suggestions;\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1201,1204],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1201,1204],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ™ºèƒ½æœç´¢ç³»ç»Ÿä¸»å…¥å£\n * æä¾›ç»Ÿä¸€çš„æœç´¢æœåŠ¡API\n */\n\nexport * from './types';\nexport * from './engines/UnifiedSearchEngine';\nexport * from './engines/KeywordSearchEngine';\nexport * from './engines/FuzzySearchEngine';\nexport * from './engines/SemanticSearchEngine';\nexport * from './engines/ResultFusionEngine';\n\n// åˆ›å»ºé»˜è®¤çš„æœç´¢å¼•æ“å®ä¾‹\nimport { UnifiedSearchEngine } from './engines/UnifiedSearchEngine';\nimport { UnifiedSearchConfig } from './types';\n\n// é»˜è®¤é…ç½®\nconst defaultConfig: Partial<UnifiedSearchConfig> = {\n  scope: ['all'],\n  mode: 'instant',\n  personalization: false, // åˆå§‹é˜¶æ®µå…³é—­ä¸ªæ€§åŒ–\n  maxResults: 20,\n  groupByType: true,\n  debounceMs: 300,\n  enableCache: true,\n  cacheTimeout: 300000 // 5åˆ†é’Ÿ\n};\n\n// å…¨å±€æœç´¢å¼•æ“å®ä¾‹\nlet globalSearchEngine: UnifiedSearchEngine | null = null;\n\n/**\n * è·å–å…¨å±€æœç´¢å¼•æ“å®ä¾‹\n */\nexport function getSearchEngine(config?: Partial<UnifiedSearchConfig>): UnifiedSearchEngine {\n  if (!globalSearchEngine) {\n    globalSearchEngine = new UnifiedSearchEngine({\n      ...defaultConfig,\n      ...config\n    });\n  }\n  return globalSearchEngine;\n}\n\n/**\n * é‡ç½®æœç´¢å¼•æ“å®ä¾‹\n */\nexport function resetSearchEngine(): void {\n  globalSearchEngine = null;\n}\n\n/**\n * ä¾¿æ·çš„æœç´¢å‡½æ•°\n */\nexport async function search(query: string, options?: any) {\n  const engine = getSearchEngine();\n  return await engine.search({\n    query,\n    ...options\n  });\n}\n\n/**\n * ä¾¿æ·çš„å»ºè®®å‡½æ•°\n */\nexport async function suggest(query: string, limit?: number) {\n  const engine = getSearchEngine();\n  return await engine.suggest(query, limit);\n}\n\n/**\n * ä¾¿æ·çš„æ¨èå‡½æ•°\n */\nexport async function getRecommendations(userId: string, limit?: number) {\n  const engine = getSearchEngine();\n  return await engine.getRecommendations(userId, limit);\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/index/SearchIndexManager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'itemId' is defined but never used.","line":34,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":34,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[569,572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[569,572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'itemId' is defined but never used.","line":41,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":31}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æœç´¢ç´¢å¼•ç®¡ç†å™¨\n * ç®¡ç†æœç´¢æ•°æ®çš„ç´¢å¼•æ„å»ºå’Œç»´æŠ¤\n */\n\nimport { UnifiedSearchConfig } from '../types';\n\nexport class SearchIndexManager {\n  private config: UnifiedSearchConfig;\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n  }\n\n  /**\n   * æ„å»ºæœç´¢ç´¢å¼•\n   */\n  async buildIndex(): Promise<void> {\n    // TODO: å®ç°ç´¢å¼•æ„å»ºé€»è¾‘\n    console.log('Building search index...');\n  }\n\n  /**\n   * æ¸…é™¤æœç´¢ç´¢å¼•\n   */\n  async clearIndex(): Promise<void> {\n    // TODO: å®ç°ç´¢å¼•æ¸…é™¤é€»è¾‘\n    console.log('Clearing search index...');\n  }\n\n  /**\n   * æ›´æ–°ç´¢å¼•\n   */\n  async updateIndex(itemId: string, data: any): Promise<void> {\n    // TODO: å®ç°ç´¢å¼•æ›´æ–°é€»è¾‘\n  }\n\n  /**\n   * åˆ é™¤ç´¢å¼•é¡¹\n   */\n  async removeFromIndex(itemId: string): Promise<void> {\n    // TODO: å®ç°ç´¢å¼•åˆ é™¤é€»è¾‘\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/intent-recognition/IntentClassifier.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'context' is defined but never used.","line":302,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":302,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6712,6715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6712,6715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":328,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":328,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7585,7588],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7585,7588],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":329,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7608,7611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7608,7611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":361,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":361,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8353,8356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8353,8356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":362,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":362,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8376,8379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8376,8379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8396,8399],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8396,8399],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æœç´¢æ„å›¾è¯†åˆ«åˆ†ç±»å™¨\n * è¯†åˆ«ç”¨æˆ·æŸ¥è¯¢çš„æ„å›¾ç±»å‹å’Œç´§æ€¥ç¨‹åº¦\n */\n\nimport { PatternMatcher } from './PatternMatcher';\nimport { RuleEngine } from './RuleEngine';\n\nexport enum SearchIntent {\n  INFORMATIONAL = 'informational',    // ä¿¡æ¯æŸ¥è¯¢ï¼šä»€ä¹ˆæ˜¯ç—›ç»\n  NAVIGATIONAL = 'navigational',      // å¯¼èˆªæŸ¥è¯¢ï¼šç—›ç»ç¼“è§£æ–¹æ³•\n  TRANSACTIONAL = 'transactional',    // äº¤æ˜“æŸ¥è¯¢ï¼šä¸‹è½½ç—›ç»æŒ‡å—\n  COMPARISON = 'comparison',           // æ¯”è¾ƒæŸ¥è¯¢ï¼šè¯ç‰©vsè‡ªç„¶ç–—æ³•\n  TROUBLESHOOTING = 'troubleshooting', // æ•…éšœæ’é™¤ï¼šå¦‚ä½•å¤„ç†ä¸¥é‡ç—›ç»\n  EMERGENCY = 'emergency',             // ç´§æ€¥æŸ¥è¯¢ï¼šæ€¥æ€§ç—›ç»å¤„ç†\n  GENERAL = 'general'                  // ä¸€èˆ¬æŸ¥è¯¢\n}\n\nexport enum UrgencyLevel {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical'\n}\n\nexport interface IntentRecognitionResult {\n  intent: SearchIntent;\n  confidence: number;\n  urgency: UrgencyLevel;\n  keywords: string[];\n  entities: Array<{\n    type: string;\n    value: string;\n    start: number;\n    end: number;\n  }>;\n  context: {\n    medicalTerms: string[];\n    symptoms: string[];\n    treatments: string[];\n    bodyParts: string[];\n  };\n}\n\nexport class IntentClassifier {\n  private patternMatcher: PatternMatcher;\n  private ruleEngine: RuleEngine;\n\n  constructor() {\n    this.patternMatcher = new PatternMatcher();\n    this.ruleEngine = new RuleEngine();\n  }\n\n  /**\n   * è¯†åˆ«æŸ¥è¯¢æ„å›¾ (åˆ«åæ–¹æ³•)\n   */\n  async classifyQuery(query: string): Promise<IntentRecognitionResult> {\n    return this.classifyIntent(query);\n  }\n\n  /**\n   * è¯†åˆ«æŸ¥è¯¢æ„å›¾\n   */\n  async classifyIntent(query: string): Promise<IntentRecognitionResult> {\n    const normalizedQuery = this.normalizeQuery(query);\n    \n    // æ¨¡å¼åŒ¹é…è¯†åˆ«\n    const patternResults = this.patternMatcher.matchPatterns(normalizedQuery);\n    \n    // è§„åˆ™å¼•æ“åˆ†æ\n    const ruleResults = this.ruleEngine.analyzeQuery(normalizedQuery);\n    \n    // å®ä½“è¯†åˆ«\n    const entities = this.extractEntities(normalizedQuery);\n    \n    // ä¸Šä¸‹æ–‡åˆ†æ\n    const context = this.analyzeContext(normalizedQuery);\n    \n    // ç´§æ€¥ç¨‹åº¦è¯„ä¼°\n    const urgency = this.assessUrgency(normalizedQuery, context);\n    \n    // ç»¼åˆå†³ç­–\n    const intent = this.determineIntent(patternResults, ruleResults, urgency);\n    \n    // è®¡ç®—ç½®ä¿¡åº¦\n    const confidence = this.calculateConfidence(patternResults, ruleResults, entities);\n    \n    return {\n      intent,\n      confidence,\n      urgency,\n      keywords: this.extractKeywords(normalizedQuery),\n      entities,\n      context\n    };\n  }\n\n  /**\n   * æ‰¹é‡æ„å›¾è¯†åˆ«\n   */\n  async classifyBatchIntents(queries: string[]): Promise<IntentRecognitionResult[]> {\n    const results: IntentRecognitionResult[] = [];\n    \n    for (const query of queries) {\n      const result = await this.classifyIntent(query);\n      results.push(result);\n    }\n    \n    return results;\n  }\n\n  /**\n   * è·å–æ„å›¾å»ºè®®\n   */\n  getIntentSuggestions(intent: SearchIntent): string[] {\n    const suggestions: Record<SearchIntent, string[]> = {\n      [SearchIntent.INFORMATIONAL]: [\n        'ä»€ä¹ˆæ˜¯ç—›ç»',\n        'ç—›ç»çš„åŸå› ',\n        'ç—›ç»çš„ç—‡çŠ¶',\n        'ç—›ç»çš„ç±»å‹'\n      ],\n      [SearchIntent.NAVIGATIONAL]: [\n        'ç—›ç»ç¼“è§£æ–¹æ³•',\n        'è‡ªç„¶ç–—æ³•',\n        'è¯ç‰©æ²»ç–—',\n        'è¿åŠ¨ç–—æ³•'\n      ],\n      [SearchIntent.TRANSACTIONAL]: [\n        'ä¸‹è½½ç—›ç»æŒ‡å—',\n        'è·å–ç¼“è§£æ¸…å•',\n        'é¢„çº¦åŒ»ç”Ÿ',\n        'è´­ä¹°è¯ç‰©'\n      ],\n      [SearchIntent.COMPARISON]: [\n        'è¯ç‰©vsè‡ªç„¶ç–—æ³•',\n        'çƒ­æ•·vså†·æ•·',\n        'ä¸åŒè¯ç‰©å¯¹æ¯”',\n        'æ²»ç–—æ–¹æ¡ˆæ¯”è¾ƒ'\n      ],\n      [SearchIntent.TROUBLESHOOTING]: [\n        'ä¸¥é‡ç—›ç»å¤„ç†',\n        'è¯ç‰©æ— æ•ˆæ€ä¹ˆåŠ',\n        'æŒç»­ç–¼ç—›å¤„ç†',\n        'å‰¯ä½œç”¨å¤„ç†'\n      ],\n      [SearchIntent.EMERGENCY]: [\n        'æ€¥æ€§ç—›ç»å¤„ç†',\n        'ç´§æ€¥æ­¢ç—›',\n        'å°±åŒ»æŒ‡å¯¼',\n        'æ€¥æ•‘æªæ–½'\n      ],\n      [SearchIntent.GENERAL]: [\n        'ç—›ç»ç›¸å…³',\n        'å¥³æ€§å¥åº·',\n        'ç”Ÿç†æœŸæŠ¤ç†',\n        'å¥åº·ç®¡ç†'\n      ]\n    };\n    \n    return suggestions[intent] || [];\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * æ ‡å‡†åŒ–æŸ¥è¯¢\n   */\n  private normalizeQuery(query: string): string {\n    return query\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s\\u4e00-\\u9fff]/g, ' ')\n      .replace(/\\s+/g, ' ');\n  }\n\n  /**\n   * æå–å®ä½“\n   */\n  private extractEntities(query: string): Array<{\n    type: string;\n    value: string;\n    start: number;\n    end: number;\n  }> {\n    const entities: Array<{\n      type: string;\n      value: string;\n      start: number;\n      end: number;\n    }> = [];\n\n    // åŒ»ç–—æœ¯è¯­å®ä½“\n    const medicalTerms = [\n      'ç—›ç»', 'ç»ç—›', 'æœˆç»ç–¼ç—›', 'å¸ƒæ´›èŠ¬', 'å¯¹ä¹™é…°æ°¨åŸºé…š',\n      'dysmenorrhea', 'ibuprofen', 'acetaminophen'\n    ];\n\n    // ç—‡çŠ¶å®ä½“\n    const symptoms = [\n      'ç–¼ç—›', 'ç—‰æŒ›', 'æ¶å¿ƒ', 'å¤´ç—›', 'è…¹ç—›', 'èƒŒç—›',\n      'pain', 'cramps', 'nausea', 'headache'\n    ];\n\n    // èº«ä½“éƒ¨ä½å®ä½“\n    const bodyParts = [\n      'è…¹éƒ¨', 'å­å®«', 'åµå·¢', 'è…°éƒ¨', 'èƒŒéƒ¨',\n      'abdomen', 'uterus', 'ovaries', 'back'\n    ];\n\n    // æå–å®ä½“\n    const allEntities = [\n      ...medicalTerms.map(term => ({ type: 'medical', value: term })),\n      ...symptoms.map(term => ({ type: 'symptom', value: term })),\n      ...bodyParts.map(term => ({ type: 'body_part', value: term }))\n    ];\n\n    for (const entity of allEntities) {\n      const regex = new RegExp(`\\\\b${this.escapeRegex(entity.value)}\\\\b`, 'gi');\n      let match;\n      \n      while ((match = regex.exec(query)) !== null) {\n        entities.push({\n          type: entity.type,\n          value: entity.value,\n          start: match.index,\n          end: match.index + match[0].length\n        });\n      }\n    }\n\n    return entities;\n  }\n\n  /**\n   * åˆ†æä¸Šä¸‹æ–‡\n   */\n  private analyzeContext(query: string): {\n    medicalTerms: string[];\n    symptoms: string[];\n    treatments: string[];\n    bodyParts: string[];\n  } {\n    const context = {\n      medicalTerms: [] as string[],\n      symptoms: [] as string[],\n      treatments: [] as string[],\n      bodyParts: [] as string[]\n    };\n\n    // åŒ»ç–—æœ¯è¯­æ£€æµ‹\n    const medicalTermsPatterns = [\n      'ç—›ç»', 'ç»ç—›', 'æœˆç»', 'ç”Ÿç†æœŸ', 'dysmenorrhea', 'period', 'menstrual'\n    ];\n    \n    // ç—‡çŠ¶æ£€æµ‹\n    const symptomsPatterns = [\n      'ç–¼ç—›', 'ç—›', 'ç—‰æŒ›', 'ä¸é€‚', 'æ¶å¿ƒ', 'pain', 'cramps', 'discomfort'\n    ];\n    \n    // æ²»ç–—æ–¹æ³•æ£€æµ‹\n    const treatmentsPatterns = [\n      'ç¼“è§£', 'æ²»ç–—', 'è¯ç‰©', 'çƒ­æ•·', 'æŒ‰æ‘©', 'relief', 'treatment', 'medication'\n    ];\n    \n    // èº«ä½“éƒ¨ä½æ£€æµ‹\n    const bodyPartsPatterns = [\n      'è…¹éƒ¨', 'è‚šå­', 'å­å®«', 'è…°éƒ¨', 'abdomen', 'belly', 'uterus', 'back'\n    ];\n\n    // æ£€æµ‹å„ç±»è¯æ±‡\n    for (const pattern of medicalTermsPatterns) {\n      if (query.includes(pattern)) {\n        context.medicalTerms.push(pattern);\n      }\n    }\n\n    for (const pattern of symptomsPatterns) {\n      if (query.includes(pattern)) {\n        context.symptoms.push(pattern);\n      }\n    }\n\n    for (const pattern of treatmentsPatterns) {\n      if (query.includes(pattern)) {\n        context.treatments.push(pattern);\n      }\n    }\n\n    for (const pattern of bodyPartsPatterns) {\n      if (query.includes(pattern)) {\n        context.bodyParts.push(pattern);\n      }\n    }\n\n    return context;\n  }\n\n  /**\n   * è¯„ä¼°ç´§æ€¥ç¨‹åº¦\n   */\n  private assessUrgency(query: string, context: any): UrgencyLevel {\n    // é«˜ç´§æ€¥ç¨‹åº¦å…³é”®è¯\n    const criticalKeywords = ['æ€¥æ•‘', 'ç´§æ€¥', 'ä¸¥é‡', 'å‰§çƒˆ', 'æ— æ³•', 'æ€¥æ€§', 'emergency', 'urgent', 'severe', 'acute'];\n    const highKeywords = ['å¾ˆç—›', 'éå¸¸', 'æŒç»­', 'ä¸åœ', 'å¾ˆä¸¥é‡', 'very', 'extremely', 'continuous'];\n    const mediumKeywords = ['ç–¼ç—›', 'ä¸é€‚', 'ç—›ç»', 'pain', 'discomfort', 'cramps'];\n\n    // æ£€æµ‹å…³é”®è¯\n    const hasCritical = criticalKeywords.some(keyword => query.includes(keyword));\n    const hasHigh = highKeywords.some(keyword => query.includes(keyword));\n    const hasMedium = mediumKeywords.some(keyword => query.includes(keyword));\n\n    if (hasCritical) {\n      return UrgencyLevel.CRITICAL;\n    } else if (hasHigh) {\n      return UrgencyLevel.HIGH;\n    } else if (hasMedium) {\n      return UrgencyLevel.MEDIUM;\n    } else {\n      return UrgencyLevel.LOW;\n    }\n  }\n\n  /**\n   * ç¡®å®šæ„å›¾\n   */\n  private determineIntent(\n    patternResults: any, \n    ruleResults: any, \n    urgency: UrgencyLevel\n  ): SearchIntent {\n    // ç´§æ€¥æŸ¥è¯¢ä¼˜å…ˆ\n    if (urgency === UrgencyLevel.CRITICAL) {\n      return SearchIntent.EMERGENCY;\n    }\n\n    // åŸºäºæ¨¡å¼åŒ¹é…ç»“æœ\n    if (patternResults.informational > 0.7) {\n      return SearchIntent.INFORMATIONAL;\n    }\n    if (patternResults.comparison > 0.7) {\n      return SearchIntent.COMPARISON;\n    }\n    if (patternResults.transactional > 0.7) {\n      return SearchIntent.TRANSACTIONAL;\n    }\n    if (patternResults.troubleshooting > 0.6) {\n      return SearchIntent.TROUBLESHOOTING;\n    }\n    if (patternResults.navigational > 0.6) {\n      return SearchIntent.NAVIGATIONAL;\n    }\n\n    return SearchIntent.GENERAL;\n  }\n\n  /**\n   * è®¡ç®—ç½®ä¿¡åº¦\n   */\n  private calculateConfidence(\n    patternResults: any, \n    ruleResults: any, \n    entities: any[]\n  ): number {\n    const patternValues = Object.values(patternResults) as number[];\n    const patternConfidence = patternValues.length > 0 ? Math.max(...patternValues) : 0;\n    const ruleConfidence = ruleResults.confidence || 0.5;\n    const entityConfidence = entities.length > 0 ? 0.8 : 0.3;\n\n    return (patternConfidence * 0.5 + ruleConfidence * 0.3 + entityConfidence * 0.2);\n  }\n\n  /**\n   * æå–å…³é”®è¯\n   */\n  private extractKeywords(query: string): string[] {\n    const stopWords = new Set([\n      'çš„', 'äº†', 'æ˜¯', 'åœ¨', 'æœ‰', 'å’Œ', 'ä¸', 'æˆ–', 'ä½†', 'è€Œ', 'å¦‚ä½•', 'ä»€ä¹ˆ', 'æ€ä¹ˆ',\n      'the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'how', 'what'\n    ]);\n\n    return query\n      .split(/\\s+/)\n      .filter(word => word.length > 1 && !stopWords.has(word));\n  }\n\n  /**\n   * è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦\n   */\n  private escapeRegex(str: string): string {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/intent-recognition/PatternMatcher.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/intent-recognition/RuleEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/personalization/BehaviorTracker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[465,468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[465,468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[873,876],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[873,876],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç”¨æˆ·è¡Œä¸ºè·Ÿè¸ªç³»ç»Ÿ\n * è¿½è¸ªå’Œåˆ†æç”¨æˆ·çš„æœç´¢ã€æµè§ˆã€ä¸‹è½½ç­‰è¡Œä¸º\n */\n\nexport enum EventType {\n  SEARCH = 'search',\n  CLICK = 'click',\n  DOWNLOAD = 'download',\n  VIEW = 'view',\n  SHARE = 'share',\n  BOOKMARK = 'bookmark',\n  RATING = 'rating',\n  TIME_SPENT = 'time_spent',\n  SCROLL_DEPTH = 'scroll_depth',\n  QUERY_REFINEMENT = 'query_refinement'\n}\n\nexport interface UserEvent {\n  id: string;\n  userId: string;\n  sessionId: string;\n  type: EventType;\n  timestamp: number;\n  data: Record<string, any>;\n  context: EventContext;\n}\n\nexport interface EventContext {\n  page: string;\n  userAgent: string;\n  referrer?: string;\n  deviceType: 'mobile' | 'tablet' | 'desktop';\n  language: string;\n  searchQuery?: string;\n  searchResults?: string[];\n  previousEvents?: string[];\n}\n\nexport interface SearchEvent extends UserEvent {\n  type: EventType.SEARCH;\n  data: {\n    query: string;\n    filters?: Record<string, any>;\n    resultsCount: number;\n    responseTime: number;\n    intent?: string;\n    correctedQuery?: string;\n  };\n}\n\nexport interface ClickEvent extends UserEvent {\n  type: EventType.CLICK;\n  data: {\n    elementType: 'article' | 'pdf' | 'tool' | 'link';\n    elementId: string;\n    position: number; // åœ¨æœç´¢ç»“æœä¸­çš„ä½ç½®\n    query?: string;\n    title?: string;\n  };\n}\n\nexport interface ViewEvent extends UserEvent {\n  type: EventType.VIEW;\n  data: {\n    contentId: string;\n    contentType: 'article' | 'pdf' | 'tool';\n    duration: number; // æµè§ˆæ—¶é•¿ï¼ˆç§’ï¼‰\n    scrollDepth: number; // æ»šåŠ¨æ·±åº¦ç™¾åˆ†æ¯”\n    interactions: number; // äº¤äº’æ¬¡æ•°\n  };\n}\n\nexport class BehaviorTracker {\n  private events: Map<string, UserEvent[]>; // userId -> events\n  private sessions: Map<string, string[]>; // sessionId -> eventIds\n  private config: {\n    maxEventsPerUser: number;\n    sessionTimeout: number; // ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n    enableLocalStorage: boolean;\n  };\n\n  constructor(config: Partial<typeof BehaviorTracker.prototype.config> = {}) {\n    this.events = new Map();\n    this.sessions = new Map();\n    this.config = {\n      maxEventsPerUser: 1000,\n      sessionTimeout: 30 * 60 * 1000, // 30åˆ†é’Ÿ\n      enableLocalStorage: true,\n      ...config\n    };\n    \n    this.loadFromStorage();\n  }\n\n  /**\n   * è®°å½•äº‹ä»¶ (åˆ«åæ–¹æ³•)\n   */\n  recordEvent(event: Omit<UserEvent, 'id' | 'timestamp'>): string {\n    return this.trackEvent(event);\n  }\n\n  /**\n   * è®°å½•äº‹ä»¶\n   */\n  trackEvent(event: Omit<UserEvent, 'id' | 'timestamp'>): string {\n    const eventId = this.generateEventId();\n    const fullEvent: UserEvent = {\n      ...event,\n      id: eventId,\n      timestamp: Date.now()\n    };\n\n    // å­˜å‚¨äº‹ä»¶\n    const userEvents = this.events.get(event.userId) || [];\n    userEvents.push(fullEvent);\n    \n    // é™åˆ¶äº‹ä»¶æ•°é‡\n    if (userEvents.length > this.config.maxEventsPerUser) {\n      userEvents.shift(); // ç§»é™¤æœ€æ—§çš„äº‹ä»¶\n    }\n    \n    this.events.set(event.userId, userEvents);\n\n    // æ›´æ–°ä¼šè¯\n    const sessionEvents = this.sessions.get(event.sessionId) || [];\n    sessionEvents.push(eventId);\n    this.sessions.set(event.sessionId, sessionEvents);\n\n    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨\n    this.saveToStorage();\n\n    return eventId;\n  }\n\n  /**\n   * è¿½è¸ªæœç´¢äº‹ä»¶\n   */\n  trackSearch(\n    userId: string,\n    sessionId: string,\n    query: string,\n    resultsCount: number,\n    responseTime: number,\n    context: EventContext,\n    additionalData: Partial<SearchEvent['data']> = {}\n  ): string {\n    return this.trackEvent({\n      userId,\n      sessionId,\n      type: EventType.SEARCH,\n      data: {\n        query,\n        resultsCount,\n        responseTime,\n        ...additionalData\n      },\n      context: {\n        ...context,\n        searchQuery: query\n      }\n    });\n  }\n\n  /**\n   * è¿½è¸ªç‚¹å‡»äº‹ä»¶\n   */\n  trackClick(\n    userId: string,\n    sessionId: string,\n    elementType: ClickEvent['data']['elementType'],\n    elementId: string,\n    position: number,\n    context: EventContext,\n    additionalData: Partial<ClickEvent['data']> = {}\n  ): string {\n    return this.trackEvent({\n      userId,\n      sessionId,\n      type: EventType.CLICK,\n      data: {\n        elementType,\n        elementId,\n        position,\n        ...additionalData\n      },\n      context\n    });\n  }\n\n  /**\n   * è¿½è¸ªå†…å®¹æµè§ˆäº‹ä»¶\n   */\n  trackView(\n    userId: string,\n    sessionId: string,\n    contentId: string,\n    contentType: ViewEvent['data']['contentType'],\n    duration: number,\n    scrollDepth: number,\n    context: EventContext,\n    additionalData: Partial<ViewEvent['data']> = {}\n  ): string {\n    return this.trackEvent({\n      userId,\n      sessionId,\n      type: EventType.VIEW,\n      data: {\n        contentId,\n        contentType,\n        duration,\n        scrollDepth,\n        interactions: 0,\n        ...additionalData\n      },\n      context\n    });\n  }\n\n  /**\n   * è·å–ç”¨æˆ·äº‹ä»¶\n   */\n  getUserEvents(userId: string, eventType?: string, limit?: number): UserEvent[] {\n    const events = this.events.get(userId) || [];\n    let filteredEvents = events;\n    \n    if (eventType) {\n      filteredEvents = events.filter(event => event.type === eventType);\n    }\n    \n    return limit ? filteredEvents.slice(-limit) : filteredEvents;\n  }\n\n  /**\n   * è·å–æ€»äº‹ä»¶æ•°\n   */\n  getTotalEvents(eventType?: string): number {\n    let totalCount = 0;\n    \n    for (const userEvents of this.events.values()) {\n      if (eventType) {\n        totalCount += userEvents.filter(event => event.type === eventType).length;\n      } else {\n        totalCount += userEvents.length;\n      }\n    }\n    \n    return totalCount;\n  }\n\n  /**\n   * è·å–ä¼šè¯äº‹ä»¶\n   */\n  getSessionEvents(sessionId: string): UserEvent[] {\n    const eventIds = this.sessions.get(sessionId) || [];\n    const allEvents: UserEvent[] = [];\n    \n    for (const userEvents of this.events.values()) {\n      for (const event of userEvents) {\n        if (eventIds.includes(event.id)) {\n          allEvents.push(event);\n        }\n      }\n    }\n    \n    return allEvents.sort((a, b) => a.timestamp - b.timestamp);\n  }\n\n  /**\n   * è·å–æœ€è¿‘çš„æœç´¢æŸ¥è¯¢\n   */\n  getRecentSearches(userId: string, limit: number = 10): string[] {\n    const events = this.getUserEvents(userId);\n    const searchEvents = events\n      .filter(event => event.type === EventType.SEARCH)\n      .slice(-limit) as SearchEvent[];\n    \n    return searchEvents.map(event => event.data.query);\n  }\n\n  /**\n   * è·å–ç”¨æˆ·åå¥½å†…å®¹ç±»å‹\n   */\n  getPreferredContentTypes(userId: string): Record<string, number> {\n    const events = this.getUserEvents(userId);\n    const contentTypeStats: Record<string, number> = {};\n    \n    for (const event of events) {\n      if (event.type === EventType.CLICK) {\n        const clickEvent = event as ClickEvent;\n        const contentType = clickEvent.data.elementType;\n        contentTypeStats[contentType] = (contentTypeStats[contentType] || 0) + 1;\n      }\n    }\n    \n    return contentTypeStats;\n  }\n\n  /**\n   * åˆ†æç”¨æˆ·æœç´¢æ¨¡å¼\n   */\n  analyzeSearchPatterns(userId: string): {\n    avgQueriesPerSession: number;\n    avgQueryLength: number;\n    commonTerms: Array<{ term: string; frequency: number }>;\n    searchTimes: Array<{ hour: number; count: number }>;\n  } {\n    const events = this.getUserEvents(userId);\n    const searchEvents = events.filter(event => event.type === EventType.SEARCH) as SearchEvent[];\n    \n    if (searchEvents.length === 0) {\n      return {\n        avgQueriesPerSession: 0,\n        avgQueryLength: 0,\n        commonTerms: [],\n        searchTimes: []\n      };\n    }\n\n    // è®¡ç®—å¹³å‡æ¯ä¼šè¯æŸ¥è¯¢æ•°\n    const sessionsMap = new Map<string, number>();\n    for (const event of searchEvents) {\n      const count = sessionsMap.get(event.sessionId) || 0;\n      sessionsMap.set(event.sessionId, count + 1);\n    }\n    const avgQueriesPerSession = Array.from(sessionsMap.values()).reduce((a, b) => a + b, 0) / sessionsMap.size;\n\n    // è®¡ç®—å¹³å‡æŸ¥è¯¢é•¿åº¦\n    const totalQueryLength = searchEvents.reduce((sum, event) => sum + event.data.query.length, 0);\n    const avgQueryLength = totalQueryLength / searchEvents.length;\n\n    // åˆ†æå¸¸ç”¨è¯æ±‡\n    const termFreq = new Map<string, number>();\n    for (const event of searchEvents) {\n      const terms = event.data.query.toLowerCase().split(/\\s+/);\n      for (const term of terms) {\n        if (term.length > 1) {\n          termFreq.set(term, (termFreq.get(term) || 0) + 1);\n        }\n      }\n    }\n    const commonTerms = Array.from(termFreq.entries())\n      .map(([term, frequency]) => ({ term, frequency }))\n      .sort((a, b) => b.frequency - a.frequency)\n      .slice(0, 10);\n\n    // åˆ†ææœç´¢æ—¶é—´æ¨¡å¼\n    const hourFreq = new Map<number, number>();\n    for (const event of searchEvents) {\n      const hour = new Date(event.timestamp).getHours();\n      hourFreq.set(hour, (hourFreq.get(hour) || 0) + 1);\n    }\n    const searchTimes = Array.from(hourFreq.entries())\n      .map(([hour, count]) => ({ hour, count }))\n      .sort((a, b) => a.hour - b.hour);\n\n    return {\n      avgQueriesPerSession,\n      avgQueryLength,\n      commonTerms,\n      searchTimes\n    };\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸä¼šè¯\n   */\n  cleanupExpiredSessions(): void {\n    const now = Date.now();\n    const expiredSessions: string[] = [];\n\n    for (const [sessionId, eventIds] of this.sessions) {\n      // æ‰¾åˆ°ä¼šè¯ä¸­æœ€æ–°çš„äº‹ä»¶\n      let latestTimestamp = 0;\n      for (const userEvents of this.events.values()) {\n        for (const event of userEvents) {\n          if (eventIds.includes(event.id) && event.timestamp > latestTimestamp) {\n            latestTimestamp = event.timestamp;\n          }\n        }\n      }\n\n      // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n      if (now - latestTimestamp > this.config.sessionTimeout) {\n        expiredSessions.push(sessionId);\n      }\n    }\n\n    // åˆ é™¤è¿‡æœŸä¼šè¯\n    for (const sessionId of expiredSessions) {\n      this.sessions.delete(sessionId);\n    }\n  }\n\n  /**\n   * è·å–ç»Ÿè®¡ä¿¡æ¯\n   */\n  getStatistics(): {\n    totalUsers: number;\n    totalEvents: number;\n    activeSessions: number;\n    eventsByType: Record<string, number>;\n    averageEventsPerUser: number;\n  } {\n    let totalEvents = 0;\n    const eventsByType: Record<string, number> = {};\n\n    for (const userEvents of this.events.values()) {\n      totalEvents += userEvents.length;\n      for (const event of userEvents) {\n        eventsByType[event.type] = (eventsByType[event.type] || 0) + 1;\n      }\n    }\n\n    return {\n      totalUsers: this.events.size,\n      totalEvents,\n      activeSessions: this.sessions.size,\n      eventsByType,\n      averageEventsPerUser: this.events.size > 0 ? totalEvents / this.events.size : 0\n    };\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * ç”Ÿæˆäº‹ä»¶ID\n   */\n  private generateEventId(): string {\n    return `event_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®\n   */\n  private loadFromStorage(): void {\n    if (!this.config.enableLocalStorage || typeof localStorage === 'undefined') {\n      return;\n    }\n\n    try {\n      const eventsData = localStorage.getItem('behaviorTracker_events');\n      const sessionsData = localStorage.getItem('behaviorTracker_sessions');\n\n      if (eventsData) {\n        const parsed = JSON.parse(eventsData);\n        this.events = new Map(parsed);\n      }\n\n      if (sessionsData) {\n        const parsed = JSON.parse(sessionsData);\n        this.sessions = new Map(parsed);\n      }\n    } catch (error) {\n      console.warn('Failed to load behavior tracking data from storage:', error);\n    }\n  }\n\n  /**\n   * ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨\n   */\n  private saveToStorage(): void {\n    if (!this.config.enableLocalStorage || typeof localStorage === 'undefined') {\n      return;\n    }\n\n    try {\n      localStorage.setItem('behaviorTracker_events', JSON.stringify(Array.from(this.events.entries())));\n      localStorage.setItem('behaviorTracker_sessions', JSON.stringify(Array.from(this.sessions.entries())));\n    } catch (error) {\n      console.warn('Failed to save behavior tracking data to storage:', error);\n    }\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/personalization/LearningSystem.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UserProfile' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RecommendationResult' is defined but never used.","line":7,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'EventType' is defined but never used.","line":8,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":36}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å®æ—¶å­¦ä¹ ç³»ç»Ÿ\n * åŸºäºç”¨æˆ·åé¦ˆå’Œè¡Œä¸ºæ•°æ®åŠ¨æ€ä¼˜åŒ–æ¨èç®—æ³•\n */\n\nimport { UserProfile } from './UserProfileBuilder';\nimport { RecommendationItem, RecommendationResult } from './RecommendationEngine';\nimport { BehaviorTracker, EventType } from './BehaviorTracker';\n\nexport interface FeedbackEvent {\n  userId: string;\n  contentId: string;\n  recommendationId: string;\n  feedbackType: 'positive' | 'negative' | 'neutral';\n  feedbackValue: number; // -1 to 1\n  timestamp: number;\n  context: FeedbackContext;\n}\n\nexport interface FeedbackContext {\n  recommendation_position: number;\n  recommendation_score: number;\n  user_session: string;\n  page_context: string;\n  interaction_type: 'explicit' | 'implicit';\n}\n\nexport interface LearningMetrics {\n  precision: number; // ç²¾ç¡®åº¦\n  recall: number; // å¬å›ç‡\n  clickThroughRate: number; // ç‚¹å‡»ç‡\n  conversionRate: number; // è½¬åŒ–ç‡\n  userSatisfaction: number; // ç”¨æˆ·æ»¡æ„åº¦\n  diversityScore: number; // å¤šæ ·æ€§å¾—åˆ†\n  noveltyScore: number; // æ–°é¢–æ€§å¾—åˆ†\n}\n\nexport interface ModelPerformance {\n  modelId: string;\n  metrics: LearningMetrics;\n  sampleSize: number;\n  lastUpdated: number;\n  confidence: number;\n}\n\nexport interface ABTestResult {\n  testId: string;\n  variantA: ModelPerformance;\n  variantB: ModelPerformance;\n  winnerModel: string;\n  statisticalSignificance: number;\n  testDuration: number;\n}\n\nexport class LearningSystem {\n  private feedbackHistory: Map<string, FeedbackEvent[]>; // userId -> feedback events\n  private modelWeights: Map<string, number>; // feature -> weight\n  private learningRate: number;\n  private abTests: Map<string, ABTestResult>;\n  private behaviorTracker: BehaviorTracker;\n  private performanceHistory: ModelPerformance[];\n\n  constructor(behaviorTracker: BehaviorTracker, learningRate: number = 0.01) {\n    this.feedbackHistory = new Map();\n    this.modelWeights = new Map();\n    this.learningRate = learningRate;\n    this.abTests = new Map();\n    this.behaviorTracker = behaviorTracker;\n    this.performanceHistory = [];\n    this.initializeWeights();\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·åé¦ˆ\n   */\n  recordFeedback(feedback: FeedbackEvent): void {\n    const userFeedback = this.feedbackHistory.get(feedback.userId) || [];\n    userFeedback.push(feedback);\n    \n    // é™åˆ¶åé¦ˆå†å²é•¿åº¦\n    if (userFeedback.length > 1000) {\n      userFeedback.shift();\n    }\n    \n    this.feedbackHistory.set(feedback.userId, userFeedback);\n    \n    // è§¦å‘å®æ—¶å­¦ä¹ \n    this.updateModelWeights(feedback);\n  }\n\n  /**\n   * è®°å½•éšå¼åé¦ˆ\n   */\n  recordImplicitFeedback(\n    userId: string,\n    contentId: string,\n    recommendationId: string,\n    interactionType: 'click' | 'view' | 'download' | 'skip',\n    duration?: number,\n    position?: number\n  ): void {\n    let feedbackValue = 0;\n    let feedbackType: 'positive' | 'negative' | 'neutral' = 'neutral';\n\n    // æ ¹æ®äº¤äº’ç±»å‹æ¨æ–­åé¦ˆ\n    switch (interactionType) {\n      case 'click':\n        feedbackValue = 0.6;\n        feedbackType = 'positive';\n        break;\n      case 'view':\n        if (duration && duration > 60) { // æµè§ˆè¶…è¿‡1åˆ†é’Ÿ\n          feedbackValue = 0.8;\n          feedbackType = 'positive';\n        } else {\n          feedbackValue = 0.2;\n          feedbackType = 'neutral';\n        }\n        break;\n      case 'download':\n        feedbackValue = 1.0;\n        feedbackType = 'positive';\n        break;\n      case 'skip':\n        feedbackValue = -0.3;\n        feedbackType = 'negative';\n        break;\n    }\n\n    // ä½ç½®åå·®è°ƒæ•´\n    if (position && position > 5) {\n      feedbackValue *= 1.2; // åé¢ä½ç½®çš„ç‚¹å‡»æ›´æœ‰ä»·å€¼\n    }\n\n    const feedback: FeedbackEvent = {\n      userId,\n      contentId,\n      recommendationId,\n      feedbackType,\n      feedbackValue,\n      timestamp: Date.now(),\n      context: {\n        recommendation_position: position || 0,\n        recommendation_score: 0.5, // é»˜è®¤å€¼\n        user_session: '',\n        page_context: 'recommendation',\n        interaction_type: 'implicit'\n      }\n    };\n\n    this.recordFeedback(feedback);\n  }\n\n  /**\n   * åœ¨çº¿å­¦ä¹ æ›´æ–°æ¨¡å‹\n   */\n  updateModelWeights(feedback: FeedbackEvent): void {\n    // æå–ç‰¹å¾\n    const features = this.extractFeatures(feedback);\n    \n    // è®¡ç®—é¢„æµ‹è¯¯å·®\n    const predicted = this.predictScore(features);\n    const actual = feedback.feedbackValue;\n    const error = actual - predicted;\n\n    // æ¢¯åº¦ä¸‹é™æ›´æ–°æƒé‡\n    for (const [feature, value] of features) {\n      const currentWeight = this.modelWeights.get(feature) || 0;\n      const newWeight = currentWeight + this.learningRate * error * value;\n      this.modelWeights.set(feature, newWeight);\n    }\n\n    // åº”ç”¨æ­£åˆ™åŒ–\n    this.applyRegularization();\n  }\n\n  /**\n   * è¯„ä¼°æ¨èæ€§èƒ½\n   */\n  evaluateRecommendations(\n    userId: string,\n    recommendations: RecommendationItem[],\n    actualInteractions: Map<string, number> // contentId -> interaction score\n  ): LearningMetrics {\n    const feedback = this.feedbackHistory.get(userId) || [];\n    \n    // è®¡ç®—ç²¾ç¡®åº¦å’Œå¬å›ç‡\n    const relevantItems = new Set(\n      Array.from(actualInteractions.entries())\n        .filter(([, score]) => score > 0.5)\n        .map(([contentId]) => contentId)\n    );\n    \n    const recommendedItems = new Set(recommendations.map(r => r.contentId));\n    const relevantRecommended = new Set(\n      [...recommendedItems].filter(id => relevantItems.has(id))\n    );\n\n    const precision = recommendedItems.size > 0 \n      ? relevantRecommended.size / recommendedItems.size \n      : 0;\n    \n    const recall = relevantItems.size > 0 \n      ? relevantRecommended.size / relevantItems.size \n      : 0;\n\n    // è®¡ç®—ç‚¹å‡»ç‡\n    const clickEvents = feedback.filter(f => \n      f.feedbackType === 'positive' && \n      recommendedItems.has(f.contentId)\n    );\n    const clickThroughRate = recommendations.length > 0 \n      ? clickEvents.length / recommendations.length \n      : 0;\n\n    // è®¡ç®—è½¬åŒ–ç‡ï¼ˆä¸‹è½½/åˆ†äº«ç­‰é«˜ä»·å€¼è¡Œä¸ºï¼‰\n    const conversionEvents = feedback.filter(f => \n      f.feedbackValue > 0.8 && \n      recommendedItems.has(f.contentId)\n    );\n    const conversionRate = recommendations.length > 0 \n      ? conversionEvents.length / recommendations.length \n      : 0;\n\n    // è®¡ç®—ç”¨æˆ·æ»¡æ„åº¦\n    const satisfactionScores = feedback\n      .filter(f => recommendedItems.has(f.contentId))\n      .map(f => f.feedbackValue);\n    const userSatisfaction = satisfactionScores.length > 0\n      ? satisfactionScores.reduce((sum, score) => sum + score, 0) / satisfactionScores.length\n      : 0;\n\n    // è®¡ç®—å¤šæ ·æ€§\n    const categories = new Set(recommendations.map(r => r.category));\n    const diversityScore = categories.size / Math.max(recommendations.length, 1);\n\n    // è®¡ç®—æ–°é¢–æ€§ï¼ˆæ¨èäº†å¤šå°‘ç”¨æˆ·ä¹‹å‰æœªæ¥è§¦çš„å†…å®¹ï¼‰\n    const userInteractedContent = new Set(feedback.map(f => f.contentId));\n    const novelItems = recommendations.filter(r => !userInteractedContent.has(r.contentId));\n    const noveltyScore = recommendations.length > 0 \n      ? novelItems.length / recommendations.length \n      : 0;\n\n    return {\n      precision,\n      recall,\n      clickThroughRate,\n      conversionRate,\n      userSatisfaction,\n      diversityScore,\n      noveltyScore\n    };\n  }\n\n  /**\n   * è¿è¡ŒA/Bæµ‹è¯•\n   */\n  runABTest(\n    testId: string,\n    userIds: string[],\n    modelA: string,\n    modelB: string,\n    testDuration: number = 7 * 24 * 60 * 60 * 1000 // 7å¤©\n  ): void {\n    const testStartTime = Date.now();\n    \n    // éšæœºåˆ†é…ç”¨æˆ·åˆ°ä¸åŒç»„\n    const groupA = userIds.filter((_, index) => index % 2 === 0);\n    const groupB = userIds.filter((_, index) => index % 2 === 1);\n\n    // è®°å½•æµ‹è¯•é…ç½®\n    const testResult: ABTestResult = {\n      testId,\n      variantA: {\n        modelId: modelA,\n        metrics: this.createEmptyMetrics(),\n        sampleSize: groupA.length,\n        lastUpdated: testStartTime,\n        confidence: 0\n      },\n      variantB: {\n        modelId: modelB,\n        metrics: this.createEmptyMetrics(),\n        sampleSize: groupB.length,\n        lastUpdated: testStartTime,\n        confidence: 0\n      },\n      winnerModel: '',\n      statisticalSignificance: 0,\n      testDuration\n    };\n\n    this.abTests.set(testId, testResult);\n\n    // å®šæœŸè¯„ä¼°æµ‹è¯•ç»“æœ\n    const evaluationInterval = setInterval(() => {\n      this.evaluateABTest(testId);\n      \n      // æ£€æŸ¥æ˜¯å¦æµ‹è¯•å®Œæˆ\n      if (Date.now() - testStartTime >= testDuration) {\n        clearInterval(evaluationInterval);\n        this.concludeABTest(testId);\n      }\n    }, 24 * 60 * 60 * 1000); // æ¯24å°æ—¶è¯„ä¼°ä¸€æ¬¡\n  }\n\n  /**\n   * è·å–ä¸ªæ€§åŒ–å­¦ä¹ æ´å¯Ÿ\n   */\n  getPersonalizedInsights(userId: string): {\n    learningProgress: number;\n    preferenceStability: number;\n    engagementTrend: 'increasing' | 'decreasing' | 'stable';\n    recommendationAccuracy: number;\n    feedbackSummary: {\n      totalFeedback: number;\n      positiveRate: number;\n      preferredCategories: string[];\n      improvementAreas: string[];\n    };\n  } {\n    const feedback = this.feedbackHistory.get(userId) || [];\n    \n    // å­¦ä¹ è¿›åº¦ï¼ˆåŸºäºåé¦ˆæ•°é‡å’Œè´¨é‡ï¼‰\n    const learningProgress = Math.min(feedback.length / 50, 1.0);\n    \n    // åå¥½ç¨³å®šæ€§ï¼ˆè¿‘æœŸåå¥½ä¸å†å²åå¥½çš„ä¸€è‡´æ€§ï¼‰\n    const preferenceStability = this.calculatePreferenceStability(feedback);\n    \n    // å‚ä¸åº¦è¶‹åŠ¿\n    const engagementTrend = this.analyzeEngagementTrend(feedback);\n    \n    // æ¨èå‡†ç¡®ç‡\n    const recentFeedback = feedback.slice(-20);\n    const positiveCount = recentFeedback.filter(f => f.feedbackValue > 0).length;\n    const recommendationAccuracy = recentFeedback.length > 0 \n      ? positiveCount / recentFeedback.length \n      : 0;\n\n    // åé¦ˆæ‘˜è¦\n    const totalFeedback = feedback.length;\n    const positiveRate = feedback.filter(f => f.feedbackValue > 0).length / Math.max(totalFeedback, 1);\n    \n    // åˆ†æåå¥½åˆ†ç±»\n    const categoryFeedback = new Map<string, number[]>();\n    for (const f of feedback) {\n      // è¿™é‡Œéœ€è¦æ ¹æ®contentIdæŸ¥æ‰¾åˆ†ç±»ï¼Œç®€åŒ–å¤„ç†\n      const category = 'general'; // å®é™…åº”è¯¥æŸ¥æ‰¾å†…å®¹åˆ†ç±»\n      const scores = categoryFeedback.get(category) || [];\n      scores.push(f.feedbackValue);\n      categoryFeedback.set(category, scores);\n    }\n\n    const preferredCategories = Array.from(categoryFeedback.entries())\n      .map(([category, scores]) => ({\n        category,\n        avgScore: scores.reduce((sum, score) => sum + score, 0) / scores.length\n      }))\n      .filter(item => item.avgScore > 0.3)\n      .sort((a, b) => b.avgScore - a.avgScore)\n      .slice(0, 3)\n      .map(item => item.category);\n\n    // æ”¹è¿›å»ºè®®\n    const improvementAreas: string[] = [];\n    if (positiveRate < 0.6) {\n      improvementAreas.push('æå‡æ¨èç›¸å…³æ€§');\n    }\n    if (preferenceStability < 0.5) {\n      improvementAreas.push('ç¨³å®šåå¥½è¯†åˆ«');\n    }\n    if (engagementTrend === 'decreasing') {\n      improvementAreas.push('å¢åŠ å†…å®¹å¤šæ ·æ€§');\n    }\n\n    return {\n      learningProgress,\n      preferenceStability,\n      engagementTrend,\n      recommendationAccuracy,\n      feedbackSummary: {\n        totalFeedback,\n        positiveRate,\n        preferredCategories,\n        improvementAreas\n      }\n    };\n  }\n\n  /**\n   * è·å–æ¨¡å‹æ€§èƒ½å†å²\n   */\n  getPerformanceHistory(): ModelPerformance[] {\n    return [...this.performanceHistory].sort((a, b) => b.lastUpdated - a.lastUpdated);\n  }\n\n  /**\n   * è·å–å½“å‰æ¨¡å‹æƒé‡\n   */\n  getModelWeights(): Map<string, number> {\n    return new Map(this.modelWeights);\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * åˆå§‹åŒ–æ¨¡å‹æƒé‡\n   */\n  private initializeWeights(): void {\n    // åˆå§‹åŒ–ç‰¹å¾æƒé‡\n    const initialWeights = {\n      'content_similarity': 0.3,\n      'user_preference': 0.25,\n      'popularity': 0.15,\n      'recency': 0.1,\n      'diversity': 0.1,\n      'novelty': 0.1\n    };\n\n    for (const [feature, weight] of Object.entries(initialWeights)) {\n      this.modelWeights.set(feature, weight);\n    }\n  }\n\n  /**\n   * æå–ç‰¹å¾\n   */\n  private extractFeatures(feedback: FeedbackEvent): Map<string, number> {\n    const features = new Map<string, number>();\n    \n    // ä½ç½®ç‰¹å¾\n    features.set('position', 1.0 / (feedback.context.recommendation_position + 1));\n    \n    // æ¨èåˆ†æ•°ç‰¹å¾\n    features.set('recommendation_score', feedback.context.recommendation_score);\n    \n    // äº¤äº’ç±»å‹ç‰¹å¾\n    features.set('explicit_feedback', feedback.context.interaction_type === 'explicit' ? 1.0 : 0.0);\n    \n    // æ—¶é—´ç‰¹å¾\n    const hourOfDay = new Date(feedback.timestamp).getHours();\n    features.set('hour_of_day', hourOfDay / 24.0);\n    \n    return features;\n  }\n\n  /**\n   * é¢„æµ‹åˆ†æ•°\n   */\n  private predictScore(features: Map<string, number>): number {\n    let score = 0;\n    \n    for (const [feature, value] of features) {\n      const weight = this.modelWeights.get(feature) || 0;\n      score += weight * value;\n    }\n    \n    return Math.max(0, Math.min(1, score)); // å½’ä¸€åŒ–åˆ°[0,1]\n  }\n\n  /**\n   * åº”ç”¨æ­£åˆ™åŒ–\n   */\n  private applyRegularization(): void {\n    const lambda = 0.001; // L2æ­£åˆ™åŒ–å‚æ•°\n    \n    for (const [feature, weight] of this.modelWeights) {\n      const regularizedWeight = weight * (1 - lambda);\n      this.modelWeights.set(feature, regularizedWeight);\n    }\n  }\n\n  /**\n   * åˆ›å»ºç©ºçš„æŒ‡æ ‡å¯¹è±¡\n   */\n  private createEmptyMetrics(): LearningMetrics {\n    return {\n      precision: 0,\n      recall: 0,\n      clickThroughRate: 0,\n      conversionRate: 0,\n      userSatisfaction: 0,\n      diversityScore: 0,\n      noveltyScore: 0\n    };\n  }\n\n  /**\n   * è¯„ä¼°A/Bæµ‹è¯•\n   */\n  private evaluateABTest(testId: string): void {\n    const test = this.abTests.get(testId);\n    if (!test) return;\n\n    // æ”¶é›†ä¸¤ç»„çš„æ€§èƒ½æ•°æ®\n    // è¿™é‡Œåº”è¯¥æ ¹æ®å®é™…çš„ç”¨æˆ·åˆ†ç»„å’Œåé¦ˆæ•°æ®è®¡ç®—æŒ‡æ ‡\n    // ç®€åŒ–å¤„ç†ï¼Œå®é™…å®ç°éœ€è¦æ›´å¤æ‚çš„ç»Ÿè®¡åˆ†æ\n    \n    // è®¡ç®—ç»Ÿè®¡æ˜¾è‘—æ€§\n    const significanceLevel = this.calculateStatisticalSignificance(\n      test.variantA.metrics,\n      test.variantB.metrics,\n      test.variantA.sampleSize,\n      test.variantB.sampleSize\n    );\n\n    test.statisticalSignificance = significanceLevel;\n    \n    // å¦‚æœè¾¾åˆ°ç»Ÿè®¡æ˜¾è‘—æ€§ï¼Œç¡®å®šè·èƒœè€…\n    if (significanceLevel > 0.95) {\n      const aScore = this.calculateOverallScore(test.variantA.metrics);\n      const bScore = this.calculateOverallScore(test.variantB.metrics);\n      test.winnerModel = aScore > bScore ? test.variantA.modelId : test.variantB.modelId;\n    }\n\n    this.abTests.set(testId, test);\n  }\n\n  /**\n   * ç»“æŸA/Bæµ‹è¯•\n   */\n  private concludeABTest(testId: string): void {\n    const test = this.abTests.get(testId);\n    if (!test) return;\n\n    console.log(`A/Bæµ‹è¯• ${testId} å®Œæˆ`);\n    console.log(`è·èƒœæ¨¡å‹: ${test.winnerModel}`);\n    console.log(`ç»Ÿè®¡æ˜¾è‘—æ€§: ${test.statisticalSignificance}`);\n\n    // å¦‚æœæœ‰æ˜ç¡®çš„è·èƒœè€…ï¼Œå¯ä»¥åˆ‡æ¢åˆ°è¯¥æ¨¡å‹\n    if (test.winnerModel && test.statisticalSignificance > 0.95) {\n      console.log(`åˆ‡æ¢åˆ°è·èƒœæ¨¡å‹: ${test.winnerModel}`);\n    }\n  }\n\n  /**\n   * è®¡ç®—åå¥½ç¨³å®šæ€§\n   */\n  private calculatePreferenceStability(feedback: FeedbackEvent[]): number {\n    if (feedback.length < 10) return 0.5; // æ•°æ®ä¸è¶³æ—¶è¿”å›ä¸­ç­‰ç¨³å®šæ€§\n\n    // å°†åé¦ˆåˆ†ä¸ºå‰åä¸¤åŠ\n    const midPoint = Math.floor(feedback.length / 2);\n    const earlyFeedback = feedback.slice(0, midPoint);\n    const lateFeedback = feedback.slice(midPoint);\n\n    // è®¡ç®—ä¸¤ä¸ªæ—¶æœŸçš„åå¥½æ¨¡å¼ç›¸ä¼¼æ€§\n    const earlyPattern = this.extractPreferencePattern(earlyFeedback);\n    const latePattern = this.extractPreferencePattern(lateFeedback);\n\n    return this.calculatePatternSimilarity(earlyPattern, latePattern);\n  }\n\n  /**\n   * æå–åå¥½æ¨¡å¼\n   */\n  private extractPreferencePattern(feedback: FeedbackEvent[]): Map<string, number> {\n    const pattern = new Map<string, number>();\n    \n    for (const f of feedback) {\n      // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”è¯¥æ ¹æ®å†…å®¹ç‰¹å¾æå–æ¨¡å¼\n      const key = `score_${Math.floor(f.feedbackValue * 10)}`;\n      pattern.set(key, (pattern.get(key) || 0) + 1);\n    }\n    \n    return pattern;\n  }\n\n  /**\n   * è®¡ç®—æ¨¡å¼ç›¸ä¼¼æ€§\n   */\n  private calculatePatternSimilarity(pattern1: Map<string, number>, pattern2: Map<string, number>): number {\n    const allKeys = new Set([...pattern1.keys(), ...pattern2.keys()]);\n    \n    let dotProduct = 0;\n    let norm1 = 0;\n    let norm2 = 0;\n    \n    for (const key of allKeys) {\n      const val1 = pattern1.get(key) || 0;\n      const val2 = pattern2.get(key) || 0;\n      \n      dotProduct += val1 * val2;\n      norm1 += val1 * val1;\n      norm2 += val2 * val2;\n    }\n    \n    return norm1 > 0 && norm2 > 0 ? dotProduct / (Math.sqrt(norm1) * Math.sqrt(norm2)) : 0;\n  }\n\n  /**\n   * åˆ†æå‚ä¸åº¦è¶‹åŠ¿\n   */\n  private analyzeEngagementTrend(feedback: FeedbackEvent[]): 'increasing' | 'decreasing' | 'stable' {\n    if (feedback.length < 20) return 'stable';\n\n    // å°†åé¦ˆåˆ†ä¸ºä¸‰ä¸ªæ—¶æœŸ\n    const period = Math.floor(feedback.length / 3);\n    const early = feedback.slice(0, period);\n    const middle = feedback.slice(period, period * 2);\n    const late = feedback.slice(period * 2);\n\n    const earlyAvg = early.reduce((sum, f) => sum + f.feedbackValue, 0) / early.length;\n    const middleAvg = middle.reduce((sum, f) => sum + f.feedbackValue, 0) / middle.length;\n    const lateAvg = late.reduce((sum, f) => sum + f.feedbackValue, 0) / late.length;\n\n    const trend1 = middleAvg - earlyAvg;\n    const trend2 = lateAvg - middleAvg;\n    const overallTrend = (trend1 + trend2) / 2;\n\n    if (overallTrend > 0.1) return 'increasing';\n    if (overallTrend < -0.1) return 'decreasing';\n    return 'stable';\n  }\n\n  /**\n   * è®¡ç®—ç»Ÿè®¡æ˜¾è‘—æ€§\n   */\n  private calculateStatisticalSignificance(\n    metricsA: LearningMetrics,\n    metricsB: LearningMetrics,\n    sampleSizeA: number,\n    sampleSizeB: number\n  ): number {\n    // ç®€åŒ–çš„Zæ£€éªŒå®ç°\n    const scoreA = this.calculateOverallScore(metricsA);\n    const scoreB = this.calculateOverallScore(metricsB);\n    \n    // å‡è®¾æ–¹å·®ç›¸ç­‰ï¼Œè®¡ç®—æ ‡å‡†è¯¯å·®\n    const pooledVariance = 0.25; // å‡è®¾å€¼\n    const standardError = Math.sqrt(pooledVariance * (1/sampleSizeA + 1/sampleSizeB));\n    \n    if (standardError === 0) return 0.5;\n    \n    const zScore = Math.abs(scoreA - scoreB) / standardError;\n    \n    // è½¬æ¢ä¸ºpå€¼ï¼ˆç®€åŒ–å¤„ç†ï¼‰\n    const pValue = 2 * (1 - this.normalCDF(Math.abs(zScore)));\n    \n    return 1 - pValue; // è¿”å›ç½®ä¿¡æ°´å¹³\n  }\n\n  /**\n   * è®¡ç®—ç»¼åˆå¾—åˆ†\n   */\n  private calculateOverallScore(metrics: LearningMetrics): number {\n    return (\n      metrics.precision * 0.25 +\n      metrics.recall * 0.25 +\n      metrics.clickThroughRate * 0.2 +\n      metrics.conversionRate * 0.15 +\n      metrics.userSatisfaction * 0.15\n    );\n  }\n\n  /**\n   * æ­£æ€åˆ†å¸ƒç´¯ç§¯åˆ†å¸ƒå‡½æ•°ï¼ˆç®€åŒ–å®ç°ï¼‰\n   */\n  private normalCDF(x: number): number {\n    // ç®€åŒ–çš„æ­£æ€åˆ†å¸ƒCDFè¿‘ä¼¼\n    return 0.5 * (1 + Math.sign(x) * Math.sqrt(1 - Math.exp(-2 * x * x / Math.PI)));\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/personalization/PersonalizationEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'limit' is assigned a value but never used.","line":30,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":38,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'behavior' is defined but never used.","line":38,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[732,735],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[732,735],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":45,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[851,854],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[851,854],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ä¸ªæ€§åŒ–å¼•æ“\n * å¤„ç†ç”¨æˆ·ä¸ªæ€§åŒ–æœç´¢å’Œæ¨è\n */\n\nimport { SearchResult, UnifiedSearchConfig } from '../types';\n\nexport class PersonalizationEngine {\n  private config: UnifiedSearchConfig;\n\n  constructor(config: UnifiedSearchConfig) {\n    this.config = config;\n  }\n\n  /**\n   * ä¸ªæ€§åŒ–æœç´¢ç»“æœ\n   */\n  async personalizeResults(results: SearchResult[], userId: string): Promise<SearchResult[]> {\n    if (!this.config.personalization || !userId) {\n      return results;\n    }\n\n    // TODO: å®ç°ä¸ªæ€§åŒ–é€»è¾‘\n    return results;\n  }\n\n  /**\n   * ç”Ÿæˆä¸ªæ€§åŒ–æ¨è\n   */\n  async generateRecommendations(userId: string, limit: number = 10): Promise<SearchResult[]> {\n    // TODO: å®ç°æ¨èé€»è¾‘\n    return [];\n  }\n\n  /**\n   * å­¦ä¹ ç”¨æˆ·è¡Œä¸º\n   */\n  async learnFromBehavior(userId: string, behavior: any): Promise<void> {\n    // TODO: å®ç°å­¦ä¹ é€»è¾‘\n  }\n\n  /**\n   * è·å–ç”¨æˆ·ç”»åƒ\n   */\n  async getUserProfile(userId: string): Promise<any> {\n    // TODO: å®ç°ç”¨æˆ·ç”»åƒè·å–\n    return null;\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/personalization/RecommendationEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BehaviorProfile' is defined but never used.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HealthProfile' is defined but never used.","line":6,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BehaviorTracker' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'EventType' is defined but never used.","line":7,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ClickEvent' is defined but never used.","line":7,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[454,457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[454,457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1020,1023],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1020,1023],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":358,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userInteractions' is assigned a value but never used.","line":441,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":441,"endColumn":27}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å†…å®¹æ¨èå¼•æ“\n * åŸºäºç”¨æˆ·ç”»åƒå’ŒååŒè¿‡æ»¤ç®—æ³•æä¾›ä¸ªæ€§åŒ–å†…å®¹æ¨è\n */\n\nimport { UserProfile, BehaviorProfile, HealthProfile } from './UserProfileBuilder';\nimport { BehaviorTracker, EventType, ClickEvent } from './BehaviorTracker';\n\nexport interface RecommendationItem {\n  contentId: string;\n  contentType: 'article' | 'pdf' | 'tool';\n  title: string;\n  description?: string;\n  score: number;\n  confidence: number;\n  reason: string;\n  category: string;\n  metadata?: Record<string, any>;\n}\n\nexport interface RecommendationResult {\n  recommendations: RecommendationItem[];\n  totalScore: number;\n  strategy: string;\n  explanations: string[];\n  diversity: number; // æ¨èå¤šæ ·æ€§ 0-1\n}\n\nexport interface ContentItem {\n  id: string;\n  type: 'article' | 'pdf' | 'tool';\n  title: string;\n  description: string;\n  category: string;\n  tags: string[];\n  difficulty: 'beginner' | 'intermediate' | 'advanced';\n  urgency: 'low' | 'medium' | 'high' | 'critical';\n  popularity: number; // 0-1\n  quality: number; // 0-1\n  lastUpdated: number;\n  metadata: Record<string, any>;\n}\n\nexport interface RecommendationOptions {\n  maxRecommendations: number;\n  diversityWeight: number; // å¤šæ ·æ€§æƒé‡ 0-1\n  noveltyWeight: number; // æ–°é¢–æ€§æƒé‡ 0-1\n  popularityWeight: number; // çƒ­é—¨åº¦æƒé‡ 0-1\n  personalWeight: number; // ä¸ªæ€§åŒ–æƒé‡ 0-1\n  includeExplanations: boolean;\n  excludeIds: string[];\n  forceCategories?: string[];\n}\n\nexport class RecommendationEngine {\n  private contentDatabase: Map<string, ContentItem>;\n  private userInteractions: Map<string, Map<string, number>>; // userId -> contentId -> score\n  private contentSimilarity: Map<string, Map<string, number>>; // contentId -> contentId -> similarity\n  private categoryWeights: Map<string, number>;\n\n  constructor() {\n    this.contentDatabase = new Map();\n    this.userInteractions = new Map();\n    this.contentSimilarity = new Map();\n    this.categoryWeights = new Map();\n    this.initializeCategoryWeights();\n  }\n\n  /**\n   * æ·»åŠ å†…å®¹åˆ°æ•°æ®åº“\n   */\n  addContent(content: ContentItem): void {\n    this.contentDatabase.set(content.id, content);\n    this.updateContentSimilarity(content);\n  }\n\n  /**\n   * æ‰¹é‡æ·»åŠ å†…å®¹\n   */\n  addContentBatch(contents: ContentItem[]): void {\n    for (const content of contents) {\n      this.addContent(content);\n    }\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·äº¤äº’\n   */\n  recordInteraction(\n    userId: string, \n    contentId: string, \n    interactionType: 'view' | 'click' | 'download' | 'share' | 'like',\n    duration?: number\n  ): void {\n    const userInteractions = this.userInteractions.get(userId) || new Map();\n    \n    // è®¡ç®—äº¤äº’å¾—åˆ†\n    const score = this.calculateInteractionScore(interactionType, duration);\n    \n    // ç´¯ç§¯å¾—åˆ†\n    const currentScore = userInteractions.get(contentId) || 0;\n    userInteractions.set(contentId, currentScore + score);\n    \n    this.userInteractions.set(userId, userInteractions);\n  }\n\n  /**\n   * ç”Ÿæˆä¸ªæ€§åŒ–æ¨è\n   */\n  generateRecommendations(\n    userProfile: UserProfile,\n    options: Partial<RecommendationOptions> = {}\n  ): RecommendationResult {\n    const opts: RecommendationOptions = {\n      maxRecommendations: 10,\n      diversityWeight: 0.3,\n      noveltyWeight: 0.2,\n      popularityWeight: 0.2,\n      personalWeight: 0.3,\n      includeExplanations: true,\n      excludeIds: [],\n      ...options\n    };\n\n    // è·å–å€™é€‰å†…å®¹\n    const candidates = this.getCandidateContent(userProfile, opts);\n    \n    // å¤šç­–ç•¥æ¨è\n    const strategies = [\n      { name: 'content_based', weight: 0.4 },\n      { name: 'collaborative', weight: 0.3 },\n      { name: 'popularity_based', weight: 0.2 },\n      { name: 'health_focused', weight: 0.1 }\n    ];\n\n    const allRecommendations: Map<string, RecommendationItem> = new Map();\n    \n    for (const strategy of strategies) {\n      const strategyRecs = this.applyStrategy(\n        strategy.name, \n        userProfile, \n        candidates, \n        opts\n      );\n      \n      // åˆå¹¶æ¨èï¼Œè°ƒæ•´æƒé‡\n      for (const rec of strategyRecs) {\n        const existing = allRecommendations.get(rec.contentId);\n        if (existing) {\n          existing.score += rec.score * strategy.weight;\n          existing.confidence = Math.max(existing.confidence, rec.confidence);\n        } else {\n          allRecommendations.set(rec.contentId, {\n            ...rec,\n            score: rec.score * strategy.weight\n          });\n        }\n      }\n    }\n\n    // åº”ç”¨å¤šæ ·æ€§å’Œæ–°é¢–æ€§è°ƒæ•´\n    const adjustedRecs = this.applyDiversityAndNovelty(\n      Array.from(allRecommendations.values()),\n      userProfile,\n      opts\n    );\n\n    // æ’åºå’Œç­›é€‰\n    const finalRecommendations = adjustedRecs\n      .sort((a, b) => b.score - a.score)\n      .slice(0, opts.maxRecommendations);\n\n    // è®¡ç®—å¤šæ ·æ€§æŒ‡æ ‡\n    const diversity = this.calculateDiversity(finalRecommendations);\n    \n    // ç”Ÿæˆè§£é‡Š\n    const explanations = opts.includeExplanations \n      ? this.generateExplanations(finalRecommendations, userProfile)\n      : [];\n\n    return {\n      recommendations: finalRecommendations,\n      totalScore: finalRecommendations.reduce((sum, rec) => sum + rec.score, 0),\n      strategy: 'hybrid_multi_strategy',\n      explanations,\n      diversity\n    };\n  }\n\n  /**\n   * è·å–ç›¸ä¼¼å†…å®¹æ¨è\n   */\n  getSimilarContent(\n    contentId: string, \n    limit: number = 5,\n    excludeIds: string[] = []\n  ): RecommendationItem[] {\n    const similarities = this.contentSimilarity.get(contentId) || new Map();\n    const recommendations: RecommendationItem[] = [];\n\n    for (const [similarId, similarity] of similarities) {\n      if (excludeIds.includes(similarId) || similarId === contentId) {\n        continue;\n      }\n\n      const content = this.contentDatabase.get(similarId);\n      if (content && similarity > 0.3) {\n        recommendations.push({\n          contentId: similarId,\n          contentType: content.type,\n          title: content.title,\n          description: content.description,\n          score: similarity,\n          confidence: 0.8,\n          reason: 'åŸºäºå†…å®¹ç›¸ä¼¼æ€§',\n          category: content.category,\n          metadata: content.metadata\n        });\n      }\n    }\n\n    return recommendations\n      .sort((a, b) => b.score - a.score)\n      .slice(0, limit);\n  }\n\n  /**\n   * è·å–çƒ­é—¨æ¨è\n   */\n  getPopularRecommendations(\n    category?: string, \n    limit: number = 10\n  ): RecommendationItem[] {\n    const contents = Array.from(this.contentDatabase.values());\n    \n    let filtered = contents;\n    if (category) {\n      filtered = contents.filter(c => c.category === category);\n    }\n\n    return filtered\n      .sort((a, b) => b.popularity - a.popularity)\n      .slice(0, limit)\n      .map(content => ({\n        contentId: content.id,\n        contentType: content.type,\n        title: content.title,\n        description: content.description,\n        score: content.popularity,\n        confidence: 0.7,\n        reason: 'çƒ­é—¨å†…å®¹',\n        category: content.category,\n        metadata: content.metadata\n      }));\n  }\n\n  /**\n   * è·å–ç´§æ€¥æ¨èï¼ˆé’ˆå¯¹é«˜ç´§æ€¥åº¦éœ€æ±‚ï¼‰\n   */\n  getUrgentRecommendations(urgencyLevel: 'high' | 'critical'): RecommendationItem[] {\n    const contents = Array.from(this.contentDatabase.values())\n      .filter(c => c.urgency === urgencyLevel || c.urgency === 'critical');\n\n    return contents\n      .sort((a, b) => b.quality - a.quality)\n      .slice(0, 5)\n      .map(content => ({\n        contentId: content.id,\n        contentType: content.type,\n        title: content.title,\n        description: content.description,\n        score: 1.0,\n        confidence: 0.95,\n        reason: 'ç´§æ€¥éœ€æ±‚åŒ¹é…',\n        category: content.category,\n        metadata: content.metadata\n      }));\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * åˆå§‹åŒ–åˆ†ç±»æƒé‡\n   */\n  private initializeCategoryWeights(): void {\n    this.categoryWeights.set('immediate_relief', 1.0);\n    this.categoryWeights.set('medical_treatment', 0.9);\n    this.categoryWeights.set('natural_therapy', 0.8);\n    this.categoryWeights.set('lifestyle', 0.7);\n    this.categoryWeights.set('education', 0.6);\n    this.categoryWeights.set('prevention', 0.5);\n  }\n\n  /**\n   * è®¡ç®—äº¤äº’å¾—åˆ†\n   */\n  private calculateInteractionScore(\n    interactionType: 'view' | 'click' | 'download' | 'share' | 'like',\n    duration?: number\n  ): number {\n    const baseScores = {\n      view: 0.1,\n      click: 0.3,\n      download: 0.8,\n      share: 1.0,\n      like: 0.9\n    };\n\n    let score = baseScores[interactionType];\n\n    // åŸºäºæµè§ˆæ—¶é•¿è°ƒæ•´\n    if (interactionType === 'view' && duration) {\n      if (duration > 300) { // 5åˆ†é’Ÿä»¥ä¸Š\n        score += 0.5;\n      } else if (duration > 60) { // 1åˆ†é’Ÿä»¥ä¸Š\n        score += 0.2;\n      }\n    }\n\n    return Math.min(score, 1.0);\n  }\n\n  /**\n   * è·å–å€™é€‰å†…å®¹\n   */\n  private getCandidateContent(\n    userProfile: UserProfile,\n    options: RecommendationOptions\n  ): ContentItem[] {\n    const allContent = Array.from(this.contentDatabase.values());\n    \n    // è¿‡æ»¤æ’é™¤çš„å†…å®¹\n    let candidates = allContent.filter(c => !options.excludeIds.includes(c.id));\n\n    // å¦‚æœæŒ‡å®šäº†åˆ†ç±»ï¼Œåªæ¨èæŒ‡å®šåˆ†ç±»\n    if (options.forceCategories && options.forceCategories.length > 0) {\n      candidates = candidates.filter(c => options.forceCategories!.includes(c.category));\n    }\n\n    // åŸºäºç”¨æˆ·çŸ¥è¯†æ°´å¹³è¿‡æ»¤\n    const knowledgeLevel = userProfile.healthProfile.knowledgeLevel;\n    if (knowledgeLevel === 'beginner') {\n      candidates = candidates.filter(c => c.difficulty !== 'advanced');\n    } else if (knowledgeLevel === 'intermediate') {\n      // ä¸­çº§ç”¨æˆ·å¯ä»¥çœ‹æ‰€æœ‰å†…å®¹ï¼Œä½†åå‘ä¸­çº§\n    }\n\n    return candidates;\n  }\n\n  /**\n   * åº”ç”¨æ¨èç­–ç•¥\n   */\n  private applyStrategy(\n    strategyName: string,\n    userProfile: UserProfile,\n    candidates: ContentItem[],\n    options: RecommendationOptions\n  ): RecommendationItem[] {\n    switch (strategyName) {\n      case 'content_based':\n        return this.contentBasedRecommendation(userProfile, candidates);\n      case 'collaborative':\n        return this.collaborativeFiltering(userProfile, candidates);\n      case 'popularity_based':\n        return this.popularityBasedRecommendation(candidates);\n      case 'health_focused':\n        return this.healthFocusedRecommendation(userProfile, candidates);\n      default:\n        return [];\n    }\n  }\n\n  /**\n   * åŸºäºå†…å®¹çš„æ¨è\n   */\n  private contentBasedRecommendation(\n    userProfile: UserProfile,\n    candidates: ContentItem[]\n  ): RecommendationItem[] {\n    const recommendations: RecommendationItem[] = [];\n    const userInterests = userProfile.interestTopics;\n\n    for (const content of candidates) {\n      let score = 0;\n      const matchedTopics: string[] = [];\n\n      // åŸºäºå…´è¶£ä¸»é¢˜åŒ¹é…\n      for (const interest of userInterests) {\n        if (content.tags.some(tag => tag.toLowerCase().includes(interest.topic.toLowerCase()))) {\n          score += interest.relevance * 0.8;\n          matchedTopics.push(interest.topic);\n        }\n        if (content.title.toLowerCase().includes(interest.topic.toLowerCase())) {\n          score += interest.relevance * 0.6;\n          matchedTopics.push(interest.topic);\n        }\n      }\n\n      // åŸºäºå¥åº·çŠ¶å†µåŒ¹é…\n      const healthProfile = userProfile.healthProfile;\n      if (healthProfile.severityLevel !== 'unknown') {\n        const severityMatch = this.matchSeverityLevel(content, healthProfile.severityLevel);\n        score += severityMatch * 0.4;\n      }\n\n      // åŸºäºæ²»ç–—åå¥½åŒ¹é…\n      for (const preference of healthProfile.treatmentPreferences) {\n        if (this.matchTreatmentPreference(content, preference.type)) {\n          score += preference.confidence * 0.3;\n        }\n      }\n\n      if (score > 0.2) {\n        recommendations.push({\n          contentId: content.id,\n          contentType: content.type,\n          title: content.title,\n          description: content.description,\n          score,\n          confidence: 0.8,\n          reason: `åŒ¹é…å…´è¶£: ${matchedTopics.join(', ')}`,\n          category: content.category,\n          metadata: content.metadata\n        });\n      }\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * ååŒè¿‡æ»¤æ¨è\n   */\n  private collaborativeFiltering(\n    userProfile: UserProfile,\n    candidates: ContentItem[]\n  ): RecommendationItem[] {\n    const recommendations: RecommendationItem[] = [];\n    const userId = userProfile.userId;\n    const userInteractions = this.userInteractions.get(userId) || new Map();\n\n    // æ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·\n    const similarUsers = this.findSimilarUsers(userId, 5);\n\n    for (const content of candidates) {\n      let score = 0;\n      let supportingUsers = 0;\n\n      // æ£€æŸ¥ç›¸ä¼¼ç”¨æˆ·æ˜¯å¦å–œæ¬¢è¿™ä¸ªå†…å®¹\n      for (const { userId: similarUserId, similarity } of similarUsers) {\n        const similarUserInteractions = this.userInteractions.get(similarUserId) || new Map();\n        const interactionScore = similarUserInteractions.get(content.id) || 0;\n        \n        if (interactionScore > 0.5) {\n          score += similarity * interactionScore;\n          supportingUsers++;\n        }\n      }\n\n      // åªæ¨èæœ‰è¶³å¤Ÿæ”¯æŒçš„å†…å®¹\n      if (supportingUsers >= 2 && score > 0.3) {\n        recommendations.push({\n          contentId: content.id,\n          contentType: content.type,\n          title: content.title,\n          description: content.description,\n          score,\n          confidence: 0.7,\n          reason: `${supportingUsers} ä¸ªç›¸ä¼¼ç”¨æˆ·å–œæ¬¢`,\n          category: content.category,\n          metadata: content.metadata\n        });\n      }\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * åŸºäºçƒ­é—¨åº¦çš„æ¨è\n   */\n  private popularityBasedRecommendation(candidates: ContentItem[]): RecommendationItem[] {\n    return candidates\n      .filter(c => c.popularity > 0.6)\n      .map(content => ({\n        contentId: content.id,\n        contentType: content.type,\n        title: content.title,\n        description: content.description,\n        score: content.popularity,\n        confidence: 0.6,\n        reason: 'çƒ­é—¨å†…å®¹',\n        category: content.category,\n        metadata: content.metadata\n      }));\n  }\n\n  /**\n   * åŸºäºå¥åº·éœ€æ±‚çš„æ¨è\n   */\n  private healthFocusedRecommendation(\n    userProfile: UserProfile,\n    candidates: ContentItem[]\n  ): RecommendationItem[] {\n    const recommendations: RecommendationItem[] = [];\n    const healthProfile = userProfile.healthProfile;\n\n    for (const content of candidates) {\n      let score = 0;\n      const reasons: string[] = [];\n\n      // ç´§æ€¥åº¦åŒ¹é…\n      if (healthProfile.urgencyProfile.emergencyQueries > 0 && content.urgency === 'critical') {\n        score += 0.8;\n        reasons.push('ç´§æ€¥éœ€æ±‚');\n      }\n\n      // ç—‡çŠ¶æ¨¡å¼åŒ¹é…\n      for (const symptom of healthProfile.symptomPatterns) {\n        if (content.tags.some(tag => tag.includes(symptom))) {\n          score += 0.3;\n          reasons.push(`ç—‡çŠ¶ç›¸å…³: ${symptom}`);\n        }\n      }\n\n      // çŸ¥è¯†æ°´å¹³åŒ¹é…\n      if (content.difficulty === healthProfile.knowledgeLevel) {\n        score += 0.2;\n        reasons.push('éš¾åº¦é€‚åˆ');\n      }\n\n      if (score > 0.3) {\n        recommendations.push({\n          contentId: content.id,\n          contentType: content.type,\n          title: content.title,\n          description: content.description,\n          score,\n          confidence: 0.9,\n          reason: reasons.join(', '),\n          category: content.category,\n          metadata: content.metadata\n        });\n      }\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * åº”ç”¨å¤šæ ·æ€§å’Œæ–°é¢–æ€§è°ƒæ•´\n   */\n  private applyDiversityAndNovelty(\n    recommendations: RecommendationItem[],\n    userProfile: UserProfile,\n    options: RecommendationOptions\n  ): RecommendationItem[] {\n    // å¤šæ ·æ€§è°ƒæ•´ï¼šç¡®ä¿ä¸åŒåˆ†ç±»çš„å†…å®¹éƒ½æœ‰\n    const categoryCount = new Map<string, number>();\n    const adjustedRecs: RecommendationItem[] = [];\n\n    for (const rec of recommendations) {\n      const categoryCount_ = categoryCount.get(rec.category) || 0;\n      \n      // åˆ†ç±»å¤šæ ·æ€§æƒ©ç½š\n      const diversityPenalty = categoryCount_ * 0.1 * options.diversityWeight;\n      rec.score = Math.max(rec.score - diversityPenalty, 0.1);\n      \n      // æ–°é¢–æ€§å¥–åŠ±\n      const noveltyBonus = this.calculateNoveltyBonus(rec, userProfile) * options.noveltyWeight;\n      rec.score += noveltyBonus;\n      \n      adjustedRecs.push(rec);\n      categoryCount.set(rec.category, categoryCount_ + 1);\n    }\n\n    return adjustedRecs;\n  }\n\n  /**\n   * è®¡ç®—å¤šæ ·æ€§æŒ‡æ ‡\n   */\n  private calculateDiversity(recommendations: RecommendationItem[]): number {\n    if (recommendations.length <= 1) return 1.0;\n\n    const categories = new Set(recommendations.map(r => r.category));\n    const types = new Set(recommendations.map(r => r.contentType));\n    \n    const categoryDiversity = categories.size / recommendations.length;\n    const typeDiversity = types.size / recommendations.length;\n    \n    return (categoryDiversity + typeDiversity) / 2;\n  }\n\n  /**\n   * ç”Ÿæˆæ¨èè§£é‡Š\n   */\n  private generateExplanations(\n    recommendations: RecommendationItem[],\n    userProfile: UserProfile\n  ): string[] {\n    const explanations: string[] = [];\n    \n    const topCategories = this.getTopCategories(recommendations, 3);\n    explanations.push(`ä¸»è¦æ¨èåˆ†ç±»: ${topCategories.join(', ')}`);\n    \n    const userType = this.classifyUserType(userProfile);\n    explanations.push(`åŸºäºæ‚¨çš„ç”¨æˆ·ç±»å‹: ${userType}`);\n    \n    const topReasons = this.getTopReasons(recommendations, 3);\n    explanations.push(`æ¨èç†ç”±: ${topReasons.join(', ')}`);\n    \n    return explanations;\n  }\n\n  /**\n   * æ›´æ–°å†…å®¹ç›¸ä¼¼åº¦\n   */\n  private updateContentSimilarity(newContent: ContentItem): void {\n    const allContent = Array.from(this.contentDatabase.values());\n    \n    for (const content of allContent) {\n      if (content.id === newContent.id) continue;\n      \n      const similarity = this.calculateContentSimilarity(newContent, content);\n      \n      // æ›´æ–°åŒå‘ç›¸ä¼¼åº¦\n      const similarities1 = this.contentSimilarity.get(newContent.id) || new Map();\n      similarities1.set(content.id, similarity);\n      this.contentSimilarity.set(newContent.id, similarities1);\n      \n      const similarities2 = this.contentSimilarity.get(content.id) || new Map();\n      similarities2.set(newContent.id, similarity);\n      this.contentSimilarity.set(content.id, similarities2);\n    }\n  }\n\n  /**\n   * è®¡ç®—å†…å®¹ç›¸ä¼¼åº¦\n   */\n  private calculateContentSimilarity(content1: ContentItem, content2: ContentItem): number {\n    let similarity = 0;\n\n    // åˆ†ç±»ç›¸ä¼¼åº¦\n    if (content1.category === content2.category) {\n      similarity += 0.4;\n    }\n\n    // æ ‡ç­¾ç›¸ä¼¼åº¦\n    const tags1 = new Set(content1.tags);\n    const tags2 = new Set(content2.tags);\n    const intersection = new Set([...tags1].filter(x => tags2.has(x)));\n    const union = new Set([...tags1, ...tags2]);\n    if (union.size > 0) {\n      similarity += (intersection.size / union.size) * 0.3;\n    }\n\n    // éš¾åº¦ç›¸ä¼¼åº¦\n    if (content1.difficulty === content2.difficulty) {\n      similarity += 0.2;\n    }\n\n    // ç±»å‹ç›¸ä¼¼åº¦\n    if (content1.type === content2.type) {\n      similarity += 0.1;\n    }\n\n    return similarity;\n  }\n\n  /**\n   * åŒ¹é…ä¸¥é‡ç¨‹åº¦\n   */\n  private matchSeverityLevel(content: ContentItem, severityLevel: string): number {\n    const contentUrgency = content.urgency;\n    \n    const severityMap: Record<string, string[]> = {\n      'mild': ['low', 'medium'],\n      'moderate': ['medium', 'high'],\n      'severe': ['high', 'critical']\n    };\n\n    const matchingUrgencies = severityMap[severityLevel] || [];\n    return matchingUrgencies.includes(contentUrgency) ? 1.0 : 0.0;\n  }\n\n  /**\n   * åŒ¹é…æ²»ç–—åå¥½\n   */\n  private matchTreatmentPreference(content: ContentItem, preferenceType: string): boolean {\n    const categoryMap: Record<string, string[]> = {\n      'medical': ['medical_treatment', 'medication'],\n      'natural': ['natural_therapy', 'lifestyle'],\n      'lifestyle': ['lifestyle', 'prevention', 'education']\n    };\n\n    const relevantCategories = categoryMap[preferenceType] || [];\n    return relevantCategories.includes(content.category);\n  }\n\n  /**\n   * æŸ¥æ‰¾ç›¸ä¼¼ç”¨æˆ·\n   */\n  private findSimilarUsers(userId: string, limit: number): Array<{ userId: string; similarity: number }> {\n    const userInteractions = this.userInteractions.get(userId) || new Map();\n    const similarities: Array<{ userId: string; similarity: number }> = [];\n\n    for (const [otherUserId, otherInteractions] of this.userInteractions) {\n      if (otherUserId === userId) continue;\n\n      const similarity = this.calculateUserSimilarity(userInteractions, otherInteractions);\n      if (similarity > 0.2) {\n        similarities.push({ userId: otherUserId, similarity });\n      }\n    }\n\n    return similarities\n      .sort((a, b) => b.similarity - a.similarity)\n      .slice(0, limit);\n  }\n\n  /**\n   * è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦\n   */\n  private calculateUserSimilarity(\n    interactions1: Map<string, number>,\n    interactions2: Map<string, number>\n  ): number {\n    const items1 = new Set(interactions1.keys());\n    const items2 = new Set(interactions2.keys());\n    const intersection = new Set([...items1].filter(x => items2.has(x)));\n    \n    if (intersection.size === 0) return 0;\n\n    // è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦\n    let dotProduct = 0;\n    let norm1 = 0;\n    let norm2 = 0;\n\n    for (const item of intersection) {\n      const score1 = interactions1.get(item) || 0;\n      const score2 = interactions2.get(item) || 0;\n      dotProduct += score1 * score2;\n    }\n\n    for (const score of interactions1.values()) {\n      norm1 += score * score;\n    }\n    for (const score of interactions2.values()) {\n      norm2 += score * score;\n    }\n\n    return dotProduct / (Math.sqrt(norm1) * Math.sqrt(norm2));\n  }\n\n  /**\n   * è®¡ç®—æ–°é¢–æ€§å¥–åŠ±\n   */\n  private calculateNoveltyBonus(rec: RecommendationItem, userProfile: UserProfile): number {\n    const userInteractions = this.userInteractions.get(userProfile.userId) || new Map();\n    \n    // å¦‚æœç”¨æˆ·ä»æœªä¸æ­¤å†…å®¹äº¤äº’ï¼Œç»™äºˆæ–°é¢–æ€§å¥–åŠ±\n    if (!userInteractions.has(rec.contentId)) {\n      return 0.1;\n    }\n    \n    return 0;\n  }\n\n  /**\n   * åˆ†ç±»ç”¨æˆ·ç±»å‹\n   */\n  private classifyUserType(userProfile: UserProfile): string {\n    const health = userProfile.healthProfile;\n    \n    if (health.urgencyProfile.emergencyQueries > 0) {\n      return 'æ€¥æ€§ç–¼ç—›ç”¨æˆ·';\n    } else if (health.knowledgeLevel === 'advanced') {\n      return 'ä¸“ä¸šçŸ¥è¯†ç”¨æˆ·';\n    } else if (health.treatmentPreferences.some(t => t.type === 'natural')) {\n      return 'è‡ªç„¶ç–—æ³•åå¥½ç”¨æˆ·';\n    } else {\n      return 'ä¸€èˆ¬å¥åº·å…³æ³¨ç”¨æˆ·';\n    }\n  }\n\n  /**\n   * è·å–é¡¶çº§åˆ†ç±»\n   */\n  private getTopCategories(recommendations: RecommendationItem[], limit: number): string[] {\n    const categoryCount = new Map<string, number>();\n    \n    for (const rec of recommendations) {\n      categoryCount.set(rec.category, (categoryCount.get(rec.category) || 0) + 1);\n    }\n    \n    return Array.from(categoryCount.entries())\n      .sort(([,a], [,b]) => b - a)\n      .slice(0, limit)\n      .map(([category]) => category);\n  }\n\n  /**\n   * è·å–é¡¶çº§æ¨èç†ç”±\n   */\n  private getTopReasons(recommendations: RecommendationItem[], limit: number): string[] {\n    const reasonCount = new Map<string, number>();\n    \n    for (const rec of recommendations) {\n      const reasons = rec.reason.split(', ');\n      for (const reason of reasons) {\n        reasonCount.set(reason, (reasonCount.get(reason) || 0) + 1);\n      }\n    }\n    \n    return Array.from(reasonCount.entries())\n      .sort(([,a], [,b]) => b - a)\n      .slice(0, limit)\n      .map(([reason]) => reason);\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/personalization/UserProfileBuilder.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/semantic-search/CosineSimilarity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/semantic-search/SemanticMatcher.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[381,384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[381,384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[795,798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[795,798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1112,1115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1112,1115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":287,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":287,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6941,6944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6941,6944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­ä¹‰åŒ¹é…å™¨\n * æ•´åˆTF-IDFå’Œä½™å¼¦ç›¸ä¼¼åº¦è¿›è¡Œè¯­ä¹‰æœç´¢\n */\n\nimport { TFIDFVectorizer, TFIDFVector } from './TFIDFVectorizer';\nimport { CosineSimilarity, SimilarityResult } from './CosineSimilarity';\n\nexport interface SemanticSearchResult {\n  documentId: string;\n  score: number;\n  similarity: number;\n  relevance: number;\n  matchedTerms: string[];\n  explanation: string;\n  metadata?: Record<string, any>;\n}\n\nexport interface SemanticSearchOptions {\n  similarityThreshold: number;\n  maxResults: number;\n  boostFactors: {\n    titleBoost: number;\n    contentBoost: number;\n    keywordBoost: number;\n  };\n  includeExplanation: boolean;\n}\n\nexport class SemanticMatcher {\n  private vectorizer: TFIDFVectorizer;\n  private documentVectors: Map<string, TFIDFVector>;\n  private documentMetadata: Map<string, Record<string, any>>;\n\n  constructor() {\n    this.vectorizer = new TFIDFVectorizer();\n    this.documentVectors = new Map();\n    this.documentMetadata = new Map();\n  }\n\n  /**\n   * è®­ç»ƒè¯­ä¹‰åŒ¹é…å™¨\n   */\n  train(documents: Array<{\n    id: string;\n    title?: string;\n    content: string;\n    keywords?: string[];\n    metadata?: Record<string, any>;\n  }>): void {\n    // å‡†å¤‡è®­ç»ƒæ•°æ®\n    const trainingDocs = documents.map(doc => ({\n      id: doc.id,\n      content: this.combineTextFields(doc.title, doc.content, doc.keywords)\n    }));\n\n    // è®­ç»ƒå‘é‡åŒ–å™¨\n    this.vectorizer.fit(trainingDocs);\n\n    // ç”Ÿæˆæ–‡æ¡£å‘é‡\n    this.documentVectors.clear();\n    this.documentMetadata.clear();\n\n    for (const doc of documents) {\n      const vector = this.vectorizer.transform(doc.id, trainingDocs.find(td => td.id === doc.id)?.content);\n      this.documentVectors.set(doc.id, vector);\n      \n      if (doc.metadata) {\n        this.documentMetadata.set(doc.id, doc.metadata);\n      }\n    }\n  }\n\n  /**\n   * è¯­ä¹‰æœç´¢\n   */\n  search(\n    query: string,\n    options: Partial<SemanticSearchOptions> = {}\n  ): SemanticSearchResult[] {\n    const opts: SemanticSearchOptions = {\n      similarityThreshold: 0.05,\n      maxResults: 20,\n      boostFactors: {\n        titleBoost: 1.5,\n        contentBoost: 1.0,\n        keywordBoost: 1.3\n      },\n      includeExplanation: true,\n      ...options\n    };\n\n    // ç”ŸæˆæŸ¥è¯¢å‘é‡\n    const queryVector = this.vectorizer.transformQuery(query);\n    \n    if (queryVector.terms.length === 0) {\n      return [];\n    }\n\n    // è®¡ç®—ç›¸ä¼¼åº¦\n    const documentVectors = Array.from(this.documentVectors.values());\n    const similarities = CosineSimilarity.calculateBatch(queryVector, documentVectors);\n\n    // è¿‡æ»¤å’Œè¯„åˆ†\n    const results: SemanticSearchResult[] = [];\n    \n    for (const simResult of similarities) {\n      if (simResult.similarity < opts.similarityThreshold) {\n        continue;\n      }\n\n      const metadata = this.documentMetadata.get(simResult.documentId) || {};\n      const relevance = this.calculateRelevance(simResult, metadata, opts.boostFactors);\n      const score = this.calculateFinalScore(simResult.similarity, relevance);\n\n      results.push({\n        documentId: simResult.documentId,\n        score,\n        similarity: simResult.similarity,\n        relevance,\n        matchedTerms: simResult.matchedTerms,\n        explanation: opts.includeExplanation ? simResult.explanation : '',\n        metadata\n      });\n    }\n\n    // æ’åºå¹¶è¿”å›\n    return results\n      .sort((a, b) => b.score - a.score)\n      .slice(0, opts.maxResults);\n  }\n\n  /**\n   * æŸ¥æ‰¾ç›¸ä¼¼æ–‡æ¡£\n   */\n  findSimilar(\n    documentId: string,\n    limit: number = 5,\n    excludeSelf: boolean = true\n  ): SemanticSearchResult[] {\n    const targetVector = this.documentVectors.get(documentId);\n    if (!targetVector) {\n      return [];\n    }\n\n    const documentVectors = Array.from(this.documentVectors.values());\n    const similarities = CosineSimilarity.calculateBatch(targetVector, documentVectors);\n\n    const results: SemanticSearchResult[] = [];\n    \n    for (const simResult of similarities) {\n      if (excludeSelf && simResult.documentId === documentId) {\n        continue;\n      }\n\n      const metadata = this.documentMetadata.get(simResult.documentId) || {};\n      \n      results.push({\n        documentId: simResult.documentId,\n        score: simResult.similarity,\n        similarity: simResult.similarity,\n        relevance: 1.0,\n        matchedTerms: simResult.matchedTerms,\n        explanation: simResult.explanation,\n        metadata\n      });\n    }\n\n    return results\n      .sort((a, b) => b.score - a.score)\n      .slice(0, limit);\n  }\n\n  /**\n   * è·å–æŸ¥è¯¢å»ºè®®\n   */\n  getQuerySuggestions(partialQuery: string, limit: number = 5): string[] {\n    const vocabulary = this.vectorizer.getVocabulary();\n    const queryLower = partialQuery.toLowerCase();\n    \n    const suggestions: Array<{ term: string; score: number }> = [];\n\n    for (const term of vocabulary) {\n      if (term.includes(queryLower)) {\n        let score = 0;\n        \n        // å‰ç¼€åŒ¹é…å¾—åˆ†æ›´é«˜\n        if (term.startsWith(queryLower)) {\n          score += 10;\n        }\n        \n        // å®Œæ•´åŒ¹é…å¾—åˆ†æœ€é«˜\n        if (term === queryLower) {\n          score += 20;\n        }\n        \n        // æ ¹æ®IDFå€¼è°ƒæ•´å¾—åˆ†ï¼ˆæ›´é‡è¦çš„è¯å¾—åˆ†æ›´é«˜ï¼‰\n        score += this.vectorizer.getIDF(term);\n        \n        suggestions.push({ term, score });\n      }\n    }\n\n    return suggestions\n      .sort((a, b) => b.score - a.score)\n      .slice(0, limit)\n      .map(s => s.term);\n  }\n\n  /**\n   * è·å–æ–‡æ¡£å‘é‡\n   */\n  getDocumentVector(documentId: string): TFIDFVector | undefined {\n    return this.documentVectors.get(documentId);\n  }\n\n  /**\n   * è·å–å‘é‡åŒ–å™¨ç»Ÿè®¡ä¿¡æ¯\n   */\n  getStatistics(): {\n    vocabularySize: number;\n    documentsCount: number;\n    averageDocumentLength: number;\n    topTerms: string[];\n  } {\n    const vocabularySize = this.vectorizer.getVocabularySize();\n    const documentsCount = this.documentVectors.size;\n    \n    // è®¡ç®—å¹³å‡æ–‡æ¡£é•¿åº¦\n    let totalTerms = 0;\n    for (const vector of this.documentVectors.values()) {\n      totalTerms += vector.terms.length;\n    }\n    const averageDocumentLength = documentsCount > 0 ? totalTerms / documentsCount : 0;\n\n    // è·å–é«˜é¢‘è¯\n    const vocabulary = this.vectorizer.getVocabulary();\n    const topTerms = vocabulary\n      .map(term => ({ term, idf: this.vectorizer.getIDF(term) }))\n      .sort((a, b) => a.idf - b.idf) // IDFè¶Šå°è¡¨ç¤ºè¯é¢‘è¶Šé«˜\n      .slice(0, 10)\n      .map(t => t.term);\n\n    return {\n      vocabularySize,\n      documentsCount,\n      averageDocumentLength,\n      topTerms\n    };\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * åˆå¹¶æ–‡æœ¬å­—æ®µ\n   */\n  private combineTextFields(\n    title?: string,\n    content?: string,\n    keywords?: string[]\n  ): string {\n    const parts: string[] = [];\n    \n    if (title) {\n      // æ ‡é¢˜é‡å¤3æ¬¡ä»¥å¢åŠ æƒé‡\n      parts.push(title, title, title);\n    }\n    \n    if (content) {\n      parts.push(content);\n    }\n    \n    if (keywords && keywords.length > 0) {\n      // å…³é”®è¯é‡å¤2æ¬¡ä»¥å¢åŠ æƒé‡\n      const keywordText = keywords.join(' ');\n      parts.push(keywordText, keywordText);\n    }\n    \n    return parts.join(' ');\n  }\n\n  /**\n   * è®¡ç®—ç›¸å…³æ€§\n   */\n  private calculateRelevance(\n    simResult: SimilarityResult,\n    metadata: Record<string, any>,\n    boostFactors: { titleBoost: number; contentBoost: number; keywordBoost: number }\n  ): number {\n    let relevance = 1.0;\n\n    // æ ¹æ®åŒ¹é…è¯æ•°é‡è°ƒæ•´\n    const matchedTermsCount = simResult.matchedTerms.length;\n    if (matchedTermsCount > 0) {\n      relevance += Math.log(matchedTermsCount + 1) * 0.1;\n    }\n\n    // æ ¹æ®æ–‡æ¡£ç±»å‹è°ƒæ•´\n    if (metadata.type) {\n      switch (metadata.type) {\n        case 'article':\n          relevance *= boostFactors.contentBoost;\n          break;\n        case 'pdf':\n          relevance *= boostFactors.titleBoost;\n          break;\n        case 'tool':\n          relevance *= boostFactors.keywordBoost;\n          break;\n      }\n    }\n\n    // æ ¹æ®é‡è¦æ€§æƒé‡è°ƒæ•´\n    if (metadata.importance) {\n      relevance *= metadata.importance;\n    }\n\n    return Math.min(relevance, 3.0); // é™åˆ¶æœ€å¤§boost\n  }\n\n  /**\n   * è®¡ç®—æœ€ç»ˆè¯„åˆ†\n   */\n  private calculateFinalScore(similarity: number, relevance: number): number {\n    // ç»“åˆç›¸ä¼¼åº¦å’Œç›¸å…³æ€§\n    return similarity * relevance;\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/semantic-search/TFIDFVectorizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/spell-correction/MedicalDictionary.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/spell-correction/SpellChecker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/synonym-expansion/MedicalSynonyms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/synonym-expansion/QueryExpander.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/synonym-expansion/SynonymEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'expandedQueries' is assigned a value but never used.","line":67,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * åŒä¹‰è¯æ‰©å±•å¼•æ“\n * å®ç°æŸ¥è¯¢çš„åŒä¹‰è¯æ‰©å±•å’Œè¯­ä¹‰æ‰©å±•\n */\n\nimport { MedicalSynonyms } from './MedicalSynonyms';\nimport { QueryExpander } from './QueryExpander';\n\nexport interface SynonymExpansionResult {\n  originalQuery: string;\n  expandedQuery: string;\n  synonyms: string[]; // æ·»åŠ synonymså±æ€§ä»¥å…¼å®¹SmartSearchSystem\n  expandedTerms: Array<{\n    original: string;\n    synonyms: string[];\n    category: string;\n    confidence: number;\n  }>;\n  expansionScore: number;\n}\n\nexport interface SynonymExpansionOptions {\n  maxSynonymsPerTerm: number;\n  includeRelatedTerms: boolean;\n  contextualExpansion: boolean;\n  languageMode: 'zh' | 'en' | 'mixed';\n  medicalTermsOnly: boolean;\n  confidenceThreshold: number;\n}\n\nexport class SynonymEngine {\n  private medicalSynonyms: MedicalSynonyms;\n  private queryExpander: QueryExpander;\n\n  constructor() {\n    this.medicalSynonyms = new MedicalSynonyms();\n    this.queryExpander = new QueryExpander(this.medicalSynonyms);\n  }\n\n  /**\n   * æ‰©å±•æŸ¥è¯¢ä¸­çš„åŒä¹‰è¯\n   */\n  async expandQuery(\n    query: string,\n    options: Partial<SynonymExpansionOptions> = {}\n  ): Promise<SynonymExpansionResult> {\n    const opts: SynonymExpansionOptions = {\n      maxSynonymsPerTerm: 3,\n      includeRelatedTerms: true,\n      contextualExpansion: true,\n      languageMode: 'mixed',\n      medicalTermsOnly: false,\n      confidenceThreshold: 0.6,\n      ...options\n    };\n\n    // åˆ†è¯\n    const tokens = this.tokenizeQuery(query);\n    const expandedTerms: Array<{\n      original: string;\n      synonyms: string[];\n      category: string;\n      confidence: number;\n    }> = [];\n\n    let expansionScore = 0;\n    const expandedQueries: string[] = [query]; // åŒ…å«åŸæŸ¥è¯¢\n\n    // å¤„ç†æ¯ä¸ªè¯æ¡\n    for (const token of tokens) {\n      const synonymData = await this.expandTerm(token, opts);\n      \n      if (synonymData.synonyms.length > 0) {\n        expandedTerms.push(synonymData);\n        expansionScore += synonymData.confidence;\n      }\n    }\n\n    // ç”Ÿæˆæ‰©å±•æŸ¥è¯¢\n    const expandedQuery = this.generateExpandedQuery(query, expandedTerms, opts);\n    \n    // æ”¶é›†æ‰€æœ‰åŒä¹‰è¯ç”¨äºå…¼å®¹æ€§\n    const allSynonyms: string[] = [];\n    for (const termData of expandedTerms) {\n      allSynonyms.push(...termData.synonyms);\n    }\n\n    return {\n      originalQuery: query,\n      expandedQuery,\n      synonyms: allSynonyms, // æ·»åŠ synonymså±æ€§\n      expandedTerms,\n      expansionScore: expansionScore / Math.max(tokens.length, 1)\n    };\n  }\n\n  /**\n   * è·å–è¯æ¡çš„åŒä¹‰è¯\n   */\n  async getSynonyms(\n    term: string,\n    options: Partial<SynonymExpansionOptions> = {}\n  ): Promise<string[]> {\n    const opts: SynonymExpansionOptions = {\n      maxSynonymsPerTerm: 5,\n      includeRelatedTerms: false,\n      contextualExpansion: false,\n      languageMode: 'mixed',\n      medicalTermsOnly: false,\n      confidenceThreshold: 0.5,\n      ...options\n    };\n\n    return this.medicalSynonyms.getSynonyms(term, opts.maxSynonymsPerTerm);\n  }\n\n  /**\n   * è·å–ç›¸å…³è¯æ¡\n   */\n  async getRelatedTerms(\n    term: string,\n    context: string[] = [],\n    limit: number = 5\n  ): Promise<Array<{\n    term: string;\n    relation: string;\n    confidence: number;\n  }>> {\n    return this.medicalSynonyms.getRelatedTerms(term, context, limit);\n  }\n\n  /**\n   * æ„å»ºåŒä¹‰è¯æŸ¥è¯¢å˜ä½“\n   */\n  async buildQueryVariants(\n    query: string,\n    maxVariants: number = 5\n  ): Promise<string[]> {\n    const expansionResult = await this.expandQuery(query, {\n      maxSynonymsPerTerm: 2,\n      includeRelatedTerms: false,\n      contextualExpansion: true\n    });\n\n    return this.queryExpander.generateQueryVariants(\n      query, \n      expansionResult.expandedTerms, \n      maxVariants\n    );\n  }\n\n  // ========== ç§æœ‰æ–¹æ³• ==========\n\n  /**\n   * æ‰©å±•å•ä¸ªè¯æ¡\n   */\n  private async expandTerm(\n    term: string,\n    options: SynonymExpansionOptions\n  ): Promise<{\n    original: string;\n    synonyms: string[];\n    category: string;\n    confidence: number;\n  }> {\n    const cleanTerm = this.cleanTerm(term);\n    \n    // è·å–åŸºç¡€åŒä¹‰è¯\n    const basicSynonyms = this.medicalSynonyms.getSynonyms(\n      cleanTerm, \n      options.maxSynonymsPerTerm\n    );\n\n    // è·å–ç›¸å…³è¯æ¡\n    let relatedTerms: string[] = [];\n    if (options.includeRelatedTerms) {\n      const related = await this.getRelatedTerms(cleanTerm, [], 2);\n      relatedTerms = related\n        .filter(r => r.confidence >= options.confidenceThreshold)\n        .map(r => r.term);\n    }\n\n    // åˆå¹¶åŒä¹‰è¯å’Œç›¸å…³è¯\n    const allSynonyms = [...basicSynonyms, ...relatedTerms]\n      .slice(0, options.maxSynonymsPerTerm);\n\n    // è®¡ç®—ç½®ä¿¡åº¦\n    const confidence = this.calculateTermConfidence(cleanTerm, allSynonyms);\n\n    // è·å–è¯æ¡åˆ†ç±»\n    const category = this.medicalSynonyms.getTermCategory(cleanTerm) || 'general';\n\n    return {\n      original: cleanTerm,\n      synonyms: allSynonyms,\n      category,\n      confidence\n    };\n  }\n\n  /**\n   * ç”Ÿæˆæ‰©å±•æŸ¥è¯¢\n   */\n  private generateExpandedQuery(\n    originalQuery: string,\n    expandedTerms: Array<{\n      original: string;\n      synonyms: string[];\n      category: string;\n      confidence: number;\n    }>,\n    options: SynonymExpansionOptions\n  ): string {\n    if (expandedTerms.length === 0) {\n      return originalQuery;\n    }\n\n    // æ„å»ºæ‰©å±•æŸ¥è¯¢å­—ç¬¦ä¸²\n    let expandedQuery = originalQuery;\n    \n    // æ·»åŠ é«˜ç½®ä¿¡åº¦çš„åŒä¹‰è¯\n    const highConfidenceTerms = expandedTerms.filter(\n      term => term.confidence >= options.confidenceThreshold\n    );\n\n    for (const termData of highConfidenceTerms) {\n      if (termData.synonyms.length > 0) {\n        // æ·»åŠ æœ€ç›¸å…³çš„åŒä¹‰è¯\n        const topSynonym = termData.synonyms[0];\n        if (!expandedQuery.includes(topSynonym)) {\n          expandedQuery += ` ${topSynonym}`;\n        }\n      }\n    }\n\n    return expandedQuery;\n  }\n\n  /**\n   * è®¡ç®—è¯æ¡æ‰©å±•ç½®ä¿¡åº¦\n   */\n  private calculateTermConfidence(\n    originalTerm: string,\n    synonyms: string[]\n  ): number {\n    if (synonyms.length === 0) return 0;\n\n    // åŸºç¡€ç½®ä¿¡åº¦åŸºäºåŒä¹‰è¯æ•°é‡\n    let confidence = Math.min(synonyms.length / 3, 1.0);\n\n    // åŒ»ç–—æœ¯è¯­åŠ æƒ\n    if (this.medicalSynonyms.isMedicalTerm(originalTerm)) {\n      confidence += 0.2;\n    }\n\n    // å¸¸ç”¨è¯åŠ æƒ\n    if (this.isCommonTerm(originalTerm)) {\n      confidence += 0.1;\n    }\n\n    return Math.min(confidence, 1.0);\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦ä¸ºå¸¸ç”¨è¯\n   */\n  private isCommonTerm(term: string): boolean {\n    const commonTerms = new Set([\n      'ç—›ç»', 'ç–¼ç—›', 'ç¼“è§£', 'æ²»ç–—', 'è¯ç‰©', \n      'pain', 'relief', 'treatment', 'medicine'\n    ]);\n    return commonTerms.has(term.toLowerCase());\n  }\n\n  /**\n   * æ¸…ç†è¯æ¡\n   */\n  private cleanTerm(term: string): string {\n    return term\n      .toLowerCase()\n      .replace(/[^\\w\\u4e00-\\u9fff]/g, '')\n      .trim();\n  }\n\n  /**\n   * åˆ†è¯æŸ¥è¯¢\n   */\n  private tokenizeQuery(query: string): string[] {\n    // ç®€å•çš„åˆ†è¯å®ç°\n    return query\n      .toLowerCase()\n      .replace(/[^\\w\\s\\u4e00-\\u9fff]/g, ' ')\n      .split(/\\s+/)\n      .filter(token => token.length > 0);\n  }\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/smart-search/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1543,1546],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1543,1546],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4591,4594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4591,4594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":344,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7213,7216],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7213,7216],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ™ºèƒ½æœç´¢ç³»ç»Ÿæ ¸å¿ƒç±»å‹å®šä¹‰\n */\n\n// ========== åŸºç¡€ç±»å‹ ==========\n\nexport type SearchScope = 'articles' | 'pdfs' | 'tools' | 'guides' | 'all';\nexport type SearchMode = 'instant' | 'detailed' | 'semantic';\nexport type SearchResultType = 'article' | 'pdf' | 'tool' | 'guide';\nexport type MatchType = 'exact' | 'partial' | 'fuzzy' | 'semantic';\n\n// ========== æœç´¢é…ç½® ==========\n\nexport interface UnifiedSearchConfig {\n  // æœç´¢èŒƒå›´\n  scope: SearchScope[];\n  \n  // æœç´¢æ¨¡å¼\n  mode: SearchMode;\n  \n  // ä¸ªæ€§åŒ–è®¾ç½®\n  personalization: boolean;\n  \n  // ç»“æœé…ç½®\n  maxResults: number;\n  groupByType: boolean;\n  \n  // æ€§èƒ½é…ç½®\n  debounceMs: number;\n  enableCache: boolean;\n  cacheTimeout: number;\n  \n  // æœç´¢ç®—æ³•æƒé‡\n  weights: SearchWeights;\n}\n\nexport interface SearchWeights {\n  // åŒ¹é…ç±»å‹æƒé‡\n  exact: number;\n  partial: number;\n  fuzzy: number;\n  semantic: number;\n  \n  // å­—æ®µæƒé‡\n  title: number;\n  description: number;\n  content: number;\n  keywords: number;\n  tags: number;\n  \n  // å…¶ä»–å› ç´ æƒé‡\n  freshness: number;    // å†…å®¹æ–°é²œåº¦\n  popularity: number;   // å—æ¬¢è¿ç¨‹åº¦\n  userPreference: number; // ç”¨æˆ·åå¥½\n}\n\n// ========== æœç´¢ç»“æœ ==========\n\nexport interface SearchResult {\n  // åŸºç¡€ä¿¡æ¯\n  id: string;\n  type: SearchResultType;\n  title: string;\n  description: string;\n  url: string;\n  \n  // åŒ¹é…ä¿¡æ¯\n  score: number;\n  matchType: MatchType;\n  matchedFields: string[];\n  highlights: Highlight[];\n  \n  // å…ƒæ•°æ®\n  category?: string;\n  tags?: string[];\n  keywords?: string[];\n  lastModified?: string;\n  \n  // ä¸ªæ€§åŒ–æ•°æ®\n  userScore?: number;\n  isRecommended?: boolean;\n  viewCount?: number;\n  \n  // é¢å¤–æ•°æ®\n  metadata?: Record<string, any>;\n}\n\nexport interface Highlight {\n  field: string;\n  text: string;\n  start: number;\n  end: number;\n}\n\nexport interface SearchResponse {\n  // æœç´¢ç»“æœ\n  results: SearchResult[];\n  groupedResults?: Record<SearchResultType, SearchResult[]>;\n  \n  // æœç´¢ä¿¡æ¯\n  query: string;\n  totalResults: number;\n  searchTime: number;\n  \n  // åˆ†é¡µä¿¡æ¯\n  page: number;\n  pageSize: number;\n  hasMore: boolean;\n  \n  // å»ºè®®å’Œæ¨è\n  suggestions: string[];\n  relatedQueries: string[];\n  recommendations: SearchResult[];\n  \n  // è°ƒè¯•ä¿¡æ¯\n  debug?: SearchDebugInfo;\n}\n\nexport interface SearchDebugInfo {\n  algorithmScores: Record<string, number>;\n  processingSteps: string[];\n  cacheHit: boolean;\n  indexUsed: string[];\n}\n\n// ========== æœç´¢é€‰é¡¹ ==========\n\nexport interface SearchOptions {\n  // åŸºç¡€é€‰é¡¹\n  query: string;\n  scope?: SearchScope[];\n  mode?: SearchMode;\n  \n  // åˆ†é¡µé€‰é¡¹\n  page?: number;\n  pageSize?: number;\n  \n  // è¿‡æ»¤é€‰é¡¹\n  filters?: SearchFilters;\n  \n  // æ’åºé€‰é¡¹\n  sortBy?: SortOption;\n  sortDirection?: SortDirection;\n  \n  // é«˜çº§é€‰é¡¹\n  enableHighlight?: boolean;\n  enableRecommendations?: boolean;\n  userId?: string;\n}\n\nexport interface SearchFilters {\n  type?: SearchResultType[];\n  category?: string[];\n  tags?: string[];\n  keywords?: string[];\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n  minScore?: number;\n}\n\nexport type SortOption = 'relevance' | 'date' | 'title' | 'popularity' | 'userScore';\nexport type SortDirection = 'asc' | 'desc';\n\n// ========== æœç´¢å¼•æ“æ¥å£ ==========\n\nexport interface ISearchEngine {\n  search(options: SearchOptions): Promise<SearchResponse>;\n  suggest(query: string, limit?: number): Promise<string[]>;\n  getRecommendations(userId: string, limit?: number): Promise<SearchResult[]>;\n  buildIndex(): Promise<void>;\n  clearIndex(): Promise<void>;\n}\n\nexport interface IKeywordSearchEngine extends ISearchEngine {\n  keywordSearch(query: string, options: KeywordSearchOptions): Promise<SearchResult[]>;\n}\n\nexport interface IFuzzySearchEngine extends ISearchEngine {\n  fuzzySearch(query: string, options: FuzzySearchOptions): Promise<SearchResult[]>;\n}\n\nexport interface ISemanticSearchEngine extends ISearchEngine {\n  semanticSearch(query: string, options: SemanticSearchOptions): Promise<SearchResult[]>;\n}\n\n// ========== æœç´¢ç®—æ³•é€‰é¡¹ ==========\n\nexport interface KeywordSearchOptions {\n  fields: string[];\n  exactMatch: boolean;\n  caseSensitive: boolean;\n  stemming: boolean;\n  synonyms: boolean;\n}\n\nexport interface FuzzySearchOptions {\n  threshold: number;        // æ¨¡ç³ŠåŒ¹é…é˜ˆå€¼ (0-1)\n  maxDistance: number;      // æœ€å¤§ç¼–è¾‘è·ç¦»\n  includeMatches: boolean;  // æ˜¯å¦åŒ…å«åŒ¹é…ä¿¡æ¯\n  ignoreLocation: boolean;  // æ˜¯å¦å¿½ç•¥ä½ç½®\n}\n\nexport interface SemanticSearchOptions {\n  vectorSize: number;       // å‘é‡ç»´åº¦\n  similarity: 'cosine' | 'euclidean' | 'manhattan';\n  threshold: number;        // è¯­ä¹‰ç›¸ä¼¼åº¦é˜ˆå€¼\n  contextWindow: number;    // ä¸Šä¸‹æ–‡çª—å£å¤§å°\n}\n\n// ========== ç”¨æˆ·è¡Œä¸ºå’Œä¸ªæ€§åŒ– ==========\n\nexport interface UserBehavior {\n  userId: string;\n  action: UserAction;\n  targetId: string;\n  targetType: SearchResultType;\n  query?: string;\n  timestamp: number;\n  duration?: number;\n  metadata?: Record<string, any>;\n}\n\nexport type UserAction = 'search' | 'click' | 'view' | 'download' | 'bookmark' | 'share';\n\nexport interface UserProfile {\n  userId: string;\n  preferences: UserPreferences;\n  interests: string[];\n  searchHistory: SearchHistoryItem[];\n  behaviors: UserBehavior[];\n  lastUpdated: number;\n}\n\nexport interface UserPreferences {\n  preferredTypes: SearchResultType[];\n  preferredCategories: string[];\n  searchMode: SearchMode;\n  resultsPerPage: number;\n  sortPreference: SortOption;\n}\n\nexport interface SearchHistoryItem {\n  query: string;\n  timestamp: number;\n  resultsCount: number;\n  clickedResults: string[];\n}\n\n// ========== æ¨èç³»ç»Ÿ ==========\n\nexport interface Recommendation {\n  item: SearchResult;\n  reason: RecommendationReason;\n  confidence: number;\n  source: RecommendationSource;\n}\n\nexport type RecommendationReason = \n  | 'similar_content'     // ç›¸ä¼¼å†…å®¹\n  | 'user_interest'       // ç”¨æˆ·å…´è¶£\n  | 'popular_content'     // çƒ­é—¨å†…å®¹\n  | 'recent_activity'     // æœ€è¿‘æ´»åŠ¨\n  | 'collaborative_filtering'; // ååŒè¿‡æ»¤\n\nexport type RecommendationSource = 'behavior' | 'content' | 'collaborative' | 'popularity';\n\n// ========== æœç´¢æ„å›¾è¯†åˆ« ==========\n\nexport interface SearchIntent {\n  type: IntentType;\n  confidence: number;\n  entities: IntentEntity[];\n  context: IntentContext;\n}\n\nexport type IntentType = \n  | 'informational'       // ä¿¡æ¯æŸ¥è¯¢\n  | 'navigational'        // å¯¼èˆªæŸ¥è¯¢\n  | 'transactional'       // äº¤æ˜“æŸ¥è¯¢\n  | 'comparison'          // æ¯”è¾ƒæŸ¥è¯¢\n  | 'troubleshooting';    // é—®é¢˜è§£å†³\n\nexport interface IntentEntity {\n  text: string;\n  type: string;\n  confidence: number;\n  position: [number, number];\n}\n\nexport interface IntentContext {\n  domain: string;\n  urgency: 'low' | 'medium' | 'high';\n  complexity: 'simple' | 'moderate' | 'complex';\n  userType: 'beginner' | 'intermediate' | 'expert';\n}\n\n// ========== æœç´¢åˆ†æå’Œç›‘æ§ ==========\n\nexport interface SearchAnalytics {\n  // æœç´¢ç»Ÿè®¡\n  totalSearches: number;\n  uniqueQueries: number;\n  averageResultsPerQuery: number;\n  \n  // æ€§èƒ½æŒ‡æ ‡\n  averageResponseTime: number;\n  cacheHitRate: number;\n  \n  // ç”¨æˆ·è¡Œä¸º\n  clickThroughRate: number;\n  searchSuccessRate: number;\n  averageSessionDuration: number;\n  \n  // çƒ­é—¨å†…å®¹\n  topQueries: QueryStats[];\n  topResults: ResultStats[];\n  \n  // æ—¶é—´èŒƒå›´\n  startDate: string;\n  endDate: string;\n}\n\nexport interface QueryStats {\n  query: string;\n  count: number;\n  averageResults: number;\n  clickThroughRate: number;\n}\n\nexport interface ResultStats {\n  resultId: string;\n  title: string;\n  viewCount: number;\n  clickRate: number;\n  averagePosition: number;\n}\n\n// ========== é”™è¯¯å¤„ç† ==========\n\nexport interface SearchError extends Error {\n  code: SearchErrorCode;\n  details?: Record<string, any>;\n}\n\nexport type SearchErrorCode = \n  | 'INVALID_QUERY'\n  | 'INDEX_NOT_READY'\n  | 'SEARCH_TIMEOUT'\n  | 'INSUFFICIENT_RESULTS'\n  | 'USER_NOT_FOUND'\n  | 'CONFIGURATION_ERROR';\n\n// ========== å¯¼å‡ºæ‰€æœ‰ç±»å‹ ==========\n\n// å…¶ä»–ç±»å‹æ–‡ä»¶å°†åœ¨åç»­æ·»åŠ \n// export * from './engines';\n// export * from './providers';  \n// export * from './utils'; ","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/stores/appStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[917,920],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[917,920],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1686,1689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1686,1689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":326,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":326,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":334,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":334,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { create } from 'zustand';\nimport { persist, createJSONStorage, devtools } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\n\n// åº”ç”¨ä¸»é¢˜ç±»å‹\nexport type Theme = 'light' | 'dark' | 'system';\n\n// ç”¨æˆ·åå¥½è®¾ç½®\nexport interface UserPreferences {\n  theme: Theme;\n  language: 'zh' | 'en';\n  fontSize: 'small' | 'medium' | 'large';\n  animations: boolean;\n  notifications: {\n    browser: boolean;\n    email: boolean;\n    sms: boolean;\n  };\n  privacy: {\n    analytics: boolean;\n    cookies: boolean;\n    dataSharing: boolean;\n  };\n  accessibility: {\n    highContrast: boolean;\n    reducedMotion: boolean;\n    screenReader: boolean;\n  };\n}\n\n// åº”ç”¨çŠ¶æ€\nexport interface AppState {\n  // ç”¨æˆ·åå¥½\n  preferences: UserPreferences;\n  \n  // UIçŠ¶æ€\n  ui: {\n    sidebarOpen: boolean;\n    loading: boolean;\n    error: string | null;\n    modal: {\n      isOpen: boolean;\n      type: string | null;\n      data: any;\n    };\n    toast: {\n      id: string;\n      type: 'success' | 'error' | 'warning' | 'info';\n      message: string;\n      duration?: number;\n    }[];\n  };\n  \n  // åº”ç”¨æ•°æ®\n  data: {\n    lastSync: string | null;\n    version: string;\n    buildTime: string;\n  };\n  \n  // æ€§èƒ½ç›‘æ§\n  performance: {\n    pageLoadTime: number;\n    apiResponseTimes: Record<string, number>;\n    errorCount: number;\n  };\n}\n\n// Actionsæ¥å£\nexport interface AppActions {\n  // åå¥½è®¾ç½®\n  updatePreferences: (preferences: Partial<UserPreferences>) => void;\n  resetPreferences: () => void;\n  \n  // UIæ§åˆ¶\n  setSidebarOpen: (open: boolean) => void;\n  toggleSidebar: () => void;\n  setLoading: (loading: boolean) => void;\n  setError: (error: string | null) => void;\n  \n  // æ¨¡æ€æ¡†æ§åˆ¶\n  openModal: (type: string, data?: any) => void;\n  closeModal: () => void;\n  \n  // Toasté€šçŸ¥\n  addToast: (toast: Omit<AppState['ui']['toast'][0], 'id'>) => string;\n  removeToast: (id: string) => void;\n  clearToasts: () => void;\n  \n  // æ•°æ®åŒæ­¥\n  updateLastSync: () => void;\n  \n  // æ€§èƒ½ç›‘æ§\n  recordPageLoadTime: (time: number) => void;\n  recordApiResponseTime: (endpoint: string, time: number) => void;\n  incrementErrorCount: () => void;\n  resetPerformanceMetrics: () => void;\n  \n  // é”™è¯¯è®°å½•\n  recordError: (error: {\n    message: string;\n    stack?: string | null;\n    componentStack?: string | null;\n    level?: 'low' | 'medium' | 'high' | 'critical';\n    timestamp: string;\n  }) => void;\n  \n  // æ¨¡æ€æ¡†æ“ä½œè®°å½•\n  recordModalAction: (action: {\n    action: 'open' | 'close';\n    modalId?: string;\n    modalType?: string;\n    timestamp: string;\n  }) => void;\n  \n  // Toastæ“ä½œè®°å½•\n  recordToastAction: (action: {\n    action: 'add' | 'remove' | 'clear';\n    toastId?: string;\n    toastType?: string;\n    timestamp: string;\n  }) => void;\n}\n\n// é»˜è®¤åå¥½è®¾ç½®\nconst defaultPreferences: UserPreferences = {\n  theme: 'system',\n  language: 'zh',\n  fontSize: 'medium',\n  animations: true,\n  notifications: {\n    browser: true,\n    email: false,\n    sms: false,\n  },\n  privacy: {\n    analytics: true,\n    cookies: true,\n    dataSharing: false,\n  },\n  accessibility: {\n    highContrast: false,\n    reducedMotion: false,\n    screenReader: false,\n  },\n};\n\n// é»˜è®¤åº”ç”¨çŠ¶æ€\nconst defaultState: AppState = {\n  preferences: defaultPreferences,\n  ui: {\n    sidebarOpen: false,\n    loading: false,\n    error: null,\n    modal: {\n      isOpen: false,\n      type: null,\n      data: null,\n    },\n    toast: [],\n  },\n  data: {\n    lastSync: null,\n    version: '1.0.0',\n    buildTime: new Date().toISOString(),\n  },\n  performance: {\n    pageLoadTime: 0,\n    apiResponseTimes: {},\n    errorCount: 0,\n  },\n};\n\n// ç”Ÿæˆå”¯ä¸€ID\nconst generateId = () => `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n// åˆ›å»ºåº”ç”¨Store\nexport const useAppStore = create<AppState & AppActions>()(\n  devtools(\n    persist(\n      immer((set, get) => ({\n        ...defaultState,\n        \n        // åå¥½è®¾ç½®Actions\n        updatePreferences: (newPreferences) => {\n          set((state) => {\n            Object.assign(state.preferences, newPreferences);\n          });\n        },\n        \n        resetPreferences: () => {\n          set((state) => {\n            state.preferences = defaultPreferences;\n          });\n        },\n        \n        // UIæ§åˆ¶Actions\n        setSidebarOpen: (open) => {\n          set((state) => {\n            state.ui.sidebarOpen = open;\n          });\n        },\n        \n        toggleSidebar: () => {\n          set((state) => {\n            state.ui.sidebarOpen = !state.ui.sidebarOpen;\n          });\n        },\n        \n        setLoading: (loading) => {\n          set((state) => {\n            state.ui.loading = loading;\n          });\n        },\n        \n        setError: (error) => {\n          set((state) => {\n            state.ui.error = error;\n          });\n        },\n        \n        // æ¨¡æ€æ¡†æ§åˆ¶Actions\n        openModal: (type, data = null) => {\n          set((state) => {\n            state.ui.modal = {\n              isOpen: true,\n              type,\n              data,\n            };\n          });\n        },\n        \n        closeModal: () => {\n          set((state) => {\n            state.ui.modal = {\n              isOpen: false,\n              type: null,\n              data: null,\n            };\n          });\n        },\n        \n        // Toasté€šçŸ¥Actions\n        addToast: (toast) => {\n          const id = generateId();\n          set((state) => {\n            state.ui.toast.push({ ...toast, id });\n          });\n          \n          // è‡ªåŠ¨ç§»é™¤Toast\n          if (toast.duration !== 0) {\n            setTimeout(() => {\n              get().removeToast(id);\n            }, toast.duration || 5000);\n          }\n          \n          return id;\n        },\n        \n        removeToast: (id) => {\n          set((state) => {\n            state.ui.toast = state.ui.toast.filter(t => t.id !== id);\n          });\n        },\n        \n        clearToasts: () => {\n          set((state) => {\n            state.ui.toast = [];\n          });\n        },\n        \n        // æ•°æ®åŒæ­¥Actions\n        updateLastSync: () => {\n          set((state) => {\n            state.data.lastSync = new Date().toISOString();\n          });\n        },\n        \n        // æ€§èƒ½ç›‘æ§Actions\n        recordPageLoadTime: (time) => {\n          set((state) => {\n            state.performance.pageLoadTime = time;\n          });\n        },\n        \n        recordApiResponseTime: (endpoint, time) => {\n          set((state) => {\n            state.performance.apiResponseTimes[endpoint] = time;\n          });\n        },\n        \n        incrementErrorCount: () => {\n          set((state) => {\n            state.performance.errorCount += 1;\n          });\n        },\n        \n        resetPerformanceMetrics: () => {\n          set((state) => {\n            state.performance = {\n              pageLoadTime: 0,\n              apiResponseTimes: {},\n              errorCount: 0,\n            };\n          });\n        },\n        \n        // é”™è¯¯è®°å½•\n        recordError: (error) => {\n          set((state) => {\n            // å¢åŠ é”™è¯¯è®¡æ•°\n            state.performance.errorCount += 1;\n            \n            // è®°å½•é”™è¯¯åˆ°UIçŠ¶æ€\n            state.ui.error = error.message;\n            \n            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•\n            console.error('App Error Recorded:', error);\n          });\n        },\n        \n        // æ¨¡æ€æ¡†æ“ä½œè®°å½•\n        recordModalAction: (action) => {\n          set((state) => {\n            // è®°å½•æ¨¡æ€æ¡†æ“ä½œåˆ°æ€§èƒ½ç›‘æ§\n            console.log('Modal Action Recorded:', action);\n          });\n        },\n        \n        // Toastæ“ä½œè®°å½•\n        recordToastAction: (action) => {\n          set((state) => {\n            // è®°å½•Toastæ“ä½œåˆ°æ€§èƒ½ç›‘æ§\n            console.log('Toast Action Recorded:', action);\n          });\n        },\n      })),\n      {\n        name: 'periodhub-app-store',\n        storage: createJSONStorage(() => localStorage),\n        partialize: (state) => ({\n          preferences: state.preferences,\n          data: {\n            lastSync: state.data.lastSync,\n            version: state.data.version,\n          },\n        }),\n      }\n    ),\n    {\n      name: 'PeriodHub App Store',\n    }\n  )\n);\n\n// é€‰æ‹©å™¨Hooks\nexport const useAppPreferences = () => useAppStore((state) => state.preferences);\nexport const useAppUI = () => useAppStore((state) => state.ui);\nexport const useAppData = () => useAppStore((state) => state.data);\nexport const useAppPerformance = () => useAppStore((state) => state.performance);\n\n// ä¾¿æ·Hooks\nexport const useTheme = () => useAppStore((state) => state.preferences.theme);\nexport const useLanguage = () => useAppStore((state) => state.preferences.language);\nexport const useLoading = () => useAppStore((state) => state.ui.loading);\nexport const useError = () => useAppStore((state) => state.ui.error);\nexport const useToasts = () => useAppStore((state) => state.ui.toast);\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/translation-utils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[317,320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[317,320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fullKey' is assigned a value but never used.","line":44,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":16}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘å·¥å…·å‡½æ•°\n * æä¾›å®‰å…¨çš„ç¿»è¯‘åŠŸèƒ½å’Œfallbackæœºåˆ¶\n */\n\nimport { useTranslations, useLocale } from 'next-intl';\n\n/**\n * å®‰å…¨çš„ç¿»è¯‘Hookï¼Œæä¾›fallbackæœºåˆ¶\n */\nexport function useSafeTranslations(namespace?: string) {\n  const t = useTranslations(namespace);\n  const locale = useLocale();\n\n  const safeT = (key: string, params?: Record<string, any>, fallback?: string): string => {\n    try {\n      const result = t(key, params);\n      \n      // æ£€æŸ¥æ˜¯å¦è¿”å›äº†ç¿»è¯‘é”®æœ¬èº«ï¼ˆè¡¨ç¤ºç¿»è¯‘å¤±è´¥ï¼‰\n      if (result === key || result.includes(key)) {\n        console.warn(`Translation missing for key: ${namespace ? `${namespace}.` : ''}${key}`);\n        return fallback || key;\n      }\n      \n      return result;\n    } catch (error) {\n      console.error(`Translation error for key: ${namespace ? `${namespace}.` : ''}${key}`, error);\n      return fallback || key;\n    }\n  };\n\n  return {\n    t: safeT,\n    locale,\n    isZh: locale === 'zh',\n    isEn: locale === 'en'\n  };\n}\n\n/**\n * ç¿»è¯‘é”®éªŒè¯å‡½æ•°\n */\nexport function validateTranslationKey(key: string, namespace?: string): boolean {\n  const fullKey = namespace ? `${namespace}.${key}` : key;\n  \n  // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤æ‚çš„éªŒè¯é€»è¾‘\n  // æ¯”å¦‚æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨äºç¿»è¯‘æ–‡ä»¶ä¸­\n  \n  return typeof key === 'string' && key.length > 0;\n}\n\n/**\n * è·å–ç¿»è¯‘é”®çš„å®Œæ•´è·¯å¾„\n */\nexport function getFullTranslationKey(key: string, namespace?: string): string {\n  return namespace ? `${namespace}.${key}` : key;\n}\n\n/**\n * ç¿»è¯‘æ•°ç»„å¤„ç†å‡½æ•°\n */\nexport function translateArray(\n  t: (key: string) => string,\n  keys: string[],\n  fallbacks?: string[]\n): string[] {\n  return keys.map((key, index) => {\n    const result = t(key);\n    \n    // å¦‚æœç¿»è¯‘å¤±è´¥ï¼Œä½¿ç”¨fallback\n    if (result === key && fallbacks && fallbacks[index]) {\n      return fallbacks[index];\n    }\n    \n    return result;\n  });\n}\n\n/**\n * æ¡ä»¶ç¿»è¯‘å‡½æ•°\n * æ ¹æ®æ¡ä»¶é€‰æ‹©ä¸åŒçš„ç¿»è¯‘é”®\n */\nexport function conditionalTranslation(\n  t: (key: string) => string,\n  condition: boolean,\n  trueKey: string,\n  falseKey: string,\n  fallback?: string\n): string {\n  const key = condition ? trueKey : falseKey;\n  const result = t(key);\n  \n  if (result === key && fallback) {\n    return fallback;\n  }\n  \n  return result;\n}\n\n/**\n * ç¿»è¯‘å¯¹è±¡å¤„ç†å‡½æ•°\n */\nexport function translateObject<T extends Record<string, string>>(\n  t: (key: string) => string,\n  keyMap: T,\n  fallbacks?: Partial<T>\n): Record<keyof T, string> {\n  const result: Record<keyof T, string> = {} as Record<keyof T, string>;\n  \n  for (const [objectKey, translationKey] of Object.entries(keyMap)) {\n    const translated = t(translationKey);\n    \n    // å¦‚æœç¿»è¯‘å¤±è´¥ï¼Œä½¿ç”¨fallback\n    if (translated === translationKey && fallbacks && fallbacks[objectKey as keyof T]) {\n      result[objectKey as keyof T] = fallbacks[objectKey as keyof T]!;\n    } else {\n      result[objectKey as keyof T] = translated;\n    }\n  }\n  \n  return result;\n}\n\n/**\n * å¼€å‘ç¯å¢ƒç¿»è¯‘è°ƒè¯•å‡½æ•°\n */\nexport function debugTranslation(key: string, value: string, namespace?: string) {\n  if (process.env.NODE_ENV === 'development') {\n    const fullKey = namespace ? `${namespace}.${key}` : key;\n    console.log(`ğŸŒ Translation: ${fullKey} = \"${value}\"`);\n  }\n}\n\n/**\n * ç¿»è¯‘ç¼“å­˜ç®¡ç†\n */\nclass TranslationCache {\n  private cache = new Map<string, string>();\n  \n  get(key: string): string | undefined {\n    return this.cache.get(key);\n  }\n  \n  set(key: string, value: string): void {\n    this.cache.set(key, value);\n  }\n  \n  clear(): void {\n    this.cache.clear();\n  }\n  \n  size(): number {\n    return this.cache.size;\n  }\n}\n\nexport const translationCache = new TranslationCache();\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/url-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/types/common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/types/pain-tracker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6451,6454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6451,6454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6459,6462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6459,6462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6479,6482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6479,6482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6487,6490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6487,6490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":295,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":295,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6511,6514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6511,6514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":349,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":349,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8842,8845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8842,8845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":350,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8892,8895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8892,8895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":365,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":365,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9333,9336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9333,9336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":503,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":503,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12652,12655],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12652,12655],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Enhanced Pain Tracker Type Definitions\n// This file contains all TypeScript interfaces and types for the enhanced pain tracking system\n\n// Core Data Models\nexport interface PainRecord {\n  id: string;\n  date: string;\n  time: string;\n  painLevel: number; // 0-10\n  painTypes: PainType[];\n  locations: PainLocation[];\n  symptoms: Symptom[];\n  menstrualStatus: MenstrualStatus;\n  medications: Medication[];\n  effectiveness: EffectivenessRating;\n  lifestyleFactors: LifestyleFactor[];\n  notes?: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// Pain Type Enumeration\nexport type PainType = \n  | 'cramping'\n  | 'aching' \n  | 'sharp'\n  | 'throbbing'\n  | 'burning'\n  | 'pressure';\n\n// Pain Location Enumeration\nexport type PainLocation = \n  | 'lower_abdomen'\n  | 'lower_back'\n  | 'upper_thighs'\n  | 'pelvis'\n  | 'side'\n  | 'whole_abdomen';\n\n// Symptom Enumeration\nexport type Symptom = \n  | 'nausea'\n  | 'vomiting'\n  | 'diarrhea'\n  | 'headache'\n  | 'fatigue'\n  | 'mood_changes'\n  | 'bloating'\n  | 'breast_tenderness';\n\n// Menstrual Status Enumeration\nexport type MenstrualStatus = \n  | 'before_period'\n  | 'day_1'\n  | 'day_2_3'\n  | 'day_4_plus'\n  | 'after_period'\n  | 'mid_cycle'\n  | 'irregular';\n\n// Medication Interface\nexport interface Medication {\n  name: string;\n  dosage?: string;\n  timing: string; // e.g., \"before pain\", \"during pain\", \"preventive\"\n}\n\n// Effectiveness Rating (0-10 scale)\nexport type EffectivenessRating = number;\n\n// Lifestyle Factors Interface\nexport interface LifestyleFactor {\n  factor: LifestyleFactorType;\n  value: string | number | boolean;\n}\n\nexport type LifestyleFactorType = \n  | 'stress_level'    // 1-10\n  | 'sleep_hours'     // number\n  | 'diet_quality'    // 1-10\n  | 'caffeine_intake' // boolean or amount\n  | 'alcohol_intake'  // boolean or amount\n  | 'activity_level'  // 1-10\n  | 'hydration';      // 1-10\n\n// Analytics Data Models\nexport interface PainAnalytics {\n  averagePainLevel: number;\n  totalRecords: number;\n  commonPainTypes: PainTypeFrequency[];\n  effectiveTreatments: TreatmentEffectiveness[];\n  cyclePatterns: CyclePattern[];\n  trendData: TrendPoint[];\n  insights: string[];\n  dateRange: {\n    start: Date;\n    end: Date;\n  };\n}\n\nexport interface PainTypeFrequency {\n  type: PainType;\n  count: number;\n  percentage: number;\n}\n\nexport interface TreatmentEffectiveness {\n  treatment: string;\n  averageEffectiveness: number;\n  usageCount: number;\n  successRate: number; // percentage of times effectiveness >= 7\n}\n\nexport interface CyclePattern {\n  phase: MenstrualStatus;\n  averagePainLevel: number;\n  commonSymptoms: Symptom[];\n  frequency: number; // how often this phase appears in records\n}\n\nexport interface TrendPoint {\n  date: string;\n  painLevel: number;\n  menstrualPhase?: MenstrualStatus;\n}\n\n// Pattern Recognition\nexport interface Pattern {\n  type: PatternType;\n  description: string;\n  confidence: number; // 0-1\n  recommendations: string[];\n}\n\nexport type PatternType = \n  | 'menstrual_cycle'\n  | 'treatment_response'\n  | 'lifestyle_correlation'\n  | 'seasonal_pattern'\n  | 'trigger_identification';\n\n// Export Data Models\nexport interface ExportOptions {\n  format: ExportFormat;\n  dateRange: DateRange;\n  includeCharts: boolean;\n  includeSummary: boolean;\n  includeInsights: boolean;\n  includeRawData: boolean;\n}\n\nexport type ExportFormat = 'html' | 'pdf';\n\nexport interface DateRange {\n  start: Date;\n  end: Date;\n}\n\nexport interface MedicalSummary {\n  patientSummary: string;\n  painCharacteristics: {\n    averageLevel: number;\n    levelDescription: string;\n    commonTypes: PainTypeFrequency[];\n    frequencyDistribution: Record<string, number>;\n  };\n  treatmentHistory: {\n    totalTreatments: number;\n    mostEffective: TreatmentEffectiveness[];\n    averageEffectiveness: number;\n  };\n  menstrualPatterns: {\n    identifiedPatterns: number;\n    highestPainPhase: CyclePattern | null;\n    phaseAnalysis: {\n      phase: MenstrualStatus;\n      averagePain: number;\n      frequency: number;\n      commonSymptoms: Symptom[];\n    }[];\n  };\n  identifiedPatterns: {\n    type: PatternType;\n    description: string;\n    confidence: number;\n    recommendations: string[];\n  }[];\n  clinicalInsights: string[];\n  recommendations: {\n    category: string;\n    description: string;\n    priority: 'high' | 'medium' | 'low';\n    timeframe: string;\n  }[];\n  reportMetadata: {\n    generatedDate: Date;\n    dateRange: DateRange;\n    totalRecords: number;\n    reportVersion: string;\n  };\n}\n\n// Storage and Migration Models\nexport interface StoredData {\n  records: PainRecord[];\n  preferences: UserPreferences;\n  schemaVersion: number;\n  lastBackup?: Date;\n  metadata: StorageMetadata;\n}\n\nexport interface UserPreferences {\n  defaultMedications: string[];\n  reminderSettings: ReminderSettings;\n  exportPreferences: ExportPreferences;\n  privacySettings: PrivacySettings;\n  displaySettings: DisplaySettings;\n}\n\nexport interface ReminderSettings {\n  enabled: boolean;\n  frequency: 'daily' | 'weekly' | 'monthly';\n  time: string; // HH:mm format\n  customMessage?: string;\n}\n\nexport interface ExportPreferences {\n  defaultFormat: ExportFormat;\n  includeChartsDefault: boolean;\n  includeSummaryDefault: boolean;\n  defaultDateRange: 'last_month' | 'last_3_months' | 'last_6_months' | 'all_time';\n}\n\nexport interface PrivacySettings {\n  allowAnalytics: boolean;\n  allowExport: boolean;\n  dataRetentionMonths: number;\n  requireConfirmationForDelete: boolean;\n}\n\nexport interface DisplaySettings {\n  theme: 'light' | 'dark' | 'auto';\n  language: 'en' | 'zh';\n  dateFormat: 'MM/DD/YYYY' | 'DD/MM/YYYY' | 'YYYY-MM-DD';\n  timeFormat: '12h' | '24h';\n}\n\nexport interface StorageMetadata {\n  createdAt: Date;\n  lastModified: Date;\n  version: string;\n  recordCount: number;\n  dataSize: number; // in bytes\n}\n\n// Validation Models\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ValidationError[];\n  warnings: ValidationWarning[];\n}\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n  code: ValidationErrorCode;\n}\n\nexport interface ValidationWarning {\n  field: string;\n  message: string;\n  suggestion?: string;\n}\n\nexport type ValidationErrorCode = \n  | 'REQUIRED_FIELD'\n  | 'INVALID_FORMAT'\n  | 'OUT_OF_RANGE'\n  | 'INVALID_DATE'\n  | 'DUPLICATE_ENTRY'\n  | 'DATA_CORRUPTION';\n\n// Migration Models\nexport interface MigrationPlan {\n  fromVersion: number;\n  toVersion: number;\n  migrations: Migration[];\n}\n\nexport interface Migration {\n  version: number;\n  description: string;\n  up: (data: any) => any;\n  down: (data: any) => any;\n  validate: (data: any) => boolean;\n}\n\n// Service Interface Types\nexport interface PainDataManagerInterface {\n  saveRecord(record: Omit<PainRecord, 'id' | 'createdAt' | 'updatedAt'>): Promise<PainRecord>;\n  updateRecord(id: string, updates: Partial<PainRecord>): Promise<PainRecord>;\n  deleteRecord(id: string): Promise<void>;\n  getRecord(id: string): Promise<PainRecord | null>;\n  getAllRecords(): Promise<PainRecord[]>;\n  getRecordsByDateRange(start: Date, end: Date): Promise<PainRecord[]>;\n  getRecordsByPainLevel(minLevel: number, maxLevel?: number): Promise<PainRecord[]>;\n  getRecordsByMenstrualStatus(status: MenstrualStatus): Promise<PainRecord[]>;\n  searchRecords(query: string): Promise<PainRecord[]>;\n  exportData(): Promise<StoredData>;\n  importData(data: StoredData): Promise<void>;\n  clearAllData(): Promise<void>;\n}\n\nexport interface AnalyticsEngineInterface {\n  calculateAnalytics(records: PainRecord[]): PainAnalytics;\n  identifyPatterns(records: PainRecord[]): Pattern[];\n  generateInsights(analytics: PainAnalytics): string[];\n  predictTrends(records: PainRecord[]): TrendPoint[];\n  calculateCorrelations(records: PainRecord[]): CorrelationResult[];\n}\n\nexport interface CorrelationResult {\n  factor1: string;\n  factor2: string;\n  correlation: number; // -1 to 1\n  significance: number; // 0 to 1\n  description: string;\n}\n\nexport interface ExportManagerInterface {\n  exportToHTML(records: PainRecord[], analytics: PainAnalytics, options: ExportOptions): Promise<string>;\n  exportToPDF(records: PainRecord[], analytics: PainAnalytics, options: ExportOptions): Promise<Blob>;\n  generateMedicalSummary(records: PainRecord[], analytics: PainAnalytics): MedicalSummary;\n  generateReportHTML(records: PainRecord[], analytics: PainAnalytics, options: ExportOptions): string;\n  validateExportData(records: PainRecord[]): ValidationResult;\n}\n\nexport interface ValidationServiceInterface {\n  validateRecord(record: Partial<PainRecord>): ValidationResult;\n  validatePainLevel(level: number): boolean;\n  validateDate(date: string): boolean;\n  validateTime(time: string): boolean;\n  validateMedication(medication: Medication): ValidationResult;\n  sanitizeInput(input: string): string;\n  checkForDuplicates(record: PainRecord, existingRecords: PainRecord[]): boolean;\n}\n\nexport interface LocalStorageAdapterInterface {\n  save(key: string, data: any): Promise<void>;\n  load(key: string): Promise<any>;\n  remove(key: string): Promise<void>;\n  clear(): Promise<void>;\n  exists(key: string): Promise<boolean>;\n  getSize(): Promise<number>;\n  getQuotaUsage(): Promise<{ used: number; available: number }>;\n  backup(): Promise<string>;\n  restore(backupData: string): Promise<void>;\n}\n\n// Error Types\nexport class PainTrackerError extends Error {\n  constructor(\n    message: string,\n    public code: PainTrackerErrorCode,\n    public details?: any\n  ) {\n    super(message);\n    this.name = 'PainTrackerError';\n  }\n}\n\nexport type PainTrackerErrorCode = \n  | 'STORAGE_ERROR'\n  | 'VALIDATION_ERROR'\n  | 'EXPORT_ERROR'\n  | 'CHART_ERROR'\n  | 'MIGRATION_ERROR'\n  | 'QUOTA_EXCEEDED'\n  | 'DATA_CORRUPTION'\n  | 'NETWORK_ERROR';\n\n// Constants\nexport const STORAGE_KEYS = {\n  PAIN_RECORDS: 'enhanced_pain_tracker_records',\n  USER_PREFERENCES: 'enhanced_pain_tracker_preferences',\n  SCHEMA_VERSION: 'enhanced_pain_tracker_schema_version',\n  METADATA: 'enhanced_pain_tracker_metadata'\n} as const;\n\nexport const CURRENT_SCHEMA_VERSION = 1;\n\nexport const VALIDATION_RULES = {\n  painLevel: {\n    min: 0,\n    max: 10,\n    required: true\n  },\n  date: {\n    required: true,\n    maxDate: () => new Date(),\n    minDate: () => new Date('2020-01-01')\n  },\n  time: {\n    required: true,\n    format: /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/\n  },\n  painTypes: {\n    minSelection: 0,\n    maxSelection: 6,\n    validOptions: ['cramping', 'aching', 'sharp', 'throbbing', 'burning', 'pressure'] as PainType[]\n  },\n  locations: {\n    minSelection: 0,\n    maxSelection: 6,\n    validOptions: ['lower_abdomen', 'lower_back', 'upper_thighs', 'pelvis', 'side', 'whole_abdomen'] as PainLocation[]\n  },\n  symptoms: {\n    minSelection: 0,\n    maxSelection: 8,\n    validOptions: ['nausea', 'vomiting', 'diarrhea', 'headache', 'fatigue', 'mood_changes', 'bloating', 'breast_tenderness'] as Symptom[]\n  },\n  notes: {\n    maxLength: 1000\n  },\n  medicationName: {\n    maxLength: 100,\n    required: true\n  },\n  medicationDosage: {\n    maxLength: 50\n  }\n} as const;\n\n// Default Values\nexport const DEFAULT_USER_PREFERENCES: UserPreferences = {\n  defaultMedications: [],\n  reminderSettings: {\n    enabled: false,\n    frequency: 'daily',\n    time: '20:00'\n  },\n  exportPreferences: {\n    defaultFormat: 'pdf',\n    includeChartsDefault: true,\n    includeSummaryDefault: true,\n    defaultDateRange: 'last_3_months'\n  },\n  privacySettings: {\n    allowAnalytics: true,\n    allowExport: true,\n    dataRetentionMonths: 24,\n    requireConfirmationForDelete: true\n  },\n  displaySettings: {\n    theme: 'auto',\n    language: 'en',\n    dateFormat: 'MM/DD/YYYY',\n    timeFormat: '12h'\n  }\n};\n\nexport const DEFAULT_EXPORT_OPTIONS: ExportOptions = {\n  format: 'pdf',\n  dateRange: {\n    start: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000), // 3 months ago\n    end: new Date()\n  },\n  includeCharts: true,\n  includeSummary: true,\n  includeInsights: true,\n  includeRawData: false\n};\n\n// Data Integrity Types\nexport interface DataIntegrityReport {\n  isValid: boolean;\n  corruptedRecords: string[];\n  missingFields: string[];\n  invalidData: string[];\n  recoveryOptions: RecoveryOption[];\n  backupAvailable: boolean;\n  lastValidBackup?: Date;\n  totalRecords: number;\n  validRecords: number;\n  corruptionLevel: 'none' | 'minor' | 'moderate' | 'severe';\n}\n\nexport interface RecoveryOption {\n  type: 'repair' | 'restore' | 'partial_recovery' | 'fresh_start';\n  description: string;\n  riskLevel: 'low' | 'medium' | 'high';\n  dataLoss: boolean;\n  estimatedRecovery: number; // percentage of data that can be recovered\n  action: () => Promise<boolean>;\n}\n\n// Performance Optimization Types\nexport interface PaginationOptions {\n  page?: number;\n  pageSize?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n  filters?: Record<string, any>;\n  preload?: boolean;\n}\n\nexport interface LazyLoadResult<T> {\n  data: T[];\n  pagination: {\n    currentPage: number;\n    pageSize: number;\n    totalItems: number;\n    totalPages: number;\n    hasNextPage: boolean;\n    hasPreviousPage: boolean;\n  };\n  fromCache: boolean;\n}\n\nexport interface CompressionResult {\n  compressedData: string;\n  originalSize: number;\n  compressedSize: number;\n  compressionRatio: number;\n  compressionTime: number;\n  algorithm: string;\n}\n\nexport interface CleanupOptions {\n  maxRecords?: number;\n  maxAgeMonths?: number;\n  removeDuplicates?: boolean;\n  removeIncompleteRecords?: boolean;\n  archiveOldRecords?: boolean;\n  compactStorage?: boolean;\n}\n\nexport interface CleanupResult {\n  recordsRemoved: number;\n  spaceSaved: number;\n  operations: string[];\n  cleanupTime: number;\n  initialRecordCount: number;\n  finalRecordCount: number;\n  initialStorageSize: number;\n  finalStorageSize: number;\n}\n\nexport interface ArchiveOptions {\n  maxAgeMonths: number;\n  compressionEnabled?: boolean;\n  includeMetadata?: boolean;\n}\n\nexport interface ChartOptimizationOptions {\n  maxPoints?: number;\n  samplingMethod?: 'uniform' | 'adaptive' | 'importance';\n  preserveImportantPoints?: boolean;\n  preload?: boolean;\n}\n\nexport interface ChartPerformanceMetrics {\n  renderTime: number;\n  memoryUsed: number;\n  timestamp: Date;\n}\n\nexport interface MemoryUsageInfo {\n  usedJSHeapSize: number;\n  totalJSHeapSize: number;\n  jsHeapSizeLimit: number;\n  timestamp: Date;\n  isEstimated: boolean;\n}\n\nexport interface MemoryThresholds {\n  warning: number;\n  critical: number;\n  maxCacheSize: number;\n  maxChartInstances: number;\n}\n\nexport interface MemoryOptimizationResult {\n  memorySaved: number;\n  operations: string[];\n  startMemory: number;\n  endMemory: number;\n  optimizationTime: number;\n}\n\nexport interface StorageQuotaInfo {\n  used: number;\n  quota: number;\n  available: number;\n  usagePercentage: number;\n  painTrackerUsage: number;\n  timestamp: Date;\n  isEstimated: boolean;\n}\n\nexport interface StorageQuotaThresholds {\n  warning: number; // percentage (0-1)\n  critical: number; // percentage (0-1)\n  emergency: number; // percentage (0-1)\n  minFreeSpace: number; // bytes\n}\n\nexport interface StorageOptimizationResult {\n  spaceSaved: number;\n  operations: string[];\n  startUsage: number;\n  endUsage: number;\n  startPercentage: number;\n  endPercentage: number;\n  optimizationTime: number;\n}","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/types/pdf-resources.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/types/pdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/types/translations.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":140,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3185,3188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3185,3188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘ç³»ç»Ÿç±»å‹å®šä¹‰\n * ç¡®ä¿ç¿»è¯‘é”®çš„ç±»å‹å®‰å…¨\n */\n\nexport interface Messages {\n  site: {\n    name: string;\n    title: string;\n    description: string;\n  };\n  \n  navigation: {\n    home: string;\n    articles: string;\n    therapies: string;\n    instantRelief: string;\n    naturalTherapies: string;\n    culturalCharms: string;\n    scenarioSolutions: string;\n    downloads: string;\n    interactiveTools: string;\n    symptomAssessment: string;\n    painTracker: string;\n    healthGuide: string;\n  };\n\n  painTracker: {\n    assessment: {\n      title: string;\n      subtitle: string;\n      start: {\n        title: string;\n        description: string;\n        feature1: string;\n        feature2: string;\n        feature3: string;\n        feature4: string;\n        startButton: string;\n        disclaimer: string;\n      };\n      progress: {\n        questionOf: string;\n      };\n      navigation: {\n        previous: string;\n        next: string;\n        skip: string;\n        finish: string;\n      };\n      result: {\n        title: string;\n        yourScore: string;\n        severity: string;\n        riskLevel: string;\n        summary: string;\n        recommendations: string;\n        timeframe: string;\n        actionSteps: string;\n        retakeAssessment: string;\n        saveResults: string;\n        nextSteps: {\n          trackSymptoms: string;\n          tryRecommendations: string;\n          consultDoctor: string;\n        };\n      };\n      severity: {\n        mild: string;\n        moderate: string;\n        severe: string;\n        emergency: string;\n      };\n      priority: {\n        high: string;\n        medium: string;\n        low: string;\n      };\n      messages: {\n        assessmentComplete: string;\n        assessmentCompleteDesc: string;\n        assessmentFailed: string;\n        assessmentFailedDesc: string;\n        resultsSaved: string;\n        resultsSavedDesc: string;\n      };\n      resultMessages: {\n        emergency: string;\n        emergencySummary: string;\n        severe: string;\n        severeSummary: string;\n        moderate: string;\n        moderateSummary: string;\n        mild: string;\n        mildSummary: string;\n      };\n      recommendations: {\n        emergencyMedical: {\n          title: string;\n          description: string;\n          timeframe: string;\n          actionSteps: string[];\n        };\n        painManagement: {\n          title: string;\n          description: string;\n          timeframe: string;\n          actionSteps: string[];\n        };\n        lifestyleChanges: {\n          title: string;\n          description: string;\n          timeframe: string;\n          actionSteps: string[];\n        };\n        selfcarePractices: {\n          title: string;\n          description: string;\n          timeframe: string;\n          actionSteps: string[];\n        };\n      };\n    };\n  };\n}\n\n// ç¿»è¯‘é”®è·¯å¾„ç±»å‹\nexport type TranslationKey = \n  | 'site.name'\n  | 'site.title'\n  | 'site.description'\n  | 'navigation.home'\n  | 'navigation.articles'\n  | 'painTracker.assessment.title'\n  | 'painTracker.assessment.result.title'\n  | 'painTracker.assessment.resultMessages.mild'\n  // ... æ›´å¤šé”®è·¯å¾„\n\n// ç¿»è¯‘å‡½æ•°ç±»å‹\nexport type TranslationFunction = (key: TranslationKey, params?: Record<string, any>) => string;\n\n// ç¿»è¯‘Hookè¿”å›ç±»å‹\nexport interface UseTranslationsReturn {\n  t: TranslationFunction;\n  locale: string;\n  isZh: boolean;\n  isEn: boolean;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/utils/heatmapManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/utils/helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/duting/Downloads/moneyğŸ’°/--main/utils/pdfHelpers.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":171,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3864,3867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3864,3867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3892,3895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3892,3895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * PDFä¸‹è½½ä¸­å¿ƒå·¥å…·å‡½æ•°\n * Period Hub PDF Download Center Utility Functions\n */\n\nimport { PDFResource, LocalizedPDFResource, Locale, PDFCategory, PDFStats } from '@/types/pdf';\n\n/**\n * è·å–æœ¬åœ°åŒ–çš„PDFæ–‡ä»¶å\n * @param filename åŸºç¡€æ–‡ä»¶å\n * @param locale è¯­è¨€ä»£ç \n * @returns æœ¬åœ°åŒ–æ–‡ä»¶å\n */\nexport function getLocalizedFilename(filename: string, locale: Locale): string {\n  const baseName = filename.replace('.pdf', '');\n  return locale === 'zh' ? `${baseName}.pdf` : `${baseName}-en.pdf`;\n}\n\n/**\n * è·å–æ›¿ä»£è¯­è¨€çš„PDFæ–‡ä»¶å\n * @param filename åŸºç¡€æ–‡ä»¶å\n * @param locale å½“å‰è¯­è¨€ä»£ç \n * @returns æ›¿ä»£è¯­è¨€æ–‡ä»¶å\n */\nexport function getAlternateFilename(filename: string, locale: Locale): string {\n  const baseName = filename.replace('.pdf', '');\n  return locale === 'zh' ? `${baseName}-en.pdf` : `${baseName}.pdf`;\n}\n\n/**\n * è·å–PDFä¸‹è½½URL\n * @param filename æ–‡ä»¶å\n * @returns å®Œæ•´ä¸‹è½½URL\n */\nexport function getPDFDownloadUrl(filename: string): string {\n  return `/pdf-files/${filename}`;\n}\n\n/**\n * è·å–æ›¿ä»£è¯­è¨€æ ‡ç­¾æ–‡æœ¬\n * @param locale å½“å‰è¯­è¨€\n * @returns æ›¿ä»£è¯­è¨€æ ‡ç­¾\n */\nexport function getAlternateLanguageLabel(locale: Locale): string {\n  return locale === 'zh' ? 'English' : 'ä¸­æ–‡ç‰ˆ';\n}\n\n/**\n * å°†PDFèµ„æºè½¬æ¢ä¸ºæœ¬åœ°åŒ–èµ„æº\n * @param resource PDFèµ„æº\n * @param locale è¯­è¨€ä»£ç \n * @param t ç¿»è¯‘å‡½æ•°\n * @returns æœ¬åœ°åŒ–PDFèµ„æº\n */\nexport function localizeResource(\n  resource: PDFResource,\n  locale: Locale,\n  t: (key: string) => string\n): LocalizedPDFResource {\n  const localizedFilename = getLocalizedFilename(resource.filename, locale);\n  const alternateFilename = getAlternateFilename(resource.filename, locale);\n  \n  return {\n    ...resource,\n    title: t(resource.titleKey),\n    description: t(resource.descriptionKey),\n    localizedFilename,\n    alternateFilename,\n    downloadUrl: getPDFDownloadUrl(localizedFilename)\n  };\n}\n\n/**\n * æŒ‰åˆ†ç±»åˆ†ç»„PDFèµ„æº\n * @param resources PDFèµ„æºæ•°ç»„\n * @returns æŒ‰åˆ†ç±»åˆ†ç»„çš„èµ„æº\n */\nexport function groupResourcesByCategory(\n  resources: LocalizedPDFResource[]\n): Record<PDFCategory, LocalizedPDFResource[]> {\n  return resources.reduce((groups, resource) => {\n    const category = resource.category;\n    if (!groups[category]) {\n      groups[category] = [];\n    }\n    groups[category].push(resource);\n    return groups;\n  }, {} as Record<PDFCategory, LocalizedPDFResource[]>);\n}\n\n/**\n * è·å–PDFç»Ÿè®¡ä¿¡æ¯\n * @param resources PDFèµ„æºæ•°ç»„\n * @returns ç»Ÿè®¡ä¿¡æ¯\n */\nexport function calculatePDFStats(resources: PDFResource[]): PDFStats {\n  const categoryStats: Record<PDFCategory, number> = {\n    'management-tools': 0,\n    'health-management': 0,\n    'communication-guidance': 0,\n    'educational-resources': 0\n  };\n\n  let featuredCount = 0;\n\n  resources.forEach(resource => {\n    categoryStats[resource.category]++;\n    if (resource.featured) {\n      featuredCount++;\n    }\n  });\n\n  return {\n    totalPDFs: resources.length,\n    totalCategories: Object.keys(categoryStats).length,\n    categoryStats,\n    featuredCount\n  };\n}\n\n/**\n * éªŒè¯PDFèµ„æºé…ç½®\n * @param resource PDFèµ„æº\n * @returns éªŒè¯ç»“æœ\n */\nexport function validatePDFResource(resource: PDFResource): {\n  isValid: boolean;\n  errors: string[];\n} {\n  const errors: string[] = [];\n\n  if (!resource.id) {\n    errors.push('Resource ID is required');\n  }\n\n  if (!resource.filename) {\n    errors.push('Filename is required');\n  } else if (!resource.filename.endsWith('.pdf')) {\n    errors.push('Filename must end with .pdf');\n  }\n\n  if (!resource.titleKey) {\n    errors.push('Title key is required');\n  }\n\n  if (!resource.descriptionKey) {\n    errors.push('Description key is required');\n  }\n\n  if (!resource.category) {\n    errors.push('Category is required');\n  }\n\n  if (!resource.icon) {\n    errors.push('Icon is required');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n/**\n * è®°å½•PDFä¸‹è½½äº‹ä»¶ï¼ˆç”¨äºåˆ†æï¼‰\n * @param resourceId èµ„æºID\n * @param locale è¯­è¨€ä»£ç \n */\nexport function trackPDFDownload(resourceId: string, locale: Locale): void {\n  // è¿™é‡Œå¯ä»¥é›†æˆåˆ†æå·¥å…·ï¼Œå¦‚Google Analytics\n  if (typeof window !== 'undefined' && (window as any).gtag) {\n    (window as any).gtag('event', 'pdf_download', {\n      resource_id: resourceId,\n      locale: locale,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  // ä¹Ÿå¯ä»¥å‘é€åˆ°è‡ªå®šä¹‰åˆ†æç«¯ç‚¹\n  console.log(`PDF Download: ${resourceId} (${locale})`);\n}\n\n/**\n * æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n * @param sizeInKB æ–‡ä»¶å¤§å°ï¼ˆKBï¼‰\n * @returns æ ¼å¼åŒ–çš„æ–‡ä»¶å¤§å°å­—ç¬¦ä¸²\n */\nexport function formatFileSize(sizeInKB: number): string {\n  if (sizeInKB < 1024) {\n    return `${sizeInKB} KB`;\n  } else {\n    const sizeInMB = (sizeInKB / 1024).toFixed(1);\n    return `${sizeInMB} MB`;\n  }\n}\n\n/**\n * æ£€æŸ¥PDFæ–‡ä»¶æ˜¯å¦å­˜åœ¨\n * @param filename æ–‡ä»¶å\n * @returns Promise<boolean>\n */\nexport async function checkPDFExists(filename: string): Promise<boolean> {\n  try {\n    const response = await fetch(getPDFDownloadUrl(filename), { method: 'HEAD' });\n    return response.ok;\n  } catch {\n    return false;\n  }\n}\n","usedDeprecatedRules":[]}]
