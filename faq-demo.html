<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ系统功能演示</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/fuse.js@6.6.2"></script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto py-8 px-4 max-w-4xl">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">FAQ系统功能演示</h1>
            <p class="text-gray-600">基于Fuse.js的智能搜索系统</p>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
            <!-- 搜索栏 -->
            <div class="relative mb-6">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
                <input 
                    id="searchInput" 
                    type="text" 
                    placeholder="搜索常见问题..." 
                    class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                >
            </div>

            <!-- 分类筛选 -->
            <div class="flex flex-wrap gap-2 mb-6">
                <button class="category-btn px-4 py-2 rounded-full text-sm font-medium bg-purple-100 text-purple-800 ring-2 ring-purple-500" data-category="all">全部</button>
                <button class="category-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-600 hover:bg-gray-200" data-category="basic-knowledge">基础知识</button>
                <button class="category-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-600 hover:bg-gray-200" data-category="pain-relief">疼痛缓解</button>
                <button class="category-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-600 hover:bg-gray-200" data-category="medical-care">就医指导</button>
                <button class="category-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-600 hover:bg-gray-200" data-category="lifestyle">生活调理</button>
                <button class="category-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-600 hover:bg-gray-200" data-category="medication">药物治疗</button>
            </div>

            <!-- 搜索结果计数 -->
            <div id="resultCount" class="mb-4 text-sm text-gray-600 hidden">
                找到 <span id="resultNumber">0</span> 个相关问题
            </div>

            <!-- FAQ列表 -->
            <div id="faqList" class="space-y-4">
                <!-- FAQ项目将通过JavaScript动态生成 -->
            </div>

            <!-- 空状态 -->
            <div id="emptyState" class="text-center py-12 hidden">
                <div class="text-gray-500 text-lg mb-2">没有找到相关问题</div>
                <div class="text-gray-400 text-sm">尝试使用不同的关键词或浏览其他分类</div>
            </div>
        </div>

        <!-- 功能说明 -->
        <div class="mt-8 bg-green-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-green-900 mb-4">✅ FAQ系统功能演示</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <h4 class="font-medium text-green-800 mb-2">核心功能：</h4>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li>✅ 智能搜索（支持中文模糊搜索）</li>
                        <li>✅ 分类筛选（6个主要分类）</li>
                        <li>✅ FAQ展开/收起</li>
                        <li>✅ 搜索结果高亮</li>
                        <li>✅ 响应式设计</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium text-green-800 mb-2">技术特性：</h4>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li>✅ Fuse.js搜索引擎</li>
                        <li>✅ 防抖搜索优化</li>
                        <li>✅ 无障碍访问支持</li>
                        <li>✅ 现代化UI设计</li>
                        <li>✅ 高性能表现</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // FAQ数据
        const faqs = [
            {
                id: '1',
                question: '痛经是什么？',
                answer: '痛经是指女性在月经期间出现的下腹部疼痛，通常表现为痉挛性疼痛，可能伴有腰痛、头痛等症状。痛经分为原发性痛经和继发性痛经两种类型。原发性痛经通常从初潮开始，没有器质性病变；继发性痛经则是由某些疾病引起的。',
                category: 'basic-knowledge',
                tags: ['痛经', '基础知识', '月经']
            },
            {
                id: '2',
                question: '如何快速缓解痛经？',
                answer: '快速缓解痛经的方法包括：1）热敷下腹部，可以促进血液循环，缓解肌肉痉挛；2）适量运动如散步，有助于释放内啡肽；3）按摩腹部，顺时针轻柔按摩；4）服用非处方止痛药如布洛芬；5）保持充足睡眠和规律作息。',
                category: 'pain-relief',
                tags: ['痛经', '缓解', '疼痛']
            },
            {
                id: '3',
                question: '什么时候需要看医生？',
                answer: '如果痛经严重影响日常生活，或出现以下症状应及时就医：疼痛持续加重、月经量异常增多或减少、发热、恶心呕吐、疼痛持续时间超过3天等。医生会根据症状进行相应检查，如B超、血液检查等，并制定合适的治疗方案。',
                category: 'medical-care',
                tags: ['就医', '医生', '检查']
            },
            {
                id: '4',
                question: '痛经期间应该注意什么饮食？',
                answer: '痛经期间建议：1）多喝温水，避免冷饮和冰品；2）适量补充铁质，如瘦肉、菠菜、红枣等；3）避免辛辣、油腻食物；4）适量补充维生素B6和镁，有助于缓解疼痛；5）避免咖啡因和酒精，这些会加重疼痛。',
                category: 'lifestyle',
                tags: ['饮食', '营养', '生活']
            },
            {
                id: '5',
                question: '痛经可以吃什么药？',
                answer: '常用的痛经药物包括：1）非甾体抗炎药（如布洛芬、阿司匹林），具有抗炎和止痛作用；2）对乙酰氨基酚，适合轻度疼痛；3）避孕药（需医生指导），可以调节激素水平；4）中药调理，如当归、川芎等。用药前请咨询医生，避免自行用药。',
                category: 'medication',
                tags: ['药物', '止痛', '治疗']
            },
            {
                id: '6',
                question: '痛经会影响生育吗？',
                answer: '大多数原发性痛经不会影响生育能力。但如果是继发性痛经（如子宫内膜异位症、子宫肌瘤等），可能会影响生育。建议有生育计划的女性及时就医检查，排除相关疾病，确保生殖健康。',
                category: 'basic-knowledge',
                tags: ['生育', '怀孕', '健康']
            },
            {
                id: '7',
                question: '运动对痛经有帮助吗？',
                answer: '适量运动对缓解痛经有帮助：1）促进血液循环，改善子宫供血；2）释放内啡肽，天然止痛物质；3）改善情绪，减少焦虑和压力；4）增强体质，提高抵抗力。推荐瑜伽、散步、游泳等温和运动，避免剧烈运动。',
                category: 'lifestyle',
                tags: ['运动', '锻炼', '健康']
            },
            {
                id: '8',
                question: '痛经会随着年龄减轻吗？',
                answer: '原发性痛经通常在生育后或30岁后有所减轻，因为激素水平变化和子宫肌肉松弛。但继发性痛经可能随年龄加重，特别是子宫内膜异位症等疾病。如果痛经持续或加重，建议及时就医检查。',
                category: 'basic-knowledge',
                tags: ['年龄', '变化', '发展']
            }
        ];

        // 初始化Fuse.js搜索引擎
        const fuse = new Fuse(faqs, {
            keys: [
                { name: 'question', weight: 0.7 },
                { name: 'answer', weight: 0.3 },
                { name: 'tags', weight: 0.5 }
            ],
            threshold: 0.4,
            distance: 100,
            minMatchCharLength: 2,
            includeScore: true,
            includeMatches: true,
            ignoreLocation: true
        });

        let currentCategory = 'all';
        let expandedItems = new Set();

        // 渲染FAQ项目
        function renderFAQItem(faq, isExpanded = false) {
            return `
                <div class="border border-gray-200 rounded-lg mb-4 bg-white shadow-sm hover:shadow-md transition-shadow">
                    <button 
                        onclick="toggleFAQ('${faq.id}')"
                        class="w-full px-4 py-3 text-left font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-inset rounded-lg"
                        aria-expanded="${isExpanded}"
                    >
                        <div class="flex justify-between items-center">
                            <span class="text-left">${faq.question}</span>
                            <span class="text-gray-400 text-xl font-light ml-4 flex-shrink-0">
                                ${isExpanded ? '−' : '+'}
                            </span>
                        </div>
                    </button>
                    
                    ${isExpanded ? `
                        <div class="px-4 pb-3 text-gray-600 border-t border-gray-100">
                            <div class="pt-3 prose prose-sm max-w-none">${faq.answer}</div>
                            <div class="mt-3 flex flex-wrap gap-2">
                                ${faq.tags.map(tag => `
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                        ${tag}
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // 切换FAQ展开状态
        function toggleFAQ(faqId) {
            if (expandedItems.has(faqId)) {
                expandedItems.delete(faqId);
            } else {
                expandedItems.add(faqId);
            }
            renderFAQs();
        }

        // 渲染FAQ列表
        function renderFAQs() {
            const faqList = document.getElementById('faqList');
            const emptyState = document.getElementById('emptyState');
            const resultCount = document.getElementById('resultCount');
            const resultNumber = document.getElementById('resultNumber');

            let filteredFAQs = faqs;

            // 分类筛选
            if (currentCategory !== 'all') {
                filteredFAQs = filteredFAQs.filter(faq => faq.category === currentCategory);
            }

            // 搜索筛选
            const searchQuery = document.getElementById('searchInput').value.trim();
            if (searchQuery) {
                const searchResults = fuse.search(searchQuery);
                filteredFAQs = searchResults.map(result => result.item);
            }

            // 显示结果计数
            if (searchQuery) {
                resultNumber.textContent = filteredFAQs.length;
                resultCount.classList.remove('hidden');
            } else {
                resultCount.classList.add('hidden');
            }

            // 渲染FAQ列表
            if (filteredFAQs.length === 0) {
                faqList.innerHTML = '';
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                faqList.innerHTML = filteredFAQs.map(faq => 
                    renderFAQItem(faq, expandedItems.has(faq.id))
                ).join('');
            }
        }

        // 防抖搜索
        let searchTimeout;
        function debounceSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(renderFAQs, 300);
        }

        // 事件监听
        document.getElementById('searchInput').addEventListener('input', debounceSearch);

        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // 更新按钮状态
                document.querySelectorAll('.category-btn').forEach(b => {
                    b.className = 'category-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-600 hover:bg-gray-200';
                });
                this.className = 'category-btn px-4 py-2 rounded-full text-sm font-medium bg-purple-100 text-purple-800 ring-2 ring-purple-500';

                // 更新分类
                currentCategory = this.dataset.category;
                renderFAQs();
            });
        });

        // 初始渲染
        renderFAQs();
    </script>
</body>
</html>















