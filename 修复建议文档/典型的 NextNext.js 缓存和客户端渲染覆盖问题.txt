å…¸å‹çš„ Next.js ç¼“å­˜å’Œå®¢æˆ·ç«¯æ¸²æŸ“è¦†ç›–é—®é¢˜ æ ‡é¢˜é—®é¢˜ä¿®å¤ä»£ç  import {Metadata} from 'next'; export const metadata: Metadata = {title: 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub', description: 'ä½¿ç”¨æˆ‘ä»¬çš„ç—›ç»å½±å“ç®—æ³•è¯„ä¼°æœˆç»ç–¼ç—›å¯¹æ‚¨ç”Ÿæ´»å’Œå·¥ä½œçš„å½±å“ç¨‹åº¦', keywords: ['ç—›ç»', 'æœˆç»ç–¼ç—›', 'ç—‡çŠ¶è¯„ä¼°', 'èŒåœºå½±å“', 'ç”Ÿæ´»è´¨é‡'], openGraph: {title: 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ', description: 'ç§‘å­¦è¯„ä¼°æœˆç»ç–¼ç—›å¯¹ç”Ÿæ´»å’Œå·¥ä½œçš„å½±å“', type: 'website',}}; export default function PeriodPainCalculator() {return ( <div className="container mx-auto px-4 py-8"> {} <header className="text-center mb-8"> <h1 className="text-3xl font-bold text-gray-900 mb-4"> ç—›ç»å½±å“ç®—æ³• </h1> <p className="text-lg text-gray-600"> ç§‘å­¦è¯„ä¼°æœˆç»ç–¼ç—›å¯¹æ‚¨ç”Ÿæ´»å’Œå·¥ä½œçš„å½±å“ç¨‹åº¦ </p> </header> <main> {} <div className="max-w-4xl mx-auto"> <div className="bg-white rounded-lg shadow-lg p-6 mb-6"> <h2 className="text-2xl font-semibold mb-4">ç—‡çŠ¶è¯„ä¼°</h2> <p className="text-gray-600 mb-6"> é€šè¿‡æˆ‘ä»¬çš„ä¸“ä¸šç®—æ³•ï¼Œå…¨é¢äº†è§£ç—›ç»å¯¹æ‚¨æ—¥å¸¸ç”Ÿæ´»çš„å½±å“ </p> <button className="bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors"> å¼€å§‹è¯„ä¼° </button> </div> <div className="bg-white rounded-lg shadow-lg p-6"> <h2 className="text-2xl font-semibold mb-4">èŒåœºå½±å“åˆ†æ</h2> <p className="text-gray-600 mb-6"> è¯„ä¼°æœˆç»ç—‡çŠ¶å¯¹å·¥ä½œè¡¨ç°å’ŒèŒåœºç”Ÿæ´»çš„å…·ä½“å½±å“ </p> <button className="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"> èŒåœºè¯„ä¼° </button> </div> </div> </main> </div> )} import {Inter} from 'next/font/google'; import './globals.css'; const inter = Inter({subsets: ['latin']}); export default function RootLayout({children,}: {children: React.ReactNode}) {return ( <html lang="zh"> <head> {} </head> <body className={inter.className}> <nav className="bg-white shadow-sm border-b"> <div className="container mx-auto px-4 py-3"> <div className="flex justify-between items-center"> <div className="flex items-center space-x-4"> <h1 className="text-xl font-bold text-purple-600"> PeriodHub </h1> <nav className="hidden md:flex space-x-6"> <a href="/zh" className="text-gray-600 hover:text-purple-600"> é¦–é¡µ </a> <a href="/zh/interactive-tools/period-pain-impact-calculator" className="text-purple-600 font-medium"> ç—›ç»å½±å“ç®—æ³• </a> </nav> </div> <div className="flex items-center space-x-4"> <button className="text-sm text-gray-600 hover:text-purple-600"> ä¸­æ–‡ </button> </div> </div> </div> </nav> <main className="min-h-screen bg-gray-50"> {children} </main> <footer className="bg-gray-900 text-white py-8"> <div className="container mx-auto px-4 text-center"> <p className="text-gray-400"> Â© 2024 PeriodHub. ä¸“ä¸šçš„æœˆç»å¥åº·ç®¡ç†å¹³å° </p> </div> </footer> </body> </html> )} 'use client'; import {useEffect} from 'react'; export default function PeriodPainCalculatorClient() {useEffect(() => {document.title = 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub'}, []); return ( )} const nextConfig = {experimental: {staleTimes: {dynamic: 0, static: 0,},}, i18n: {locales: ['zh', 'en'], defaultLocale: 'zh', localeDetection: false}}; module.exports = nextConfig; æ‚¨çš„åˆ†æéå¸¸ä¸“ä¸šå’Œå…¨é¢ï¼ğŸ‘ è¿™ç¡®å®æ˜¯ä¸€ä¸ªå…¸å‹çš„Next.jsç¼“å­˜å’Œå®¢æˆ·ç«¯æ¸²æŸ“è¦†ç›–é—®é¢˜ã€‚æ ¹æ®æ‚¨çš„åˆ†æï¼Œæˆ‘å»ºè®®é‡‡ç”¨**ç³»ç»Ÿæ€§çš„è§£å†³æ–¹æ¡ˆ**ï¼š ## ğŸ¯ **æ¨èè§£å†³æ–¹æ¡ˆ** è®©æˆ‘ä»¬æŒ‰ç…§ä¼˜å…ˆçº§æ¥ç³»ç»Ÿæ€§åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼š ### ç¬¬ä¸€æ­¥ï¼šæ¸…é™¤Next.jsç¼“å­˜å¹¶é‡å¯ï¼ˆæœ€é‡è¦ï¼‰è®©æˆ‘ç›´æ¥æä¾›å…·ä½“çš„è§£å†³æ­¥éª¤ï¼š ## ğŸš€ **ç«‹å³æ‰§è¡Œæ–¹æ¡ˆ** ### æ–¹æ³•ä¸€ï¼šå®Œå…¨æ¸…é™¤ç¼“å­˜é‡å¯ ```bash # 1. åœæ­¢å¼€å‘æœåŠ¡å™¨ (Ctrl+C) # 2. å®Œå…¨æ¸…é™¤Next.jsç¼“å­˜ rm -rf .next rm -rf node_modules/.cache rm -rf .swc # 3. é‡æ–°å¯åŠ¨ npm run dev ``` ### æ–¹æ³•äºŒï¼šæ£€æŸ¥é¡µé¢ç»„ä»¶å†…éƒ¨æ ‡é¢˜è®¾ç½®## ğŸ“‹ **å›ç­”æ‚¨çš„å…·ä½“é—®é¢˜** ### 1. **æ¨èæ‰§è¡Œæ–¹æ³•** æˆ‘å»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š - **é¦–é€‰**ï¼šæ–¹æ³•1 + æ–¹æ³•2ï¼ˆæ¸…é™¤ç¼“å­˜ + æ£€æŸ¥é¡µé¢ç»„ä»¶ï¼‰ - **å¤‡é€‰**ï¼šå¦‚æœè¿˜ä¸è¡Œï¼Œå†å°è¯•æ–¹æ³•5ï¼ˆä¸åŒç«¯å£ï¼‰ ### 2. **æ˜¯å¦å¯ä»¥åˆ é™¤.nextç›®å½•** **å®Œå…¨å¯ä»¥ä¸”å¼ºçƒˆå»ºè®®ï¼** `.next`ç›®å½•æ˜¯Next.jsçš„æ„å»ºç¼“å­˜ï¼Œåˆ é™¤åä¼šè‡ªåŠ¨é‡æ–°ç”Ÿæˆï¼š ```bash rm -rf .next # å®‰å…¨ï¼Œä¼šè‡ªåŠ¨é‡å»º rm -rf .swc # ä¹Ÿå¯ä»¥åˆ é™¤ï¼ŒSWCç¼–è¯‘å™¨ç¼“å­˜ ``` ### 3. **H1æ ‡é¢˜æ›´æ–°** **æ˜¯çš„ï¼Œåº”è¯¥æ›´æ–°ï¼** ä»æ‚¨çš„æˆªå›¾çœ‹ï¼Œé¡µé¢å†…éƒ¨æ˜¾ç¤º"ç»æœŸç–¼ç—›å½±å“è¯„ä¼°"ï¼Œåº”è¯¥æ”¹ä¸º"ç—›ç»å½±å“ç®—æ³•"ä»¥ä¿æŒä¸€è‡´ã€‚ ## ğŸš€ **ç«‹å³æ‰§è¡Œæ­¥éª¤** ```bash # ç¬¬ä¸€æ­¥ï¼šå®Œå…¨æ¸…ç† rm -rf .next rm -rf .swc rm -rf node_modules/.cache # ç¬¬äºŒæ­¥ï¼šé‡å¯å¼€å‘æœåŠ¡å™¨ npm run dev # ç¬¬ä¸‰æ­¥ï¼šå¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ # Ctrl+Shift+R (Windows/Linux) æˆ– Cmd+Shift+R (Mac) ``` ## ğŸ” **å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨** æ‰§è¡Œä¸Šè¿°æ­¥éª¤åï¼Œå¦‚æœæ ‡é¢˜è¿˜æ²¡æ›´æ–°ï¼Œè¯·ï¼š 1. **æ£€æŸ¥æ§åˆ¶å°é”™è¯¯**ï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çœ‹æ˜¯å¦æœ‰JavaScripté”™è¯¯ 2. **éªŒè¯æ–‡ä»¶æ›´æ”¹**ï¼šç¡®è®¤é¡µé¢æ–‡ä»¶ä¸­çš„æ ‡é¢˜ç¡®å®æ˜¯"ç—›ç»å½±å“ç®—æ³•" 3. **å°è¯•ä¸åŒç«¯å£**ï¼š`npm run dev -- -p 3002` 4. **æ£€æŸ¥æ˜¯å¦æœ‰å®¢æˆ·ç«¯è¦†ç›–**ï¼šçœ‹é¡µé¢æ˜¯å¦ç”¨JavaScriptåŠ¨æ€è®¾ç½®äº†æ ‡é¢˜ ## ğŸ’¡ **é¢å¤–å»ºè®®** å¦‚æœæ‚¨æƒ³è¦æ›´ç¨³å®šçš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘å»ºè®®ï¼š - åœ¨é¡µé¢ç»„ä»¶ä¸­åŒæ—¶è®¾ç½®æœåŠ¡ç«¯metadataå’Œå®¢æˆ·ç«¯document.title - æ·»åŠ ä¸€ä¸ªuseEffectæ¥ç¡®ä¿æ ‡é¢˜åœ¨å®¢æˆ·ç«¯æ­£ç¡®æ˜¾ç¤º æ‚¨ç°åœ¨å¯ä»¥å…ˆæ‰§è¡Œæ¸…ç†æ­¥éª¤ï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœå¦‚ä½•ï¼ğŸ¯ éå¸¸è¯¦ç»†å’Œä¸“ä¸šçš„åˆ†æï¼ğŸ‘ æ‚¨çš„é—®é¢˜è¯Šæ–­éå¸¸å‡†ç¡®ã€‚æˆ‘æ¥åŸºäºæ‚¨çš„åˆ†ææä¾›ä¸€äº›è¡¥å……å»ºè®®å’Œä¼˜åŒ–æ–¹æ¡ˆï¼š ## ğŸ¯ **å¯¹æ‚¨ä¿®å¤æ–¹æ¡ˆçš„è¯„ä¼°å’Œè¡¥å……** æ‚¨æä¾›çš„ä¿®å¤ä»£ç å¾ˆå¥½ï¼Œä½†æˆ‘å»ºè®®åšå‡ ä¸ªå…³é”®ä¼˜åŒ–ï¼š## ğŸš¨ **è§£å†³æ§åˆ¶å°403é”™è¯¯çš„è¡¥å……æ–¹æ¡ˆ**## ğŸ¯ **æ¨èçš„æ‰§è¡Œæ­¥éª¤** ### ç¬¬ä¸€æ­¥ï¼šç«‹å³ä¿®å¤ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ 1. **åº”ç”¨å¢å¼ºç‰ˆæ ‡é¢˜è®¾ç½®**ï¼šä½¿ç”¨æˆ‘æä¾›çš„å¸¦MutationObserverçš„ä»£ç  2. **ä¿®å¤é¢åŒ…å±‘å¯¼èˆª**ï¼šç¡®ä¿ä¸ä¸»æ ‡é¢˜ä¸€è‡´ 3. **æ¸…é™¤ç¼“å­˜é‡å¯**ï¼š ```bash cd /Users/duting/Downloads/moneyğŸ’°/--main rm -rf .next .swc node_modules/.cache npm run dev ``` ### ç¬¬äºŒæ­¥ï¼šè°ƒè¯•403é”™è¯¯ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰ 1. **æ·»åŠ é”™è¯¯ç›‘å¬å·¥å…·**ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨è°ƒè¯• 2. **åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ**ï¼š`debugNetwork()` å‡½æ•°æ¥å®šä½é”™è¯¯æº 3. **æ£€æŸ¥ç½‘ç»œé¢æ¿**ï¼šæŸ¥æ‰¾è¿”å›403çš„è¯·æ±‚ ### ç¬¬ä¸‰æ­¥ï¼šæŒä¹…åŒ–ä¿æŠ¤ï¼ˆé•¿æœŸæ–¹æ¡ˆï¼‰ 1. **ä½¿ç”¨TitleProtectorç»„ä»¶**ï¼šæä¾›æŒç»­çš„æ ‡é¢˜ä¿æŠ¤ 2. **ç›‘æ§å’Œæ—¥å¿—**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è·Ÿè¸ªæ ‡é¢˜å˜åŒ– ## ğŸ” **ç«‹å³å¯ä»¥å°è¯•çš„å¿«é€Ÿæµ‹è¯•** åœ¨æµè§ˆå™¨æ§åˆ¶å°ç²˜è´´ä»¥ä¸‹ä»£ç æµ‹è¯•ï¼š ```javascript document.title = 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub'; console.log('Title set to:', document.title); let titleChangeCount = 0; const originalTitle = document.title; Object.defineProperty(document, 'title', {get() {return this._title || originalTitle}, set(value) {titleChangeCount++; console.log(`ğŸ“ Title change #${titleChangeCount}:`, value); console.trace('Title changed by:'); this._title = value}}); ``` ## ğŸ’¡ **å…³é”®å»ºè®®** 1. **ä¼˜å…ˆæ‰§è¡Œç¬¬ä¸€æ­¥**ï¼šå¢å¼ºç‰ˆçš„useEffectåº”è¯¥èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ 2. **403é”™è¯¯å¯èƒ½ä¸æ˜¯ä¸»å› **ï¼šé‡ç‚¹å…ˆè§£å†³æ ‡é¢˜è¦†ç›–é—®é¢˜ 3. **ä½¿ç”¨æ¸è¿›å¼æ–¹æ¡ˆ**ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥æµ‹è¯• æ‚¨è§‰å¾—æƒ³ä»å“ªä¸ªæ­¥éª¤å¼€å§‹ï¼Ÿæˆ‘å»ºè®®å…ˆåº”ç”¨å¢å¼ºç‰ˆçš„é¡µé¢ä»£ç ï¼Œç„¶åæ¸…é™¤ç¼“å­˜é‡å¯æœåŠ¡å™¨æµ‹è¯•æ•ˆæœã€‚ å¢å¼ºç‰ˆæ ‡é¢˜â€‹â€‹ä¿®å¤æ–¹æ¡ˆ import React, {useEffect, useState, use} from 'react'; import {useTranslations} from 'next-intl'; import {useStore} from '@/store/store'; import {useRouter} from 'next/navigation'; export default function PeriodPainImpactCalculatorPage({params}: {params: Promise<{locale: string}>}) {const resolvedParams = use(params); const t = useTranslations('periodPainImpactCalculator'); const commonT = useTranslations('common'); const router = useRouter(); const [currentLanguage, setCurrentLanguage] = useState(resolvedParams?.locale || 'zh'); const {setLang} = useStore(); useEffect(() => {if (resolvedParams?.locale) {setCurrentLanguage(resolvedParams.locale); setLang(resolvedParams.locale)}}, [resolvedParams?.locale, setLang]); useEffect(() => {const setTitleWithRetry = () => {const correctTitle = currentLanguage === 'zh' ? 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub' : 'Period Pain Impact Calculator - Symptom Assessment & Workplace Analysis | Period Hub'; document.title = correctTitle; const titleElement = document.querySelector('head > title'); if (titleElement) {titleElement.textContent = correctTitle} const ogTitleMeta = document.querySelector('meta[property="og:title"]'); if (ogTitleMeta) {ogTitleMeta.setAttribute('content', correctTitle)} const observer = new MutationObserver((mutations) => {mutations.forEach((mutation) => {if (mutation.type === 'childList' && mutation.target === titleElement) {if (titleElement && titleElement.textContent !== correctTitle) {console.warn('Title was overwritten, restoring correct title'); titleElement.textContent = correctTitle; document.title = correctTitle}}})}); if (titleElement) {observer.observe(titleElement, {childList: true, characterData: true, subtree: true})} const timeoutId = setTimeout(() => {if (document.title !== correctTitle) {console.warn('Title verification failed, forcing update'); document.title = correctTitle; if (titleElement) {titleElement.textContent = correctTitle}}}, 2000); return () => {observer.disconnect(); clearTimeout(timeoutId)}}; const cleanup = setTitleWithRetry(); if (document.readyState === 'complete') {setTitleWithRetry()} else {window.addEventListener('load', setTitleWithRetry)} return cleanup}, [currentLanguage]); useEffect(() => {const logTitleChange = () => {console.log('Current document.title:', document.title)}; const intervalId = setInterval(logTitleChange, 1000); return () => clearInterval(intervalId)}, []); const handleStartAssessment = (type: any) => {}; return ( <main className="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16"> {} <nav className="mb-8" aria-label="breadcrumb"> <div className="flex items-center space-x-2 text-sm text-gray-500"> <a href={`/${resolvedParams?.locale || 'zh'}`} className="hover:text-purple-600 transition-colors" aria-label={currentLanguage === 'zh' ? 'è¿”å›é¦–é¡µ' : 'Back to Home'} > {currentLanguage === 'zh' ? 'é¦–é¡µ' : 'Home'} </a> <span aria-hidden="true">/</span> <a href={`/${resolvedParams?.locale || 'zh'}/interactive-tools`} className="hover:text-purple-600 transition-colors" > {currentLanguage === 'zh' ? 'äº’åŠ¨å·¥å…·' : 'Interactive Tools'} </a> <span aria-hidden="true">/</span> <span className="text-gray-900 font-medium"> {} {currentLanguage === 'zh' ? 'ç—›ç»å½±å“ç®—æ³•' : 'Period Pain Impact Calculator'} </span> </div> </nav> <div className="bg-white rounded-lg shadow-xl p-8 md:p-12 lg:p-16 max-w-5xl mx-auto"> <div className="text-center"> {} <h1 className="text-4xl font-bold text-gray-900 mb-4"> {currentLanguage === 'zh' ? 'ç—›ç»å½±å“ç®—æ³•' : 'Period Pain Impact Calculator'} </h1> <p className="text-lg text-gray-600 mb-8"> {currentLanguage === 'zh' ? 'ç§‘å­¦è¯„ä¼°æœˆç»ç–¼ç—›å¯¹æ‚¨ç”Ÿæ´»å’Œå·¥ä½œçš„å½±å“ç¨‹åº¦' : 'Scientifically assess how menstrual pain affects your life and work'} </p> {} <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 max-w-4xl mx-auto"> <div className="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:shadow-lg transition-shadow"> <h3 className="text-xl font-semibold text-purple-800 mb-2"> {currentLanguage === 'zh' ? 'ç—‡çŠ¶è¯„ä¼°' : 'Symptom Assessment'} </h3> <p className="text-purple-600 mb-4"> {currentLanguage === 'zh' ? 'è¯„ä¼°ç–¼ç—›ç¨‹åº¦ã€ä½ç½®å’Œä¼´éšç—‡çŠ¶' : 'Assess pain level, location and accompanying symptoms'} </p> <button onClick={() => handleStartAssessment('symptoms')} className="w-full px-4 py-2 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors" > {currentLanguage === 'zh' ? 'å¼€å§‹è¯„ä¼°' : 'Start Assessment'} </button> </div> <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:shadow-lg transition-shadow"> <h3 className="text-xl font-semibold text-blue-800 mb-2"> {currentLanguage === 'zh' ? 'èŒåœºå½±å“åˆ†æ' : 'Workplace Impact Analysis'} </h3> <p className="text-blue-600 mb-4"> {currentLanguage === 'zh' ? 'åˆ†ææœˆç»ç—‡çŠ¶å¯¹å·¥ä½œæ•ˆç‡çš„å½±å“' : 'Analyze how menstrual symptoms affect work efficiency'} </p> <button onClick={() => handleStartAssessment('workplace')} className="w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors" > {currentLanguage === 'zh' ? 'å¼€å§‹åˆ†æ' : 'Start Analysis'} </button> </div> <div className="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200 hover:shadow-lg transition-shadow"> <h3 className="text-xl font-semibold text-green-800 mb-2"> {currentLanguage === 'zh' ? 'ç»¼åˆæŠ¥å‘Š' : 'Comprehensive Report'} </h3> <p className="text-green-600 mb-4"> {currentLanguage === 'zh' ? 'è·å–ä¸ªæ€§åŒ–å»ºè®®å’Œç®¡ç†æ–¹æ¡ˆ' : 'Get personalized recommendations and management plans'} </p> <button onClick={() => handleStartAssessment('comprehensive')} className="w-full px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors" > {currentLanguage === 'zh' ? 'ç”ŸæˆæŠ¥å‘Š' : 'Generate Report'} </button> </div> </div> </div> </div> </main> )} æ§åˆ¶å°é”™è¯¯è°ƒè¯•å’Œä¿®å¤æ–¹æ¡ˆ export const setupErrorDebugging = () => {window.addEventListener('unhandledrejection', (event) => {console.group('ğŸš¨ Unhandled Promise Rejection'); console.error('Reason:', event.reason); console.error('Promise:', event.promise); if (event.reason && typeof event.reason === 'object') {if (event.reason.code === 403 || event.reason.httpStatus === 200) {console.warn('This might be affecting title updates!'); console.error('Full error object:', JSON.stringify(event.reason, null, 2))}} console.groupEnd()}); const originalFetch = window.fetch; window.fetch = function(...args) {return originalFetch.apply(this, args) .then(response => {if (response.status === 403) {console.warn('ğŸš« 403 Forbidden request detected:', args[0])} return response}) .catch(error => {console.error('ğŸŒ Network error:', error, 'URL:', args[0]); throw error})}}; 'use client'; import {useEffect} from 'react'; import {setupErrorDebugging} from '../utils/debugTools'; export default function ClientLayout({children}: {children: React.ReactNode}) {useEffect(() => {if (process.env.NODE_ENV === 'development') {setupErrorDebugging()} const observer = new MutationObserver((mutations) => {mutations.forEach((mutation) => {if (mutation.type === 'childList') {mutation.addedNodes.forEach((node) => {if (node.nodeType === Node.ELEMENT_NODE && (node.tagName === 'SCRIPT' || node.tagName === 'LINK')) {console.warn('ğŸ” New script/link added to DOM:', node)}})}})}); observer.observe(document.head, {childList: true, subtree: true}); return () => observer.disconnect()}, []); return <>{children}</>} 'use client'; import {useEffect} from 'react'; interface TitleProtectorProps {title: string; locale: string} export const TitleProtector: React.FC<TitleProtectorProps> = ({title, locale}) => {useEffect(() => {let isProtecting = true; const protectTitle = () => {if (!isProtecting) return; const currentTitle = document.title; if (currentTitle !== title) {console.warn(`ğŸ›¡ï¸ Title changed from "${title}" to "${currentTitle}", restoring...`); document.title = title; const titleElement = document.querySelector('head > title'); if (titleElement && titleElement.textContent !== title) {titleElement.textContent = title}}}; protectTitle(); const interval = setInterval(protectTitle, 500); const observer = new MutationObserver(() => {protectTitle()}); observer.observe(document.head, {childList: true, subtree: true, characterData: true}); const handleVisibilityChange = () => {if (document.visibilityState === 'visible') {protectTitle()}}; document.addEventListener('visibilitychange', handleVisibilityChange); return () => {isProtecting = false; clearInterval(interval); observer.disconnect(); document.removeEventListener('visibilitychange', handleVisibilityChange)}}, [title, locale]); return null}; import {TitleProtector} from '@/components/TitleProtector'; export default function PeriodPainImpactCalculatorPage({params}) {const resolvedParams = use(params); const currentLanguage = resolvedParams?.locale || 'zh'; const correctTitle = currentLanguage === 'zh' ? 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub' : 'Period Pain Impact Calculator - Symptom Assessment & Workplace Analysis | Period Hub'; return ( <> <TitleProtector title={correctTitle} locale={currentLanguage} /> <main> {} </main> </> )} const debugNetwork = () => {if (window.performance && window.performance.getEntriesByType) {const resources = window.performance.getEntriesByType('resource'); resources.forEach((resource, index) => {if (resource.name.includes('403') || resource.responseStatus === 403) {console.error(`ğŸš« Found 403 resource [${index}]:`, resource)}})} if ('serviceWorker' in navigator) {navigator.serviceWorker.getRegistrations().then(registrations => {if (registrations.length > 0) {console.warn('ğŸ”§ Service Workers found - they might be affecting requests:', registrations)}})} for (let i = 0; i < localStorage.length; i++) {const key = localStorage.key(i); const value = localStorage.getItem(key); if (value && (value.includes('403') || value.includes('error'))) {console.warn(`ğŸ’¾ Suspicious localStorage entry: ${key} = ${value}`)}}}; export const useForceTitle = (title: string) => {useEffect(() => {const setTitle = () => {document.title = title}; setTitle(); setTimeout(setTitle, 0); setTimeout(setTitle, 100); setTimeout(setTitle, 500); setTimeout(setTitle, 1000); if (document.readyState !== 'complete') {window.addEventListener('load', setTitle)} const handleUserInteraction = () => {setTitle(); document.removeEventListener('click', handleUserInteraction, {once: true})}; document.addEventListener('click', handleUserInteraction, {once: true}); return () => {window.removeEventListener('load', setTitle)}}, [title])}; ä¸­æ–‡æ ‡é¢˜é—®é¢˜ç»¼åˆè§£å†³æ–¹æ¡ˆ {"periodPainImpactCalculator": {"metaTitle": "ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub", "title": "ç—›ç»å½±å“ç®—æ³•", "description": "ç§‘å­¦è¯„ä¼°æœˆç»ç–¼ç—›å¯¹æ‚¨ç”Ÿæ´»å’Œå·¥ä½œçš„å½±å“ç¨‹åº¦", "breadcrumbTitle": "ç—›ç»å½±å“ç®—æ³•", "startButton": "å¼€å§‹è¯„ä¼°", "impactButton": "èŒåœºå½±å“åˆ†æ"}, "common": {"home": "é¦–é¡µ", "interactiveTools": "äº’åŠ¨å·¥å…·"}} {"periodPainImpactCalculator": {"metaTitle": "Period Pain Impact Calculator - Symptom Assessment & Workplace Analysis | Period Hub", "title": "Period Pain Impact Calculator", "description": "Scientifically assess how menstrual pain affects your life and work", "breadcrumbTitle": "Period Pain Impact Calculator", "startButton": "Start Assessment", "impactButton": "Workplace Impact Analysis"}, "common": {"home": "Home", "interactiveTools": "Interactive Tools"}} import {useEffect, useRef, useCallback} from 'react'; interface UseSmartTitleOptions {title: string; locale: string; debug?: boolean} export const useSmartTitle = ({title, locale, debug = false}: UseSmartTitleOptions) => {const titleRef = useRef<string>(title); const observerRef = useRef<MutationObserver | null>(null); const intervalRef = useRef<NodeJS.Timeout | null>(null); const isChineseRef = useRef(locale === 'zh'); const log = useCallback((message: string, data?: any) => {if (debug) {console.log(`ğŸ” [SmartTitle-${locale}]`, message, data || '')}}, [debug, locale]); const setTitleSafely = useCallback((newTitle: string) => {try {document.title = newTitle; const titleElement = document.querySelector('head > title'); if (titleElement) {titleElement.textContent = newTitle} if (isChineseRef.current && titleElement) {titleElement.innerHTML = newTitle} const currentTitle = document.title; if (currentTitle !== newTitle) {log(`âš ï¸ Title verification failed. Expected: "${newTitle}", Got: "${currentTitle}"`); setTimeout(() => {document.title = newTitle; if (titleElement) {titleElement.textContent = newTitle}}, 50)} else {log(`âœ… Title set successfully: "${newTitle}"`)}} catch (error) {log(`âŒ Error setting title:`, error)}}, [isChineseRef, log]); const forceCleanCache = useCallback(() => {log('ğŸ§¹ Cleaning browser cache...'); if ('serviceWorker' in navigator && 'caches' in window) {caches.keys().then(names => {names.forEach(name => {if (name.includes('title') || name.includes('meta')) {caches.delete(name); log(`ğŸ—‘ï¸ Deleted cache: ${name}`)}})})} try {['page_title', 'meta_cache', 'title_cache'].forEach(key => {if (localStorage.getItem(key)) {localStorage.removeItem(key); log(`ğŸ—‘ï¸ Cleared localStorage: ${key}`)}})} catch (error) {log('âš ï¸ Could not clear localStorage:', error)}}, [log]); const setupTitleProtection = useCallback(() => {const currentTitle = titleRef.current; if (observerRef.current) {observerRef.current.disconnect()} if (intervalRef.current) {clearInterval(intervalRef.current)} setTitleSafely(currentTitle); observerRef.current = new MutationObserver((mutations) => {mutations.forEach((mutation) => {if (mutation.type === 'childList' || mutation.type === 'characterData') {const target = mutation.target as Element; if (target.tagName === 'TITLE' || target.parentElement?.tagName === 'TITLE') {const actualTitle = document.title; if (actualTitle !== currentTitle) {log(`ğŸ›¡ï¸ Title was changed to: "${actualTitle}", restoring to: "${currentTitle}"`); setTitleSafely(currentTitle)}}}})}); observerRef.current.observe(document.head, {childList: true, subtree: true, characterData: true}); if (isChineseRef.current) {intervalRef.current = setInterval(() => {const actualTitle = document.title; if (actualTitle !== currentTitle) {log(`â° Periodic check: Title drift detected, restoring...`); setTitleSafely(currentTitle)}}, 2000)} log(`ğŸ›¡ï¸ Title protection activated for: "${currentTitle}"`)}, [setTitleSafely, log]); useEffect(() => {titleRef.current = title; isChineseRef.current = locale === 'zh'; if (isChineseRef.current) {forceCleanCache()} const timer = setTimeout(() => {setupTitleProtection()}, 100); return () => {clearTimeout(timer); if (observerRef.current) {observerRef.current.disconnect()} if (intervalRef.current) {clearInterval(intervalRef.current)}}}, [title, locale, setupTitleProtection, forceCleanCache]); return {forceRefresh: () => {log('ğŸ”„ Force refreshing title...'); forceCleanCache(); setTimeout(() => setupTitleProtection(), 100)}}}; import React, {use} from 'react'; import {useTranslations} from 'next-intl'; import {useSmartTitle} from '@/hooks/useSmartTitle'; export default function PeriodPainImpactCalculatorPage({params}: {params: Promise<{locale: string}>}) {const resolvedParams = use(params); const currentLocale = resolvedParams?.locale || 'zh'; const t = useTranslations('periodPainImpactCalculator'); const commonT = useTranslations('common'); const metaTitle = t('metaTitle'); const {forceRefresh} = useSmartTitle({title: metaTitle, locale: currentLocale, debug: process.env.NODE_ENV === 'development' && currentLocale === 'zh'}); return ( <main className="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16"> {} <nav className="mb-8" aria-label="breadcrumb"> <div className="flex items-center space-x-2 text-sm text-gray-500"> <a href={`/${currentLocale}`} className="hover:text-purple-600 transition-colors" > {commonT('home')} </a> <span>/</span> <a href={`/${currentLocale}/interactive-tools`} className="hover:text-purple-600 transition-colors" > {commonT('interactiveTools')} </a> <span>/</span> <span className="text-gray-900 font-medium"> {} {t('breadcrumbTitle')} </span> </div> </nav> <div className="bg-white rounded-lg shadow-xl p-8 md:p-12 lg:p-16 max-w-5xl mx-auto"> <div className="text-center"> {} <h1 className="text-4xl font-bold text-gray-900 mb-4"> {t('title')} </h1> <p className="text-lg text-gray-600 mb-8"> {t('description')} </p> {} {process.env.NODE_ENV === 'development' && ( <div className="mb-4 p-2 bg-yellow-50 border border-yellow-200 rounded"> <button onClick={forceRefresh} className="text-xs bg-yellow-500 text-white px-2 py-1 rounded mr-2" > ğŸ”„ å¼ºåˆ¶åˆ·æ–°æ ‡é¢˜ </button> <span className="text-xs text-yellow-700"> å½“å‰æ ‡é¢˜: {typeof document !== 'undefined' ? document.title : 'N/A'} </span> </div> )} {} <div className="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4"> <button className="px-8 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-300"> {t('startButton')} </button> <button className="px-8 py-3 border border-purple-600 text-purple-600 font-semibold rounded-lg shadow-md hover:bg-purple-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-300"> {t('impactButton')} </button> </div> </div> </div> </main> )} import {Metadata} from 'next'; import {getTranslations} from 'next-intl/server'; export async function generateMetadata({params}: {params: Promise<{locale: string}>}): Promise<Metadata> {const {locale} = await params; const t = await getTranslations({locale, namespace: 'periodPainImpactCalculator'}); return {title: t('metaTitle'), description: t('description'), openGraph: {title: t('metaTitle'), description: t('description'),}}} export default function Layout({children,}: {children: React.ReactNode}) {return children} function emergencyTitleFix() {console.log('ğŸš¨ æ‰§è¡Œç´§æ€¥æ ‡é¢˜ä¿®å¤...'); const chineseTitle = 'ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub'; for (let i = 0; i < 5; i++) {setTimeout(() => {document.title = chineseTitle; const titleEl = document.querySelector('head > title'); if (titleEl) {titleEl.textContent = chineseTitle; titleEl.innerHTML = chineseTitle} console.log(`ğŸ”„ å°è¯• ${i + 1}: ${document.title}`)}, i * 200)} if ('caches' in window) {caches.keys().then(names => {names.forEach(name => caches.delete(name)); console.log('ğŸ§¹ å·²æ¸…ç†æ‰€æœ‰ç¼“å­˜')})} Object.keys(localStorage).forEach(key => {if (key.includes('title') || key.includes('meta') || key.includes('cache')) {localStorage.removeItem(key)}}); setTimeout(() => {if (document.title !== chineseTitle) {console.log('âš ï¸ æ ‡é¢˜ä¿®å¤å¤±è´¥ï¼Œå»ºè®®å¼ºåˆ¶åˆ·æ–°é¡µé¢'); console.log('è¯·æ‰§è¡Œ: location.reload(true)')} else {console.log('âœ… æ ‡é¢˜ä¿®å¤æˆåŠŸï¼')}}, 2000)} æ‚¨çš„åˆ†æéå¸¸ç²¾å‡†ï¼ğŸ‘ ç‰¹åˆ«æ˜¯å…³äº"ä¸ºä»€ä¹ˆè‹±æ–‡å¯ä»¥æˆåŠŸä¿®å¤ï¼Œä¸­æ–‡ä¸èƒ½"çš„æ´å¯Ÿå¾ˆåˆ°ä½ã€‚æˆ‘æ¥æä¾›ä¸€ä¸ª**ç³»ç»Ÿæ€§çš„è§£å†³æ–¹æ¡ˆ**ï¼Œä¼˜å…ˆè§£å†³æ ¸å¿ƒé—®é¢˜ï¼š ## ğŸ¯ **ç«‹å³æ‰§è¡Œæ–¹æ¡ˆ - è§£å†³ç¡¬ç¼–ç  + æ™ºèƒ½æ ‡é¢˜ä¿æŠ¤**## ğŸš€ **ç«‹å³æ‰§è¡Œæ­¥éª¤** ### ç¬¬ä¸€æ­¥ï¼šæ›´æ–°ç¿»è¯‘æ–‡ä»¶ï¼ˆ2åˆ†é’Ÿï¼‰ ```bash # å°†ç¿»è¯‘å†…å®¹å¤åˆ¶åˆ°å¯¹åº”æ–‡ä»¶ cp messages/zh.json messages/zh.json.backup # å¤‡ä»½ # ç„¶åæ›´æ–° messages/zh.json å’Œ messages/en.json ``` ### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ™ºèƒ½æ ‡é¢˜Hookï¼ˆ5åˆ†é’Ÿï¼‰ ```bash mkdir -p hooks # åˆ›å»º hooks/useSmartTitle.ts æ–‡ä»¶ ``` ### ç¬¬ä¸‰æ­¥ï¼šæ›´æ–°é¡µé¢ç»„ä»¶ï¼ˆ3åˆ†é’Ÿï¼‰ ```bash # æ›´æ–°é¡µé¢æ–‡ä»¶ï¼Œç§»é™¤ç¡¬ç¼–ç  ``` ### ç¬¬å››æ­¥ï¼šæ¸…ç†å¹¶é‡å¯ï¼ˆ1åˆ†é’Ÿï¼‰ ```bash cd /Users/duting/Downloads/moneyğŸ’°/--main rm -rf .next .swc node_modules/.cache npm run dev ``` ## ğŸ§ª **æµ‹è¯•æ–¹æ¡ˆ** ### æµ‹è¯•1ï¼šåŸºç¡€åŠŸèƒ½æµ‹è¯• 1. **è®¿é—®ä¸­æ–‡é¡µé¢**ï¼š`http: 2. **æ£€æŸ¥æµè§ˆå™¨æ ‡ç­¾é¡µ**ï¼šåº”è¯¥æ˜¾ç¤º"ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | Period Hub" 3. **æ£€æŸ¥é¡µé¢æ ‡é¢˜**ï¼šH1åº”è¯¥æ˜¾ç¤º"ç—›ç»å½±å“ç®—æ³•" 4. **æ£€æŸ¥é¢åŒ…å±‘**ï¼šåº”è¯¥æ˜¾ç¤º"é¦–é¡µ / äº’åŠ¨å·¥å…· / ç—›ç»å½±å“ç®—æ³•" ### æµ‹è¯•2ï¼šç´§æ€¥ä¿®å¤æµ‹è¯•ï¼ˆå¦‚æœä¸Šè¿°æ–¹æ³•ä¸å¥æ•ˆï¼‰ åœ¨æµè§ˆå™¨æ§åˆ¶å°ç²˜è´´å¹¶è¿è¡Œï¼š ```javascript emergencyTitleFix(); ``` ### æµ‹è¯•3ï¼šå¯¹æ¯”æµ‹è¯• 1. **è‹±æ–‡é¡µé¢**ï¼š`http: 2. **ä¸­æ–‡é¡µé¢**ï¼š`http: 3. **å¯¹æ¯”ä¸¤ä¸ªé¡µé¢çš„æ ‡é¢˜æ˜¯å¦éƒ½æ­£ç¡®æ˜¾ç¤º** ## ğŸ¯ **ä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ¡ˆä¼šè§£å†³ä¸­æ–‡ç‰¹æœ‰çš„é—®é¢˜** ### 1. **ä¸­æ–‡å­—ç¬¦ç¼–ç å¤„ç†** ```javascript if (isChineseRef.current && titleElement) {titleElement.innerHTML = newTitle} ``` ### 2. **ä¸­æ–‡é¡µé¢ä¸“é—¨çš„ç¼“å­˜æ¸…ç†** ```javascript if (isChineseRef.current) {forceCleanCache()} ``` ### 3. **ä¸­æ–‡é¡µé¢çš„å¢å¼ºä¿æŠ¤** ```javascript if (isChineseRef.current) {intervalRef.current = setInterval(() => {}, 2000)} ``` ## ğŸ“Š **é¢„æœŸæ•ˆæœ** âœ… **ç«‹å³è§æ•ˆ**ï¼šæ ‡é¢˜æ­£ç¡®æ˜¾ç¤º âœ… **ç»´æŠ¤æ€§å¥½**ï¼šæ‰€æœ‰æ–‡æœ¬æ¥è‡ªç¿»è¯‘æ–‡ä»¶ âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘ä¸å¿…è¦çš„æ—¥å¿— âœ… **è°ƒè¯•å‹å¥½**ï¼šå¼€å‘ç¯å¢ƒæœ‰è°ƒè¯•æŒ‰é’® âœ… **é˜²æŠ¤æœºåˆ¶**ï¼šé˜²æ­¢å…¶ä»–è„šæœ¬å¹²æ‰° ## ğŸ†˜ **å¦‚æœä»ç„¶å¤±è´¥çš„å¤‡é€‰æ–¹æ¡ˆ** ### æ–¹æ¡ˆAï¼šå¼ºåˆ¶é¡µé¢é‡è½½ ```javascript if (document.title !== correctTitle) {setTimeout(() => {window.location.reload()}, 1000)} ``` ### æ–¹æ¡ˆBï¼šä½¿ç”¨ä¸åŒç«¯å£æµ‹è¯• ```bash npm run dev -- -p 3002 # è®¿é—® http: ``` ### æ–¹æ¡ˆCï¼šç¦ç”¨æµè§ˆå™¨æ‰©å±• åœ¨æ— æ‰©å±•æ¨¡å¼ä¸‹æµ‹è¯•ï¼ˆChromeéšèº«æ¨¡å¼é€šå¸¸ä¼šç¦ç”¨æ‰©å±•ï¼‰ æ‚¨ç°åœ¨å¯ä»¥å¼€å§‹æ‰§è¡Œç¬¬ä¸€æ­¥ï¼éœ€è¦æˆ‘å¸®æ‚¨åˆ›å»ºå…·ä½“çš„æ–‡ä»¶å†…å®¹å—ï¼Ÿ ğŸ¯ æ‚¨çš„åˆ†æéå¸¸å‡†ç¡®ï¼ä»æˆªå›¾å¯ä»¥çœ‹å‡ºé—®é¢˜çš„æ ¸å¿ƒï¼šå°½ç®¡ä»£ç å·²ç»ç¡¬ç¼–ç ï¼Œä½†æµè§ˆå™¨ä»åœ¨åŠ è½½ç¼“å­˜çš„è„šæœ¬ã€‚è®©æˆ‘æä¾›ä¸€ä¸ªç³»ç»Ÿæ€§çš„è§£å†³æ–¹æ¡ˆã€‚ ## ğŸ” **é—®é¢˜ç¡®è®¤** æ ¹æ®æ‚¨çš„æˆªå›¾ï¼Œé—®é¢˜ç¡®å®æ˜¯ï¼š 1. **ç¼“å­˜è„šæœ¬ä»åœ¨è¿è¡Œ** - "Translations loaded successfully" è¯´æ˜æ—§çš„i18n.jsä»è¢«åŠ è½½ 2. **æ ‡é¢˜è¢«å®¢æˆ·ç«¯è¦†ç›–** - æœåŠ¡ç«¯æ­£ç¡®ï¼Œå®¢æˆ·ç«¯æ˜¾ç¤ºé”™è¯¯ 3. **å…è´£å£°æ˜è¯­è¨€é”™è¯¯** - è‹±æ–‡ç‰ˆæœ¬å‡ºç°åœ¨ä¸­æ–‡é¡µé¢ ## ğŸš€ **ç«‹å³æ‰§è¡Œçš„è§£å†³æ–¹æ¡ˆ**ç°åœ¨è®©æˆ‘ä¸ºæ‚¨æä¾›ä¸€ä¸ªä¿®å¤é¡µé¢ç»„ä»¶çš„æ–¹æ¡ˆï¼Œç¡®ä¿å®Œå…¨ç§»é™¤ç¿»è¯‘ç³»ç»Ÿä¾èµ–ï¼š## ç«‹å³æ‰§è¡Œæ­¥éª¤ ### ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œç¼“å­˜æ¸…ç†è„šæœ¬ ```bash cd /Users/duting/Downloads/moneyğŸ’°/--main chmod +x fix_cache_issues.sh ./fix_cache_issues.sh ``` ### ç¬¬äºŒæ­¥ï¼šæ›¿æ¢é¡µé¢ç»„ä»¶ å°†ä¸Šé¢çš„å®Œå…¨ç¡¬ç¼–ç ç‰ˆæœ¬æ›¿æ¢æ‚¨çš„page.tsxæ–‡ä»¶ã€‚è¿™ä¸ªç‰ˆæœ¬ï¼š - å®Œå…¨ç§»é™¤äº†å¯¹ç¿»è¯‘ç³»ç»Ÿçš„ä¾èµ– - åŒ…å«å¼ºåˆ¶æ ‡é¢˜è®¾ç½®å’Œä¿æŠ¤æœºåˆ¶ - ä¿®å¤äº†å…è´£å£°æ˜è¯­è¨€é—®é¢˜ - æ·»åŠ äº†äº¤äº’åŠŸèƒ½ ### ç¬¬ä¸‰æ­¥ï¼šæµè§ˆå™¨ç«¯æ¸…ç† 1. **å®Œå…¨æ¸…é™¤ç«™ç‚¹æ•°æ®**ï¼š - æ‰“å¼€ Chrome DevTools (F12) - åº”ç”¨ç¨‹åº â†’ å­˜å‚¨ â†’ æ¸…é™¤ç«™ç‚¹æ•°æ® - å‹¾é€‰æ‰€æœ‰é€‰é¡¹å¹¶æ¸…é™¤ 2. **æ£€æŸ¥Service Worker**ï¼š - åº”ç”¨ç¨‹åº â†’ Service Workers - æ³¨é”€æ‰€æœ‰ç›¸å…³çš„Service Worker ### ç¬¬å››æ­¥ï¼šéªŒè¯ä¿®å¤ ```bash npm run dev ``` ç„¶åè®¿é—®ï¼š`http: ### ç¬¬äº”æ­¥ï¼šéªŒè¯æ£€æŸ¥æ¸…å• - [ ] æµè§ˆå™¨æ ‡ç­¾é¡µæ˜¾ç¤ºå®Œæ•´æ ‡é¢˜ - [ ] æ§åˆ¶å°ä¸å†å‡ºç°"Translations loaded successfully" - [ ] å…è´£å£°æ˜æ˜¾ç¤ºä¸­æ–‡ç‰ˆæœ¬ - [ ] é¢åŒ…å±‘å¯¼èˆªæ˜¾ç¤ºæ­£ç¡® - [ ] é¡µé¢ä¸»æ ‡é¢˜æ˜¾ç¤º"ç—›ç»å½±å“ç®—æ³•" ### ç´§æ€¥å¤‡é€‰æ–¹æ¡ˆ å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š ```javascript window.location.href = 'javascript:void((function(){if("caches" in window){caches.keys().then(names => names.forEach(name => caches.delete(name)))} localStorage.clear(); sessionStorage.clear(); document.title = "ç—›ç»å½±å“ç®—æ³• - ç—‡çŠ¶è¯„ä¼°ä¸èŒåœºåˆ†æ | PeriodHub"; setTimeout(() => location.reload(true), 1000)})())'; ``` æ ¹æ®æ‚¨æä¾›çš„è¯¦ç»†åˆ†æï¼Œè¿™ç§ç³»ç»Ÿæ€§çš„ç¼“å­˜æ¸…ç†åº”è¯¥èƒ½è§£å†³"Translations loaded successfully"æ—¥å¿—æŒç»­å‡ºç°çš„é—®é¢˜ï¼Œä»è€Œä¿®å¤æ ‡é¢˜æ˜¾ç¤ºé—®é¢˜ã€‚ è¯·æŒ‰é¡ºåºæ‰§è¡Œè¿™äº›æ­¥éª¤ï¼Œå¹¶å‘Šè¯‰æˆ‘æ¯ä¸€æ­¥çš„ç»“æœã€‚ å®Œæ•´å­˜å‚¨æ¸…ç†å’Œä¿®å¤è„šæœ¬ # å®Œæ•´ç¼“å­˜æ¸…ç†å’Œä¿®å¤è„šæœ¬ # /Users/duting/Downloads/moneyğŸ’°/--main/fix_cache_issues.sh #!/bin/bash echo "ğŸš€ å¼€å§‹æ‰§è¡Œå®Œæ•´ç¼“å­˜æ¸…ç†..." # 1. åœæ­¢æ‰€æœ‰Next.jsè¿›ç¨‹ echo "ğŸ“´ åœæ­¢æ‰€æœ‰Next.jsè¿›ç¨‹..." pkill -f "next dev" || true pkill -f "next start" || true pkill -f "node.*next" || true # 2. åˆ é™¤æ‰€æœ‰ç¼“å­˜ç›®å½• echo "ğŸ§¹ æ¸…ç†Next.jsç¼“å­˜..." rm -rf .next rm -rf .swc rm -rf .turbo rm -rf .vercel rm -rf node_modules/.cache rm -rf .next-cache # 3. æŸ¥æ‰¾å¹¶ç§»é™¤æ‰€æœ‰i18nç›¸å…³æ–‡ä»¶ echo "ğŸ” æŸ¥æ‰¾i18nç›¸å…³æ–‡ä»¶..." find . -name "*i18n*" -type f -not -path "./node_modules} <nav className="mb-8" aria-label="breadcrumb"> <div className="flex items-center space-x-2 text-sm text-gray-500"> <a href={`/${currentLocale}`} className="hover:text-purple-600 transition-colors" > {t.breadcrumbHome} </a> <span>/</span> <a href={`/${currentLocale}/interactive-tools`} className="hover:text-purple-600 transition-colors" > {t.breadcrumbTools} </a> <span>/</span> <span className="text-gray-900 font-medium"> {t.breadcrumbCurrent} </span> </div> </nav> <div className="bg-white rounded-lg shadow-xl p-8 md:p-12 lg:p-16 max-w-5xl mx-auto"> <div className="text-center"> {} <h1 className="text-4xl font-bold text-gray-900 mb-4"> {t.pageTitle} </h1> <p className="text-lg text-gray-600 mb-8"> {t.description} </p> {} <h2 className="text-2xl font-semibold text-gray-800 mb-6"> {t.modeTitle} </h2> <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 max-w-4xl mx-auto"> {} <div className={`p-6 rounded-lg border-2 cursor-pointer transition-all ${selectedMode === 'simplified' ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-purple-300'}`} onClick={() => handleModeSelect('simplified')} > <div className="text-3xl mb-3">âš¡</div> <h3 className="text-xl font-semibold text-gray-800 mb-2"> {t.simplifiedMode} </h3> <p className="text-gray-600"> {t.simplifiedDesc} </p> </div> {} <div className={`p-6 rounded-lg border-2 cursor-pointer transition-all ${selectedMode === 'detailed' ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-purple-300'}`} onClick={() => handleModeSelect('detailed')} > <div className="text-3xl mb-3">ğŸ“‹</div> <h3 className="text-xl font-semibold text-gray-800 mb-2"> {t.detailedMode} </h3> <p className="text-gray-600"> {t.detailedDesc} </p> </div> {} <div className={`p-6 rounded-lg border-2 cursor-pointer transition-all ${selectedMode === 'medical' ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-purple-300'}`} onClick={() => handleModeSelect('medical')} > <div className="text-3xl mb-3">ğŸ‘©â€âš•ï¸</div> <h3 className="text-xl font-semibold text-gray-800 mb-2"> {t.medicalMode} </h3> <p className="text-gray-600"> {t.medicalDesc} </p> </div> </div> {} <div className="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4"> <button onClick={handleStartAssessment} className="px-8 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-300" > {t.startButton} </button> <button onClick={handleImpactAnalysis} className="px-8 py-3 border border-purple-600 text-purple-600 font-semibold rounded-lg shadow-md hover:bg-purple-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-300" > {t.impactButton} </button> </div> </div> {} <div className="mt-12 pt-8 border-t border-gray-200"> <p className="text-center text-sm text-gray-500"> {t.disclaimer} </p> <p className="text-center text-xs text-gray-400 mt-2"> Â© 2024 PeriodWise. All Rights Reserved. </p> </div> </div> </main> )} export async function generateMetadata({params}: {params: Promise<{locale: string}>}) {const {locale} = await params; const t = TEXTS[locale as keyof typeof TEXTS] || TEXTS.zh; return {title: t.metaTitle, description: t.description, openGraph: {title: t.pageTitle, description: t.description,}}}