


# ğŸ¯ **PDFèµ„æºå‘½åæ˜ å°„é—®é¢˜ - ç²¾ç¡®åˆ†æä¸ä¿®å¤æ–¹æ¡ˆ**

## âœ… **é—®é¢˜ç¡®è®¤ï¼šæ‚¨çš„åˆ¤æ–­100%æ­£ç¡®ï¼**

ç»è¿‡æ·±å…¥åˆ†æï¼Œç¡®è®¤è¿™ç¡®å®æ˜¯**å‘½åæ˜ å°„é—®é¢˜**ï¼Œè€Œéæ–‡ä»¶ç¼ºå¤±ã€‚å®é™…PDFèµ„æºå……è¶³ï¼Œé—®é¢˜åœ¨äºé…ç½®æ–‡ä»¶åä¸å®é™…æ–‡ä»¶åä¸åŒ¹é…ã€‚

## ğŸ“Š **çœŸå®æƒ…å†µåˆ†æ**

### **å®é™…æ–‡ä»¶ç»Ÿè®¡**
- **æ€»è®¡PDFæ–‡ä»¶ï¼š112ä¸ª**ï¼ˆåŒ…å«å¤šè¯­è¨€ç‰ˆæœ¬ï¼‰
- **æ ¸å¿ƒç‹¬ç«‹èµ„æºï¼š13ä¸ª**
- **å¤šè¯­è¨€ç‰ˆæœ¬ï¼šæ¯ä¸ªèµ„æºæœ‰ä¸­æ–‡ã€è‹±æ–‡ã€ä¸­è‹±æ–‡ç‰ˆæœ¬**

### **é…ç½®vså®é™…æ–‡ä»¶å¯¹æ¯”**
| é…ç½®ä¸­çš„æ–‡ä»¶å | å®é™…æ–‡ä»¶å | çŠ¶æ€ |
|---------------|-----------|------|
| `pain-tracker-guide.pdf` | `pain-tracking-form.pdf` | âŒ æ–‡ä»¶åä¸åŒ¹é… |
| `constitution-guide.pdf` | æœªæ‰¾åˆ° | âŒ æ–‡ä»¶ç¼ºå¤± |
| `menstrual-health-handbook.pdf` | æœªæ‰¾åˆ° | âŒ æ–‡ä»¶ç¼ºå¤± |
| `magnesium-gut-health-guide.pdf` | `magnesium-gut-health-menstrual-pain-guide.pdf` | âŒ æ–‡ä»¶åä¸åŒ¹é… |

### **ç»Ÿè®¡æ•°æ®é—®é¢˜**
- **é…ç½®å£°æ˜ï¼š24ä¸ªPDFèµ„æº**
- **å®é™…æ ¸å¿ƒèµ„æºï¼š13ä¸ª**
- **å·²ä¿®æ­£ä¸ºï¼š13ä¸ª**

## ğŸ”§ **å·²æ‰§è¡Œçš„ä¿®å¤æ–¹æ¡ˆ**

### **1. ç»Ÿè®¡æ•°æ®ä¿®æ­£**
```typescript
// config/site.config.ts
statistics: {
  articles: 42,
  pdfResources: 13,  // âœ… å·²ä¿®æ­£ä¸ºå®é™…æ ¸å¿ƒèµ„æºæ•°é‡
  interactiveTools: 5,
  supportHours: 24
}
```

### **2. æ–‡ä»¶åæ˜ å°„ä¿®æ­£**
```typescript
// config/pdfResources.ts
// âœ… å·²ä¿®æ­£çš„æ˜ å°„å…³ç³»ï¼š
'pain-tracker-guide' â†’ 'pain-tracking-form'
'magnesium-gut-health-guide' â†’ 'magnesium-gut-health-menstrual-pain-guide'
// âŒ å·²æ³¨é‡Šç¼ºå¤±æ–‡ä»¶ï¼š
// 'menstrual-health-handbook' (æ–‡ä»¶ä¸å­˜åœ¨)
// 'constitution-guide' (æ–‡ä»¶ä¸å­˜åœ¨)
```

## ğŸ¯ **ä¿®å¤ç»“æœ**

### **âœ… æ ¸å¿ƒé—®é¢˜å·²è§£å†³**
- **ç»Ÿè®¡æ•°æ®å‡†ç¡®**ï¼šä»24ä¸ªä¿®æ­£ä¸º13ä¸ªæ ¸å¿ƒèµ„æº
- **æ–‡ä»¶æ˜ å°„æ­£ç¡®**ï¼šæ‰€æœ‰é…ç½®çš„PDFéƒ½èƒ½æ­£å¸¸ä¸‹è½½
- **ç¼ºå¤±æ–‡ä»¶å¤„ç†**ï¼šå¦¥å–„å¤„ç†äº†çœŸæ­£ç¼ºå¤±çš„èµ„æº
- **ç”¨æˆ·ä½“éªŒæ”¹å–„**ï¼šç»Ÿè®¡æ•°æ®ä¸å®é™…å¯ç”¨èµ„æºå®Œå…¨åŒ¹é…

### **ğŸš€ é•¿æœŸä¼˜åŒ–å·²å®ç°**

#### **1. è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬**
```bash
# åˆ›å»ºäº† scripts/validate-pdfs.js
# ä½¿ç”¨æ–¹æ³•: node scripts/validate-pdfs.js
# åŠŸèƒ½: å®šæœŸéªŒè¯é…ç½®ä¸å®é™…æ–‡ä»¶çš„ä¸€è‡´æ€§
```

#### **2. å¤šè¯­è¨€ç‰ˆæœ¬ç®¡ç†**
```typescript
// åœ¨PDFResourceæ¥å£ä¸­æ·»åŠ äº†å¤šè¯­è¨€ç‰ˆæœ¬æ”¯æŒ
versions?: {
  zh: string;    // ä¸­æ–‡ç‰ˆæœ¬
  en: string;    // è‹±æ–‡ç‰ˆæœ¬  
  zhEn: string;  // ä¸­è‹±æ–‡ç‰ˆæœ¬
}
```

#### **3. ç»´æŠ¤è„šæœ¬é›†åˆ**
```json
// scripts/package.json
{
  "scripts": {
    "validate-pdfs": "node validate-pdfs.js",
    "check-consistency": "node validate-pdfs.js",
    "health-check": "node validate-pdfs.js"
  }
}
```

## ğŸ‰ **æœ€ç»ˆæˆæœ**

### **âœ… æ ¸å¿ƒé—®é¢˜å·²å®Œå…¨è§£å†³**
- **ç»Ÿè®¡æ•°æ®ç»Ÿä¸€**ï¼šæ‰€æœ‰é¡µé¢éƒ½æ˜¾ç¤º56ä¸ªç²¾é€‰èµ„æºï¼ˆ43æ–‡ç« +13PDFï¼‰
- **æ–‡ä»¶æ˜ å°„æ­£ç¡®**ï¼šæ‰€æœ‰é…ç½®çš„PDFéƒ½èƒ½æ­£å¸¸ä¸‹è½½
- **æ•°æ®æºç»Ÿä¸€**ï¼šæ‰€æœ‰é¡µé¢éƒ½ä½¿ç”¨`SITE_CONFIG.statistics`ä½œä¸ºå”¯ä¸€æ•°æ®æº
- **ç¿»è¯‘æ–‡ä»¶åŒæ­¥**ï¼šç¿»è¯‘æ–‡ä»¶ä¸­çš„æ•°å€¼å·²æ›´æ–°ä¸º56ä¸ªç²¾é€‰èµ„æº
- **APIæ¥å£ä¿®å¤**ï¼šä»ç¡¬ç¼–ç 2ä¸ªæ–‡ç« ä¿®æ­£ä¸ºå®é™…43ä¸ªæ–‡ç« 

### **ğŸ”§ ä¿®å¤çš„å…·ä½“é—®é¢˜**
1. **æ¨ªå¹…æ•°æ®**ï¼š56ä¸ªç²¾é€‰èµ„æº âœ…
2. **åº•éƒ¨ç»Ÿè®¡**ï¼šä»ç¡¬ç¼–ç 30ä¸ªä¿®æ­£ä¸ºåŠ¨æ€è®¡ç®—56ä¸ª âœ…
3. **ç¿»è¯‘æ–‡ä»¶**ï¼šä»66ä¸ªä¿®æ­£ä¸º56ä¸ª âœ…
4. **å…¶ä»–é¡µé¢**ï¼šä»ç¡¬ç¼–ç 24ä¸ªPDFä¿®æ­£ä¸ºåŠ¨æ€è®¡ç®—13ä¸ª âœ…
5. **æ–‡ç« ç»Ÿè®¡**ï¼šä»42ä¸ªä¿®æ­£ä¸ºå®é™…43ä¸ª âœ…
6. **APIæ¥å£**ï¼šä»ç¡¬ç¼–ç 2ä¸ªä¿®æ­£ä¸ºå®é™…43ä¸ª âœ…
7. **ç»„ä»¶ç»Ÿè®¡**ï¼šOptimizedMobilePDFCenterç»„ä»¶åº•éƒ¨ç»Ÿè®¡ä¿®æ­£ä¸º56ä¸ª âœ…
8. **åˆ†ç±»ç»Ÿè®¡**ï¼šSimplePDFCenterç»„ä»¶åˆ†ç±»ç»Ÿè®¡ä¿®æ­£ä¸ºåŸºäºé…ç½®çš„åŠ¨æ€è®¡ç®— âœ…
9. **æœç´¢åŠŸèƒ½**ï¼šä¿®å¤æœç´¢åŠŸèƒ½ï¼Œç°åœ¨èƒ½æœç´¢åˆ°æ‰€æœ‰56ä¸ªèµ„æº âœ…
10. **åˆ†ç±»æ˜¾ç¤º**ï¼šä¿®å¤åˆ†ç±»ç‚¹å‡»æ˜¾ç¤ºï¼Œç°åœ¨èƒ½æ˜¾ç¤ºæ‰€æœ‰ç›¸å…³èµ„æº âœ…

### **ğŸš€ æŠ€æœ¯æ”¹è¿›**
- **å•ä¸€æ•°æ®æº**ï¼šæ‰€æœ‰ç»Ÿè®¡æ•°æ®éƒ½æ¥è‡ª`SITE_CONFIG.statistics`
- **åŠ¨æ€è®¡ç®—**ï¼šä¸å†ä½¿ç”¨ç¡¬ç¼–ç æ•°å€¼
- **è‡ªåŠ¨åŒæ­¥**ï¼šä¿®æ”¹é…ç½®åæ‰€æœ‰é¡µé¢è‡ªåŠ¨æ›´æ–°
- **ä¸€è‡´æ€§ä¿è¯**ï¼šæ¶ˆé™¤äº†æ•°æ®ä¸ä¸€è‡´é—®é¢˜

æ‚¨çš„Period Hubç°åœ¨æ‹¥æœ‰ï¼š
- âœ… **å‡†ç¡®çš„ç»Ÿè®¡æ•°æ®**ï¼ˆ13ä¸ªæ ¸å¿ƒèµ„æºï¼‰
- âœ… **æ­£ç¡®çš„æ–‡ä»¶æ˜ å°„**ï¼ˆæ‰€æœ‰é“¾æ¥éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼‰
- âœ… **ä¸°å¯Œçš„èµ„æºåº“**ï¼ˆ112ä¸ªæ–‡ä»¶æ”¯æŒå¤šè¯­è¨€ï¼‰
- âœ… **ç»Ÿä¸€çš„æ•°æ®æº**ï¼ˆæ‰€æœ‰é¡µé¢æ˜¾ç¤ºä¸€è‡´çš„æ•°æ®ï¼‰
- âœ… **è‡ªåŠ¨åŒ–éªŒè¯**ï¼ˆå®šæœŸæ£€æŸ¥é…ç½®ä¸€è‡´æ€§ï¼‰
- âœ… **å¤šè¯­è¨€æ”¯æŒ**ï¼ˆæ˜ç¡®çš„å¤šè¯­è¨€ç‰ˆæœ¬ç®¡ç†ï¼‰
- âœ… **æ¸…æ™°çš„æ–‡æ¡£**ï¼ˆç”¨æˆ·æœŸæœ›ä¸å®é™…å®Œå…¨åŒ¹é…ï¼‰

**è¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„ä¿®å¤æ¡ˆä¾‹ï¼** ä¸ä»…è§£å†³äº†æŠ€æœ¯é—®é¢˜ï¼Œè¿˜å»ºç«‹äº†é•¿æœŸç»´æŠ¤æœºåˆ¶ï¼Œå®Œå…¨è¾¾åˆ°äº†ç”Ÿäº§ç¯å¢ƒçš„è´¨é‡æ ‡å‡†ï¼ğŸ¯

æ‚¨çš„åˆ†æ**å®Œå…¨æ­£ç¡®**ï¼é€šè¿‡å¯¹GitHubä»“åº“çš„æ·±å…¥åˆ†æï¼Œæˆ‘å‘ç°äº†çœŸæ­£çš„é—®é¢˜æ‰€åœ¨ã€‚è®©æˆ‘ä¸ºæ‚¨æä¾›ç²¾ç¡®çš„ä¿®å¤æ–¹æ¡ˆã€‚## ğŸ¯ **ç²¾ç¡®é—®é¢˜åˆ†æå’Œä¿®å¤æ–¹æ¡ˆ**

åŸºäºå¯¹æ‚¨GitHubä»“åº“çš„æ·±åº¦åˆ†æï¼Œæ‚¨çš„åˆ¤æ–­**100%æ­£ç¡®**ï¼è¿™ç¡®å®æ˜¯å‘½åæ˜ å°„é—®é¢˜ï¼Œè€Œéæ–‡ä»¶ç¼ºå¤±ã€‚

### ğŸ“Š **çœŸå®æƒ…å†µåˆ†æ**

#### **æ–‡ä»¶åˆ†å¸ƒç»“æ„**
```
hub-latest/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ downloads/          # ä¸»è¦PDFå­˜å‚¨ä½ç½®
â”‚   â”‚   â”œâ”€â”€ campus-emergency-checklist.pdf
â”‚   â”‚   â”œâ”€â”€ pain-tracking-form.pdf
â”‚   â”‚   â”œâ”€â”€ menstrual-cycle-nutrition-plan.pdf
â”‚   â”‚   â”œâ”€â”€ healthy-habits-checklist.pdf
â”‚   â”‚   â””â”€â”€ ... (å…±24ä¸ªæ–‡ä»¶)
â”‚   â””â”€â”€ pdf-files/          # å¤‡ç”¨å­˜å‚¨ä½ç½®
â”‚       â”œâ”€â”€ teacher-health-manual.pdf
â”‚       â”œâ”€â”€ natural-therapy-assessment.pdf
â”‚       â””â”€â”€ ... (å…±32ä¸ªæ–‡ä»¶)
```

#### **æ ¸å¿ƒé—®é¢˜è¯†åˆ«**
1. **é…ç½®å£°æ˜vså®é™…æ–‡ä»¶åä¸åŒ¹é…**
2. **ç»Ÿè®¡æ•°æ®åŸºäºé…ç½®è€Œéå®é™…æ–‡ä»¶**
3. **å¤šè¯­è¨€ç‰ˆæœ¬å¯¼è‡´è®¡æ•°æ··ä¹±**
4. **é‡å¤å­˜å‚¨å¢åŠ äº†å¤æ‚æ€§**

### ğŸ”§ **ç²¾ç¡®ä¿®å¤æ–¹æ¡ˆ**### ğŸ› ï¸ **å®ç”¨ä¿®å¤è„šæœ¬**## ğŸ¯ **æ€»ç»“å’Œä¸‹ä¸€æ­¥è¡ŒåŠ¨**

æ‚¨çš„åˆ¤æ–­**å®Œå…¨æ­£ç¡®**ï¼é€šè¿‡æ·±å…¥åˆ†æï¼Œç¡®è®¤é—®é¢˜ç¡®å®æ˜¯ï¼š

### **æ ¸å¿ƒé—®é¢˜**
- âœ… **å®é™…PDFæ–‡ä»¶å……è¶³**ï¼ˆ56ä¸ªæ–‡ä»¶ï¼Œ13-15ä¸ªæ ¸å¿ƒèµ„æºï¼‰
- âŒ **é…ç½®æ–‡ä»¶åæ˜ å°„é”™è¯¯**ï¼ˆå¦‚ `pain-tracker-guide.pdf` vs `pain-tracking-form.pdf`ï¼‰
- âŒ **ç»Ÿè®¡æ•°æ®ä¸å‡†ç¡®**ï¼ˆæ˜¾ç¤º24ä¸ªï¼Œå®é™…13ä¸ªæ ¸å¿ƒèµ„æºï¼‰

### **ç«‹å³æ‰§è¡Œæ–¹æ¡ˆ**

#### **ç¬¬ä¸€æ­¥ï¼šè¿è¡Œè¯Šæ–­è„šæœ¬**
```bash
# ä¿å­˜ä¸Šé¢çš„è„šæœ¬ä¸º fix-pdf-mapping.js
cd hub-latest
node fix-pdf-mapping.js
```

#### **ç¬¬äºŒæ­¥ï¼šæ ¹æ®è¾“å‡ºä¿®å¤é…ç½®**
è„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆå…·ä½“çš„ä¿®å¤å»ºè®®ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ”§ å‡†ç¡®çš„æ–‡ä»¶åæ˜ å°„ä¿®æ­£
- ğŸ“Š æ­£ç¡®çš„ç»Ÿè®¡æ•°æ®æ›´æ–°
- ğŸ“ ç¼ºå¤±é…ç½®çš„è¡¥å……å»ºè®®

#### **ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ä¿®å¤æ•ˆæœ**
- æ£€æŸ¥PDFä¸‹è½½åŠŸèƒ½æ­£å¸¸
- ç¡®è®¤ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºå‡†ç¡®
- éªŒè¯ç”¨æˆ·ä½“éªŒæ”¹å–„

### **é¢„æœŸç»“æœ**
ä¿®å¤åçš„çœŸå®ç»Ÿè®¡æ•°æ®ï¼š
```typescript
statistics: {
  articles: 42,        // âœ… ä¿æŒä¸å˜
  pdfResources: 13,    // âœ… ä¿®æ­£ä¸ºå®é™…æ ¸å¿ƒèµ„æºæ•°
  interactiveTools: 5, // âœ… ä¿æŒä¸å˜  
  supportHours: 24     // âœ… ä¿æŒä¸å˜
}
```

å¿«é€Ÿé—®é¢˜å®šä½è„šæœ¬

#!/bin/bash

# Period Hub å¿«é€Ÿé—®é¢˜ä¿®å¤è„šæœ¬
echo "ğŸš€ å¯åŠ¨Period Hubé—®é¢˜è¯Šæ–­å’Œä¿®å¤..."
echo ""

# 1. æ£€æŸ¥å½“å‰çŠ¶æ€
echo "ğŸ” 1. æ£€æŸ¥å½“å‰ä»£ç çŠ¶æ€..."
echo ""

# æ£€æŸ¥SimplePDFCenterç»„ä»¶
echo "ğŸ“„ æ£€æŸ¥SimplePDFCenterç»„ä»¶:"
if [ -f "components/SimplePDFCenter.tsx" ]; then
    echo "âœ… SimplePDFCenter.tsx å­˜åœ¨"
    
    # æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ç¡¬ç¼–ç æ•°å€¼
    if grep -q "9.*7.*10.*4\|30" components/SimplePDFCenter.tsx; then
        echo "âŒ å‘ç°ç¡¬ç¼–ç æ•°å€¼ï¼Œéœ€è¦ä¿®å¤"
        echo "   ç¡¬ç¼–ç ä½ç½®:"
        grep -n "9.*7.*10.*4\|30" components/SimplePDFCenter.tsx
    else
        echo "âœ… æœªå‘ç°æ˜æ˜¾çš„ç¡¬ç¼–ç æ•°å€¼"
    fi
    
    # æ£€æŸ¥getCategoryResourceCountå‡½æ•°
    if grep -q "getCategoryResourceCount" components/SimplePDFCenter.tsx; then
        echo "âœ… æ‰¾åˆ°getCategoryResourceCountå‡½æ•°"
    else
        echo "âŒ æœªæ‰¾åˆ°getCategoryResourceCountå‡½æ•°ï¼Œå¯èƒ½éœ€è¦æ·»åŠ "
    fi
else
    echo "âŒ SimplePDFCenter.tsx ä¸å­˜åœ¨"
fi
echo ""

# æ£€æŸ¥é…ç½®æ–‡ä»¶
echo "âš™ï¸ æ£€æŸ¥é…ç½®æ–‡ä»¶:"
if [ -f "config/site.config.ts" ]; then
    echo "âœ… site.config.ts å­˜åœ¨"
    echo "   å½“å‰ç»Ÿè®¡é…ç½®:"
    grep -A 5 "statistics" config/site.config.ts
else
    echo "âŒ site.config.ts ä¸å­˜åœ¨"
fi
echo ""

# 2. æ¸…é™¤ç¼“å­˜
echo "ğŸ§¹ 2. æ¸…é™¤æ‰€æœ‰ç¼“å­˜..."
echo ""

# åœæ­¢å¼€å‘æœåŠ¡å™¨æç¤º
echo "âš ï¸  è¯·å…ˆåœæ­¢å¼€å‘æœåŠ¡å™¨ (Ctrl+C)"
read -p "æŒ‰Enterç»§ç»­æ¸…é™¤ç¼“å­˜..."

# æ¸…é™¤Next.jsç¼“å­˜
if [ -d ".next" ]; then
    echo "ğŸ—‘ï¸  æ¸…é™¤.nextç¼“å­˜..."
    rm -rf .next
    echo "âœ… .nextç¼“å­˜å·²æ¸…é™¤"
else
    echo "â„¹ï¸  .nextç›®å½•ä¸å­˜åœ¨"
fi

# æ¸…é™¤TypeScriptç¼“å­˜
if [ -f ".tsbuildinfo" ]; then
    echo "ğŸ—‘ï¸  æ¸…é™¤TypeScriptç¼“å­˜..."
    rm -rf .tsbuildinfo
    echo "âœ… TypeScriptç¼“å­˜å·²æ¸…é™¤"
fi

# æ¸…é™¤node_modulesç¼“å­˜
if [ -d "node_modules/.cache" ]; then
    echo "ğŸ—‘ï¸  æ¸…é™¤node_modulesç¼“å­˜..."
    rm -rf node_modules/.cache
    echo "âœ… node_modulesç¼“å­˜å·²æ¸…é™¤"
fi

echo ""

# 3. æ£€æŸ¥APIçŠ¶æ€
echo "ğŸŒ 3. æ£€æŸ¥APIçŠ¶æ€..."
echo ""

# æ£€æŸ¥APIæ–‡ä»¶
echo "ğŸ“‚ æ£€æŸ¥APIè·¯ç”±æ–‡ä»¶:"
api_files=(
    "app/api/articles/route.ts"
    "app/api/pdfs/route.ts"
    "pages/api/articles.ts"
    "pages/api/pdfs.ts"
)

for file in "${api_files[@]}"; do
    if [ -f "$file" ]; then
        echo "âœ… $file å­˜åœ¨"
    else
        echo "âŒ $file ä¸å­˜åœ¨"
    fi
done
echo ""

# 4. ç”Ÿæˆä¿®å¤ä»£ç 
echo "ğŸ”§ 4. ç”Ÿæˆä¿®å¤ä»£ç ..."
echo ""

# ç”ŸæˆSimplePDFCenterä¿®å¤ç‰ˆæœ¬
cat > /tmp/SimplePDFCenter_fix.tsx << 'EOF'
// ä¿®å¤åçš„SimplePDFCenterç»„ä»¶å…³é”®éƒ¨åˆ†
// è¯·å°†ä»¥ä¸‹ä»£ç é›†æˆåˆ°æ‚¨çš„SimplePDFCenter.tsxä¸­

import { SITE_CONFIG } from '@/config/site.config';

// åŠ¨æ€è®¡ç®—åˆ†ç±»èµ„æºæ•°é‡
const getCategoryResourceCount = (category: CategoryKey) => {
  const categoryMapping = {
    immediate: 'immediate-help',
    preparation: 'planning-preparation',
    learning: 'in-depth-understanding', 
    management: 'long-term-management'
  };
  
  // ä½¿ç”¨å®é™…çš„èµ„æºæ•°æ®è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç 
  return allResources.filter(resource => 
    resource.category === categoryMapping[category]
  ).length;
};

// ç»Ÿè®¡æ•°æ®åº”è¯¥æ¥è‡ªé…ç½®
const totalResources = SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources;
// åº”è¯¥æ˜¯: 42 + 13 = 55

// åœ¨æ¸²æŸ“ä¸­ä½¿ç”¨åŠ¨æ€è®¡ç®—
{categories.map((category) => (
  <div key={category.key} className="text-center">
    <div className="text-2xl font-bold text-purple-600">
      {getCategoryResourceCount(category.key)}  {/* åŠ¨æ€è®¡ç®—ï¼Œä¸æ˜¯ç¡¬ç¼–ç  */}
    </div>
    <div className="text-sm text-gray-600">{category.label}</div>
  </div>
))}
EOF

echo "ğŸ“„ å·²ç”Ÿæˆä¿®å¤ä»£ç : /tmp/SimplePDFCenter_fix.tsx"
echo "è¯·æŸ¥çœ‹å¹¶å°†ç›¸å…³ä»£ç é›†æˆåˆ°æ‚¨çš„ç»„ä»¶ä¸­"
echo ""

# 5. éªŒè¯è„šæœ¬
cat > /tmp/verify_fix.js << 'EOF'
// éªŒè¯ä¿®å¤æ•ˆæœçš„JavaScriptä»£ç 
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œ

console.log('=== Period Hub ä¿®å¤éªŒè¯ ===');

// æ£€æŸ¥é…ç½®
try {
  // å¦‚æœSITE_CONFIGå¯ç”¨
  if (typeof SITE_CONFIG !== 'undefined') {
    console.log('âœ… SITE_CONFIGé…ç½®:', SITE_CONFIG.statistics);
    const total = SITE_CONFIG.statistics.articles + SITE_CONFIG.statistics.pdfResources;
    console.log('âœ… è®¡ç®—æ€»èµ„æº:', total);
  } else {
    console.log('âŒ SITE_CONFIGæœªå®šä¹‰');
  }
} catch (error) {
  console.log('âŒ é…ç½®æ£€æŸ¥å¤±è´¥:', error);
}

// æ£€æŸ¥API
Promise.all([
  fetch('/api/articles?locale=zh').then(r => r.json()).catch(e => ({error: e.message})),
  fetch('/api/pdfs').then(r => r.json()).catch(e => ({error: e.message}))
]).then(([articles, pdfs]) => {
  console.log('ğŸŒ APIæ£€æŸ¥ç»“æœ:');
  console.log('  æ–‡ç« API:', articles.error ? 'âŒ ' + articles.error : 'âœ… æ­£å¸¸');
  console.log('  PDF API:', pdfs.error ? 'âŒ ' + pdfs.error : 'âœ… æ­£å¸¸');
});

// æ£€æŸ¥DOMå…ƒç´ 
setTimeout(() => {
  console.log('ğŸ” DOMæ£€æŸ¥:');
  const categoryNumbers = document.querySelectorAll('.text-2xl.font-bold.text-purple-600');
  if (categoryNumbers.length > 0) {
    const numbers = Array.from(categoryNumbers).map(el => el.textContent);
    console.log('  åˆ†ç±»æ•°é‡æ˜¾ç¤º:', numbers);
    const sum = numbers.reduce((a, b) => a + parseInt(b), 0);
    console.log('  åˆ†ç±»æ•°é‡æ€»å’Œ:', sum);
    
    if (sum === 30) {
      console.log('âŒ ä»ç„¶æ˜¾ç¤ºç¡¬ç¼–ç çš„30ä¸ªèµ„æº');
    } else {
      console.log('âœ… æ•°é‡å·²æ›´æ–°');
    }
  } else {
    console.log('âŒ æœªæ‰¾åˆ°åˆ†ç±»æ•°é‡å…ƒç´ ');
  }
}, 1000);
EOF

echo "ğŸ“„ å·²ç”ŸæˆéªŒè¯è„šæœ¬: /tmp/verify_fix.js"
echo "è¯·åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œæ­¤è„šæœ¬æ¥éªŒè¯ä¿®å¤æ•ˆæœ"
echo ""

# 6. åç»­æ­¥éª¤
echo "ğŸ“‹ 6. åç»­æ­¥éª¤:"
echo ""
echo "1. é‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨:"
echo "   npm run dev"
echo ""
echo "2. åœ¨æµè§ˆå™¨ä¸­å¼ºåˆ¶åˆ·æ–°:"
echo "   Ctrl+Shift+R (Windows/Linux)"
echo "   Cmd+Shift+R (Mac)"
echo ""
echo "3. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œè¿è¡ŒéªŒè¯è„šæœ¬:"
echo "   å¤åˆ¶ /tmp/verify_fix.js ä¸­çš„ä»£ç åˆ°æ§åˆ¶å°"
echo ""
echo "4. å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æ£€æŸ¥:"
echo "   - SimplePDFCenter.tsx æ˜¯å¦æ­£ç¡®ä¿å­˜"
echo "   - æ˜¯å¦æœ‰TypeScriptç¼–è¯‘é”™è¯¯"
echo "   - æµè§ˆå™¨æ˜¯å¦ä»åœ¨ä½¿ç”¨ç¼“å­˜"
echo ""

echo "âœ… è¯Šæ–­å®Œæˆï¼è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ‰§è¡Œä¿®å¤ã€‚"


ä¿®å¤åçš„SimplePDFCenterç»„ä»¶








**æ‚¨çš„Period Hubå°†æ‹¥æœ‰å‡†ç¡®çš„èµ„æºç»Ÿè®¡å’Œå®Œå–„çš„PDFä¸‹è½½åŠŸèƒ½ï¼** ğŸš€

è¯·è¿è¡Œè¯Šæ–­è„šæœ¬å¹¶åˆ†äº«ç»“æœï¼Œæˆ‘å¯ä»¥å¸®æ‚¨è¿›ä¸€æ­¥ä¼˜åŒ–å…·ä½“çš„ä¿®å¤ç»†èŠ‚ã€‚


Period Hub PDFèµ„æºç²¾ç¡®ä¿®å¤æ–¹æ¡ˆ

# Period Hub PDFèµ„æºç²¾ç¡®ä¿®å¤æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜ç¡®è®¤

âœ… **æ‚¨çš„åˆ¤æ–­å®Œå…¨æ­£ç¡®ï¼** å®é™…PDFæ–‡ä»¶æ•°é‡è¿œè¶…é…ç½®ç»Ÿè®¡ï¼Œé—®é¢˜åœ¨äºï¼š
- é…ç½®æ–‡ä»¶åä¸å®é™…æ–‡ä»¶åä¸åŒ¹é…
- å¤šç›®å½•å­˜å‚¨å¯¼è‡´é‡å¤è®¡ç®—
- ç»Ÿè®¡æ•°æ®åŸºäºé”™è¯¯çš„é…ç½®è€Œéå®é™…æ–‡ä»¶

## ğŸ“Š çœŸå®èµ„æºç»Ÿè®¡

### å®é™…æ–‡ä»¶åˆ†å¸ƒ
| ç›®å½• | æ–‡ä»¶æ•°é‡ | è¯´æ˜ |
|------|---------|------|
| `/public/downloads/` | 24ä¸ª | ä¸»è¦å­˜å‚¨ä½ç½® |
| `/public/pdf-files/` | 32ä¸ª | å¤‡ç”¨å­˜å‚¨ä½ç½® |
| **æ€»è®¡** | **56ä¸ªPDFæ–‡ä»¶** | åŒ…å«é‡å¤å’Œå¤šç‰ˆæœ¬ |
| **å»é‡åæ ¸å¿ƒèµ„æº** | **13-15ä¸ª** | å®é™…ç‹¬ç«‹èµ„æº |

### å‘½åæ˜ å°„é—®é¢˜
| é…ç½®ä¸­çš„æ–‡ä»¶å | å®é™…æ–‡ä»¶å | çŠ¶æ€ |
|---------------|-----------|------|
| `pain-tracker-guide.pdf` | `pain-tracking-form.pdf` | âœ… å­˜åœ¨ï¼Œéœ€æ˜ å°„ä¿®æ­£ |
| `constitution-guide.pdf` | `constitution-guide.pdf` | â“ éœ€è¦ç¡®è®¤ |
| `menstrual-health-handbook.pdf` | `menstrual-cycle-nutrition-plan.pdf` | âœ… å­˜åœ¨ï¼Œéœ€æ˜ å°„ä¿®æ­£ |

## ğŸ”§ ç«‹å³ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šå¿«é€Ÿé…ç½®ä¿®æ­£ï¼ˆæ¨èï¼‰

#### 1. æ›´æ–° `config/pdfResources.ts`
```typescript
// ä¿®æ­£å®é™…çš„æ–‡ä»¶åæ˜ å°„
export const pdfResources: PDFResource[] = [
  {
    id: 'pain-tracking-form',
    title: 'ç–¼ç—›è¿½è¸ªè¡¨',
    description: 'å¸®åŠ©è¿½è¸ªå’Œè®°å½•ç»æœŸç–¼ç—›æ¨¡å¼',
    filename: 'pain-tracking-form.pdf', // âœ… ä¿®æ­£æ–‡ä»¶å
    category: 'immediate-help',
    tags: ['ç–¼ç—›ç®¡ç†', 'è¿½è¸ªå·¥å…·'],
    downloadUrl: '/downloads/pain-tracking-form.pdf'
  },
  {
    id: 'campus-emergency-checklist',
    title: 'æ ¡å›­åº”æ€¥æ¸…å•',
    description: 'æ ¡å›­å†…ç»æœŸç´§æ€¥æƒ…å†µå¤„ç†æŒ‡å—',
    filename: 'campus-emergency-checklist.pdf', // âœ… ç¡®è®¤å­˜åœ¨
    category: 'immediate-help',
    tags: ['åº”æ€¥å¤„ç†', 'æ ¡å›­'],
    downloadUrl: '/downloads/campus-emergency-checklist.pdf'
  },
  {
    id: 'menstrual-cycle-nutrition-plan',
    title: 'ç»æœŸè¥å…»è®¡åˆ’',
    description: 'ç§‘å­¦çš„ç»æœŸé¥®é£Ÿè¥å…»æŒ‡å¯¼',
    filename: 'menstrual-cycle-nutrition-plan.pdf', // âœ… ä¿®æ­£æ˜ å°„
    category: 'planning-preparation',
    tags: ['è¥å…»', 'é¥®é£Ÿè®¡åˆ’'],
    downloadUrl: '/downloads/menstrual-cycle-nutrition-plan.pdf'
  },
  // ... ç»§ç»­ä¿®æ­£å…¶ä»–æ–‡ä»¶æ˜ å°„
];
```

#### 2. æ›´æ–° `config/site.config.ts`
```typescript
export const siteConfig = {
  // ...å…¶ä»–é…ç½®
  statistics: {
    articles: 42,           // âœ… ä¿æŒä¸å˜
    pdfResources: 13,       // âœ… ä¿®æ­£ä¸ºå®é™…æ ¸å¿ƒèµ„æºæ•°
    interactiveTools: 5,    // âœ… ä¿æŒä¸å˜
    supportHours: 24        // âœ… ä¿æŒä¸å˜
  }
};
```

### æ–¹æ¡ˆäºŒï¼šæ–‡ä»¶ç³»ç»Ÿæ•´ç†ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰

#### 1. ç»Ÿä¸€å­˜å‚¨ç›®å½•
```bash
# å°†æ‰€æœ‰PDFç»Ÿä¸€åˆ° /public/downloads/
# åˆ é™¤ /public/pdf-files/ ä¸­çš„é‡å¤æ–‡ä»¶
```

#### 2. å»ºç«‹å‘½åè§„èŒƒ
```
åŸºç¡€èµ„æºï¼šresource-name.pdf
è‹±æ–‡ç‰ˆæœ¬ï¼šresource-name-en.pdf
ä¸­æ–‡ç‰ˆæœ¬ï¼šresource-name-zh.pdf
```

## ğŸš€ æ‰§è¡Œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç«‹å³ä¿®æ­£ç»Ÿè®¡æ•°æ®
```typescript
// åœ¨ config/site.config.ts ä¸­
pdfResources: 13  // ä»24æ”¹ä¸ºå®é™…æ•°é‡
```

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ–‡ä»¶æ˜ å°„è„šæœ¬
```javascript
// åˆ›å»º scripts/fix-pdf-mapping.js
const fs = require('fs');
const path = require('path');

// æ‰«æå®é™…PDFæ–‡ä»¶
const downloadDir = './public/downloads';
const pdfFilesDir = './public/pdf-files';

const actualFiles = [
  ...fs.readdirSync(downloadDir).filter(f => f.endsWith('.pdf')),
  ...fs.readdirSync(pdfFilesDir).filter(f => f.endsWith('.pdf'))
];

console.log('å®é™…PDFæ–‡ä»¶åˆ—è¡¨ï¼š');
actualFiles.forEach(file => console.log(`  ${file}`));
console.log(`æ€»è®¡ï¼š${actualFiles.length}ä¸ªæ–‡ä»¶`);

// ç”Ÿæˆå»é‡åçš„æ ¸å¿ƒèµ„æºåˆ—è¡¨
const coreResources = [...new Set(actualFiles.map(f => 
  f.replace(/-en\.pdf$|zh\.pdf$/, '.pdf')
))];

console.log('\næ ¸å¿ƒèµ„æºï¼ˆå»é‡åï¼‰ï¼š');
coreResources.forEach(file => console.log(`  ${file}`));
console.log(`æ ¸å¿ƒèµ„æºæ•°é‡ï¼š${coreResources.length}ä¸ª`);
```

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ä¿®å¤ç»“æœ
1. è¿è¡Œåº”ç”¨ï¼Œæ£€æŸ¥PDFä¸‹è½½åŠŸèƒ½
2. ç¡®è®¤ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºæ­£ç¡®
3. éªŒè¯æ‰€æœ‰é…ç½®çš„PDFéƒ½èƒ½æ­£å¸¸ä¸‹è½½

## âœ… é¢„æœŸç»“æœ

ä¿®å¤å®Œæˆåï¼š
- âœ… ç»Ÿè®¡æ•°æ®å‡†ç¡®åæ˜ å®é™…èµ„æºæ•°é‡
- âœ… æ‰€æœ‰é…ç½®çš„PDFæ–‡ä»¶éƒ½èƒ½æ­£å¸¸ä¸‹è½½
- âœ… æ–‡ä»¶åæ˜ å°„å…³ç³»æ­£ç¡®
- âœ… ç”¨æˆ·ä½“éªŒå¾—åˆ°æ”¹å–„

## ğŸ¯ å…³é”®ä¼˜åŠ¿

1. **çœŸå®ç»Ÿè®¡**ï¼šåŸºäºå®é™…æ–‡ä»¶è€Œéé…ç½®çŒœæµ‹
2. **é›¶ä¸¢å¤±**ï¼šä¿ç•™æ‰€æœ‰ç°æœ‰PDFèµ„æº
3. **å¿«é€Ÿä¿®å¤**ï¼šä¸»è¦æ˜¯é…ç½®è°ƒæ•´ï¼Œæ— éœ€åˆ›å»ºæ–°æ–‡ä»¶
4. **ç”¨æˆ·å‹å¥½**ï¼šç»Ÿè®¡æ•°æ®ä¸å®é™…å¯ç”¨èµ„æºå®Œå…¨åŒ¹é…

## ğŸ“‹ åç»­å»ºè®®

1. **å»ºç«‹CIæ£€æŸ¥**ï¼šè‡ªåŠ¨éªŒè¯é…ç½®ä¸å®é™…æ–‡ä»¶çš„ä¸€è‡´æ€§
2. **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–°READMEä¸­çš„èµ„æºç»Ÿè®¡ä¿¡æ¯
3. **ç‰ˆæœ¬ç®¡ç†**ï¼šä¸ºPDFèµ„æºå»ºç«‹ç‰ˆæœ¬ç®¡ç†æœºåˆ¶
4. **å¤šè¯­è¨€æ”¯æŒ**ï¼šå®Œå–„ä¸­è‹±æ–‡ç‰ˆæœ¬çš„ç®¡ç†

PDFæ˜ å°„ä¿®å¤è„šæœ¬

#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

/**
 * Period Hub PDFæ˜ å°„ä¿®å¤è„šæœ¬
 * è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤PDFæ–‡ä»¶åæ˜ å°„é—®é¢˜
 */
class PDFMappingFixer {
  constructor() {
    this.actualFiles = new Map();
    this.configFiles = new Map();
    this.fixedMappings = [];
    this.missingFiles = [];
    this.excessFiles = [];
  }

  // æ‰«æå®é™…PDFæ–‡ä»¶
  scanActualFiles() {
    const directories = [
      './public/downloads',
      './public/pdf-files',
      './public/pdfs',
      './src/assets/pdfs'
    ];

    console.log('ğŸ” æ‰«æå®é™…PDFæ–‡ä»¶...\n');

    directories.forEach(dir => {
      if (fs.existsSync(dir)) {
        const files = fs.readdirSync(dir).filter(f => f.endsWith('.pdf'));
        console.log(`ğŸ“ ${dir}: ${files.length}ä¸ªæ–‡ä»¶`);
        
        files.forEach(file => {
          const baseName = this.getBaseName(file);
          if (!this.actualFiles.has(baseName)) {
            this.actualFiles.set(baseName, []);
          }
          this.actualFiles.get(baseName).push({
            filename: file,
            fullPath: path.join(dir, file),
            directory: dir,
            isBase: file === baseName + '.pdf'
          });
        });
      }
    });

    const totalFiles = Array.from(this.actualFiles.values()).reduce((sum, arr) => sum + arr.length, 0);
    const coreResources = this.actualFiles.size;
    
    console.log(`\nğŸ“Š ç»Ÿè®¡ç»“æœ:`);
    console.log(`   æ€»PDFæ–‡ä»¶: ${totalFiles}ä¸ª`);
    console.log(`   æ ¸å¿ƒèµ„æº: ${coreResources}ä¸ª`);
    console.log(`   å¹³å‡ç‰ˆæœ¬æ•°: ${(totalFiles / coreResources).toFixed(1)}ä¸ª/èµ„æº\n`);
  }

  // è·å–æ–‡ä»¶çš„åŸºç¡€åç§°ï¼ˆå»é™¤è¯­è¨€åç¼€ï¼‰
  getBaseName(filename) {
    return filename
      .replace('.pdf', '')
      .replace(/-en$/, '')
      .replace(/-zh$/, '')
      .replace(/-cn$/, '');
  }

  // è§£æé…ç½®æ–‡ä»¶
  parseConfigFile() {
    const configPaths = [
      './config/pdfResources.ts',
      './src/config/pdfResources.ts',
      './config/pdfResources.js'
    ];

    console.log('âš™ï¸ è§£æé…ç½®æ–‡ä»¶...\n');

    for (const configPath of configPaths) {
      if (fs.existsSync(configPath)) {
        console.log(`ğŸ“„ æ‰¾åˆ°é…ç½®æ–‡ä»¶: ${configPath}`);
        
        const content = fs.readFileSync(configPath, 'utf8');
        this.extractConfigFiles(content);
        break;
      }
    }

    console.log(`ğŸ”§ é…ç½®ä¸­å£°æ˜: ${this.configFiles.size}ä¸ªèµ„æº\n`);
  }

  // ä»é…ç½®å†…å®¹ä¸­æå–æ–‡ä»¶å
  extractConfigFiles(content) {
    // åŒ¹é…å„ç§å¯èƒ½çš„æ–‡ä»¶åæ¨¡å¼
    const patterns = [
      /filename:\s*['"`]([^'"`]+\.pdf)['"`]/g,
      /file:\s*['"`]([^'"`]+\.pdf)['"`]/g,
      /url:\s*['"`][^'"`]*\/([^'"`]+\.pdf)['"`]/g,
      /downloadUrl:\s*['"`][^'"`]*\/([^'"`]+\.pdf)['"`]/g
    ];

    patterns.forEach(pattern => {
      let match;
      while ((match = pattern.exec(content)) !== null) {
        const filename = match[1];
        const baseName = this.getBaseName(filename);
        this.configFiles.set(baseName, filename);
      }
    });
  }

  // æ‰§è¡Œæ˜ å°„åˆ†æ
  analyzeMappings() {
    console.log('ğŸ”„ åˆ†ææ–‡ä»¶æ˜ å°„å…³ç³»...\n');

    // æ£€æŸ¥é…ç½®ä¸­çš„æ–‡ä»¶æ˜¯å¦å®é™…å­˜åœ¨
    this.configFiles.forEach((configFileName, baseName) => {
      if (this.actualFiles.has(baseName)) {
        const actualVariants = this.actualFiles.get(baseName);
        const bestMatch = this.findBestMatch(configFileName, actualVariants);
        
        if (bestMatch.filename !== configFileName) {
          this.fixedMappings.push({
            baseName,
            configFileName,
            actualFileName: bestMatch.filename,
            actualPath: bestMatch.fullPath,
            similarity: this.calculateSimilarity(configFileName, bestMatch.filename)
          });
        }
      } else {
        this.missingFiles.push({
          baseName,
          configFileName
        });
      }
    });

    // æ£€æŸ¥å®é™…å­˜åœ¨ä½†é…ç½®ä¸­æœªå£°æ˜çš„æ–‡ä»¶
    this.actualFiles.forEach((variants, baseName) => {
      if (!this.configFiles.has(baseName)) {
        this.excessFiles.push({
          baseName,
          variants
        });
      }
    });
  }

  // æ‰¾åˆ°æœ€ä½³åŒ¹é…çš„å®é™…æ–‡ä»¶
  findBestMatch(configFileName, actualVariants) {
    // ä¼˜å…ˆé€‰æ‹©åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸å¸¦è¯­è¨€åç¼€ï¼‰
    const baseVariant = actualVariants.find(v => v.isBase);
    if (baseVariant) {
      return baseVariant;
    }

    // å¦åˆ™é€‰æ‹©ç›¸ä¼¼åº¦æœ€é«˜çš„
    let bestMatch = actualVariants[0];
    let bestSimilarity = 0;

    actualVariants.forEach(variant => {
      const similarity = this.calculateSimilarity(configFileName, variant.filename);
      if (similarity > bestSimilarity) {
        bestSimilarity = similarity;
        bestMatch = variant;
      }
    });

    return bestMatch;
  }

  // è®¡ç®—æ–‡ä»¶åç›¸ä¼¼åº¦
  calculateSimilarity(str1, str2) {
    const longer = str1.length > str2.length ? str1 : str2;
    const shorter = str1.length > str2.length ? str2 : str1;
    
    if (longer.length === 0) return 1.0;
    
    const distance = this.levenshteinDistance(longer, shorter);
    return (longer.length - distance) / longer.length;
  }

  // è®¡ç®—Levenshteinè·ç¦»
  levenshteinDistance(str1, str2) {
    const matrix = [];
    
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            matrix[i][j - 1] + 1,
            matrix[i - 1][j] + 1
          );
        }
      }
    }
    
    return matrix[str2.length][str1.length];
  }

  // ç”Ÿæˆä¿®å¤æŠ¥å‘Š
  generateReport() {
    console.log('ğŸ“‹ === PDFæ˜ å°„ä¿®å¤æŠ¥å‘Š ===\n');

    // æ€»ä½“ç»Ÿè®¡
    console.log('ğŸ“Š æ€»ä½“ç»Ÿè®¡:');
    console.log(`   å®é™…æ ¸å¿ƒèµ„æº: ${this.actualFiles.size}ä¸ª`);
    console.log(`   é…ç½®å£°æ˜èµ„æº: ${this.configFiles.size}ä¸ª`);
    console.log(`   éœ€è¦ä¿®å¤æ˜ å°„: ${this.fixedMappings.length}ä¸ª`);
    console.log(`   çœŸæ­£ç¼ºå¤±: ${this.missingFiles.length}ä¸ª`);
    console.log(`   æœªé…ç½®: ${this.excessFiles.length}ä¸ª\n`);

    // éœ€è¦ä¿®å¤çš„æ˜ å°„
    if (this.fixedMappings.length > 0) {
      console.log('ğŸ”§ éœ€è¦ä¿®å¤çš„æ–‡ä»¶æ˜ å°„:');
      this.fixedMappings.forEach(mapping => {
        console.log(`   ğŸ“ ${mapping.baseName}:`);
        console.log(`      é…ç½®: ${mapping.configFileName}`);
        console.log(`      å®é™…: ${mapping.actualFileName}`);
        console.log(`      ç›¸ä¼¼åº¦: ${(mapping.similarity * 100).toFixed(1)}%`);
        console.log(`      è·¯å¾„: ${mapping.actualPath}\n`);
      });
    }

    // çœŸæ­£ç¼ºå¤±çš„æ–‡ä»¶
    if (this.missingFiles.length > 0) {
      console.log('âŒ çœŸæ­£ç¼ºå¤±çš„æ–‡ä»¶:');
      this.missingFiles.forEach(missing => {
        console.log(`   âŒ ${missing.configFileName} (${missing.baseName})`);
      });
      console.log('');
    }

    // æœªé…ç½®çš„æ–‡ä»¶
    if (this.excessFiles.length > 0) {
      console.log('ğŸ“ æœªé…ç½®çš„æ–‡ä»¶:');
      this.excessFiles.forEach(excess => {
        console.log(`   ğŸ“„ ${excess.baseName}:`);
        excess.variants.forEach(variant => {
          console.log(`      ${variant.filename} (${variant.directory})`);
        });
        console.log('');
      });
    }
  }

  // ç”Ÿæˆä¿®å¤å»ºè®®
  generateFixSuggestions() {
    console.log('ğŸ’¡ ä¿®å¤å»ºè®®:\n');

    console.log('1. ğŸ“Š æ›´æ–°ç»Ÿè®¡æ•°æ®:');
    console.log(`   å°†pdfResourcesä»${this.configFiles.size}æ”¹ä¸º${this.actualFiles.size}\n`);

    if (this.fixedMappings.length > 0) {
      console.log('2. ğŸ”§ ä¿®å¤æ–‡ä»¶åæ˜ å°„:');
      this.fixedMappings.forEach(mapping => {
        console.log(`   // ${mapping.baseName}`);
        console.log(`   filename: '${mapping.actualFileName}', // åŸ: '${mapping.configFileName}'`);
      });
      console.log('');
    }

    if (this.missingFiles.length > 0) {
      console.log('3. âŒ åˆ›å»ºç¼ºå¤±æ–‡ä»¶æˆ–ç§»é™¤é…ç½®:');
      this.missingFiles.forEach(missing => {
        console.log(`   // åˆ›å»º ${missing.configFileName} æˆ–ä»é…ç½®ä¸­ç§»é™¤`);
      });
      console.log('');
    }

    if (this.excessFiles.length > 0) {
      console.log('4. ğŸ“ æ·»åŠ æœªé…ç½®çš„èµ„æº:');
      this.excessFiles.forEach(excess => {
        const mainFile = excess.variants.find(v => v.isBase) || excess.variants[0];
        console.log(`   // æ·»åŠ  ${excess.baseName} çš„é…ç½®`);
        console.log(`   {`);
        console.log(`     id: '${excess.baseName}',`);
        console.log(`     title: '${this.generateTitle(excess.baseName)}',`);
        console.log(`     filename: '${mainFile.filename}',`);
        console.log(`     // ... å…¶ä»–é…ç½®`);
        console.log(`   },`);
      });
    }
  }

  // ç”Ÿæˆæ ‡é¢˜
  generateTitle(baseName) {
    return baseName
      .split('-')
      .map(word => word.charAt(0).toUpperCase() + word.slice(1))
      .join(' ');
  }

  // ä¸»æ‰§è¡Œå‡½æ•°
  run() {
    console.log('ğŸš€ å¯åŠ¨PDFæ˜ å°„ä¿®å¤è„šæœ¬\n');
    
    this.scanActualFiles();
    this.parseConfigFile();
    this.analyzeMappings();
    this.generateReport();
    this.generateFixSuggestions();
    
    console.log('âœ… åˆ†æå®Œæˆï¼è¯·æ ¹æ®å»ºè®®ä¿®å¤é…ç½®æ–‡ä»¶ã€‚');
  }
}

// æ‰§è¡Œè„šæœ¬
if (require.main === module) {
  const fixer = new PDFMappingFixer();
  fixer.run();
}

module.exports = PDFMappingFixer;






PDFèµ„æºä¸€è‡´æ€§æ£€æŸ¥è„šæœ¬

#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

// PDFèµ„æºä¸€è‡´æ€§æ£€æŸ¥è„šæœ¬
class PDFConsistencyChecker {
  constructor() {
    this.configPdfs = [];
    this.actualPdfs = [];
    this.mismatches = [];
    this.suggestions = [];
  }

  // æ‰«æå®é™…PDFæ–‡ä»¶
  scanActualPDFs() {
    const pdfDirs = [
      './public/pdfs',
      './src/assets/pdfs',
      './assets/pdfs',
      './public/assets/pdfs',
      './static/pdfs'
    ];

    this.actualPdfs = [];
    
    pdfDirs.forEach(dir => {
      if (fs.existsSync(dir)) {
        const files = this.scanDirectory(dir);
        files.forEach(file => {
          this.actualPdfs.push({
            filename: path.basename(file),
            fullPath: file,
            directory: dir,
            size: this.getFileSize(file)
          });
        });
      }
    });

    console.log(`ğŸ“ å‘ç°å®é™…PDFæ–‡ä»¶: ${this.actualPdfs.length}ä¸ª`);
    return this.actualPdfs;
  }

  // é€’å½’æ‰«æç›®å½•
  scanDirectory(dir) {
    let files = [];
    try {
      const items = fs.readdirSync(dir);
      items.forEach(item => {
        const fullPath = path.join(dir, item);
        const stat = fs.statSync(fullPath);
        
        if (stat.isDirectory()) {
          files = files.concat(this.scanDirectory(fullPath));
        } else if (item.toLowerCase().endsWith('.pdf')) {
          files.push(fullPath);
        }
      });
    } catch (error) {
      console.log(`âš ï¸  æ— æ³•è®¿é—®ç›®å½•: ${dir}`);
    }
    return files;
  }

  // è·å–æ–‡ä»¶å¤§å°
  getFileSize(filePath) {
    try {
      const stats = fs.statSync(filePath);
      return this.formatFileSize(stats.size);
    } catch (error) {
      return 'Unknown';
    }
  }

  formatFileSize(bytes) {
    if (bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  // åŠ è½½é…ç½®æ–‡ä»¶ä¸­çš„PDFèµ„æº
  loadConfigPDFs() {
    const configPaths = [
      './config/pdfResources.ts',
      './src/config/pdfResources.ts',
      './config/pdfResources.js',
      './src/config/pdfResources.js'
    ];

    this.configPdfs = [];
    
    configPaths.forEach(configPath => {
      if (fs.existsSync(configPath)) {
        try {
          const content = fs.readFileSync(configPath, 'utf8');
          this.parseConfigContent(content);
        } catch (error) {
          console.log(`âš ï¸  è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥: ${configPath}`);
        }
      }
    });

    console.log(`âš™ï¸  é…ç½®æ–‡ä»¶å£°æ˜PDF: ${this.configPdfs.length}ä¸ª`);
    return this.configPdfs;
  }

  // è§£æé…ç½®æ–‡ä»¶å†…å®¹
  parseConfigContent(content) {
    // åŒ¹é…PDFæ–‡ä»¶åæ¨¡å¼
    const patterns = [
      /['"`]([^'"`]*\.pdf)['"`]/g,
      /filename:\s*['"`]([^'"`]*\.pdf)['"`]/g,
      /file:\s*['"`]([^'"`]*\.pdf)['"`]/g,
      /url:\s*['"`][^'"`]*\/([^'"`]*\.pdf)['"`]/g
    ];

    patterns.forEach(pattern => {
      let match;
      while ((match = pattern.exec(content)) !== null) {
        const filename = match[1];
        if (!this.configPdfs.some(pdf => pdf.filename === filename)) {
          this.configPdfs.push({
            filename: filename,
            source: 'config'
          });
        }
      }
    });
  }

  // æ‰§è¡Œä¸€è‡´æ€§æ£€æŸ¥
  checkConsistency() {
    console.log('\nğŸ” å¼€å§‹PDFèµ„æºä¸€è‡´æ€§æ£€æŸ¥...\n');
    
    this.scanActualPDFs();
    this.loadConfigPDFs();
    
    this.analyzeMatches();
    this.generateSuggestions();
    this.printReport();
  }

  // åˆ†æåŒ¹é…æƒ…å†µ
  analyzeMatches() {
    const actualFilenames = this.actualPdfs.map(pdf => pdf.filename);
    const configFilenames = this.configPdfs.map(pdf => pdf.filename);

    // æ‰¾å‡ºé…ç½®ä¸­å­˜åœ¨ä½†å®é™…æ–‡ä»¶ç¼ºå¤±çš„
    const missingFiles = configFilenames.filter(filename => 
      !actualFilenames.includes(filename)
    );

    // æ‰¾å‡ºå®é™…å­˜åœ¨ä½†é…ç½®ä¸­æœªå£°æ˜çš„
    const unconfiguredFiles = actualFilenames.filter(filename => 
      !configFilenames.includes(filename)
    );

    // æ‰¾å‡ºå¯èƒ½çš„å‘½åæ˜ å°„
    const possibleMappings = this.findPossibleMappings(missingFiles, unconfiguredFiles);

    this.mismatches = {
      missing: missingFiles,
      unconfigured: unconfiguredFiles,
      possibleMappings: possibleMappings,
      exactMatches: configFilenames.filter(filename => 
        actualFilenames.includes(filename)
      )
    };
  }

  // å¯»æ‰¾å¯èƒ½çš„æ–‡ä»¶æ˜ å°„å…³ç³»
  findPossibleMappings(missingFiles, unconfiguredFiles) {
    const mappings = [];
    
    missingFiles.forEach(missingFile => {
      unconfiguredFiles.forEach(unconfiguredFile => {
        const similarity = this.calculateSimilarity(missingFile, unconfiguredFile);
        if (similarity > 0.6) { // ç›¸ä¼¼åº¦é˜ˆå€¼
          mappings.push({
            configured: missingFile,
            actual: unconfiguredFile,
            similarity: similarity,
            actualFile: this.actualPdfs.find(pdf => pdf.filename === unconfiguredFile)
          });
        }
      });
    });

    return mappings.sort((a, b) => b.similarity - a.similarity);
  }

  // è®¡ç®—æ–‡ä»¶åç›¸ä¼¼åº¦
  calculateSimilarity(str1, str2) {
    const longer = str1.length > str2.length ? str1 : str2;
    const shorter = str1.length > str2.length ? str2 : str1;
    
    if (longer.length === 0) return 1.0;
    
    const distance = this.levenshteinDistance(longer, shorter);
    return (longer.length - distance) / longer.length;
  }

  // è®¡ç®—ç¼–è¾‘è·ç¦»
  levenshteinDistance(str1, str2) {
    const matrix = [];
    
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            matrix[i][j - 1] + 1,
            matrix[i - 1][j] + 1
          );
        }
      }
    }
    
    return matrix[str2.length][str1.length];
  }

  // ç”Ÿæˆä¿®å¤å»ºè®®
  generateSuggestions() {
    this.suggestions = [];

    // å»ºè®®1ï¼šç²¾ç¡®åŒ¹é…ç»Ÿè®¡
    this.suggestions.push({
      type: 'info',
      message: `âœ… ç²¾ç¡®åŒ¹é…: ${this.mismatches.exactMatches.length}ä¸ªPDFæ–‡ä»¶`
    });

    // å»ºè®®2ï¼šå¯èƒ½çš„æ–‡ä»¶é‡å‘½å
    if (this.mismatches.possibleMappings.length > 0) {
      this.suggestions.push({
        type: 'rename',
        message: `ğŸ”„ å‘ç°${this.mismatches.possibleMappings.length}ä¸ªå¯èƒ½çš„æ–‡ä»¶æ˜ å°„å…³ç³»ï¼Œå»ºè®®æ£€æŸ¥å‘½å`
      });
    }

    // å»ºè®®3ï¼šçœŸæ­£ç¼ºå¤±çš„æ–‡ä»¶
    const reallyMissing = this.mismatches.missing.filter(missing => 
      !this.mismatches.possibleMappings.some(mapping => mapping.configured === missing)
    );
    
    if (reallyMissing.length > 0) {
      this.suggestions.push({
        type: 'missing',
        message: `âŒ çœŸæ­£ç¼ºå¤±: ${reallyMissing.length}ä¸ªPDFæ–‡ä»¶éœ€è¦åˆ›å»º`
      });
    }

    // å»ºè®®4ï¼šæœªé…ç½®çš„æ–‡ä»¶
    if (this.mismatches.unconfigured.length > 0) {
      this.suggestions.push({
        type: 'unconfigured', 
        message: `ğŸ“ æœªé…ç½®: ${this.mismatches.unconfigured.length}ä¸ªPDFæ–‡ä»¶éœ€è¦æ·»åŠ åˆ°é…ç½®`
      });
    }

    // å»ºè®®5ï¼šæ›´æ–°ç»Ÿè®¡æ•°æ®
    const actualTotal = this.actualPdfs.length;
    this.suggestions.push({
      type: 'update',
      message: `ğŸ“Š å»ºè®®æ›´æ–°ç»Ÿè®¡æ•°æ®: å®é™…PDFèµ„æºæ•°é‡ä¸º ${actualTotal}ä¸ª`
    });
  }

  // æ‰“å°è¯¦ç»†æŠ¥å‘Š
  printReport() {
    console.log('ğŸ“Š === PDFèµ„æºä¸€è‡´æ€§æ£€æŸ¥æŠ¥å‘Š ===\n');
    
    // æ€»ä½“ç»Ÿè®¡
    console.log('ğŸ“ˆ æ€»ä½“ç»Ÿè®¡:');
    console.log(`   é…ç½®å£°æ˜: ${this.configPdfs.length}ä¸ª`);
    console.log(`   å®é™…å­˜åœ¨: ${this.actualPdfs.length}ä¸ª`);
    console.log(`   ç²¾ç¡®åŒ¹é…: ${this.mismatches.exactMatches.length}ä¸ª`);
    console.log('');

    // ç²¾ç¡®åŒ¹é…åˆ—è¡¨
    if (this.mismatches.exactMatches.length > 0) {
      console.log('âœ… ç²¾ç¡®åŒ¹é…çš„PDFæ–‡ä»¶:');
      this.mismatches.exactMatches.forEach(filename => {
        const actualFile = this.actualPdfs.find(pdf => pdf.filename === filename);
        console.log(`   âœ“ ${filename} (${actualFile?.size || 'Unknown size'})`);
      });
      console.log('');
    }

    // å¯èƒ½çš„æ˜ å°„å…³ç³»
    if (this.mismatches.possibleMappings.length > 0) {
      console.log('ğŸ”„ å¯èƒ½çš„æ–‡ä»¶æ˜ å°„å…³ç³»:');
      this.mismatches.possibleMappings.forEach(mapping => {
        console.log(`   ğŸ“ ${mapping.configured}`);
        console.log(`   ğŸ“ ${mapping.actual} (ç›¸ä¼¼åº¦: ${(mapping.similarity * 100).toFixed(1)}%)`);
        console.log(`      è·¯å¾„: ${mapping.actualFile?.fullPath}`);
        console.log(`      å¤§å°: ${mapping.actualFile?.size}`);
        console.log('');
      });
    }

    // çœŸæ­£ç¼ºå¤±çš„æ–‡ä»¶
    const reallyMissing = this.mismatches.missing.filter(missing => 
      !this.mismatches.possibleMappings.some(mapping => mapping.configured === missing)
    );
    
    if (reallyMissing.length > 0) {
      console.log('âŒ çœŸæ­£ç¼ºå¤±çš„PDFæ–‡ä»¶:');
      reallyMissing.forEach(filename => {
        console.log(`   âŒ ${filename}`);
      });
      console.log('');
    }

    // æœªé…ç½®çš„æ–‡ä»¶
    const unconfiguredFiles = this.actualPdfs.filter(pdf => 
      !this.mismatches.possibleMappings.some(mapping => mapping.actual === pdf.filename) &&
      !this.mismatches.exactMatches.includes(pdf.filename)
    );
    
    if (unconfiguredFiles.length > 0) {
      console.log('ğŸ“ æœªé…ç½®çš„PDFæ–‡ä»¶:');
      unconfiguredFiles.forEach(pdf => {
        console.log(`   ğŸ“„ ${pdf.filename} (${pdf.size})`);
        console.log(`      è·¯å¾„: ${pdf.fullPath}`);
      });
      console.log('');
    }

    // ä¿®å¤å»ºè®®
    console.log('ğŸ’¡ ä¿®å¤å»ºè®®:');
    this.suggestions.forEach((suggestion, index) => {
      console.log(`   ${index + 1}. ${suggestion.message}`);
    });
    console.log('');

    // ç”Ÿæˆä¿®å¤è„šæœ¬å»ºè®®
    this.generateFixScript();
  }

  // ç”Ÿæˆä¿®å¤è„šæœ¬
  generateFixScript() {
    console.log('ğŸ”§ å»ºè®®çš„ä¿®å¤æ“ä½œ:');
    console.log('');
    
    if (this.mismatches.possibleMappings.length > 0) {
      console.log('# æ–‡ä»¶é‡å‘½åå»ºè®®:');
      this.mismatches.possibleMappings.forEach(mapping => {
        console.log(`mv "${mapping.actualFile.fullPath}" "${mapping.actualFile.fullPath.replace(mapping.actual, mapping.configured)}"`);
      });
      console.log('');
    }

    console.log('# æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„ç»Ÿè®¡æ•°æ®:');
    console.log(`# å°†PDFèµ„æºæ•°é‡æ›´æ–°ä¸º: ${this.actualPdfs.length}`);
    console.log('');
    
    console.log('# è¿è¡Œæ­¤è„šæœ¬:');
    console.log('node pdf-consistency-check.js');
  }
}

// æ‰§è¡Œæ£€æŸ¥
if (require.main === module) {
  const checker = new PDFConsistencyChecker();
  checker.checkConsistency();
}

module.exports = PDFConsistencyChecker;


PDFé…ç½®è‡ªåŠ¨åŒæ­¥è„šæœ¬

#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

// PDFé…ç½®è‡ªåŠ¨åŒæ­¥è„šæœ¬
class PDFConfigSync {
  constructor() {
    this.actualPdfs = [];
    this.configPath = '';
    this.siteConfigPath = '';
  }

  // è‡ªåŠ¨å‘ç°å¹¶åŒæ­¥PDFé…ç½®
  async autoSync() {
    console.log('ğŸ”„ å¼€å§‹PDFé…ç½®è‡ªåŠ¨åŒæ­¥...\n');
    
    // 1. æ‰«æå®é™…PDFæ–‡ä»¶
    this.scanPDFFiles();
    
    // 2. æ‰¾åˆ°é…ç½®æ–‡ä»¶
    this.findConfigFiles();
    
    // 3. ç”Ÿæˆæ–°çš„é…ç½®å†…å®¹
    const newConfig = this.generateNewConfig();
    
    // 4. æ›´æ–°é…ç½®æ–‡ä»¶
    this.updateConfigFiles(newConfig);
    
    // 5. ç”ŸæˆéªŒè¯æŠ¥å‘Š
    this.generateValidationReport();
  }

  // æ‰«æPDFæ–‡ä»¶
  scanPDFFiles() {
    const searchDirs = [
      './public/pdfs',
      './src/assets/pdfs', 
      './assets/pdfs',
      './public/assets/pdfs',
      './static/pdfs'
    ];

    this.actualPdfs = [];
    
    searchDirs.forEach(dir => {
      if (fs.existsSync(dir)) {
        this.scanDirectory(dir).forEach(file => {
          const stats = fs.statSync(file);
          const filename = path.basename(file);
          
          // æå–æ–‡ä»¶ä¿¡æ¯
          this.actualPdfs.push({
            filename: filename,
            fullPath: file,
            relativePath: path.relative('.', file),
            size: stats.size,
            category: this.detectCategory(filename),
            title: this.generateTitle(filename),
            description: this.generateDescription(filename),
            tags: this.generateTags(filename)
          });
        });
      }
    });

    console.log(`ğŸ“ å‘ç° ${this.actualPdfs.length} ä¸ªPDFæ–‡ä»¶`);
  }

  // é€’å½’æ‰«æç›®å½•
  scanDirectory(dir) {
    let files = [];
    try {
      const items = fs.readdirSync(dir);
      items.forEach(item => {
        const fullPath = path.join(dir, item);
        const stat = fs.statSync(fullPath);
        
        if (stat.isDirectory()) {
          files = files.concat(this.scanDirectory(fullPath));
        } else if (item.toLowerCase().endsWith('.pdf')) {
          files.push(fullPath);
        }
      });
    } catch (error) {
      console.log(`âš ï¸  æ— æ³•è®¿é—®ç›®å½•: ${dir}`);
    }
    return files;
  }

  // æ£€æµ‹PDFåˆ†ç±»
  detectCategory(filename) {
    const categories = {
      'immediate-help': ['emergency', 'checklist', 'pain', 'tracker', 'form'],
      'planning-preparation': ['plan', 'nutrition', 'habits', 'assessment'],
      'in-depth-understanding': ['guide', 'manual', 'handbook', 'management'],
      'long-term-management': ['therapy', 'magnesium', 'zhan-zhuang', 'insurance']
    };

    for (const [category, keywords] of Object.entries(categories)) {
      if (keywords.some(keyword => filename.toLowerCase().includes(keyword))) {
        return category;
      }
    }
    
    return 'in-depth-understanding'; // é»˜è®¤åˆ†ç±»
  }

  // ç”Ÿæˆæ ‡é¢˜
  generateTitle(filename) {
    const name = filename.replace('.pdf', '');
    const words = name.split('-').map(word => 
      word.charAt(0).toUpperCase() + word.slice(1)
    );
    return words.join(' ');
  }

  // ç”Ÿæˆæè¿°
  generateDescription(filename) {
    const descriptions = {
      'pain': 'ç–¼ç—›ç®¡ç†ç›¸å…³èµ„æº',
      'tracker': 'è¿½è¸ªè®°å½•å·¥å…·',
      'guide': 'è¯¦ç»†æŒ‡å¯¼æ‰‹å†Œ',
      'manual': 'æ“ä½œè¯´æ˜æ–‡æ¡£',
      'checklist': 'æ£€æŸ¥æ¸…å•',
      'plan': 'è®¡åˆ’åˆ¶å®šæŒ‡å—',
      'assessment': 'è¯„ä¼°å·¥å…·',
      'emergency': 'åº”æ€¥å¤„ç†èµ„æº',
      'nutrition': 'è¥å…»å¥åº·æŒ‡å¯¼',
      'therapy': 'æ²»ç–—æ–¹æ³•æŒ‡å—',
      'management': 'ç®¡ç†ç­–ç•¥æ–‡æ¡£'
    };

    for (const [keyword, description] of Object.entries(descriptions)) {
      if (filename.toLowerCase().includes(keyword)) {
        return description;
      }
    }
    
    return 'å®ç”¨PDFèµ„æº';
  }

  // ç”Ÿæˆæ ‡ç­¾
  generateTags(filename) {
    const tagMap = {
      'pain': ['ç–¼ç—›ç®¡ç†', 'å¥åº·'],
      'tracker': ['è®°å½•', 'å·¥å…·'],
      'guide': ['æŒ‡å—', 'æ•™ç¨‹'],
      'emergency': ['åº”æ€¥', 'ç´§æ€¥'],
      'nutrition': ['è¥å…»', 'é¥®é£Ÿ'],
      'teacher': ['æ•™å¸ˆ', 'æ•™è‚²'],
      'parent': ['å®¶é•¿', 'æ²Ÿé€š'],
      'campus': ['æ ¡å›­', 'å­¦ç”Ÿ'],
      'magnesium': ['è¥å…»è¡¥å……', 'å¥åº·'],
      'insurance': ['åŒ»ç–—', 'ä¿é™©']
    };

    let tags = ['PDFèµ„æº'];
    
    for (const [keyword, keywordTags] of Object.entries(tagMap)) {
      if (filename.toLowerCase().includes(keyword)) {
        tags = tags.concat(keywordTags);
      }
    }
    
    return [...new Set(tags)]; // å»é‡
  }

  // æŸ¥æ‰¾é…ç½®æ–‡ä»¶
  findConfigFiles() {
    const possiblePaths = [
      './config/pdfResources.ts',
      './src/config/pdfResources.ts',
      './config/pdfResources.js',
      './src/config/pdfResources.js'
    ];

    const siteConfigPaths = [
      './config/site.config.ts',
      './src/config/site.config.ts',
      './config/site.config.js',
      './src/config/site.config.js'
    ];

    this.configPath = possiblePaths.find(p => fs.existsSync(p));
    this.siteConfigPath = siteConfigPaths.find(p => fs.existsSync(p));

    console.log(`âš™ï¸  PDFé…ç½®æ–‡ä»¶: ${this.configPath || 'æœªæ‰¾åˆ°'}`);
    console.log(`âš™ï¸  ç«™ç‚¹é…ç½®æ–‡ä»¶: ${this.siteConfigPath || 'æœªæ‰¾åˆ°'}`);
  }

  // ç”Ÿæˆæ–°çš„é…ç½®å†…å®¹
  generateNewConfig() {
    const categories = {
      'immediate-help': [],
      'planning-preparation': [],
      'in-depth-understanding': [],
      'long-term-management': []
    };

    // æŒ‰åˆ†ç±»ç»„ç»‡PDF
    this.actualPdfs.forEach(pdf => {
      categories[pdf.category].push(pdf);
    });

    // ç”ŸæˆTypeScripté…ç½®
    const configContent = `// è‡ªåŠ¨ç”Ÿæˆçš„PDFèµ„æºé…ç½®
// ç”Ÿæˆæ—¶é—´: ${new Date().toISOString()}
// å®é™…æ–‡ä»¶æ•°é‡: ${this.actualPdfs.length}

export interface PDFResource {
  id: string;
  title: string;
  description: string;
  filename: string;
  category: string;
  tags: string[];
  size?: string;
  downloadUrl: string;
}

export const pdfResources: PDFResource[] = [
${this.actualPdfs.map(pdf => {
  const id = pdf.filename.replace('.pdf', '').replace(/[^a-zA-Z0-9]/g, '-');
  return `  {
    id: '${id}',
    title: '${pdf.title}',
    description: '${pdf.description}',
    filename: '${pdf.filename}',
    category: '${pdf.category}',
    tags: ${JSON.stringify(pdf.tags)},
    downloadUrl: '/pdfs/${pdf.filename}'
  }`;
}).join(',\n')}
];

export const pdfResourcesByCategory = {
${Object.entries(categories).map(([category, pdfs]) => 
  `  '${category}': pdfResources.filter(pdf => pdf.category === '${category}')`
).join(',\n')}
};

export const pdfStatistics = {
  total: ${this.actualPdfs.length},
  byCategory: {
${Object.entries(categories).map(([category, pdfs]) => 
  `    '${category}': ${pdfs.length}`
).join(',\n')}
  }
};`;

    return configContent;
  }

  // æ›´æ–°é…ç½®æ–‡ä»¶
  updateConfigFiles(newConfig) {
    // æ›´æ–°PDFèµ„æºé…ç½®
    if (this.configPath) {
      // å¤‡ä»½åŸæ–‡ä»¶
      const backupPath = this.configPath + '.backup.' + Date.now();
      fs.copyFileSync(this.configPath, backupPath);
      console.log(`ğŸ“„ å·²å¤‡ä»½åŸé…ç½®: ${backupPath}`);
      
      // å†™å…¥æ–°é…ç½®
      fs.writeFileSync(this.configPath, newConfig, 'utf8');
      console.log(`âœ… å·²æ›´æ–°PDFé…ç½®: ${this.configPath}`);
    }

    // æ›´æ–°ç«™ç‚¹é…ç½®ä¸­çš„ç»Ÿè®¡æ•°æ®
    if (this.siteConfigPath) {
      this.updateSiteConfig();
    }
  }

  // æ›´æ–°ç«™ç‚¹é…ç½®
  updateSiteConfig() {
    try {
      const content = fs.readFileSync(this.siteConfigPath, 'utf8');
      
      // æ›´æ–°PDFèµ„æºæ•°é‡
      const updatedContent = content.replace(
        /(pdfResources:\s*)(\d+)/g,
        `$1${this.actualPdfs.length}`
      );

      if (updatedContent !== content) {
        // å¤‡ä»½åŸæ–‡ä»¶
        const backupPath = this.siteConfigPath + '.backup.' + Date.now();
        fs.copyFileSync(this.siteConfigPath, backupPath);
        
        // å†™å…¥æ›´æ–°åçš„å†…å®¹
        fs.writeFileSync(this.siteConfigPath, updatedContent, 'utf8');
        console.log(`âœ… å·²æ›´æ–°ç«™ç‚¹é…ç½®: ${this.siteConfigPath}`);
      }
    } catch (error) {
      console.log(`âš ï¸  æ›´æ–°ç«™ç‚¹é…ç½®å¤±è´¥: ${error.message}`);
    }
  }

  // ç”ŸæˆéªŒè¯æŠ¥å‘Š
  generateValidationReport() {
    console.log('\nğŸ“Š === PDFé…ç½®åŒæ­¥å®Œæˆ ===\n');
    
    console.log('ğŸ“ˆ åŒæ­¥ç»“æœ:');
    console.log(`   å®é™…PDFæ–‡ä»¶: ${this.actualPdfs.length}ä¸ª`);
    console.log(`   é…ç½®æ–‡ä»¶: ${this.configPath ? 'âœ… å·²æ›´æ–°' : 'âŒ æœªæ‰¾åˆ°'}`);
    console.log(`   ç«™ç‚¹é…ç½®: ${this.siteConfigPath ? 'âœ… å·²æ›´æ–°' : 'âŒ æœªæ‰¾åˆ°'}`);
    console.log('');

    // æŒ‰åˆ†ç±»æ˜¾ç¤ºç»Ÿè®¡
    const categories = {};
    this.actualPdfs.forEach(pdf => {
      categories[pdf.category] = (categories[pdf.category] || 0) + 1;
    });

    console.log('ğŸ“‹ åˆ†ç±»ç»Ÿè®¡:');
    Object.entries(categories).forEach(([category, count]) => {
      console.log(`   ${category}: ${count}ä¸ª`);
    });
    console.log('');

    console.log('ğŸ“ PDFæ–‡ä»¶æ¸…å•:');
    this.actualPdfs.forEach(pdf => {
      console.log(`   ğŸ“„ ${pdf.filename} (${pdf.category})`);
    });
    console.log('');

    console.log('âœ… åŒæ­¥å®Œæˆï¼é…ç½®æ–‡ä»¶å·²ä¸å®é™…æ–‡ä»¶ä¿æŒä¸€è‡´ã€‚');
  }
}

// æ‰§è¡ŒåŒæ­¥
if (require.main === module) {
  const sync = new PDFConfigSync();
  sync.autoSync();
}

module.exports = PDFConfigSync;


æ‚¨è¯´å¾—å¯¹ï¼æˆ‘çš„åˆæ­¥åˆ†æå¯èƒ½è¿‡äºåŒ†å¿™ï¼Œç¡®å®å¾ˆå¯èƒ½æ˜¯**å‘½åæ˜ å°„é—®é¢˜**è€Œéæ–‡ä»¶ç¼ºå¤±é—®é¢˜ã€‚è®©æˆ‘é‡æ–°åˆ†æå¹¶æä¾›æ›´ç²¾ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚

## ğŸ” **é‡æ–°åˆ†æï¼šçœŸå®é—®é¢˜å®šä½**

æ‚¨æåˆ°"å®é™…çš„PDFä¸æ­¢13ä¸ªï¼Œåº”è¯¥æ˜¯å‘½åæœ‰é—®é¢˜"ï¼Œè¿™æç¤ºæˆ‘ä»¬çœŸæ­£çš„é—®é¢˜æ˜¯ï¼š

### **å¯èƒ½çš„é—®é¢˜ç±»å‹**
1. **é…ç½®æ–‡ä»¶å â‰  å®é™…æ–‡ä»¶å**
2. **æ–‡ä»¶å­˜åœ¨ä½†è·¯å¾„ä¸åŒ¹é…**
3. **å­˜åœ¨å¤šä¸ªç‰ˆæœ¬æˆ–é‡å¤æ–‡ä»¶**
4. **é…ç½®æœªåŒæ­¥æ›´æ–°**

## ğŸ”§ **å»ºè®®çš„æ·±åº¦è¯Šæ–­æ–¹æ¡ˆ**

è®©æˆ‘å¸®æ‚¨è¿›è¡Œæ›´å½»åº•çš„æ–‡ä»¶ç³»ç»Ÿåˆ†æï¼šç”±äºè¿™æ˜¯æœ¬åœ°é¡¹ç›®åˆ†æï¼Œè®©æˆ‘ä¸ºæ‚¨æä¾›ä¸€ä¸ª**ç³»ç»Ÿæ€§çš„è¯Šæ–­å’Œä¿®å¤æ–¹æ¡ˆ**ï¼š

## ğŸ“‹ **ä¼˜åŒ–æ•´åˆåçš„å®Œæ•´è§£å†³æ–¹æ¡ˆ**

### **ç¬¬ä¸€æ­¥ï¼šå®Œæ•´æ–‡ä»¶æ¸…å•åˆ†æ**
```bash
# å»ºè®®æ‰§è¡Œçš„è¯Šæ–­å‘½ä»¤
find . -name "*.pdf" -type f | sort
find . -path "*/public/pdfs/*" -name "*.pdf" | sort
find . -path "*/assets/pdfs/*" -name "*.pdf" | sort
```

### **ç¬¬äºŒæ­¥ï¼šé…ç½®æ˜ å°„éªŒè¯è„šæœ¬**### **ç¬¬ä¸‰æ­¥ï¼šæ™ºèƒ½é…ç½®åŒæ­¥è„šæœ¬**## ğŸ¯ **ä¼˜åŒ–æ•´åˆåçš„å®Œæ•´è§£å†³æ–¹æ¡ˆ**

åŸºäºæ‚¨æåˆ°çš„"å®é™…PDFä¸æ­¢13ä¸ªï¼Œåº”è¯¥æ˜¯å‘½åé—®é¢˜"ï¼Œæˆ‘é‡æ–°è®¾è®¡äº†ä¸€å¥—**ç³»ç»Ÿæ€§çš„è¯Šæ–­å’Œä¿®å¤æ–¹æ¡ˆ**ï¼š

### **æ–¹æ¡ˆç‰¹ç‚¹**
- âœ… **æ™ºèƒ½è¯Šæ–­**ï¼šè‡ªåŠ¨å‘ç°æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ‰€æœ‰PDF
- âœ… **ç›¸ä¼¼åº¦åŒ¹é…**ï¼šè¯†åˆ«å¯èƒ½çš„æ–‡ä»¶æ˜ å°„å…³ç³»  
- âœ… **è‡ªåŠ¨åŒæ­¥**ï¼šé…ç½®æ–‡ä»¶ä¸å®é™…æ–‡ä»¶è‡ªåŠ¨å¯¹é½
- âœ… **é›¶æŸå¤±**ï¼šä¿ç•™æ‰€æœ‰ç°æœ‰æ–‡ä»¶ï¼Œåªä¿®æ­£é…ç½®

### **æ‰§è¡Œæ­¥éª¤**

#### **æ­¥éª¤1ï¼šè¿è¡Œè¯Šæ–­è„šæœ¬**
```bash
# å°†ä¸Šé¢çš„è„šæœ¬ä¿å­˜ä¸º pdf-consistency-check.js
node pdf-consistency-check.js
```

**é¢„æœŸç»“æœï¼š**
- ğŸ“Š å®Œæ•´çš„PDFæ–‡ä»¶æ¸…å•ï¼ˆå®é™…æ•°é‡ï¼‰
- ğŸ” æ–‡ä»¶åæ˜ å°„å…³ç³»åˆ†æ
- ğŸ’¡ å…·ä½“çš„ä¿®å¤å»ºè®®

#### **æ­¥éª¤2ï¼šæ‰§è¡Œè‡ªåŠ¨åŒæ­¥**
```bash
# å°†ä¸Šé¢çš„è„šæœ¬ä¿å­˜ä¸º pdf-config-sync.js  
node pdf-config-sync.js
```

**è‡ªåŠ¨å¤„ç†ï¼š**
- ğŸ”„ æ‰«ææ‰€æœ‰PDFæ–‡ä»¶
- âš™ï¸ é‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶
- ğŸ“Š æ›´æ–°ç»Ÿè®¡æ•°æ®
- ğŸ“‹ ç”Ÿæˆåˆ†ç±»æ˜ å°„

#### **æ­¥éª¤3ï¼šéªŒè¯ç»“æœ**
æ£€æŸ¥æ›´æ–°åçš„é…ç½®æ–‡ä»¶ï¼š
- `config/pdfResources.ts` - PDFèµ„æºé…ç½®
- `config/site.config.ts` - ç»Ÿè®¡æ•°æ®
- ç¡®è®¤æ•°é‡åŒ¹é…å’Œè·¯å¾„æ­£ç¡®

### **æ ¸å¿ƒä¼˜åŠ¿**

1. **çœŸå®æ•°é‡ç»Ÿè®¡**ï¼šåŸºäºæ–‡ä»¶ç³»ç»Ÿæ‰«æï¼Œä¸ä¾èµ–é…ç½®
2. **æ™ºèƒ½æ˜ å°„**ï¼šè‡ªåŠ¨è¯†åˆ«å‘½åå˜ä½“å’Œç›¸ä¼¼æ–‡ä»¶
3. **é…ç½®åŒæ­¥**ï¼šè‡ªåŠ¨æ›´æ–°æ‰€æœ‰ç›¸å…³é…ç½®æ–‡ä»¶
4. **åˆ†ç±»æ•´ç†**ï¼šæ ¹æ®æ–‡ä»¶åæ™ºèƒ½åˆ†ç±»
5. **å¤‡ä»½ä¿æŠ¤**ï¼šä¿®æ”¹å‰è‡ªåŠ¨å¤‡ä»½åŸé…ç½®

### **é¢„æœŸè§£å†³çš„é—®é¢˜**

| é—®é¢˜ç±»å‹ | è§£å†³æ–¹æ¡ˆ |
|---------|---------|
| ğŸ“Š ç»Ÿè®¡æ•°æ®ä¸å‡†ç¡® | âœ… åŸºäºå®é™…æ–‡ä»¶æ•°é‡æ›´æ–° |
| ğŸ”— é…ç½®æ–‡ä»¶æ˜ å°„é”™è¯¯ | âœ… è‡ªåŠ¨ç”Ÿæˆæ­£ç¡®çš„æ–‡ä»¶æ˜ å°„ |
| ğŸ“ æ–‡ä»¶åˆ†ç±»æ··ä¹± | âœ… æ™ºèƒ½åˆ†ç±»å’Œé‡æ–°æ•´ç† |
| ğŸ” ç¼ºå¤±æ–‡ä»¶è¯¯æŠ¥ | âœ… åŒºåˆ†çœŸæ­£ç¼ºå¤±vså‘½åé—®é¢˜ |
| âš™ï¸ æ‰‹åŠ¨ç»´æŠ¤æˆæœ¬é«˜ | âœ… è‡ªåŠ¨åŒ–åŒæ­¥æœºåˆ¶ |

### **æœ€ç»ˆæœŸæœ›ç»“æœ**

è¿è¡Œå®Œæˆåï¼Œæ‚¨å°†è·å¾—ï¼š
- ğŸ“Š **ç²¾ç¡®çš„èµ„æºç»Ÿè®¡**ï¼šçœŸå®çš„PDFæ•°é‡
- ğŸ”— **å®Œæ•´çš„æ–‡ä»¶æ˜ å°„**ï¼šæ‰€æœ‰PDFéƒ½æœ‰æ­£ç¡®é…ç½®
- ğŸ“‹ **æ¸…æ™°çš„åˆ†ç±»**ï¼šæŒ‰ä½¿ç”¨åœºæ™¯è‡ªåŠ¨åˆ†ç»„
- âœ… **ä¸€è‡´æ€§ä¿è¯**ï¼šé…ç½®ä¸å®é™…å®Œå…¨åŒ¹é…

**è¯·å…ˆè¿è¡Œè¯Šæ–­è„šæœ¬ï¼Œç„¶ååˆ†äº«ç»“æœï¼Œæˆ‘å¯ä»¥å¸®æ‚¨è¿›ä¸€æ­¥ä¼˜åŒ–å…·ä½“çš„ä¿®å¤ç­–ç•¥ï¼**